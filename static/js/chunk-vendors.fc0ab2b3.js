(self["webpackChunkvue3_ipfs_demo"]=self["webpackChunkvue3_ipfs_demo"]||[]).push([[998],{9824:function(e,t){"use strict";const n=-8,r=-4,o=0,s=1,i=1,a=2,l=5,c=1024,u=2048,d=8192,h=0,p=4,f=8,g=12,m=12,y=16,v="undefined"!==typeof BigUint64Array,w=Symbol(),b=1024;function S(e,t){const n=new Uint32Array(e),o=new Uint16Array(e);var s=n[t+r>>>2]>>>1,i=t>>>1;if(s<=b)return String.fromCharCode.apply(String,o.subarray(i,i+s));const a=[];do{const e=o[i+b-1],t=e>=55296&&e<56320?b-1:b;a.push(String.fromCharCode.apply(String,o.subarray(i,i+=t))),s-=t}while(s>b);return a.join("")+String.fromCharCode.apply(String,o.subarray(i,i+s))}function _(e){const t={};function n(e,t){return e?S(e.buffer,t):"<yet unknown>"}const r=e.env=e.env||{};return r.abort=r.abort||function(e,o,s,i){const a=t.memory||r.memory;throw Error("abort: "+n(a,e)+" at "+n(a,o)+":"+s+":"+i)},r.trace=r.trace||function(e,o){const s=t.memory||r.memory;console.log("trace: "+n(s,e)+(o?" ":"")+Array.prototype.slice.call(arguments,2,2+o).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function E(e,t){const w=t.exports,b=w.memory,_=w.table,E=w["__alloc"],k=w["__retain"],C=w["__rtti_base"]||-1;function I(e){const t=new Uint32Array(b.buffer),n=t[C>>>2];if((e>>>=0)>=n)throw Error("invalid id: "+e);return t[(C+4>>>2)+2*e]}function A(e){const t=new Uint32Array(b.buffer),n=t[C>>>2];if((e>>>=0)>=n)throw Error("invalid id: "+e);return t[(C+4>>>2)+2*e+1]}function R(e){return 31-Math.clz32(e>>>l&31)}function x(e){const t=e.length,n=E(t<<1,s),r=new Uint16Array(b.buffer);for(var o=0,i=n>>>1;o<t;++o)r[i+o]=e.charCodeAt(o);return n}function O(e){const t=b.buffer,r=new Uint32Array(t)[e+n>>>2];if(r!==s)throw Error("not a string: "+e);return S(t,e)}function N(e,t,n){const r=b.buffer;if(n)switch(e){case 2:return new Float32Array(r);case 3:return new Float64Array(r)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(r);case 1:return new(t?Int16Array:Uint16Array)(r);case 2:return new(t?Int32Array:Uint32Array)(r);case 3:return new(t?BigInt64Array:BigUint64Array)(r)}throw Error("unsupported align: "+e)}function P(e,t){const n=I(e);if(!(n&(i|a)))throw Error("not an array: "+e+" @ "+n);const r=R(n),s=t.length,l=E(s<<r,o),v=E(n&a?y:g,e),w=new Uint32Array(b.buffer);w[v+h>>>2]=k(l),w[v+p>>>2]=l,w[v+f>>>2]=s<<r,n&a&&(w[v+m>>>2]=s);const S=N(r,n&c,n&u);if(n&d)for(let o=0;o<s;++o)S[(l>>>r)+o]=k(t[o]);else S.set(t,l>>>r);return v}function D(e){const t=new Uint32Array(b.buffer),o=t[e+n>>>2],s=I(o);if(!(s&i))throw Error("not an array: "+o);const l=R(s);var d=t[e+p>>>2];const h=s&a?t[e+m>>>2]:t[d+r>>>2]>>>l;return N(l,s&c,s&u).subarray(d>>>=l,d+h)}function U(e){const t=D(e),n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=t[o];return r}function L(e){const t=b.buffer,n=new Uint32Array(t)[e+r>>>2];return t.slice(e,e+n)}function B(e,t,n){return new e(M(e,t,n))}function M(e,t,n){const o=b.buffer,s=new Uint32Array(o),i=s[n+p>>>2];return new e(o,i,s[i+r>>>2]>>>t)}function F(e,t){const r=new Uint32Array(b.buffer);var o=r[e+n>>>2];if(o<=r[C>>>2])do{if(o==t)return!0}while(o=A(o));return!1}return e.__allocString=x,e.__getString=O,e.__allocArray=P,e.__getArrayView=D,e.__getArray=U,e.__getArrayBuffer=L,e.__getInt8Array=B.bind(null,Int8Array,0),e.__getInt8ArrayView=M.bind(null,Int8Array,0),e.__getUint8Array=B.bind(null,Uint8Array,0),e.__getUint8ArrayView=M.bind(null,Uint8Array,0),e.__getUint8ClampedArray=B.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=M.bind(null,Uint8ClampedArray,0),e.__getInt16Array=B.bind(null,Int16Array,1),e.__getInt16ArrayView=M.bind(null,Int16Array,1),e.__getUint16Array=B.bind(null,Uint16Array,1),e.__getUint16ArrayView=M.bind(null,Uint16Array,1),e.__getInt32Array=B.bind(null,Int32Array,2),e.__getInt32ArrayView=M.bind(null,Int32Array,2),e.__getUint32Array=B.bind(null,Uint32Array,2),e.__getUint32ArrayView=M.bind(null,Uint32Array,2),v&&(e.__getInt64Array=B.bind(null,BigInt64Array,3),e.__getInt64ArrayView=M.bind(null,BigInt64Array,3),e.__getUint64Array=B.bind(null,BigUint64Array,3),e.__getUint64ArrayView=M.bind(null,BigUint64Array,3)),e.__getFloat32Array=B.bind(null,Float32Array,2),e.__getFloat32ArrayView=M.bind(null,Float32Array,2),e.__getFloat64Array=B.bind(null,Float64Array,3),e.__getFloat64ArrayView=M.bind(null,Float64Array,3),e.__instanceof=F,e.memory=e.memory||b,e.table=e.table||_,T(w,e)}function k(e){return"undefined"!==typeof Response&&e instanceof Response}async function C(e,t){return k(e=await e)?A(e,t):E(_(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}function I(e,t){return E(_(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))}async function A(e,t){return WebAssembly.instantiateStreaming?E(_(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance):C(k(e=await e)?e.arrayBuffer():e,t)}function T(e,t){var n=t?Object.create(t):{},r=e["__argumentsLength"]?function(t){e["__argumentsLength"].value=t}:e["__setArgumentsLength"]||e["__setargc"]||function(){};for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;const t=e[o];let s=o.split("."),i=n;while(s.length>1){let e=s.shift();Object.prototype.hasOwnProperty.call(i,e)||(i[e]={}),i=i[e]}let a=s[0],l=a.indexOf("#");if(l>=0){let n=a.substring(0,l),s=i[n];if("undefined"===typeof s||!s.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function(){return this[w]}},e.wrap=function(t){return Object.create(e.prototype,{[w]:{value:t,writable:!1}})},s&&Object.getOwnPropertyNames(s).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t)))),i[n]=e}if(a=a.substring(l+1),i=i[n].prototype,/^(get|set):/.test(a)){if(!Object.prototype.hasOwnProperty.call(i,a=a.substring(4))){let t=e[o.replace("set:","get:")],n=e[o.replace("get:","set:")];Object.defineProperty(i,a,{get:function(){return t(this[w])},set:function(e){n(this[w],e)},enumerable:!0})}}else"constructor"===a?(i[a]=(...e)=>(r(e.length),t(...e))).original=t:(i[a]=function(...e){return r(e.length),t(this[w],...e)}).original=t}else/^(get|set):/.test(a)?Object.prototype.hasOwnProperty.call(i,a=a.substring(4))||Object.defineProperty(i,a,{get:e[o.replace("set:","get:")],set:e[o.replace("get:","set:")],enumerable:!0}):"function"===typeof t&&t!==r?(i[a]=(...e)=>(r(e.length),t(...e))).original=t:i[a]=t}return n}t.instantiate=C,t.instantiateSync=I,t.instantiateStreaming=A,t.demangle=T},2450:function(e,t,n){"use strict";e.exports=n(77)},77:function(e,t,n){"use strict";var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(8482),r.BufferWriter=n(5628),r.Reader=n(9958),r.BufferReader=n(3055),r.util=n(1436),r.rpc=n(3971),r.roots=n(9149),r.configure=o,o()},9958:function(e,t,n){"use strict";e.exports=l;var r,o=n(1436),s=o.LongBits,i=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},u=function(){return o.Buffer?function(e){return(l.create=function(e){return o.Buffer.isBuffer(e)?new r(e):c(e)})(e)}:c};function d(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=u(),l.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,l.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},l.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},l.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(e=7&this.uint32()))this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){r=e,l.create=u(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},3055:function(e,t,n){"use strict";e.exports=s;var r=n(9958);(s.prototype=Object.create(r.prototype)).constructor=s;var o=n(1436);function s(e){r.call(this,e)}s._configure=function(){o.Buffer&&(s.prototype._slice=o.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},9149:function(e){"use strict";e.exports={}},3971:function(e,t,n){"use strict";var r=t;r.Service=n(8295)},8295:function(e,t,n){"use strict";e.exports=o;var r=n(1436);function o(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,n,o,s,i){if(!s)throw TypeError("request must be specified");var a=this;if(!i)return r.asPromise(e,a,t,n,o,s);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,n){if(e)return a.emit("error",e,t),i(e);if(null!==n){if(!(n instanceof o))try{n=o[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",n,t),i(null,n)}a.end(!0)}))}catch(l){return a.emit("error",l,t),void setTimeout((function(){i(l)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},9961:function(e,t,n){"use strict";e.exports=o;var r=n(1436);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=o.zero=new o(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(e){if("number"===typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):s},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===i?s:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},1436:function(e,t,n){"use strict";var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function s(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(9961),r.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"===typeof e||e instanceof String},r.isObject=function(e){return e&&"object"===typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"===typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=s,r.ProtocolError=s("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},8482:function(e,t,n){"use strict";e.exports=d;var r,o=n(1436),s=o.LongBits,i=o.base64,a=o.utf8;function l(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return o.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function p(e,t,n){t[n]=255&e}function f(e,t,n){while(e>127)t[n++]=127&e|128,e>>>=7;t[n]=e}function g(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){while(e.hi)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;while(e.lo>127)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function y(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(d.alloc=o.pool(d.alloc,o.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new l(e,t,n),this.len+=t,this},g.prototype=Object.create(l.prototype),g.prototype.fn=f,d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new g((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var v=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(o.isString(e)){var n=d.alloc(t=i.length(e));i.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){var e=this.head.next,t=this.constructor.alloc(this.len),n=0;while(e)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=h(),r._configure()}},5628:function(e,t,n){"use strict";e.exports=s;var r=n(8482);(s.prototype=Object.create(r.prototype)).constructor=s;var o=n(1436);function s(){r.call(this)}function i(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}s._configure=function(){s.alloc=o._Buffer_allocUnsafe,s.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},s.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},s._configure()},8032:function(e,t,n){"use strict";function r(e,t){s(e)&&(e="100%");var n=i(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t)),e)}function o(e){return Math.min(1,Math.max(0,e))}function s(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)}function i(e){return"string"===typeof e&&-1!==e.indexOf("%")}function a(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function l(e){return e<=1?"".concat(100*Number(e),"%"):e}function c(e){return 1===e.length?"0"+e:String(e)}function u(e,t,n){return{r:255*r(e,255),g:255*r(t,255),b:255*r(n,255)}}function d(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var o=Math.max(e,t,n),s=Math.min(e,t,n),i=0,a=0,l=(o+s)/2;if(o===s)a=0,i=0;else{var c=o-s;switch(a=l>.5?c/(2-o-s):c/(o+s),o){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4;break;default:break}i/=6}return{h:i,s:a,l:l}}function h(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function p(e,t,n){var o,s,i;if(e=r(e,360),t=r(t,100),n=r(n,100),0===t)s=n,i=n,o=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=h(l,a,e+1/3),s=h(l,a,e),i=h(l,a,e-1/3)}return{r:255*o,g:255*s,b:255*i}}function f(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var o=Math.max(e,t,n),s=Math.min(e,t,n),i=0,a=o,l=o-s,c=0===o?0:l/o;if(o===s)i=0;else{switch(o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4;break;default:break}i/=6}return{h:i,s:c,v:a}}function g(e,t,n){e=6*r(e,360),t=r(t,100),n=r(n,100);var o=Math.floor(e),s=e-o,i=n*(1-t),a=n*(1-s*t),l=n*(1-(1-s)*t),c=o%6,u=[n,a,i,i,l,n][c],d=[l,n,n,a,i,i][c],h=[i,i,l,n,n,a][c];return{r:255*u,g:255*d,b:255*h}}function m(e,t,n,r){var o=[c(Math.round(e).toString(16)),c(Math.round(t).toString(16)),c(Math.round(n).toString(16))];return r&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function y(e,t,n,r,o){var s=[c(Math.round(e).toString(16)),c(Math.round(t).toString(16)),c(Math.round(n).toString(16)),c(v(r))];return o&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function v(e){return Math.round(255*parseFloat(e)).toString(16)}function w(e){return b(e)/255}function b(e){return parseInt(e,16)}function S(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}n.d(t,{C:function(){return N}});var _={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function E(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,s=null,i=!1,c=!1;return"string"===typeof e&&(e=x(e)),"object"===typeof e&&(O(e.r)&&O(e.g)&&O(e.b)?(t=u(e.r,e.g,e.b),i=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):O(e.h)&&O(e.s)&&O(e.v)?(r=l(e.s),o=l(e.v),t=g(e.h,r,o),i=!0,c="hsv"):O(e.h)&&O(e.s)&&O(e.l)&&(r=l(e.s),s=l(e.l),t=p(e.h,r,s),i=!0,c="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=a(n),{ok:i,format:e.format||c,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var k="[-\\+]?\\d+%?",C="[-\\+]?\\d*\\.\\d+%?",I="(?:".concat(C,")|(?:").concat(k,")"),A="[\\s|\\(]+(".concat(I,")[,|\\s]+(").concat(I,")[,|\\s]+(").concat(I,")\\s*\\)?"),T="[\\s|\\(]+(".concat(I,")[,|\\s]+(").concat(I,")[,|\\s]+(").concat(I,")[,|\\s]+(").concat(I,")\\s*\\)?"),R={CSS_UNIT:new RegExp(I),rgb:new RegExp("rgb"+A),rgba:new RegExp("rgba"+T),hsl:new RegExp("hsl"+A),hsla:new RegExp("hsla"+T),hsv:new RegExp("hsv"+A),hsva:new RegExp("hsva"+T),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function x(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(_[e])e=_[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=R.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=R.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=R.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=R.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=R.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=R.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=R.hex8.exec(e),n?{r:b(n[1]),g:b(n[2]),b:b(n[3]),a:w(n[4]),format:t?"name":"hex8"}:(n=R.hex6.exec(e),n?{r:b(n[1]),g:b(n[2]),b:b(n[3]),format:t?"name":"hex"}:(n=R.hex4.exec(e),n?{r:b(n[1]+n[1]),g:b(n[2]+n[2]),b:b(n[3]+n[3]),a:w(n[4]+n[4]),format:t?"name":"hex8"}:(n=R.hex3.exec(e),!!n&&{r:b(n[1]+n[1]),g:b(n[2]+n[2]),b:b(n[3]+n[3]),format:t?"name":"hex"})))))))))}function O(e){return Boolean(R.CSS_UNIT.exec(String(e)))}var N=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=S(t)),this.originalInput=t;var o=E(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e,t,n,r=this.toRgb(),o=r.r/255,s=r.g/255,i=r.b/255;return e=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),t=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4),n=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),.2126*e+.7152*t+.0722*n},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=a(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var e=this.toHsl().s;return 0===e},e.prototype.toHsv=function(){var e=f(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=f(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=d(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=d(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),m(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),y(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*r(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*r(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+m(this.r,this.g,this.b,!1),t=0,n=Object.entries(_);t<n.length;t++){var r=n[t],o=r[0],s=r[1];if(e===s)return o}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0,o=!t&&r&&(e.startsWith("hex")||"name"===e);return o?"name"===e&&0===this.a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=o(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=o(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=o(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=o(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),o=new e(t).toRgb(),s=n/100,i={r:(o.r-r.r)*s+r.r,g:(o.g-r.g)*s+r.g,b:(o.b-r.b)*s+r.b,a:(o.a-r.a)*s+r.a};return new e(i)},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),o=360/n,s=[this];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,s.push(new e(r));return s},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);var n=this.toHsv(),r=n.h,o=n.s,s=n.v,i=[],a=1/t;while(t--)i.push(new e({h:r,s:o,v:s})),s=(s+a)%1;return i},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),o=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/o,g:(n.g*n.a+r.g*r.a*(1-n.a))/o,b:(n.b*n.a+r.b*r.a*(1-n.a))/o,a:o})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,o=[this],s=360/t,i=1;i<t;i++)o.push(new e({h:(r+i*s)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}()},4537:function(e){"use strict";function t(e,t){var n=new Array(arguments.length-1),r=0,o=2,s=!0;while(o<arguments.length)n[r++]=arguments[o++];return new Promise((function(o,i){n[r]=function(e){if(s)if(s=!1,e)i(e);else{var t=new Array(arguments.length-1),n=0;while(n<t.length)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(a){s&&(s=!1,i(a))}}))}e.exports=t},7419:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;var n=0;while(--t%4>1&&"="===e.charAt(t))++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),s=0;s<64;)o[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(e,t,n){var o,s=null,i=[],a=0,l=0;while(t<n){var c=e[t++];switch(l){case 0:i[a++]=r[c>>2],o=(3&c)<<4,l=1;break;case 1:i[a++]=r[o|c>>4],o=(15&c)<<2,l=2;break;case 2:i[a++]=r[o|c>>6],i[a++]=r[63&c],l=0;break}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0)}return l&&(i[a++]=r[o],i[a++]=61,1===l&&(i[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};var i="invalid encoding";n.decode=function(e,t,n){for(var r,s=n,a=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&a>1)break;if(void 0===(c=o[c]))throw Error(i);switch(a){case 0:r=c,a=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:t[n++]=(3&r)<<6|c,a=0;break}}if(1===a)throw Error(i);return n-s},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},945:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function s(e,r,o){t[0]=e,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function i(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?o:s,e.writeFloatBE=r?s:o,e.readFloatLE=r?i:a,e.readFloatBE=r?a:i}():function(){function t(e,t,n,r){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var s=Math.floor(Math.log(t)/Math.LN2),i=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((o<<31|s+127<<23|i)>>>0,n,r)}}function i(e,t,n){var r=e(t,n),o=2*(r>>31)+1,s=r>>>23&255,i=8388607&r;return 255===s?i?NaN:o*(1/0):0===s?1401298464324817e-60*o*i:o*Math.pow(2,s-150)*(i+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=i.bind(null,o),e.readFloatBE=i.bind(null,s)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function s(e,r,o){t[0]=e,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function i(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?o:s,e.writeDoubleBE=r?s:o,e.readDoubleLE=r?i:a,e.readDoubleBE=r?a:i}():function(){function t(e,t,n,r,o,s){var i=r<0?1:0;if(i&&(r=-r),0===r)e(0,o,s+t),e(1/r>0?0:2147483648,o,s+n);else if(isNaN(r))e(0,o,s+t),e(2146959360,o,s+n);else if(r>17976931348623157e292)e(0,o,s+t),e((i<<31|2146435072)>>>0,o,s+n);else{var a;if(r<22250738585072014e-324)a=r/5e-324,e(a>>>0,o,s+t),e((i<<31|a/4294967296)>>>0,o,s+n);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),a=r*Math.pow(2,-l),e(4503599627370496*a>>>0,o,s+t),e((i<<31|l+1023<<20|1048576*a&1048575)>>>0,o,s+n)}}}function i(e,t,n,r,o){var s=e(r,o+t),i=e(r,o+n),a=2*(i>>31)+1,l=i>>>20&2047,c=4294967296*(1048575&i)+s;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=i.bind(null,o,0,4),e.readDoubleBE=i.bind(null,s,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:function(e){"use strict";function t(e,t,n){var r=n||8192,o=r>>>1,s=null,i=r;return function(n){if(n<1||n>o)return e(n);i+n>r&&(s=e(r),i=0);var a=t.call(s,i,i+=n);return 7&i&&(i=1+(7|i)),a}}e.exports=t},4997:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)n=e.charCodeAt(r),n<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){var r=n-t;if(r<1)return"";var o,s=null,i=[],a=0;while(t<n)o=e[t++],o<128?i[a++]=o:o>191&&o<224?i[a++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(o>>10),i[a++]=56320+(1023&o)):i[a++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(e,t,n){for(var r,o,s=n,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(o=e.charCodeAt(i+1)))?(r=65536+((1023&r)<<10)+(1023&o),++i,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-s}},8099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7117);function o(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}function s(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0}function i(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16}function a(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0}function l(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function c(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function u(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function d(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function h(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function p(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function f(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function g(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function m(e,t){void 0===t&&(t=0);var n=u(e,t),r=u(e,t+4);return 4294967296*n+r-4294967296*(r>>31)}function y(e,t){void 0===t&&(t=0);var n=d(e,t),r=d(e,t+4);return 4294967296*n+r}function v(e,t){void 0===t&&(t=0);var n=h(e,t),r=h(e,t+4);return 4294967296*r+n-4294967296*(n>>31)}function w(e,t){void 0===t&&(t=0);var n=p(e,t),r=p(e,t+4);return 4294967296*r+n}function b(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),f(e/4294967296>>>0,t,n),f(e>>>0,t,n+4),t}function S(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),g(e>>>0,t,n),g(e/4294967296>>>0,t,n+4),t}function _(e,t,n){if(void 0===n&&(n=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,o=1,s=e/8+n-1;s>=n;s--)r+=t[s]*o,o*=256;return r}function E(e,t,n){if(void 0===n&&(n=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,o=1,s=n;s<n+e/8;s++)r+=t[s]*o,o*=256;return r}function k(e,t,n,o){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===o&&(o=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var s=1,i=e/8+o-1;i>=o;i--)n[i]=t/s&255,s*=256;return n}function C(e,t,n,o){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===o&&(o=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var s=1,i=o;i<o+e/8;i++)n[i]=t/s&255,s*=256;return n}function I(e,t){void 0===t&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat32(t)}function A(e,t){void 0===t&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat32(t,!0)}function T(e,t){void 0===t&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat64(t)}function R(e,t){void 0===t&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat64(t,!0)}function x(e,t,n){void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setFloat32(n,e),t}function O(e,t,n){void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setFloat32(n,e,!0),t}function N(e,t,n){void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setFloat64(n,e),t}function P(e,t,n){void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setFloat64(n,e,!0),t}t.readInt16BE=o,t.readUint16BE=s,t.readInt16LE=i,t.readUint16LE=a,t.writeUint16BE=l,t.writeInt16BE=l,t.writeUint16LE=c,t.writeInt16LE=c,t.readInt32BE=u,t.readUint32BE=d,t.readInt32LE=h,t.readUint32LE=p,t.writeUint32BE=f,t.writeInt32BE=f,t.writeUint32LE=g,t.writeInt32LE=g,t.readInt64BE=m,t.readUint64BE=y,t.readInt64LE=v,t.readUint64LE=w,t.writeUint64BE=b,t.writeInt64BE=b,t.writeUint64LE=S,t.writeInt64LE=S,t.readUintBE=_,t.readUintLE=E,t.writeUintBE=k,t.writeUintLE=C,t.readFloat32BE=I,t.readFloat32LE=A,t.readFloat64BE=T,t.readFloat64LE=R,t.writeFloat32BE=x,t.writeFloat32LE=O,t.writeFloat64BE=N,t.writeFloat64LE=P},5501:function(e,t,n){"use strict";var r=n(5439),o=n(3027),s=n(7309),i=n(8099),a=n(4153);t.Cv=32,t.WH=12,t.pg=16;var l=new Uint8Array(16),c=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,n,o){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var i=new Uint8Array(16);i.set(e,i.length-e.length);var a=new Uint8Array(32);r.stream(this._key,i,a,4);var l,c=t.length+this.tagLength;if(o){if(o.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");l=o}else l=new Uint8Array(c);return r.streamXOR(this._key,i,t,l,4),this._authenticate(l.subarray(l.length-this.tagLength,l.length),a,l.subarray(0,l.length-this.tagLength),n),s.wipe(i),l},e.prototype.open=function(e,t,n,o){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var i=new Uint8Array(16);i.set(e,i.length-e.length);var l=new Uint8Array(32);r.stream(this._key,i,l,4);var c=new Uint8Array(this.tagLength);if(this._authenticate(c,l,t.subarray(0,t.length-this.tagLength),n),!a.equal(c,t.subarray(t.length-this.tagLength,t.length)))return null;var u,d=t.length-this.tagLength;if(o){if(o.length!==d)throw new Error("ChaCha20Poly1305: incorrect destination length");u=o}else u=new Uint8Array(d);return r.streamXOR(this._key,i,t.subarray(0,t.length-this.tagLength),u,4),s.wipe(i),u},e.prototype.clean=function(){return s.wipe(this._key),this},e.prototype._authenticate=function(e,t,n,r){var a=new o.Poly1305(t);r&&(a.update(r),r.length%16>0&&a.update(l.subarray(r.length%16))),a.update(n),n.length%16>0&&a.update(l.subarray(n.length%16));var c=new Uint8Array(8);r&&i.writeUint64LE(r.length,c),a.update(c),i.writeUint64LE(n.length,c),a.update(c);for(var u=a.digest(),d=0;d<u.length;d++)e[d]=u[d];a.clean(),s.wipe(u),s.wipe(c)},e}();t.OK=c},5439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8099),o=n(7309),s=20;function i(e,t,n){for(var o=1634760805,i=857760878,a=2036477234,l=1797285236,c=n[3]<<24|n[2]<<16|n[1]<<8|n[0],u=n[7]<<24|n[6]<<16|n[5]<<8|n[4],d=n[11]<<24|n[10]<<16|n[9]<<8|n[8],h=n[15]<<24|n[14]<<16|n[13]<<8|n[12],p=n[19]<<24|n[18]<<16|n[17]<<8|n[16],f=n[23]<<24|n[22]<<16|n[21]<<8|n[20],g=n[27]<<24|n[26]<<16|n[25]<<8|n[24],m=n[31]<<24|n[30]<<16|n[29]<<8|n[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],v=t[7]<<24|t[6]<<16|t[5]<<8|t[4],w=t[11]<<24|t[10]<<16|t[9]<<8|t[8],b=t[15]<<24|t[14]<<16|t[13]<<8|t[12],S=o,_=i,E=a,k=l,C=c,I=u,A=d,T=h,R=p,x=f,O=g,N=m,P=y,D=v,U=w,L=b,B=0;B<s;B+=2)S=S+C|0,P^=S,P=P>>>16|P<<16,R=R+P|0,C^=R,C=C>>>20|C<<12,_=_+I|0,D^=_,D=D>>>16|D<<16,x=x+D|0,I^=x,I=I>>>20|I<<12,E=E+A|0,U^=E,U=U>>>16|U<<16,O=O+U|0,A^=O,A=A>>>20|A<<12,k=k+T|0,L^=k,L=L>>>16|L<<16,N=N+L|0,T^=N,T=T>>>20|T<<12,E=E+A|0,U^=E,U=U>>>24|U<<8,O=O+U|0,A^=O,A=A>>>25|A<<7,k=k+T|0,L^=k,L=L>>>24|L<<8,N=N+L|0,T^=N,T=T>>>25|T<<7,_=_+I|0,D^=_,D=D>>>24|D<<8,x=x+D|0,I^=x,I=I>>>25|I<<7,S=S+C|0,P^=S,P=P>>>24|P<<8,R=R+P|0,C^=R,C=C>>>25|C<<7,S=S+I|0,L^=S,L=L>>>16|L<<16,O=O+L|0,I^=O,I=I>>>20|I<<12,_=_+A|0,P^=_,P=P>>>16|P<<16,N=N+P|0,A^=N,A=A>>>20|A<<12,E=E+T|0,D^=E,D=D>>>16|D<<16,R=R+D|0,T^=R,T=T>>>20|T<<12,k=k+C|0,U^=k,U=U>>>16|U<<16,x=x+U|0,C^=x,C=C>>>20|C<<12,E=E+T|0,D^=E,D=D>>>24|D<<8,R=R+D|0,T^=R,T=T>>>25|T<<7,k=k+C|0,U^=k,U=U>>>24|U<<8,x=x+U|0,C^=x,C=C>>>25|C<<7,_=_+A|0,P^=_,P=P>>>24|P<<8,N=N+P|0,A^=N,A=A>>>25|A<<7,S=S+I|0,L^=S,L=L>>>24|L<<8,O=O+L|0,I^=O,I=I>>>25|I<<7;r.writeUint32LE(S+o|0,e,0),r.writeUint32LE(_+i|0,e,4),r.writeUint32LE(E+a|0,e,8),r.writeUint32LE(k+l|0,e,12),r.writeUint32LE(C+c|0,e,16),r.writeUint32LE(I+u|0,e,20),r.writeUint32LE(A+d|0,e,24),r.writeUint32LE(T+h|0,e,28),r.writeUint32LE(R+p|0,e,32),r.writeUint32LE(x+f|0,e,36),r.writeUint32LE(O+g|0,e,40),r.writeUint32LE(N+m|0,e,44),r.writeUint32LE(P+y|0,e,48),r.writeUint32LE(D+v|0,e,52),r.writeUint32LE(U+w|0,e,56),r.writeUint32LE(L+b|0,e,60)}function a(e,t,n,r,s){if(void 0===s&&(s=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(r.length<n.length)throw new Error("ChaCha: destination is shorter than source");var a,l;if(0===s){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),l=a.length-t.length,a.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=t,l=s}for(var u=new Uint8Array(64),d=0;d<n.length;d+=64){i(u,a,e);for(var h=d;h<d+64&&h<n.length;h++)r[h]=n[h]^u[h-d];c(a,0,l)}return o.wipe(u),0===s&&o.wipe(a),r}function l(e,t,n,r){return void 0===r&&(r=0),o.wipe(n),a(e,t,n,n,r)}function c(e,t,n){var r=1;while(n--)r=r+(255&e[t])|0,e[t]=255&r,r>>>=8,t++;if(r>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=a,t.stream=l},4153:function(e,t){"use strict";function n(e,t,n){return~(e-1)&t|e-1&n}function r(e,t){return(0|e)-(0|t)-1>>>31&1}function o(e,t){if(e.length!==t.length)return 0;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 1&n-1>>>8}function s(e,t){return 0!==e.length&&0!==t.length&&0!==o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.select=n,t.lessOrEqual=r,t.compare=o,t.equal=s},9984:function(e,t){"use strict";function n(e){return"undefined"!==typeof e.saveState&&"undefined"!==typeof e.restoreState&&"undefined"!==typeof e.cleanSavedState}Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=n},512:function(e,t,n){"use strict";var r=n(5629),o=n(7309),s=function(){function e(e,t,n,o){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var s=r.hmac(this._hash,n,t);this._hmac=new r.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),o.wipe(this._buffer),o.wipe(this._counter),this._bufpos=0},e}();t.t=s},5629:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9984),o=n(4153),s=n(7309),i=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var o=0;o<n.length;o++)n[o]^=54;this._inner.update(n);for(o=0;o<n.length;o++)n[o]^=106;this._outer.update(n),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(n)}return e.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();function a(e,t,n){var r=new i(e,t);r.update(n);var o=r.digest();return r.clean(),o}t.HMAC=i,t.hmac=a,t.equal=o.equal},7117:function(e,t){"use strict";function n(e,t){var n=e>>>16&65535,r=65535&e,o=t>>>16&65535,s=65535&t;return r*s+(n*s+r*o<<16>>>0)|0}function r(e,t){return e+t|0}function o(e,t){return e-t|0}function s(e,t){return e<<t|e>>>32-t}function i(e,t){return e<<32-t|e>>>t}function a(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||n,t.add=r,t.sub=o,t.rotl=s,t.rotr=i,t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},3027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4153),o=n(7309);t.DIGEST_LENGTH=16;var s=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var n=e[0]|e[1]<<8;this._r[0]=8191&n;var r=e[2]|e[3]<<8;this._r[1]=8191&(n>>>13|r<<3);var o=e[4]|e[5]<<8;this._r[2]=7939&(r>>>10|o<<6);var s=e[6]|e[7]<<8;this._r[3]=8191&(o>>>7|s<<9);var i=e[8]|e[9]<<8;this._r[4]=255&(s>>>4|i<<12),this._r[5]=i>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=8191&(i>>>14|a<<2);var l=e[12]|e[13]<<8;this._r[7]=8065&(a>>>11|l<<5);var c=e[14]|e[15]<<8;this._r[8]=8191&(l>>>8|c<<8),this._r[9]=c>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,n){var r=this._fin?0:2048,o=this._h[0],s=this._h[1],i=this._h[2],a=this._h[3],l=this._h[4],c=this._h[5],u=this._h[6],d=this._h[7],h=this._h[8],p=this._h[9],f=this._r[0],g=this._r[1],m=this._r[2],y=this._r[3],v=this._r[4],w=this._r[5],b=this._r[6],S=this._r[7],_=this._r[8],E=this._r[9];while(n>=16){var k=e[t+0]|e[t+1]<<8;o+=8191&k;var C=e[t+2]|e[t+3]<<8;s+=8191&(k>>>13|C<<3);var I=e[t+4]|e[t+5]<<8;i+=8191&(C>>>10|I<<6);var A=e[t+6]|e[t+7]<<8;a+=8191&(I>>>7|A<<9);var T=e[t+8]|e[t+9]<<8;l+=8191&(A>>>4|T<<12),c+=T>>>1&8191;var R=e[t+10]|e[t+11]<<8;u+=8191&(T>>>14|R<<2);var x=e[t+12]|e[t+13]<<8;d+=8191&(R>>>11|x<<5);var O=e[t+14]|e[t+15]<<8;h+=8191&(x>>>8|O<<8),p+=O>>>5|r;var N=0,P=N;P+=o*f,P+=s*(5*E),P+=i*(5*_),P+=a*(5*S),P+=l*(5*b),N=P>>>13,P&=8191,P+=c*(5*w),P+=u*(5*v),P+=d*(5*y),P+=h*(5*m),P+=p*(5*g),N+=P>>>13,P&=8191;var D=N;D+=o*g,D+=s*f,D+=i*(5*E),D+=a*(5*_),D+=l*(5*S),N=D>>>13,D&=8191,D+=c*(5*b),D+=u*(5*w),D+=d*(5*v),D+=h*(5*y),D+=p*(5*m),N+=D>>>13,D&=8191;var U=N;U+=o*m,U+=s*g,U+=i*f,U+=a*(5*E),U+=l*(5*_),N=U>>>13,U&=8191,U+=c*(5*S),U+=u*(5*b),U+=d*(5*w),U+=h*(5*v),U+=p*(5*y),N+=U>>>13,U&=8191;var L=N;L+=o*y,L+=s*m,L+=i*g,L+=a*f,L+=l*(5*E),N=L>>>13,L&=8191,L+=c*(5*_),L+=u*(5*S),L+=d*(5*b),L+=h*(5*w),L+=p*(5*v),N+=L>>>13,L&=8191;var B=N;B+=o*v,B+=s*y,B+=i*m,B+=a*g,B+=l*f,N=B>>>13,B&=8191,B+=c*(5*E),B+=u*(5*_),B+=d*(5*S),B+=h*(5*b),B+=p*(5*w),N+=B>>>13,B&=8191;var M=N;M+=o*w,M+=s*v,M+=i*y,M+=a*m,M+=l*g,N=M>>>13,M&=8191,M+=c*f,M+=u*(5*E),M+=d*(5*_),M+=h*(5*S),M+=p*(5*b),N+=M>>>13,M&=8191;var F=N;F+=o*b,F+=s*w,F+=i*v,F+=a*y,F+=l*m,N=F>>>13,F&=8191,F+=c*g,F+=u*f,F+=d*(5*E),F+=h*(5*_),F+=p*(5*S),N+=F>>>13,F&=8191;var j=N;j+=o*S,j+=s*b,j+=i*w,j+=a*v,j+=l*y,N=j>>>13,j&=8191,j+=c*m,j+=u*g,j+=d*f,j+=h*(5*E),j+=p*(5*_),N+=j>>>13,j&=8191;var z=N;z+=o*_,z+=s*S,z+=i*b,z+=a*w,z+=l*v,N=z>>>13,z&=8191,z+=c*y,z+=u*m,z+=d*g,z+=h*f,z+=p*(5*E),N+=z>>>13,z&=8191;var $=N;$+=o*E,$+=s*_,$+=i*S,$+=a*b,$+=l*w,N=$>>>13,$&=8191,$+=c*v,$+=u*y,$+=d*m,$+=h*g,$+=p*f,N+=$>>>13,$&=8191,N=(N<<2)+N|0,N=N+P|0,P=8191&N,N>>>=13,D+=N,o=P,s=D,i=U,a=L,l=B,c=M,u=F,d=j,h=z,p=$,t+=16,n-=16}this._h[0]=o,this._h[1]=s,this._h[2]=i,this._h[3]=a,this._h[4]=l,this._h[5]=c,this._h[6]=u,this._h[7]=d,this._h[8]=h,this._h[9]=p},e.prototype.finish=function(e,t){void 0===t&&(t=0);var n,r,o,s,i=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=n,n=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*n,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,i[0]=this._h[0]+5,n=i[0]>>>13,i[0]&=8191,s=1;s<10;s++)i[s]=this._h[s]+n,n=i[s]>>>13,i[s]&=8191;for(i[9]-=8192,r=(1^n)-1,s=0;s<10;s++)i[s]&=r;for(r=~r,s=0;s<10;s++)this._h[s]=this._h[s]&r|i[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),o=this._h[0]+this._pad[0],this._h[0]=65535&o,s=1;s<8;s++)o=(this._h[s]+this._pad[s]|0)+(o>>>16)|0,this._h[s]=65535&o;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,n=0,r=e.length;if(this._leftover){t=16-this._leftover,t>r&&(t=r);for(var o=0;o<t;o++)this._buffer[this._leftover+o]=e[n+o];if(r-=t,n+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(r>=16&&(t=r-r%16,this._blocks(e,n,t),n+=t,r-=t),r){for(o=0;o<r;o++)this._buffer[this._leftover+o]=e[n+o];this._leftover+=r}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return o.wipe(this._buffer),o.wipe(this._r),o.wipe(this._h),o.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();function i(e,t){var n=new s(e);n.update(t);var r=n.digest();return n.clean(),r}function a(e,n){return e.length===t.DIGEST_LENGTH&&n.length===t.DIGEST_LENGTH&&r.equal(e,n)}t.Poly1305=s,t.oneTimeAuth=i,t.equal=a},1416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const r=n(6008),o=n(8099),s=n(7309);function i(e,n=t.defaultRandomSource){return n.randomBytes(e)}function a(e=t.defaultRandomSource){const n=i(4,e),r=(0,o.readUint32LE)(n);return(0,s.wipe)(n),r}t.defaultRandomSource=new r.SystemRandomSource,t.randomBytes=i,t.randomUint32=a;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,n=l,r=t.defaultRandomSource){if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let o="";const a=n.length,c=256-256%a;while(e>0){const t=i(Math.ceil(256*e/c),r);for(let r=0;r<t.length&&e>0;r++){const s=t[r];s<c&&(o+=n.charAt(s%a),e--)}(0,s.wipe)(t)}return o}function u(e,n=l,r=t.defaultRandomSource){const o=Math.ceil(e/(Math.log(n.length)/Math.LN2));return c(o,n,r)}t.randomString=c,t.randomStringForEntropy=u},5455:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;const n=65536;class r{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!==typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let r=0;r<t.length;r+=n)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,n)));return t}}t.BrowserRandomSource=r},8871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const r=n(7309);class o{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=n(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let r=0;r<n.length;r++)n[r]=t[r];return(0,r.wipe)(t),n}}t.NodeRandomSource=o},6008:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const r=n(5455),o=n(8871);class s{constructor(){return this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new o.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}t.SystemRandomSource=s},3294:function(e,t,n){"use strict";var r=n(8099),o=n(7309);t.k=32,t.cn=64;var s=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){o.wipe(this._buffer),o.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){while(this._bufferLength<this.blockSize&&t>0)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}t>=this.blockSize&&(n=a(this._temp,this._state,e,n,t),t%=this.blockSize);while(t>0)this._buffer[this._bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,o=t/536870912|0,s=t<<3,i=t%64<56?64:128;this._buffer[n]=128;for(var l=n+1;l<i-8;l++)this._buffer[l]=0;r.writeUint32BE(o,this._buffer,i-8),r.writeUint32BE(s,this._buffer,i-4),a(this._temp,this._state,this._buffer,0,i),this._finished=!0}for(l=0;l<this.digestLength/4;l++)r.writeUint32BE(this._state[l],e,4*l);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){o.wipe(e.state),e.buffer&&o.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=s;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,n,o,s){while(s>=64){for(var a=t[0],l=t[1],c=t[2],u=t[3],d=t[4],h=t[5],p=t[6],f=t[7],g=0;g<16;g++){var m=o+4*g;e[g]=r.readUint32BE(n,m)}for(g=16;g<64;g++){var y=e[g-2],v=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=e[g-15];var w=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(v+e[g-7]|0)+(w+e[g-16]|0)}for(g=0;g<64;g++){v=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&h^~d&p)|0)+(f+(i[g]+e[g]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&l^a&c^l&c)|0;f=p,p=h,h=d,d=u+v|0,u=c,c=l,l=a,a=v+w|0}t[0]+=a,t[1]+=l,t[2]+=c,t[3]+=u,t[4]+=d,t[5]+=h,t[6]+=p,t[7]+=f,o+=64,s-=64}return o}function l(e){var t=new s;t.update(e);var n=t.digest();return t.clean(),n}t.vp=l},7309:function(e,t){"use strict";function n(e){for(var t=0;t<e.length;t++)e[t]=0;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=n},7664:function(e,t,n){"use strict";t.gi=t.Au=t._w=t.KS=t.kz=void 0;const r=n(1416),o=n(7309);function s(e){const t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}t.kz=32,t.KS=32;const i=new Uint8Array(32);i[0]=9;const a=s([56129,1]);function l(e){let t=1;for(let n=0;n<16;n++){let r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function c(e,t,n){const r=~(n-1);for(let o=0;o<16;o++){const n=r&(e[o]^t[o]);e[o]^=n,t[o]^=n}}function u(e,t){const n=s(),r=s();for(let o=0;o<16;o++)r[o]=t[o];l(r),l(r),l(r);for(let o=0;o<2;o++){n[0]=r[0]-65517;for(let t=1;t<15;t++)n[t]=r[t]-65535-(n[t-1]>>16&1),n[t-1]&=65535;n[15]=r[15]-32767-(n[14]>>16&1);const e=n[15]>>16&1;n[14]&=65535,c(r,n,1-e)}for(let o=0;o<16;o++)e[2*o]=255&r[o],e[2*o+1]=r[o]>>8}function d(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function h(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]+n[r]}function p(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]-n[r]}function f(e,t,n){let r,o,s=0,i=0,a=0,l=0,c=0,u=0,d=0,h=0,p=0,f=0,g=0,m=0,y=0,v=0,w=0,b=0,S=0,_=0,E=0,k=0,C=0,I=0,A=0,T=0,R=0,x=0,O=0,N=0,P=0,D=0,U=0,L=n[0],B=n[1],M=n[2],F=n[3],j=n[4],z=n[5],$=n[6],V=n[7],H=n[8],K=n[9],q=n[10],W=n[11],Y=n[12],G=n[13],Z=n[14],J=n[15];r=t[0],s+=r*L,i+=r*B,a+=r*M,l+=r*F,c+=r*j,u+=r*z,d+=r*$,h+=r*V,p+=r*H,f+=r*K,g+=r*q,m+=r*W,y+=r*Y,v+=r*G,w+=r*Z,b+=r*J,r=t[1],i+=r*L,a+=r*B,l+=r*M,c+=r*F,u+=r*j,d+=r*z,h+=r*$,p+=r*V,f+=r*H,g+=r*K,m+=r*q,y+=r*W,v+=r*Y,w+=r*G,b+=r*Z,S+=r*J,r=t[2],a+=r*L,l+=r*B,c+=r*M,u+=r*F,d+=r*j,h+=r*z,p+=r*$,f+=r*V,g+=r*H,m+=r*K,y+=r*q,v+=r*W,w+=r*Y,b+=r*G,S+=r*Z,_+=r*J,r=t[3],l+=r*L,c+=r*B,u+=r*M,d+=r*F,h+=r*j,p+=r*z,f+=r*$,g+=r*V,m+=r*H,y+=r*K,v+=r*q,w+=r*W,b+=r*Y,S+=r*G,_+=r*Z,E+=r*J,r=t[4],c+=r*L,u+=r*B,d+=r*M,h+=r*F,p+=r*j,f+=r*z,g+=r*$,m+=r*V,y+=r*H,v+=r*K,w+=r*q,b+=r*W,S+=r*Y,_+=r*G,E+=r*Z,k+=r*J,r=t[5],u+=r*L,d+=r*B,h+=r*M,p+=r*F,f+=r*j,g+=r*z,m+=r*$,y+=r*V,v+=r*H,w+=r*K,b+=r*q,S+=r*W,_+=r*Y,E+=r*G,k+=r*Z,C+=r*J,r=t[6],d+=r*L,h+=r*B,p+=r*M,f+=r*F,g+=r*j,m+=r*z,y+=r*$,v+=r*V,w+=r*H,b+=r*K,S+=r*q,_+=r*W,E+=r*Y,k+=r*G,C+=r*Z,I+=r*J,r=t[7],h+=r*L,p+=r*B,f+=r*M,g+=r*F,m+=r*j,y+=r*z,v+=r*$,w+=r*V,b+=r*H,S+=r*K,_+=r*q,E+=r*W,k+=r*Y,C+=r*G,I+=r*Z,A+=r*J,r=t[8],p+=r*L,f+=r*B,g+=r*M,m+=r*F,y+=r*j,v+=r*z,w+=r*$,b+=r*V,S+=r*H,_+=r*K,E+=r*q,k+=r*W,C+=r*Y,I+=r*G,A+=r*Z,T+=r*J,r=t[9],f+=r*L,g+=r*B,m+=r*M,y+=r*F,v+=r*j,w+=r*z,b+=r*$,S+=r*V,_+=r*H,E+=r*K,k+=r*q,C+=r*W,I+=r*Y,A+=r*G,T+=r*Z,R+=r*J,r=t[10],g+=r*L,m+=r*B,y+=r*M,v+=r*F,w+=r*j,b+=r*z,S+=r*$,_+=r*V,E+=r*H,k+=r*K,C+=r*q,I+=r*W,A+=r*Y,T+=r*G,R+=r*Z,x+=r*J,r=t[11],m+=r*L,y+=r*B,v+=r*M,w+=r*F,b+=r*j,S+=r*z,_+=r*$,E+=r*V,k+=r*H,C+=r*K,I+=r*q,A+=r*W,T+=r*Y,R+=r*G,x+=r*Z,O+=r*J,r=t[12],y+=r*L,v+=r*B,w+=r*M,b+=r*F,S+=r*j,_+=r*z,E+=r*$,k+=r*V,C+=r*H,I+=r*K,A+=r*q,T+=r*W,R+=r*Y,x+=r*G,O+=r*Z,N+=r*J,r=t[13],v+=r*L,w+=r*B,b+=r*M,S+=r*F,_+=r*j,E+=r*z,k+=r*$,C+=r*V,I+=r*H,A+=r*K,T+=r*q,R+=r*W,x+=r*Y,O+=r*G,N+=r*Z,P+=r*J,r=t[14],w+=r*L,b+=r*B,S+=r*M,_+=r*F,E+=r*j,k+=r*z,C+=r*$,I+=r*V,A+=r*H,T+=r*K,R+=r*q,x+=r*W,O+=r*Y,N+=r*G,P+=r*Z,D+=r*J,r=t[15],b+=r*L,S+=r*B,_+=r*M,E+=r*F,k+=r*j,C+=r*z,I+=r*$,A+=r*V,T+=r*H,R+=r*K,x+=r*q,O+=r*W,N+=r*Y,P+=r*G,D+=r*Z,U+=r*J,s+=38*S,i+=38*_,a+=38*E,l+=38*k,c+=38*C,u+=38*I,d+=38*A,h+=38*T,p+=38*R,f+=38*x,g+=38*O,m+=38*N,y+=38*P,v+=38*D,w+=38*U,o=1,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=w+o+65535,o=Math.floor(r/65536),w=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,s+=o-1+37*(o-1),o=1,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=w+o+65535,o=Math.floor(r/65536),w=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,s+=o-1+37*(o-1),e[0]=s,e[1]=i,e[2]=a,e[3]=l,e[4]=c,e[5]=u,e[6]=d,e[7]=h,e[8]=p,e[9]=f,e[10]=g,e[11]=m,e[12]=y,e[13]=v,e[14]=w,e[15]=b}function g(e,t){f(e,t,t)}function m(e,t){const n=s();for(let r=0;r<16;r++)n[r]=t[r];for(let r=253;r>=0;r--)g(n,n),2!==r&&4!==r&&f(n,n,t);for(let r=0;r<16;r++)e[r]=n[r]}function y(e,t){const n=new Uint8Array(32),r=new Float64Array(80),o=s(),i=s(),l=s(),y=s(),v=s(),w=s();for(let s=0;s<31;s++)n[s]=e[s];n[31]=127&e[31]|64,n[0]&=248,d(r,t);for(let s=0;s<16;s++)i[s]=r[s];o[0]=y[0]=1;for(let s=254;s>=0;--s){const e=n[s>>>3]>>>(7&s)&1;c(o,i,e),c(l,y,e),h(v,o,l),p(o,o,l),h(l,i,y),p(i,i,y),g(y,v),g(w,o),f(o,l,o),f(l,i,v),h(v,o,l),p(o,o,l),g(i,o),p(l,y,w),f(o,l,a),h(o,o,y),f(l,l,o),f(o,y,w),f(y,i,r),g(i,v),c(o,i,e),c(l,y,e)}for(let s=0;s<16;s++)r[s+16]=o[s],r[s+32]=l[s],r[s+48]=i[s],r[s+64]=y[s];const b=r.subarray(32),S=r.subarray(16);m(b,b),f(S,S,b);const _=new Uint8Array(32);return u(_,S),_}function v(e){return y(e,i)}function w(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const n=new Uint8Array(e),r=v(n);return{publicKey:r,secretKey:n}}function b(e){const t=(0,r.randomBytes)(32,e),n=w(t);return(0,o.wipe)(t),n}function S(e,n,r=!1){if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(n.length!==t.kz)throw new Error("X25519: incorrect public key length");const o=y(e,n);if(r){let e=0;for(let t=0;t<o.length;t++)e|=o[t];if(0===e)throw new Error("X25519: invalid shared key")}return o}t._w=w,t.Au=b,t.gi=S},3573:function(e,t){"use strict";const n=Math.exp;e.exports=function(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,r,o=0,s=0,i=0,a={};function l(t,r){return 1-n(-(t-r)/e)}return a.push=function(e,n){if(r){const a=l(e,r),c=n-t,u=a*c;t=a*n+(1-a)*t,o=(1-a)*(o+c*u),s=Math.sqrt(o),i=t+a*c}else t=n;r=e},a.movingAverage=function(){return t},a.variance=function(){return o},a.deviation=function(){return s},a.forecast=function(){return i},a}},2262:function(e,t,n){"use strict";n.d(t,{B:function(){return i},BK:function(){return Ye},Bj:function(){return s},EB:function(){return c},Fl:function(){return Xe},IU:function(){return Pe},Jd:function(){return I},OT:function(){return Ae},PG:function(){return Re},SU:function(){return Ke},Um:function(){return Ie},Vh:function(){return Ze},WL:function(){return We},X$:function(){return x},X3:function(){return Ne},XI:function(){return ze},Xl:function(){return De},dq:function(){return Fe},iH:function(){return je},j:function(){return T},lk:function(){return A},nZ:function(){return l},oR:function(){return He},qj:function(){return Ce},qq:function(){return _},yT:function(){return Oe}});var r=n(3577);let o;class s{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=o,!e&&o&&(this.index=(o.scopes||(o.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=o;try{return o=this,e()}finally{o=t}}else 0}on(){o=this}off(){o=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function i(e){return new s(e)}function a(e,t=o){t&&t.active&&t.effects.push(e)}function l(){return o}function c(e){o&&o.cleanups.push(e)}const u=e=>{const t=new Set(e);return t.w=0,t.n=0,t},d=e=>(e.w&y)>0,h=e=>(e.n&y)>0,p=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=y},f=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const o=t[r];d(o)&&!h(o)?o.delete(e):t[n++]=o,o.w&=~y,o.n&=~y}t.length=n}},g=new WeakMap;let m=0,y=1;const v=30;let w;const b=Symbol(""),S=Symbol("");class _{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let e=w,t=k;while(e){if(e===this)return;e=e.parent}try{return this.parent=w,w=this,k=!0,y=1<<++m,m<=v?p(this):E(this),this.fn()}finally{m<=v&&f(this),y=1<<--m,w=this.parent,k=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){w===this?this.deferStop=!0:this.active&&(E(this),this.onStop&&this.onStop(),this.active=!1)}}function E(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let k=!0;const C=[];function I(){C.push(k),k=!1}function A(){const e=C.pop();k=void 0===e||e}function T(e,t,n){if(k&&w){let t=g.get(e);t||g.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=u());const o=void 0;R(r,o)}}function R(e,t){let n=!1;m<=v?h(e)||(e.n|=y,n=!d(e)):n=!e.has(w),n&&(e.add(w),w.deps.push(e))}function x(e,t,n,o,s,i){const a=g.get(e);if(!a)return;let l=[];if("clear"===t)l=[...a.values()];else if("length"===n&&(0,r.kJ)(e)){const e=Number(o);a.forEach(((t,n)=>{("length"===n||n>=e)&&l.push(t)}))}else switch(void 0!==n&&l.push(a.get(n)),t){case"add":(0,r.kJ)(e)?(0,r.S0)(n)&&l.push(a.get("length")):(l.push(a.get(b)),(0,r._N)(e)&&l.push(a.get(S)));break;case"delete":(0,r.kJ)(e)||(l.push(a.get(b)),(0,r._N)(e)&&l.push(a.get(S)));break;case"set":(0,r._N)(e)&&l.push(a.get(b));break}if(1===l.length)l[0]&&O(l[0]);else{const e=[];for(const t of l)t&&e.push(...t);O(u(e))}}function O(e,t){const n=(0,r.kJ)(e)?e:[...e];for(const r of n)r.computed&&N(r,t);for(const r of n)r.computed||N(r,t)}function N(e,t){(e!==w||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function P(e,t){var n;return null===(n=g.get(e))||void 0===n?void 0:n.get(t)}const D=(0,r.fY)("__proto__,__v_isRef,__isVue"),U=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(r.yk)),L=$(),B=$(!1,!0),M=$(!0),F=j();function j(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Pe(this);for(let t=0,o=this.length;t<o;t++)T(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(Pe)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){I();const n=Pe(this)[t].apply(this,e);return A(),n}})),e}function z(e){const t=Pe(this);return T(t,"has",e),t.hasOwnProperty(e)}function $(e=!1,t=!1){return function(n,o,s){if("__v_isReactive"===o)return!e;if("__v_isReadonly"===o)return e;if("__v_isShallow"===o)return t;if("__v_raw"===o&&s===(e?t?_e:Se:t?be:we).get(n))return n;const i=(0,r.kJ)(n);if(!e){if(i&&(0,r.RI)(F,o))return Reflect.get(F,o,s);if("hasOwnProperty"===o)return z}const a=Reflect.get(n,o,s);return((0,r.yk)(o)?U.has(o):D(o))?a:(e||T(n,"get",o),t?a:Fe(a)?i&&(0,r.S0)(o)?a:a.value:(0,r.Kn)(a)?e?Ae(a):Ce(a):a)}}const V=K(),H=K(!0);function K(e=!1){return function(t,n,o,s){let i=t[n];if(xe(i)&&Fe(i)&&!Fe(o))return!1;if(!e&&(Oe(o)||xe(o)||(i=Pe(i),o=Pe(o)),!(0,r.kJ)(t)&&Fe(i)&&!Fe(o)))return i.value=o,!0;const a=(0,r.kJ)(t)&&(0,r.S0)(n)?Number(n)<t.length:(0,r.RI)(t,n),l=Reflect.set(t,n,o,s);return t===Pe(s)&&(a?(0,r.aU)(o,i)&&x(t,"set",n,o,i):x(t,"add",n,o)),l}}function q(e,t){const n=(0,r.RI)(e,t),o=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&x(e,"delete",t,void 0,o),s}function W(e,t){const n=Reflect.has(e,t);return(0,r.yk)(t)&&U.has(t)||T(e,"has",t),n}function Y(e){return T(e,"iterate",(0,r.kJ)(e)?"length":b),Reflect.ownKeys(e)}const G={get:L,set:V,deleteProperty:q,has:W,ownKeys:Y},Z={get:M,set(e,t){return!0},deleteProperty(e,t){return!0}},J=(0,r.l7)({},G,{get:B,set:H}),Q=e=>e,X=e=>Reflect.getPrototypeOf(e);function ee(e,t,n=!1,r=!1){e=e["__v_raw"];const o=Pe(e),s=Pe(t);n||(t!==s&&T(o,"get",t),T(o,"get",s));const{has:i}=X(o),a=r?Q:n?Le:Ue;return i.call(o,t)?a(e.get(t)):i.call(o,s)?a(e.get(s)):void(e!==o&&e.get(t))}function te(e,t=!1){const n=this["__v_raw"],r=Pe(n),o=Pe(e);return t||(e!==o&&T(r,"has",e),T(r,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function ne(e,t=!1){return e=e["__v_raw"],!t&&T(Pe(e),"iterate",b),Reflect.get(e,"size",e)}function re(e){e=Pe(e);const t=Pe(this),n=X(t),r=n.has.call(t,e);return r||(t.add(e),x(t,"add",e,e)),this}function oe(e,t){t=Pe(t);const n=Pe(this),{has:o,get:s}=X(n);let i=o.call(n,e);i||(e=Pe(e),i=o.call(n,e));const a=s.call(n,e);return n.set(e,t),i?(0,r.aU)(t,a)&&x(n,"set",e,t,a):x(n,"add",e,t),this}function se(e){const t=Pe(this),{has:n,get:r}=X(t);let o=n.call(t,e);o||(e=Pe(e),o=n.call(t,e));const s=r?r.call(t,e):void 0,i=t.delete(e);return o&&x(t,"delete",e,void 0,s),i}function ie(){const e=Pe(this),t=0!==e.size,n=void 0,r=e.clear();return t&&x(e,"clear",void 0,void 0,n),r}function ae(e,t){return function(n,r){const o=this,s=o["__v_raw"],i=Pe(s),a=t?Q:e?Le:Ue;return!e&&T(i,"iterate",b),s.forEach(((e,t)=>n.call(r,a(e),a(t),o)))}}function le(e,t,n){return function(...o){const s=this["__v_raw"],i=Pe(s),a=(0,r._N)(i),l="entries"===e||e===Symbol.iterator&&a,c="keys"===e&&a,u=s[e](...o),d=n?Q:t?Le:Ue;return!t&&T(i,"iterate",c?S:b),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:l?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function ce(e){return function(...t){return"delete"!==e&&this}}function ue(){const e={get(e){return ee(this,e)},get size(){return ne(this)},has:te,add:re,set:oe,delete:se,clear:ie,forEach:ae(!1,!1)},t={get(e){return ee(this,e,!1,!0)},get size(){return ne(this)},has:te,add:re,set:oe,delete:se,clear:ie,forEach:ae(!1,!0)},n={get(e){return ee(this,e,!0)},get size(){return ne(this,!0)},has(e){return te.call(this,e,!0)},add:ce("add"),set:ce("set"),delete:ce("delete"),clear:ce("clear"),forEach:ae(!0,!1)},r={get(e){return ee(this,e,!0,!0)},get size(){return ne(this,!0)},has(e){return te.call(this,e,!0)},add:ce("add"),set:ce("set"),delete:ce("delete"),clear:ce("clear"),forEach:ae(!0,!0)},o=["keys","values","entries",Symbol.iterator];return o.forEach((o=>{e[o]=le(o,!1,!1),n[o]=le(o,!0,!1),t[o]=le(o,!1,!0),r[o]=le(o,!0,!0)})),[e,n,t,r]}const[de,he,pe,fe]=ue();function ge(e,t){const n=t?e?fe:pe:e?he:de;return(t,o,s)=>"__v_isReactive"===o?!e:"__v_isReadonly"===o?e:"__v_raw"===o?t:Reflect.get((0,r.RI)(n,o)&&o in t?n:t,o,s)}const me={get:ge(!1,!1)},ye={get:ge(!1,!0)},ve={get:ge(!0,!1)};const we=new WeakMap,be=new WeakMap,Se=new WeakMap,_e=new WeakMap;function Ee(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ke(e){return e["__v_skip"]||!Object.isExtensible(e)?0:Ee((0,r.W7)(e))}function Ce(e){return xe(e)?e:Te(e,!1,G,me,we)}function Ie(e){return Te(e,!1,J,ye,be)}function Ae(e){return Te(e,!0,Z,ve,Se)}function Te(e,t,n,o,s){if(!(0,r.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const i=s.get(e);if(i)return i;const a=ke(e);if(0===a)return e;const l=new Proxy(e,2===a?o:n);return s.set(e,l),l}function Re(e){return xe(e)?Re(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function xe(e){return!(!e||!e["__v_isReadonly"])}function Oe(e){return!(!e||!e["__v_isShallow"])}function Ne(e){return Re(e)||xe(e)}function Pe(e){const t=e&&e["__v_raw"];return t?Pe(t):e}function De(e){return(0,r.Nj)(e,"__v_skip",!0),e}const Ue=e=>(0,r.Kn)(e)?Ce(e):e,Le=e=>(0,r.Kn)(e)?Ae(e):e;function Be(e){k&&w&&(e=Pe(e),R(e.dep||(e.dep=u())))}function Me(e,t){e=Pe(e);const n=e.dep;n&&O(n)}function Fe(e){return!(!e||!0!==e.__v_isRef)}function je(e){return $e(e,!1)}function ze(e){return $e(e,!0)}function $e(e,t){return Fe(e)?e:new Ve(e,t)}class Ve{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Pe(e),this._value=t?e:Ue(e)}get value(){return Be(this),this._value}set value(e){const t=this.__v_isShallow||Oe(e)||xe(e);e=t?e:Pe(e),(0,r.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Ue(e),Me(this,e))}}function He(e){Me(e,void 0)}function Ke(e){return Fe(e)?e.value:e}const qe={get:(e,t,n)=>Ke(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return Fe(o)&&!Fe(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function We(e){return Re(e)?e:new Proxy(e,qe)}function Ye(e){const t=(0,r.kJ)(e)?new Array(e.length):{};for(const n in e)t[n]=Ze(e,n);return t}class Ge{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return P(Pe(this._object),this._key)}}function Ze(e,t,n){const r=e[t];return Fe(r)?r:new Ge(e,t,n)}var Je;class Qe{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Je]=!1,this._dirty=!0,this.effect=new _(e,(()=>{this._dirty||(this._dirty=!0,Me(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=Pe(this);return Be(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Xe(e,t,n=!1){let o,s;const i=(0,r.mf)(e);i?(o=e,s=r.dG):(o=e.get,s=e.set);const a=new Qe(o,s,i||!s,n);return a}Je="__v_isReadonly"},6252:function(e,t,n){"use strict";n.d(t,{$d:function(){return a},Ah:function(){return Ae},F4:function(){return gn},FN:function(){return Rn},Fl:function(){return Kn},HY:function(){return Wt},Ho:function(){return mn},JJ:function(){return K},Jd:function(){return Ie},Ko:function(){return $e},LL:function(){return Me},Nv:function(){return Ve},P$:function(){return re},Q2:function(){return Fe},Q6:function(){return ce},Rr:function(){return qn},U2:function(){return se},Uk:function(){return yn},Us:function(){return Pt},WI:function(){return He},Wm:function(){return pn},Xn:function(){return ke},Y3:function(){return w},Y8:function(){return ee},YP:function(){return G},ZK:function(){return s},_:function(){return hn},aZ:function(){return ue},bv:function(){return Ee},dG:function(){return En},f3:function(){return q},h:function(){return Gn},iD:function(){return on},ic:function(){return Ce},j4:function(){return sn},kq:function(){return wn},l1:function(){return Wn},lA:function(){return an},lR:function(){return Kt},m0:function(){return W},mx:function(){return qe},nK:function(){return le},se:function(){return ge},sv:function(){return Gt},uE:function(){return vn},up:function(){return Le},w5:function(){return L},wF:function(){return _e},wg:function(){return Xt},wy:function(){return Ne},xv:function(){return Yt}});var r=n(2262),o=n(3577);function s(e,...t){}function i(e,t,n,r){let o;try{o=r?e(...r):e()}catch(s){l(s,t,n)}return o}function a(e,t,n,r){if((0,o.mf)(e)){const s=i(e,t,n,r);return s&&(0,o.tI)(s)&&s.catch((e=>{l(e,t,n)})),s}const s=[];for(let o=0;o<e.length;o++)s.push(a(e[o],t,n,r));return s}function l(e,t,n,r=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,s=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,o,s))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void i(a,null,10,[e,o,s])}c(e,n,o,r)}function c(e,t,n,r=!0){console.error(e)}let u=!1,d=!1;const h=[];let p=0;const f=[];let g=null,m=0;const y=Promise.resolve();let v=null;function w(e){const t=v||y;return e?t.then(this?e.bind(this):e):t}function b(e){let t=p+1,n=h.length;while(t<n){const r=t+n>>>1,o=A(h[r]);o<e?t=r+1:n=r}return t}function S(e){h.length&&h.includes(e,u&&e.allowRecurse?p+1:p)||(null==e.id?h.push(e):h.splice(b(e.id),0,e),_())}function _(){u||d||(d=!0,v=y.then(R))}function E(e){const t=h.indexOf(e);t>p&&h.splice(t,1)}function k(e){(0,o.kJ)(e)?f.push(...e):g&&g.includes(e,e.allowRecurse?m+1:m)||f.push(e),_()}function C(e,t=(u?p+1:0)){for(0;t<h.length;t++){const e=h[t];e&&e.pre&&(h.splice(t,1),t--,e())}}function I(e){if(f.length){const e=[...new Set(f)];if(f.length=0,g)return void g.push(...e);for(g=e,g.sort(((e,t)=>A(e)-A(t))),m=0;m<g.length;m++)g[m]();g=null,m=0}}const A=e=>null==e.id?1/0:e.id,T=(e,t)=>{const n=A(e)-A(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function R(e){d=!1,u=!0,h.sort(T);o.dG;try{for(p=0;p<h.length;p++){const e=h[p];e&&!1!==e.active&&i(e,null,14)}}finally{p=0,h.length=0,I(e),u=!1,v=null,(h.length||f.length)&&R(e)}}new Set;new Map;function x(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||o.kT;let s=n;const i=t.startsWith("update:"),l=i&&t.slice(7);if(l&&l in r){const e=`${"modelValue"===l?"model":l}Modifiers`,{number:t,trim:i}=r[e]||o.kT;i&&(s=n.map((e=>(0,o.HD)(e)?e.trim():e))),t&&(s=n.map(o.h5))}let c;let u=r[c=(0,o.hR)(t)]||r[c=(0,o.hR)((0,o._A)(t))];!u&&i&&(u=r[c=(0,o.hR)((0,o.rs)(t))]),u&&a(u,e,6,s);const d=r[c+"Once"];if(d){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,a(d,e,6,s)}}function O(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(void 0!==s)return s;const i=e.emits;let a={},l=!1;if(!(0,o.mf)(e)){const r=e=>{const n=O(e,t,!0);n&&(l=!0,(0,o.l7)(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return i||l?((0,o.kJ)(i)?i.forEach((e=>a[e]=null)):(0,o.l7)(a,i),(0,o.Kn)(e)&&r.set(e,a),a):((0,o.Kn)(e)&&r.set(e,null),null)}function N(e,t){return!(!e||!(0,o.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,o.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,o.RI)(e,(0,o.rs)(t))||(0,o.RI)(e,t))}let P=null,D=null;function U(e){const t=P;return P=e,D=e&&e.type.__scopeId||null,t}function L(e,t=P,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&nn(-1);const o=U(t);let s;try{s=e(...n)}finally{U(o),r._d&&nn(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function B(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[a],slots:c,attrs:u,emit:d,render:h,renderCache:p,data:f,setupState:g,ctx:m,inheritAttrs:y}=e;let v,w;const b=U(e);try{if(4&n.shapeFlag){const e=s||r;v=bn(h.call(e,e,p,i,g,f,m)),w=u}else{const e=t;0,v=bn(e.length>1?e(i,{attrs:u,slots:c,emit:d}):e(i,null)),w=t.props?u:M(u)}}catch(_){Jt.length=0,l(_,e,1),v=pn(Gt)}let S=v;if(w&&!1!==y){const e=Object.keys(w),{shapeFlag:t}=S;e.length&&7&t&&(a&&e.some(o.tR)&&(w=F(w,a)),S=mn(S,w))}return n.dirs&&(S=mn(S),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&(S.transition=n.transition),v=S,U(b),v}const M=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,o.F7)(n))&&((t||(t={}))[n]=e[n]);return t},F=(e,t)=>{const n={};for(const r in e)(0,o.tR)(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function j(e,t,n){const{props:r,children:o,component:s}=e,{props:i,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!o&&!a||a&&a.$stable)||r!==i&&(r?!i||z(r,i,c):!!i);if(1024&l)return!0;if(16&l)return r?z(r,i,c):!!i;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(i[n]!==r[n]&&!N(c,n))return!0}}return!1}function z(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const s=r[o];if(t[s]!==e[s]&&!N(n,s))return!0}return!1}function $({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const V=e=>e.__isSuspense;function H(e,t){t&&t.pendingBranch?(0,o.kJ)(e)?t.effects.push(...e):t.effects.push(e):k(e)}function K(e,t){if(Tn){let n=Tn.provides;const r=Tn.parent&&Tn.parent.provides;r===n&&(n=Tn.provides=Object.create(r)),n[e]=t}else 0}function q(e,t,n=!1){const r=Tn||P;if(r){const s=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&(0,o.mf)(t)?t.call(r.proxy):t}else 0}function W(e,t){return Z(e,null,t)}const Y={};function G(e,t,n){return Z(e,t,n)}function Z(e,t,{immediate:n,deep:s,flush:l,onTrack:c,onTrigger:u}=o.kT){const d=(0,r.nZ)()===(null===Tn||void 0===Tn?void 0:Tn.scope)?Tn:null;let h,p,f=!1,g=!1;if((0,r.dq)(e)?(h=()=>e.value,f=(0,r.yT)(e)):(0,r.PG)(e)?(h=()=>e,s=!0):(0,o.kJ)(e)?(g=!0,f=e.some((e=>(0,r.PG)(e)||(0,r.yT)(e))),h=()=>e.map((e=>(0,r.dq)(e)?e.value:(0,r.PG)(e)?X(e):(0,o.mf)(e)?i(e,d,2):void 0))):h=(0,o.mf)(e)?t?()=>i(e,d,2):()=>{if(!d||!d.isUnmounted)return p&&p(),a(e,d,3,[y])}:o.dG,t&&s){const e=h;h=()=>X(e())}let m,y=e=>{p=_.onStop=()=>{i(e,d,4)}};if(Un){if(y=o.dG,t?n&&a(t,d,3,[h(),g?[]:void 0,y]):h(),"sync"!==l)return o.dG;{const e=Jn();m=e.__watcherHandles||(e.__watcherHandles=[])}}let v=g?new Array(e.length).fill(Y):Y;const w=()=>{if(_.active)if(t){const e=_.run();(s||f||(g?e.some(((e,t)=>(0,o.aU)(e,v[t]))):(0,o.aU)(e,v)))&&(p&&p(),a(t,d,3,[e,v===Y?void 0:g&&v[0]===Y?[]:v,y]),v=e)}else _.run()};let b;w.allowRecurse=!!t,"sync"===l?b=w:"post"===l?b=()=>Nt(w,d&&d.suspense):(w.pre=!0,d&&(w.id=d.uid),b=()=>S(w));const _=new r.qq(h,b);t?n?w():v=_.run():"post"===l?Nt(_.run.bind(_),d&&d.suspense):_.run();const E=()=>{_.stop(),d&&d.scope&&(0,o.Od)(d.scope.effects,_)};return m&&m.push(E),E}function J(e,t,n){const r=this.proxy,s=(0,o.HD)(e)?e.includes(".")?Q(r,e):()=>r[e]:e.bind(r,r);let i;(0,o.mf)(t)?i=t:(i=t.handler,n=t);const a=Tn;xn(this);const l=Z(s,i.bind(r),n);return a?xn(a):On(),l}function Q(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function X(e,t){if(!(0,o.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,r.dq)(e))X(e.value,t);else if((0,o.kJ)(e))for(let n=0;n<e.length;n++)X(e[n],t);else if((0,o.DM)(e)||(0,o._N)(e))e.forEach((e=>{X(e,t)}));else if((0,o.PO)(e))for(const n in e)X(e[n],t);return e}function ee(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ee((()=>{e.isMounted=!0})),Ie((()=>{e.isUnmounting=!0})),e}const te=[Function,Array],ne={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:te,onEnter:te,onAfterEnter:te,onEnterCancelled:te,onBeforeLeave:te,onLeave:te,onAfterLeave:te,onLeaveCancelled:te,onBeforeAppear:te,onAppear:te,onAfterAppear:te,onAppearCancelled:te},setup(e,{slots:t}){const n=Rn(),o=ee();let s;return()=>{const i=t.default&&ce(t.default(),!0);if(!i||!i.length)return;let a=i[0];if(i.length>1){let e=!1;for(const t of i)if(t.type!==Gt){0,a=t,e=!0;break}}const l=(0,r.IU)(e),{mode:c}=l;if(o.isLeaving)return ie(a);const u=ae(a);if(!u)return ie(a);const d=se(u,l,o,n);le(u,d);const h=n.subTree,p=h&&ae(h);let f=!1;const{getTransitionKey:g}=u.type;if(g){const e=g();void 0===s?s=e:e!==s&&(s=e,f=!0)}if(p&&p.type!==Gt&&(!ln(u,p)||f)){const e=se(p,l,o,n);if(le(p,e),"out-in"===c)return o.isLeaving=!0,e.afterLeave=()=>{o.isLeaving=!1,!1!==n.update.active&&n.update()},ie(a);"in-out"===c&&u.type!==Gt&&(e.delayLeave=(e,t,n)=>{const r=oe(o,p);r[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=n})}return a}}},re=ne;function oe(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function se(e,t,n,r){const{appear:s,mode:i,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:p,onLeave:f,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:y,onAppear:v,onAfterAppear:w,onAppearCancelled:b}=t,S=String(e.key),_=oe(n,e),E=(e,t)=>{e&&a(e,r,9,t)},k=(e,t)=>{const n=t[1];E(e,t),(0,o.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},C={mode:i,persisted:l,beforeEnter(t){let r=c;if(!n.isMounted){if(!s)return;r=y||c}t._leaveCb&&t._leaveCb(!0);const o=_[S];o&&ln(e,o)&&o.el._leaveCb&&o.el._leaveCb(),E(r,[t])},enter(e){let t=u,r=d,o=h;if(!n.isMounted){if(!s)return;t=v||u,r=w||d,o=b||h}let i=!1;const a=e._enterCb=t=>{i||(i=!0,E(t?o:r,[e]),C.delayedLeave&&C.delayedLeave(),e._enterCb=void 0)};t?k(t,[e,a]):a()},leave(t,r){const o=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();E(p,[t]);let s=!1;const i=t._leaveCb=n=>{s||(s=!0,r(),E(n?m:g,[t]),t._leaveCb=void 0,_[o]===e&&delete _[o])};_[o]=e,f?k(f,[t,i]):i()},clone(e){return se(e,t,n,r)}};return C}function ie(e){if(he(e))return e=mn(e),e.children=null,e}function ae(e){return he(e)?e.children?e.children[0]:void 0:e}function le(e,t){6&e.shapeFlag&&e.component?le(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ce(e,t=!1,n){let r=[],o=0;for(let s=0;s<e.length;s++){let i=e[s];const a=null==n?i.key:String(n)+String(null!=i.key?i.key:s);i.type===Wt?(128&i.patchFlag&&o++,r=r.concat(ce(i.children,t,a))):(t||i.type!==Gt)&&r.push(null!=a?mn(i,{key:a}):i)}if(o>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function ue(e){return(0,o.mf)(e)?{setup:e,name:e.name}:e}const de=e=>!!e.type.__asyncLoader;const he=e=>e.type.__isKeepAlive;RegExp,RegExp;function pe(e,t){return(0,o.kJ)(e)?e.some((e=>pe(e,t))):(0,o.HD)(e)?e.split(",").includes(t):!!(0,o.Kj)(e)&&e.test(t)}function fe(e,t){me(e,"a",t)}function ge(e,t){me(e,"da",t)}function me(e,t,n=Tn){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(be(t,r,n),n){let e=n.parent;while(e&&e.parent)he(e.parent.vnode)&&ye(r,t,n,e),e=e.parent}}function ye(e,t,n,r){const s=be(t,e,r,!0);Ae((()=>{(0,o.Od)(r[t],s)}),n)}function ve(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function we(e){return 128&e.shapeFlag?e.ssContent:e}function be(e,t,n=Tn,o=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;(0,r.Jd)(),xn(n);const s=a(t,n,e,o);return On(),(0,r.lk)(),s});return o?s.unshift(i):s.push(i),i}}const Se=e=>(t,n=Tn)=>(!Un||"sp"===e)&&be(e,((...e)=>t(...e)),n),_e=Se("bm"),Ee=Se("m"),ke=Se("bu"),Ce=Se("u"),Ie=Se("bum"),Ae=Se("um"),Te=Se("sp"),Re=Se("rtg"),xe=Se("rtc");function Oe(e,t=Tn){be("ec",e,t)}function Ne(e,t){const n=P;if(null===n)return e;const r=$n(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,n,a,l=o.kT]=t[i];e&&((0,o.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&X(n),s.push({dir:e,instance:r,value:n,oldValue:void 0,arg:a,modifiers:l}))}return e}function Pe(e,t,n,o){const s=e.dirs,i=t&&t.dirs;for(let l=0;l<s.length;l++){const c=s[l];i&&(c.oldValue=i[l].value);let u=c.dir[o];u&&((0,r.Jd)(),a(u,n,8,[e.el,c,e,t]),(0,r.lk)())}}const De="components",Ue="directives";function Le(e,t){return je(De,e,!0,t)||e}const Be=Symbol();function Me(e){return(0,o.HD)(e)?je(De,e,!1)||e:e||Be}function Fe(e){return je(Ue,e)}function je(e,t,n=!0,r=!1){const s=P||Tn;if(s){const n=s.type;if(e===De){const e=Vn(n,!1);if(e&&(e===t||e===(0,o._A)(t)||e===(0,o.kC)((0,o._A)(t))))return n}const i=ze(s[e]||n[e],t)||ze(s.appContext[e],t);return!i&&r?n:i}}function ze(e,t){return e&&(e[t]||e[(0,o._A)(t)]||e[(0,o.kC)((0,o._A)(t))])}function $e(e,t,n,r){let s;const i=n&&n[r];if((0,o.kJ)(e)||(0,o.HD)(e)){s=new Array(e.length);for(let n=0,r=e.length;n<r;n++)s[n]=t(e[n],n,void 0,i&&i[n])}else if("number"===typeof e){0,s=new Array(e);for(let n=0;n<e;n++)s[n]=t(n+1,n,void 0,i&&i[n])}else if((0,o.Kn)(e))if(e[Symbol.iterator])s=Array.from(e,((e,n)=>t(e,n,void 0,i&&i[n])));else{const n=Object.keys(e);s=new Array(n.length);for(let r=0,o=n.length;r<o;r++){const o=n[r];s[r]=t(e[o],o,r,i&&i[r])}}else s=[];return n&&(n[r]=s),s}function Ve(e,t){for(let n=0;n<t.length;n++){const r=t[n];if((0,o.kJ)(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}function He(e,t,n={},r,o){if(P.isCE||P.parent&&de(P.parent)&&P.parent.isCE)return"default"!==t&&(n.name=t),pn("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),Xt();const i=s&&Ke(s(n)),a=sn(Wt,{key:n.key||i&&i.key||`_${t}`},i||(r?r():[]),i&&1===e._?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Ke(e){return e.some((e=>!an(e)||e.type!==Gt&&!(e.type===Wt&&!Ke(e.children))))?e:null}function qe(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:(0,o.hR)(r)]=e[r];return n}const We=e=>e?Nn(e)?$n(e)||e.proxy:We(e.parent):null,Ye=(0,o.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>We(e.parent),$root:e=>We(e.root),$emit:e=>e.emit,$options:e=>nt(e),$forceUpdate:e=>e.f||(e.f=()=>S(e.update)),$nextTick:e=>e.n||(e.n=w.bind(e.proxy)),$watch:e=>J.bind(e)}),Ge=(e,t)=>e!==o.kT&&!e.__isScriptSetup&&(0,o.RI)(e,t),Ze={get({_:e},t){const{ctx:n,setupState:s,data:i,props:a,accessCache:l,type:c,appContext:u}=e;let d;if("$"!==t[0]){const r=l[t];if(void 0!==r)switch(r){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else{if(Ge(s,t))return l[t]=1,s[t];if(i!==o.kT&&(0,o.RI)(i,t))return l[t]=2,i[t];if((d=e.propsOptions[0])&&(0,o.RI)(d,t))return l[t]=3,a[t];if(n!==o.kT&&(0,o.RI)(n,t))return l[t]=4,n[t];Je&&(l[t]=0)}}const h=Ye[t];let p,f;return h?("$attrs"===t&&(0,r.j)(e,"get",t),h(e)):(p=c.__cssModules)&&(p=p[t])?p:n!==o.kT&&(0,o.RI)(n,t)?(l[t]=4,n[t]):(f=u.config.globalProperties,(0,o.RI)(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Ge(s,t)?(s[t]=n,!0):r!==o.kT&&(0,o.RI)(r,t)?(r[t]=n,!0):!(0,o.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(i[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==o.kT&&(0,o.RI)(e,a)||Ge(t,a)||(l=i[0])&&(0,o.RI)(l,a)||(0,o.RI)(r,a)||(0,o.RI)(Ye,a)||(0,o.RI)(s.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,o.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Je=!0;function Qe(e){const t=nt(e),n=e.proxy,s=e.ctx;Je=!1,t.beforeCreate&&et(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:l,watch:c,provide:u,inject:d,created:h,beforeMount:p,mounted:f,beforeUpdate:g,updated:m,activated:y,deactivated:v,beforeDestroy:w,beforeUnmount:b,destroyed:S,unmounted:_,render:E,renderTracked:k,renderTriggered:C,errorCaptured:I,serverPrefetch:A,expose:T,inheritAttrs:R,components:x,directives:O,filters:N}=t,P=null;if(d&&Xe(d,s,P,e.appContext.config.unwrapInjectedRef),l)for(const r in l){const e=l[r];(0,o.mf)(e)&&(s[r]=e.bind(n))}if(i){0;const t=i.call(n,n);0,(0,o.Kn)(t)&&(e.data=(0,r.qj)(t))}if(Je=!0,a)for(const r in a){const e=a[r],t=(0,o.mf)(e)?e.bind(n,n):(0,o.mf)(e.get)?e.get.bind(n,n):o.dG;0;const i=!(0,o.mf)(e)&&(0,o.mf)(e.set)?e.set.bind(n):o.dG,l=Kn({get:t,set:i});Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(c)for(const r in c)tt(c[r],s,n,r);if(u){const e=(0,o.mf)(u)?u.call(n):u;Reflect.ownKeys(e).forEach((t=>{K(t,e[t])}))}function D(e,t){(0,o.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&et(h,e,"c"),D(_e,p),D(Ee,f),D(ke,g),D(Ce,m),D(fe,y),D(ge,v),D(Oe,I),D(xe,k),D(Re,C),D(Ie,b),D(Ae,_),D(Te,A),(0,o.kJ)(T))if(T.length){const t=e.exposed||(e.exposed={});T.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});E&&e.render===o.dG&&(e.render=E),null!=R&&(e.inheritAttrs=R),x&&(e.components=x),O&&(e.directives=O)}function Xe(e,t,n=o.dG,s=!1){(0,o.kJ)(e)&&(e=at(e));for(const i in e){const n=e[i];let a;a=(0,o.Kn)(n)?"default"in n?q(n.from||i,n.default,!0):q(n.from||i):q(n),(0,r.dq)(a)&&s?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[i]=a}}function et(e,t,n){a((0,o.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function tt(e,t,n,r){const s=r.includes(".")?Q(n,r):()=>n[r];if((0,o.HD)(e)){const n=t[e];(0,o.mf)(n)&&G(s,n)}else if((0,o.mf)(e))G(s,e.bind(n));else if((0,o.Kn)(e))if((0,o.kJ)(e))e.forEach((e=>tt(e,t,n,r)));else{const r=(0,o.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,o.mf)(r)&&G(s,r,e)}else 0}function nt(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:s.length||n||r?(c={},s.length&&s.forEach((e=>rt(c,e,a,!0))),rt(c,t,a)):c=t,(0,o.Kn)(t)&&i.set(t,c),c}function rt(e,t,n,r=!1){const{mixins:o,extends:s}=t;s&&rt(e,s,n,!0),o&&o.forEach((t=>rt(e,t,n,!0)));for(const i in t)if(r&&"expose"===i);else{const r=ot[i]||n&&n[i];e[i]=r?r(e[i],t[i]):t[i]}return e}const ot={data:st,props:ct,emits:ct,methods:ct,computed:ct,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:ct,directives:ct,watch:ut,provide:st,inject:it};function st(e,t){return t?e?function(){return(0,o.l7)((0,o.mf)(e)?e.call(this,this):e,(0,o.mf)(t)?t.call(this,this):t)}:t:e}function it(e,t){return ct(at(e),at(t))}function at(e){if((0,o.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function lt(e,t){return e?[...new Set([].concat(e,t))]:t}function ct(e,t){return e?(0,o.l7)((0,o.l7)(Object.create(null),e),t):t}function ut(e,t){if(!e)return t;if(!t)return e;const n=(0,o.l7)(Object.create(null),e);for(const r in t)n[r]=lt(e[r],t[r]);return n}function dt(e,t,n,s=!1){const i={},a={};(0,o.Nj)(a,cn,1),e.propsDefaults=Object.create(null),pt(e,t,i,a);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);n?e.props=s?i:(0,r.Um)(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function ht(e,t,n,s){const{props:i,attrs:a,vnode:{patchFlag:l}}=e,c=(0,r.IU)(i),[u]=e.propsOptions;let d=!1;if(!(s||l>0)||16&l){let r;pt(e,t,i,a)&&(d=!0);for(const s in c)t&&((0,o.RI)(t,s)||(r=(0,o.rs)(s))!==s&&(0,o.RI)(t,r))||(u?!n||void 0===n[s]&&void 0===n[r]||(i[s]=ft(u,c,s,void 0,e,!0)):delete i[s]);if(a!==c)for(const e in a)t&&(0,o.RI)(t,e)||(delete a[e],d=!0)}else if(8&l){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];if(N(e.emitsOptions,s))continue;const l=t[s];if(u)if((0,o.RI)(a,s))l!==a[s]&&(a[s]=l,d=!0);else{const t=(0,o._A)(s);i[t]=ft(u,c,t,l,e,!1)}else l!==a[s]&&(a[s]=l,d=!0)}}d&&(0,r.X$)(e,"set","$attrs")}function pt(e,t,n,s){const[i,a]=e.propsOptions;let l,c=!1;if(t)for(let r in t){if((0,o.Gg)(r))continue;const u=t[r];let d;i&&(0,o.RI)(i,d=(0,o._A)(r))?a&&a.includes(d)?(l||(l={}))[d]=u:n[d]=u:N(e.emitsOptions,r)||r in s&&u===s[r]||(s[r]=u,c=!0)}if(a){const t=(0,r.IU)(n),s=l||o.kT;for(let r=0;r<a.length;r++){const l=a[r];n[l]=ft(i,t,l,s[l],e,!(0,o.RI)(s,l))}}return c}function ft(e,t,n,r,s,i){const a=e[n];if(null!=a){const e=(0,o.RI)(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&(0,o.mf)(e)){const{propsDefaults:o}=s;n in o?r=o[n]:(xn(s),r=o[n]=e.call(null,t),On())}else r=e}a[0]&&(i&&!e?r=!1:!a[1]||""!==r&&r!==(0,o.rs)(n)||(r=!0))}return r}function gt(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!(0,o.mf)(e)){const r=e=>{c=!0;const[n,r]=gt(e,t,!0);(0,o.l7)(a,n),r&&l.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!i&&!c)return(0,o.Kn)(e)&&r.set(e,o.Z6),o.Z6;if((0,o.kJ)(i))for(let d=0;d<i.length;d++){0;const e=(0,o._A)(i[d]);mt(e)&&(a[e]=o.kT)}else if(i){0;for(const e in i){const t=(0,o._A)(e);if(mt(t)){const n=i[e],r=a[t]=(0,o.kJ)(n)||(0,o.mf)(n)?{type:n}:Object.assign({},n);if(r){const e=wt(Boolean,r.type),n=wt(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||(0,o.RI)(r,"default"))&&l.push(t)}}}}const u=[a,l];return(0,o.Kn)(e)&&r.set(e,u),u}function mt(e){return"$"!==e[0]}function yt(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function vt(e,t){return yt(e)===yt(t)}function wt(e,t){return(0,o.kJ)(t)?t.findIndex((t=>vt(t,e))):(0,o.mf)(t)&&vt(t,e)?0:-1}const bt=e=>"_"===e[0]||"$stable"===e,St=e=>(0,o.kJ)(e)?e.map(bn):[bn(e)],_t=(e,t,n)=>{if(t._n)return t;const r=L(((...e)=>St(t(...e))),n);return r._c=!1,r},Et=(e,t,n)=>{const r=e._ctx;for(const s in e){if(bt(s))continue;const n=e[s];if((0,o.mf)(n))t[s]=_t(s,n,r);else if(null!=n){0;const e=St(n);t[s]=()=>e}}},kt=(e,t)=>{const n=St(t);e.slots.default=()=>n},Ct=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,r.IU)(t),(0,o.Nj)(t,"_",n)):Et(t,e.slots={})}else e.slots={},t&&kt(e,t);(0,o.Nj)(e.slots,cn,1)},It=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=o.kT;if(32&r.shapeFlag){const e=t._;e?n&&1===e?i=!1:((0,o.l7)(s,t),n||1!==e||delete s._):(i=!t.$stable,Et(t,s)),a=t}else t&&(kt(e,t),a={default:1});if(i)for(const o in s)bt(o)||o in a||delete s[o]};function At(){return{app:null,config:{isNativeTag:o.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tt=0;function Rt(e,t){return function(n,r=null){(0,o.mf)(n)||(n=Object.assign({},n)),null==r||(0,o.Kn)(r)||(r=null);const s=At(),i=new Set;let a=!1;const l=s.app={_uid:Tt++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:Qn,get config(){return s.config},set config(e){0},use(e,...t){return i.has(e)||(e&&(0,o.mf)(e.install)?(i.add(e),e.install(l,...t)):(0,o.mf)(e)&&(i.add(e),e(l,...t))),l},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),l},component(e,t){return t?(s.components[e]=t,l):s.components[e]},directive(e,t){return t?(s.directives[e]=t,l):s.directives[e]},mount(o,i,c){if(!a){0;const u=pn(n,r);return u.appContext=s,i&&t?t(u,o):e(u,o,c),a=!0,l._container=o,o.__vue_app__=l,$n(u.component)||u.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return s.provides[e]=t,l}};return l}}function xt(e,t,n,s,a=!1){if((0,o.kJ)(e))return void e.forEach(((e,r)=>xt(e,t&&((0,o.kJ)(t)?t[r]:t),n,s,a)));if(de(s)&&!a)return;const l=4&s.shapeFlag?$n(s.component)||s.component.proxy:s.el,c=a?null:l,{i:u,r:d}=e;const h=t&&t.r,p=u.refs===o.kT?u.refs={}:u.refs,f=u.setupState;if(null!=h&&h!==d&&((0,o.HD)(h)?(p[h]=null,(0,o.RI)(f,h)&&(f[h]=null)):(0,r.dq)(h)&&(h.value=null)),(0,o.mf)(d))i(d,u,12,[c,p]);else{const t=(0,o.HD)(d),s=(0,r.dq)(d);if(t||s){const r=()=>{if(e.f){const n=t?(0,o.RI)(f,d)?f[d]:p[d]:d.value;a?(0,o.kJ)(n)&&(0,o.Od)(n,l):(0,o.kJ)(n)?n.includes(l)||n.push(l):t?(p[d]=[l],(0,o.RI)(f,d)&&(f[d]=p[d])):(d.value=[l],e.k&&(p[e.k]=d.value))}else t?(p[d]=c,(0,o.RI)(f,d)&&(f[d]=c)):s&&(d.value=c,e.k&&(p[e.k]=c))};c?(r.id=-1,Nt(r,n)):r()}else 0}}function Ot(){}const Nt=H;function Pt(e){return Dt(e)}function Dt(e,t){Ot();const n=(0,o.E9)();n.__VUE__=!0;const{insert:s,remove:i,patchProp:a,createElement:l,createText:c,createComment:u,setText:d,setElementText:h,parentNode:p,nextSibling:f,setScopeId:g=o.dG,insertStaticContent:m}=e,y=(e,t,n,r=null,o=null,s=null,i=!1,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!ln(e,t)&&(r=Q(e),W(e,o,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case Yt:v(e,t,n,r);break;case Gt:w(e,t,n,r);break;case Zt:null==e&&b(t,n,r,i);break;case Wt:D(e,t,n,r,o,s,i,a,l);break;default:1&d?A(e,t,n,r,o,s,i,a,l):6&d?U(e,t,n,r,o,s,i,a,l):(64&d||128&d)&&c.process(e,t,n,r,o,s,i,a,l,ee)}null!=u&&o&&xt(u,e&&e.ref,s,t||e,!t)},v=(e,t,n,r)=>{if(null==e)s(t.el=c(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&d(n,t.children)}},w=(e,t,n,r)=>{null==e?s(t.el=u(t.children||""),n,r):t.el=e.el},b=(e,t,n,r)=>{[e.el,e.anchor]=m(e.children,t,n,r,e.el,e.anchor)},_=({el:e,anchor:t},n,r)=>{let o;while(e&&e!==t)o=f(e),s(e,n,r),e=o;s(t,n,r)},k=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=f(e),i(e),e=n;i(t)},A=(e,t,n,r,o,s,i,a,l)=>{i=i||"svg"===t.type,null==e?T(t,n,r,o,s,i,a,l):O(e,t,o,s,i,a,l)},T=(e,t,n,r,i,c,u,d)=>{let p,f;const{type:g,props:m,shapeFlag:y,transition:v,dirs:w}=e;if(p=e.el=l(e.type,c,m&&m.is,m),8&y?h(p,e.children):16&y&&x(e.children,p,null,r,i,c&&"foreignObject"!==g,u,d),w&&Pe(e,null,r,"created"),R(p,e,e.scopeId,u,r),m){for(const t in m)"value"===t||(0,o.Gg)(t)||a(p,t,null,m[t],c,e.children,r,i,J);"value"in m&&a(p,"value",null,m.value),(f=m.onVnodeBeforeMount)&&kn(f,r,e)}w&&Pe(e,null,r,"beforeMount");const b=(!i||i&&!i.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(p),s(p,t,n),((f=m&&m.onVnodeMounted)||b||w)&&Nt((()=>{f&&kn(f,r,e),b&&v.enter(p),w&&Pe(e,null,r,"mounted")}),i)},R=(e,t,n,r,o)=>{if(n&&g(e,n),r)for(let s=0;s<r.length;s++)g(e,r[s]);if(o){let n=o.subTree;if(t===n){const t=o.vnode;R(e,t,t.scopeId,t.slotScopeIds,o.parent)}}},x=(e,t,n,r,o,s,i,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?Sn(e[c]):bn(e[c]);y(null,l,t,n,r,o,s,i,a)}},O=(e,t,n,r,s,i,l)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||o.kT,g=t.props||o.kT;let m;n&&Ut(n,!1),(m=g.onVnodeBeforeUpdate)&&kn(m,n,t,e),p&&Pe(t,e,n,"beforeUpdate"),n&&Ut(n,!0);const y=s&&"foreignObject"!==t.type;if(d?N(e.dynamicChildren,d,c,n,r,y,i):l||V(e,t,c,null,n,r,y,i,!1),u>0){if(16&u)P(c,t,f,g,n,r,s);else if(2&u&&f.class!==g.class&&a(c,"class",null,g.class,s),4&u&&a(c,"style",f.style,g.style,s),8&u){const o=t.dynamicProps;for(let t=0;t<o.length;t++){const i=o[t],l=f[i],u=g[i];u===l&&"value"!==i||a(c,i,l,u,s,e.children,n,r,J)}}1&u&&e.children!==t.children&&h(c,t.children)}else l||null!=d||P(c,t,f,g,n,r,s);((m=g.onVnodeUpdated)||p)&&Nt((()=>{m&&kn(m,n,t,e),p&&Pe(t,e,n,"updated")}),r)},N=(e,t,n,r,o,s,i)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],u=l.el&&(l.type===Wt||!ln(l,c)||70&l.shapeFlag)?p(l.el):n;y(l,c,u,null,r,o,s,i,!0)}},P=(e,t,n,r,s,i,l)=>{if(n!==r){if(n!==o.kT)for(const c in n)(0,o.Gg)(c)||c in r||a(e,c,n[c],null,l,t.children,s,i,J);for(const c in r){if((0,o.Gg)(c))continue;const u=r[c],d=n[c];u!==d&&"value"!==c&&a(e,c,d,u,l,t.children,s,i,J)}"value"in r&&a(e,"value",n.value,r.value)}},D=(e,t,n,r,o,i,a,l,u)=>{const d=t.el=e?e.el:c(""),h=t.anchor=e?e.anchor:c("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=t;g&&(l=l?l.concat(g):g),null==e?(s(d,n,r),s(h,n,r),x(t.children,n,h,o,i,a,l,u)):p>0&&64&p&&f&&e.dynamicChildren?(N(e.dynamicChildren,f,n,o,i,a,l),(null!=t.key||o&&t===o.subTree)&&Lt(e,t,!0)):V(e,t,n,h,o,i,a,l,u)},U=(e,t,n,r,o,s,i,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?o.ctx.activate(t,n,r,i,l):L(t,n,r,o,s,i,l):M(e,t,l)},L=(e,t,n,r,o,s,i)=>{const a=e.component=An(e,r,o);if(he(e)&&(a.ctx.renderer=ee),Ln(a),a.asyncDep){if(o&&o.registerDep(a,F),!e.el){const e=a.subTree=pn(Gt);w(null,e,t,n)}}else F(a,e,t,n,o,s,i)},M=(e,t,n)=>{const r=t.component=e.component;if(j(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void z(r,t,n);r.next=t,E(r.update),r.update()}else t.el=e.el,r.vnode=t},F=(e,t,n,s,i,a,l)=>{const c=()=>{if(e.isMounted){let t,{next:n,bu:r,u:s,parent:c,vnode:u}=e,d=n;0,Ut(e,!1),n?(n.el=u.el,z(e,n,l)):n=u,r&&(0,o.ir)(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&kn(t,c,n,u),Ut(e,!0);const h=B(e);0;const f=e.subTree;e.subTree=h,y(f,h,p(f.el),Q(f),e,i,a),n.el=h.el,null===d&&$(e,h.el),s&&Nt(s,i),(t=n.props&&n.props.onVnodeUpdated)&&Nt((()=>kn(t,c,n,u)),i)}else{let r;const{el:l,props:c}=t,{bm:u,m:d,parent:h}=e,p=de(t);if(Ut(e,!1),u&&(0,o.ir)(u),!p&&(r=c&&c.onVnodeBeforeMount)&&kn(r,h,t),Ut(e,!0),l&&ne){const n=()=>{e.subTree=B(e),ne(l,e.subTree,e,i,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const r=e.subTree=B(e);0,y(null,r,n,s,e,i,a),t.el=r.el}if(d&&Nt(d,i),!p&&(r=c&&c.onVnodeMounted)){const e=t;Nt((()=>kn(r,h,e)),i)}(256&t.shapeFlag||h&&de(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&Nt(e.a,i),e.isMounted=!0,t=n=s=null}},u=e.effect=new r.qq(c,(()=>S(d)),e.scope),d=e.update=()=>u.run();d.id=e.uid,Ut(e,!0),d()},z=(e,t,n)=>{t.component=e;const o=e.vnode.props;e.vnode=t,e.next=null,ht(e,t.props,o,n),It(e,t.children,n),(0,r.Jd)(),C(),(0,r.lk)()},V=(e,t,n,r,o,s,i,a,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void K(c,d,n,r,o,s,i,a,l);if(256&p)return void H(c,d,n,r,o,s,i,a,l)}8&f?(16&u&&J(c,o,s),d!==c&&h(n,d)):16&u?16&f?K(c,d,n,r,o,s,i,a,l):J(c,o,s,!0):(8&u&&h(n,""),16&f&&x(d,n,r,o,s,i,a,l))},H=(e,t,n,r,s,i,a,l,c)=>{e=e||o.Z6,t=t||o.Z6;const u=e.length,d=t.length,h=Math.min(u,d);let p;for(p=0;p<h;p++){const r=t[p]=c?Sn(t[p]):bn(t[p]);y(e[p],r,n,null,s,i,a,l,c)}u>d?J(e,s,i,!0,!1,h):x(t,n,r,s,i,a,l,c,h)},K=(e,t,n,r,s,i,a,l,c)=>{let u=0;const d=t.length;let h=e.length-1,p=d-1;while(u<=h&&u<=p){const r=e[u],o=t[u]=c?Sn(t[u]):bn(t[u]);if(!ln(r,o))break;y(r,o,n,null,s,i,a,l,c),u++}while(u<=h&&u<=p){const r=e[h],o=t[p]=c?Sn(t[p]):bn(t[p]);if(!ln(r,o))break;y(r,o,n,null,s,i,a,l,c),h--,p--}if(u>h){if(u<=p){const e=p+1,o=e<d?t[e].el:r;while(u<=p)y(null,t[u]=c?Sn(t[u]):bn(t[u]),n,o,s,i,a,l,c),u++}}else if(u>p)while(u<=h)W(e[u],s,i,!0),u++;else{const f=u,g=u,m=new Map;for(u=g;u<=p;u++){const e=t[u]=c?Sn(t[u]):bn(t[u]);null!=e.key&&m.set(e.key,u)}let v,w=0;const b=p-g+1;let S=!1,_=0;const E=new Array(b);for(u=0;u<b;u++)E[u]=0;for(u=f;u<=h;u++){const r=e[u];if(w>=b){W(r,s,i,!0);continue}let o;if(null!=r.key)o=m.get(r.key);else for(v=g;v<=p;v++)if(0===E[v-g]&&ln(r,t[v])){o=v;break}void 0===o?W(r,s,i,!0):(E[o-g]=u+1,o>=_?_=o:S=!0,y(r,t[o],n,null,s,i,a,l,c),w++)}const k=S?Bt(E):o.Z6;for(v=k.length-1,u=b-1;u>=0;u--){const e=g+u,o=t[e],h=e+1<d?t[e+1].el:r;0===E[u]?y(null,o,n,h,s,i,a,l,c):S&&(v<0||u!==k[v]?q(o,n,h,2):v--)}}},q=(e,t,n,r,o=null)=>{const{el:i,type:a,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void q(e.component.subTree,t,n,r);if(128&u)return void e.suspense.move(t,n,r);if(64&u)return void a.move(e,t,n,ee);if(a===Wt){s(i,t,n);for(let e=0;e<c.length;e++)q(c[e],t,n,r);return void s(e.anchor,t,n)}if(a===Zt)return void _(e,t,n);const d=2!==r&&1&u&&l;if(d)if(0===r)l.beforeEnter(i),s(i,t,n),Nt((()=>l.enter(i)),o);else{const{leave:e,delayLeave:r,afterLeave:o}=l,a=()=>s(i,t,n),c=()=>{e(i,(()=>{a(),o&&o()}))};r?r(i,a,c):c()}else s(i,t,n)},W=(e,t,n,r=!1,o=!1)=>{const{type:s,props:i,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h}=e;if(null!=a&&xt(a,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const p=1&u&&h,f=!de(e);let g;if(f&&(g=i&&i.onVnodeBeforeUnmount)&&kn(g,t,e),6&u)Z(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);p&&Pe(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,o,ee,r):c&&(s!==Wt||d>0&&64&d)?J(c,t,n,!1,!0):(s===Wt&&384&d||!o&&16&u)&&J(l,t,n),r&&Y(e)}(f&&(g=i&&i.onVnodeUnmounted)||p)&&Nt((()=>{g&&kn(g,t,e),p&&Pe(e,null,t,"unmounted")}),n)},Y=e=>{const{type:t,el:n,anchor:r,transition:o}=e;if(t===Wt)return void G(n,r);if(t===Zt)return void k(e);const s=()=>{i(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:r}=o,i=()=>t(n,s);r?r(e.el,s,i):i()}else s()},G=(e,t)=>{let n;while(e!==t)n=f(e),i(e),e=n;i(t)},Z=(e,t,n)=>{const{bum:r,scope:s,update:i,subTree:a,um:l}=e;r&&(0,o.ir)(r),s.stop(),i&&(i.active=!1,W(a,e,t,n)),l&&Nt(l,t),Nt((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,n,r=!1,o=!1,s=0)=>{for(let i=s;i<e.length;i++)W(e[i],t,n,r,o)},Q=e=>6&e.shapeFlag?Q(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),X=(e,t,n)=>{null==e?t._vnode&&W(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),C(),I(),t._vnode=e},ee={p:y,um:W,m:q,r:Y,mt:L,mc:x,pc:V,pbc:N,n:Q,o:e};let te,ne;return t&&([te,ne]=t(ee)),{render:X,hydrate:te,createApp:Rt(X,te)}}function Ut({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Lt(e,t,n=!1){const r=e.children,s=t.children;if((0,o.kJ)(r)&&(0,o.kJ)(s))for(let o=0;o<r.length;o++){const e=r[o];let t=s[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[o]=Sn(s[o]),t.el=e.el),n||Lt(e,t)),t.type===Yt&&(t.el=e.el)}}function Bt(e){const t=e.slice(),n=[0];let r,o,s,i,a;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(o=n[n.length-1],e[o]<l){t[r]=o,n.push(r);continue}s=0,i=n.length-1;while(s<i)a=s+i>>1,e[n[a]]<l?s=a+1:i=a;l<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}s=n.length,i=n[s-1];while(s-- >0)n[s]=i,i=t[i];return n}const Mt=e=>e.__isTeleport,Ft=e=>e&&(e.disabled||""===e.disabled),jt=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,zt=(e,t)=>{const n=e&&e.to;if((0,o.HD)(n)){if(t){const e=t(n);return e}return null}return n},$t={__isTeleport:!0,process(e,t,n,r,o,s,i,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:f,createText:g,createComment:m}}=c,y=Ft(t.props);let{shapeFlag:v,children:w,dynamicChildren:b}=t;if(null==e){const e=t.el=g(""),c=t.anchor=g("");p(e,n,r),p(c,n,r);const d=t.target=zt(t.props,f),h=t.targetAnchor=g("");d&&(p(h,d),i=i||jt(d));const m=(e,t)=>{16&v&&u(w,e,t,o,s,i,a,l)};y?m(n,c):d&&m(d,h)}else{t.el=e.el;const r=t.anchor=e.anchor,u=t.target=e.target,p=t.targetAnchor=e.targetAnchor,g=Ft(e.props),m=g?n:u,v=g?r:p;if(i=i||jt(u),b?(h(e.dynamicChildren,b,m,o,s,i,a),Lt(e,t,!0)):l||d(e,t,m,v,o,s,i,a,!1),y)g||Vt(t,n,r,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=zt(t.props,f);e&&Vt(t,e,null,c,0)}else g&&Vt(t,u,p,c,1)}qt(t)},remove(e,t,n,r,{um:o,o:{remove:s}},i){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=e;if(d&&s(u),(i||!Ft(h))&&(s(c),16&a))for(let p=0;p<l.length;p++){const e=l[p];o(e,t,n,!0,!!e.dynamicChildren)}},move:Vt,hydrate:Ht};function Vt(e,t,n,{o:{insert:r},m:o},s=2){0===s&&r(e.targetAnchor,t,n);const{el:i,anchor:a,shapeFlag:l,children:c,props:u}=e,d=2===s;if(d&&r(i,t,n),(!d||Ft(u))&&16&l)for(let h=0;h<c.length;h++)o(c[h],t,n,2);d&&r(a,t,n)}function Ht(e,t,n,r,o,s,{o:{nextSibling:i,parentNode:a,querySelector:l}},c){const u=t.target=zt(t.props,l);if(u){const l=u._lpa||u.firstChild;if(16&t.shapeFlag)if(Ft(t.props))t.anchor=c(i(e),t,a(e),n,r,o,s),t.targetAnchor=l;else{t.anchor=i(e);let a=l;while(a)if(a=i(a),a&&8===a.nodeType&&"teleport anchor"===a.data){t.targetAnchor=a,u._lpa=t.targetAnchor&&i(t.targetAnchor);break}c(l,t,u,n,r,o,s)}qt(t)}return t.anchor&&i(t.anchor)}const Kt=$t;function qt(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;while(n!==e.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Wt=Symbol(void 0),Yt=Symbol(void 0),Gt=Symbol(void 0),Zt=Symbol(void 0),Jt=[];let Qt=null;function Xt(e=!1){Jt.push(Qt=e?null:[])}function en(){Jt.pop(),Qt=Jt[Jt.length-1]||null}let tn=1;function nn(e){tn+=e}function rn(e){return e.dynamicChildren=tn>0?Qt||o.Z6:null,en(),tn>0&&Qt&&Qt.push(e),e}function on(e,t,n,r,o,s){return rn(hn(e,t,n,r,o,s,!0))}function sn(e,t,n,r,o){return rn(pn(e,t,n,r,o,!0))}function an(e){return!!e&&!0===e.__v_isVNode}function ln(e,t){return e.type===t.type&&e.key===t.key}const cn="__vInternal",un=({key:e})=>null!=e?e:null,dn=({ref:e,ref_key:t,ref_for:n})=>null!=e?(0,o.HD)(e)||(0,r.dq)(e)||(0,o.mf)(e)?{i:P,r:e,k:t,f:!!n}:e:null;function hn(e,t=null,n=null,r=0,s=null,i=(e===Wt?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&un(t),ref:t&&dn(t),scopeId:D,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:P};return l?(_n(c,n),128&i&&e.normalize(c)):n&&(c.shapeFlag|=(0,o.HD)(n)?8:16),tn>0&&!a&&Qt&&(c.patchFlag>0||6&i)&&32!==c.patchFlag&&Qt.push(c),c}const pn=fn;function fn(e,t=null,n=null,s=0,i=null,a=!1){if(e&&e!==Be||(e=Gt),an(e)){const r=mn(e,t,!0);return n&&_n(r,n),tn>0&&!a&&Qt&&(6&r.shapeFlag?Qt[Qt.indexOf(e)]=r:Qt.push(r)),r.patchFlag|=-2,r}if(Hn(e)&&(e=e.__vccOpts),t){t=gn(t);let{class:e,style:n}=t;e&&!(0,o.HD)(e)&&(t.class=(0,o.C_)(e)),(0,o.Kn)(n)&&((0,r.X3)(n)&&!(0,o.kJ)(n)&&(n=(0,o.l7)({},n)),t.style=(0,o.j5)(n))}const l=(0,o.HD)(e)?1:V(e)?128:Mt(e)?64:(0,o.Kn)(e)?4:(0,o.mf)(e)?2:0;return hn(e,t,n,s,i,l,a,!0)}function gn(e){return e?(0,r.X3)(e)||cn in e?(0,o.l7)({},e):e:null}function mn(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:a}=e,l=t?En(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&un(l),ref:t&&t.ref?n&&s?(0,o.kJ)(s)?s.concat(dn(t)):[s,dn(t)]:dn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Wt?-1===i?16:16|i:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mn(e.ssContent),ssFallback:e.ssFallback&&mn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c}function yn(e=" ",t=0){return pn(Yt,null,e,t)}function vn(e,t){const n=pn(Zt,null,e);return n.staticCount=t,n}function wn(e="",t=!1){return t?(Xt(),sn(Gt,null,e)):pn(Gt,null,e)}function bn(e){return null==e||"boolean"===typeof e?pn(Gt):(0,o.kJ)(e)?pn(Wt,null,e.slice()):"object"===typeof e?Sn(e):pn(Yt,null,String(e))}function Sn(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:mn(e)}function _n(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if((0,o.kJ)(t))n=16;else if("object"===typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),_n(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||cn in t?3===r&&P&&(1===P.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=P}}else(0,o.mf)(t)?(t={default:t,_ctx:P},n=32):(t=String(t),64&r?(n=16,t=[yn(t)]):n=8);e.children=t,e.shapeFlag|=n}function En(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=(0,o.C_)([t.class,r.class]));else if("style"===e)t.style=(0,o.j5)([t.style,r.style]);else if((0,o.F7)(e)){const n=t[e],s=r[e];!s||n===s||(0,o.kJ)(n)&&n.includes(s)||(t[e]=n?[].concat(n,s):s)}else""!==e&&(t[e]=r[e])}return t}function kn(e,t,n,r=null){a(e,t,7,[n,r])}const Cn=At();let In=0;function An(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||Cn,a={uid:In++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gt(s,i),emitsOptions:O(s,i),emit:null,emitted:null,propsDefaults:o.kT,inheritAttrs:s.inheritAttrs,ctx:o.kT,data:o.kT,props:o.kT,attrs:o.kT,slots:o.kT,refs:o.kT,setupState:o.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=x.bind(null,a),e.ce&&e.ce(a),a}let Tn=null;const Rn=()=>Tn||P,xn=e=>{Tn=e,e.scope.on()},On=()=>{Tn&&Tn.scope.off(),Tn=null};function Nn(e){return 4&e.vnode.shapeFlag}let Pn,Dn,Un=!1;function Ln(e,t=!1){Un=t;const{props:n,children:r}=e.vnode,o=Nn(e);dt(e,n,o,t),Ct(e,r);const s=o?Bn(e,t):void 0;return Un=!1,s}function Bn(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,r.Xl)(new Proxy(e.ctx,Ze));const{setup:s}=n;if(s){const n=e.setupContext=s.length>1?zn(e):null;xn(e),(0,r.Jd)();const a=i(s,e,0,[e.props,n]);if((0,r.lk)(),On(),(0,o.tI)(a)){if(a.then(On,On),t)return a.then((n=>{Mn(e,n,t)})).catch((t=>{l(t,e,0)}));e.asyncDep=a}else Mn(e,a,t)}else Fn(e,t)}function Mn(e,t,n){(0,o.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,o.Kn)(t)&&(e.setupState=(0,r.WL)(t)),Fn(e,n)}function Fn(e,t,n){const s=e.type;if(!e.render){if(!t&&Pn&&!s.render){const t=s.template||nt(e).template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:i,compilerOptions:a}=s,l=(0,o.l7)((0,o.l7)({isCustomElement:n,delimiters:i},r),a);s.render=Pn(t,l)}}e.render=s.render||o.dG,Dn&&Dn(e)}xn(e),(0,r.Jd)(),Qe(e),(0,r.lk)(),On()}function jn(e){return new Proxy(e.attrs,{get(t,n){return(0,r.j)(e,"get","$attrs"),t[n]}})}function zn(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=jn(e))},slots:e.slots,emit:e.emit,expose:t}}function $n(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in Ye?Ye[n](e):void 0},has(e,t){return t in e||t in Ye}}))}function Vn(e,t=!0){return(0,o.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function Hn(e){return(0,o.mf)(e)&&"__vccOpts"in e}const Kn=(e,t)=>(0,r.Fl)(e,t,Un);function qn(){return Yn().slots}function Wn(){return Yn().attrs}function Yn(){const e=Rn();return e.setupContext||(e.setupContext=zn(e))}function Gn(e,t,n){const r=arguments.length;return 2===r?(0,o.Kn)(t)&&!(0,o.kJ)(t)?an(t)?pn(e,null,[t]):pn(e,t):pn(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&an(n)&&(n=[n]),pn(e,t,n))}const Zn=Symbol(""),Jn=()=>{{const e=q(Zn);return e}};const Qn="3.2.47"},9963:function(e,t,n){"use strict";n.d(t,{D2:function(){return we},F8:function(){return be},G2:function(){return he},W3:function(){return te},e8:function(){return ue},iM:function(){return ye},nr:function(){return ce},ri:function(){return Ie},sY:function(){return Ce},uT:function(){return U}});var r=n(3577),o=n(6252),s=n(2262);const i="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,l=a&&a.createElement("template"),c={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t?a.createElementNS(i,e):a.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&o.setAttribute("multiple",r.multiple),o},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,s){const i=n?n.previousSibling:t.lastChild;if(o&&(o===s||o.nextSibling)){while(1)if(t.insertBefore(o.cloneNode(!0),n),o===s||!(o=o.nextSibling))break}else{l.innerHTML=r?`<svg>${e}</svg>`:e;const o=l.content;if(r){const e=o.firstChild;while(e.firstChild)o.appendChild(e.firstChild);o.removeChild(e)}t.insertBefore(o,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function u(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function d(e,t,n){const o=e.style,s=(0,r.HD)(n);if(n&&!s){if(t&&!(0,r.HD)(t))for(const e in t)null==n[e]&&p(o,e,"");for(const e in n)p(o,e,n[e])}else{const r=o.display;s?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=r)}}const h=/\s*!important$/;function p(e,t,n){if((0,r.kJ)(n))n.forEach((n=>p(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=m(e,t);h.test(n)?e.setProperty((0,r.rs)(o),n.replace(h,""),"important"):e[o]=n}}const f=["Webkit","Moz","ms"],g={};function m(e,t){const n=g[t];if(n)return n;let o=(0,r._A)(t);if("filter"!==o&&o in e)return g[t]=o;o=(0,r.kC)(o);for(let r=0;r<f.length;r++){const n=f[r]+o;if(n in e)return g[t]=n}return t}const y="http://www.w3.org/1999/xlink";function v(e,t,n,o,s){if(o&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(y,t.slice(6,t.length)):e.setAttributeNS(y,t,n);else{const o=(0,r.Pq)(t);null==n||o&&!(0,r.yA)(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function w(e,t,n,o,s,i,a){if("innerHTML"===t||"textContent"===t)return o&&a(o,s,i),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const o=typeof e[t];"boolean"===o?n=(0,r.yA)(n):null==n&&"string"===o?(n="",l=!0):"number"===o&&(n=0,l=!0)}try{e[t]=n}catch(c){0}l&&e.removeAttribute(t)}function b(e,t,n,r){e.addEventListener(t,n,r)}function S(e,t,n,r){e.removeEventListener(t,n,r)}function _(e,t,n,r,o=null){const s=e._vei||(e._vei={}),i=s[t];if(r&&i)i.value=r;else{const[n,a]=k(t);if(r){const i=s[t]=T(r,o);b(e,n,i,a)}else i&&(S(e,n,i,a),s[t]=void 0)}}const E=/(?:Once|Passive|Capture)$/;function k(e){let t;if(E.test(e)){let n;t={};while(n=e.match(E))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,r.rs)(e.slice(2));return[n,t]}let C=0;const I=Promise.resolve(),A=()=>C||(I.then((()=>C=0)),C=Date.now());function T(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,o.$d)(R(e,n.value),t,5,[e])};return n.value=e,n.attached=A(),n}function R(e,t){if((0,r.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const x=/^on[a-z]/,O=(e,t,n,o,s=!1,i,a,l,c)=>{"class"===t?u(e,o,s):"style"===t?d(e,n,o):(0,r.F7)(t)?(0,r.tR)(t)||_(e,t,n,o,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):N(e,t,o,s))?w(e,t,o,i,a,l,c):("true-value"===t?e._trueValue=o:"false-value"===t&&(e._falseValue=o),v(e,t,o,s))};function N(e,t,n,o){return o?"innerHTML"===t||"textContent"===t||!!(t in e&&x.test(t)&&(0,r.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!x.test(t)||!(0,r.HD)(n))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const P="transition",D="animation",U=(e,{slots:t})=>(0,o.h)(o.P$,j(e),t);U.displayName="Transition";const L={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},B=U.props=(0,r.l7)({},o.P$.props,L),M=(e,t=[])=>{(0,r.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},F=e=>!!e&&((0,r.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function j(e){const t={};for(const r in e)r in L||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:o,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=a,appearToClass:d=l,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,g=z(s),m=g&&g[0],y=g&&g[1],{onBeforeEnter:v,onEnter:w,onEnterCancelled:b,onLeave:S,onLeaveCancelled:_,onBeforeAppear:E=v,onAppear:k=w,onAppearCancelled:C=b}=t,I=(e,t,n)=>{H(e,t?d:l),H(e,t?u:a),n&&n()},A=(e,t)=>{e._isLeaving=!1,H(e,h),H(e,f),H(e,p),t&&t()},T=e=>(t,n)=>{const r=e?k:w,s=()=>I(t,e,n);M(r,[t,s]),K((()=>{H(t,e?c:i),V(t,e?d:l),F(r)||W(t,o,m,s)}))};return(0,r.l7)(t,{onBeforeEnter(e){M(v,[e]),V(e,i),V(e,a)},onBeforeAppear(e){M(E,[e]),V(e,c),V(e,u)},onEnter:T(!1),onAppear:T(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>A(e,t);V(e,h),J(),V(e,p),K((()=>{e._isLeaving&&(H(e,h),V(e,f),F(S)||W(e,o,y,n))})),M(S,[e,n])},onEnterCancelled(e){I(e,!1),M(b,[e])},onAppearCancelled(e){I(e,!0),M(C,[e])},onLeaveCancelled(e){A(e),M(_,[e])}})}function z(e){if(null==e)return null;if((0,r.Kn)(e))return[$(e.enter),$(e.leave)];{const t=$(e);return[t,t]}}function $(e){const t=(0,r.He)(e);return t}function V(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function H(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function K(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let q=0;function W(e,t,n,r){const o=e._endId=++q,s=()=>{o===e._endId&&r()};if(n)return setTimeout(s,n);const{type:i,timeout:a,propCount:l}=Y(e,t);if(!i)return r();const c=i+"end";let u=0;const d=()=>{e.removeEventListener(c,h),s()},h=t=>{t.target===e&&++u>=l&&d()};setTimeout((()=>{u<l&&d()}),a+1),e.addEventListener(c,h)}function Y(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),o=r(`${P}Delay`),s=r(`${P}Duration`),i=G(o,s),a=r(`${D}Delay`),l=r(`${D}Duration`),c=G(a,l);let u=null,d=0,h=0;t===P?i>0&&(u=P,d=i,h=s.length):t===D?c>0&&(u=D,d=c,h=l.length):(d=Math.max(i,c),u=d>0?i>c?P:D:null,h=u?u===P?s.length:l.length:0);const p=u===P&&/\b(transform|all)(,|$)/.test(r(`${P}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:p}}function G(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>Z(t)+Z(e[n]))))}function Z(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function J(){return document.body.offsetHeight}const Q=new WeakMap,X=new WeakMap,ee={name:"TransitionGroup",props:(0,r.l7)({},B,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,o.FN)(),r=(0,o.Y8)();let i,a;return(0,o.ic)((()=>{if(!i.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!se(i[0].el,n.vnode.el,t))return;i.forEach(ne),i.forEach(re);const r=i.filter(oe);J(),r.forEach((e=>{const n=e.el,r=n.style;V(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const o=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",o),n._moveCb=null,H(n,t))};n.addEventListener("transitionend",o)}))})),()=>{const l=(0,s.IU)(e),c=j(l);let u=l.tag||o.HY;i=a,a=t.default?(0,o.Q6)(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&(0,o.nK)(t,(0,o.U2)(t,c,r,n))}if(i)for(let e=0;e<i.length;e++){const t=i[e];(0,o.nK)(t,(0,o.U2)(t,c,r,n)),Q.set(t,t.el.getBoundingClientRect())}return(0,o.Wm)(u,null,a)}}};ee.props;const te=ee;function ne(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function re(e){X.set(e,e.el.getBoundingClientRect())}function oe(e){const t=Q.get(e),n=X.get(e),r=t.left-n.left,o=t.top-n.top;if(r||o){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${o}px)`,t.transitionDuration="0s",e}}function se(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const o=1===t.nodeType?t:t.parentNode;o.appendChild(r);const{hasTransform:s}=Y(r);return o.removeChild(r),s}const ie=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(t)?e=>(0,r.ir)(t,e):t};function ae(e){e.target.composing=!0}function le(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ce={created(e,{modifiers:{lazy:t,trim:n,number:o}},s){e._assign=ie(s);const i=o||s.props&&"number"===s.props.type;b(e,t?"change":"input",(t=>{if(t.target.composing)return;let o=e.value;n&&(o=o.trim()),i&&(o=(0,r.h5)(o)),e._assign(o)})),n&&b(e,"change",(()=>{e.value=e.value.trim()})),t||(b(e,"compositionstart",ae),b(e,"compositionend",le),b(e,"change",le))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:s}},i){if(e._assign=ie(i),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(o&&e.value.trim()===t)return;if((s||"number"===e.type)&&(0,r.h5)(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},ue={deep:!0,created(e,t,n){e._assign=ie(n),b(e,"change",(()=>{const t=e._modelValue,n=pe(e),o=e.checked,s=e._assign;if((0,r.kJ)(t)){const e=(0,r.hq)(t,n),i=-1!==e;if(o&&!i)s(t.concat(n));else if(!o&&i){const n=[...t];n.splice(e,1),s(n)}}else if((0,r.DM)(t)){const e=new Set(t);o?e.add(n):e.delete(n),s(e)}else s(fe(e,o))}))},mounted:de,beforeUpdate(e,t,n){e._assign=ie(n),de(e,t,n)}};function de(e,{value:t,oldValue:n},o){e._modelValue=t,(0,r.kJ)(t)?e.checked=(0,r.hq)(t,o.props.value)>-1:(0,r.DM)(t)?e.checked=t.has(o.props.value):t!==n&&(e.checked=(0,r.WV)(t,fe(e,!0)))}const he={created(e,{value:t},n){e.checked=(0,r.WV)(t,n.props.value),e._assign=ie(n),b(e,"change",(()=>{e._assign(pe(e))}))},beforeUpdate(e,{value:t,oldValue:n},o){e._assign=ie(o),t!==n&&(e.checked=(0,r.WV)(t,o.props.value))}};function pe(e){return"_value"in e?e._value:e.value}function fe(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ge=["ctrl","shift","alt","meta"],me={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>ge.some((n=>e[`${n}Key`]&&!t.includes(n)))},ye=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=me[t[e]];if(r&&r(n,t))return}return e(n,...r)},ve={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},we=(e,t)=>n=>{if(!("key"in n))return;const o=(0,r.rs)(n.key);return t.some((e=>e===o||ve[e]===o))?e(n):void 0},be={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Se(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!==!n&&(r?t?(r.beforeEnter(e),Se(e,!0),r.enter(e)):r.leave(e,(()=>{Se(e,!1)})):Se(e,t))},beforeUnmount(e,{value:t}){Se(e,t)}};function Se(e,t){e.style.display=t?e._vod:"none"}const _e=(0,r.l7)({patchProp:O},c);let Ee;function ke(){return Ee||(Ee=(0,o.Us)(_e))}const Ce=(...e)=>{ke().render(...e)},Ie=(...e)=>{const t=ke().createApp(...e);const{mount:n}=t;return t.mount=e=>{const o=Ae(e);if(!o)return;const s=t._component;(0,r.mf)(s)||s.render||s.template||(s.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function Ae(e){if((0,r.HD)(e)){const t=document.querySelector(e);return t}return e}},3577:function(e,t,n){"use strict";function r(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,{C_:function(){return d},DM:function(){return D},E9:function(){return ae},F7:function(){return I},Gg:function(){return W},HD:function(){return M},He:function(){return se},J_:function(){return U},Kj:function(){return L},Kn:function(){return j},NO:function(){return k},Nj:function(){return re},Od:function(){return R},PO:function(){return K},Pq:function(){return f},RI:function(){return O},S0:function(){return q},W7:function(){return H},WV:function(){return y},Z6:function(){return _},_A:function(){return Z},_N:function(){return P},aU:function(){return te},dG:function(){return E},e1:function(){return s},fY:function(){return r},h5:function(){return oe},hR:function(){return ee},hq:function(){return v},ir:function(){return ne},j5:function(){return i},kC:function(){return X},kJ:function(){return N},kT:function(){return S},l7:function(){return T},mf:function(){return B},rs:function(){return Q},tI:function(){return z},tR:function(){return A},vs:function(){return h},yA:function(){return g},yk:function(){return F},zw:function(){return w}});const o="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=r(o);function i(e){if(N(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=M(r)?u(r):i(r);if(o)for(const e in o)t[e]=o[e]}return t}return M(e)||j(e)?e:void 0}const a=/;(?![^(]*\))/g,l=/:([^]+)/,c=/\/\*.*?\*\//gs;function u(e){const t={};return e.replace(c,"").split(a).forEach((e=>{if(e){const n=e.split(l);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function d(e){let t="";if(M(e))t=e;else if(N(e))for(let n=0;n<e.length;n++){const r=d(e[n]);r&&(t+=r+" ")}else if(j(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function h(e){if(!e)return null;let{class:t,style:n}=e;return t&&!M(t)&&(e.class=d(t)),n&&(e.style=i(n)),e}const p="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",f=r(p);function g(e){return!!e||""===e}function m(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=y(e[r],t[r]);return n}function y(e,t){if(e===t)return!0;let n=U(e),r=U(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=F(e),r=F(t),n||r)return e===t;if(n=N(e),r=N(t),n||r)return!(!n||!r)&&m(e,t);if(n=j(e),r=j(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,s=Object.keys(t).length;if(o!==s)return!1;for(const n in e){const r=e.hasOwnProperty(n),o=t.hasOwnProperty(n);if(r&&!o||!r&&o||!y(e[n],t[n]))return!1}}return String(e)===String(t)}function v(e,t){return e.findIndex((e=>y(e,t)))}const w=e=>M(e)?e:null==e?"":N(e)||j(e)&&(e.toString===$||!B(e.toString))?JSON.stringify(e,b,2):String(e),b=(e,t)=>t&&t.__v_isRef?b(e,t.value):P(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:D(t)?{[`Set(${t.size})`]:[...t.values()]}:!j(t)||N(t)||K(t)?t:String(t),S={},_=[],E=()=>{},k=()=>!1,C=/^on[^a-z]/,I=e=>C.test(e),A=e=>e.startsWith("onUpdate:"),T=Object.assign,R=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},x=Object.prototype.hasOwnProperty,O=(e,t)=>x.call(e,t),N=Array.isArray,P=e=>"[object Map]"===V(e),D=e=>"[object Set]"===V(e),U=e=>"[object Date]"===V(e),L=e=>"[object RegExp]"===V(e),B=e=>"function"===typeof e,M=e=>"string"===typeof e,F=e=>"symbol"===typeof e,j=e=>null!==e&&"object"===typeof e,z=e=>j(e)&&B(e.then)&&B(e.catch),$=Object.prototype.toString,V=e=>$.call(e),H=e=>V(e).slice(8,-1),K=e=>"[object Object]"===V(e),q=e=>M(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,W=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Y=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},G=/-(\w)/g,Z=Y((e=>e.replace(G,((e,t)=>t?t.toUpperCase():"")))),J=/\B([A-Z])/g,Q=Y((e=>e.replace(J,"-$1").toLowerCase())),X=Y((e=>e.charAt(0).toUpperCase()+e.slice(1))),ee=Y((e=>e?`on${X(e)}`:"")),te=(e,t)=>!Object.is(e,t),ne=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},re=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},oe=e=>{const t=parseFloat(e);return isNaN(t)?e:t},se=e=>{const t=M(e)?Number(e):NaN;return isNaN(t)?e:t};let ie;const ae=()=>ie||(ie="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},9464:function(e,t,n){"use strict";const{fromCallback:r}=n(6957),o=n(4473),{getCallback:s,getOptions:i}=n(2520),a=Symbol("promise"),l=Symbol("status"),c=Symbol("operations"),u=Symbol("finishClose"),d=Symbol("closeCallbacks");class h{constructor(e){if("object"!==typeof e||null===e){const t=null===e?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[c]=[],this[d]=[],this[l]="open",this[u]=this[u].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[c].length}put(e,t,n){if("open"!==this[l])throw new o("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const r=this.db._checkKey(e)||this.db._checkValue(t);if(r)throw r;const s=n&&null!=n.sublevel?n.sublevel:this.db,i=n,a=s.keyEncoding(n&&n.keyEncoding),u=s.valueEncoding(n&&n.valueEncoding),d=a.format;n={...n,keyEncoding:d,valueEncoding:u.format},s!==this.db&&(n.sublevel=null);const h=s.prefixKey(a.encode(e),d),p=u.encode(t);return this._put(h,p,n),this[c].push({...i,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if("open"!==this[l])throw new o("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const r=t&&null!=t.sublevel?t.sublevel:this.db,s=t,i=r.keyEncoding(t&&t.keyEncoding),a=i.format;return t={...t,keyEncoding:a},r!==this.db&&(t.sublevel=null),this._del(r.prefixKey(i.encode(e),a),t),this[c].push({...s,type:"del",key:e}),this}_del(e,t){}clear(){if("open"!==this[l])throw new o("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[c]=[],this}_clear(){}write(e,t){return t=s(e,t),t=r(t,a),e=i(e),"open"!==this[l]?this.nextTick(t,new o("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(t):(this[l]="writing",this._write(e,(e=>{this[l]="closing",this[d].push((()=>t(e))),e||this.db.emit("batch",this[c]),this._close(this[u])}))),t[a]}_write(e,t){}close(e){return e=r(e,a),"closing"===this[l]?this[d].push(e):"closed"===this[l]?this.nextTick(e):(this[d].push(e),"writing"!==this[l]&&(this[l]="closing",this._close(this[u]))),e[a]}_close(e){this.nextTick(e)}[u](){this[l]="closed",this.db.detachResource(this);const e=this[d];this[d]=[];for(const t of e)t()}}t.AbstractChainedBatch=h},3961:function(e,t,n){"use strict";const{fromCallback:r}=n(6957),o=n(4473),{getOptions:s,getCallback:i}=n(2520),a=Symbol("promise"),l=Symbol("callback"),c=Symbol("working"),u=Symbol("handleOne"),d=Symbol("handleMany"),h=Symbol("autoClose"),p=Symbol("finishWork"),f=Symbol("returnMany"),g=Symbol("closing"),m=Symbol("handleClose"),y=Symbol("closed"),v=Symbol("closeCallbacks"),w=Symbol("keyEncoding"),b=Symbol("valueEncoding"),S=Symbol("abortOnClose"),_=Symbol("legacy"),E=Symbol("keys"),k=Symbol("values"),C=Symbol("limit"),I=Symbol("count"),A=Object.freeze({}),T=()=>{};let R=!1;class x{constructor(e,t,n){if("object"!==typeof e||null===e){const t=null===e?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}if("object"!==typeof t||null===t)throw new TypeError("The second argument must be an options object");this[y]=!1,this[v]=[],this[c]=!1,this[g]=!1,this[h]=!1,this[l]=null,this[u]=this[u].bind(this),this[d]=this[d].bind(this),this[m]=this[m].bind(this),this[w]=t[w],this[b]=t[b],this[_]=n,this[C]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[I]=0,this[S]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[I]}get limit(){return this[C]}next(e){let t;if(void 0===e)t=new Promise(((t,n)=>{e=(e,r,o)=>{e?n(e):this[_]?void 0===r&&void 0===o?t():t([r,o]):t(r)}}));else if("function"!==typeof e)throw new TypeError("Callback must be a function");return this[g]?this.nextTick(e,new o("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[c]?this.nextTick(e,new o("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[c]=!0,this[l]=e,this[I]>=this[C]?this.nextTick(this[u],null):this._next(this[u])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=i(t,n),n=r(n,a),t=s(t,A),Number.isInteger(e)?(this[g]?this.nextTick(n,new o("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[c]?this.nextTick(n,new o("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[C]<1/0&&(e=Math.min(e,this[C]-this[I])),this[c]=!0,this[l]=n,e<=0?this.nextTick(this[d],null,[]):this._nextv(e,t,this[d])),n[a]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[a])}_nextv(e,t,n){const r=[],o=(t,s,i)=>t?n(t):(this[_]?void 0===s&&void 0===i:void 0===s)?n(null,r):(r.push(this[_]?[s,i]:s),void(r.length===e?n(null,r):this._next(o)));this._next(o)}all(e,t){return t=i(e,t),t=r(t,a),e=s(e,A),this[g]?this.nextTick(t,new o("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[c]?this.nextTick(t,new o("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[c]=!0,this[l]=t,this[h]=!0,this[I]>=this[C]?this.nextTick(this[d],null,[]):this._all(e,this[d])),t[a]}_all(e,t){let n=this[I];const r=[],o=()=>{const e=this[C]<1/0?Math.min(1e3,this[C]-n):1e3;e<=0?this.nextTick(t,null,r):this._nextv(e,A,s)},s=(e,s)=>{e?t(e):0===s.length?t(null,r):(r.push.apply(r,s),n+=s.length,o())};o()}[p](){const e=this[l];return this[S]&&null===e?T:(this[c]=!1,this[l]=null,this[g]&&this._close(this[m]),e)}[f](e,t,n){this[h]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=s(t,A),this[g]);else{if(this[c])throw new o("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(t.keyEncoding||this[w]),r=n.format;t.keyEncoding!==r&&(t={...t,keyEncoding:r});const o=this.db.prefixKey(n.encode(e),r);this._seek(o,t)}}}_seek(e,t){throw new o("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){if(e=r(e,a),this[y])this.nextTick(e);else if(this[g])this[v].push(e);else if(this[g]=!0,this[v].push(e),this[c]){if(this[S]){const e=this[p]();e(new o("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))}}else this._close(this[m]);return e[a]}_close(e){this.nextTick(e)}[m](){this[y]=!0,this.db.detachResource(this);const e=this[v];this[v]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;while(void 0!==(e=await this.next()))yield e}finally{this[y]||await this.close()}}}class O extends x{constructor(e,t){super(e,t,!0),this[E]=!1!==t.keys,this[k]=!1!==t.values}[u](e,t,n){const r=this[p]();if(e)return r(e);try{t=this[E]&&void 0!==t?this[w].decode(t):void 0,n=this[k]&&void 0!==n?this[b].decode(n):void 0}catch(e){return r(new D("entry",e))}void 0===t&&void 0===n||this[I]++,r(null,t,n)}[d](e,t){const n=this[p]();if(e)return this[f](n,e);try{for(const e of t){const t=e[0],n=e[1];e[0]=this[E]&&void 0!==t?this[w].decode(t):void 0,e[1]=this[k]&&void 0!==n?this[b].decode(n):void 0}}catch(e){return this[f](n,new D("entries",e))}this[I]+=t.length,this[f](n,null,t)}end(e){return R||"undefined"===typeof console||(R=!0,console.warn(new o("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}class N extends x{constructor(e,t){super(e,t,!1)}[u](e,t){const n=this[p]();if(e)return n(e);try{t=void 0!==t?this[w].decode(t):void 0}catch(e){return n(new D("key",e))}void 0!==t&&this[I]++,n(null,t)}[d](e,t){const n=this[p]();if(e)return this[f](n,e);try{for(let e=0;e<t.length;e++){const n=t[e];t[e]=void 0!==n?this[w].decode(n):void 0}}catch(e){return this[f](n,new D("keys",e))}this[I]+=t.length,this[f](n,null,t)}}class P extends x{constructor(e,t){super(e,t,!1)}[u](e,t){const n=this[p]();if(e)return n(e);try{t=void 0!==t?this[b].decode(t):void 0}catch(e){return n(new D("value",e))}void 0!==t&&this[I]++,n(null,t)}[d](e,t){const n=this[p]();if(e)return this[f](n,e);try{for(let e=0;e<t.length;e++){const n=t[e];t[e]=void 0!==n?this[b].decode(n):void 0}}catch(e){return this[f](n,new D("values",e))}this[I]+=t.length,this[f](n,null,t)}}class D extends o{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const U of["_ended property","_nexting property","_end method"])Object.defineProperty(O.prototype,U.split(" ")[0],{get(){throw new o(`The ${U} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new o(`The ${U} has been removed`,{code:"LEVEL_LEGACY"})}});O.keyEncoding=w,O.valueEncoding=b,t.AbstractIterator=O,t.AbstractKeyIterator=N,t.AbstractValueIterator=P},9071:function(e,t,n){"use strict";const{supports:r}=n(1675),{Transcoder:o}=n(8499),{EventEmitter:s}=n(7187),{fromCallback:i}=n(6957),a=n(4473),{AbstractIterator:l}=n(3961),{DefaultKeyIterator:c,DefaultValueIterator:u}=n(5429),{DeferredIterator:d,DeferredKeyIterator:h,DeferredValueIterator:p}=n(1791),{DefaultChainedBatch:f}=n(4765),{getCallback:g,getOptions:m}=n(2520),y=n(56),v=Symbol("promise"),w=Symbol("landed"),b=Symbol("resources"),S=Symbol("closeResources"),_=Symbol("operations"),E=Symbol("undefer"),k=Symbol("deferOpen"),C=Symbol("options"),I=Symbol("status"),A=Symbol("defaultOptions"),T=Symbol("transcoder"),R=Symbol("keyEncoding"),x=Symbol("valueEncoding"),O=()=>{};class N extends s{constructor(e,t){if(super(),"object"!==typeof e||null===e)throw new TypeError("The first argument 'manifest' must be an object");t=m(t);const{keyEncoding:n,valueEncoding:s,passive:i,...a}=t;this[b]=new Set,this[_]=[],this[k]=!0,this[C]=a,this[I]="opening",this.supports=r(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==e.snapshots,permanence:!1!==e.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[T]=new o(U(this)),this[R]=this[T].encoding(n||"utf8"),this[x]=this[T].encoding(s||"utf8");for(const r of this[T].encodings())this.supports.encodings[r.commonName]||(this.supports.encodings[r.commonName]=!0);this[A]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[R].commonName,valueEncoding:this[x].commonName}),key:Object.freeze({keyEncoding:this[R].commonName})},this.nextTick((()=>{this[k]&&this.open({passive:!1},O)}))}get status(){return this[I]}keyEncoding(e){return this[T].encoding(null!=e?e:this[R])}valueEncoding(e){return this[T].encoding(null!=e?e:this[x])}open(e,t){t=g(e,t),t=i(t,v),e={...this[C],...m(e)},e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists;const n=e=>{"closing"===this[I]||"opening"===this[I]?this.once(w,e?()=>n(e):n):"open"!==this[I]?t(new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:e})):t()};return e.passive?"opening"===this[I]?this.once(w,n):this.nextTick(n):"closed"===this[I]||this[k]?(this[k]=!1,this[I]="opening",this.emit("opening"),this._open(e,(e=>{if(e)return this[I]="closed",this[S]((()=>{this.emit(w),n(e)})),void this[E]();this[I]="open",this[E](),this.emit(w),"open"===this[I]&&this.emit("open"),"open"===this[I]&&this.emit("ready"),n()}))):"open"===this[I]?this.nextTick(n):this.once(w,(()=>this.open(e,t))),t[v]}_open(e,t){this.nextTick(t)}close(e){e=i(e,v);const t=n=>{"opening"===this[I]||"closing"===this[I]?this.once(w,n?t(n):t):"closed"!==this[I]?e(new a("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if("open"===this[I]){this[I]="closing",this.emit("closing");const e=e=>{this[I]="open",this[E](),this.emit(w),t(e)};this[S]((()=>{this._close((n=>{if(n)return e(n);this[I]="closed",this[E](),this.emit(w),"closed"===this[I]&&this.emit("closed"),t()}))}))}else"closed"===this[I]?this.nextTick(t):this.once(w,(()=>this.close(e)));return e[v]}[S](e){if(0===this[b].size)return this.nextTick(e);let t=this[b].size,n=!0;const r=()=>{0===--t&&(n?this.nextTick(e):e())};for(const o of this[b])o.close(r);n=!1,this[b].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=g(t,n),n=i(n,v),t=m(t,this[A].entry),"opening"===this[I])return this.defer((()=>this.get(e,t,n))),n[v];if(D(this,n))return n[v];const r=this._checkKey(e);if(r)return this.nextTick(n,r),n[v];const o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),l=o.format,c=s.format;return t.keyEncoding===l&&t.valueEncoding===c||(t=Object.assign({},t,{keyEncoding:l,valueEncoding:c})),this._get(this.prefixKey(o.encode(e),l),t,((e,t)=>{if(e)return("LEVEL_NOT_FOUND"===e.code||e.notFound||/NotFound/i.test(e))&&(e.code||(e.code="LEVEL_NOT_FOUND"),e.notFound||(e.notFound=!0),e.status||(e.status=404)),n(e);try{t=s.decode(t)}catch(e){return n(new a("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:e}))}n(null,t)})),n[v]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=g(t,n),n=i(n,v),t=m(t,this[A].entry),"opening"===this[I])return this.defer((()=>this.getMany(e,t,n))),n[v];if(D(this,n))return n[v];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[v];if(0===e.length)return this.nextTick(n,null,[]),n[v];const r=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=r.format,l=o.format;t.keyEncoding===s&&t.valueEncoding===l||(t=Object.assign({},t,{keyEncoding:s,valueEncoding:l}));const c=new Array(e.length);for(let i=0;i<e.length;i++){const t=e[i],o=this._checkKey(t);if(o)return this.nextTick(n,o),n[v];c[i]=this.prefixKey(r.encode(t),s)}return this._getMany(c,t,((e,t)=>{if(e)return n(e);try{for(let e=0;e<t.length;e++)void 0!==t[e]&&(t[e]=o.decode(t[e]))}catch(e){return n(new a(`Could not decode one or more of ${t.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:e}))}n(null,t)})),n[v]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,r){if(r=g(n,r),r=i(r,v),n=m(n,this[A].entry),"opening"===this[I])return this.defer((()=>this.put(e,t,n,r))),r[v];if(D(this,r))return r[v];const o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(r,o),r[v];const s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),l=s.format,c=a.format;n.keyEncoding===l&&n.valueEncoding===c||(n=Object.assign({},n,{keyEncoding:l,valueEncoding:c}));const u=this.prefixKey(s.encode(e),l),d=a.encode(t);return this._put(u,d,n,(n=>{if(n)return r(n);this.emit("put",e,t),r()})),r[v]}_put(e,t,n,r){this.nextTick(r)}del(e,t,n){if(n=g(t,n),n=i(n,v),t=m(t,this[A].key),"opening"===this[I])return this.defer((()=>this.del(e,t,n))),n[v];if(D(this,n))return n[v];const r=this._checkKey(e);if(r)return this.nextTick(n,r),n[v];const o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,(t=>{if(t)return n(t);this.emit("del",e),n()})),n[v]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if("opening"===this[I])return new f(this);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(n="function"===typeof e?e:g(t,n),n=i(n,v),t=m(t,this[A].empty),"opening"===this[I])return this.defer((()=>this.batch(e,t,n))),n[v];if(D(this,n))return n[v];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[v];if(0===e.length)return this.nextTick(n),n[v];const r=new Array(e.length),{keyEncoding:o,valueEncoding:s,...l}=t;for(let i=0;i<e.length;i++){if("object"!==typeof e[i]||null===e[i])return this.nextTick(n,new TypeError("A batch operation must be an object")),n[v];const t=Object.assign({},e[i]);if("put"!==t.type&&"del"!==t.type)return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[v];const a=this._checkKey(t.key);if(a)return this.nextTick(n,a),n[v];const l=null!=t.sublevel?t.sublevel:this,c=l.keyEncoding(t.keyEncoding||o),u=c.format;if(t.key=l.prefixKey(c.encode(t.key),u),t.keyEncoding=u,"put"===t.type){const e=this._checkValue(t.value);if(e)return this.nextTick(n,e),n[v];const r=l.valueEncoding(t.valueEncoding||s);t.value=r.encode(t.value),t.valueEncoding=r.format}l!==this&&(t.sublevel=null),r[i]=t}return this._batch(r,l,(t=>{if(t)return n(t);this.emit("batch",e),n()})),n[v]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,P.defaults(t))}_sublevel(e,t){return new P(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=g(e,t),t=i(t,v),e=m(e,this[A].empty),"opening"===this[I])return this.defer((()=>this.clear(e,t))),t[v];if(D(this,t))return t[v];const n=e,r=this.keyEncoding(e.keyEncoding);return e=y(e,r),e.keyEncoding=r.format,0===e.limit?this.nextTick(t):this._clear(e,(e=>{if(e)return t(e);this.emit("clear",n),t()})),t[v]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=y(e,t),e.keys=!1!==e.keys,e.values=!1!==e.values,e[l.keyEncoding]=t,e[l.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,"opening"===this[I])return new d(this,e);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new l(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=y(e,t),e[l.keyEncoding]=t,e[l.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,"opening"===this[I])return new h(this,e);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new c(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=y(e,t),e[l.keyEncoding]=t,e[l.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,"opening"===this[I])return new p(this,e);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new u(this,e)}defer(e){if("function"!==typeof e)throw new TypeError("The first argument must be a function");this[_].push(e)}[E](){if(0===this[_].length)return;const e=this[_];this[_]=[];for(const t of e)t()}attachResource(e){if("object"!==typeof e||null===e||"function"!==typeof e.close)throw new TypeError("The first argument must be a resource object");this[b].add(e)}detachResource(e){this[b].delete(e)}_chainedBatch(){return new f(this)}_checkKey(e){if(null===e||void 0===e)return new a("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(null===e||void 0===e)return new a("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}N.prototype.nextTick=n(6909);const{AbstractSublevel:P}=n(9650)({AbstractLevel:N});t.AbstractLevel=N,t.AbstractSublevel=P;const D=function(e,t){return"open"!==e[I]&&(e.nextTick(t,new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},U=function(e){return Object.keys(e.supports.encodings).filter((t=>!!e.supports.encodings[t]))}},875:function(e,t,n){"use strict";t.AbstractLevel=n(9071).AbstractLevel,t.AbstractSublevel=n(9071).AbstractSublevel,t.AbstractIterator=n(3961).AbstractIterator,t.AbstractKeyIterator=n(3961).AbstractKeyIterator,t.AbstractValueIterator=n(3961).AbstractValueIterator,t.AbstractChainedBatch=n(9464).AbstractChainedBatch},2970:function(e,t,n){"use strict";const{AbstractIterator:r,AbstractKeyIterator:o,AbstractValueIterator:s}=n(3961),i=Symbol("unfix"),a=Symbol("iterator"),l=Symbol("handleOne"),c=Symbol("handleMany"),u=Symbol("callback");class d extends r{constructor(e,t,n,r){super(e,t),this[a]=n,this[i]=r,this[l]=this[l].bind(this),this[c]=this[c].bind(this),this[u]=null}[l](e,t,n){const r=this[u];if(e)return r(e);void 0!==t&&(t=this[i](t)),r(e,t,n)}[c](e,t){const n=this[u];if(e)return n(e);for(const r of t){const e=r[0];void 0!==e&&(r[0]=this[i](e))}n(e,t)}}class h extends o{constructor(e,t,n,r){super(e,t),this[a]=n,this[i]=r,this[l]=this[l].bind(this),this[c]=this[c].bind(this),this[u]=null}[l](e,t){const n=this[u];if(e)return n(e);void 0!==t&&(t=this[i](t)),n(e,t)}[c](e,t){const n=this[u];if(e)return n(e);for(let r=0;r<t.length;r++){const e=t[r];void 0!==e&&(t[r]=this[i](e))}n(e,t)}}class p extends s{constructor(e,t,n){super(e,t),this[a]=n}}for(const f of[d,h])f.prototype._next=function(e){this[u]=e,this[a].next(this[l])},f.prototype._nextv=function(e,t,n){this[u]=n,this[a].nextv(e,t,this[c])},f.prototype._all=function(e,t){this[u]=t,this[a].all(e,this[c])};for(const f of[p])f.prototype._next=function(e){this[a].next(e)},f.prototype._nextv=function(e,t,n){this[a].nextv(e,t,n)},f.prototype._all=function(e,t){this[a].all(e,t)};for(const f of[d,h,p])f.prototype._seek=function(e,t){this[a].seek(e,t)},f.prototype._close=function(e){this[a].close(e)};t.AbstractSublevelIterator=d,t.AbstractSublevelKeyIterator=h,t.AbstractSublevelValueIterator=p},9650:function(e,t,n){"use strict";const r=n(4473),{Buffer:o}=n(6451)||{},{AbstractSublevelIterator:s,AbstractSublevelKeyIterator:i,AbstractSublevelValueIterator:a}=n(2970),l=Symbol("prefix"),c=Symbol("upperBound"),u=Symbol("prefixRange"),d=Symbol("parent"),h=Symbol("unfix"),p=new TextEncoder,f={separator:"!"};e.exports=function({AbstractLevel:e}){class t extends e{static defaults(e){if("string"===typeof e)throw new r("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(e&&e.open)throw new r("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==e?f:e.separator?e:{...e,separator:"!"}}constructor(e,n,o){const{separator:s,manifest:i,...a}=t.defaults(o);n=w(n,s);const u=s.charCodeAt(0)+1,f=e[d]||e;if(!p.encode(n).every((e=>e>u&&e<127)))throw new r(`Prefix must use bytes > ${u} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(g(f,i),a);const m=(e.prefix||"")+s+n+s,b=m.slice(0,-1)+String.fromCharCode(u);this[d]=f,this[l]=new y(m),this[c]=new y(b),this[h]=new v,this.nextTick=f.nextTick}prefixKey(e,t){if("utf8"===t)return this[l].utf8+e;if(0===e.byteLength)return this[l][t];if("view"===t){const t=this[l].view,n=new Uint8Array(t.byteLength+e.byteLength);return n.set(t,0),n.set(e,t.byteLength),n}{const t=this[l].buffer;return o.concat([t,e],t.byteLength+e.byteLength)}}[u](e,t){void 0!==e.gte?e.gte=this.prefixKey(e.gte,t):void 0!==e.gt?e.gt=this.prefixKey(e.gt,t):e.gte=this[l][t],void 0!==e.lte?e.lte=this.prefixKey(e.lte,t):void 0!==e.lt?e.lt=this.prefixKey(e.lt,t):e.lte=this[c][t]}get prefix(){return this[l].utf8}get db(){return this[d]}_open(e,t){this[d].open({passive:!0},t)}_put(e,t,n,r){this[d].put(e,t,n,r)}_get(e,t,n){this[d].get(e,t,n)}_getMany(e,t,n){this[d].getMany(e,t,n)}_del(e,t,n){this[d].del(e,t,n)}_batch(e,t,n){this[d].batch(e,t,n)}_clear(e,t){this[u](e,e.keyEncoding),this[d].clear(e,t)}_iterator(e){this[u](e,e.keyEncoding);const t=this[d].iterator(e),n=this[h].get(this[l].utf8.length,e.keyEncoding);return new s(this,e,t,n)}_keys(e){this[u](e,e.keyEncoding);const t=this[d].keys(e),n=this[h].get(this[l].utf8.length,e.keyEncoding);return new i(this,e,t,n)}_values(e){this[u](e,e.keyEncoding);const t=this[d].values(e);return new a(this,e,t)}}return{AbstractSublevel:t}};const g=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:m(e,"utf8"),buffer:m(e,"buffer"),view:m(e,"view")}}},m=function(e,t){return!!e.supports.encodings[t]&&e.keyEncoding(t).name===t};class y{constructor(e){this.utf8=e,this.view=p.encode(e),this.buffer=o?o.from(this.view.buffer,0,this.view.byteLength):{}}}class v{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return void 0===n&&(n="view"===t?function(e,t){return t.subarray(e)}.bind(null,e):function(e,t){return t.slice(e)}.bind(null,e),this.cache.set(t,n)),n}}const w=function(e,t){let n=0,r=e.length;while(n<r&&e[n]===t)n++;while(r>n&&e[r-1]===t)r--;return e.slice(n,r)}},2520:function(e,t){"use strict";t.getCallback=function(e,t){return"function"===typeof e?e:t},t.getOptions=function(e,t){return"object"===typeof e&&null!==e?e:void 0!==t?t:{}}},4765:function(e,t,n){"use strict";const{AbstractChainedBatch:r}=n(9464),o=n(4473),s=Symbol("encoded");class i extends r{constructor(e){super(e),this[s]=[]}_put(e,t,n){this[s].push({...n,type:"put",key:e,value:t})}_del(e,t){this[s].push({...t,type:"del",key:e})}_clear(){this[s]=[]}_write(e,t){"opening"===this.db.status?this.db.defer((()=>this._write(e,t))):"open"===this.db.status?0===this[s].length?this.nextTick(t):this.db._batch(this[s],e,t):this.nextTick(t,new o("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}t.DefaultChainedBatch=i},5429:function(e,t,n){"use strict";const{AbstractKeyIterator:r,AbstractValueIterator:o}=n(3961),s=Symbol("iterator"),i=Symbol("callback"),a=Symbol("handleOne"),l=Symbol("handleMany");class c extends r{constructor(e,t){super(e,t),this[s]=e.iterator({...t,keys:!0,values:!1}),this[a]=this[a].bind(this),this[l]=this[l].bind(this)}}class u extends o{constructor(e,t){super(e,t),this[s]=e.iterator({...t,keys:!1,values:!0}),this[a]=this[a].bind(this),this[l]=this[l].bind(this)}}for(const d of[c,u]){const e=d===c,t=e?e=>e[0]:e=>e[1];d.prototype._next=function(e){this[i]=e,this[s].next(this[a])},d.prototype[a]=function(t,n,r){const o=this[i];t?o(t):o(null,e?n:r)},d.prototype._nextv=function(e,t,n){this[i]=n,this[s].nextv(e,t,this[l])},d.prototype._all=function(e,t){this[i]=t,this[s].all(e,this[l])},d.prototype[l]=function(e,n){const r=this[i];e?r(e):r(null,n.map(t))},d.prototype._seek=function(e,t){this[s].seek(e,t)},d.prototype._close=function(e){this[s].close(e)}}t.DefaultKeyIterator=c,t.DefaultValueIterator=u},1791:function(e,t,n){"use strict";const{AbstractIterator:r,AbstractKeyIterator:o,AbstractValueIterator:s}=n(3961),i=n(4473),a=Symbol("nut"),l=Symbol("undefer"),c=Symbol("factory");class u extends r{constructor(e,t){super(e,t),this[a]=null,this[c]=()=>e.iterator(t),this.db.defer((()=>this[l]()))}}class d extends o{constructor(e,t){super(e,t),this[a]=null,this[c]=()=>e.keys(t),this.db.defer((()=>this[l]()))}}class h extends s{constructor(e,t){super(e,t),this[a]=null,this[c]=()=>e.values(t),this.db.defer((()=>this[l]()))}}for(const p of[u,d,h])p.prototype[l]=function(){"open"===this.db.status&&(this[a]=this[c]())},p.prototype._next=function(e){null!==this[a]?this[a].next(e):"opening"===this.db.status?this.db.defer((()=>this._next(e))):this.nextTick(e,new i("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},p.prototype._nextv=function(e,t,n){null!==this[a]?this[a].nextv(e,t,n):"opening"===this.db.status?this.db.defer((()=>this._nextv(e,t,n))):this.nextTick(n,new i("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},p.prototype._all=function(e,t){null!==this[a]?this[a].all(t):"opening"===this.db.status?this.db.defer((()=>this._all(e,t))):this.nextTick(t,new i("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},p.prototype._seek=function(e,t){null!==this[a]?this[a]._seek(e,t):"opening"===this.db.status&&this.db.defer((()=>this._seek(e,t)))},p.prototype._close=function(e){null!==this[a]?this[a].close(e):"opening"===this.db.status?this.db.defer((()=>this._close(e))):this.nextTick(e)};t.DeferredIterator=u,t.DeferredKeyIterator=d,t.DeferredValueIterator=h},6909:function(e,t,n){"use strict";const r=n(4375);e.exports=function(e,...t){0===t.length?r(e):r((()=>e(...t)))}},56:function(e,t,n){"use strict";const r=n(4473),o=Object.prototype.hasOwnProperty,s=new Set(["lt","lte","gt","gte"]);e.exports=function(e,t){const n={};for(const i in e)if(o.call(e,i)&&"keyEncoding"!==i&&"valueEncoding"!==i){if("start"===i||"end"===i)throw new r(`The legacy range option '${i}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===i)throw new r("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});s.has(i)?n[i]=t.encode(e[i]):n[i]=e[i]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}},6451:function(e,t,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const r=n(9742),o=n(645),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;const i=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function l(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return u(e,t,n)}function u(e,t,n){if("string"===typeof e)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ie(e,ArrayBuffer)||e&&ie(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ie(e,SharedArrayBuffer)||e&&ie(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const o=v(e);if(o)return o;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,n){return d(e),e<=0?l(e):void 0!==t?"string"===typeof n?l(e).fill(t,n):l(e).fill(t):l(e)}function p(e){return d(e),l(e<0?0:0|w(e))}function f(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|S(e,t);let r=l(n);const o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}function g(e){const t=e.length<0?0:0|w(e.length),n=l(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e){if(ie(e,Uint8Array)){const t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function v(e){if(c.isBuffer(e)){const t=0|w(e.length),n=l(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?l(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}function w(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),c.alloc(+e)}function S(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ie(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return oe(e).length;default:if(o)return r?-1:te(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return U(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function E(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,ae(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:C(e,t,n,r,o);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function C(e,t,n,r,o){let s,i=1,a=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,a/=2,l/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){let r=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*i}else-1!==r&&(s-=s-r),r=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(c(e,s+r)!==c(t,r)){n=!1;break}if(n)return s}return-1}function I(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;const s=t.length;let i;for(r>s/2&&(r=s/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(ae(r))return i;e[n+i]=r}return i}function A(e,t,n,r){return se(te(t,e.length-n),e,n,r)}function T(e,t,n,r){return se(ne(t),e,n,r)}function R(e,t,n,r){return se(oe(t),e,n,r)}function x(e,t,n,r){return se(re(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;while(o<n){const t=e[o];let s=null,i=t>239?4:t>223?3:t>191?2:1;if(o+i<=n){let n,r,a,l;switch(i){case 1:t<128&&(s=t);break;case 2:n=e[o+1],128===(192&n)&&(l=(31&t)<<6|63&n,l>127&&(s=l));break;case 3:n=e[o+1],r=e[o+2],128===(192&n)&&128===(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:n=e[o+1],r=e[o+2],a=e[o+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=i}return D(r)}t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=a(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return h(e,t,n)},c.allocUnsafe=function(e){return p(e)},c.allocUnsafeSlow=function(e){return p(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(ie(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),ie(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,s=Math.min(n,r);o<s;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(ie(t,Uint8Array))o+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},c.byteLength=S,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)E(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?N(this,0,e):_.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,o){if(ie(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;let s=o-r,i=n-t;const a=Math.min(s,i),l=this.slice(r,o),u=e.slice(t,n);for(let c=0;c<a;++c)if(l[c]!==u[c]){s=l[c],i=u[c];break}return s<i?-1:i<s?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return I(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":case"latin1":case"binary":return T(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function D(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}function U(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function L(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function B(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let s=t;s<n;++s)o+=le[e[s]];return o}function M(e,t,n){const r=e.slice(t,n);let o="";for(let s=0;s<r.length-1;s+=2)o+=String.fromCharCode(r[s]+256*r[s+1]);return o}function F(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,o,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function z(e,t,n,r,o){Z(t,r,o,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function $(e,t,n,r,o){Z(t,r,o,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function V(e,t,n,r,o,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,s){return t=+t,n>>>=0,s||V(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function K(e,t,n,r,s){return t=+t,n>>>=0,s||V(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],o=1,s=0;while(++s<t&&(o*=256))r+=this[e+s]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e+--t],o=1;while(t>0&&(o*=256))r+=this[e+--t]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],o=1,s=0;while(++s<t&&(o*=256))r+=this[e+s]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=t,o=1,s=this[e+--r];while(r>0&&(o*=256))s+=this[e+--r]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;j(this,e,t,n,r,0)}let o=1,s=0;this[t]=255&e;while(++s<n&&(o*=256))this[t+s]=e/o&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;j(this,e,t,n,r,0)}let o=n-1,s=1;this[t+o]=255&e;while(--o>=0&&(s*=256))this[t+o]=e/s&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=ce((function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=ce((function(e,t=0){return $(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let o=0,s=1,i=0;this[t]=255&e;while(++o<n&&(s*=256))e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let o=n-1,s=1,i=0;this[t+o]=255&e;while(--o>=0&&(s*=256))e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=ce((function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=ce((function(e,t=0){return $(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return K(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return K(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{const s=c.isBuffer(e)?e:c.from(e,r),i=s.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%i]}return this};const q={};function W(e,t,n){q[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function Y(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Q(t,e.length-(n+1))}function Z(e,t,n,r,o,s){if(e>n||e<t){const r="bigint"===typeof t?"n":"";let o;throw o=s>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new q.ERR_OUT_OF_RANGE("value",o,e)}G(r,o,s)}function J(e,t){if("number"!==typeof e)throw new q.ERR_INVALID_ARG_TYPE(t,"number",e)}function Q(e,t,n){if(Math.floor(e)!==e)throw J(e,n),new q.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new q.ERR_BUFFER_OUT_OF_BOUNDS;throw new q.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=Y(String(n)):"bigint"===typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=Y(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);const X=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(X,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let n;t=t||1/0;const r=e.length;let o=null;const s=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function ne(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function re(e,t){let n,r,o;const s=[];for(let i=0;i<e.length;++i){if((t-=2)<0)break;n=e.charCodeAt(i),r=n>>8,o=n%256,s.push(o),s.push(r)}return s}function oe(e){return r.toByteArray(ee(e))}function se(e,t,n,r){let o;for(o=0;o<r;++o){if(o+n>=t.length||o>=e.length)break;t[o+n]=e[o]}return o}function ie(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const le=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function ce(e){return"undefined"===typeof BigInt?ue:e}function ue(){throw new Error("BigInt not supported")}},2044:function(e){function t(e){const t=new globalThis.AbortController;function n(){t.abort();for(const t of e)t&&t.removeEventListener&&t.removeEventListener("abort",n)}for(const r of e)if(r&&r.addEventListener){if(r.aborted){n();break}r.addEventListener("abort",n)}return t.signal}e.exports=t,e.exports.anySignal=t},9742:function(e,t){"use strict";t.byteLength=c,t.toByteArray=d,t.fromByteArray=f;for(var n=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=s.length;i<a;++i)n[i]=s[i],r[s.charCodeAt(i)]=i;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function u(e,t,n){return 3*(t+n)/4-n}function d(e){var t,n,s=l(e),i=s[0],a=s[1],c=new o(u(e,i,a)),d=0,h=a>0?i-4:i;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[d++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c}function h(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function p(e,t,n){for(var r,o=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(h(r));return o.join("")}function f(e){for(var t,r=e.length,o=r%3,s=[],i=16383,a=0,l=r-o;a<l;a+=i)s.push(p(e,a,a+i>l?l:a+i));return 1===o?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},1708:function(e,t,n){"use strict";const{AbstractLevel:r}=n(875),o=n(4473),s=n(9967),{fromCallback:i}=n(6957),{Iterator:a}=n(8212),l=n(9687),c=n(9968),u=n(1217),d="level-js-",h=Symbol("idb"),p=Symbol("namePrefix"),f=Symbol("location"),g=Symbol("version"),m=Symbol("store"),y=Symbol("onComplete"),v=Symbol("promise");class w extends r{constructor(e,t,n){if("function"===typeof t||"function"===typeof n)throw new o("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:r,version:s,...i}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},i),"string"!==typeof e)throw new Error("constructor requires a location string argument");this[f]=e,this[p]=null==r?d:r,this[g]=parseInt(s||1,10),this[h]=null}get location(){return this[f]}get namePrefix(){return this[p]}get version(){return this[g]}get db(){return this[h]}get type(){return"browser-level"}_open(e,t){const n=indexedDB.open(this[p]+this[f],this[g]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[h]=n.result,t()},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this[f])||t.createObjectStore(this[f])}}[m](e){const t=this[h].transaction([this[f]],e);return t.objectStore(this[f])}[y](e,t){const n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){const r=this[m]("readonly");let s;try{s=r.get(e)}catch(i){return this.nextTick(n,i)}this[y](s,(function(e,t){return e?n(e):void 0===t?n(new o("Entry not found",{code:"LEVEL_NOT_FOUND"})):void n(null,l(t))}))}_getMany(e,t,n){const r=this[m]("readonly"),o=e.map((e=>t=>{let n;try{n=r.get(e)}catch(o){return t(o)}n.onsuccess=()=>{const e=n.result;t(null,void 0===e?e:l(e))},n.onerror=e=>{e.stopPropagation(),t(n.error)}}));s(o,16,n)}_del(e,t,n){const r=this[m]("readwrite");let o;try{o=r.delete(e)}catch(s){return this.nextTick(n,s)}this[y](o,n)}_put(e,t,n,r){const o=this[m]("readwrite");let s;try{s=o.put(t,e)}catch(i){return this.nextTick(r,i)}this[y](s,r)}_iterator(e){return new a(this,this[f],e)}_batch(e,t,n){const r=this[m]("readwrite"),o=r.transaction;let s,i=0;function a(){const t=e[i++],n=t.key;let l;try{l="del"===t.type?r.delete(n):r.put(t.value,n)}catch(c){return s=c,void o.abort()}i<e.length?l.onsuccess=a:"function"===typeof o.commit&&o.commit()}o.onabort=function(){n(s||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()},a()}_clear(e,t){let n,r;try{n=u(e)}catch(o){return this.nextTick(t)}if(e.limit>=0)return c(this,this[f],n,e,t);try{const e=this[m]("readwrite");r=n?e.delete(n):e.clear()}catch(s){return this.nextTick(t,s)}this[y](r,t)}_close(e){this[h].close(),this.nextTick(e)}}w.destroy=function(e,t,n){"function"===typeof t&&(n=t,t=d),n=i(n,v);const r=indexedDB.deleteDatabase(t+e);return r.onsuccess=function(){n()},r.onerror=function(e){n(e)},n[v]},t.BrowserLevel=w},8212:function(e,t,n){"use strict";const{AbstractIterator:r}=n(875),o=n(1217),s=n(9687),i=Symbol("cache"),a=Symbol("finished"),l=Symbol("options"),c=Symbol("currentOptions"),u=Symbol("position"),d=Symbol("location"),h=Symbol("first"),p={};class f extends r{constructor(e,t,n){super(e,n),this[i]=[],this[a]=0===this.limit,this[l]=n,this[c]={...n},this[u]=void 0,this[d]=t,this[h]=!0}_nextv(e,t,n){if(this[h]=!1,this[a])return this.nextTick(n,null,[]);if(this[i].length>0)return e=Math.min(e,this[i].length),this.nextTick(n,null,this[i].splice(0,e));let r;void 0!==this[u]&&(this[l].reverse?(this[c].lt=this[u],this[c].lte=void 0):(this[c].gt=this[u],this[c].gte=void 0));try{r=o(this[c])}catch(y){return this[a]=!0,this.nextTick(n,null,[])}const p=this.db.db.transaction([this[d]],"readonly"),f=p.objectStore(this[d]),m=[];if(this[l].reverse){const t=!this[l].values&&f.openKeyCursor?"openKeyCursor":"openCursor";f[t](r,"prev").onsuccess=t=>{const n=t.target.result;if(n){const{key:t,value:r}=n;this[u]=t,m.push([this[l].keys&&void 0!==t?s(t):void 0,this[l].values&&void 0!==r?s(r):void 0]),m.length<e?n.continue():g(p)}else this[a]=!0}}else{let t,n;const o=()=>{if(void 0===t||void 0===n)return;const r=Math.max(t.length,n.length);0===r||e===1/0?this[a]=!0:this[u]=t[r-1],m.length=r;for(let e=0;e<r;e++){const r=t[e],o=n[e];m[e]=[this[l].keys&&void 0!==r?s(r):void 0,this[l].values&&void 0!==o?s(o):void 0]}g(p)};this[l].keys||e<1/0?f.getAllKeys(r,e<1/0?e:void 0).onsuccess=e=>{t=e.target.result,o()}:(t=[],this.nextTick(o)),this[l].values?f.getAll(r,e<1/0?e:void 0).onsuccess=e=>{n=e.target.result,o()}:(n=[],this.nextTick(o))}p.onabort=()=>{n(p.error||new Error("aborted by user")),n=null},p.oncomplete=()=>{n(null,m),n=null}}_next(e){if(this[i].length>0){const[t,n]=this[i].shift();this.nextTick(e,null,t,n)}else if(this[a])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[h]&&(this[h]=!1,t=1),this._nextv(t,p,((t,n)=>{if(t)return e(t);this[i]=n,this._next(e)}))}}_all(e,t){this[h]=!1;const n=this[i].splice(0,this[i].length),r=this.limit-this.count-n.length;if(r<=0)return this.nextTick(t,null,n);this._nextv(r,p,((e,r)=>{if(e)return t(e);n.length>0&&(r=n.concat(r)),t(null,r)}))}_seek(e,t){let n;this[h]=!0,this[i]=[],this[a]=!1,this[u]=void 0,this[c]={...this[l]};try{n=o(this[l])}catch(r){return void(this[a]=!0)}null===n||n.includes(e)?this[l].reverse?this[c].lte=e:this[c].gte=e:this[a]=!0}}function g(e){"function"===typeof e.commit&&e.commit()}t.Iterator=f},9968:function(e){"use strict";e.exports=function(e,t,n,r,o){if(0===r.limit)return e.nextTick(o);const s=e.db.transaction([t],"readwrite"),i=s.objectStore(t);let a=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};const l=i.openKeyCursor?"openKeyCursor":"openCursor",c=r.reverse?"prev":"next";i[l](n,c).onsuccess=function(e){const t=e.target.result;t&&(i.delete(t.key).onsuccess=function(){(r.limit<=0||++a<r.limit)&&t.continue()})}}},9687:function(e){"use strict";const t=new TextEncoder;e.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):t.encode(e)}},1217:function(e){"use strict";e.exports=function(e){const t=void 0!==e.gte?e.gte:void 0!==e.gt?e.gt:void 0,n=void 0!==e.lte?e.lte:void 0!==e.lt?e.lt:void 0,r=void 0===e.gte,o=void 0===e.lte;return void 0!==t&&void 0!==n?IDBKeyRange.bound(t,n,r,o):void 0!==t?IDBKeyRange.lowerBound(t,r):void 0!==n?IDBKeyRange.upperBound(n,o):null}},8764:function(e,t,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r=n(9742),o=n(645),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;var i=2147483647;function a(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}function l(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return u(e,t,n)}function u(e,t,n){if("string"===typeof e)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);var o=v(e);if(o)return o;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,n){return d(e),e<=0?l(e):void 0!==t?"string"===typeof n?l(e).fill(t,n):l(e).fill(t):l(e)}function p(e){return d(e),l(e<0?0:0|w(e))}function f(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|S(e,t),r=l(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}function g(e){for(var t=e.length<0?0:0|w(e.length),n=l(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e){if(J(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function v(e){if(c.isBuffer(e)){var t=0|w(e.length),n=l(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!==typeof e.length||Q(e.length)?l(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}function w(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),c.alloc(+e)}function S(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(o)return r?-1:q(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return U(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function E(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Q(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:C(e,t,n,r,o);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function C(e,t,n,r,o){var s,i=1,a=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,a/=2,l/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*i}else-1!==u&&(s-=s-u),u=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var d=!0,h=0;h<l;h++)if(c(e,s+h)!==c(t,h)){d=!1;break}if(d)return s}return-1}function I(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var s=t.length;r>s/2&&(r=s/2);for(var i=0;i<r;++i){var a=parseInt(t.substr(2*i,2),16);if(Q(a))return i;e[n+i]=a}return i}function A(e,t,n,r){return Z(q(t,e.length-n),e,n,r)}function T(e,t,n,r){return Z(W(t),e,n,r)}function R(e,t,n,r){return Z(G(t),e,n,r)}function x(e,t,n,r){return Z(Y(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);var r=[],o=t;while(o<n){var s,i,a,l,c=e[o],u=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:s=e[o+1],128===(192&s)&&(l=(31&c)<<6|63&s,l>127&&(u=l));break;case 3:s=e[o+1],i=e[o+2],128===(192&s)&&128===(192&i)&&(l=(15&c)<<12|(63&s)<<6|63&i,l>2047&&(l<55296||l>57343)&&(u=l));break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],128===(192&s)&&128===(192&i)&&128===(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&a,l>65535&&l<1114112&&(u=l))}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=d}return D(r)}t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=a(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return h(e,t,n)},c.allocUnsafe=function(e){return p(e)},c.allocUnsafeSlow=function(e){return p(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,s=Math.min(n,r);o<s;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(J(s,Uint8Array))o+s.length>r.length?c.from(s).copy(r,o):Uint8Array.prototype.set.call(r,s,o);else{if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o)}o+=s.length}return r},c.byteLength=S,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},c.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?N(this,0,e):_.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,o){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var s=o-r,i=n-t,a=Math.min(s,i),l=this.slice(r,o),u=e.slice(t,n),d=0;d<a;++d)if(l[d]!==u[d]){s=l[d],i=u[d];break}return s<i?-1:i<s?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return I(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":case"latin1":case"binary":return T(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function D(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}function U(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function B(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",s=t;s<n;++s)o+=X[e[s]];return o}function M(e,t,n){for(var r=e.slice(t,n),o="",s=0;s<r.length-1;s+=2)o+=String.fromCharCode(r[s]+256*r[s+1]);return o}function F(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,o,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function z(e,t,n,r,o,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $(e,t,n,r,s){return t=+t,n>>>=0,s||z(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,s){return t=+t,n>>>=0,s||z(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);var r=this[e],o=1,s=0;while(++s<t&&(o*=256))r+=this[e+s]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);var r=this[e+--t],o=1;while(t>0&&(o*=256))r+=this[e+--t]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);var r=this[e],o=1,s=0;while(++s<t&&(o*=256))r+=this[e+s]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);var r=t,o=1,s=this[e+--r];while(r>0&&(o*=256))s+=this[e+--r]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;j(this,e,t,n,o,0)}var s=1,i=0;this[t]=255&e;while(++i<n&&(s*=256))this[t+i]=e/s&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;j(this,e,t,n,o,0)}var s=n-1,i=1;this[t+s]=255&e;while(--s>=0&&(i*=256))this[t+s]=e/i&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);j(this,e,t,n,o-1,-o)}var s=0,i=1,a=0;this[t]=255&e;while(++s<n&&(i*=256))e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);j(this,e,t,n,o-1,-o)}var s=n-1,i=1,a=0;this[t+s]=255&e;while(--s>=0&&(i*=256))e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,n){return $(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return $(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(s=t;s<n;++s)this[s]=e;else{var i=c.isBuffer(e)?e:c.from(e,r),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=i[s%a]}return this};var H=/[^+/0-9A-Za-z-_]/g;function K(e){if(e=e.split("=")[0],e=e.trim().replace(H,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function q(e,t){var n;t=t||1/0;for(var r=e.length,o=null,s=[],i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,r,o,s=[],i=0;i<e.length;++i){if((t-=2)<0)break;n=e.charCodeAt(i),r=n>>8,o=n%256,s.push(o),s.push(r)}return s}function G(e){return r.toByteArray(K(e))}function Z(e,t,n,r){for(var o=0;o<r;++o){if(o+n>=t.length||o>=e.length)break;t[o+n]=e[o]}return o}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!==e}var X=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()},6957:function(e,t,n){"use strict";var r=n(886);t.fromCallback=function(e,t){if(void 0===e){var n=new Promise((function(t,n){e=function(e,r){e?n(e):t(r)}}));e[void 0!==t?t:"promise"]=n}else if("function"!==typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){r((()=>t(null,e)))})).catch((function(e){r((()=>t(e)))}))}},886:function(e){e.exports="function"===typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e)},7484:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",s="minute",i="hour",a="day",l="week",c="month",u="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,c),s=n-o<0,i=t.clone().add(r+(s?-1:1),c);return+(-(r+(n-o)/(s?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:a,D:h,h:i,m:s,s:o,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",b={};b[w]=m;var S=function(e){return e instanceof C},_=function e(t,n,r){var o;if(!t)return w;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(o=s),n&&(b[s]=n,o=s);var i=t.split("-");if(!o&&i.length>1)return e(i[0])}else{var a=t.name;b[a]=t,o=a}return!r&&o&&(w=o),o||!r&&w},E=function(e,t){if(S(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new C(n)},k=v;k.l=_,k.i=S,k.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=_(e.locale,null,!0),this.parse(e)}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var o=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return k},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return E(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<E(e)},y.$g=function(e,t,n){return k.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!k.u(t)||t,u=k.p(e),p=function(e,t){var o=k.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(a)},f=function(e,t){return k.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case d:return r?p(1,0):p(31,11);case c:return r?p(1,m):p(0,m+1);case l:var w=this.$locale().weekStart||0,b=(g<w?g+7:g)-w;return p(r?y-b:y+(6-b),m);case a:case h:return f(v+"Hours",0);case i:return f(v+"Minutes",1);case s:return f(v+"Seconds",2);case o:return f(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,l=k.p(e),u="set"+(this.$u?"UTC":""),p=(n={},n[a]=u+"Date",n[h]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[i]=u+"Hours",n[s]=u+"Minutes",n[o]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],f=l===a?this.$D+(t-this.$W):t;if(l===c||l===d){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[k.p(e)]()},y.add=function(r,u){var h,p=this;r=Number(r);var f=k.p(u),g=function(e){var t=E(p);return k.w(t.date(t.date()+Math.round(e*r)),p)};if(f===c)return this.set(c,this.$M+r);if(f===d)return this.set(d,this.$y+r);if(f===a)return g(1);if(f===l)return g(7);var m=(h={},h[s]=t,h[i]=n,h[o]=e,h)[f]||1,y=this.$d.getTime()+r*m;return k.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=k.z(this),s=this.$H,i=this.$m,a=this.$M,l=n.weekdays,c=n.months,u=function(e,n,o,s){return e&&(e[n]||e(t,r))||o[n].slice(0,s)},d=function(e){return k.s(s%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:k.s(a+1,2,"0"),MMM:u(n.monthsShort,a,c,3),MMMM:u(c,a),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:k.s(s,2,"0"),h:d(1),hh:d(2),a:h(s,i,!0),A:h(s,i,!1),m:String(i),mm:k.s(i,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:o};return r.replace(g,(function(e,t){return t||f[e]||o.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,h,p){var f,g=k.p(h),m=E(r),y=(m.utcOffset()-this.utcOffset())*t,v=this-m,w=k.m(this,m);return w=(f={},f[d]=w/12,f[c]=w,f[u]=w/3,f[l]=(v-y)/6048e5,f[a]=(v-y)/864e5,f[i]=v/n,f[s]=v/t,f[o]=v/e,f)[g]||v,p?w:k.a(w)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=_(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return k.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),I=C.prototype;return E.prototype=I,[["$ms",r],["$s",o],["$m",s],["$H",i],["$W",a],["$M",c],["$y",d],["$D",h]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,C,E),e.$i=!0),E},E.locale=_,E.isDayjs=S,E.unix=function(e){return E(1e3*e)},E.en=b[w],E.Ls=b,E.p={},E}))},8734:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var o=this.$utils(),s=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return o.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return o.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return o.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(s)}}}))},285:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,s={},i=function(e){return(e=+e)+(e>68?1900:2e3)},a=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=s[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var n,r=s.meridiem;if(r){for(var o=1;o<=24;o+=1)if(e.indexOf(r(o,0,t))>-1){n=o>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[o,function(e){this.afternoon=u(e,!1)}],a:[o,function(e){this.afternoon=u(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,a("seconds")],ss:[r,a("seconds")],m:[r,a("minutes")],mm:[r,a("minutes")],H:[r,a("hours")],h:[r,a("hours")],HH:[r,a("hours")],hh:[r,a("hours")],D:[r,a("day")],DD:[n,a("day")],Do:[o,function(e){var t=s.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,a("month")],MM:[n,a("month")],MMM:[o,function(e){var t=c("months"),n=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,a("year")],YY:[n,function(e){this.year=i(e)}],YYYY:[/\d{4}/,a("year")],Z:l,ZZ:l};function h(n){var r,o;r=n,o=s&&s.formats;for(var i=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var s=r&&r.toUpperCase();return n||o[r]||e[r]||o[s].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),a=i.length,l=0;l<a;l+=1){var c=i[l],u=d[c],h=u&&u[0],p=u&&u[1];i[l]=p?{regex:h,parser:p}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<a;n+=1){var o=i[n];if("string"==typeof o)r+=o.length;else{var s=o.regex,l=o.parser,c=e.slice(r),u=s.exec(c)[0];l.call(t,u),e=e.replace(u,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(i=e.parseTwoDigitYear);var r=t.prototype,o=r.parse;r.parse=function(e){var t=e.date,r=e.utc,i=e.args;this.$u=r;var a=i[1];if("string"==typeof a){var l=!0===i[2],c=!0===i[3],u=l||c,d=i[2];c&&(d=i[2]),s=this.$locale(),!l&&d&&(s=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=h(t)(e),o=r.year,s=r.month,i=r.day,a=r.hours,l=r.minutes,c=r.seconds,u=r.milliseconds,d=r.zone,p=new Date,f=i||(o||s?1:p.getDate()),g=o||p.getFullYear(),m=0;o&&!s||(m=s>0?s-1:p.getMonth());var y=a||0,v=l||0,w=c||0,b=u||0;return d?new Date(Date.UTC(g,m,f,y,v,w,b+60*d.offset*1e3)):n?new Date(Date.UTC(g,m,f,y,v,w,b)):new Date(g,m,f,y,v,w,b)}catch(e){return new Date("")}}(t,a,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),u&&t!=this.format(a)&&(this.$d=new Date("")),s={}}else if(a instanceof Array)for(var p=a.length,f=1;f<=p;f+=1){i[1]=a[f-1];var g=n.apply(this,i);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}f===p&&(this.$d=new Date(""))}else o.call(this,e)}}}))},2997:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t,n){t.prototype.dayOfYear=function(e){var t=Math.round((n(this).startOf("day")-n(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"day")}}}))},9212:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}))},7412:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}))},6036:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t,n){var r=t.prototype,o=function(e){return e&&(e.indexOf?e:e.s)},s=function(e,t,n,r,s){var i=e.name?e:e.$locale(),a=o(i[t]),l=o(i[n]),c=a||l.map((function(e){return e.slice(0,r)}));if(!s)return c;var u=i.weekStart;return c.map((function(e,t){return c[(t+(u||0))%7]}))},i=function(){return n.Ls[n.locale()]},a=function(e,t){return e.formats[t]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}(e.formats[t.toUpperCase()])},l=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):s(e,"months")},monthsShort:function(t){return t?t.format("MMM"):s(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):s(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):s(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):s(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return a(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return l.bind(this)()},n.localeData=function(){var e=i();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(t){return a(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},n.months=function(){return s(i(),"months")},n.monthsShort=function(){return s(i(),"monthsShort","months",3)},n.weekdays=function(e){return s(i(),"weekdays",null,null,e)},n.weekdaysShort=function(e){return s(i(),"weekdaysShort","weekdays",3,e)},n.weekdaysMin=function(e){return s(i(),"weekdaysMin","weekdays",2,e)}}}))},5183:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e="week",t="year";return function(n,r,o){var s=r.prototype;s.week=function(n){if(void 0===n&&(n=null),null!==n)return this.add(7*(n-this.week()),"day");var r=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var s=o(this).startOf(t).add(1,t).date(r),i=o(this).endOf(e);if(s.isBefore(i))return 1}var a=o(this).startOf(t).date(r).startOf(e).subtract(1,"millisecond"),l=this.diff(a,e,!0);return l<0?o(this).startOf("week").week():Math.ceil(l)},s.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}))},172:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),n=this.year();return 1===t&&11===e?n+1:0===e&&t>=52?n-1:n}}}))},1227:function(e,t,n){function r(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)}function s(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}}function i(){let e;try{e=t.storage.getItem("debug")}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",BASE_URL:"/"}.DEBUG),e}function a(){try{return localStorage}catch(e){}}t.formatArgs=o,t.save=s,t.load=i,t.useColors=r,t.storage=a(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:l}=e.exports;l.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},2447:function(e,t,n){function r(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let t,n,s,i=null;function a(...e){if(!a.enabled)return;const n=a,o=Number(new Date),s=o-(t||o);n.diff=s,n.prev=t,n.curr=o,t=o,e[0]=r.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,o)=>{if("%%"===t)return"%";i++;const s=r.formatters[o];if("function"===typeof s){const r=e[i];t=s.call(n,r),e.splice(i,1),i--}return t})),r.formatArgs.call(n,e);const l=n.log||r.log;l.apply(n,e)}return a.namespace=e,a.useColors=r.useColors(),a.color=r.selectColor(e),a.extend=o,a.destroy=r.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==r.namespaces&&(n=r.namespaces,s=r.enabled(e)),s),set:e=>{i=e}}),"function"===typeof r.init&&r.init(a),a}function o(e,t){const n=r(this.namespace+("undefined"===typeof t?":":t)+e);return n.log=this.log,n}function s(e){let t;r.save(e),r.namespaces=e,r.names=[],r.skips=[];const n=("string"===typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.slice(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function i(){const e=[...r.names.map(l),...r.skips.map(l).map((e=>"-"+e))].join(",");return r.enable(""),e}function a(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function l(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function c(e){return e instanceof Error?e.stack||e.message:e}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=s,r.enabled=a,r.humanize=n(7824),r.destroy=u,Object.keys(e).forEach((t=>{r[t]=e[t]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}e.exports=r},5780:function(e){"use strict";const t=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),n=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},r=({clearTimeout:e,setTimeout:t,willResolve:r})=>(o,{value:s,signal:i}={})=>{if(i&&i.aborted)return Promise.reject(n());let a,l,c;const u=e||clearTimeout,d=()=>{u(a),c(n())},h=()=>{i&&i.removeEventListener("abort",d)},p=new Promise(((e,n)=>{l=()=>{h(),r?e(s):n(s)},c=n,a=(t||setTimeout)(l,o)}));return i&&i.addEventListener("abort",d,{once:!0}),p.clear=()=>{u(a),a=null,l()},p},o=e=>{const n=r({...e,willResolve:!0});return n.reject=r({...e,willResolve:!1}),n.range=(e,r,o)=>n(t(e,r),o),n},s=o();s.createWithTimers=o,e.exports=s,e.exports["default"]=s},5001:function(e){"use strict";function t(e,t){t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(void 0===e)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var o,s=this._list[t];if(e<n/2){for(o=e;o>0;o--)this._list[t]=this._list[t=t-1+r&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[t]=this._list[t=t+1+r&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+r&this._capacityMask}return s}}},t.prototype.remove=function(e,t){var n,r=e,o=t;if(r===(0|r)&&this._head!==this._tail){var s=this.size(),i=this._list.length;if(!(r>=s||r<-s||t<1)){if(r<0&&(r+=s),1===t||!t)return n=new Array(1),n[0]=this.removeOne(r),n;if(0===r&&r+t>=s)return n=this.toArray(),this.clear(),n;var a;for(r+t>s&&(t=s-r),n=new Array(t),a=0;a<t;a++)n[a]=this._list[this._head+r+a&this._capacityMask];if(r=this._head+r&this._capacityMask,e+t===s){for(this._tail=this._tail-t+i&this._capacityMask,a=t;a>0;a--)this._list[r=r+1+i&this._capacityMask]=void 0;return n}if(0===e){for(this._head=this._head+t+i&this._capacityMask,a=t-1;a>0;a--)this._list[r=r+1+i&this._capacityMask]=void 0;return n}if(r<s/2){for(this._head=this._head+e+t+i&this._capacityMask,a=e;a>0;a--)this.unshift(this._list[r=r-1+i&this._capacityMask]);r=this._head-1+i&this._capacityMask;while(o>0)this._list[r=r-1+i&this._capacityMask]=void 0,o--;e<0&&(this._tail=r)}else{for(this._tail=r,r=r+t+i&this._capacityMask,a=s-(t+e);a>0;a--)this.push(this._list[r++]);r=this._tail;while(o>0)this._list[r=r+1+i&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=i>>>2&&this._shrinkArray(),n}}},t.prototype.splice=function(e,t){var n=e;if(n===(0|n)){var r=this.size();if(n<0&&(n+=r),!(n>r)){if(arguments.length>2){var o,s,i,a=arguments.length,l=this._list.length,c=2;if(!r||n<r/2){for(s=new Array(n),o=0;o<n;o++)s[o]=this._list[this._head+o&this._capacityMask];0===t?(i=[],n>0&&(this._head=this._head+n+l&this._capacityMask)):(i=this.remove(n,t),this._head=this._head+n+l&this._capacityMask);while(a>c)this.unshift(arguments[--a]);for(o=n;o>0;o--)this.unshift(s[o-1])}else{s=new Array(r-(n+t));var u=s.length;for(o=0;o<u;o++)s[o]=this._list[this._head+n+t+o&this._capacityMask];0===t?(i=[],n!=r&&(this._tail=this._head+n+l&this._capacityMask)):(i=this.remove(n,t),this._tail=this._tail-u+l&this._capacityMask);while(c<a)this.push(arguments[c++]);for(o=0;o<u;o++)this.push(s[o])}return i}return this.remove(n,t)}}},t.prototype.clear=function(){this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},t.prototype._copyArray=function(e){var t,n=[],r=this._list,o=r.length;if(e||this._head>this._tail){for(t=this._head;t<o;t++)n.push(r[t]);for(t=0;t<this._tail;t++)n.push(r[t])}else for(t=this._head;t<this._tail;t++)n.push(r[t]);return n},t.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=t},6905:function(e){!function(t,n){e.exports=function(e,t,n,r,o){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:o;return e===o?n:e}}()},2114:function(e){"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}function n(e,n,r){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(o){r.message=e.message,r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));const s=t(new n,r);return s}}e.exports=n},5573:function(e){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var t=/["'&<>]/;function n(e){var n,r=""+e,o=t.exec(r);if(!o)return r;var s="",i=0,a=0;for(i=o.index;i<r.length;i++){switch(r.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}a!==i&&(s+=r.substring(a,i)),a=i+1,s+=n}return a!==i?s+r.substring(a,i):s}e.exports=n},507:function(e,t,n){"use strict";const r=n(8231);function o(e,t,n){return new r.EventIterator((({push:n})=>(this.addEventListener(e,n,t),()=>this.removeEventListener(e,n,t))),n)}t.zN=r.EventIterator,r.EventIterator},8231:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const t={value:e,done:!1};if(this.pullQueue.length){const e=this.pullQueue.shift();e&&e.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{const t=Promise.reject(e);t.catch((()=>{})),this.pushQueue.push(t)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:e=>{const t=this.pushQueue.shift();return t?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((e,t)=>{this.pullQueue.push({resolve:e,reject:t})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class r{constructor(e,{highWaterMark:t=100,lowWaterMark:r=1}={}){const o=new n;o.highWaterMark=t,o.lowWaterMark=r,o.removeCallback=e({push:e=>o.push(e),stop:()=>o.stop(),fail:e=>o.fail(e),on:(e,t)=>{o.eventHandlers[e]=t}})||(()=>{}),this[Symbol.asyncIterator]=()=>o[Symbol.asyncIterator](),Object.freeze(this)}}t.EventIterator=r,t["default"]=r},6729:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,i){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,s||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,s,i){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,s),!0;case 6:return u.fn.call(u.context,t,r,o,s,i),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,o);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||i(this,s);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||o&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},7187:function(e){"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function o(e){console&&console.warn&&console.warn(e)}t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}e.exports=i,e.exports.once=v,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var s,i,a;if(l(n),i=e._events,void 0===i?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"===typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),s=c(e),s>0&&a.length>s&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,o(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(r);return o.listener=n,r.wrapFn=o,o}function p(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"===typeof o?n?[o.listener||o]:[o]:n?y(o):g(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function v(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,s),r(n)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}b(e,t,s,{once:!0}),"error"!==t&&w(e,o,{once:!0})}))}function w(e,t,n){"function"===typeof e.on&&b(e,"error",t,n)}function b(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(s){r.once&&e.removeEventListener(t,o),n(s)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,s=this._events;if(void 0!==s)o=o&&void 0===s.error;else if(!o)return!1;if(o){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var l=s[e];if(void 0===l)return!1;if("function"===typeof l)r(l,this,t);else{var c=l.length,u=g(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,s,i;if(l(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){i=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():m(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,s=Object.keys(n);for(r=0;r<s.length;++r)o=s[r],"removeListener"!==o&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3975:function(e){e.exports=class{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},1607:function(e,t,n){const r=n(3975);e.exports=class{constructor(e){this.hwm=e||16,this.head=new r(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const t=this.head;this.head=t.next=new r(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(void 0===e&&this.tail.next){const e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},6132:function(e,t){"use strict";function n(e,t=n.BASE){const r=e.length;for(let n=0;n<r;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),n.BASE=2166136261,t["default"]=n,e.exports=n},248:function(e){e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,n=Object.create(null),r=Object.create(null);function o(o,s){n[o]=s,t++,t>=e&&(t=0,r=n,n=Object.create(null))}return{has:function(e){return void 0!==n[e]||void 0!==r[e]},remove:function(e){void 0!==n[e]&&(n[e]=void 0),void 0!==r[e]&&(r[e]=void 0)},get:function(e){var t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(o(e,t),t):void 0},set:function(e,t){void 0!==n[e]?n[e]=t:o(e,t)},clear:function(){n=Object.create(null),r=Object.create(null)}}}},645:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,o){var s,i,a=8*o-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?o-1:0,h=n?-1:1,p=e[t+d];for(d+=h,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=h,u-=8);for(i=s&(1<<-u)-1,s>>=-u,u+=r;u>0;i=256*i+e[t+d],d+=h,u-=8);if(0===s)s=1-c;else{if(s===l)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,r),s-=c}return(p?-1:1)*i*Math.pow(2,s-r)},t.write=function(e,t,n,r,o,s){var i,a,l,c=8*s-o-1,u=(1<<c)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),t+=i+d>=1?h/l:h*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=u?(a=0,i=u):i+d>=1?(a=(t*l-1)*Math.pow(2,o),i+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+p]=255&a,p+=f,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[n+p]=255&i,p+=f,i/=256,c-=8);e[n+p-f]|=128*g}},6512:function(e){(function(t){"use strict";const n="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${n}\\.${n}\\.${n}\\.${n}$`,"i"),threeOctet:new RegExp(`^${n}\\.${n}\\.${n}$`,"i"),twoOctet:new RegExp(`^${n}\\.${n}$`,"i"),longValue:new RegExp(`^${n}$`,"i")},o=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),i="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",l={zoneIndex:new RegExp(i,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${i})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${n}\\.${n}\\.${n}\\.${n}(${i})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${n}\\.${n}\\.${n}\\.${n}(${i})?$`,"i")};function c(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;let n,r,o=0,s=-1,i=(e.match(l.zoneIndex)||[])[0];i&&(i=i.substring(1),e=e.replace(/%.+$/,""));while((s=e.indexOf(":",s+1))>=0)o++;if("::"===e.substr(0,2)&&o--,"::"===e.substr(-2,2)&&o--,o>t)return null;r=t-o,n=":";while(r--)n+="0:";return e=e.replace("::",n),":"===e[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),t=function(){const t=e.split(":"),n=[];for(let e=0;e<t.length;e++)n.push(parseInt(t[e],16));return n}(),{parts:t,zoneId:i}}function u(e,t,n,r){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let o,s=0;while(r>0){if(o=n-r,o<0&&(o=0),e[s]>>o!==t[s]>>o)return!1;r-=n,s+=1}return!0}function d(e){if(s.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(o.test(e))return parseInt(e,8);throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function h(e,t){while(e.length<t)e=`0${e}`;return e}const p={};p.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");let t,n;for(t=0;t<e.length;t++)if(n=e[t],!(0<=n&&n<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){let n;if(void 0===t&&(n=e,e=n[0],t=n[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const n={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let r,o,s;for(r=3;r>=0;r-=1){if(o=this.octets[r],!(o in n))return null;if(s=n[o],t&&0!==s)return null;8!==s&&(t=!0),e+=s}return 32-e},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),p.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),n=t[0].toByteArray(),r=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),o=[];let s=0;while(s<4)o.push(parseInt(n[s],10)|255^parseInt(r[s],10)),s++;return new this(o)}catch(t){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(e){return null!==this.parser(e)},p.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(t){return!1}},p.IPv4.isValidFourPartDecimal=function(e){return!(!p.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(e){let t,n,r,o,s;try{t=this.parseCIDR(e),r=t[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),o=[],n=0;while(n<4)o.push(parseInt(r[n],10)&parseInt(s[n],10)),n++;return new this(o)}catch(i){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(e){const t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},p.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const n=[this.parse(t[1]),e];return Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(e){let t,n,o;if(t=e.match(r.fourOctet))return function(){const e=t.slice(1,6),r=[];for(let t=0;t<e.length;t++)n=e[t],r.push(d(n));return r}();if(t=e.match(r.longValue)){if(o=d(t[1]),o>4294967295||o<0)throw new Error("ipaddr: address outside defined range");return function(){const e=[];let t;for(t=0;t<=24;t+=8)e.push(o>>t&255);return e}().reverse()}return(t=e.match(r.twoOctet))?function(){const e=t.slice(1,4),n=[];if(o=d(e[1]),o>16777215||o<0)throw new Error("ipaddr: address outside defined range");return n.push(d(e[0])),n.push(o>>16&255),n.push(o>>8&255),n.push(255&o),n}():(t=e.match(r.threeOctet))?function(){const e=t.slice(1,5),n=[];if(o=d(e[2]),o>65535||o<0)throw new Error("ipaddr: address outside defined range");return n.push(d(e[0])),n.push(d(e[1])),n.push(o>>8&255),n.push(255&o),n}():null},p.IPv4.subnetMaskFromPrefixLength=function(e){if(e=parseInt(e),e<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");const t=[0,0,0,0];let n=0;const r=Math.floor(e/8);while(n<r)t[n]=255,n++;return r<4&&(t[r]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},p.IPv6=function(){function e(e,t){let n,r;if(16===e.length)for(this.parts=[],n=0;n<=14;n+=2)this.parts.push(e[n]<<8|e[n+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(n=0;n<this.parts.length;n++)if(r=this.parts[n],!(0<=r&&r<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){let n;if(void 0===t&&(n=e,e=n[0],t=n[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const n={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let r,o;for(let s=7;s>=0;s-=1){if(r=this.parts[s],!(r in n))return null;if(o=n[r],t&&0!==o)return null;16!==o&&(t=!0),e+=o}return 128-e},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){let e;const t=[],n=this.parts;for(let r=0;r<n.length;r++)e=n[r],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(h(this.parts[t].toString(16),4));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const e=this.parts.slice(-2),t=e[0],n=e[1];return new p.IPv4([t>>8,255&t,n>>8,255&n])},e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g,t=this.toNormalizedString();let n,r=0,o=-1;while(n=e.exec(t))n[0].length>o&&(r=n.index,o=n[0].length);return o<0?t:`${t.substring(0,r)}::${t.substring(r+o)}`},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),p.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),n=t[0].toByteArray(),r=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),o=[];let s=0;while(s<16)o.push(parseInt(n[s],10)|255^parseInt(r[s],10)),s++;return new this(o)}catch(t){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${t})`)}},p.IPv6.isIPv6=function(e){return null!==this.parser(e)},p.IPv6.isValid=function(e){if("string"===typeof e&&-1===e.indexOf(":"))return!1;try{const t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(t){return!1}},p.IPv6.networkAddressFromCIDR=function(e){let t,n,r,o,s;try{t=this.parseCIDR(e),r=t[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),o=[],n=0;while(n<16)o.push(parseInt(r[n],10)&parseInt(s[n],10)),n++;return new this(o)}catch(i){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${i})`)}},p.IPv6.parse=function(e){const t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},p.IPv6.parseCIDR=function(e){let t,n,r;if((n=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(n[2]),t>=0&&t<=128))return r=[this.parse(n[1]),t],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(e){let t,n,r,o,s,i;if(r=e.match(l.deprecatedTransitional))return this.parser(`::ffff:${r[1]}`);if(l.native.test(e))return c(e,8);if((r=e.match(l.transitional))&&(i=r[6]||"",t=c(r[1].slice(0,-1)+i,6),t.parts)){for(s=[parseInt(r[2]),parseInt(r[3]),parseInt(r[4]),parseInt(r[5])],n=0;n<s.length;n++)if(o=s[n],!(0<=o&&o<=255))return null;return t.parts.push(s[0]<<8|s[1]),t.parts.push(s[2]<<8|s[3]),{parts:t.parts,zoneId:t.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(e){if(e=parseInt(e),e<0||e>128)throw new Error("ipaddr: invalid IPv6 prefix length");const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let n=0;const r=Math.floor(e/8);while(n<r)t[n]=255,n++;return r<16&&(t[r]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},p.fromByteArray=function(e){const t=e.length;if(4===t)return new p.IPv4(e);if(16===t)return new p.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(e){return p.IPv6.isValid(e)||p.IPv4.isValid(e)},p.parse=function(e){if(p.IPv6.isValid(e))return p.IPv6.parse(e);if(p.IPv4.isValid(e))return p.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(e){try{return p.IPv6.parseCIDR(e)}catch(t){try{return p.IPv4.parseCIDR(e)}catch(n){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(e){const t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},p.subnetMatch=function(e,t,n){let r,o,s,i;for(o in void 0!==n&&null!==n||(n="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,o))for(s=t[o],!s[0]||s[0]instanceof Array||(s=[s]),r=0;r<s.length;r++)if(i=s[r],e.kind()===i[0].kind()&&e.match.apply(e,i))return o;return n},e.exports?e.exports=p:t.ipaddr=p})(this)},4137:function(e){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=s,e.exports.format=i,e.exports.parse=a;var t=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,t){return"string"===typeof e?a(e):"number"===typeof e?i(e,t):null}function i(e,o){if(!Number.isFinite(e))return null;var s=Math.abs(e),i=o&&o.thousandsSeparator||"",a=o&&o.unitSeparator||"",l=o&&void 0!==o.decimalPlaces?o.decimalPlaces:2,c=Boolean(o&&o.fixedDecimals),u=o&&o.unit||"";u&&r[u.toLowerCase()]||(u=s>=r.pb?"PB":s>=r.tb?"TB":s>=r.gb?"GB":s>=r.mb?"MB":s>=r.kb?"KB":"B");var d=e/r[u.toLowerCase()],h=d.toFixed(l);return c||(h=h.replace(n,"$1")),i&&(h=h.split(".").map((function(e,n){return 0===n?e.replace(t,i):e})).join(".")),h+a+u}function a(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,n=o.exec(e),s="b";return n?(t=parseFloat(n[1]),s=n[4].toLowerCase()):(t=parseInt(e,10),s="b"),isNaN(t)?null:Math.floor(r[s]*t)}},4449:function(e){"use strict";async function*t(e,t={}){const n=e.getReader();try{while(1){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&n.cancel(),n.releaseLock()}}e.exports=t},6851:function(e){"use strict";const t=async e=>{const t=[];for await(const n of e)t.push(n);return t};e.exports=t},2413:function(e,t,n){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:n(3300)["default"],Headers:n(3300).Headers,Request:n(3300).Request,Response:n(3300).Response}},106:function(e,t,n){"use strict";const r=n(9134),o="object"===typeof window&&"object"===typeof document&&9===document.nodeType,s=r(),i=o&&!s,a=s&&!o,l=s&&o,c="undefined"!==typeof process&&"undefined"!==typeof process.release&&"node"===process.release.name&&!s,u="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,d="undefined"!==typeof process&&!1,h="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:d,isElectron:s,isElectronMain:a,isElectronRenderer:l,isNode:c,isBrowser:i,isWebWorker:u,isEnvWithDom:o,isReactNative:h}},8688:function(e,t,n){"use strict";e.exports=n(2413)},749:function(e,t,n){"use strict";const r=n(7137),o=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:s(e,t)});async function*s(e,t){const n=new r,o=await n.get(e,t);yield*o.iterator()}e.exports=o},7137:function(e,t,n){"use strict";const{fetch:r,Request:o,Headers:s}=n(730),{TimeoutError:i,HTTPError:a}=n(4171),l=n(942).bind({ignoreUndefined:!0}),{URL:c,URLSearchParams:u}=n(7745),d=n(2044),h=n(4449),{isBrowser:p,isWebWorker:f}=n(106),g=n(6851),m=(e,t,n)=>{if(void 0===t)return e;const r=Date.now(),o=()=>{const e=Date.now()-r;return e>=t};return new Promise(((r,s)=>{const a=setTimeout((()=>{o()&&(s(new i),n.abort())}),t),l=e=>{const t=t=>{clearTimeout(a),o()?s(new i):e(t)};return t};e.then(l(r),l(s))}))},y={throwHttpErrors:!0,credentials:"same-origin"};class v{constructor(e={}){this.opts=l(y,e)}async fetch(e,t={}){const n=l(this.opts,t),i=new s(n.headers);if("string"!==typeof e&&!(e instanceof c||e instanceof o))throw new TypeError("`resource` must be a string, URL, or Request");const y=new c(e.toString(),n.base),{searchParams:v,transformSearchParams:S,json:_}=n;v&&(y.search="function"===typeof S?S(new u(n.searchParams)):new u(n.searchParams)),_&&(n.body=JSON.stringify(n.json),i.set("content-type","application/json"));const E=new AbortController,k=d([E.signal,n.signal]);null!=globalThis.ReadableStream&&n.body instanceof globalThis.ReadableStream&&(p||f)&&(n.body=new Blob(await g(h(n.body))));const C=await m(r(y.toString(),{...n,signal:k,timeout:void 0,headers:i,duplex:"half"}),n.timeout,E);if(!C.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(C),new a(C);return C.iterator=async function*(){yield*b(C.body)},C.ndjson=async function*(){for await(const e of w(C.iterator()))t.transform?yield t.transform(e):yield e},C}post(e,t={}){return this.fetch(e,{...t,method:"POST"})}get(e,t={}){return this.fetch(e,{...t,method:"GET"})}put(e,t={}){return this.fetch(e,{...t,method:"PUT"})}delete(e,t={}){return this.fetch(e,{...t,method:"DELETE"})}options(e,t={}){return this.fetch(e,{...t,method:"OPTIONS"})}}const w=async function*(e){const t=new TextDecoder;let n="";for await(const r of e){n+=t.decode(r,{stream:!0});const e=n.split(/\r?\n/);for(let t=0;t<e.length-1;t++){const n=e[t].trim();n.length>0&&(yield JSON.parse(n))}n=e[e.length-1]}n+=t.decode(),n=n.trim(),0!==n.length&&(yield JSON.parse(n))},b=e=>{if(S(e))return e;if(E(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(n){return e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:n})}}}}}if(_(e)){const t=e.getReader();return async function*(){try{while(1){const{done:e,value:n}=await t.read();if(e)return;n&&(yield n)}}finally{t.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},S=e=>"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator],_=e=>e&&"function"===typeof e.getReader,E=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");v.HTTPError=a,v.TimeoutError=i,v.streamToAsyncIterator=b,v.post=(e,t)=>new v(t).post(e,t),v.get=(e,t)=>new v(t).get(e,t),v.put=(e,t)=>new v(t).put(e,t),v.delete=(e,t)=>new v(t).delete(e,t),v.options=(e,t)=>new v(t).options(e,t),e.exports=v},4171:function(e,t){"use strict";class n extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}}t.TimeoutError=n;class r extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}}t.AbortError=r;class o extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}t.HTTPError=o},730:function(e,t,n){"use strict";const{TimeoutError:r,AbortError:o}=n(4171),{Response:s,Request:i,Headers:a,default:l}=n(8688),c=(e,t={})=>{const n=new XMLHttpRequest;n.open(t.method||"GET",e.toString(),!0);const{timeout:i,headers:l}=t;if(i&&i>0&&i<1/0&&(n.timeout=i),null!=t.overrideMimeType&&n.overrideMimeType(t.overrideMimeType),l)for(const[r,o]of new a(l))n.setRequestHeader(r,o);return t.signal&&(t.signal.onabort=()=>n.abort()),t.onUploadProgress&&(n.upload.onprogress=t.onUploadProgress),n.responseType="arraybuffer",new Promise(((e,i)=>{const a=t=>{switch(t.type){case"error":e(s.error());break;case"load":e(new p(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:h(n.getAllResponseHeaders())}));break;case"timeout":i(new r);break;case"abort":i(new o);break;default:break}};n.onerror=a,n.onload=a,n.ontimeout=a,n.onabort=a,n.send(t.body)}))},u=l,d=(e,t={})=>null!=t.onUploadProgress?c(e,t):u(e,t),h=e=>{const t=new a;for(const n of e.trim().split(/[\r\n]+/)){const e=n.indexOf(": ");e>0&&t.set(n.slice(0,e),n.slice(e+1))}return t};class p extends s{constructor(e,t,n){super(t,n),Object.defineProperty(this,"url",{value:e})}}e.exports={fetch:d,Request:i,Headers:a}},2734:function(e){"use strict";var t=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,n){if(null==n&&(n=!1),e.length<2)return!1;if(e.length>255)return!1;var r=e[e.length-1];if(n){if("."!==r)return!1}else if("."===r)return!1;return t.test(e)}},9134:function(e){function t(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}e.exports=t},1993:function(e){"use strict";e.exports={E2BIG:7,EACCES:13,EADDRINUSE:100,EADDRNOTAVAIL:101,EAFNOSUPPORT:102,EAGAIN:11,EALREADY:103,EBADF:9,EBADMSG:104,EBUSY:16,ECANCELED:105,ECHILD:10,ECONNABORTED:106,ECONNREFUSED:107,ECONNRESET:108,EDEADLK:36,EDESTADDRREQ:109,EDOM:33,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:110,EIDRM:111,EILSEQ:42,EINPROGRESS:112,EINTR:4,EINVAL:22,EIO:5,EISCONN:113,EISDIR:21,ELOOP:114,EMFILE:24,EMLINK:31,EMSGSIZE:115,ENAMETOOLONG:38,ENETDOWN:116,ENETRESET:117,ENETUNREACH:118,ENFILE:23,ENOBUFS:119,ENODATA:120,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:39,ENOLINK:121,ENOMEM:12,ENOMSG:122,ENOPROTOOPT:123,ENOSPC:28,ENOSR:124,ENOSTR:125,ENOSYS:40,ENOTCONN:126,ENOTDIR:20,ENOTEMPTY:41,ENOTSOCK:128,ENOTSUP:129,ENOTTY:25,ENXIO:6,EOPNOTSUPP:130,EOVERFLOW:132,EPERM:1,EPIPE:32,EPROTO:134,EPROTONOSUPPORT:135,EPROTOTYPE:136,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ETIME:137,ETIMEDOUT:138,ETXTBSY:139,EWOULDBLOCK:140,EXDEV:18,WSAEINTR:10004,WSAEBADF:10009,WSAEACCES:10013,WSAEFAULT:10014,WSAEINVAL:10022,WSAEMFILE:10024,WSAEWOULDBLOCK:10035,WSAEINPROGRESS:10036,WSAEALREADY:10037,WSAENOTSOCK:10038,WSAEDESTADDRREQ:10039,WSAEMSGSIZE:10040,WSAEPROTOTYPE:10041,WSAENOPROTOOPT:10042,WSAEPROTONOSUPPORT:10043,WSAESOCKTNOSUPPORT:10044,WSAEOPNOTSUPP:10045,WSAEPFNOSUPPORT:10046,WSAEAFNOSUPPORT:10047,WSAEADDRINUSE:10048,WSAEADDRNOTAVAIL:10049,WSAENETDOWN:10050,WSAENETUNREACH:10051,WSAENETRESET:10052,WSAECONNABORTED:10053,WSAECONNRESET:10054,WSAENOBUFS:10055,WSAEISCONN:10056,WSAENOTCONN:10057,WSAESHUTDOWN:10058,WSAETOOMANYREFS:10059,WSAETIMEDOUT:10060,WSAECONNREFUSED:10061,WSAELOOP:10062,WSAENAMETOOLONG:10063,WSAEHOSTDOWN:10064,WSAEHOSTUNREACH:10065,WSAENOTEMPTY:10066,WSAEPROCLIM:10067,WSAEUSERS:10068,WSAEDQUOT:10069,WSAESTALE:10070,WSAEREMOTE:10071,WSASYSNOTREADY:10091,WSAVERNOTSUPPORTED:10092,WSANOTINITIALISED:10093,WSAEDISCON:10101,WSAENOMORE:10102,WSAECANCELLED:10103,WSAEINVALIDPROCTABLE:10104,WSAEINVALIDPROVIDER:10105,WSAEPROVIDERFAILEDINIT:10106,WSASYSCALLFAILURE:10107,WSASERVICE_NOT_FOUND:10108,WSATYPE_NOT_FOUND:10109,WSA_E_NO_MORE:10110,WSA_E_CANCELLED:10111,WSAEREFUSED:10112,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGILL:4,SIGABRT:22,SIGFPE:8,SIGKILL:9,SIGSEGV:11,SIGTERM:15,SIGBREAK:21,SIGWINCH:28,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFLNK:40960,O_CREAT:256,O_EXCL:1024,UV_FS_O_FILEMAP:536870912,O_TRUNC:512,O_APPEND:8,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488351,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},1914:function(e){"use strict";const t=65536;function n(e){const n=new Uint8Array(e);let r=0;if(e>0)if(e>t)while(r<e)r+t>e?(crypto.getRandomValues(n.subarray(r,r+(e-r))),r+=e-r):(crypto.getRandomValues(n.subarray(r,r+t)),r+=t);else crypto.getRandomValues(n);return n}e.exports=n},7745:function(e,t,n){"use strict";const{URLWithLegacySupport:r,format:o,URLSearchParams:s,defaultBase:i}=n(2049),a=n(1530);e.exports={URL:r,URLSearchParams:s,format:o,relative:a,defaultBase:i}},1530:function(e,t,n){"use strict";const{URLWithLegacySupport:r,format:o}=n(2049);e.exports=(e,t={},n={},s)=>{let i,a=t.protocol?t.protocol.replace(":",""):"http";a=(n[a]||s||a)+":";try{i=new r(e)}catch(c){i={}}const l=Object.assign({},t,{protocol:a||i.protocol,host:t.host||i.host});return new r(e,o(l)).toString()}},2049:function(e){"use strict";const t="undefined"!==typeof navigator&&"ReactNative"===navigator.product;function n(){return t?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const r=self.URL,o=n();class s{constructor(e="",t=o){this.super=new r(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return r.createObjectURL(e)}static revokeObjectURL(e){r.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function i(e){if("string"===typeof e){const t=new r(e);return t.toString()}if(!(e instanceof r)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",n=e.auth?e.auth+"@":"",r=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),l=e.hash||"",c=e.pathname||"",u=e.path||c+a;return`${o}${t||n}${s||i+r}${u}${l}`}}e.exports={URLWithLegacySupport:s,URLSearchParams:self.URLSearchParams,defaultBase:o,format:i}},9507:function(e,t,n){"use strict";const r=n(1798),{EventEmitter:o}=n(7187);function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;++n)if(e[n]!==t[n])return!1;return!0}function i(){return{contacts:[],dontSplit:!1,left:null,right:null}}function a(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class l extends o{constructor(e={}){super(),this.localNodeId=e.localNodeId||r(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||l.distance,this.arbiter=e.arbiter||l.arbiter,this.metadata=Object.assign({},e.metadata),a("option.localNodeId as parameter 1",this.localNodeId),this.root=i()}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let n=0,r=0;const o=Math.min(e.length,t.length),s=Math.max(e.length,t.length);for(;r<o;++r)n=256*n+(e[r]^t[r]);for(;r<s;++r)n=256*n+255;return n}add(e){a("contact.id",(e||{}).id);let t=0,n=this.root;while(null===n.contacts)n=this._determineNode(n,e.id,t++);const r=this._indexOf(n,e.id);return r>=0?(this._update(n,r,e),this):n.contacts.length<this.numberOfNodesPerKBucket?(n.contacts.push(e),this.emit("added",e),this):n.dontSplit?(this.emit("ping",n.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(n,t),this.add(e))}closest(e,t=1/0){if(a("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let n=[];for(let r=[this.root],o=0;r.length>0&&n.length<t;){const t=r.pop();if(null===t.contacts){const n=this._determineNode(t,e,o++);r.push(t.left===n?t.right:t.left),r.push(n)}else n=n.concat(t.contacts)}return n.map((t=>[this.distance(t.id,e),t])).sort(((e,t)=>e[0]-t[0])).slice(0,t).map((e=>e[1]))}count(){let e=0;for(const t=[this.root];t.length>0;){const n=t.pop();null===n.contacts?t.push(n.right,n.left):e+=n.contacts.length}return e}_determineNode(e,t,n){const r=n>>3,o=n%8;if(t.length<=r&&0!==o)return e.left;const s=t[r];return s&1<<7-o?e.right:e.left}get(e){a("id",e);let t=0,n=this.root;while(null===n.contacts)n=this._determineNode(n,e,t++);const r=this._indexOf(n,e);return r>=0?n.contacts[r]:null}_indexOf(e,t){for(let n=0;n<e.contacts.length;++n)if(s(e.contacts[n].id,t))return n;return-1}remove(e){a("the id as parameter 1",e);let t=0,n=this.root;while(null===n.contacts)n=this._determineNode(n,e,t++);const r=this._indexOf(n,e);if(r>=0){const e=n.contacts.splice(r,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left=i(),e.right=i();for(const o of e.contacts)this._determineNode(e,o.id,t).contacts.push(o);e.contacts=null;const n=this._determineNode(e,this.localNodeId,t),r=e.left===n?e.right:e.left;r.dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const n=t.pop();null===n.contacts?t.push(n.right,n.left):e=e.concat(n.contacts)}return e}*toIterable(){for(const e=[this.root];e.length>0;){const t=e.pop();null===t.contacts?e.push(t.right,t.left):yield*t.contacts}}_update(e,t,n){if(!s(e.contacts[t].id,n.id))throw new Error("wrong index for _update");const r=e.contacts[t],o=this.arbiter(r,n);o===r&&r!==n||(e.contacts.splice(t,1),e.contacts.push(o),this.emit("updated",r,o))}}e.exports=l},1675:function(e,t){"use strict";t.supports=function(...e){const t=e.reduce(((e,t)=>Object.assign(e,t)),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}},8499:function(e,t,n){"use strict";const r=n(4473),o=n(8002),{Encoding:s}=n(8266),{BufferFormat:i,ViewFormat:a,UTF8Format:l}=n(2376),c=Symbol("formats"),u=Symbol("encodings"),d=new Set(["buffer","view","utf8"]);class h{constructor(e){if(!Array.isArray(e))throw new TypeError("The first argument 'formats' must be an array");if(!e.every((e=>d.has(e))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[u]=new Map,this[c]=new Set(e);for(const n in o)try{this.encoding(n)}catch(t){if("LEVEL_ENCODING_NOT_SUPPORTED"!==t.code)throw t}}encodings(){return Array.from(new Set(this[u].values()))}encoding(e){let t=this[u].get(e);if(void 0===t){if("string"===typeof e&&""!==e){if(t=m[e],!t)throw new r(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!==typeof e||null===e)throw new TypeError("First argument 'encoding' must be a string or object");t=p(e)}const{name:n,format:o}=t;if(!this[c].has(o))if(this[c].has("view"))t=t.createViewTranscoder();else if(this[c].has("buffer"))t=t.createBufferTranscoder();else{if(!this[c].has("utf8"))throw new r(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});t=t.createUTF8Transcoder()}for(const r of[e,n,t.name,t.commonName])this[u].set(r,t)}return t}}function p(e){if(e instanceof s)return e;const t="type"in e&&"string"===typeof e.type?e.type:void 0,n=e.name||t||"anonymous-"+y++;switch(f(e)){case"view":return new a({...e,name:n});case"utf8":return new l({...e,name:n});case"buffer":return new i({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function f(e){return"format"in e&&void 0!==e.format?e.format:"buffer"in e&&"boolean"===typeof e.buffer?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}t.Transcoder=h;const g={binary:o.buffer,"utf-8":o.utf8},m={...o,...g};let y=0},8266:function(e,t,n){"use strict";const r=n(4473),o=new Set(["buffer","view","utf8"]);class s{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,"function"!==typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!==typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!==typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!==typeof this.format||!o.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new r(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new r(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new r(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}t.Encoding=s},8002:function(e,t,n){"use strict";const{Buffer:r}=n(5275)||{Buffer:{isBuffer:()=>!1}},{textEncoder:o,textDecoder:s}=n(5850)(),{BufferFormat:i,ViewFormat:a,UTF8Format:l}=n(2376),c=e=>e;t.utf8=new l({encode:function(e){return r.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?s.decode(e):String(e)},decode:c,name:"utf8",createViewTranscoder(){return new a({encode:function(e){return ArrayBuffer.isView(e)?e:o.encode(e)},decode:function(e){return s.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new i({encode:function(e){return r.isBuffer(e)?e:ArrayBuffer.isView(e)?r.from(e.buffer,e.byteOffset,e.byteLength):r.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}}),t.json=new l({encode:JSON.stringify,decode:JSON.parse,name:"json"}),t.buffer=new i({encode:function(e){return r.isBuffer(e)?e:ArrayBuffer.isView(e)?r.from(e.buffer,e.byteOffset,e.byteLength):r.from(String(e),"utf8")},decode:c,name:"buffer",createViewTranscoder(){return new a({encode:function(e){return ArrayBuffer.isView(e)?e:r.from(String(e),"utf8")},decode:function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}}),t.view=new a({encode:function(e){return ArrayBuffer.isView(e)?e:o.encode(e)},decode:c,name:"view",createBufferTranscoder(){return new i({encode:function(e){return r.isBuffer(e)?e:ArrayBuffer.isView(e)?r.from(e.buffer,e.byteOffset,e.byteLength):r.from(String(e),"utf8")},decode:c,name:`${this.name}+buffer`})}}),t.hex=new i({encode:function(e){return r.isBuffer(e)?e:r.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"}),t.base64=new i({encode:function(e){return r.isBuffer(e)?e:r.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})},2376:function(e,t,n){"use strict";const{Buffer:r}=n(5275)||{},{Encoding:o}=n(8266),s=n(5850);class i extends o{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new a({encode:this.encode,decode:e=>this.decode(r.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class a extends o{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new i({encode:e=>{const t=this.encode(e);return r.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class l extends o{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new i({encode:e=>r.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:t}=s();return new a({encode:t=>e.encode(this.encode(t)),decode:e=>this.decode(t.decode(e)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}t.BufferFormat=i,t.ViewFormat=a,t.UTF8Format=l},5850:function(e){"use strict";let t=null;e.exports=function(){return null===t&&(t={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),t}},5275:function(e,t,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const r=n(9742),o=n(645),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;const i=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function l(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return u(e,t,n)}function u(e,t,n){if("string"===typeof e)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ie(e,ArrayBuffer)||e&&ie(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ie(e,SharedArrayBuffer)||e&&ie(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const o=v(e);if(o)return o;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,n){return d(e),e<=0?l(e):void 0!==t?"string"===typeof n?l(e).fill(t,n):l(e).fill(t):l(e)}function p(e){return d(e),l(e<0?0:0|w(e))}function f(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|S(e,t);let r=l(n);const o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}function g(e){const t=e.length<0?0:0|w(e.length),n=l(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e){if(ie(e,Uint8Array)){const t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function v(e){if(c.isBuffer(e)){const t=0|w(e.length),n=l(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?l(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}function w(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),c.alloc(+e)}function S(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ie(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return oe(e).length;default:if(o)return r?-1:te(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return U(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function E(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,ae(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:C(e,t,n,r,o);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function C(e,t,n,r,o){let s,i=1,a=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,a/=2,l/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){let r=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*i}else-1!==r&&(s-=s-r),r=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(c(e,s+r)!==c(t,r)){n=!1;break}if(n)return s}return-1}function I(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;const s=t.length;let i;for(r>s/2&&(r=s/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(ae(r))return i;e[n+i]=r}return i}function A(e,t,n,r){return se(te(t,e.length-n),e,n,r)}function T(e,t,n,r){return se(ne(t),e,n,r)}function R(e,t,n,r){return se(oe(t),e,n,r)}function x(e,t,n,r){return se(re(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;while(o<n){const t=e[o];let s=null,i=t>239?4:t>223?3:t>191?2:1;if(o+i<=n){let n,r,a,l;switch(i){case 1:t<128&&(s=t);break;case 2:n=e[o+1],128===(192&n)&&(l=(31&t)<<6|63&n,l>127&&(s=l));break;case 3:n=e[o+1],r=e[o+2],128===(192&n)&&128===(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:n=e[o+1],r=e[o+2],a=e[o+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=i}return D(r)}t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=a(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return h(e,t,n)},c.allocUnsafe=function(e){return p(e)},c.allocUnsafeSlow=function(e){return p(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(ie(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),ie(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,s=Math.min(n,r);o<s;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(ie(t,Uint8Array))o+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},c.byteLength=S,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)E(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?N(this,0,e):_.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,o){if(ie(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;let s=o-r,i=n-t;const a=Math.min(s,i),l=this.slice(r,o),u=e.slice(t,n);for(let c=0;c<a;++c)if(l[c]!==u[c]){s=l[c],i=u[c];break}return s<i?-1:i<s?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return I(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":case"latin1":case"binary":return T(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function D(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}function U(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function L(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function B(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let s=t;s<n;++s)o+=le[e[s]];return o}function M(e,t,n){const r=e.slice(t,n);let o="";for(let s=0;s<r.length-1;s+=2)o+=String.fromCharCode(r[s]+256*r[s+1]);return o}function F(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,o,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function z(e,t,n,r,o){Z(t,r,o,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function $(e,t,n,r,o){Z(t,r,o,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function V(e,t,n,r,o,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,s){return t=+t,n>>>=0,s||V(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function K(e,t,n,r,s){return t=+t,n>>>=0,s||V(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],o=1,s=0;while(++s<t&&(o*=256))r+=this[e+s]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e+--t],o=1;while(t>0&&(o*=256))r+=this[e+--t]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],o=1,s=0;while(++s<t&&(o*=256))r+=this[e+s]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=t,o=1,s=this[e+--r];while(r>0&&(o*=256))s+=this[e+--r]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=ce((function(e){e>>>=0,J(e,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;j(this,e,t,n,r,0)}let o=1,s=0;this[t]=255&e;while(++s<n&&(o*=256))this[t+s]=e/o&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;j(this,e,t,n,r,0)}let o=n-1,s=1;this[t+o]=255&e;while(--o>=0&&(s*=256))this[t+o]=e/s&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=ce((function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=ce((function(e,t=0){return $(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let o=0,s=1,i=0;this[t]=255&e;while(++o<n&&(s*=256))e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let o=n-1,s=1,i=0;this[t+o]=255&e;while(--o>=0&&(s*=256))e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=ce((function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=ce((function(e,t=0){return $(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return K(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return K(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{const s=c.isBuffer(e)?e:c.from(e,r),i=s.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%i]}return this};const q={};function W(e,t,n){q[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function Y(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Q(t,e.length-(n+1))}function Z(e,t,n,r,o,s){if(e>n||e<t){const r="bigint"===typeof t?"n":"";let o;throw o=s>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new q.ERR_OUT_OF_RANGE("value",o,e)}G(r,o,s)}function J(e,t){if("number"!==typeof e)throw new q.ERR_INVALID_ARG_TYPE(t,"number",e)}function Q(e,t,n){if(Math.floor(e)!==e)throw J(e,n),new q.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new q.ERR_BUFFER_OUT_OF_BOUNDS;throw new q.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=Y(String(n)):"bigint"===typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=Y(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);const X=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(X,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let n;t=t||1/0;const r=e.length;let o=null;const s=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function ne(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function re(e,t){let n,r,o;const s=[];for(let i=0;i<e.length;++i){if((t-=2)<0)break;n=e.charCodeAt(i),r=n>>8,o=n%256,s.push(o),s.push(r)}return s}function oe(e){return r.toByteArray(ee(e))}function se(e,t,n,r){let o;for(o=0;o<r;++o){if(o+n>=t.length||o>=e.length)break;t[o+n]=e[o]}return o}function ie(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const le=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function ce(e){return"undefined"===typeof BigInt?ue:e}function ue(){throw new Error("BigInt not supported")}},1301:function(e,t,n){t.Level=n(1708).BrowserLevel},942:function(e,t,n){"use strict";const r=n(9727),{hasOwnProperty:o}=Object.prototype,{propertyIsEnumerable:s}=Object,i=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0}),a=this,l={concatArrays:!1,ignoreUndefined:!1},c=e=>{const t=[];for(const n in e)o.call(e,n)&&t.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(e);for(const r of n)s.call(e,r)&&t.push(r)}return t};function u(e){return Array.isArray(e)?d(e):r(e)?h(e):e}function d(e){const t=e.slice(0,0);return c(e).forEach((n=>{i(t,n,u(e[n]))})),t}function h(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return c(e).forEach((n=>{i(t,n,u(e[n]))})),t}const p=(e,t,n,r)=>(n.forEach((n=>{"undefined"===typeof t[n]&&r.ignoreUndefined||(n in e&&e[n]!==Object.getPrototypeOf(e)?i(e,n,g(e[n],t[n],r)):i(e,n,u(t[n])))})),e),f=(e,t,n)=>{let r=e.slice(0,0),s=0;return[e,t].forEach((t=>{const a=[];for(let n=0;n<t.length;n++)o.call(t,n)&&(a.push(String(n)),i(r,s++,t===e?t[n]:u(t[n])));r=p(r,t,c(t).filter((e=>!a.includes(e))),n)})),r};function g(e,t,n){return n.concatArrays&&Array.isArray(e)&&Array.isArray(t)?f(e,t,n):r(t)&&r(e)?p(e,t,c(t),n):u(t)}e.exports=function(...e){const t=g(u(l),this!==a&&this||{},l);let n={_:{}};for(const o of e)if(void 0!==o){if(!r(o))throw new TypeError("`"+o+"` is not an Option Object");n=g(n,{_:o},t)}return n._}},9727:function(e){"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},4415:function(){},4473:function(e){"use strict";e.exports=class extends Error{constructor(e,t){super(e||""),"object"===typeof t&&null!==t&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},7824:function(e){var t=1e3,n=60*t,r=60*n,o=24*r,s=7*o,i=365.25*o;function a(e){if(e=String(e),!(e.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var l=parseFloat(a[1]),c=(a[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function l(e){var s=Math.abs(e);return s>=o?Math.round(e/o)+"d":s>=r?Math.round(e/r)+"h":s>=n?Math.round(e/n)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}function c(e){var s=Math.abs(e);return s>=o?u(e,s,o,"day"):s>=r?u(e,s,r,"hour"):s>=n?u(e,s,n,"minute"):s>=t?u(e,s,t,"second"):e+" ms"}function u(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return a(e);if("number"===n&&isFinite(e))return t.long?c(e):l(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},469:function(e,t,n){e.exports=n(8027)},8027:function(e,t){(function(n,r){"use strict";var o={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function i(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function l(e){return e^=e>>>16,e=i(e,2246822507),e^=e>>>13,e=i(e,3266489909),e^=e>>>16,e}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function d(e,t){return t%=64,32===t?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function h(e,t){return t%=64,0===t?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function p(e,t){return[e[0]^t[0],e[1]^t[1]]}function f(e){return e=p(e,[0,e[0]>>>1]),e=u(e,[4283543511,3981806797]),e=p(e,[0,e[0]>>>1]),e=u(e,[3301882366,444984403]),e=p(e,[0,e[0]>>>1]),e}o.x86.hash32=function(e,t){if(o.inputValidation&&!s(e))return r;t=t||0;for(var n=e.length%4,c=e.length-n,u=t,d=0,h=3432918353,p=461845907,f=0;f<c;f+=4)d=e[f]|e[f+1]<<8|e[f+2]<<16|e[f+3]<<24,d=i(d,h),d=a(d,15),d=i(d,p),u^=d,u=a(u,13),u=i(u,5)+3864292196;switch(d=0,n){case 3:d^=e[f+2]<<16;case 2:d^=e[f+1]<<8;case 1:d^=e[f],d=i(d,h),d=a(d,15),d=i(d,p),u^=d}return u^=e.length,u=l(u),u>>>0},o.x86.hash128=function(e,t){if(o.inputValidation&&!s(e))return r;t=t||0;for(var n=e.length%16,c=e.length-n,u=t,d=t,h=t,p=t,f=0,g=0,m=0,y=0,v=597399067,w=2869860233,b=951274213,S=2716044179,_=0;_<c;_+=16)f=e[_]|e[_+1]<<8|e[_+2]<<16|e[_+3]<<24,g=e[_+4]|e[_+5]<<8|e[_+6]<<16|e[_+7]<<24,m=e[_+8]|e[_+9]<<8|e[_+10]<<16|e[_+11]<<24,y=e[_+12]|e[_+13]<<8|e[_+14]<<16|e[_+15]<<24,f=i(f,v),f=a(f,15),f=i(f,w),u^=f,u=a(u,19),u+=d,u=i(u,5)+1444728091,g=i(g,w),g=a(g,16),g=i(g,b),d^=g,d=a(d,17),d+=h,d=i(d,5)+197830471,m=i(m,b),m=a(m,17),m=i(m,S),h^=m,h=a(h,15),h+=p,h=i(h,5)+2530024501,y=i(y,S),y=a(y,18),y=i(y,v),p^=y,p=a(p,13),p+=u,p=i(p,5)+850148119;switch(f=0,g=0,m=0,y=0,n){case 15:y^=e[_+14]<<16;case 14:y^=e[_+13]<<8;case 13:y^=e[_+12],y=i(y,S),y=a(y,18),y=i(y,v),p^=y;case 12:m^=e[_+11]<<24;case 11:m^=e[_+10]<<16;case 10:m^=e[_+9]<<8;case 9:m^=e[_+8],m=i(m,b),m=a(m,17),m=i(m,S),h^=m;case 8:g^=e[_+7]<<24;case 7:g^=e[_+6]<<16;case 6:g^=e[_+5]<<8;case 5:g^=e[_+4],g=i(g,w),g=a(g,16),g=i(g,b),d^=g;case 4:f^=e[_+3]<<24;case 3:f^=e[_+2]<<16;case 2:f^=e[_+1]<<8;case 1:f^=e[_],f=i(f,v),f=a(f,15),f=i(f,w),u^=f}return u^=e.length,d^=e.length,h^=e.length,p^=e.length,u+=d,u+=h,u+=p,d+=u,h+=u,p+=u,u=l(u),d=l(d),h=l(h),p=l(p),u+=d,u+=h,u+=p,d+=u,h+=u,p+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)},o.x64.hash128=function(e,t){if(o.inputValidation&&!s(e))return r;t=t||0;for(var n=e.length%16,i=e.length-n,a=[0,t],l=[0,t],g=[0,0],m=[0,0],y=[2277735313,289559509],v=[1291169091,658871167],w=0;w<i;w+=16)g=[e[w+4]|e[w+5]<<8|e[w+6]<<16|e[w+7]<<24,e[w]|e[w+1]<<8|e[w+2]<<16|e[w+3]<<24],m=[e[w+12]|e[w+13]<<8|e[w+14]<<16|e[w+15]<<24,e[w+8]|e[w+9]<<8|e[w+10]<<16|e[w+11]<<24],g=u(g,y),g=d(g,31),g=u(g,v),a=p(a,g),a=d(a,27),a=c(a,l),a=c(u(a,[0,5]),[0,1390208809]),m=u(m,v),m=d(m,33),m=u(m,y),l=p(l,m),l=d(l,31),l=c(l,a),l=c(u(l,[0,5]),[0,944331445]);switch(g=[0,0],m=[0,0],n){case 15:m=p(m,h([0,e[w+14]],48));case 14:m=p(m,h([0,e[w+13]],40));case 13:m=p(m,h([0,e[w+12]],32));case 12:m=p(m,h([0,e[w+11]],24));case 11:m=p(m,h([0,e[w+10]],16));case 10:m=p(m,h([0,e[w+9]],8));case 9:m=p(m,[0,e[w+8]]),m=u(m,v),m=d(m,33),m=u(m,y),l=p(l,m);case 8:g=p(g,h([0,e[w+7]],56));case 7:g=p(g,h([0,e[w+6]],48));case 6:g=p(g,h([0,e[w+5]],40));case 5:g=p(g,h([0,e[w+4]],32));case 4:g=p(g,h([0,e[w+3]],24));case 3:g=p(g,h([0,e[w+2]],16));case 2:g=p(g,h([0,e[w+1]],8));case 1:g=p(g,[0,e[w]]),g=u(g,y),g=d(g,31),g=u(g,v),a=p(a,g)}return a=p(a,[0,e.length]),l=p(l,[0,e.length]),a=c(a,l),l=c(l,a),a=f(a),l=f(l),a=c(a,l),l=c(l,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=o),t.murmurHash3=o})()},8951:function(e,t){(function(){var e,n,r,o,s,i,a,l;l=function(e){var t,n,r,o;return t=(e&255<<24)>>>24,n=(e&255<<16)>>>16,r=(65280&e)>>>8,o=255&e,[t,n,r,o].join(".")},a=function(e){var t,r,o,s,i,a;for(t=[],o=s=0;s<=3;o=++s){if(0===e.length)break;if(o>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}a=n(e),i=a[0],r=a[1],e=e.substring(r),t.push(i)}if(0!==e.length)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},r=function(e){return e.charCodeAt(0)},o=r("0"),i=r("a"),s=r("A"),n=function(e){var t,n,a,l,c;l=0,t=10,n="9",a=0,e.length>1&&"0"===e[a]&&("x"===e[a+1]||"X"===e[a+1]?(a+=2,t=16):"0"<=e[a+1]&&e[a+1]<="9"&&(a++,t=8,n="7")),c=a;while(a<e.length){if("0"<=e[a]&&e[a]<=n)l=l*t+(r(e[a])-o)>>>0;else{if(16!==t)break;if("a"<=e[a]&&e[a]<="f")l=l*t+(10+r(e[a])-i)>>>0;else{if(!("A"<=e[a]&&e[a]<="F"))break;l=l*t+(10+r(e[a])-s)>>>0}}if(l>4294967295)throw new Error("too large");a++}if(a===c)throw new Error("empty octet");return[l,a]},e=function(){function e(e,t){var n,r,o;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(o=e.split("/",2),e=o[0],t=o[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=a(t)}catch(s){throw s,new Error("Invalid mask: "+t)}for(n=r=32;r>=0;n=--r)if(this.maskLong===4294967295<<32-n>>>0){this.bitmask=n;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(e)&this.maskLong)>>>0}catch(s){throw s,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=l(this.netLong),this.mask=l(this.maskLong),this.hostmask=l(~this.maskLong),this.first=this.bitmask<=30?l(this.netLong+1):this.base,this.last=this.bitmask<=30?l(this.netLong+this.size-2):l(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?l(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(a(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(l(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,n,r;r=a(this.first),n=a(this.last),t=0;while(r<=n)e(l(r),r,t),t++,r++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=a,t.long2ip=l,t.Netmask=e}).call(this)},3300:function(e,t,n){"use strict";var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")},o=r();e.exports=t=o.fetch,o.fetch&&(t["default"]=o.fetch.bind(o)),t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response},8925:function(e,t,n){var r=n(3832);function o(e,t){var n=function(){return new r.aes.Algorithm(e,t)};r.cipher.registerAlgorithm(e,n)}n(5649),n(1967),n(7116),e.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(e,t,n,r){var o=g({key:e,output:n,decrypt:!1,mode:r});return o.start(t),o},r.aes.createEncryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!1,mode:t})},r.aes.startDecrypting=function(e,t,n,r){var o=g({key:e,output:n,decrypt:!0,mode:r});return o.start(t),o},r.aes.createDecryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!0,mode:t})},r.aes.Algorithm=function(e,t){u||h();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return f(n._w,e,t,!1)},decrypt:function(e,t){return f(n._w,e,t,!0)}}}),n._init=!1},r.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,n=e.key;if("string"!==typeof n||16!==n.length&&24!==n.length&&32!==n.length){if(r.util.isArray(n)&&(16===n.length||24===n.length||32===n.length)){t=n,n=r.util.createBuffer();for(var o=0;o<t.length;++o)n.putByte(t[o])}}else n=r.util.createBuffer(n);if(!r.util.isArray(n)){t=n,n=[];var s=t.length();if(16===s||24===s||32===s){s>>>=2;for(o=0;o<s;++o)n.push(t.getInt32())}}if(!r.util.isArray(n)||4!==n.length&&6!==n.length&&8!==n.length)throw new Error("Invalid key parameter.");var i=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(i);this._w=p(n,e.decrypt&&!a),this._init=!0}},r.aes._expandKey=function(e,t){return u||h(),p(e,t)},r.aes._updateBlock=f,o("AES-ECB",r.cipher.modes.ecb),o("AES-CBC",r.cipher.modes.cbc),o("AES-CFB",r.cipher.modes.cfb),o("AES-OFB",r.cipher.modes.ofb),o("AES-CTR",r.cipher.modes.ctr),o("AES-GCM",r.cipher.modes.gcm);var s,i,a,l,c,u=!1,d=4;function h(){u=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;s=new Array(256),i=new Array(256),l=new Array(4),c=new Array(4);for(t=0;t<4;++t)l[t]=new Array(256),c[t]=new Array(256);var n,r,o,d,h,p,f,g=0,m=0;for(t=0;t<256;++t){d=m^m<<1^m<<2^m<<3^m<<4,d=d>>8^255&d^99,s[g]=d,i[d]=g,h=e[d],n=e[g],r=e[n],o=e[r],p=h<<24^d<<16^d<<8^d^h,f=(n^r^o)<<24^(g^o)<<16^(g^r^o)<<8^g^n^o;for(var y=0;y<4;++y)l[y][g]=p,c[y][d]=f,p=p<<24|p>>>8,f=f<<24|f>>>8;0===g?g=m=1:(g=n^e[e[e[n^o]]],m^=e[e[m]])}}function p(e,t){for(var n,r=e.slice(0),o=1,i=r.length,l=i+6+1,u=d*l,h=i;h<u;++h)n=r[h-1],h%i===0?(n=s[n>>>16&255]<<24^s[n>>>8&255]<<16^s[255&n]<<8^s[n>>>24]^a[o]<<24,o++):i>6&&h%i===4&&(n=s[n>>>24]<<24^s[n>>>16&255]<<16^s[n>>>8&255]<<8^s[255&n]),r[h]=r[h-i]^n;if(t){var p,f=c[0],g=c[1],m=c[2],y=c[3],v=r.slice(0);u=r.length;h=0;for(var w=u-d;h<u;h+=d,w-=d)if(0===h||h===u-d)v[h]=r[w],v[h+1]=r[w+3],v[h+2]=r[w+2],v[h+3]=r[w+1];else for(var b=0;b<d;++b)p=r[w+b],v[h+(3&-b)]=f[s[p>>>24]]^g[s[p>>>16&255]]^m[s[p>>>8&255]]^y[s[255&p]];r=v}return r}function f(e,t,n,r){var o,a,u,d,h,p,f,g,m,y,v,w,b=e.length/4-1;r?(o=c[0],a=c[1],u=c[2],d=c[3],h=i):(o=l[0],a=l[1],u=l[2],d=l[3],h=s),p=t[0]^e[0],f=t[r?3:1]^e[1],g=t[2]^e[2],m=t[r?1:3]^e[3];for(var S=3,_=1;_<b;++_)y=o[p>>>24]^a[f>>>16&255]^u[g>>>8&255]^d[255&m]^e[++S],v=o[f>>>24]^a[g>>>16&255]^u[m>>>8&255]^d[255&p]^e[++S],w=o[g>>>24]^a[m>>>16&255]^u[p>>>8&255]^d[255&f]^e[++S],m=o[m>>>24]^a[p>>>16&255]^u[f>>>8&255]^d[255&g]^e[++S],p=y,f=v,g=w;n[0]=h[p>>>24]<<24^h[f>>>16&255]<<16^h[g>>>8&255]<<8^h[255&m]^e[++S],n[r?3:1]=h[f>>>24]<<24^h[g>>>16&255]<<16^h[m>>>8&255]<<8^h[255&p]^e[++S],n[2]=h[g>>>24]<<24^h[m>>>16&255]<<16^h[p>>>8&255]<<8^h[255&f]^e[++S],n[r?1:3]=h[m>>>24]<<24^h[p>>>16&255]<<16^h[f>>>8&255]<<8^h[255&g]^e[++S]}function g(e){e=e||{};var t,n=(e.mode||"CBC").toUpperCase(),o="AES-"+n;t=e.decrypt?r.cipher.createDecipher(o,e.key):r.cipher.createCipher(o,e.key);var s=t.start;return t.start=function(e,n){var o=null;n instanceof r.util.ByteBuffer&&(o=n,n={}),n=n||{},n.output=o,n.iv=e,s.call(t,n)},t}},3068:function(e,t,n){var r=n(3832);n(7116),n(6270);var o=e.exports=r.asn1=r.asn1||{};function s(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(e,t,n,s,i){if(r.util.isArray(s)){for(var a=[],l=0;l<s.length;++l)void 0!==s[l]&&a.push(s[l]);s=a}var c={tagClass:e,type:t,constructed:n,composed:n||r.util.isArray(s),value:s};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=o.copy(c)),c},o.copy=function(e,t){var n;if(r.util.isArray(e)){n=[];for(var s=0;s<e.length;++s)n.push(o.copy(e[s],t));return n}return"string"===typeof e?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:o.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)},o.equals=function(e,t,n){if(r.util.isArray(e)){if(!r.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(!o.equals(e[s],t[s]))return!1;return!0}if(typeof e!==typeof t)return!1;if("string"===typeof e)return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&o.equals(e.value,t.value);return n&&n.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i},o.getBerValueLength=function(e){var t=e.getByte();if(128!==t){var n,r=128&t;return n=r?e.getInt((127&t)<<3):t,n}};var i=function(e,t){var n=e.getByte();if(t--,128!==n){var r,o=128&n;if(o){var i=127&n;s(e,t,i),r=e.getInt(i<<3)}else r=n;if(r<0)throw new Error("Negative length: "+r);return r}};function a(e,t,n,r){var l;s(e,t,2);var c=e.getByte();t--;var u=192&c,d=31&c;l=e.length();var h,p,f=i(e,t);if(t-=l-e.length(),void 0!==f&&f>t){if(r.strict){var g=new Error("Too few bytes to read ASN.1 value.");throw g.available=e.length(),g.remaining=t,g.requested=f,g}f=t}var m=32===(32&c);if(m)if(h=[],void 0===f)for(;;){if(s(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}l=e.length(),h.push(a(e,t,n+1,r)),t-=l-e.length()}else while(f>0)l=e.length(),h.push(a(e,f,n+1,r)),t-=l-e.length(),f-=l-e.length();if(void 0===h&&u===o.Class.UNIVERSAL&&d===o.Type.BITSTRING&&(p=e.bytes(f)),void 0===h&&r.decodeBitStrings&&u===o.Class.UNIVERSAL&&d===o.Type.BITSTRING&&f>1){var y=e.read,v=t,w=0;if(d===o.Type.BITSTRING&&(s(e,t,1),w=e.getByte(),t--),0===w)try{l=e.length();var b={strict:!0,decodeBitStrings:!0},S=a(e,t,n+1,b),_=l-e.length();t-=_,d==o.Type.BITSTRING&&_++;var E=S.tagClass;_!==f||E!==o.Class.UNIVERSAL&&E!==o.Class.CONTEXT_SPECIFIC||(h=[S])}catch(C){}void 0===h&&(e.read=y,t=v)}if(void 0===h){if(void 0===f){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=t}if(d===o.Type.BMPSTRING)for(h="";f>0;f-=2)s(e,t,2),h+=String.fromCharCode(e.getInt16()),t-=2;else h=e.getBytes(f),t-=f}var k=void 0===p?null:{bitStringContents:p};return o.create(u,d,m,h,k)}o.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"===typeof e&&(e=r.util.createBuffer(e));var n=e.length(),o=a(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=n,s.remaining=e.length(),s}return o},o.toDer=function(e){var t=r.util.createBuffer(),n=e.tagClass|e.type,s=r.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=o.equals(e,e.original))),i)s.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:s.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&s.putBuffer(o.toDer(e.value[a]))}else if(e.type===o.Type.BMPSTRING)for(a=0;a<e.value.length;++a)s.putInt16(e.value.charCodeAt(a));else e.type===o.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?s.putBytes(e.value.substr(1)):s.putBytes(e.value);if(t.putByte(n),s.length()<=127)t.putByte(127&s.length());else{var l=s.length(),c="";do{c+=String.fromCharCode(255&l),l>>>=8}while(l>0);t.putByte(128|c.length);for(a=c.length-1;a>=0;--a)t.putByte(c.charCodeAt(a))}return t.putBuffer(s),t},o.oidToDer=function(e){var t,n,o,s,i=e.split("."),a=r.util.createBuffer();a.putByte(40*parseInt(i[0],10)+parseInt(i[1],10));for(var l=2;l<i.length;++l){t=!0,n=[],o=parseInt(i[l],10);do{s=127&o,o>>>=7,t||(s|=128),n.push(s),t=!1}while(o>0);for(var c=n.length-1;c>=0;--c)a.putByte(n[c])}return a},o.derToOid=function(e){var t;"string"===typeof e&&(e=r.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;var o=0;while(e.length()>0)n=e.getByte(),o<<=7,128&n?o+=127&n:(t+="."+(o+n),o=0);return t},o.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,o=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var l=e.charAt(10),c=10;"+"!==l&&"-"!==l&&(a=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(n,r,o),t.setUTCHours(s,i,a,0),c&&(l=e.charAt(c),"+"===l||"-"===l)){var u=parseInt(e.substr(c+1,2),10),d=parseInt(e.substr(c+4,2),10),h=60*u+d;h*=6e4,"+"===l?t.setTime(+t-h):t.setTime(+t+h)}return t},o.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,o=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),l=0,c=0,u=!1;"Z"===e.charAt(e.length-1)&&(u=!0);var d=e.length-5,h=e.charAt(d);if("+"===h||"-"===h){var p=parseInt(e.substr(d+1,2),10),f=parseInt(e.substr(d+4,2),10);c=60*p+f,c*=6e4,"+"===h&&(c*=-1),u=!0}return"."===e.charAt(14)&&(l=1e3*parseFloat(e.substr(14),10)),u?(t.setUTCFullYear(n,r,o),t.setUTCHours(s,i,a,l),t.setTime(+t+c)):(t.setFullYear(n,r,o),t.setHours(s,i,a,l)),t},o.dateToUtcTime=function(e){if("string"===typeof e)return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t},o.dateToGeneralizedTime=function(e){if("string"===typeof e)return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t},o.integerToDer=function(e){var t=r.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n},o.derToInteger=function(e){"string"===typeof e&&(e=r.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},o.validate=function(e,t,n,s){var i=!1;if(e.tagClass!==t.tagClass&&"undefined"!==typeof t.tagClass||e.type!==t.type&&"undefined"!==typeof t.type)s&&(e.tagClass!==t.tagClass&&s.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&s.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||"undefined"===typeof t.constructed){if(i=!0,t.value&&r.util.isArray(t.value))for(var a=0,l=0;i&&l<t.value.length;++l)i=t.value[l].optional||!1,e.value[a]&&(i=o.validate(e.value[a],t.value[l],n,s),i?++a:t.value[l].optional&&(i=!0)),!i&&s&&s.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&n)if(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(0!==c)throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else s&&s.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return i};var l=/[^\\u0000-\\u00ff]/;o.prettyPrint=function(e,t,n){var s="";t=t||0,n=n||2,t>0&&(s+="\n");for(var i="",a=0;a<t*n;++a)i+=" ";switch(s+=i+"Tag: ",e.tagClass){case o.Class.UNIVERSAL:s+="Universal:";break;case o.Class.APPLICATION:s+="Application:";break;case o.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case o.Class.PRIVATE:s+="Private:";break}if(e.tagClass===o.Class.UNIVERSAL)switch(s+=e.type,e.type){case o.Type.NONE:s+=" (None)";break;case o.Type.BOOLEAN:s+=" (Boolean)";break;case o.Type.INTEGER:s+=" (Integer)";break;case o.Type.BITSTRING:s+=" (Bit string)";break;case o.Type.OCTETSTRING:s+=" (Octet string)";break;case o.Type.NULL:s+=" (Null)";break;case o.Type.OID:s+=" (Object Identifier)";break;case o.Type.ODESC:s+=" (Object Descriptor)";break;case o.Type.EXTERNAL:s+=" (External or Instance of)";break;case o.Type.REAL:s+=" (Real)";break;case o.Type.ENUMERATED:s+=" (Enumerated)";break;case o.Type.EMBEDDED:s+=" (Embedded PDV)";break;case o.Type.UTF8:s+=" (UTF8)";break;case o.Type.ROID:s+=" (Relative Object Identifier)";break;case o.Type.SEQUENCE:s+=" (Sequence)";break;case o.Type.SET:s+=" (Set)";break;case o.Type.PRINTABLESTRING:s+=" (Printable String)";break;case o.Type.IA5String:s+=" (IA5String (ASCII))";break;case o.Type.UTCTIME:s+=" (UTC time)";break;case o.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case o.Type.BMPSTRING:s+=" (BMP String)";break}else s+=e.type;if(s+="\n",s+=i+"Constructed: "+e.constructed+"\n",e.composed){var c=0,u="";for(a=0;a<e.value.length;++a)void 0!==e.value[a]&&(c+=1,u+=o.prettyPrint(e.value[a],t+1,n),a+1<e.value.length&&(u+=","));s+=i+"Sub values: "+c+u}else{if(s+=i+"Value: ",e.type===o.Type.OID){var d=o.derToOid(e.value);s+=d,r.pki&&r.pki.oids&&d in r.pki.oids&&(s+=" ("+r.pki.oids[d]+") ")}if(e.type===o.Type.INTEGER)try{s+=o.derToInteger(e.value)}catch(p){s+="0x"+r.util.bytesToHex(e.value)}else if(e.type===o.Type.BITSTRING){if(e.value.length>1?s+="0x"+r.util.bytesToHex(e.value.slice(1)):s+="(none)",e.value.length>0){var h=e.value.charCodeAt(0);1==h?s+=" (1 unused bit shown)":h>1&&(s+=" ("+h+" unused bits shown)")}}else if(e.type===o.Type.OCTETSTRING)l.test(e.value)||(s+="("+e.value+") "),s+="0x"+r.util.bytesToHex(e.value);else if(e.type===o.Type.UTF8)try{s+=r.util.decodeUtf8(e.value)}catch(f){if("URI malformed"!==f.message)throw f;s+="0x"+r.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===o.Type.PRINTABLESTRING||e.type===o.Type.IA5String?s+=e.value:l.test(e.value)?s+="0x"+r.util.bytesToHex(e.value):0===e.value.length?s+="[null]":s+=e.value}return s}},8807:function(e){var t={};e.exports=t;var n={};function r(e,t){var n=0,r=t.length,o=t.charAt(0),s=[0];for(n=0;n<e.length();++n){for(var i=0,a=e.at(n);i<s.length;++i)a+=s[i]<<8,s[i]=a%r,a=a/r|0;while(a>0)s.push(a%r),a=a/r|0}var l="";for(n=0;0===e.at(n)&&n<e.length()-1;++n)l+=o;for(n=s.length-1;n>=0;--n)l+=t[s[n]];return l}t.encode=function(e,t,n){if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!==typeof n)throw new TypeError('"maxline" must be a number.');var o="";if(e instanceof Uint8Array){var s=0,i=t.length,a=t.charAt(0),l=[0];for(s=0;s<e.length;++s){for(var c=0,u=e[s];c<l.length;++c)u+=l[c]<<8,l[c]=u%i,u=u/i|0;while(u>0)l.push(u%i),u=u/i|0}for(s=0;0===e[s]&&s<e.length-1;++s)o+=a;for(s=l.length-1;s>=0;--s)o+=t[l[s]]}else o=r(e,t);if(n){var d=new RegExp(".{1,"+n+"}","g");o=o.match(d).join("\r\n")}return o},t.decode=function(e,t){if("string"!==typeof e)throw new TypeError('"input" must be a string.');if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');var r=n[t];if(!r){r=n[t]=[];for(var o=0;o<t.length;++o)r[t.charCodeAt(o)]=o}e=e.replace(/\s/g,"");var s=t.length,i=t.charAt(0),a=[0];for(o=0;o<e.length;o++){var l=r[e.charCodeAt(o)];if(void 0===l)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*s,a[c]=255&u,u>>=8;while(u>0)a.push(255&u),u>>=8}for(var d=0;e[d]===i&&d<e.length-1;++d)a.push(0);return"undefined"!==typeof Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())}},5649:function(e,t,n){var r=n(3832);n(7116),e.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(e,t){var n=e;if("string"===typeof n&&(n=r.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},r.cipher.createDecipher=function(e,t){var n=e;if("string"===typeof n&&(n=r.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},r.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),r.cipher.algorithms[e]=t},r.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in r.cipher.algorithms?r.cipher.algorithms[e]:null};var o=r.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};o.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=e.output||r.util.createBuffer(),this.mode.start(t)},o.prototype.update=function(e){e&&this._input.putBuffer(e);while(!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish);this._input.compact()},o.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},1967:function(e,t,n){var r=n(3832);n(7116),r.cipher=r.cipher||{};var o=e.exports=r.cipher.modes=r.cipher.modes||{};function s(e,t){if("string"===typeof e&&(e=r.util.createBuffer(e)),r.util.isArray(e)&&e.length>4){var n=e;e=r.util.createBuffer();for(var o=0;o<n.length;++o)e.putByte(n[o])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!r.util.isArray(e)){var s=[],i=t/4;for(o=0;o<i;++o)s.push(e.getInt32());e=s}return e}function i(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}o.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.ecb.prototype.start=function(e){},o.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},o.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},o.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},o.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2)&&(e.truncate(r),!0)},o.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},o.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2)&&(e.truncate(r),!0)},o.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=e.getInt32()^this._outBlock[o],t.putInt32(this._inBlock[o]);else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(o=0;o<this._ints;++o)this._partialBlock[o]=e.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(s>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=e.getInt32(),t.putInt32(this._inBlock[o]^this._outBlock[o]);else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(o=0;o<this._ints;++o)this._partialBlock[o]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(s>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},o.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(s>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]);else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}i(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,n=r.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?r.util.createBuffer(e.additionalData):r.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=r.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=n.length();if(12===o)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{this._j0=[0,0,0,0];while(n.length()>0)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*o)))}this._inBlock=this._j0.slice(0),i(this._inBlock),this._partialBytes=0,t=r.util.createBuffer(t),this._aDataLength=a(8*t.length());var s=t.length()%this.blockSize;s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];while(t.length()>0)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},o.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize){for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(s<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),i(this._inBlock)},o.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),i(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^this._hashBlock[o]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize},o.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=r.util.createBuffer();var o=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var s=[];this.cipher.encrypt(this._j0,s);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^s[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},o.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),o=0;o<128;++o){var s=e[o/32|0]&1<<31-o%32;s&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n},o.gcm.prototype.pow=function(e,t){for(var n=1&e[3],r=3;r>0;--r)t[r]=e[r]>>>1|(1&e[r-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},o.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,o=e[r]>>>4*(7-n%8)&15,s=this._m[n][o];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t},o.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},o.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,o=16*n,s=new Array(o),i=0;i<o;++i){var a=[0,0,0,0],l=i/r|0,c=(r-1-i%r)*t;a[l]=1<<t-1<<c,s[i]=this.generateSubHashTable(this.multiply(a,e),t)}return s},o.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,o=new Array(n);o[r]=e.slice(0);var s=r>>>1;while(s>0)this.pow(o[2*s],o[s]=[]),s>>=1;s=2;while(s<r){for(var i=1;i<s;++i){var a=o[s],l=o[i];o[s+i]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}s*=2}for(o[0]=[0,0,0,0],s=r+1;s<n;++s){var c=o[s^r];o[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return o}},3480:function(e,t,n){var r=n(3832);function o(e,t){var n=function(){return new r.des.Algorithm(e,t)};r.cipher.registerAlgorithm(e,n)}n(5649),n(1967),n(7116),e.exports=r.des=r.des||{},r.des.startEncrypting=function(e,t,n,r){var o=g({key:e,output:n,decrypt:!1,mode:r||(null===t?"ECB":"CBC")});return o.start(t),o},r.des.createEncryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!1,mode:t})},r.des.startDecrypting=function(e,t,n,r){var o=g({key:e,output:n,decrypt:!0,mode:r||(null===t?"ECB":"CBC")});return o.start(t),o},r.des.createDecryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!0,mode:t})},r.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return f(n._keys,e,t,!1)},decrypt:function(e,t){return f(n._keys,e,t,!0)}}}),n._init=!1},r.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=r.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=p(t),this._init=!0}},o("DES-ECB",r.cipher.modes.ecb),o("DES-CBC",r.cipher.modes.cbc),o("DES-CFB",r.cipher.modes.cfb),o("DES-OFB",r.cipher.modes.ofb),o("DES-CTR",r.cipher.modes.ctr),o("3DES-ECB",r.cipher.modes.ecb),o("3DES-CBC",r.cipher.modes.cbc),o("3DES-CFB",r.cipher.modes.cfb),o("3DES-OFB",r.cipher.modes.ofb),o("3DES-CTR",r.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],i=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],l=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],u=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],h=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function p(e){for(var t,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,y=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,b=0;b<m;b++){var S=e.getInt32(),_=e.getInt32();t=252645135&(S>>>4^_),_^=t,S^=t<<4,t=65535&(_>>>-16^S),S^=t,_^=t<<-16,t=858993459&(S>>>2^_),_^=t,S^=t<<2,t=65535&(_>>>-16^S),S^=t,_^=t<<-16,t=1431655765&(S>>>1^_),_^=t,S^=t<<1,t=16711935&(_>>>8^S),S^=t,_^=t<<8,t=1431655765&(S>>>1^_),_^=t,S^=t<<1,t=S<<8|_>>>20&240,S=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=t;for(var E=0;E<v.length;++E){v[E]?(S=S<<2|S>>>26,_=_<<2|_>>>26):(S=S<<1|S>>>27,_=_<<1|_>>>27),S&=-15,_&=-15;var k=n[S>>>28]|r[S>>>24&15]|o[S>>>20&15]|s[S>>>16&15]|i[S>>>12&15]|a[S>>>8&15]|l[S>>>4&15],C=c[_>>>28]|u[_>>>24&15]|d[_>>>20&15]|h[_>>>16&15]|p[_>>>12&15]|f[_>>>8&15]|g[_>>>4&15];t=65535&(C>>>16^k),y[w++]=k^t,y[w++]=C^t<<16}}return y}function f(e,t,n,r){var o,p,f=32===e.length?3:9;o=3===f?r?[30,-2,-2]:[0,32,2]:r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g=t[0],m=t[1];p=252645135&(g>>>4^m),m^=p,g^=p<<4,p=65535&(g>>>16^m),m^=p,g^=p<<16,p=858993459&(m>>>2^g),g^=p,m^=p<<2,p=16711935&(m>>>8^g),g^=p,m^=p<<8,p=1431655765&(g>>>1^m),m^=p,g^=p<<1,g=g<<1|g>>>31,m=m<<1|m>>>31;for(var y=0;y<f;y+=3){for(var v=o[y+1],w=o[y+2],b=o[y];b!=v;b+=w){var S=m^e[b],_=(m>>>4|m<<28)^e[b+1];p=g,g=m,m=p^(i[S>>>24&63]|l[S>>>16&63]|u[S>>>8&63]|h[63&S]|s[_>>>24&63]|a[_>>>16&63]|c[_>>>8&63]|d[63&_])}p=g,g=m,m=p}g=g>>>1|g<<31,m=m>>>1|m<<31,p=1431655765&(g>>>1^m),m^=p,g^=p<<1,p=16711935&(m>>>8^g),g^=p,m^=p<<8,p=858993459&(m>>>2^g),g^=p,m^=p<<2,p=65535&(g>>>16^m),m^=p,g^=p<<16,p=252645135&(g>>>4^m),m^=p,g^=p<<4,n[0]=g,n[1]=m}function g(e){e=e||{};var t,n=(e.mode||"CBC").toUpperCase(),o="DES-"+n;t=e.decrypt?r.cipher.createDecipher(o,e.key):r.cipher.createCipher(o,e.key);var s=t.start;return t.start=function(e,n){var o=null;n instanceof r.util.ByteBuffer&&(o=n,n={}),n=n||{},n.output=o,n.iv=e,s.call(t,n)},t}},3832:function(e){e.exports={options:{usePureJavaScript:!1}}},6607:function(e,t,n){var r=n(3832);n(8991),n(7116);var o=e.exports=r.hmac=r.hmac||{};o.create=function(){var e=null,t=null,n=null,o=null,s={start:function(s,i){if(null!==s)if("string"===typeof s){if(s=s.toLowerCase(),!(s in r.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=r.md.algorithms[s].create()}else t=s;if(null===i)i=e;else{if("string"===typeof i)i=r.util.createBuffer(i);else if(r.util.isArray(i)){var a=i;i=r.util.createBuffer();for(var l=0;l<a.length;++l)i.putByte(a[l])}var c=i.length();c>t.blockLength&&(t.start(),t.update(i.bytes()),i=t.digest()),n=r.util.createBuffer(),o=r.util.createBuffer(),c=i.length();for(l=0;l<c;++l){a=i.at(l);n.putByte(54^a),o.putByte(92^a)}if(c<t.blockLength)for(a=t.blockLength-c,l=0;l<a;++l)n.putByte(54),o.putByte(92);e=i,n=n.bytes(),o=o.bytes()}t.start(),t.update(n)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(o),t.update(e),t.digest()}};return s.digest=s.getMac,s}},5764:function(e,t,n){var r,o=n(3832);e.exports=o.jsbn=o.jsbn||{};var s=0xdeadbeefcafe,i=15715070==(16777215&s);function a(e,t,n){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function l(){return new a(null)}function c(e,t,n,r,o,s){while(--s>=0){var i=t*this.data[e++]+n.data[r]+o;o=Math.floor(i/67108864),n.data[r++]=67108863&i}return o}function u(e,t,n,r,o,s){var i=32767&t,a=t>>15;while(--s>=0){var l=32767&this.data[e],c=this.data[e++]>>15,u=a*l+c*i;l=i*l+((32767&u)<<15)+n.data[r]+(1073741823&o),o=(l>>>30)+(u>>>15)+a*c+(o>>>30),n.data[r++]=1073741823&l}return o}function d(e,t,n,r,o,s){var i=16383&t,a=t>>14;while(--s>=0){var l=16383&this.data[e],c=this.data[e++]>>14,u=a*l+c*i;l=i*l+((16383&u)<<14)+n.data[r]+o,o=(l>>28)+(u>>14)+a*c,n.data[r++]=268435455&l}return o}o.jsbn.BigInteger=a,"undefined"===typeof navigator?(a.prototype.am=d,r=28):i&&"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=u,r=30):i&&"Netscape"!=navigator.appName?(a.prototype.am=c,r=26):(a.prototype.am=d,r=28),a.prototype.DB=r,a.prototype.DM=(1<<r)-1,a.prototype.DV=1<<r;var h=52;a.prototype.FV=Math.pow(2,h),a.prototype.F1=h-r,a.prototype.F2=2*r-h;var p,f,g="0123456789abcdefghijklmnopqrstuvwxyz",m=new Array;for(p="0".charCodeAt(0),f=0;f<=9;++f)m[p++]=f;for(p="a".charCodeAt(0),f=10;f<36;++f)m[p++]=f;for(p="A".charCodeAt(0),f=10;f<36;++f)m[p++]=f;function y(e){return g.charAt(e)}function v(e,t){var n=m[e.charCodeAt(t)];return null==n?-1:n}function w(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function b(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function S(e){var t=l();return t.fromInt(e),t}function _(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;var r=e.length,o=!1,s=0;while(--r>=0){var i=8==n?255&e[r]:v(e,r);i<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==s?this.data[this.t++]=i:s+n>this.DB?(this.data[this.t-1]|=(i&(1<<this.DB-s)-1)<<s,this.data[this.t++]=i>>this.DB-s):this.data[this.t-1]|=i<<s,s+=n,s>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&a.ZERO.subTo(this,this)}function E(){var e=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==e)--this.t}function k(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,o=!1,s="",i=this.t,a=this.DB-i*this.DB%t;if(i-- >0){a<this.DB&&(n=this.data[i]>>a)>0&&(o=!0,s=y(n));while(i>=0)a<t?(n=(this.data[i]&(1<<a)-1)<<t-a,n|=this.data[--i]>>(a+=this.DB-t)):(n=this.data[i]>>(a-=t)&r,a<=0&&(a+=this.DB,--i)),n>0&&(o=!0),o&&(s+=y(n))}return o?s:"0"}function C(){var e=l();return a.ZERO.subTo(this,e),e}function I(){return this.s<0?this.negate():this}function A(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;while(--n>=0)if(0!=(t=this.data[n]-e.data[n]))return t;return 0}function T(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function R(){return this.t<=0?0:this.DB*(this.t-1)+T(this.data[this.t-1]^this.s&this.DM)}function x(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function O(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function N(e,t){var n,r=e%this.DB,o=this.DB-r,s=(1<<o)-1,i=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t.data[n+i+1]=this.data[n]>>o|a,a=(this.data[n]&s)<<r;for(n=i-1;n>=0;--n)t.data[n]=0;t.data[i]=a,t.t=this.t+i+1,t.s=this.s,t.clamp()}function P(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,s=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var i=n+1;i<this.t;++i)t.data[i-n-1]|=(this.data[i]&s)<<o,t.data[i-n]=this.data[i]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&s)<<o),t.t=this.t-n,t.clamp()}}function D(e,t){var n=0,r=0,o=Math.min(e.t,this.t);while(n<o)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function U(e,t){var n=this.abs(),r=e.abs(),o=n.t;t.t=o+r.t;while(--o>=0)t.data[o]=0;for(o=0;o<r.t;++o)t.data[o+n.t]=n.am(0,r.data[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)}function L(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function B(e,t,n){var r=e.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=l());var s=l(),i=this.s,c=e.s,u=this.DB-T(r.data[r.t-1]);u>0?(r.lShiftTo(u,s),o.lShiftTo(u,n)):(r.copyTo(s),o.copyTo(n));var d=s.t,h=s.data[d-1];if(0!=h){var p=h*(1<<this.F1)+(d>1?s.data[d-2]>>this.F2:0),f=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,y=n.t,v=y-d,w=null==t?l():t;s.dlShiftTo(v,w),n.compareTo(w)>=0&&(n.data[n.t++]=1,n.subTo(w,n)),a.ONE.dlShiftTo(d,w),w.subTo(s,s);while(s.t<d)s.data[s.t++]=0;while(--v>=0){var b=n.data[--y]==h?this.DM:Math.floor(n.data[y]*f+(n.data[y-1]+m)*g);if((n.data[y]+=s.am(0,b,n,v,0,d))<b){s.dlShiftTo(v,w),n.subTo(w,n);while(n.data[y]<--b)n.subTo(w,n)}}null!=t&&(n.drShiftTo(d,t),i!=c&&a.ZERO.subTo(t,t)),n.t=d,n.clamp(),u>0&&n.rShiftTo(u,n),i<0&&a.ZERO.subTo(n,n)}}}function M(e){var t=l();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t}function F(e){this.m=e}function j(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function z(e){return e}function $(e){e.divRemTo(this.m,null,e)}function V(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function H(e,t){e.squareTo(t),this.reduce(t)}function K(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function q(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function W(e){var t=l();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t}function Y(e){var t=l();return e.copyTo(t),this.reduce(t),t}function G(e){while(e.t<=this.mt2)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e.data[n]>=e.DV)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Z(e,t){e.squareTo(t),this.reduce(t)}function J(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Q(){return 0==(this.t>0?1&this.data[0]:this.s)}function X(e,t){if(e>4294967295||e<1)return a.ONE;var n=l(),r=l(),o=t.convert(this),s=T(e)-1;o.copyTo(n);while(--s>=0)if(t.sqrTo(n,r),(e&1<<s)>0)t.mulTo(r,o,n);else{var i=n;n=r,r=i}return t.revert(n)}function ee(e,t){var n;return n=e<256||t.isEven()?new F(t):new q(t),this.exp(e,n)}function te(){var e=l();return this.copyTo(e),e}function ne(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function re(){return 0==this.t?this.s:this.data[0]<<24>>24}function oe(){return 0==this.t?this.s:this.data[0]<<16>>16}function se(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ie(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function ae(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=S(n),o=l(),s=l(),i="";this.divRemTo(r,o,s);while(o.signum()>0)i=(n+s.intValue()).toString(e).substr(1)+i,o.divRemTo(r,o,s);return s.intValue().toString(e)+i}function le(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),o=!1,s=0,i=0,l=0;l<e.length;++l){var c=v(e,l);c<0?"-"==e.charAt(l)&&0==this.signum()&&(o=!0):(i=t*i+c,++s>=n&&(this.dMultiply(r),this.dAddOffset(i,0),s=0,i=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(i,0)),o&&a.ZERO.subTo(this,this)}function ce(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(a.ONE.shiftLeft(e-1),ye,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(t))this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(a.ONE.shiftLeft(e-1),this)}else{var r=new Array,o=7&e;r.length=1+(e>>3),t.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}}function ue(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,o=0;if(e-- >0){r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[o++]=n|this.s<<this.DB-r);while(e>=0)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==o&&(128&this.s)!=(128&n)&&++o,(o>0||n!=this.s)&&(t[o++]=n)}return t}function de(e){return 0==this.compareTo(e)}function he(e){return this.compareTo(e)<0?this:e}function pe(e){return this.compareTo(e)>0?this:e}function fe(e,t,n){var r,o,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(o=e.s&this.DM,r=s;r<this.t;++r)n.data[r]=t(this.data[r],o);n.t=this.t}else{for(o=this.s&this.DM,r=s;r<e.t;++r)n.data[r]=t(o,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function ge(e,t){return e&t}function me(e){var t=l();return this.bitwiseTo(e,ge,t),t}function ye(e,t){return e|t}function ve(e){var t=l();return this.bitwiseTo(e,ye,t),t}function we(e,t){return e^t}function be(e){var t=l();return this.bitwiseTo(e,we,t),t}function Se(e,t){return e&~t}function _e(e){var t=l();return this.bitwiseTo(e,Se,t),t}function Ee(){for(var e=l(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function ke(e){var t=l();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Ce(e){var t=l();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Ie(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function Ae(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+Ie(this.data[e]);return this.s<0?this.t*this.DB:-1}function Te(e){var t=0;while(0!=e)e&=e-1,++t;return t}function Re(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=Te(this.data[n]^t);return e}function xe(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function Oe(e,t){var n=a.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function Ne(e){return this.changeBit(e,ye)}function Pe(e){return this.changeBit(e,Se)}function De(e){return this.changeBit(e,we)}function Ue(e,t){var n=0,r=0,o=Math.min(e.t,this.t);while(n<o)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r+=e.s;while(n<this.t)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function Le(e){var t=l();return this.addTo(e,t),t}function Be(e){var t=l();return this.subTo(e,t),t}function Me(e){var t=l();return this.multiplyTo(e,t),t}function Fe(e){var t=l();return this.divRemTo(e,t,null),t}function je(e){var t=l();return this.divRemTo(e,null,t),t}function ze(e){var t=l(),n=l();return this.divRemTo(e,t,n),new Array(t,n)}function $e(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Ve(e,t){if(0!=e){while(this.t<=t)this.data[this.t++]=0;this.data[t]+=e;while(this.data[t]>=this.DV)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function He(){}function Ke(e){return e}function qe(e,t,n){e.multiplyTo(t,n)}function We(e,t){e.squareTo(t)}function Ye(e){return this.exp(e,new He)}function Ge(e,t,n){var r,o=Math.min(this.t+e.t,t);n.s=0,n.t=o;while(o>0)n.data[--o]=0;for(r=n.t-this.t;o<r;++o)n.data[o+this.t]=this.am(0,e.data[o],n,o,0,this.t);for(r=Math.min(e.t,t);o<r;++o)this.am(0,e.data[o],n,o,0,t-o);n.clamp()}function Ze(e,t,n){--t;var r=n.t=this.t+e.t-t;n.s=0;while(--r>=0)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Je(e){this.r2=l(),this.q3=l(),a.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Qe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=l();return e.copyTo(t),this.reduce(t),t}function Xe(e){return e}function et(e){e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(e.compareTo(this.r2)<0)e.dAddOffset(1,this.m.t+1);e.subTo(this.r2,e);while(e.compareTo(this.m)>=0)e.subTo(this.m,e)}function tt(e,t){e.squareTo(t),this.reduce(t)}function nt(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function rt(e,t){var n,r,o=e.bitLength(),s=S(1);if(o<=0)return s;n=o<18?1:o<48?3:o<144?4:o<768?5:6,r=o<8?new F(t):t.isEven()?new Je(t):new q(t);var i=new Array,a=3,c=n-1,u=(1<<n)-1;if(i[1]=r.convert(this),n>1){var d=l();r.sqrTo(i[1],d);while(a<=u)i[a]=l(),r.mulTo(d,i[a-2],i[a]),a+=2}var h,p,f=e.t-1,g=!0,m=l();o=T(e.data[f])-1;while(f>=0){o>=c?h=e.data[f]>>o-c&u:(h=(e.data[f]&(1<<o+1)-1)<<c-o,f>0&&(h|=e.data[f-1]>>this.DB+o-c)),a=n;while(0==(1&h))h>>=1,--a;if((o-=a)<0&&(o+=this.DB,--f),g)i[h].copyTo(s),g=!1;else{while(a>1)r.sqrTo(s,m),r.sqrTo(m,s),a-=2;a>0?r.sqrTo(s,m):(p=s,s=m,m=p),r.mulTo(m,i[h],s)}while(f>=0&&0==(e.data[f]&1<<o))r.sqrTo(s,m),p=s,s=m,m=p,--o<0&&(o=this.DB-1,--f)}return r.revert(s)}function ot(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var o=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;o<s&&(s=o),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));while(t.signum()>0)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n}function st(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function it(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return a.ZERO;var n=e.clone(),r=this.clone(),o=S(1),s=S(0),i=S(0),l=S(1);while(0!=n.signum()){while(n.isEven())n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);while(r.isEven())r.rShiftTo(1,r),t?(i.isEven()&&l.isEven()||(i.addTo(this,i),l.subTo(e,l)),i.rShiftTo(1,i)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);n.compareTo(r)>=0?(n.subTo(r,n),t&&o.subTo(i,o),s.subTo(l,s)):(r.subTo(n,r),t&&i.subTo(o,i),l.subTo(s,l))}return 0!=r.compareTo(a.ONE)?a.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l}F.prototype.convert=j,F.prototype.revert=z,F.prototype.reduce=$,F.prototype.mulTo=V,F.prototype.sqrTo=H,q.prototype.convert=W,q.prototype.revert=Y,q.prototype.reduce=G,q.prototype.mulTo=J,q.prototype.sqrTo=Z,a.prototype.copyTo=w,a.prototype.fromInt=b,a.prototype.fromString=_,a.prototype.clamp=E,a.prototype.dlShiftTo=x,a.prototype.drShiftTo=O,a.prototype.lShiftTo=N,a.prototype.rShiftTo=P,a.prototype.subTo=D,a.prototype.multiplyTo=U,a.prototype.squareTo=L,a.prototype.divRemTo=B,a.prototype.invDigit=K,a.prototype.isEven=Q,a.prototype.exp=X,a.prototype.toString=k,a.prototype.negate=C,a.prototype.abs=I,a.prototype.compareTo=A,a.prototype.bitLength=R,a.prototype.mod=M,a.prototype.modPowInt=ee,a.ZERO=S(0),a.ONE=S(1),He.prototype.convert=Ke,He.prototype.revert=Ke,He.prototype.mulTo=qe,He.prototype.sqrTo=We,Je.prototype.convert=Qe,Je.prototype.revert=Xe,Je.prototype.reduce=et,Je.prototype.mulTo=nt,Je.prototype.sqrTo=tt;var at=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lt=(1<<26)/at[at.length-1];function ct(e){var t,n=this.abs();if(1==n.t&&n.data[0]<=at[at.length-1]){for(t=0;t<at.length;++t)if(n.data[0]==at[t])return!0;return!1}if(n.isEven())return!1;t=1;while(t<at.length){var r=at[t],o=t+1;while(o<at.length&&r<lt)r*=at[o++];r=n.modInt(r);while(t<o)if(r%at[t++]==0)return!1}return n.millerRabin(e)}function ut(e){var t=this.subtract(a.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r,o=t.shiftRight(n),s=dt(),i=0;i<e;++i){do{r=new a(this.bitLength(),s)}while(r.compareTo(a.ONE)<=0||r.compareTo(t)>=0);var l=r.modPow(o,this);if(0!=l.compareTo(a.ONE)&&0!=l.compareTo(t)){var c=1;while(c++<n&&0!=l.compareTo(t))if(l=l.modPowInt(2,this),0==l.compareTo(a.ONE))return!1;if(0!=l.compareTo(t))return!1}}return!0}function dt(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}}}a.prototype.chunkSize=se,a.prototype.toRadix=ae,a.prototype.fromRadix=le,a.prototype.fromNumber=ce,a.prototype.bitwiseTo=fe,a.prototype.changeBit=Oe,a.prototype.addTo=Ue,a.prototype.dMultiply=$e,a.prototype.dAddOffset=Ve,a.prototype.multiplyLowerTo=Ge,a.prototype.multiplyUpperTo=Ze,a.prototype.modInt=st,a.prototype.millerRabin=ut,a.prototype.clone=te,a.prototype.intValue=ne,a.prototype.byteValue=re,a.prototype.shortValue=oe,a.prototype.signum=ie,a.prototype.toByteArray=ue,a.prototype.equals=de,a.prototype.min=he,a.prototype.max=pe,a.prototype.and=me,a.prototype.or=ve,a.prototype.xor=be,a.prototype.andNot=_e,a.prototype.not=Ee,a.prototype.shiftLeft=ke,a.prototype.shiftRight=Ce,a.prototype.getLowestSetBit=Ae,a.prototype.bitCount=Re,a.prototype.testBit=xe,a.prototype.setBit=Ne,a.prototype.clearBit=Pe,a.prototype.flipBit=De,a.prototype.add=Le,a.prototype.subtract=Be,a.prototype.multiply=Me,a.prototype.divide=Fe,a.prototype.remainder=je,a.prototype.divideAndRemainder=ze,a.prototype.modPow=rt,a.prototype.modInverse=it,a.prototype.pow=Ye,a.prototype.gcd=ot,a.prototype.isProbablePrime=ct},8991:function(e,t,n){var r=n(3832);e.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},6971:function(e,t,n){var r=n(3832);n(3453),e.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1},3453:function(e,t,n){var r=n(3832);n(7116),r.mgf=r.mgf||{};var o=e.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{};o.create=function(e){var t={generate:function(t,n){for(var o=new r.util.ByteBuffer,s=Math.ceil(n/e.digestLength),i=0;i<s;i++){var a=new r.util.ByteBuffer;a.putInt32(i),e.start(),e.update(t+a.getBytes()),o.putBuffer(e.digest())}return o.truncate(o.length()-n),o.getBytes()}};return t}},6270:function(e,t,n){var r=n(3832);r.pki=r.pki||{};var o=e.exports=r.pki.oids=r.oids=r.oids||{};function s(e,t){o[e]=t,o[t]=e}function i(e,t){o[e]=t}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),i("2.5.29.1","authorityKeyIdentifier"),i("2.5.29.2","keyAttributes"),i("2.5.29.3","certificatePolicies"),i("2.5.29.4","keyUsageRestriction"),i("2.5.29.5","policyMapping"),i("2.5.29.6","subtreesConstraint"),i("2.5.29.7","subjectAltName"),i("2.5.29.8","issuerAltName"),i("2.5.29.9","subjectDirectoryAttributes"),i("2.5.29.10","basicConstraints"),i("2.5.29.11","nameConstraints"),i("2.5.29.12","policyConstraints"),i("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),i("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),i("2.5.29.20","cRLNumber"),i("2.5.29.21","cRLReason"),i("2.5.29.22","expirationDate"),i("2.5.29.23","instructionCode"),i("2.5.29.24","invalidityDate"),i("2.5.29.25","cRLDistributionPoints"),i("2.5.29.26","issuingDistributionPoint"),i("2.5.29.27","deltaCRLIndicator"),i("2.5.29.28","issuingDistributionPoint"),i("2.5.29.29","certificateIssuer"),i("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),i("2.5.29.33","policyMappings"),i("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),i("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),i("2.5.29.46","freshestCRL"),i("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},7450:function(e,t,n){var r=n(3832);if(n(8925),n(3068),n(3480),n(8991),n(6270),n(8960),n(6953),n(9563),n(9372),n(8095),n(7116),"undefined"===typeof o)var o=r.jsbn.BigInteger;var s=r.asn1,i=r.pki=r.pki||{};e.exports=i.pbe=r.pbe=r.pbe||{};var a=i.oids,l={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},u={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function d(e,t){return e.start().update(t).digest().getBytes()}function h(e){var t;if(e){if(t=i.oids[s.derToOid(e)],!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}}else t="hmacWithSHA1";return p(t)}function p(e){var t=r.md;switch(e){case"hmacWithSHA224":t=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function f(e,t,n,o){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==o&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,r.util.hexToBytes(n.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(i.oids[o]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),a}i.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var o,l,c,u=r.random.getBytesSync(n.saltSize),d=n.count,h=s.integerToDer(d);if(0===n.algorithm.indexOf("aes")||"des"===n.algorithm){var g,m,y;switch(n.algorithm){case"aes128":o=16,g=16,m=a["aes128-CBC"],y=r.aes.createEncryptionCipher;break;case"aes192":o=24,g=16,m=a["aes192-CBC"],y=r.aes.createEncryptionCipher;break;case"aes256":o=32,g=16,m=a["aes256-CBC"],y=r.aes.createEncryptionCipher;break;case"des":o=8,g=8,m=a["desCBC"],y=r.des.createEncryptionCipher;break;default:var v=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw v.algorithm=n.algorithm,v}var w="hmacWith"+n.prfAlgorithm.toUpperCase(),b=p(w),S=r.pkcs5.pbkdf2(t,u,d,o,b),_=r.random.getBytesSync(g),E=y(S);E.start(_),E.update(s.toDer(e)),E.finish(),c=E.output.getBytes();var k=f(u,h,o,w);l=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pkcs5PBES2"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pkcs5PBKDF2"]).getBytes()),k]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(m).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,_)])])])}else{if("3des"!==n.algorithm){v=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw v.algorithm=n.algorithm,v}o=24;var C=new r.util.ByteBuffer(u);S=i.pbe.generatePkcs12Key(t,C,1,d,o),_=i.pbe.generatePkcs12Key(t,C,2,d,o),E=r.des.createEncryptionCipher(S);E.start(_),E.update(s.toDer(e)),E.finish(),c=E.output.getBytes(),l=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,u),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,h.getBytes())])])}var I=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[l,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,c)]);return I},i.decryptPrivateKeyInfo=function(e,t){var n=null,o={},a=[];if(!s.validate(e,l,o,a)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}var u=s.derToOid(o.encryptionOid),d=i.pbe.getCipher(u,o.encryptionParams,t),h=r.util.createBuffer(o.encryptedData);return d.update(h),d.finish()&&(n=s.fromDer(d.output)),n},i.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return r.pem.encode(n,{maxline:t})},i.encryptedPrivateKeyFromPem=function(e){var t=r.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},i.encryptRsaPrivateKey=function(e,t,n){if(n=n||{},!n.legacy){var o=i.wrapRsaPrivateKey(i.privateKeyToAsn1(e));return o=i.encryptPrivateKeyInfo(o,t,n),i.encryptedPrivateKeyToPem(o)}var a,l,c,u;switch(n.algorithm){case"aes128":a="AES-128-CBC",c=16,l=r.random.getBytesSync(16),u=r.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",c=24,l=r.random.getBytesSync(16),u=r.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",c=32,l=r.random.getBytesSync(16),u=r.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",c=24,l=r.random.getBytesSync(8),u=r.des.createEncryptionCipher;break;case"des":a="DES-CBC",c=8,l=r.random.getBytesSync(8),u=r.des.createEncryptionCipher;break;default:var d=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw d.algorithm=n.algorithm,d}var h=r.pbe.opensslDeriveBytes(t,l.substr(0,8),c),p=u(h);p.start(l),p.update(s.toDer(i.privateKeyToAsn1(e))),p.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:r.util.bytesToHex(l).toUpperCase()},body:p.output.getBytes()};return r.pem.encode(f)},i.decryptRsaPrivateKey=function(e,t){var n=null,o=r.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==o.type&&"PRIVATE KEY"!==o.type&&"RSA PRIVATE KEY"!==o.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw a.headerType=a,a}if(o.procType&&"ENCRYPTED"===o.procType.type){var l,c;switch(o.dekInfo.algorithm){case"DES-CBC":l=8,c=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":l=24,c=r.des.createDecryptionCipher;break;case"AES-128-CBC":l=16,c=r.aes.createDecryptionCipher;break;case"AES-192-CBC":l=24,c=r.aes.createDecryptionCipher;break;case"AES-256-CBC":l=32,c=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":l=5,c=function(e){return r.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":l=8,c=function(e){return r.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":l=16,c=function(e){return r.rc2.createDecryptionCipher(e,128)};break;default:a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".');throw a.algorithm=o.dekInfo.algorithm,a}var u=r.util.hexToBytes(o.dekInfo.parameters),d=r.pbe.opensslDeriveBytes(t,u.substr(0,8),l),h=c(d);if(h.start(u),h.update(r.util.createBuffer(o.body)),!h.finish())return n;n=h.output.getBytes()}else n=o.body;return n="ENCRYPTED PRIVATE KEY"===o.type?i.decryptPrivateKeyInfo(s.fromDer(n),t):s.fromDer(n),null!==n&&(n=i.privateKeyFromAsn1(n)),n},i.pbe.generatePkcs12Key=function(e,t,n,o,s,i){var a,l;if("undefined"===typeof i||null===i){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');i=r.md.sha1.create()}var c=i.digestLength,u=i.blockLength,d=new r.util.ByteBuffer,h=new r.util.ByteBuffer;if(null!==e&&void 0!==e){for(l=0;l<e.length;l++)h.putInt16(e.charCodeAt(l));h.putInt16(0)}var p=h.length(),f=t.length(),g=new r.util.ByteBuffer;g.fillWithByte(n,u);var m=u*Math.ceil(f/u),y=new r.util.ByteBuffer;for(l=0;l<m;l++)y.putByte(t.at(l%f));var v=u*Math.ceil(p/u),w=new r.util.ByteBuffer;for(l=0;l<v;l++)w.putByte(h.at(l%p));var b=y;b.putBuffer(w);for(var S=Math.ceil(s/c),_=1;_<=S;_++){var E=new r.util.ByteBuffer;E.putBytes(g.bytes()),E.putBytes(b.bytes());for(var k=0;k<o;k++)i.start(),i.update(E.getBytes()),E=i.digest();var C=new r.util.ByteBuffer;for(l=0;l<u;l++)C.putByte(E.at(l%c));var I=Math.ceil(f/u)+Math.ceil(p/u),A=new r.util.ByteBuffer;for(a=0;a<I;a++){var T=new r.util.ByteBuffer(b.getBytes(u)),R=511;for(l=C.length()-1;l>=0;l--)R>>=8,R+=C.at(l)+T.at(l),T.setAt(l,255&R);A.putBuffer(T)}b=A,d.putBuffer(E)}return d.truncate(d.length()-s),d},i.pbe.getCipher=function(e,t,n){switch(e){case i.oids["pkcs5PBES2"]:return i.pbe.getCipherForPBES2(e,t,n);case i.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case i.oids["pbewithSHAAnd40BitRC2-CBC"]:return i.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}},i.pbe.getCipherForPBES2=function(e,t,n){var o={},a=[];if(!s.validate(t,c,o,a)){var l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=a,l}if(e=s.derToOid(o.kdfOid),e!==i.oids["pkcs5PBKDF2"]){l=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw l.oid=e,l.supportedOids=["pkcs5PBKDF2"],l}if(e=s.derToOid(o.encOid),e!==i.oids["aes128-CBC"]&&e!==i.oids["aes192-CBC"]&&e!==i.oids["aes256-CBC"]&&e!==i.oids["des-EDE3-CBC"]&&e!==i.oids["desCBC"]){l=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw l.oid=e,l.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],l}var u,d,p=o.kdfSalt,f=r.util.createBuffer(o.kdfIterationCount);switch(f=f.getInt(f.length()<<3),i.oids[e]){case"aes128-CBC":u=16,d=r.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,d=r.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,d=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,d=r.des.createDecryptionCipher;break;case"desCBC":u=8,d=r.des.createDecryptionCipher;break}var g=h(o.prfOid),m=r.pkcs5.pbkdf2(n,p,f,u,g),y=o.encIv,v=d(m);return v.start(y),v},i.pbe.getCipherForPKCS12PBE=function(e,t,n){var o={},a=[];if(!s.validate(t,u,o,a)){var l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=a,l}var c,d,p,f=r.util.createBuffer(o.salt),g=r.util.createBuffer(o.iterations);switch(g=g.getInt(g.length()<<3),e){case i.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,d=8,p=r.des.startDecrypting;break;case i.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,d=8,p=function(e,t){var n=r.rc2.createDecryptionCipher(e,40);return n.start(t,null),n};break;default:l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw l.oid=e,l}var m=h(o.prfOid),y=i.pbe.generatePkcs12Key(n,f,1,g,c,m);m.start();var v=i.pbe.generatePkcs12Key(n,f,2,g,d,m);return p(y,v)},i.pbe.opensslDeriveBytes=function(e,t,n,o){if("undefined"===typeof o||null===o){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');o=r.md.md5.create()}null===t&&(t="");for(var s=[d(o,e+t)],i=16,a=1;i<n;++a,i+=16)s.push(d(o,s[a-1]+e+t));return s.join("").substr(0,n)}},8960:function(e,t,n){var r=n(3832);n(6607),n(8991),n(7116);var o,s=r.pkcs5=r.pkcs5||{};r.util.isNodejs&&!r.options.usePureJavaScript&&(o=n(5819)),e.exports=r.pbkdf2=s.pbkdf2=function(e,t,n,s,i,a){if("function"===typeof i&&(a=i,i=null),r.util.isNodejs&&!r.options.usePureJavaScript&&o.pbkdf2&&(null===i||"object"!==typeof i)&&(o.pbkdf2Sync.length>4||!i||"sha1"===i))return"string"!==typeof i&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?4===o.pbkdf2Sync.length?o.pbkdf2(e,t,n,s,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):o.pbkdf2(e,t,n,s,i,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):4===o.pbkdf2Sync.length?o.pbkdf2Sync(e,t,n,s).toString("binary"):o.pbkdf2Sync(e,t,n,s,i).toString("binary");if("undefined"!==typeof i&&null!==i||(i="sha1"),"string"===typeof i){if(!(i in r.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=r.md[i].create()}var l=i.digestLength;if(s>4294967295*l){var c=new Error("Derived key is too long.");if(a)return a(c);throw c}var u=Math.ceil(s/l),d=s-(u-1)*l,h=r.hmac.create();h.start(i,e);var p,f,g,m="";if(!a){for(var y=1;y<=u;++y){h.start(null,null),h.update(t),h.update(r.util.int32ToBytes(y)),p=g=h.digest().getBytes();for(var v=2;v<=n;++v)h.start(null,null),h.update(g),f=h.digest().getBytes(),p=r.util.xorBytes(p,f,l),g=f;m+=y<u?p:p.substr(0,d)}return m}y=1;function w(){if(y>u)return a(null,m);h.start(null,null),h.update(t),h.update(r.util.int32ToBytes(y)),p=g=h.digest().getBytes(),v=2,b()}function b(){if(v<=n)return h.start(null,null),h.update(g),f=h.digest().getBytes(),p=r.util.xorBytes(p,f,l),g=f,++v,r.util.setImmediate(b);m+=y<u?p:p.substr(0,d),++y,w()}w()}},6953:function(e,t,n){var r=n(3832);n(7116);var o=e.exports=r.pem=r.pem||{};function s(e){for(var t=e.name+": ",n=[],r=function(e,t){return" "+t},o=0;o<e.values.length;++o)n.push(e.values[o].replace(/^(\S+\r\n)/,r));t+=n.join(",")+"\r\n";var s=0,i=-1;for(o=0;o<t.length;++o,++s)if(s>65&&-1!==i){var a=t[i];","===a?(++i,t=t.substr(0,i)+"\r\n "+t.substr(i)):t=t.substr(0,i)+"\r\n"+a+t.substr(i+1),s=o-i-1,i=-1,++o}else" "!==t[o]&&"\t"!==t[o]&&","!==t[o]||(i=o);return t}function i(e){return e.replace(/^\s+/,"")}o.encode=function(e,t){t=t||{};var n,o="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},o+=s(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},o+=s(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),o+=s(n)),e.headers)for(var i=0;i<e.headers.length;++i)o+=s(e.headers[i]);return e.procType&&(o+="\r\n"),o+=r.util.encode64(e.body,t.maxline||64)+"\r\n",o+="-----END "+e.type+"-----\r\n",o},o.decode=function(e){var t,n=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;while(1){if(t=o.exec(e),!t)break;var l=t[1];"NEW CERTIFICATE REQUEST"===l&&(l="CERTIFICATE REQUEST");var c={type:l,procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(t[3])};if(n.push(c),t[2]){var u=t[2].split(a),d=0;while(t&&d<u.length){for(var h=u[d].replace(/\s+$/,""),p=d+1;p<u.length;++p){var f=u[p];if(!/\s/.test(f[0]))break;h+=f,d=p}if(t=h.match(s),t){for(var g={name:t[1],values:[]},m=t[2].split(","),y=0;y<m.length;++y)g.values.push(i(m[y]));if(c.procType)if(c.contentDomain||"Content-Domain"!==g.name)if(c.dekInfo||"DEK-Info"!==g.name)c.headers.push(g);else{if(0===g.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:m[0],parameters:m[1]||null}}else c.contentDomain=m[0]||"";else{if("Proc-Type"!==g.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==g.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:m[0],type:m[1]}}}++d}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw new Error("Invalid PEM formatted message.");return n}},8936:function(e,t,n){var r=n(3832);n(7116),n(9563),n(137);var o=e.exports=r.pkcs1=r.pkcs1||{};function s(e,t,n){n||(n=r.md.sha1.create());for(var o="",s=Math.ceil(t/n.digestLength),i=0;i<s;++i){var a=String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,255&i);n.start(),n.update(e+a),o+=n.digest().getBytes()}return o.substring(0,t)}o.encode_rsa_oaep=function(e,t,n){var o,i,a,l;"string"===typeof n?(o=n,i=arguments[3]||void 0,a=arguments[4]||void 0):n&&(o=n.label||void 0,i=n.seed||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(l=n.mgf1.md)),a?a.start():a=r.md.sha1.create(),l||(l=a);var c=Math.ceil(e.n.bitLength()/8),u=c-2*a.digestLength-2;if(t.length>u){var d=new Error("RSAES-OAEP input message length is too long.");throw d.length=t.length,d.maxLength=u,d}o||(o=""),a.update(o,"raw");for(var h=a.digest(),p="",f=u-t.length,g=0;g<f;g++)p+="\0";var m=h.getBytes()+p+""+t;if(i){if(i.length!==a.digestLength){d=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw d.seedLength=i.length,d.digestLength=a.digestLength,d}}else i=r.random.getBytes(a.digestLength);var y=s(i,c-a.digestLength-1,l),v=r.util.xorBytes(m,y,m.length),w=s(v,a.digestLength,l),b=r.util.xorBytes(i,w,i.length);return"\0"+b+v},o.decode_rsa_oaep=function(e,t,n){var o,i,a;"string"===typeof n?(o=n,i=arguments[3]||void 0):n&&(o=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md));var l=Math.ceil(e.n.bitLength()/8);if(t.length!==l){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=t.length,c.expectedLength=l,c}if(void 0===i?i=r.md.sha1.create():i.start(),a||(a=i),l<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),i.update(o,"raw");for(var u=i.digest().getBytes(),d=t.charAt(0),h=t.substring(1,i.digestLength+1),p=t.substring(1+i.digestLength),f=s(p,i.digestLength,a),g=r.util.xorBytes(h,f,h.length),m=s(g,l-i.digestLength-1,a),y=r.util.xorBytes(p,m,p.length),v=y.substring(0,i.digestLength),w=(c="\0"!==d,0);w<i.digestLength;++w)c|=u.charAt(w)!==v.charAt(w);for(var b=1,S=i.digestLength,_=i.digestLength;_<y.length;_++){var E=y.charCodeAt(_),k=1&E^1,C=b?65534:0;c|=E&C,b&=k,S+=b}if(c||1!==y.charCodeAt(S))throw new Error("Invalid RSAES-OAEP padding.");return y.substring(S+1)}},9437:function(e,t,n){var r=n(3832);n(8925),n(3068),n(3480),n(6270),n(6953),n(5496),n(9563),n(7116),n(5414);var o=r.asn1,s=e.exports=r.pkcs7=r.pkcs7||{};function i(e){var t={},n=[];if(!o.validate(e,s.asn1.recipientInfoValidator,t,n)){var i=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw i.errors=n,i}return{version:t.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(t.issuer),serialNumber:r.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:o.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function a(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:e.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.encryptedContent.algorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function l(e){for(var t=[],n=0;n<e.length;++n)t.push(i(e[n]));return t}function c(e){for(var t=[],n=0;n<e.length;++n)t.push(a(e[n]));return t}function u(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:e.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.digestAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<e.unauthenticatedAttributes.length;++s){var i=e.unauthenticatedAttributes[s];n.values.push(h(i))}t.value.push(n)}return t}function d(e){for(var t=[],n=0;n<e.length;++n)t.push(u(e[n]));return t}function h(e){var t;if(e.type===r.pki.oids.contentType)t=o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.value).getBytes());else if(e.type===r.pki.oids.messageDigest)t=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===r.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),i=e.value;if("string"===typeof i){var a=Date.parse(i);i=isNaN(a)?13===i.length?o.utcTimeToDate(i):o.generalizedTimeToDate(i):new Date(a)}t=i>=n&&i<s?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(i)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(i))}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[t])])}function p(e){return[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(r.pki.oids.data).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.algorithm).getBytes()),e.parameter?o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.content.getBytes())])]}function f(e,t,n){var s={},i=[];if(!o.validate(t,n,s,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var l=o.derToOid(s.contentType);if(l!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var c="";if(r.util.isArray(s.encryptedContent))for(var u=0;u<s.encryptedContent.length;++u){if(s.encryptedContent[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=s.encryptedContent[u].value}else c=s.encryptedContent;e.encryptedContent={algorithm:o.derToOid(s.encAlgorithm),parameter:r.util.createBuffer(s.encParameter.value),content:r.util.createBuffer(c)}}if(s.content){c="";if(r.util.isArray(s.content))for(u=0;u<s.content.length;++u){if(s.content[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=s.content[u].value}else c=s.content;e.content=r.util.createBuffer(c)}return e.version=s.version.charCodeAt(0),e.rawCapture=s,s}function g(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:t=r.aes.createDecryptionCipher(e.encryptedContent.key);break;case r.pki.oids["desCBC"]:case r.pki.oids["des-EDE3-CBC"]:t=r.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}s.messageFromPem=function(e){var t=r.pem.decode(e)[0];if("PKCS7"!==t.type){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var i=o.fromDer(t.body);return s.messageFromAsn1(i)},s.messageToPem=function(e,t){var n={type:"PKCS7",body:o.toDer(e.toAsn1()).getBytes()};return r.pem.encode(n,{maxline:t})},s.messageFromAsn1=function(e){var t={},n=[];if(!o.validate(e,s.asn1.contentInfoValidator,t,n)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw i.errors=n,i}var a,l=o.derToOid(t.contentType);switch(l){case r.pki.oids.envelopedData:a=s.createEnvelopedData();break;case r.pki.oids.encryptedData:a=s.createEncryptedData();break;case r.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+l+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a},s.createSignedData=function(){var e=null;return e={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(f(e,t,s.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var n=e.rawCapture.certificates.value,o=0;o<n.length;++o)e.certificates.push(r.pki.certificateFromAsn1(n[o]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],n=0;n<e.certificates.length;++n)t.push(r.pki.certificateToAsn1(e.certificates[n]));var s=[],i=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&i.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,t)),s.length>0&&i.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,s)),i.value[0].value.push(o.create(o.Class.UNIVERSAL,o.Type.SET,!0,e.signerInfos)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),i])},addSigner:function(t){var n=t.issuer,o=t.serialNumber;if(t.certificate){var s=t.certificate;"string"===typeof s&&(s=r.pki.certificateFromPem(s)),n=s.issuer.attributes,o=s.serialNumber}var i=t.key;if(!i)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof i&&(i=r.pki.privateKeyFromPem(i));var a=t.digestAlgorithm||r.pki.oids.sha1;switch(a){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var l=t.authenticatedAttributes||[];if(l.length>0){for(var c=!1,u=!1,d=0;d<l.length;++d){var h=l[d];if(c||h.type!==r.pki.oids.contentType){if(u||h.type!==r.pki.oids.messageDigest);else if(u=!0,c)break}else if(c=!0,u)break}if(!c||!u)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:i,version:1,issuer:n,serialNumber:o,digestAlgorithm:a,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(s){var i;(s=s||{},"object"!==typeof e.content||null===e.contentInfo)&&(e.contentInfo=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(r.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof r.util.ByteBuffer?i=e.content.bytes():"string"===typeof e.content&&(i=r.util.encodeUtf8(e.content)),s.detached?e.detachedContent=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,i)]))));if(0!==e.signers.length){var a=t();n(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"===typeof t&&(t=r.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var t={},n=0;n<e.signers.length;++n){var s=e.signers[n],i=s.digestAlgorithm;i in t||(t[i]=r.md[r.pki.oids[i]].create()),0===s.authenticatedAttributes.length?s.md=t[i]:s.md=r.md[r.pki.oids[i]].create()}for(var i in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return t}function n(t){var n;if(e.detachedContent?n=e.detachedContent:(n=e.contentInfo.value[1],n=n.value[0]),!n)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=o.derToOid(e.contentInfo.value[0].value),i=o.toDer(n);for(var a in i.getByte(),o.getBerValueLength(i),i=i.getBytes(),t)t[a].start().update(i);for(var l=new Date,c=0;c<e.signers.length;++c){var u=e.signers[c];if(0===u.authenticatedAttributes.length){if(s!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[]),f=0;f<u.authenticatedAttributes.length;++f){var g=u.authenticatedAttributes[f];g.type===r.pki.oids.messageDigest?g.value=t[u.digestAlgorithm].digest():g.type===r.pki.oids.signingTime&&(g.value||(g.value=l)),p.value.push(h(g)),u.authenticatedAttributesAsn1.value.push(h(g))}i=o.toDer(p).getBytes(),u.md.start().update(i)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=d(e.signers)}},s.createEncryptedData=function(){var e=null;return e={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(t){f(e,t,s.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),g(e)}},e},s.createEnvelopedData=function(){var e=null;return e={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=f(e,t,s.asn1.envelopedDataValidator);e.recipients=l(n.recipientInfos.value)},toAsn1:function(){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,c(e.recipients)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,p(e.encryptedContent))])])])},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var o=e.recipients[r],s=o.issuer;if(o.serialNumber===t.serialNumber&&s.length===n.length){for(var i=!0,a=0;a<n.length;++a)if(s[a].type!==n[a].type||s[a].value!==n[a].value){i=!1;break}if(i)return o}}return null},decrypt:function(t,n){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var o=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=r.util.createBuffer(o);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}g(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===e.encryptedContent.content){var o,s,i;switch(n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,n){case r.pki.oids["aes128-CBC"]:o=16,s=16,i=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:o=24,s=16,i=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:o=32,s=16,i=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:o=24,s=8,i=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(void 0===t)t=r.util.createBuffer(r.random.getBytes(o));else if(t.length()!=o)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+o+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(s));var a=i(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var l=0;l<e.recipients.length;++l){var c=e.recipients[l];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e}},5496:function(e,t,n){var r=n(3832);n(3068),n(7116);var o=r.asn1,s=e.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=s;var i={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=i;var a={name:"EncryptedContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var l={name:"SignerInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},i,{name:"SignedData.Certificates",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,capture:"signerInfos",optional:!0,value:[l]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},9654:function(e,t,n){var r=n(3832);n(7116),n(5764),n(9563),function(){if(r.prime)e.exports=r.prime;else{var t=e.exports=r.prime=r.prime||{},n=r.jsbn.BigInteger,o=[6,4,2,4,2,4,6,2],s=new n(null);s.fromInt(30);var i=function(e,t){return e|t};t.generateProbablePrime=function(e,t,n){"function"===typeof t&&(n=t,t={}),t=t||{};var o=t.algorithm||"PRIMEINC";"string"===typeof o&&(o={name:o}),o.options=o.options||{};var s=t.prng||r.random,i={nextBytes:function(e){for(var t=s.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if("PRIMEINC"===o.name)return a(e,i,o.options,n);throw new Error("Invalid prime generation algorithm: "+o.name)}}function a(e,t,n,r){return"workers"in n?u(e,t,n,r):l(e,t,n,r)}function l(e,t,n,r){var o=d(e,t),s=0,i=h(o.bitLength());"millerRabinTests"in n&&(i=n.millerRabinTests);var a=10;"maxBlockTime"in n&&(a=n.maxBlockTime),c(o,e,t,s,i,a,r)}function c(e,t,n,s,i,a,l){var u=+new Date;do{if(e.bitLength()>t&&(e=d(t,n)),e.isProbablePrime(i))return l(null,e);e.dAddOffset(o[s++%8],0)}while(a<0||+new Date-u<a);r.util.setImmediate((function(){c(e,t,n,s,i,a,l)}))}function u(e,t,o,s){if("undefined"===typeof Worker)return l(e,t,o,s);var i=d(e,t),a=o.workers,c=o.workLoad||100,u=30*c/8,h=o.workerScript||"forge/prime.worker.js";if(-1===a)return r.util.estimateCores((function(e,t){e&&(t=2),a=t-1,p()}));function p(){a=Math.max(1,a);for(var r=[],o=0;o<a;++o)r[o]=new Worker(h);for(o=0;o<a;++o)r[o].addEventListener("message",p);var l=!1;function p(o){if(!l){0;var a=o.data;if(a.found){for(var h=0;h<r.length;++h)r[h].terminate();return l=!0,s(null,new n(a.prime,16))}i.bitLength()>e&&(i=d(e,t));var p=i.toString(16);o.target.postMessage({hex:p,workLoad:c}),i.dAddOffset(u,0)}}}p()}function d(e,t){var r=new n(e,t),o=e-1;return r.testBit(o)||r.bitwiseTo(n.ONE.shiftLeft(o),i,r),r.dAddOffset(31-r.mod(s).byteValue(),0),r}function h(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}}()},4933:function(e,t,n){var r=n(3832);n(7116);var o=null;!r.util.isNodejs||r.options.usePureJavaScript||process.versions["node-webkit"]||(o=n(5819));var s=e.exports=r.prng=r.prng||{};s.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,s=new Array(32),i=0;i<32;++i)s[i]=n.create();function a(e){if(t.pools[0].messageLength>=32)return c(),e();var n=32-t.pools[0].messageLength<<5;t.seedFile(n,(function(n,r){if(n)return e(n);t.collect(r),c(),e()}))}function l(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var n=1,r=0;r<32;++r)t.reseeds%n===0&&(e.update(t.pools[r].digest().getBytes()),t.pools[r].start()),n<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var o=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(o),t.generated=0}function u(e){var t=null,n=r.util.globalScope,o=n.crypto||n.msCrypto;o&&o.getRandomValues&&(t=function(e){return o.getRandomValues(e)});var s=r.util.createBuffer();if(t)while(s.length()<e){var i=Math.max(1,Math.min(e-s.length(),65536)/4),a=new Uint32Array(Math.floor(i));try{t(a);for(var l=0;l<a.length;++l)s.putInt32(a[l])}catch(p){if(!("undefined"!==typeof QuotaExceededError&&p instanceof QuotaExceededError))throw p}}if(s.length()<e){var c,u,d,h=Math.floor(65536*Math.random());while(s.length()<e){u=16807*(65535&h),c=16807*(h>>16),u+=(32767&c)<<16,u+=c>>15,u=(2147483647&u)+(u>>31),h=4294967295&u;for(l=0;l<3;++l)d=h>>>(l<<3),d^=Math.floor(256*Math.random()),s.putByte(255&d)}}return s.getBytes(e)}return t.pools=s,t.pool=0,t.generate=function(e,n){if(!n)return t.generateSync(e);var o=t.plugin.cipher,s=t.plugin.increment,i=t.plugin.formatKey,l=t.plugin.formatSeed,c=r.util.createBuffer();function u(d){if(d)return n(d);if(c.length()>=e)return n(null,c.getBytes(e));if(t.generated>1048575&&(t.key=null),null===t.key)return r.util.nextTick((function(){a(u)}));var h=o(t.key,t.seed);t.generated+=h.length,c.putBytes(h),t.key=i(o(t.key,s(t.seed))),t.seed=l(o(t.key,t.seed)),r.util.setImmediate(u)}t.key=null,u()},t.generateSync=function(e){var n=t.plugin.cipher,o=t.plugin.increment,s=t.plugin.formatKey,i=t.plugin.formatSeed;t.key=null;var a=r.util.createBuffer();while(a.length()<e){t.generated>1048575&&(t.key=null),null===t.key&&l();var c=n(t.key,t.seed);t.generated+=c.length,a.putBytes(c),t.key=s(n(t.key,o(t.seed))),t.seed=i(n(t.key,t.seed))}return a.getBytes(e)},o?(t.seedFile=function(e,t){o.randomBytes(e,(function(e,n){if(e)return t(e);t(null,n.toString())}))},t.seedFileSync=function(e){return o.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(n){t(n)}},t.seedFileSync=u),t.collect=function(e){for(var n=e.length,r=0;r<n;++r)t.pools[t.pool].update(e.substr(r,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,n){for(var r="",o=0;o<n;o+=8)r+=String.fromCharCode(e>>o&255);t.collect(r)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){function n(e){var r=e.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",n),t(r.forge.prng.err,r.forge.prng.bytes))}self.addEventListener("message",n),self.postMessage({forge:{prng:{needed:e}}})};else{var n=function(n){var r=n.data;r.forge&&r.forge.prng&&t.seedFile(r.forge.prng.needed,(function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})}))};e.addEventListener("message",n)}},t}},6007:function(e,t,n){var r=n(3832);n(9563),n(7116);var o=e.exports=r.pss=r.pss||{};o.create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,n=e.md,o=e.mgf,s=n.digestLength,i=e.salt||null;if("string"===typeof i&&(i=r.util.createBuffer(i)),"saltLength"in e)t=e.saltLength;else{if(null===i)throw new Error("Salt length not specified or specific salt not given.");t=i.length()}if(null!==i&&i.length()!==t)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||r.random,l={encode:function(e,l){var c,u,d=l-1,h=Math.ceil(d/8),p=e.digest().getBytes();if(h<s+t+2)throw new Error("Message is too long to encrypt.");u=null===i?a.getBytesSync(t):i.bytes();var f=new r.util.ByteBuffer;f.fillWithByte(0,8),f.putBytes(p),f.putBytes(u),n.start(),n.update(f.getBytes());var g=n.digest().getBytes(),m=new r.util.ByteBuffer;m.fillWithByte(0,h-t-s-2),m.putByte(1),m.putBytes(u);var y=m.getBytes(),v=h-s-1,w=o.generate(g,v),b="";for(c=0;c<v;c++)b+=String.fromCharCode(y.charCodeAt(c)^w.charCodeAt(c));var S=65280>>8*h-d&255;return b=String.fromCharCode(b.charCodeAt(0)&~S)+b.substr(1),b+g+String.fromCharCode(188)},verify:function(e,i,a){var l,c=a-1,u=Math.ceil(c/8);if(i=i.substr(-u),u<s+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==i.charCodeAt(u-1))throw new Error("Encoded message does not end in 0xBC.");var d=u-s-1,h=i.substr(0,d),p=i.substr(d,s),f=65280>>8*u-c&255;if(0!==(h.charCodeAt(0)&f))throw new Error("Bits beyond keysize not zero as expected.");var g=o.generate(p,d),m="";for(l=0;l<d;l++)m+=String.fromCharCode(h.charCodeAt(l)^g.charCodeAt(l));m=String.fromCharCode(m.charCodeAt(0)&~f)+m.substr(1);var y=u-s-t-2;for(l=0;l<y;l++)if(0!==m.charCodeAt(l))throw new Error("Leftmost octets not zero as expected");if(1!==m.charCodeAt(y))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=m.substr(-t),w=new r.util.ByteBuffer;w.fillWithByte(0,8),w.putBytes(e),w.putBytes(v),n.start(),n.update(w.getBytes());var b=n.digest().getBytes();return p===b}};return l}},9563:function(e,t,n){var r=n(3832);n(8925),n(1668),n(4933),n(7116),function(){r.random&&r.random.getBytes?e.exports=r.random:function(t){var n={},o=new Array(4),s=r.util.createBuffer();function i(){var e=r.prng.create(n);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}n.formatKey=function(e){var t=r.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),r.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=r.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return r.aes._updateBlock(e,t,o,!1),s.putInt32(o[0]),s.putInt32(o[1]),s.putInt32(o[2]),s.putInt32(o[3]),s.getBytes()},n.increment=function(e){return++e[3],e},n.md=r.md.sha256;var a=i(),l=null,c=r.util.globalScope,u=c.crypto||c.msCrypto;if(u&&u.getRandomValues&&(l=function(e){return u.getRandomValues(e)}),r.options.usePureJavaScript||!r.util.isNodejs&&!l){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var d="";for(var h in navigator)try{"string"==typeof navigator[h]&&(d+=navigator[h])}catch(p){}a.collect(d),d=null}t&&(t().mousemove((function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)})),t().keypress((function(e){a.collectInt(e.charCode,8)})))}if(r.random)for(var h in a)r.random[h]=a[h];else r.random=a;r.random.createInstance=i,e.exports=r.random}("undefined"!==typeof jQuery?jQuery:null)}()},9372:function(e,t,n){var r=n(3832);n(7116);var o=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],i=function(e,t){return e<<t&65535|(65535&e)>>16-t},a=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(e,t){"string"===typeof e&&(e=r.util.createBuffer(e)),t=t||128;var n,s=e,i=e.length(),a=t,l=Math.ceil(a/8),c=255>>(7&a);for(n=i;n<128;n++)s.putByte(o[s.at(n-1)+s.at(n-i)&255]);for(s.setAt(128-l,o[s.at(128-l)&c]),n=127-l;n>=0;n--)s.setAt(n,o[s.at(n+1)^s.at(n+l)]);return s};var l=function(e,t,n){var o,l,c,u,d=!1,h=null,p=null,f=null,g=[];for(e=r.rc2.expandKey(e,t),c=0;c<64;c++)g.push(e.getInt16Le());n?(o=function(e){for(c=0;c<4;c++)e[c]+=g[u]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),e[c]=i(e[c],s[c]),u++},l=function(e){for(c=0;c<4;c++)e[c]+=g[63&e[(c+3)%4]]}):(o=function(e){for(c=3;c>=0;c--)e[c]=a(e[c],s[c]),e[c]-=g[u]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),u--},l=function(e){for(c=3;c>=0;c--)e[c]-=g[63&e[(c+3)%4]]});var m=function(e){var t=[];for(c=0;c<4;c++){var r=h.getInt16Le();null!==f&&(n?r^=f.getInt16Le():f.putInt16Le(r)),t.push(65535&r)}u=n?0:63;for(var o=0;o<e.length;o++)for(var s=0;s<e[o][0];s++)e[o][1](t);for(c=0;c<4;c++)null!==f&&(n?f.putInt16Le(t[c]):t[c]^=f.getInt16Le()),p.putInt16Le(t[c])},y=null;return y={start:function(e,t){e&&"string"===typeof e&&(e=r.util.createBuffer(e)),d=!1,h=r.util.createBuffer(),p=t||new r.util.createBuffer,f=e,y.output=p},update:function(e){d||h.putBuffer(e);while(h.length()>=8)m([[5,o],[1,l],[6,o],[1,l],[5,o]])},finish:function(e){var t=!0;if(n)if(e)t=e(8,h,!n);else{var r=8===h.length()?8:8-h.length();h.fillWithByte(r,r)}if(t&&(d=!0,y.update()),!n&&(t=0===h.length(),t))if(e)t=e(8,p,!n);else{var o=p.length(),s=p.at(o-1);s>o?t=!1:p.truncate(s)}return t}},y};r.rc2.startEncrypting=function(e,t,n){var o=r.rc2.createEncryptionCipher(e,128);return o.start(t,n),o},r.rc2.createEncryptionCipher=function(e,t){return l(e,t,!0)},r.rc2.startDecrypting=function(e,t,n){var o=r.rc2.createDecryptionCipher(e,128);return o.start(t,n),o},r.rc2.createDecryptionCipher=function(e,t){return l(e,t,!1)}},8095:function(e,t,n){var r=n(3832);if(n(3068),n(5764),n(6270),n(8936),n(9654),n(9563),n(7116),"undefined"===typeof o)var o=r.jsbn.BigInteger;var s=r.util.isNodejs?n(5819):null,i=r.asn1,a=r.util;r.pki=r.pki||{},e.exports=r.pki.rsa=r.rsa=r.rsa||{};var l=r.pki,c=[6,4,2,4,2,4,6,2],u={name:"PrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},d={name:"RSAPrivateKey",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},f={name:"DigestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},g=function(e){var t;if(!(e.algorithm in l.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}t=l.oids[e.algorithm];var r=i.oidToDer(t).getBytes(),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);s.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,r)),s.value.push(i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,""));var a=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.digest().getBytes());return o.value.push(s),o.value.push(a),i.toDer(o).getBytes()},m=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var s;t.dP||(t.dP=t.d.mod(t.p.subtract(o.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(o.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{s=new o(r.util.bytesToHex(r.random.getBytes(t.n.bitLength()/8)),16)}while(s.compareTo(t.n)>=0||!s.gcd(t.n).equals(o.ONE));e=e.multiply(s.modPow(t.e,t.n)).mod(t.n);var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);while(i.compareTo(a)<0)i=i.add(t.p);var l=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return l=l.multiply(s.modInverse(t.n)).mod(t.n),l};function y(e,t,n){var o=r.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var i=new Error("Message is too long for PKCS#1 v1.5 padding.");throw i.length=e.length,i.max=s-11,i}o.putByte(0),o.putByte(n);var a,l=s-3-e.length;if(0===n||1===n){a=0===n?0:255;for(var c=0;c<l;++c)o.putByte(a)}else while(l>0){var u=0,d=r.random.getBytes(l);for(c=0;c<l;++c)a=d.charCodeAt(c),0===a?++u:o.putByte(a);l=u}return o.putByte(0),o.putBytes(e),o}function v(e,t,n,o){var s=Math.ceil(t.n.bitLength()/8),i=r.util.createBuffer(e),a=i.getByte(),l=i.getByte();if(0!==a||n&&0!==l&&1!==l||!n&&2!=l||n&&0===l&&"undefined"===typeof o)throw new Error("Encryption block is invalid.");var c=0;if(0===l){c=s-3-o;for(var u=0;u<c;++u)if(0!==i.getByte())throw new Error("Encryption block is invalid.")}else if(1===l){c=0;while(i.length()>1){if(255!==i.getByte()){--i.read;break}++c}}else if(2===l){c=0;while(i.length()>1){if(0===i.getByte()){--i.read;break}++c}}var d=i.getByte();if(0!==d||c!==s-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function w(e,t,n){"function"===typeof t&&(n=t,t={}),t=t||{};var s={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function i(){a(e.pBits,(function(t,r){return t?n(t):(e.p=r,null!==e.q?c(t,e.q):void a(e.qBits,c))}))}function a(e,t){r.prime.generateProbablePrime(e,s,t)}function c(t,r){if(t)return n(t);if(e.q=r,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(o.ONE).gcd(e.e).compareTo(o.ONE))return e.p=null,void i();if(0!==e.q.subtract(o.ONE).gcd(e.e).compareTo(o.ONE))return e.q=null,void a(e.qBits,c);if(e.p1=e.p.subtract(o.ONE),e.q1=e.q.subtract(o.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(o.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,c);var u=e.e.modInverse(e.phi);e.keys={privateKey:l.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:l.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}"prng"in t&&(s.prng=t.prng),i()}function b(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=r.util.hexToBytes(t);return n.length>1&&(0===n.charCodeAt(0)&&0===(128&n.charCodeAt(1))||255===n.charCodeAt(0)&&128===(128&n.charCodeAt(1)))?n.substr(1):n}function S(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function _(e){return r.util.isNodejs&&"function"===typeof s[e]}function E(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[e]}function k(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[e]}function C(e){for(var t=r.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),o=0;o<t.length;++o)n[o]=t.charCodeAt(o);return n}l.rsa.encrypt=function(e,t,n){var s,i=n,a=Math.ceil(t.n.bitLength()/8);!1!==n&&!0!==n?(i=2===n,s=y(e,t,n)):(s=r.util.createBuffer(),s.putBytes(e));var l=new o(s.toHex(),16),c=m(l,t,i),u=c.toString(16),d=r.util.createBuffer(),h=a-Math.ceil(u.length/2);while(h>0)d.putByte(0),--h;return d.putBytes(r.util.hexToBytes(u)),d.getBytes()},l.rsa.decrypt=function(e,t,n,s){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var l=new o(r.util.createBuffer(e).toHex(),16);if(l.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");var c=m(l,t,n),u=c.toString(16),d=r.util.createBuffer(),h=i-Math.ceil(u.length/2);while(h>0)d.putByte(0),--h;return d.putBytes(r.util.hexToBytes(u)),!1!==s?v(d.getBytes(),t,n):d.getBytes()},l.rsa.createKeyPairGenerationState=function(e,t,n){"string"===typeof e&&(e=parseInt(e,10)),e=e||2048,n=n||{};var s,i=n.prng||r.random,a={nextBytes:function(e){for(var t=i.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},l=n.algorithm||"PRIMEINC";if("PRIMEINC"!==l)throw new Error("Invalid key generation algorithm: "+l);return s={algorithm:l,state:0,bits:e,rng:a,eInt:t||65537,e:new o(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt),s},l.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new o(null);n.fromInt(30);var r,s=0,i=function(e,t){return e|t},a=+new Date,u=0;while(null===e.keys&&(t<=0||u<t)){if(0===e.state){var d=null===e.p?e.pBits:e.qBits,h=d-1;0===e.pqState?(e.num=new o(d,e.rng),e.num.testBit(h)||e.num.bitwiseTo(o.ONE.shiftLeft(h),i,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),s=0,++e.pqState):1===e.pqState?e.num.bitLength()>d?e.pqState=0:e.num.isProbablePrime(S(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(c[s++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(o.ONE).gcd(e.e).compareTo(o.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(o.ONE),e.q1=e.q.subtract(o.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(o.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var p=e.e.modInverse(e.phi);e.keys={privateKey:l.rsa.setPrivateKey(e.n,e.e,p,e.p,e.q,p.mod(e.p1),p.mod(e.q1),e.q.modInverse(e.p)),publicKey:l.rsa.setPublicKey(e.n,e.e)}}r=+new Date,u+=r-a,a=r}return null!==e.keys},l.rsa.generateKeyPair=function(e,t,n,o){if(1===arguments.length?"object"===typeof e?(n=e,e=void 0):"function"===typeof e&&(o=e,e=void 0):2===arguments.length?"number"===typeof e?"function"===typeof t?(o=t,t=void 0):"number"!==typeof t&&(n=t,t=void 0):(n=e,o=t,e=void 0,t=void 0):3===arguments.length&&("number"===typeof t?"function"===typeof n&&(o=n,n=void 0):(o=n,n=t,t=void 0)),n=n||{},void 0===e&&(e=n.bits||2048),void 0===t&&(t=n.e||65537),!r.options.usePureJavaScript&&!n.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(o){if(_("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,n){if(e)return o(e);o(null,{privateKey:l.privateKeyFromPem(n),publicKey:l.publicKeyFromPem(t)})}));if(E("generateKey")&&E("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:C(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return a.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){o(e)})).then((function(e){if(e){var t=l.privateKeyFromAsn1(i.fromDer(r.util.createBuffer(e)));o(null,{privateKey:t,publicKey:l.setRsaPublicKey(t.n,t.e)})}}));if(k("generateKey")&&k("exportKey")){var c=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:C(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(e){var t=e.target.result,n=a.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);n.oncomplete=function(e){var t=e.target.result,n=l.privateKeyFromAsn1(i.fromDer(r.util.createBuffer(t)));o(null,{privateKey:n,publicKey:l.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){o(e)}},void(c.onerror=function(e){o(e)})}}else if(_("generateKeyPairSync")){var u=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:l.privateKeyFromPem(u.privateKey),publicKey:l.publicKeyFromPem(u.publicKey)}}var d=l.rsa.createKeyPairGenerationState(e,t,n);if(!o)return l.rsa.stepKeyPairGenerationState(d,0),d.keys;w(d,n,o)},l.setRsaPublicKey=l.rsa.setPublicKey=function(e,t){var n={n:e,e:t,encrypt:function(e,t,o){if("string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,n){return y(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return r.pkcs1.encode_rsa_oaep(t,e,o)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"===typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var s=t.encode(e,n,!0);return l.rsa.encrypt(s,n,!0)},verify:function(e,t,o,s){"string"===typeof o?o=o.toUpperCase():void 0===o&&(o="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===o?o={verify:function(e,t){t=v(t,n,!0);var o=i.fromDer(t,{parseAllBytes:s._parseAllDigestBytes}),a={},l=[];if(!i.validate(o,f,a,l)){var c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw c.errors=l,c}var u=i.derToOid(a.algorithmIdentifier);if(u!==r.oids.md2&&u!==r.oids.md5&&u!==r.oids.sha1&&u!==r.oids.sha224&&u!==r.oids.sha256&&u!==r.oids.sha384&&u!==r.oids.sha512&&u!==r.oids["sha512-224"]&&u!==r.oids["sha512-256"]){c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw c.oid=u,c}if((u===r.oids.md2||u===r.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===a.digest}}:"NONE"!==o&&"NULL"!==o&&null!==o||(o={verify:function(e,t){return t=v(t,n,!0),e===t}});var a=l.rsa.decrypt(t,n,!0,!1);return o.verify(e,a,n.n.bitLength())}};return n},l.setRsaPrivateKey=l.rsa.setPrivateKey=function(e,t,n,o,s,i,a,c){var u={n:e,e:t,d:n,p:o,q:s,dP:i,dQ:a,qInv:c,decrypt:function(e,t,n){"string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var o=l.rsa.decrypt(e,u,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:v};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return r.pkcs1.decode_rsa_oaep(t,e,n)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(o,u,!1)},sign:function(e,t){var n=!1;"string"===typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:g},n=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},n=1);var r=t.encode(e,u.n.bitLength());return l.rsa.encrypt(r,u,n)}};return u},l.wrapRsaPrivateKey=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(0).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l.oids.rsaEncryption).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(e).getBytes())])},l.privateKeyFromAsn1=function(e){var t,n,s,a,c,h,p,f,g={},m=[];if(i.validate(e,u,g,m)&&(e=i.fromDer(r.util.createBuffer(g.privateKey))),g={},m=[],!i.validate(e,d,g,m)){var y=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw y.errors=m,y}return t=r.util.createBuffer(g.privateKeyModulus).toHex(),n=r.util.createBuffer(g.privateKeyPublicExponent).toHex(),s=r.util.createBuffer(g.privateKeyPrivateExponent).toHex(),a=r.util.createBuffer(g.privateKeyPrime1).toHex(),c=r.util.createBuffer(g.privateKeyPrime2).toHex(),h=r.util.createBuffer(g.privateKeyExponent1).toHex(),p=r.util.createBuffer(g.privateKeyExponent2).toHex(),f=r.util.createBuffer(g.privateKeyCoefficient).toHex(),l.setRsaPrivateKey(new o(t,16),new o(n,16),new o(s,16),new o(a,16),new o(c,16),new o(h,16),new o(p,16),new o(f,16))},l.privateKeyToAsn1=l.privateKeyToRSAPrivateKey=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(0).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.n)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.e)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.d)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.p)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.q)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.dP)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.dQ)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.qInv))])},l.publicKeyFromAsn1=function(e){var t={},n=[];if(i.validate(e,p,t,n)){var s=i.derToOid(t.publicKeyOid);if(s!==l.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=s,a}e=t.rsaPublicKey}if(n=[],!i.validate(e,h,t,n)){a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=n,a}var c=r.util.createBuffer(t.publicKeyModulus).toHex(),u=r.util.createBuffer(t.publicKeyExponent).toHex();return l.setRsaPublicKey(new o(c,16),new o(u,16))},l.publicKeyToAsn1=l.publicKeyToSubjectPublicKeyInfo=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l.oids.rsaEncryption).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,[l.publicKeyToRSAPublicKey(e)])])},l.publicKeyToRSAPublicKey=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.n)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,b(e.e))])}},137:function(e,t,n){var r=n(3832);n(8991),n(7116);var o=e.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=o,o.create=function(){i||a();var e=null,t=r.util.createBuffer(),n=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var n=o.messageLengthSize/4,s=0;s<n;++s)o.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(s,i){"utf8"===i&&(s=r.util.encodeUtf8(s));var a=s.length;o.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=o.fullMessageLength.length-1;c>=0;--c)o.fullMessageLength[c]+=a[1],a[1]=a[0]+(o.fullMessageLength[c]/4294967296>>>0),o.fullMessageLength[c]=o.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),l(e,n,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var i=r.util.createBuffer();i.putBytes(t.bytes());var a,c,u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,d=u&o.blockLength-1;i.putBytes(s.substr(0,o.blockLength-d));for(var h=8*o.fullMessageLength[0],p=0;p<o.fullMessageLength.length-1;++p)a=8*o.fullMessageLength[p+1],c=a/4294967296>>>0,h+=c,i.putInt32(h>>>0),h=a>>>0;i.putInt32(h);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};l(f,n,i);var g=r.util.createBuffer();return g.putInt32(f.h0),g.putInt32(f.h1),g.putInt32(f.h2),g.putInt32(f.h3),g.putInt32(f.h4),g},o};var s=null,i=!1;function a(){s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),i=!0}function l(e,t,n){var r,o,s,i,a,l,c,u,d=n.length();while(d>=64){for(o=e.h0,s=e.h1,i=e.h2,a=e.h3,l=e.h4,u=0;u<16;++u)r=n.getInt32(),t[u]=r,c=a^s&(i^a),r=(o<<5|o>>>27)+c+l+1518500249+r,l=a,a=i,i=(s<<30|s>>>2)>>>0,s=o,o=r;for(;u<20;++u)r=t[u-3]^t[u-8]^t[u-14]^t[u-16],r=r<<1|r>>>31,t[u]=r,c=a^s&(i^a),r=(o<<5|o>>>27)+c+l+1518500249+r,l=a,a=i,i=(s<<30|s>>>2)>>>0,s=o,o=r;for(;u<32;++u)r=t[u-3]^t[u-8]^t[u-14]^t[u-16],r=r<<1|r>>>31,t[u]=r,c=s^i^a,r=(o<<5|o>>>27)+c+l+1859775393+r,l=a,a=i,i=(s<<30|s>>>2)>>>0,s=o,o=r;for(;u<40;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,c=s^i^a,r=(o<<5|o>>>27)+c+l+1859775393+r,l=a,a=i,i=(s<<30|s>>>2)>>>0,s=o,o=r;for(;u<60;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,c=s&i|a&(s^i),r=(o<<5|o>>>27)+c+l+2400959708+r,l=a,a=i,i=(s<<30|s>>>2)>>>0,s=o,o=r;for(;u<80;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,c=s^i^a,r=(o<<5|o>>>27)+c+l+3395469782+r,l=a,a=i,i=(s<<30|s>>>2)>>>0,s=o,o=r;e.h0=e.h0+o|0,e.h1=e.h1+s|0,e.h2=e.h2+i|0,e.h3=e.h3+a|0,e.h4=e.h4+l|0,d-=64}}},1668:function(e,t,n){var r=n(3832);n(8991),n(7116);var o=e.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=o,o.create=function(){i||l();var e=null,t=r.util.createBuffer(),n=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var n=o.messageLengthSize/4,s=0;s<n;++s)o.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(s,i){"utf8"===i&&(s=r.util.encodeUtf8(s));var a=s.length;o.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=a[1],a[1]=a[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),c(e,n,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var i=r.util.createBuffer();i.putBytes(t.bytes());var a,l,u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,d=u&o.blockLength-1;i.putBytes(s.substr(0,o.blockLength-d));for(var h=8*o.fullMessageLength[0],p=0;p<o.fullMessageLength.length-1;++p)a=8*o.fullMessageLength[p+1],l=a/4294967296>>>0,h+=l,i.putInt32(h>>>0),h=a>>>0;i.putInt32(h);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(f,n,i);var g=r.util.createBuffer();return g.putInt32(f.h0),g.putInt32(f.h1),g.putInt32(f.h2),g.putInt32(f.h3),g.putInt32(f.h4),g.putInt32(f.h5),g.putInt32(f.h6),g.putInt32(f.h7),g},o};var s=null,i=!1,a=null;function l(){s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=!0}function c(e,t,n){var r,o,s,i,l,c,u,d,h,p,f,g,m,y,v,w=n.length();while(w>=64){for(u=0;u<16;++u)t[u]=n.getInt32();for(;u<64;++u)r=t[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,o=t[u-15],o=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[u]=r+t[u-7]+o+t[u-16]|0;for(d=e.h0,h=e.h1,p=e.h2,f=e.h3,g=e.h4,m=e.h5,y=e.h6,v=e.h7,u=0;u<64;++u)i=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=y^g&(m^y),s=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&h|p&(d^h),r=v+i+l+a[u]+t[u],o=s+c,v=y,y=m,m=g,g=f+r>>>0,f=p,p=h,h=d,d=r+o>>>0;e.h0=e.h0+d|0,e.h1=e.h1+h|0,e.h2=e.h2+p|0,e.h3=e.h3+f|0,e.h4=e.h4+g|0,e.h5=e.h5+m|0,e.h6=e.h6+y|0,e.h7=e.h7+v|0,w-=64}}},3219:function(e,t,n){var r=n(3832);n(8991),n(7116);var o=e.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=o;var s=r.sha384=r.sha512.sha384=r.sha512.sha384||{};s.create=function(){return o.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=s,r.sha512.sha256=r.sha512.sha256||{create:function(){return o.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return o.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,o.create=function(e){if(a||u(),"undefined"===typeof e&&(e="SHA-512"),!(e in c))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=c[e],n=null,o=r.util.createBuffer(),s=new Array(80),l=0;l<80;++l)s[l]=new Array(2);var h=64;switch(e){case"SHA-384":h=48;break;case"SHA-512/256":h=32;break;case"SHA-512/224":h=28;break}var p={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,s=0;s<e;++s)p.fullMessageLength.push(0);o=r.util.createBuffer(),n=new Array(t.length);for(s=0;s<t.length;++s)n[s]=t[s].slice(0);return p}};return p.start(),p.update=function(e,t){"utf8"===t&&(e=r.util.encodeUtf8(e));var i=e.length;p.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var a=p.fullMessageLength.length-1;a>=0;--a)p.fullMessageLength[a]+=i[1],i[1]=i[0]+(p.fullMessageLength[a]/4294967296>>>0),p.fullMessageLength[a]=p.fullMessageLength[a]>>>0,i[0]=i[1]/4294967296>>>0;return o.putBytes(e),d(n,s,o),(o.read>2048||0===o.length())&&o.compact(),p},p.digest=function(){var t=r.util.createBuffer();t.putBytes(o.bytes());var a,l,c=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize,u=c&p.blockLength-1;t.putBytes(i.substr(0,p.blockLength-u));for(var h=8*p.fullMessageLength[0],f=0;f<p.fullMessageLength.length-1;++f)a=8*p.fullMessageLength[f+1],l=a/4294967296>>>0,h+=l,t.putInt32(h>>>0),h=a>>>0;t.putInt32(h);var g=new Array(n.length);for(f=0;f<n.length;++f)g[f]=n[f].slice(0);d(g,s,t);var m,y=r.util.createBuffer();m="SHA-512"===e?g.length:"SHA-384"===e?g.length-2:g.length-4;for(f=0;f<m;++f)y.putInt32(g[f][0]),f===m-1&&"SHA-512/224"===e||y.putInt32(g[f][1]);return y},p};var i=null,a=!1,l=null,c=null;function u(){i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),128),l=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],c={},c["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function d(e,t,n){var r,o,s,i,a,c,u,d,h,p,f,g,m,y,v,w,b,S,_,E,k,C,I,A,T,R,x,O,N,P,D,U,L,B,M,F=n.length();while(F>=128){for(N=0;N<16;++N)t[N][0]=n.getInt32()>>>0,t[N][1]=n.getInt32()>>>0;for(;N<80;++N)U=t[N-2],P=U[0],D=U[1],r=((P>>>19|D<<13)^(D>>>29|P<<3)^P>>>6)>>>0,o=((P<<13|D>>>19)^(D<<3|P>>>29)^(P<<26|D>>>6))>>>0,B=t[N-15],P=B[0],D=B[1],s=((P>>>1|D<<31)^(P>>>8|D<<24)^P>>>7)>>>0,i=((P<<31|D>>>1)^(P<<24|D>>>8)^(P<<25|D>>>7))>>>0,L=t[N-7],M=t[N-16],D=o+L[1]+i+M[1],t[N][0]=r+L[0]+s+M[0]+(D/4294967296>>>0)>>>0,t[N][1]=D>>>0;for(m=e[0][0],y=e[0][1],v=e[1][0],w=e[1][1],b=e[2][0],S=e[2][1],_=e[3][0],E=e[3][1],k=e[4][0],C=e[4][1],I=e[5][0],A=e[5][1],T=e[6][0],R=e[6][1],x=e[7][0],O=e[7][1],N=0;N<80;++N)u=((k>>>14|C<<18)^(k>>>18|C<<14)^(C>>>9|k<<23))>>>0,d=((k<<18|C>>>14)^(k<<14|C>>>18)^(C<<23|k>>>9))>>>0,h=(T^k&(I^T))>>>0,p=(R^C&(A^R))>>>0,a=((m>>>28|y<<4)^(y>>>2|m<<30)^(y>>>7|m<<25))>>>0,c=((m<<4|y>>>28)^(y<<30|m>>>2)^(y<<25|m>>>7))>>>0,f=(m&v|b&(m^v))>>>0,g=(y&w|S&(y^w))>>>0,D=O+d+p+l[N][1]+t[N][1],r=x+u+h+l[N][0]+t[N][0]+(D/4294967296>>>0)>>>0,o=D>>>0,D=c+g,s=a+f+(D/4294967296>>>0)>>>0,i=D>>>0,x=T,O=R,T=I,R=A,I=k,A=C,D=E+o,k=_+r+(D/4294967296>>>0)>>>0,C=D>>>0,_=b,E=S,b=v,S=w,v=m,w=y,D=o+i,m=r+s+(D/4294967296>>>0)>>>0,y=D>>>0;D=e[0][1]+y,e[0][0]=e[0][0]+m+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+w,e[1][0]=e[1][0]+v+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+S,e[2][0]=e[2][0]+b+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+E,e[3][0]=e[3][0]+_+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+C,e[4][0]=e[4][0]+k+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+A,e[5][0]=e[5][0]+I+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+R,e[6][0]=e[6][0]+T+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+O,e[7][0]=e[7][0]+x+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,F-=128}}},7116:function(e,t,n){var r=n(3832),o=n(8807),s=e.exports=r.util=r.util||{};function i(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function a(e){if(this.data="",this.read=0,"string"===typeof e)this.data=e;else if(s.isArrayBuffer(e)||s.isArrayBufferView(e))if("undefined"!==typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(r){for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof a||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}(function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return s.nextTick=process.nextTick,void("function"===typeof setImmediate?s.setImmediate=setImmediate:s.setImmediate=s.nextTick);if("function"===typeof setImmediate)return s.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(s.nextTick=function(e){return setImmediate(e)});if(s.setImmediate=function(e){setTimeout(e,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var e="forge.setImmediate",t=[];function n(n){if(n.source===window&&n.data===e){n.stopPropagation();var r=t.slice();t.length=0,r.forEach((function(e){e()}))}}s.setImmediate=function(n){t.push(n),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",n,!0)}if("undefined"!==typeof MutationObserver){var r=Date.now(),o=!0,i=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(i,{attributes:!0});var a=s.setImmediate;s.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),a(e)):(t.push(e),1===t.length&&i.setAttribute("a",o=!o))}}s.nextTick=s.setImmediate})(),s.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,s.globalScope=function(){return s.isNodejs?n.g:"undefined"===typeof self?window:self}(),s.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer},s.isArrayBufferView=function(e){return e&&s.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},s.ByteBuffer=a,s.ByteStringBuffer=a;var l=4096;function c(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=s.isArrayBuffer(e),r=s.isArrayBufferView(e);if(n||r)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}s.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>l&&(this.data.substr(0,1),this._constructedStringLength=0)},s.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},s.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},s.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},s.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);var n=this.data;while(t>0)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},s.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},s.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(s.encodeUtf8(e))},s.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},s.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},s.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},s.ByteStringBuffer.prototype.putInt=function(e,t){i(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},s.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},s.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},s.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},s.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},s.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},s.ByteStringBuffer.prototype.getInt=function(e){i(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},s.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},s.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},s.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},s.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},s.ByteStringBuffer.prototype.copy=function(){var e=s.createBuffer(this.data);return e.read=this.read,e},s.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},s.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},s.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},s.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},s.ByteStringBuffer.prototype.toString=function(){return s.decodeUtf8(this.bytes())},s.DataBuffer=c,s.DataBuffer.prototype.length=function(){return this.write-this.read},s.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},s.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},s.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},s.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},s.DataBuffer.prototype.putBytes=function(e,t){if(s.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var o=new Uint8Array(this.data.buffer,this.write);return o.set(n),this.write+=r,this}if(s.isArrayBuffer(e)){n=new Uint8Array(e);this.accommodate(n.byteLength);o=new Uint8Array(this.data.buffer);return o.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof s.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&s.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);o=new Uint8Array(e.data.byteLength,this.write);return o.set(n),this.write+=n.byteLength,this}if(e instanceof s.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"===typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=s.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=s.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},s.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},s.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},s.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},s.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},s.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},s.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},s.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},s.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},s.DataBuffer.prototype.putInt=function(e,t){i(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},s.DataBuffer.prototype.putSignedInt=function(e,t){return i(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},s.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},s.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},s.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},s.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},s.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},s.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},s.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},s.DataBuffer.prototype.getInt=function(e){i(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},s.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},s.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},s.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},s.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},s.DataBuffer.prototype.copy=function(){return new s.DataBuffer(this)},s.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},s.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},s.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},s.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},s.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8","binary"===e||"raw"===e)return s.binary.raw.encode(t);if("hex"===e)return s.binary.hex.encode(t);if("base64"===e)return s.binary.base64.encode(t);if("utf8"===e)return s.text.utf8.decode(t);if("utf16"===e)return s.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},s.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=s.encodeUtf8(e)),new s.ByteBuffer(e)},s.fillString=function(e,t){var n="";while(t>0)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return n},s.xorBytes=function(e,t,n){for(var r="",o="",s="",i=0,a=0;n>0;--n,++i)o=e.charCodeAt(i)^t.charCodeAt(i),a>=10&&(r+=s,s="",a=0),s+=String.fromCharCode(o),++a;return r+=s,r},s.hexToBytes=function(e){var t="",n=0;for(!0&e.length&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},s.bytesToHex=function(e){return s.createBuffer(e).toHex()},s.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],h="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";s.encode64=function(e,t){var n,r,o,s="",i="",a=0;while(a<e.length)n=e.charCodeAt(a++),r=e.charCodeAt(a++),o=e.charCodeAt(a++),s+=u.charAt(n>>2),s+=u.charAt((3&n)<<4|r>>4),isNaN(r)?s+="==":(s+=u.charAt((15&r)<<2|o>>6),s+=isNaN(o)?"=":u.charAt(63&o)),t&&s.length>t&&(i+=s.substr(0,t)+"\r\n",s=s.substr(t));return i+=s,i},s.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var t,n,r,o,s="",i=0;while(i<e.length)t=d[e.charCodeAt(i++)-43],n=d[e.charCodeAt(i++)-43],r=d[e.charCodeAt(i++)-43],o=d[e.charCodeAt(i++)-43],s+=String.fromCharCode(t<<2|n>>4),64!==r&&(s+=String.fromCharCode((15&n)<<4|r>>2),64!==o&&(s+=String.fromCharCode((3&r)<<6|o)));return s},s.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},s.decodeUtf8=function(e){return decodeURIComponent(escape(e))},s.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},s.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},s.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var o=n,s=0;s<e.length;++s)r[o++]=e.charCodeAt(s);return t?o-n:r},s.binary.hex.encode=s.bytesToHex,s.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var o=0,s=n;for(1&e.length&&(o=1,r[s++]=parseInt(e[0],16));o<e.length;o+=2)r[s++]=parseInt(e.substr(o,2),16);return t?s-n:r},s.binary.base64.encode=function(e,t){var n,r,o,s="",i="",a=0;while(a<e.byteLength)n=e[a++],r=e[a++],o=e[a++],s+=u.charAt(n>>2),s+=u.charAt((3&n)<<4|r>>4),isNaN(r)?s+="==":(s+=u.charAt((15&r)<<2|o>>6),s+=isNaN(o)?"=":u.charAt(63&o)),t&&s.length>t&&(i+=s.substr(0,t)+"\r\n",s=s.substr(t));return i+=s,i},s.binary.base64.decode=function(e,t,n){var r,o,s,i,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;var l=0,c=n;while(l<e.length)r=d[e.charCodeAt(l++)-43],o=d[e.charCodeAt(l++)-43],s=d[e.charCodeAt(l++)-43],i=d[e.charCodeAt(l++)-43],a[c++]=r<<2|o>>4,64!==s&&(a[c++]=(15&o)<<4|s>>2,64!==i&&(a[c++]=(3&s)<<6|i));return t?c-n:a.subarray(0,c)},s.binary.base58.encode=function(e,t){return s.binary.baseN.encode(e,h,t)},s.binary.base58.decode=function(e,t){return s.binary.baseN.decode(e,h,t)},s.text={utf8:{},utf16:{}},s.text.utf8.encode=function(e,t,n){e=s.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var o=n,i=0;i<e.length;++i)r[o++]=e.charCodeAt(i);return t?o-n:r},s.text.utf8.decode=function(e){return s.decodeUtf8(String.fromCharCode.apply(null,e))},s.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(2*e.length));var o=new Uint16Array(r.buffer);n=n||0;for(var s=n,i=n,a=0;a<e.length;++a)o[i++]=e.charCodeAt(a),s+=2;return t?s-n:r},s.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},s.deflate=function(e,t,n){if(t=s.decode64(e.deflate(s.encode64(t)).rval),n){var r=2,o=t.charCodeAt(1);32&o&&(r=6),t=t.substring(r,t.length-4)}return t},s.inflate=function(e,t,n){var r=e.inflate(s.encode64(t)).rval;return null===r?null:s.decode64(r)};var p=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(null===n?r=e.removeItem(t):(n=s.encode64(JSON.stringify(n)),r=e.setItem(t,n)),"undefined"!==typeof r&&!0!==r.rval){var o=new Error(r.error.message);throw o.id=r.error.id,o.name=r.error.name,o}},f=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(s.decode64(n))),n},g=function(e,t,n,r){var o=f(e,t);null===o&&(o={}),o[n]=r,p(e,t,o)},m=function(e,t,n){var r=f(e,t);return null!==r&&(r=n in r?r[n]:null),r},y=function(e,t,n){var r=f(e,t);if(null!==r&&n in r){delete r[n];var o=!0;for(var s in r){o=!1;break}o&&(r=null),p(e,t,r)}},v=function(e,t){p(e,t,null)},w=function(e,t,n){var r,o=null;"undefined"===typeof n&&(n=["web","flash"]);var s=!1,i=null;for(var a in n){r=n[a];try{if("flash"===r||"both"===r){if(null===t[0])throw new Error("Flash local storage not available.");o=e.apply(this,t),s="flash"===r}"web"!==r&&"both"!==r||(t[0]=localStorage,o=e.apply(this,t),s=!0)}catch(l){i=l}if(s)break}if(!s)throw i;return o};s.setItem=function(e,t,n,r,o){w(g,arguments,o)},s.getItem=function(e,t,n,r){return w(m,arguments,r)},s.removeItem=function(e,t,n,r){w(y,arguments,r)},s.clearItems=function(e,t,n){w(v,arguments,n)},s.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},s.format=function(e){var t,n,r=/%./g,o=0,s=[],i=0;while(t=r.exec(e)){n=e.substring(i,r.lastIndex-2),n.length>0&&s.push(n),i=r.lastIndex;var a=t[0][1];switch(a){case"s":case"o":o<arguments.length?s.push(arguments[1+o++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(i)),s.join("")},s.formatNumber=function(e,t,n,r){var o=e,s=isNaN(t=Math.abs(t))?2:t,i=void 0===n?",":n,a=void 0===r?".":r,l=o<0?"-":"",c=parseInt(o=Math.abs(+o||0).toFixed(s),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?i+Math.abs(o-c).toFixed(s).slice(2):"")},s.formatSize=function(e){return e=e>=1073741824?s.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?s.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?s.formatNumber(e/1024,0)+" KiB":s.formatNumber(e,0)+" bytes",e},s.bytesFromIP=function(e){return-1!==e.indexOf(".")?s.bytesFromIPv4(e):-1!==e.indexOf(":")?s.bytesFromIPv6(e):null},s.bytesFromIPv4=function(e){if(e=e.split("."),4!==e.length)return null;for(var t=s.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()},s.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}));for(var n=2*(8-e.length+t),r=s.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var i=s.hexToBytes(e[o]);i.length<2&&r.putByte(0),r.putBytes(i)}else r.fillWithByte(0,n),n=0;return r.getBytes()},s.bytesToIP=function(e){return 4===e.length?s.bytesToIPv4(e):16===e.length?s.bytesToIPv6(e):null},s.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},s.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],r=0,o=0;o<e.length;o+=2){var i=s.bytesToHex(e[o]+e[o+1]);while("0"===i[0]&&"0"!==i)i=i.substr(1);if("0"===i){var a=n[n.length-1],l=t.length;a&&l===a.end+1?(a.end=l,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:l,end:l})}t.push(i)}if(n.length>0){var c=n[r];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),0===c.start&&t.unshift(""),7===c.end&&t.push(""))}return t.join(":")},s.estimateCores=function(e,t){if("function"===typeof e&&(t=e,e={}),e=e||{},"cores"in s&&!e.update)return t(null,s.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return s.cores=navigator.hardwareConcurrency,t(null,s.cores);if("undefined"===typeof Worker)return s.cores=1,t(null,s.cores);if("undefined"===typeof Blob)return s.cores=2,t(null,s.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){var t=Date.now(),n=t+4;while(Date.now()<n);self.postMessage({st:t,et:n})}))}.toString(),")()"],{type:"application/javascript"}));function r(e,a,l){if(0===a){var c=Math.floor(e.reduce((function(e,t){return e+t}),0)/e.length);return s.cores=Math.max(1,c),URL.revokeObjectURL(n),t(null,s.cores)}o(l,(function(t,n){e.push(i(l,n)),r(e,a-1,l)}))}function o(e,t){for(var r=[],o=[],s=0;s<e;++s){var i=new Worker(n);i.addEventListener("message",(function(n){if(o.push(n.data),o.length===e){for(var s=0;s<e;++s)r[s].terminate();t(null,o)}})),r.push(i)}for(s=0;s<e;++s)r[s].postMessage(s)}function i(e,t){for(var n=[],r=0;r<e;++r)for(var o=t[r],s=n[r]=[],i=0;i<e;++i)if(r!==i){var a=t[i];(o.st>a.st&&o.st<a.et||a.st>o.st&&a.st<o.et)&&s.push(i)}return n.reduce((function(e,t){return Math.max(e,t.length)}),0)}r([],5,16)}},5414:function(e,t,n){var r=n(3832);n(8925),n(3068),n(3480),n(8991),n(6971),n(6270),n(6953),n(6007),n(8095),n(7116);var o=r.asn1,s=e.exports=r.pki=r.pki||{},i=s.oids,a={};a["CN"]=i["commonName"],a["commonName"]="CN",a["C"]=i["countryName"],a["countryName"]="C",a["L"]=i["localityName"],a["localityName"]="L",a["ST"]=i["stateOrProvinceName"],a["stateOrProvinceName"]="ST",a["O"]=i["organizationName"],a["organizationName"]="O",a["OU"]=i["organizationalUnitName"],a["organizationalUnitName"]="OU",a["E"]=i["emailAddress"],a["emailAddress"]="E";var l=r.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},l,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},u={name:"rsapss",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},d={name:"CertificationRequestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},l,{name:"CertificationRequestInfo.attributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0}]}]}]},h={name:"CertificationRequest",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[d,{name:"CertificationRequest.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function p(e,t){"string"===typeof t&&(t={shortName:t});for(var n,r=null,o=0;null===r&&o<e.attributes.length;++o)n=e.attributes[o],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}s.RDNAttributesAsArray=function(e,t){for(var n,r,s,l=[],c=0;c<e.value.length;++c){n=e.value[c];for(var u=0;u<n.value.length;++u)s={},r=n.value[u],s.type=o.derToOid(r.value[0].value),s.value=r.value[1].value,s.valueTagClass=r.value[1].type,s.type in i&&(s.name=i[s.type],s.name in a&&(s.shortName=a[s.name])),t&&(t.update(s.type),t.update(s.value)),l.push(s)}return l},s.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],l=o.derToOid(r.value[0].value),c=r.value[1].value,u=0;u<c.length;++u){var d={};if(d.type=l,d.value=c[u].value,d.valueTagClass=c[u].type,d.type in i&&(d.name=i[d.type],d.name in a&&(d.shortName=a[d.name])),d.type===i.extensionRequest){d.extensions=[];for(var h=0;h<d.value.length;++h)d.extensions.push(s.certificateExtensionFromAsn1(d.value[h]))}t.push(d)}return t};var f=function(e,t,n){var r={};if(e!==i["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:i["sha1"]},mgf:{algorithmOid:i["mgf1"],hash:{algorithmOid:i["sha1"]}},saltLength:20});var s={},a=[];if(!o.validate(t,u,s,a)){var l=new Error("Cannot read RSASSA-PSS parameter block.");throw l.errors=a,l}return void 0!==s.hashOid&&(r.hash=r.hash||{},r.hash.algorithmOid=o.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=o.derToOid(s.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=o.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(r.saltLength=s.saltLength.charCodeAt(0)),r},g=function(e){switch(i[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return r.md.sha1.create();case"md5WithRSAEncryption":return r.md.md5.create();case"sha256WithRSAEncryption":return r.md.sha256.create();case"sha384WithRSAEncryption":return r.md.sha384.create();case"sha512WithRSAEncryption":return r.md.sha512.create();case"RSASSA-PSS":return r.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},m=function(e){var t,n=e.certificate;switch(n.signatureOid){case i.sha1WithRSAEncryption:case i.sha1WithRSASignature:break;case i["RSASSA-PSS"]:var o,s;if(o=i[n.signatureParameters.mgf.hash.algorithmOid],void 0===o||void 0===r.md[o]){var a=new Error("Unsupported MGF hash function.");throw a.oid=n.signatureParameters.mgf.hash.algorithmOid,a.name=o,a}if(s=i[n.signatureParameters.mgf.algorithmOid],void 0===s||void 0===r.mgf[s]){a=new Error("Unsupported MGF function.");throw a.oid=n.signatureParameters.mgf.algorithmOid,a.name=s,a}if(s=r.mgf[s].create(r.md[o].create()),o=i[n.signatureParameters.hash.algorithmOid],void 0===o||void 0===r.md[o]){a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=n.signatureParameters.hash.algorithmOid,a.name=o,a}t=r.pss.create(r.md[o].create(),s,n.signatureParameters.saltLength);break}return n.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function y(e){for(var t,n,s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),i=e.attributes,a=0;a<i.length;++a){t=i[a];var l=t.value,c=o.Type.PRINTABLESTRING;"valueTagClass"in t&&(c=t.valueTagClass,c===o.Type.UTF8&&(l=r.util.encodeUtf8(l))),n=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.UNIVERSAL,c,!1,l)])]),s.value.push(n)}return s}function v(e){for(var t,n=0;n<e.length;++n){if(t=e[n],"undefined"===typeof t.name&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in a&&(t.name=s.oids[a[t.shortName]])),"undefined"===typeof t.type){if(!t.name||!(t.name in s.oids)){var r=new Error("Attribute type not specified.");throw r.attribute=t,r}t.type=s.oids[t.name]}if("undefined"===typeof t.shortName&&t.name&&t.name in a&&(t.shortName=a[t.name]),t.type===i.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=o.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var l=0;l<t.extensions.length;++l)t.value.push(s.certificateExtensionToAsn1(w(t.extensions[l])))}if("undefined"===typeof t.value){r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function w(e,t){if(t=t||{},"undefined"===typeof e.name&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]),"undefined"===typeof e.id){if(!e.name||!(e.name in s.oids)){var n=new Error("Extension ID not specified.");throw n.extension=e,n}e.id=s.oids[e.name]}if("undefined"!==typeof e.value)return e;if("keyUsage"===e.name){var a=0,l=0,c=0;e.digitalSignature&&(l|=128,a=7),e.nonRepudiation&&(l|=64,a=6),e.keyEncipherment&&(l|=32,a=5),e.dataEncipherment&&(l|=16,a=4),e.keyAgreement&&(l|=8,a=3),e.keyCertSign&&(l|=4,a=2),e.cRLSign&&(l|=2,a=1),e.encipherOnly&&(l|=1,a=0),e.decipherOnly&&(c|=128,a=7);var u=String.fromCharCode(a);0!==c?u+=String.fromCharCode(l)+String.fromCharCode(c):0!==l&&(u+=String.fromCharCode(l)),e.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var d=e.value.value;for(var h in e)!0===e[h]&&(h in i?d.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i[h]).getBytes())):-1!==h.indexOf(".")&&d.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(h).getBytes())))}else if("nsCertType"===e.name){a=0,l=0;e.client&&(l|=128,a=7),e.server&&(l|=64,a=6),e.email&&(l|=32,a=5),e.objsign&&(l|=16,a=4),e.reserved&&(l|=8,a=3),e.sslCA&&(l|=4,a=2),e.emailCA&&(l|=2,a=1),e.objCA&&(l|=1,a=0);u=String.fromCharCode(a);0!==l&&(u+=String.fromCharCode(l)),e.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,u)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var p=0;p<e.altNames.length;++p){w=e.altNames[p];u=w.value;if(7===w.type&&w.ip){if(u=r.util.bytesFromIP(w.ip),null===u){n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else 8===w.type&&(u=w.oid?o.oidToDer(o.oidToDer(w.oid)):o.oidToDer(u));e.value.value.push(o.create(o.Class.CONTEXT_SPECIFIC,w.type,!1,u))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=o.create(o.Class.UNIVERSAL,o.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);d=e.value.value;if(e.keyIdentifier){var g=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;d.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!1,g))}if(e.authorityCertIssuer){var m=[o.create(o.Class.CONTEXT_SPECIFIC,4,!0,[y(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];d.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,m))}if(e.serialNumber){var v=r.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);d.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!1,v))}}else if("cRLDistributionPoints"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);d=e.value.value;var w,b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),S=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<e.altNames.length;++p){w=e.altNames[p];u=w.value;if(7===w.type&&w.ip){if(u=r.util.bytesFromIP(w.ip),null===u){n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else 8===w.type&&(u=w.oid?o.oidToDer(o.oidToDer(w.oid)):o.oidToDer(u));S.value.push(o.create(o.Class.CONTEXT_SPECIFIC,w.type,!1,u))}b.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[S])),d.push(b)}if("undefined"===typeof e.value){n=new Error("Extension value not specified.");throw n.extension=e,n}return e}function b(e,t){switch(e){case i["RSASSA-PSS"]:var n=[];return void 0!==t.hash.algorithmOid&&n.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&n.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&n.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.saltLength).getBytes())])),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,n);default:return o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")}}function S(e){var t=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var n=e.attributes,s=0;s<n.length;++s){var i=n[s],a=i.value,l=o.Type.UTF8;"valueTagClass"in i&&(l=i.valueTagClass),l===o.Type.UTF8&&(a=r.util.encodeUtf8(a));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var u=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,l,c,a)])]);t.value.push(u)}return t}s.certificateFromPem=function(e,t,n){var i=r.pem.decode(e)[0];if("CERTIFICATE"!==i.type&&"X509 CERTIFICATE"!==i.type&&"TRUSTED CERTIFICATE"!==i.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=i.type,a}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=o.fromDer(i.body,n);return s.certificateFromAsn1(l,t)},s.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:o.toDer(s.certificateToAsn1(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.publicKeyFromPem=function(e){var t=r.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var i=o.fromDer(t.body);return s.publicKeyFromAsn1(i)},s.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:o.toDer(s.publicKeyToAsn1(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:o.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){t=t||{};var n,i=t.md||r.md.sha1.create(),a=t.type||"RSAPublicKey";switch(a){case"RSAPublicKey":n=o.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":n=o.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}i.start(),i.update(n);var l=i.digest();if("hex"===t.encoding){var c=l.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return l.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return l},s.certificationRequestFromPem=function(e,t,n){var i=r.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==i.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=i.type,a}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var l=o.fromDer(i.body,n);return s.certificationRequestFromAsn1(l,t)},s.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:o.toDer(s.certificationRequestToAsn1(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return p(e.issuer,t)},e.issuer.addField=function(t){v([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){v([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){v(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){v(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)w(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){"string"===typeof t&&(t={name:t});for(var n,r=null,o=0;null===r&&o<e.extensions.length;++o)n=e.extensions[o],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,n){e.md=n||r.md.sha1.create();var a=i[e.md.algorithm+"WithRSAEncryption"];if(!a){var l=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw l.algorithm=e.md.algorithm,l}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=s.getTBSCertificate(e);var c=o.toDer(e.tbsCertificate);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var r=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=r.attributes,a}var l=t.md;if(null===l){l=g({signatureOid:t.signatureOid,type:"certificate"});var c=t.tbsCertificate||s.getTBSCertificate(t),u=o.toDer(c);l.update(u.getBytes())}return null!==l&&(n=m({certificate:e,md:l,signature:t.signature})),n},e.isIssuer=function(t){var n=!1,r=e.issuer,o=t.subject;if(r.hash&&o.hash)n=r.hash===o.hash;else if(r.attributes.length===o.attributes.length){var s,i;n=!0;for(var a=0;n&&a<r.attributes.length;++a)s=r.attributes[a],i=o.attributes[a],s.type===i.type&&s.value===i.value||(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=i["subjectKeyIdentifier"],n=0;n<e.extensions.length;++n){var o=e.extensions[n];if(o.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(o.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var n={},i=[];if(!o.validate(e,c,n,i)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=i,a}var l=o.derToOid(n.publicKeyOid);if(l!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=s.createCertificate();u.version=n.certVersion?n.certVersion.charCodeAt(0):0;var d=r.util.createBuffer(n.certSerialNumber);u.serialNumber=d.toHex(),u.signatureOid=r.asn1.derToOid(n.certSignatureOid),u.signatureParameters=f(u.signatureOid,n.certSignatureParams,!0),u.siginfo.algorithmOid=r.asn1.derToOid(n.certinfoSignatureOid),u.siginfo.parameters=f(u.siginfo.algorithmOid,n.certinfoSignatureParams,!1),u.signature=n.certSignature;var h=[];if(void 0!==n.certValidity1UTCTime&&h.push(o.utcTimeToDate(n.certValidity1UTCTime)),void 0!==n.certValidity2GeneralizedTime&&h.push(o.generalizedTimeToDate(n.certValidity2GeneralizedTime)),void 0!==n.certValidity3UTCTime&&h.push(o.utcTimeToDate(n.certValidity3UTCTime)),void 0!==n.certValidity4GeneralizedTime&&h.push(o.generalizedTimeToDate(n.certValidity4GeneralizedTime)),h.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(h.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=h[0],u.validity.notAfter=h[1],u.tbsCertificate=n.tbsCertificate,t){u.md=g({signatureOid:u.signatureOid,type:"certificate"});var m=o.toDer(u.tbsCertificate);u.md.update(m.getBytes())}var y=r.md.sha1.create(),w=o.toDer(n.certIssuer);y.update(w.getBytes()),u.issuer.getField=function(e){return p(u.issuer,e)},u.issuer.addField=function(e){v([e]),u.issuer.attributes.push(e)},u.issuer.attributes=s.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(u.issuer.uniqueId=n.certIssuerUniqueId),u.issuer.hash=y.digest().toHex();var b=r.md.sha1.create(),S=o.toDer(n.certSubject);return b.update(S.getBytes()),u.subject.getField=function(e){return p(u.subject,e)},u.subject.addField=function(e){v([e]),u.subject.attributes.push(e)},u.subject.attributes=s.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(u.subject.uniqueId=n.certSubjectUniqueId),u.subject.hash=b.digest().toHex(),n.certExtensions?u.extensions=s.certificateExtensionsFromAsn1(n.certExtensions):u.extensions=[],u.publicKey=s.publicKeyFromAsn1(n.subjectPublicKeyInfo),u},s.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var r=e.value[n],o=0;o<r.value.length;++o)t.push(s.certificateExtensionFromAsn1(r.value[o]));return t},s.certificateExtensionFromAsn1=function(e){var t={};if(t.id=o.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===o.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in i)if(t.name=i[t.id],"keyUsage"===t.name){var n=o.fromDer(t.value),s=0,a=0;n.value.length>1&&(s=n.value.charCodeAt(1),a=n.value.length>2?n.value.charCodeAt(2):0),t.digitalSignature=128===(128&s),t.nonRepudiation=64===(64&s),t.keyEncipherment=32===(32&s),t.dataEncipherment=16===(16&s),t.keyAgreement=8===(8&s),t.keyCertSign=4===(4&s),t.cRLSign=2===(2&s),t.encipherOnly=1===(1&s),t.decipherOnly=128===(128&a)}else if("basicConstraints"===t.name){n=o.fromDer(t.value);n.value.length>0&&n.value[0].type===o.Type.BOOLEAN?t.cA=0!==n.value[0].value.charCodeAt(0):t.cA=!1;var l=null;n.value.length>0&&n.value[0].type===o.Type.INTEGER?l=n.value[0].value:n.value.length>1&&(l=n.value[1].value),null!==l&&(t.pathLenConstraint=o.derToInteger(l))}else if("extKeyUsage"===t.name){n=o.fromDer(t.value);for(var c=0;c<n.value.length;++c){var u=o.derToOid(n.value[c].value);u in i?t[i[u]]=!0:t[u]=!0}}else if("nsCertType"===t.name){n=o.fromDer(t.value),s=0;n.value.length>1&&(s=n.value.charCodeAt(1)),t.client=128===(128&s),t.server=64===(64&s),t.email=32===(32&s),t.objsign=16===(16&s),t.reserved=8===(8&s),t.sslCA=4===(4&s),t.emailCA=2===(2&s),t.objCA=1===(1&s)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var d;t.altNames=[];n=o.fromDer(t.value);for(var h=0;h<n.value.length;++h){d=n.value[h];var p={type:d.type,value:d.value};switch(t.altNames.push(p),d.type){case 1:case 2:case 6:break;case 7:p.ip=r.util.bytesToIP(d.value);break;case 8:p.oid=o.derToOid(d.value);break;default:}}}else if("subjectKeyIdentifier"===t.name){n=o.fromDer(t.value);t.subjectKeyIdentifier=r.util.bytesToHex(n.value)}return t},s.certificationRequestFromAsn1=function(e,t){var n={},i=[];if(!o.validate(e,h,n,i)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=i,a}var l=o.derToOid(n.publicKeyOid);if(l!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificationRequest();if(c.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,c.signatureOid=r.asn1.derToOid(n.csrSignatureOid),c.signatureParameters=f(c.signatureOid,n.csrSignatureParams,!0),c.siginfo.algorithmOid=r.asn1.derToOid(n.csrSignatureOid),c.siginfo.parameters=f(c.siginfo.algorithmOid,n.csrSignatureParams,!1),c.signature=n.csrSignature,c.certificationRequestInfo=n.certificationRequestInfo,t){c.md=g({signatureOid:c.signatureOid,type:"certification request"});var u=o.toDer(c.certificationRequestInfo);c.md.update(u.getBytes())}var d=r.md.sha1.create();return c.subject.getField=function(e){return p(c.subject,e)},c.subject.addField=function(e){v([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(n.certificationRequestInfoSubject,d),c.subject.hash=d.digest().toHex(),c.publicKey=s.publicKeyFromAsn1(n.subjectPublicKeyInfo),c.getAttribute=function(e){return p(c,e)},c.addAttribute=function(e){v([e]),c.attributes.push(e)},c.attributes=s.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),c},s.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){v([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return p(e,t)},e.addAttribute=function(t){v([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){v(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){v(t),e.attributes=t},e.sign=function(t,n){e.md=n||r.md.sha1.create();var a=i[e.md.algorithm+"WithRSAEncryption"];if(!a){var l=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw l.algorithm=e.md.algorithm,l}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var c=o.toDer(e.certificationRequestInfo);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(null===n){n=g({signatureOid:e.signatureOid,type:"certification request"});var r=e.certificationRequestInfo||s.getCertificationRequestInfo(e),i=o.toDer(r);n.update(i.getBytes())}return null!==n&&(t=m({certificate:e,md:n,signature:e.signature})),t},e};var _=new Date("1950-01-01T00:00:00Z"),E=new Date("2050-01-01T00:00:00Z");function k(e){return e>=_&&e<E?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(e)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(e))}s.getTBSCertificate=function(e){var t=k(e.validity.notBefore),n=k(e.validity.notAfter),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.siginfo.algorithmOid).getBytes()),b(e.siginfo.algorithmOid,e.siginfo.parameters)]),y(e.issuer),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,n]),y(e.subject),s.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&i.value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&i.value.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&i.value.push(s.certificateExtensionsToAsn1(e.extensions)),i},s.getCertificationRequestInfo=function(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),y(e.subject),s.publicKeyToAsn1(e.publicKey),S(e)]);return t},s.distinguishedNameToAsn1=function(e){return y(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=o.create(o.Class.CONTEXT_SPECIFIC,3,!0,[]),n=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(s.certificateExtensionToAsn1(e[r]));return t},s.certificateExtensionToAsn1=function(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.id).getBytes())),e.critical&&t.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return"string"!==typeof e.value&&(n=o.toDer(n).getBytes()),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,n)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){var t={certs:{}};function n(e){return i(e),t.certs[e.hash]||null}function i(e){if(!e.hash){var t=r.md.sha1.create();e.attributes=s.RDNAttributesAsArray(y(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){var t=n(e.issuer);return t},t.addCertificate=function(e){if("string"===typeof e&&(e=r.pki.certificateFromPem(e)),i(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var n=t.certs[e.subject.hash];r.util.isArray(n)||(n=[n]),n.push(e),t.certs[e.subject.hash]=n}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"===typeof e&&(e=r.pki.certificateFromPem(e));var t=n(e.subject);if(!t)return!1;r.util.isArray(t)||(t=[t]);for(var i=o.toDer(s.certificateToAsn1(e)).getBytes(),a=0;a<t.length;++a){var l=o.toDer(s.certificateToAsn1(t[a])).getBytes();if(i===l)return!0}return!1},t.listAllCertificates=function(){var e=[];for(var n in t.certs)if(t.certs.hasOwnProperty(n)){var o=t.certs[n];if(r.util.isArray(o))for(var s=0;s<o.length;++s)e.push(o[s]);else e.push(o)}return e},t.removeCertificate=function(e){var a;if("string"===typeof e&&(e=r.pki.certificateFromPem(e)),i(e.subject),!t.hasCertificate(e))return null;var l=n(e.subject);if(!r.util.isArray(l))return a=t.certs[e.subject.hash],delete t.certs[e.subject.hash],a;for(var c=o.toDer(s.certificateToAsn1(e)).getBytes(),u=0;u<l.length;++u){var d=o.toDer(s.certificateToAsn1(l[u])).getBytes();c===d&&(a=l[u],l.splice(u,1))}return 0===l.length&&delete t.certs[e.subject.hash],a},e)for(var a=0;a<e.length;++a){var l=e[a];t.addCertificate(l)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,n){"function"===typeof n&&(n={verify:n}),n=n||{},t=t.slice(0);var o=t.slice(0),i=n.validityCheckDate;"undefined"===typeof i&&(i=new Date);var a=!0,l=null,c=0;do{var u=t.shift(),d=null,h=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(l={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),null===l){if(d=t[0]||e.getIssuer(u),null===d&&u.isIssuer(u)&&(h=!0,d=u),d){var p=d;r.util.isArray(p)||(p=[p]);var f=!1;while(!f&&p.length>0){d=p.shift();try{f=d.verify(u)}catch(E){}}f||(l={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==l||d&&!h||e.hasCertificate(u)||(l={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===l&&d&&!u.isIssuer(d)&&(l={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===l)for(var g={keyUsage:!0,basicConstraints:!0},m=0;null===l&&m<u.extensions.length;++m){var y=u.extensions[m];y.critical&&!(y.name in g)&&(l={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===l&&(!a||0===t.length&&(!d||h))){var v=u.getExtension("basicConstraints"),w=u.getExtension("keyUsage");if(null!==w&&(w.keyCertSign&&null!==v||(l={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==l||null===v||v.cA||(l={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===l&&null!==w&&"pathLenConstraint"in v){var b=c-1;b>v.pathLenConstraint&&(l={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}}var S=null===l||l.error,_=n.verify?n.verify(S,c,o):S;if(!0!==_)throw!0===S&&(l={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(_||0===_)&&("object"!==typeof _||r.util.isArray(_)?"string"===typeof _&&(l.error=_):(_.message&&(l.message=_.message),_.error&&(l.error=_.error))),l;l=null,a=!1,++c}while(t.length>0);return!0}},5103:function(e,t,n){const r=n(1607),o=n(603);e.exports=class{constructor(){this._buffer=new r,this._waitingConsumers=new r}push(e){const{promise:t,resolve:n}=o();return this._buffer.push({chunk:e,resolve:n}),this._consume(),t}_consume(){while(!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty()){const e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}shift(){const{promise:e,resolve:t}=o();return this._waitingConsumers.push({resolve:t}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}},603:function(e){"use strict";const t=()=>{const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e};e.exports=t},2100:function(e,t,n){"use strict";e.exports=n(9482)},9482:function(e,t,n){"use strict";var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=o,o()},1408:function(e,t,n){"use strict";e.exports=l;var r,o=n(9693),s=o.LongBits,i=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},u=function(){return o.Buffer?function(e){return(l.create=function(e){return o.Buffer.isBuffer(e)?new r(e):c(e)})(e)}:c};function d(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=u(),l.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,l.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},l.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},l.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(e=7&this.uint32()))this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){r=e,l.create=u(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},593:function(e,t,n){"use strict";e.exports=s;var r=n(1408);(s.prototype=Object.create(r.prototype)).constructor=s;var o=n(9693);function s(e){r.call(this,e)}s._configure=function(){o.Buffer&&(s.prototype._slice=o.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},5054:function(e){"use strict";e.exports={}},5994:function(e,t,n){"use strict";var r=t;r.Service=n(7948)},7948:function(e,t,n){"use strict";e.exports=o;var r=n(9693);function o(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,n,o,s,i){if(!s)throw TypeError("request must be specified");var a=this;if(!i)return r.asPromise(e,a,t,n,o,s);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,n){if(e)return a.emit("error",e,t),i(e);if(null!==n){if(!(n instanceof o))try{n=o[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",n,t),i(null,n)}a.end(!0)}))}catch(l){return a.emit("error",l,t),void setTimeout((function(){i(l)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(e,t,n){"use strict";e.exports=o;var r=n(9693);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=o.zero=new o(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(e){if("number"===typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):s},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===i?s:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},9693:function(e,t,n){"use strict";var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function s(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"===typeof e||e instanceof String},r.isObject=function(e){return e&&"object"===typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"===typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=s,r.ProtocolError=s("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:function(e,t,n){"use strict";e.exports=d;var r,o=n(9693),s=o.LongBits,i=o.base64,a=o.utf8;function l(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return o.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function p(e,t,n){t[n]=255&e}function f(e,t,n){while(e>127)t[n++]=127&e|128,e>>>=7;t[n]=e}function g(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){while(e.hi)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;while(e.lo>127)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function y(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(d.alloc=o.pool(d.alloc,o.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new l(e,t,n),this.len+=t,this},g.prototype=Object.create(l.prototype),g.prototype.fn=f,d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new g((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var v=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(o.isString(e)){var n=d.alloc(t=i.length(e));i.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){var e=this.head.next,t=this.constructor.alloc(this.len),n=0;while(e)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=h(),r._configure()}},3155:function(e,t,n){"use strict";e.exports=s;var r=n(1173);(s.prototype=Object.create(r.prototype)).constructor=s;var o=n(9693);function s(){r.call(this)}function i(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}s._configure=function(){s.alloc=o._Buffer_allocUnsafe,s.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},s.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},s._configure()},4375:function(e,t,n){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let r;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},3286:function(e,t,n){const{instantiate:r}=n(9824);function o(e={}){if(!o.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([t],{type:"application/wasm"})),e)}o.supported="undefined"!==typeof WebAssembly,e.exports=o},3060:function(e,t,n){const r=n(7118),o=n(3286),s=async(e,t,n,s,i)=>{const a=await o();return new r(a,e,t,n,s,i)};e.exports={Rabin:r,create:s}},7118:function(e){class t{constructor(e,t=12,n=8192,r=32768,o=64,s){this.bits=t,this.min=n,this.max=r,this.asModule=e,this.rabin=new e.Rabin(t,n,r,o,s),this.polynomial=s}fingerprint(e){const{__retain:t,__release:n,__allocArray:r,__getInt32Array:o,Int32Array_ID:s,Uint8Array_ID:i}=this.asModule,a=new Int32Array(Math.ceil(e.length/this.min)),l=t(r(s,a)),c=t(r(i,e)),u=this.rabin.fingerprint(c,l),d=o(u);n(c),n(l);const h=d.indexOf(0);return h>=0?d.subarray(0,h):d}}e.exports=t},1798:function(e,t,n){"use strict";var r=65536,o=4294967295;function s(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var i=n(9509).Buffer,a=n.g.crypto||n.g.msCrypto;function l(e,t){if(e>o)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(e>0)if(e>r)for(var s=0;s<e;s+=r)a.getRandomValues(n.slice(s,s+r));else a.getRandomValues(n);return"function"===typeof t?process.nextTick((function(){t(null,n)})):n}a&&a.getRandomValues?e.exports=l:e.exports=s},8558:function(e,t,n){const r=n(4636),o=n(1391),s=n(4156),i=n(4832),{RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:l,RateLimiterCluster:c}=n(1713),u=n(2288),d=n(5105),h=n(911),p=n(3766),f=n(8686),g=n(3328),m=n(5155);e.exports={RateLimiterRedis:r,RateLimiterMongo:o,RateLimiterMySQL:s,RateLimiterPostgres:i,RateLimiterMemory:u,RateLimiterMemcache:d,RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:l,RateLimiterCluster:c,RLWrapperBlackAndWhite:h,RateLimiterUnion:p,RateLimiterQueue:f,BurstyRateLimiter:g,RateLimiterRes:m}},3328:function(e,t,n){const r=n(5155);e.exports=class{constructor(e,t){this._rateLimiter=e,this._burstLimiter=t}_combineRes(e,t){return new r(e.remainingPoints,Math.min(e.msBeforeNext,t.msBeforeNext),e.consumedPoints,e.isFirstInDuration)}consume(e,t=1,n={}){return this._rateLimiter.consume(e,t,n).catch((o=>o instanceof r?this._burstLimiter.consume(e,t,n).then((e=>Promise.resolve(this._combineRes(o,e)))).catch((e=>e instanceof r?Promise.reject(this._combineRes(o,e)):Promise.reject(e))):Promise.reject(o)))}get(e){return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then((([e,t])=>this._combineRes(e,t)))}get points(){return this._rateLimiter.points}}},911:function(e,t,n){const r=n(5155);e.exports=class{constructor(e={}){this.limiter=e.limiter,this.blackList=e.blackList,this.whiteList=e.whiteList,this.isBlackListed=e.isBlackListed,this.isWhiteListed=e.isWhiteListed,this.runActionAnyway=e.runActionAnyway}get limiter(){return this._limiter}set limiter(e){if("undefined"===typeof e)throw new Error("limiter is not set");this._limiter=e}get runActionAnyway(){return this._runActionAnyway}set runActionAnyway(e){this._runActionAnyway="undefined"!==typeof e&&e}get blackList(){return this._blackList}set blackList(e){this._blackList=Array.isArray(e)?e:[]}get isBlackListed(){return this._isBlackListed}set isBlackListed(e){if("undefined"===typeof e&&(e=()=>!1),"function"!==typeof e)throw new Error("isBlackListed must be function");this._isBlackListed=e}get whiteList(){return this._whiteList}set whiteList(e){this._whiteList=Array.isArray(e)?e:[]}get isWhiteListed(){return this._isWhiteListed}set isWhiteListed(e){if("undefined"===typeof e&&(e=()=>!1),"function"!==typeof e)throw new Error("isWhiteListed must be function");this._isWhiteListed=e}isBlackListedSomewhere(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}isWhiteListedSomewhere(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}getBlackRes(){return new r(0,Number.MAX_SAFE_INTEGER,0,!1)}getWhiteRes(){return new r(Number.MAX_SAFE_INTEGER,0,0,!1)}rejectBlack(){return Promise.reject(this.getBlackRes())}resolveBlack(){return Promise.resolve(this.getBlackRes())}resolveWhite(){return Promise.resolve(this.getWhiteRes())}consume(e,t=1){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.rejectBlack()),"undefined"===typeof n?this.limiter.consume(e,t):(this.runActionAnyway&&this.limiter.consume(e,t).catch((()=>{})),n)}block(e,t){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.resolveBlack()),"undefined"===typeof n?this.limiter.block(e,t):(this.runActionAnyway&&this.limiter.block(e,t).catch((()=>{})),n)}penalty(e,t){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.resolveBlack()),"undefined"===typeof n?this.limiter.penalty(e,t):(this.runActionAnyway&&this.limiter.penalty(e,t).catch((()=>{})),n)}reward(e,t){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.resolveBlack()),"undefined"===typeof n?this.limiter.reward(e,t):(this.runActionAnyway&&this.limiter.reward(e,t).catch((()=>{})),n)}get(e){let t;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.resolveBlack()),"undefined"===typeof t||this.runActionAnyway?this.limiter.get(e):t}delete(e){return this.limiter.delete(e)}}},1352:function(e){e.exports=class{constructor(e={}){this.points=e.points,this.duration=e.duration,this.blockDuration=e.blockDuration,this.execEvenly=e.execEvenly,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs,this.keyPrefix=e.keyPrefix}get points(){return this._points}set points(e){this._points=e>=0?e:4}get duration(){return this._duration}set duration(e){this._duration="undefined"===typeof e?1:e}get msDuration(){return 1e3*this.duration}get blockDuration(){return this._blockDuration}set blockDuration(e){this._blockDuration="undefined"===typeof e?0:e}get msBlockDuration(){return 1e3*this.blockDuration}get execEvenly(){return this._execEvenly}set execEvenly(e){this._execEvenly="undefined"!==typeof e&&Boolean(e)}get execEvenlyMinDelayMs(){return this._execEvenlyMinDelayMs}set execEvenlyMinDelayMs(e){this._execEvenlyMinDelayMs="undefined"===typeof e?Math.ceil(this.msDuration/this.points):e}get keyPrefix(){return this._keyPrefix}set keyPrefix(e){if("undefined"===typeof e&&(e="rlflx"),"string"!==typeof e)throw new Error("keyPrefix must be string");this._keyPrefix=e}_getKeySecDuration(e={}){return e&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}consume(){throw new Error("You have to implement the method 'consume'!")}penalty(){throw new Error("You have to implement the method 'penalty'!")}reward(){throw new Error("You have to implement the method 'reward'!")}get(){throw new Error("You have to implement the method 'get'!")}set(){throw new Error("You have to implement the method 'set'!")}block(){throw new Error("You have to implement the method 'block'!")}delete(){throw new Error("You have to implement the method 'delete'!")}}},1713:function(e,t,n){const r=n(1265),o=n(5539),s=n(1352),i=n(2288),a=n(5155),l="rate_limiter_flexible";let c=null;const u=function(e,t,n,r){let o;o=null===r||!0===r||!1===r?r:{remainingPoints:r.remainingPoints,msBeforeNext:r.msBeforeNext,consumedPoints:r.consumedPoints,isFirstInDuration:r.isFirstInDuration},e.send({channel:l,keyPrefix:t.keyPrefix,promiseId:t.promiseId,type:n,data:o})},d=function(e){setTimeout((()=>{this._initiated?process.send(e):"undefined"!==typeof this._promises[e.promiseId]&&d.call(this,e)}),30)},h=function(e,t,n,r,o){const s={channel:l,keyPrefix:this.keyPrefix,func:e,promiseId:t,data:{key:n,arg:r,opts:o}};this._initiated?process.send(s):d.call(this,s)},p=function(e,t){if(!t||t.channel!==l||"undefined"===typeof this._rateLimiters[t.keyPrefix])return!1;let n;switch(t.func){case"consume":n=this._rateLimiters[t.keyPrefix].consume(t.data.key,t.data.arg,t.data.opts);break;case"penalty":n=this._rateLimiters[t.keyPrefix].penalty(t.data.key,t.data.arg,t.data.opts);break;case"reward":n=this._rateLimiters[t.keyPrefix].reward(t.data.key,t.data.arg,t.data.opts);break;case"block":n=this._rateLimiters[t.keyPrefix].block(t.data.key,t.data.arg,t.data.opts);break;case"get":n=this._rateLimiters[t.keyPrefix].get(t.data.key,t.data.opts);break;case"delete":n=this._rateLimiters[t.keyPrefix].delete(t.data.key,t.data.opts);break;default:return!1}n&&n.then((n=>{u(e,t,"resolve",n)})).catch((n=>{u(e,t,"reject",n)}))},f=function(e){if(!e||e.channel!==l||e.keyPrefix!==this.keyPrefix)return!1;if(this._promises[e.promiseId]){let t;switch(clearTimeout(this._promises[e.promiseId].timeoutId),t=null===e.data||!0===e.data||!1===e.data?e.data:new a(e.data.remainingPoints,e.data.msBeforeNext,e.data.consumedPoints,e.data.isFirstInDuration),e.type){case"resolve":this._promises[e.promiseId].resolve(t);break;case"reject":this._promises[e.promiseId].reject(t);break;default:throw new Error(`RateLimiterCluster: no such message type '${e.type}'`)}delete this._promises[e.promiseId]}},g=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},m=function(e,t){const n=process.hrtime();let r=n[0].toString()+n[1].toString();return"undefined"!==typeof this._promises[r]&&(r+=o.randomBytes(12).toString("base64")),this._promises[r]={resolve:e,reject:t,timeoutId:setTimeout((()=>{delete this._promises[r],t(new Error("RateLimiterCluster timeout: no answer from master in time"))}),this.timeoutMs)},r};class y{constructor(){if(c)return c;this._rateLimiters={},r.setMaxListeners(0),r.on("message",((e,t)=>{t&&t.channel===l&&"init"===t.type?("undefined"===typeof this._rateLimiters[t.opts.keyPrefix]&&(this._rateLimiters[t.opts.keyPrefix]=new i(t.opts)),e.send({channel:l,type:"init",keyPrefix:t.opts.keyPrefix})):p.call(this,e,t)})),c=this}}class v{constructor(e){if(c)return c;this._rateLimiters={},e.launchBus(((t,n)=>{n.on("process:msg",(t=>{const n=t.raw;if(n&&n.channel===l&&"init"===n.type)"undefined"===typeof this._rateLimiters[n.opts.keyPrefix]&&(this._rateLimiters[n.opts.keyPrefix]=new i(n.opts)),e.sendDataToProcessId(t.process.pm_id,{data:{},topic:l,channel:l,type:"init",keyPrefix:n.opts.keyPrefix},((e,t)=>{e&&console.log(e,t)}));else{const r={send:n=>{const r=n;r.topic=l,"undefined"===typeof r.data&&(r.data={}),e.sendDataToProcessId(t.process.pm_id,r,((e,t)=>{e&&console.log(e,t)}))}};p.call(this,r,n)}}))})),c=this}}class w extends s{get timeoutMs(){return this._timeoutMs}set timeoutMs(e){this._timeoutMs="undefined"===typeof e?5e3:Math.abs(parseInt(e))}constructor(e={}){super(e),process.setMaxListeners(0),this.timeoutMs=e.timeoutMs,this._initiated=!1,process.on("message",(e=>{e&&e.channel===l&&"init"===e.type&&e.keyPrefix===this.keyPrefix?this._initiated=!0:f.call(this,e)})),process.send({channel:l,type:"init",opts:g.call(this)}),this._promises={}}consume(e,t=1,n={}){return new Promise(((r,o)=>{const s=m.call(this,r,o);h.call(this,"consume",s,e,t,n)}))}penalty(e,t=1,n={}){return new Promise(((r,o)=>{const s=m.call(this,r,o);h.call(this,"penalty",s,e,t,n)}))}reward(e,t=1,n={}){return new Promise(((r,o)=>{const s=m.call(this,r,o);h.call(this,"reward",s,e,t,n)}))}block(e,t,n={}){return new Promise(((r,o)=>{const s=m.call(this,r,o);h.call(this,"block",s,e,t,n)}))}get(e,t={}){return new Promise(((n,r)=>{const o=m.call(this,n,r);h.call(this,"get",o,e,t)}))}delete(e,t={}){return new Promise(((n,r)=>{const o=m.call(this,n,r);h.call(this,"delete",o,e,t)}))}}e.exports={RateLimiterClusterMaster:y,RateLimiterClusterMasterPM2:v,RateLimiterCluster:w}},5105:function(e,t,n){const r=n(1090),o=n(5155);class s extends r{constructor(e){super(e),this.client=e.storeClient}_getRateLimiterRes(e,t,n){const r=new o;return r.consumedPoints=parseInt(n.consumedPoints),r.isFirstInDuration=n.consumedPoints===t,r.remainingPoints=Math.max(this.points-r.consumedPoints,0),r.msBeforeNext=n.msBeforeNext,r}_upsert(e,t,n,r=!1,o={}){return new Promise(((s,i)=>{const a=Date.now(),l=Math.floor(n/1e3);r?this.client.set(e,t,l,(n=>{n?i(n):this.client.set(`${e}_expire`,l>0?a+1e3*l:-1,l,(()=>{const e={consumedPoints:t,msBeforeNext:l>0?1e3*l:-1};s(e)}))})):this.client.incr(e,t,((c,u)=>{c||!1===u?this.client.add(e,t,l,((c,u)=>{if(c||!u)if("undefined"===typeof o.attemptNumber||o.attemptNumber<3){const a=Object.assign({},o);a.attemptNumber=a.attemptNumber?a.attemptNumber+1:1,this._upsert(e,t,n,r,a).then((e=>s(e))).catch((e=>i(e)))}else i(new Error("Can not add key"));else this.client.add(`${e}_expire`,l>0?a+1e3*l:-1,l,(()=>{const e={consumedPoints:t,msBeforeNext:l>0?1e3*l:-1};s(e)}))})):this.client.get(`${e}_expire`,((e,t)=>{if(e)i(e);else{const e=!1===t?0:t,n={consumedPoints:u,msBeforeNext:e>=0?Math.max(e-a,0):-1};s(n)}}))}))}))}_get(e){return new Promise(((t,n)=>{const r=Date.now();this.client.get(e,((o,s)=>{s?this.client.get(`${e}_expire`,((e,o)=>{if(e)n(e);else{const e=!1===o?0:o,n={consumedPoints:s,msBeforeNext:e>=0?Math.max(e-r,0):-1};t(n)}})):t(null)}))}))}_delete(e){return new Promise(((t,n)=>{this.client.del(e,((r,o)=>{r?n(r):!1===o?t(o):this.client.del(`${e}_expire`,(e=>{e?n(e):t(o)}))}))}))}}e.exports=s},2288:function(e,t,n){const r=n(1352),o=n(8425),s=n(5155);class i extends r{constructor(e={}){super(e),this._memoryStorage=new o}consume(e,t=1,n={}){return new Promise(((r,o)=>{const s=this.getKey(e),i=this._getKeySecDuration(n);let a=this._memoryStorage.incrby(s,t,i);if(a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.consumedPoints>this.points)this.blockDuration>0&&a.consumedPoints<=this.points+t&&(a=this._memoryStorage.set(s,a.consumedPoints,this.blockDuration)),o(a);else if(this.execEvenly&&a.msBeforeNext>0&&!a.isFirstInDuration){let e=Math.ceil(a.msBeforeNext/(a.remainingPoints+2));e<this.execEvenlyMinDelayMs&&(e=a.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(r,e,a)}else r(a)}))}penalty(e,t=1,n={}){const r=this.getKey(e);return new Promise((e=>{const o=this._getKeySecDuration(n),s=this._memoryStorage.incrby(r,t,o);s.remainingPoints=Math.max(this.points-s.consumedPoints,0),e(s)}))}reward(e,t=1,n={}){const r=this.getKey(e);return new Promise((e=>{const o=this._getKeySecDuration(n),s=this._memoryStorage.incrby(r,-t,o);s.remainingPoints=Math.max(this.points-s.consumedPoints,0),e(s)}))}block(e,t){const n=1e3*t,r=this.points+1;return this._memoryStorage.set(this.getKey(e),r,t),Promise.resolve(new s(0,0===n?-1:n,r))}set(e,t,n){const r=1e3*(n>=0?n:this.duration);return this._memoryStorage.set(this.getKey(e),t,n),Promise.resolve(new s(0,0===r?-1:r,t))}get(e){const t=this._memoryStorage.get(this.getKey(e));return null!==t&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),Promise.resolve(t)}delete(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}}e.exports=i},1391:function(e,t,n){const r=n(1090),o=n(5155);function s(e){try{const t=e.client?e.client:e,{version:n}=t.topology.s.options.metadata.driver,r=n.split(".").map((e=>parseInt(e)));return{major:r[0],feature:r[1],patch:r[2]}}catch(t){return{major:0,feature:0,patch:0}}}class i extends r{constructor(e){super(e),this.dbName=e.dbName,this.tableName=e.tableName,this.indexKeyPrefix=e.indexKeyPrefix,e.mongo?this.client=e.mongo:this.client=e.storeClient,"function"===typeof this.client.then?this.client.then((e=>{this.client=e,this._initCollection(),this._driverVersion=s(this.client)})):(this._initCollection(),this._driverVersion=s(this.client))}get dbName(){return this._dbName}set dbName(e){this._dbName="undefined"===typeof e?i.getDbName():e}static getDbName(){return"node-rate-limiter-flexible"}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get client(){return this._client}set client(e){if("undefined"===typeof e)throw new Error("mongo is not set");this._client=e}get indexKeyPrefix(){return this._indexKeyPrefix}set indexKeyPrefix(e){this._indexKeyPrefix=e||{}}_initCollection(){const e="function"===typeof this.client.db?this.client.db(this.dbName):this.client,t=e.collection(this.tableName);t.createIndex({expire:-1},{expireAfterSeconds:0}),t.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=t}_getRateLimiterRes(e,t,n){const r=new o;let s;return s="undefined"===typeof n.value?n:n.value,r.isFirstInDuration=s.points===t,r.consumedPoints=s.points,r.remainingPoints=Math.max(this.points-r.consumedPoints,0),r.msBeforeNext=null!==s.expire?Math.max(new Date(s.expire).getTime()-Date.now(),0):-1,r}_upsert(e,t,n,r=!1,o={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const s=o.attrs||{};let i,a;r?(i={key:e},i=Object.assign(i,s),a={$set:{key:e,points:t,expire:n>0?new Date(Date.now()+n):null}},a.$set=Object.assign(a.$set,s)):(i={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},i=Object.assign(i,s),a={$setOnInsert:{key:e,expire:n>0?new Date(Date.now()+n):null},$inc:{points:t}},a.$setOnInsert=Object.assign(a.$setOnInsert,s));const l={upsert:!0};return this._driverVersion.major>=4||3===this._driverVersion.major&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?l.returnDocument="after":l.returnOriginal=!1,new Promise(((o,c)=>{this._collection.findOneAndUpdate(i,a,l).then((e=>{o(e)})).catch((i=>{if(i&&11e3===i.code){const i=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},s),a={$set:Object.assign({key:e,points:t,expire:n>0?new Date(Date.now()+n):null},s)};this._collection.findOneAndUpdate(i,a,l).then((e=>{o(e)})).catch((s=>{s&&11e3===s.code?this._upsert(e,t,n,r).then((e=>o(e))).catch((e=>c(e))):c(s)}))}else c(i)}))}))}_get(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const n=t.attrs||{},r=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},n);return this._collection.findOne(r)}_delete(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const n=t.attrs||{},r=Object.assign({key:e},n);return this._collection.deleteOne(r).then((e=>e.deletedCount>0))}}e.exports=i},4156:function(e,t,n){const r=n(1090),o=n(5155);class s extends r{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.dbName=e.dbName,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()):this._createDbAndTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()})).catch((e=>{if("function"!==typeof t)throw e;t(e)}))}clearExpired(e){return new Promise((t=>{this._getConnection().then((n=>{n.query("DELETE FROM ??.?? WHERE expire < ?",[this.dbName,this.tableName,e],(()=>{this._releaseConnection(n),t()}))})).catch((()=>{t()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return new Promise(((e,t)=>{this.client.getConnection(((n,r)=>{if(n)return t(n);e(r)}))}));case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}_createDbAndTable(){return new Promise(((e,t)=>{this._getConnection().then((n=>{n.query(`CREATE DATABASE IF NOT EXISTS \`${this.dbName}\`;`,(r=>{if(r)return this._releaseConnection(n),t(r);n.query(this._getCreateTableStmt(),(r=>{if(r)return this._releaseConnection(n),t(r);this._releaseConnection(n),e()}))}))})).catch((e=>{t(e)}))}))}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS \`${this.dbName}\`.\`${this.tableName}\` (\`key\` VARCHAR(255) CHARACTER SET utf8 NOT NULL,\`points\` INT(9) NOT NULL default 0,\`expire\` BIGINT UNSIGNED,PRIMARY KEY (\`key\`)) ENGINE = INNODB;`}get clientType(){return this._clientType}set clientType(e){if("undefined"===typeof e)if("Connection"===this.client.constructor.name)e="connection";else if("Pool"===this.client.constructor.name)e="pool";else{if("Sequelize"!==this.client.constructor.name)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}get dbName(){return this._dbName}set dbName(e){this._dbName="undefined"===typeof e?"rtlmtrflx":e}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated="undefined"!==typeof e&&!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}_getRateLimiterRes(e,t,n){const r=new o,[s]=n;return r.isFirstInDuration=t===s.points,r.consumedPoints=r.isFirstInDuration?t:s.points,r.remainingPoints=Math.max(this.points-r.consumedPoints,0),r.msBeforeNext=s.expire?Math.max(s.expire-Date.now(),0):-1,r}_upsertTransaction(e,t,n,r,o){return new Promise(((s,i)=>{e.query("BEGIN",(a=>{if(a)return e.rollback(),i(a);const l=Date.now(),c=r>0?l+r:null;let u,d;o?(u="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;",d=[this.dbName,this.tableName,t,n,c,n,c]):(u="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);",d=[this.dbName,this.tableName,t,n,c,l,n,n,l,c]),e.query(u,d,(n=>{if(n)return e.rollback(),i(n);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[this.dbName,this.tableName,t],((t,n)=>{if(t)return e.rollback(),i(t);e.query("COMMIT",(t=>{if(t)return e.rollback(),i(t);s(n)}))}))}))}))}))}_upsert(e,t,n,r=!1){return this.tableCreated?new Promise(((o,s)=>{this._getConnection().then((i=>{this._upsertTransaction(i,e,t,n,r).then((e=>{o(e),this._releaseConnection(i)})).catch((e=>{s(e),this._releaseConnection(i)}))})).catch((e=>{s(e)}))})):Promise.reject(Error("Table is not created yet"))}_get(e){return this.tableCreated?new Promise(((t,n)=>{this._getConnection().then((r=>{r.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[this.dbName,this.tableName,e,Date.now()],((e,o)=>{e?n(e):0===o.length?t(null):t(o),this._releaseConnection(r)}))})).catch((e=>{n(e)}))})):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?new Promise(((t,n)=>{this._getConnection().then((r=>{r.query("DELETE FROM ??.?? WHERE `key` = ?",[this.dbName,this.tableName,e],((e,o)=>{e?n(e):t(o.affectedRows>0),this._releaseConnection(r)}))})).catch((e=>{n(e)}))})):Promise.reject(Error("Table is not created yet"))}}e.exports=s},4832:function(e,t,n){const r=n(1090),o=n(5155);class s extends r{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?"function"===typeof t&&t():this._createTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()})).catch((e=>{if("function"!==typeof t)throw e;t(e)}))}clearExpired(e){return new Promise((t=>{const n={name:"rlflx-clear-expired",text:`DELETE FROM ${this.tableName} WHERE expire < $1`,values:[e]};this._query(n).then((()=>{t()})).catch((()=>{t()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master);default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);case"typeorm":return!0;default:return!0}}_createTable(){return new Promise(((e,t)=>{this._query({text:this._getCreateTableStmt()}).then((()=>{e()})).catch((n=>{"23505"===n.code?e():t(n)}))}))}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS ${this.tableName} ( \n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );`}get clientType(){return this._clientType}set clientType(e){const t=this.client.constructor.name;if("undefined"===typeof e)if("Client"===t)e="client";else if("Pool"===t||"BoundPool"===t)e="pool";else{if("Sequelize"!==t)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated="undefined"!==typeof e&&!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}_getRateLimiterRes(e,t,n){const r=new o,s=n.rows[0];return r.isFirstInDuration=t===s.points,r.consumedPoints=r.isFirstInDuration?t:s.points,r.remainingPoints=Math.max(this.points-r.consumedPoints,0),r.msBeforeNext=s.expire?Math.max(s.expire-Date.now(),0):-1,r}_query(e){const t=this.tableName.toLowerCase(),n={name:`${t}:${e.name}`,text:e.text,values:e.values};return new Promise(((e,t)=>{this._getConnection().then((r=>{r.query(n).then((t=>{e(t),this._releaseConnection(r)})).catch((e=>{t(e),this._releaseConnection(r)}))})).catch((e=>{t(e)}))}))}_upsert(e,t,n,r=!1){if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));const o=n>0?Date.now()+n:null,s=r?" $3 ":` CASE\n             WHEN ${this.tableName}.expire <= $4 THEN $3\n             ELSE ${this.tableName}.expire\n            END `;return this._query({name:r?"rlflx-upsert-force":"rlflx-upsert",text:`\n            INSERT INTO ${this.tableName} VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (${this.tableName}.expire <= $4 OR 1=${r?1:0}) THEN $2\n                          ELSE ${this.tableName}.points + ($2)\n                         END,\n                expire = ${s}\n            RETURNING points, expire;`,values:[e,t,o,Date.now()]})}_get(e){return this.tableCreated?new Promise(((t,n)=>{this._query({name:"rlflx-get",text:`\n            SELECT points, expire FROM ${this.tableName} WHERE key = $1 AND (expire > $2 OR expire IS NULL);`,values:[e,Date.now()]}).then((e=>{0===e.rowCount&&(e=null),t(e)})).catch((e=>{n(e)}))})):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?this._query({name:"rlflx-delete",text:`DELETE FROM ${this.tableName} WHERE key = $1`,values:[e]}).then((e=>e.rowCount>0)):Promise.reject(Error("Table is not created yet"))}}e.exports=s},8686:function(e,t,n){const r=n(5255),o=4294967295,s="limiter";e.exports=class{constructor(e,t={maxQueueSize:o}){this._queueLimiters={KEY_DEFAULT:new i(e,t)},this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(e=s){return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}removeTokens(e,t=s){return this._queueLimiters[t]||(this._queueLimiters[t]=new i(this._limiterFlexible,{key:t,maxQueueSize:this._maxQueueSize})),this._queueLimiters[t].removeTokens(e)}};class i{constructor(e,t={maxQueueSize:o,key:s}){this._key=t.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(){return this._limiterFlexible.get(this._key).then((e=>null!==e?e.remainingPoints:this._limiterFlexible.points))}removeTokens(e){const t=this;return new Promise(((n,o)=>{e>t._limiterFlexible.points?o(new r(`Requested tokens ${e} exceeds maximum ${t._limiterFlexible.points} tokens per interval`)):t._queue.length>0?t._queueRequest.call(t,n,o,e):t._limiterFlexible.consume(t._key,e).then((e=>{n(e.remainingPoints)})).catch((r=>{r instanceof Error?o(r):(t._queueRequest.call(t,n,o,e),null===t._waitTimeout&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),r.msBeforeNext)))}))}))}_queueRequest(e,t,n){const o=this;o._queue.length<o._maxQueueSize?o._queue.push({resolve:e,reject:t,tokens:n}):t(new r(`Number of requests reached it's maximum ${o._maxQueueSize}`))}_processFIFO(){const e=this;if(null!==e._waitTimeout&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),0===e._queue.length)return;const t=e._queue.shift();e._limiterFlexible.consume(e._key,t.tokens).then((n=>{t.resolve(n.remainingPoints),e._processFIFO.call(e)})).catch((n=>{n instanceof Error?(t.reject(n),e._processFIFO.call(e)):(e._queue.unshift(t),null===e._waitTimeout&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),n.msBeforeNext)))}))}}},4636:function(e,t,n){const r=n(1090),o=n(5155),s="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ";class i extends r{constructor(e){super(e),e.redis?this.client=e.redis:this.client=e.storeClient,this._rejectIfRedisNotReady=!!e.rejectIfRedisNotReady,"function"===typeof this.client.defineCommand&&this.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:s})}_isRedisReady(){return!this._rejectIfRedisNotReady||(!this.client.status||"ready"===this.client.status)&&!("function"===typeof this.client.isReady&&!this.client.isReady())}_getRateLimiterRes(e,t,n){let[r,s]=n;Array.isArray(r)&&([,r]=r,[,s]=s);const i=new o;return i.consumedPoints=parseInt(r),i.isFirstInDuration=i.consumedPoints===t,i.remainingPoints=Math.max(this.points-i.consumedPoints,0),i.msBeforeNext=s,i}_upsert(e,t,n,r=!1){return new Promise(((o,i)=>{if(!this._isRedisReady())return i(new Error("Redis connection is not ready"));const a=Math.floor(n/1e3),l=this.client.multi();if(r)a>0?l.set(e,t,"EX",a):l.set(e,t),l.pttl(e).exec(((e,t)=>e?i(e):o(t)));else if(a>0){const n=function(e,t){return e?i(e):o(t)};"function"===typeof this.client.rlflxIncr?this.client.rlflxIncr(e,t,a,n):this.client.eval(s,1,e,t,a,n)}else l.incrby(e,t).pttl(e).exec(((e,t)=>e?i(e):o(t)))}))}_get(e){return new Promise(((t,n)=>{if(!this._isRedisReady())return n(new Error("Redis connection is not ready"));this.client.multi().get(e).pttl(e).exec(((e,r)=>{if(e)n(e);else{const[e]=r;if(null===e)return t(null);t(r)}}))}))}_delete(e){return new Promise(((t,n)=>{this.client.del(e,((e,r)=>{e?n(e):t(r>0)}))}))}}e.exports=i},5155:function(e){e.exports=class{constructor(e,t,n,r){this.remainingPoints="undefined"===typeof e?0:e,this.msBeforeNext="undefined"===typeof t?0:t,this.consumedPoints="undefined"===typeof n?0:n,this.isFirstInDuration="undefined"!==typeof r&&r}get msBeforeNext(){return this._msBeforeNext}set msBeforeNext(e){return this._msBeforeNext=e,this}get remainingPoints(){return this._remainingPoints}set remainingPoints(e){return this._remainingPoints=e,this}get consumedPoints(){return this._consumedPoints}set consumedPoints(e){return this._consumedPoints=e,this}get isFirstInDuration(){return this._isFirstInDuration}set isFirstInDuration(e){this._isFirstInDuration=Boolean(e)}_getDecoratedProperties(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}[Symbol.for("nodejs.util.inspect.custom")](){return this._getDecoratedProperties()}toString(){return JSON.stringify(this._getDecoratedProperties())}toJSON(){return this._getDecoratedProperties()}}},1090:function(e,t,n){const r=n(1352),o=n(2423),s=n(5155);e.exports=class extends r{constructor(e={}){super(e),this.inMemoryBlockOnConsumed=e.inMemoryBlockOnConsumed||e.inmemoryBlockOnConsumed,this.inMemoryBlockDuration=e.inMemoryBlockDuration||e.inmemoryBlockDuration,this.insuranceLimiter=e.insuranceLimiter,this._inMemoryBlockedKeys=new o}get client(){return this._client}set client(e){if("undefined"===typeof e)throw new Error("storeClient is not set");this._client=e}_afterConsume(e,t,n,r,o,s={}){const i=this._getRateLimiterRes(n,r,o);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&i.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(n,i.msBeforeNext),i.consumedPoints>this.points?t(i):e(i);if(i.consumedPoints>this.points){let e=Promise.resolve();this.blockDuration>0&&i.consumedPoints<=this.points+r&&(i.msBeforeNext=this.msBlockDuration,e=this._block(n,i.consumedPoints,this.msBlockDuration,s)),this.inMemoryBlockOnConsumed>0&&i.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(n,this.inMemoryBlockDuration),i.msBeforeNext=this.msInMemoryBlockDuration),e.then((()=>{t(i)})).catch((e=>{t(e)}))}else if(this.execEvenly&&i.msBeforeNext>0&&!i.isFirstInDuration){let t=Math.ceil(i.msBeforeNext/(i.remainingPoints+2));t<this.execEvenlyMinDelayMs&&(t=i.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,t,i)}else e(i)}_handleError(e,t,n,o,s,i=!1,a={}){this.insuranceLimiter instanceof r?this.insuranceLimiter[t](s,i,a).then((e=>{n(e)})).catch((e=>{o(e)})):o(e)}get _inmemoryBlockedKeys(){return this._inMemoryBlockedKeys}getInmemoryBlockMsBeforeExpire(e){return this.getInMemoryBlockMsBeforeExpire(e)}get inmemoryBlockOnConsumed(){return this.inMemoryBlockOnConsumed}set inmemoryBlockOnConsumed(e){this.inMemoryBlockOnConsumed=e}get inmemoryBlockDuration(){return this.inMemoryBlockDuration}set inmemoryBlockDuration(e){this.inMemoryBlockDuration=e}get msInmemoryBlockDuration(){return 1e3*this.inMemoryBlockDuration}getInMemoryBlockMsBeforeExpire(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}get inMemoryBlockOnConsumed(){return this._inMemoryBlockOnConsumed}set inMemoryBlockOnConsumed(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}get inMemoryBlockDuration(){return this._inMemoryBlockDuration}set inMemoryBlockDuration(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&0===this.inMemoryBlockOnConsumed)throw new Error("inMemoryBlockOnConsumed option must be set up")}get msInMemoryBlockDuration(){return 1e3*this._inMemoryBlockDuration}get insuranceLimiter(){return this._insuranceLimiter}set insuranceLimiter(e){if("undefined"!==typeof e&&!(e instanceof r))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}block(e,t,n={}){const r=1e3*t;return this._block(this.getKey(e),this.points+1,r,n)}set(e,t,n,r={}){const o=1e3*(n>=0?n:this.duration);return this._block(this.getKey(e),t,o,r)}consume(e,t=1,n={}){return new Promise(((r,o)=>{const i=this.getKey(e),a=this.getInMemoryBlockMsBeforeExpire(i);if(a>0)return o(new s(0,a));this._upsert(i,t,1e3*this._getKeySecDuration(n),!1,n).then((e=>{this._afterConsume(r,o,i,t,e)})).catch((s=>{this._handleError(s,"consume",r,o,e,t,n)}))}))}penalty(e,t=1,n={}){const r=this.getKey(e);return new Promise(((o,s)=>{this._upsert(r,t,1e3*this._getKeySecDuration(n),!1,n).then((e=>{o(this._getRateLimiterRes(r,t,e))})).catch((r=>{this._handleError(r,"penalty",o,s,e,t,n)}))}))}reward(e,t=1,n={}){const r=this.getKey(e);return new Promise(((o,s)=>{this._upsert(r,-t,1e3*this._getKeySecDuration(n),!1,n).then((e=>{o(this._getRateLimiterRes(r,-t,e))})).catch((r=>{this._handleError(r,"reward",o,s,e,t,n)}))}))}get(e,t={}){const n=this.getKey(e);return new Promise(((r,o)=>{this._get(n,t).then((e=>{r(null===e||"undefined"===typeof e?null:this._getRateLimiterRes(n,0,e))})).catch((n=>{this._handleError(n,"get",r,o,e,t)}))}))}delete(e,t={}){const n=this.getKey(e);return new Promise(((r,o)=>{this._delete(n,t).then((e=>{this._inMemoryBlockedKeys.delete(n),r(e)})).catch((n=>{this._handleError(n,"delete",r,o,e,t)}))}))}deleteInMemoryBlockedAll(){this._inMemoryBlockedKeys.delete()}_getRateLimiterRes(e,t,n){throw new Error("You have to implement the method '_getRateLimiterRes'!")}_block(e,t,n,r={}){return new Promise(((o,i)=>{this._upsert(e,t,n,!0,r).then((()=>{o(new s(0,n>0?n:-1,t))})).catch((t=>{this._handleError(t,"block",o,i,this.parseKey(e),n/1e3,r)}))}))}_get(e,t={}){throw new Error("You have to implement the method '_get'!")}_delete(e,t={}){throw new Error("You have to implement the method '_delete'!")}_upsert(e,t,n,r=!1,o={}){throw new Error("You have to implement the method '_upsert'!")}}},3766:function(e,t,n){const r=n(1352);e.exports=class{constructor(...e){if(e.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");e.forEach((e=>{if(!(e instanceof r))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")})),this._limiters=e}consume(e,t=1){return new Promise(((n,r)=>{const o=[];this._limiters.forEach((n=>{o.push(n.consume(e,t).catch((e=>({rejected:!0,rej:e}))))})),Promise.all(o).then((e=>{const t={};let o=!1;e.forEach((e=>{!0===e.rejected&&(o=!0)}));for(let n=0;n<e.length;n++)o&&!0===e[n].rejected?t[this._limiters[n].keyPrefix]=e[n].rej:o||(t[this._limiters[n].keyPrefix]=e[n]);o?r(t):n(t)}))}))}}},8894:function(e){e.exports=class{constructor(){this._keys={},this._addedKeysAmount=0}collectExpired(){const e=Date.now();Object.keys(this._keys).forEach((t=>{this._keys[t]<=e&&delete this._keys[t]})),this._addedKeysAmount=Object.keys(this._keys).length}add(e,t){this.addMs(e,1e3*t)}addMs(e,t){this._keys[e]=Date.now()+t,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}msBeforeExpire(e){const t=this._keys[e];if(t&&t>=Date.now()){this.collectExpired();const e=Date.now();return t>=e?t-e:0}return 0}delete(e){e?delete this._keys[e]:Object.keys(this._keys).forEach((e=>{delete this._keys[e]}))}}},2423:function(e,t,n){const r=n(8894);e.exports=r},8425:function(e,t,n){const r=n(9250),o=n(5155);e.exports=class{constructor(){this._storage={}}incrby(e,t,n){if(this._storage[e]){const r=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return 0!==r?(this._storage[e].value=this._storage[e].value+t,new o(0,r,this._storage[e].value,!1)):this.set(e,t,n)}return this.set(e,t,n)}set(e,t,n){const s=1e3*n;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new r(t,s>0?new Date(Date.now()+s):null),s>0&&(this._storage[e].timeoutId=setTimeout((()=>{delete this._storage[e]}),s),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new o(0,0===s?-1:s,this._storage[e].value,!0)}get(e){if(this._storage[e]){const t=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return new o(0,t,this._storage[e].value,!1)}return null}delete(e){return!!this._storage[e]&&(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0)}}},9250:function(e){e.exports=class{constructor(e,t,n=null){this.value=e,this.expiresAt=t,this.timeoutId=n}get value(){return this._value}set value(e){this._value=parseInt(e)}get expiresAt(){return this._expiresAt}set expiresAt(e){e instanceof Date||!Number.isInteger(e)||(e=new Date(e)),this._expiresAt=e}get timeoutId(){return this._timeoutId}set timeoutId(e){this._timeoutId=e}}},5255:function(e){e.exports=class extends Error{constructor(e,t){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="CustomError",this.message=e,t&&(this.extra=t)}}},3692:function(e,t,n){"use strict";e.exports=a;var r=n(7824),o=a.prototype,s=new Date%1e9;function i(){return(1e9*Math.random()>>>0)+s++}function a(e){e=e||{},this.id=e.id||i(),this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,n,r=this.items.length;r--;)t=this.items[r],n=new Date(t.expires)-new Date,this._lookup[t.key]=t,n>0?this.expire(t.key,n):n<=0&&this.delete(t.key)}o.has=function(e){return e in this._lookup},o.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},o.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},o.set=function(e,t,n){var r=this._lookup[e],o=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,r?(clearTimeout(r.timeout),this.items.splice(this.items.indexOf(r),1,o)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(o),this.size++),n&&("ttl"in n&&this.expire(e,n.ttl),"meta"in n&&(o.meta=n.meta),n.refresh&&(o.refresh=n.ttl)),this},o.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},o.expire=function(e,t){var n=t||0,o=this._lookup[e];if(!o)return this;if("string"===typeof n&&(n=r(t)),"number"!==typeof n)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(o.timeout),o.timeout=setTimeout(this.delete.bind(this,o.key),n),o.expires=Number(new Date)+n,this},o.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},o.toJSON=function(){for(var e,t=new Array(this.items.length),n=t.length;n--;)e=this.items[n],t[n]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}},2916:function(e,t,n){"use strict";const r=n(1807);class o{constructor(e,t,n){const o=this;this._started=r(),this._rescheduled=0,this._scheduled=t,this._args=n,this._triggered=!1,this._timerWrapper=()=>{o._rescheduled>0?(o._scheduled=o._rescheduled-(r()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,e.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,t)}reschedule(e){e||(e=this._scheduled);const t=r();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}}function s(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");let e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new o(arguments[0],arguments[1],e)}e.exports=s},1807:function(e){"use strict";e.exports=function(){return Date.now()}},9967:function(e,t,n){
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.exports=o;const r=n(4375);function o(e,t,n){if("number"!==typeof t)throw new Error("second argument must be a Number");let o,s,i,a,l,c,u=!0;function d(e){function t(){n&&n(e,o),n=null}u?r(t):t()}function h(t,n,r){if(o[t]=r,n&&(l=!0),0===--i||n)d(n);else if(!l&&c<s){let t;a?(t=a[c],c+=1,e[t]((function(e,n){h(t,e,n)}))):(t=c,c+=1,e[t]((function(e,n){h(t,e,n)})))}}Array.isArray(e)?(o=[],i=s=e.length):(a=Object.keys(e),o={},i=s=a.length),c=t,i?a?a.some((function(n,r){return e[n]((function(e,t){h(n,e,t)})),r===t-1})):e.some((function(e,n){return e((function(e,t){h(n,e,t)})),n===t-1})):d(null),u=!1}},9509:function(e,t,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(8764),o=r.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=i),i.prototype=Object.create(o.prototype),s(o,i),i.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},202:function(e,t,n){"use strict";var r=n(3700),o=/[\/\?<>\\:\*\|"]/g,s=/[\x00-\x1f\x80-\x9f]/g,i=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,l=/[\. ]+$/;function c(e,t){if("string"!==typeof e)throw new Error("Input must be string");var n=e.replace(o,t).replace(s,t).replace(i,t).replace(a,t).replace(l,t);return r(n,255)}e.exports=function(e,t){var n=t&&t.replacement||"",r=c(e,n);return""===n?r:c(r,"")}},7695:function(e){"use strict";const t=new Map,n=()=>`${Date.now()}:${Math.floor(1e6*Math.random())}`;async function r(e,n,r){while(t.get(r)){try{await e()}catch(o){setTimeout((()=>{throw o}),1);break}if(!t.get(r))break;await new Promise((e=>{const o=setTimeout(e,n);t.set(r,o)}))}}function o(e,o,s){s=s||o;const i=n(),a=setTimeout((()=>{r(e,o,i)}),s);return t.set(i,a),i}function s(e){const n=t.get(e);n&&(clearTimeout(n),t.delete(e))}e.exports={setDelayedInterval:o,clearDelayedInterval:s}},544:function(e){"use strict";const t=7;function n(e,t){return e+r(t)}function r(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function o(e,t){return e[0]-t[0]}function s(e){return e[1]}e.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(void 0===t)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(e),this._changedData=!0):r=!0,this._setInternalPos(n,e,t,r),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;while(t<this.length)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);while(t<this.length)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,r=t;while(n<this.length){const t=this.get(n);r=e(r,t,n),n++}return r}find(e){let t,n,r=0;while(r<this.length&&!t)n=this.get(r),t=e(n),r++;return t?n:void 0}_internalPositionFor(e,o){const s=this._bytePosFor(e,o);if(s>=this._bitArrays.length)return-1;const i=this._bitArrays[s],a=e-s*t,l=(i&1<<a)>0;if(!l)return-1;const c=this._bitArrays.slice(0,s).reduce(n,0),u=~(4294967295<<a+1),d=r(i&u),h=c+d-1;return h}_bytePosFor(e,n){const r=Math.floor(e/t),o=r+1;while(!n&&this._bitArrays.length<o)this._bitArrays.push(0);return r}_setBit(e){const n=this._bytePosFor(e,!1);this._bitArrays[n]|=1<<e-n*t}_unsetBit(e){const n=this._bytePosFor(e,!1);this._bitArrays[n]&=~(1<<e-n*t)}_setInternalPos(e,t,n,r){const o=this._data,s=[t,n];if(r)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=t)o.push(s);else if(o[0][0]<=t)o.unshift(s);else{const e=Math.round(o.length/2);this._data=o.slice(0,e).concat(s).concat(o.slice(e))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(o),this._changedData=!1}bitField(){const e=[];let t,n=8,r=0,o=0;const s=this._bitArrays.slice();while(s.length||r){0===r&&(t=s.shift(),r=7);const i=Math.min(r,n),a=~(255<<i),l=t&a;o|=l<<8-n,t>>>=i,r-=i,n-=i,n&&(r||s.length)||(e.push(o),o=0,n=8)}for(var i=e.length-1;i>0;i--){const t=e[i];if(0!==t)break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(s)}}},590:function(e){e.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){const t=e.getReader();try{while(1){const{done:e,value:n}=await t.read();if(e)return;yield n}}finally{t.releaseLock()}}();throw new Error("unknown stream")}},715:function(e,t,n){"use strict";const{AbortController:r}=globalThis,o=n(2916);class s extends r{constructor(e){super(),this._ms=e,this._timer=o((()=>this.abort()),e),Object.setPrototypeOf(this,s.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=o((()=>this.abort()),this._ms)}}e.exports={TimeoutController:s}},3700:function(e,t,n){"use strict";var r=n(1156),o=n(793);e.exports=r.bind(null,o)},1156:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function n(e){return e>=56320&&e<=57343}e.exports=function(e,r,o){if("string"!==typeof r)throw new Error("Input must be string");for(var s,i,a=r.length,l=0,c=0;c<a;c+=1){if(s=r.charCodeAt(c),i=r[c],t(s)&&n(r.charCodeAt(c+1))&&(c+=1,i+=r[c]),l+=e(i),l===o)return r.slice(0,c+1);if(l>o)return r.slice(0,c-i.length+1)}return r}},793:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function n(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!==typeof e)throw new Error("Input must be string");for(var r=e.length,o=0,s=null,i=null,a=0;a<r;a++)s=e.charCodeAt(a),n(s)?null!=i&&t(i)?o+=1:o+=3:s<=127?o+=1:s>=128&&s<=2047?o+=2:s>=2048&&s<=65535&&(o+=3),i=s;return o}},3209:function(e){e.exports=r;var t=128,n=127;function r(e,o){var s,i=0,a=(o=o||0,0),l=o,c=e.length;do{if(l>=c)throw r.bytes=0,new RangeError("Could not decode varint");s=e[l++],i+=a<28?(s&n)<<a:(s&n)*Math.pow(2,a),a+=7}while(s>=t);return r.bytes=l-o,i}},7089:function(e){e.exports=s;var t=128,n=127,r=~n,o=Math.pow(2,31);function s(e,n,i){n=n||[],i=i||0;var a=i;while(e>=o)n[i++]=255&e|t,e/=128;while(e&r)n[i++]=255&e|t,e>>>=7;return n[i]=0|e,s.bytes=i-a+1,n}},3924:function(e,t,n){e.exports={encode:n(7089),decode:n(3209),encodingLength:n(4146)}},4146:function(e){var t=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),o=Math.pow(2,28),s=Math.pow(2,35),i=Math.pow(2,42),a=Math.pow(2,49),l=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<n?2:e<r?3:e<o?4:e<s?5:e<i?6:e<a?7:e<l?8:e<c?9:10}},2838:function(e,t,n){"use strict";const r=n(3924);e.exports=e=>{if(!(e instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const t=[];while(e.length>0){const n=r.decode(e);t.push(n),e=e.slice(r.decode.bytes)}return t}},6988:function(e){e.exports=r;var t=128,n=127;function r(e,o){var s,i=0,a=(o=o||0,0),l=o,c=e.length;do{if(l>=c||a>49)throw r.bytes=0,new RangeError("Could not decode varint");s=e[l++],i+=a<28?(s&n)<<a:(s&n)*Math.pow(2,a),a+=7}while(s>=t);return r.bytes=l-o,i}},1312:function(e){e.exports=s;var t=128,n=127,r=~n,o=Math.pow(2,31);function s(e,n,i){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");n=n||[],i=i||0;var a=i;while(e>=o)n[i++]=255&e|t,e/=128;while(e&r)n[i++]=255&e|t,e>>>=7;return n[i]=0|e,s.bytes=i-a+1,n}},4676:function(e,t,n){e.exports={encode:n(1312),decode:n(6988),encodingLength:n(82)}},82:function(e){var t=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),o=Math.pow(2,28),s=Math.pow(2,35),i=Math.pow(2,42),a=Math.pow(2,49),l=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<n?2:e<r?3:e<o?4:e<s?5:e<i?6:e<a?7:e<l?8:e<c?9:10}},3744:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n}},4482:function(e,t,n){var r,o,s;(function(i,a){o=[n(2450)],r=a,s="function"===typeof r?r.apply(t,o):r,void 0===s||(e.exports=s)})(0,(function(e){"use strict";var t=e.Reader,n=e.Writer,r=e.util,o=e.roots["default"]||(e.roots["default"]={});return o.RPC=function(){function s(e){if(this.subscriptions=[],this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i;return s.prototype.subscriptions=r.emptyArray,s.prototype.messages=r.emptyArray,s.prototype.control=null,Object.defineProperty(s.prototype,"_control",{get:r.oneOfGetter(i=["control"]),set:r.oneOfSetter(i)}),s.encode=function(e,t){if(t||(t=n.create()),null!=e.subscriptions&&e.subscriptions.length)for(var r=0;r<e.subscriptions.length;++r)o.RPC.SubOpts.encode(e.subscriptions[r],t.uint32(10).fork()).ldelim();if(null!=e.messages&&e.messages.length)for(r=0;r<e.messages.length;++r)o.RPC.Message.encode(e.messages[r],t.uint32(18).fork()).ldelim();return null!=e.control&&Object.hasOwnProperty.call(e,"control")&&o.RPC.ControlMessage.encode(e.control,t.uint32(26).fork()).ldelim(),t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(o.RPC.SubOpts.decode(e,e.uint32()));break;case 2:s.messages&&s.messages.length||(s.messages=[]),s.messages.push(o.RPC.Message.decode(e,e.uint32()));break;case 3:s.control=o.RPC.ControlMessage.decode(e,e.uint32());break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC)return e;var t=new o.RPC;if(e.subscriptions){if(!Array.isArray(e.subscriptions))throw TypeError(".RPC.subscriptions: array expected");t.subscriptions=[];for(var n=0;n<e.subscriptions.length;++n){if("object"!==typeof e.subscriptions[n])throw TypeError(".RPC.subscriptions: object expected");t.subscriptions[n]=o.RPC.SubOpts.fromObject(e.subscriptions[n])}}if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".RPC.messages: array expected");t.messages=[];for(n=0;n<e.messages.length;++n){if("object"!==typeof e.messages[n])throw TypeError(".RPC.messages: object expected");t.messages[n]=o.RPC.Message.fromObject(e.messages[n])}}if(null!=e.control){if("object"!==typeof e.control)throw TypeError(".RPC.control: object expected");t.control=o.RPC.ControlMessage.fromObject(e.control)}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.subscriptions=[],n.messages=[]),e.subscriptions&&e.subscriptions.length){n.subscriptions=[];for(var r=0;r<e.subscriptions.length;++r)n.subscriptions[r]=o.RPC.SubOpts.toObject(e.subscriptions[r],t)}if(e.messages&&e.messages.length){n.messages=[];for(r=0;r<e.messages.length;++r)n.messages[r]=o.RPC.Message.toObject(e.messages[r],t)}return null!=e.control&&e.hasOwnProperty("control")&&(n.control=o.RPC.ControlMessage.toObject(e.control,t),t.oneofs&&(n._control="control")),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s.SubOpts=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i;return s.prototype.subscribe=null,s.prototype.topic=null,Object.defineProperty(s.prototype,"_subscribe",{get:r.oneOfGetter(i=["subscribe"]),set:r.oneOfSetter(i)}),Object.defineProperty(s.prototype,"_topic",{get:r.oneOfGetter(i=["topic"]),set:r.oneOfSetter(i)}),s.encode=function(e,t){return t||(t=n.create()),null!=e.subscribe&&Object.hasOwnProperty.call(e,"subscribe")&&t.uint32(8).bool(e.subscribe),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(18).string(e.topic),t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC.SubOpts;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.subscribe=e.bool();break;case 2:s.topic=e.string();break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC.SubOpts)return e;var t=new o.RPC.SubOpts;return null!=e.subscribe&&(t.subscribe=Boolean(e.subscribe)),null!=e.topic&&(t.topic=String(e.topic)),t},s.toObject=function(e,t){t||(t={});var n={};return null!=e.subscribe&&e.hasOwnProperty("subscribe")&&(n.subscribe=e.subscribe,t.oneofs&&(n._subscribe="subscribe")),null!=e.topic&&e.hasOwnProperty("topic")&&(n.topic=e.topic,t.oneofs&&(n._topic="topic")),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.Message=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i;return s.prototype.from=null,s.prototype.data=null,s.prototype.seqno=null,s.prototype.topic="",s.prototype.signature=null,s.prototype.key=null,Object.defineProperty(s.prototype,"_from",{get:r.oneOfGetter(i=["from"]),set:r.oneOfSetter(i)}),Object.defineProperty(s.prototype,"_data",{get:r.oneOfGetter(i=["data"]),set:r.oneOfSetter(i)}),Object.defineProperty(s.prototype,"_seqno",{get:r.oneOfGetter(i=["seqno"]),set:r.oneOfSetter(i)}),Object.defineProperty(s.prototype,"_signature",{get:r.oneOfGetter(i=["signature"]),set:r.oneOfSetter(i)}),Object.defineProperty(s.prototype,"_key",{get:r.oneOfGetter(i=["key"]),set:r.oneOfSetter(i)}),s.encode=function(e,t){return t||(t=n.create()),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(10).bytes(e.from),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.seqno&&Object.hasOwnProperty.call(e,"seqno")&&t.uint32(26).bytes(e.seqno),t.uint32(34).string(e.topic),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(50).bytes(e.key),t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var s=void 0===n?e.len:e.pos+n,i=new o.RPC.Message;while(e.pos<s){var a=e.uint32();switch(a>>>3){case 1:i.from=e.bytes();break;case 2:i.data=e.bytes();break;case 3:i.seqno=e.bytes();break;case 4:i.topic=e.string();break;case 5:i.signature=e.bytes();break;case 6:i.key=e.bytes();break;default:e.skipType(7&a);break}}if(!i.hasOwnProperty("topic"))throw r.ProtocolError("missing required 'topic'",{instance:i});return i},s.fromObject=function(e){if(e instanceof o.RPC.Message)return e;var t=new o.RPC.Message;return null!=e.from&&("string"===typeof e.from?r.base64.decode(e.from,t.from=r.newBuffer(r.base64.length(e.from)),0):e.from.length&&(t.from=e.from)),null!=e.data&&("string"===typeof e.data?r.base64.decode(e.data,t.data=r.newBuffer(r.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.seqno&&("string"===typeof e.seqno?r.base64.decode(e.seqno,t.seqno=r.newBuffer(r.base64.length(e.seqno)),0):e.seqno.length&&(t.seqno=e.seqno)),null!=e.topic&&(t.topic=String(e.topic)),null!=e.signature&&("string"===typeof e.signature?r.base64.decode(e.signature,t.signature=r.newBuffer(r.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),null!=e.key&&("string"===typeof e.key?r.base64.decode(e.key,t.key=r.newBuffer(r.base64.length(e.key)),0):e.key.length&&(t.key=e.key)),t},s.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.topic=""),null!=e.from&&e.hasOwnProperty("from")&&(n.from=t.bytes===String?r.base64.encode(e.from,0,e.from.length):t.bytes===Array?Array.prototype.slice.call(e.from):e.from,t.oneofs&&(n._from="from")),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?r.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data,t.oneofs&&(n._data="data")),null!=e.seqno&&e.hasOwnProperty("seqno")&&(n.seqno=t.bytes===String?r.base64.encode(e.seqno,0,e.seqno.length):t.bytes===Array?Array.prototype.slice.call(e.seqno):e.seqno,t.oneofs&&(n._seqno="seqno")),null!=e.topic&&e.hasOwnProperty("topic")&&(n.topic=e.topic),null!=e.signature&&e.hasOwnProperty("signature")&&(n.signature=t.bytes===String?r.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature,t.oneofs&&(n._signature="signature")),null!=e.key&&e.hasOwnProperty("key")&&(n.key=t.bytes===String?r.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key,t.oneofs&&(n._key="key")),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlMessage=function(){function s(e){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.ihave=r.emptyArray,s.prototype.iwant=r.emptyArray,s.prototype.graft=r.emptyArray,s.prototype.prune=r.emptyArray,s.encode=function(e,t){if(t||(t=n.create()),null!=e.ihave&&e.ihave.length)for(var r=0;r<e.ihave.length;++r)o.RPC.ControlIHave.encode(e.ihave[r],t.uint32(10).fork()).ldelim();if(null!=e.iwant&&e.iwant.length)for(r=0;r<e.iwant.length;++r)o.RPC.ControlIWant.encode(e.iwant[r],t.uint32(18).fork()).ldelim();if(null!=e.graft&&e.graft.length)for(r=0;r<e.graft.length;++r)o.RPC.ControlGraft.encode(e.graft[r],t.uint32(26).fork()).ldelim();if(null!=e.prune&&e.prune.length)for(r=0;r<e.prune.length;++r)o.RPC.ControlPrune.encode(e.prune[r],t.uint32(34).fork()).ldelim();return t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC.ControlMessage;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.ihave&&s.ihave.length||(s.ihave=[]),s.ihave.push(o.RPC.ControlIHave.decode(e,e.uint32()));break;case 2:s.iwant&&s.iwant.length||(s.iwant=[]),s.iwant.push(o.RPC.ControlIWant.decode(e,e.uint32()));break;case 3:s.graft&&s.graft.length||(s.graft=[]),s.graft.push(o.RPC.ControlGraft.decode(e,e.uint32()));break;case 4:s.prune&&s.prune.length||(s.prune=[]),s.prune.push(o.RPC.ControlPrune.decode(e,e.uint32()));break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC.ControlMessage)return e;var t=new o.RPC.ControlMessage;if(e.ihave){if(!Array.isArray(e.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");t.ihave=[];for(var n=0;n<e.ihave.length;++n){if("object"!==typeof e.ihave[n])throw TypeError(".RPC.ControlMessage.ihave: object expected");t.ihave[n]=o.RPC.ControlIHave.fromObject(e.ihave[n])}}if(e.iwant){if(!Array.isArray(e.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");t.iwant=[];for(n=0;n<e.iwant.length;++n){if("object"!==typeof e.iwant[n])throw TypeError(".RPC.ControlMessage.iwant: object expected");t.iwant[n]=o.RPC.ControlIWant.fromObject(e.iwant[n])}}if(e.graft){if(!Array.isArray(e.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");t.graft=[];for(n=0;n<e.graft.length;++n){if("object"!==typeof e.graft[n])throw TypeError(".RPC.ControlMessage.graft: object expected");t.graft[n]=o.RPC.ControlGraft.fromObject(e.graft[n])}}if(e.prune){if(!Array.isArray(e.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");t.prune=[];for(n=0;n<e.prune.length;++n){if("object"!==typeof e.prune[n])throw TypeError(".RPC.ControlMessage.prune: object expected");t.prune[n]=o.RPC.ControlPrune.fromObject(e.prune[n])}}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.ihave=[],n.iwant=[],n.graft=[],n.prune=[]),e.ihave&&e.ihave.length){n.ihave=[];for(var r=0;r<e.ihave.length;++r)n.ihave[r]=o.RPC.ControlIHave.toObject(e.ihave[r],t)}if(e.iwant&&e.iwant.length){n.iwant=[];for(r=0;r<e.iwant.length;++r)n.iwant[r]=o.RPC.ControlIWant.toObject(e.iwant[r],t)}if(e.graft&&e.graft.length){n.graft=[];for(r=0;r<e.graft.length;++r)n.graft[r]=o.RPC.ControlGraft.toObject(e.graft[r],t)}if(e.prune&&e.prune.length){n.prune=[];for(r=0;r<e.prune.length;++r)n.prune[r]=o.RPC.ControlPrune.toObject(e.prune[r],t)}return n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlIHave=function(){function s(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i;return s.prototype.topicID=null,s.prototype.messageIDs=r.emptyArray,Object.defineProperty(s.prototype,"_topicID",{get:r.oneOfGetter(i=["topicID"]),set:r.oneOfSetter(i)}),s.encode=function(e,t){if(t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.messageIDs&&e.messageIDs.length)for(var r=0;r<e.messageIDs.length;++r)t.uint32(18).bytes(e.messageIDs[r]);return t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC.ControlIHave;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.topicID=e.string();break;case 2:s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(e.bytes());break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC.ControlIHave)return e;var t=new o.RPC.ControlIHave;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");t.messageIDs=[];for(var n=0;n<e.messageIDs.length;++n)"string"===typeof e.messageIDs[n]?r.base64.decode(e.messageIDs[n],t.messageIDs[n]=r.newBuffer(r.base64.length(e.messageIDs[n])),0):e.messageIDs[n].length&&(t.messageIDs[n]=e.messageIDs[n])}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messageIDs=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(n.topicID=e.topicID,t.oneofs&&(n._topicID="topicID")),e.messageIDs&&e.messageIDs.length){n.messageIDs=[];for(var o=0;o<e.messageIDs.length;++o)n.messageIDs[o]=t.bytes===String?r.base64.encode(e.messageIDs[o],0,e.messageIDs[o].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[o]):e.messageIDs[o]}return n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlIWant=function(){function s(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.messageIDs=r.emptyArray,s.encode=function(e,t){if(t||(t=n.create()),null!=e.messageIDs&&e.messageIDs.length)for(var r=0;r<e.messageIDs.length;++r)t.uint32(10).bytes(e.messageIDs[r]);return t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC.ControlIWant;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(e.bytes());break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC.ControlIWant)return e;var t=new o.RPC.ControlIWant;if(e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");t.messageIDs=[];for(var n=0;n<e.messageIDs.length;++n)"string"===typeof e.messageIDs[n]?r.base64.decode(e.messageIDs[n],t.messageIDs[n]=r.newBuffer(r.base64.length(e.messageIDs[n])),0):e.messageIDs[n].length&&(t.messageIDs[n]=e.messageIDs[n])}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messageIDs=[]),e.messageIDs&&e.messageIDs.length){n.messageIDs=[];for(var o=0;o<e.messageIDs.length;++o)n.messageIDs[o]=t.bytes===String?r.base64.encode(e.messageIDs[o],0,e.messageIDs[o].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[o]):e.messageIDs[o]}return n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlGraft=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i;return s.prototype.topicID=null,Object.defineProperty(s.prototype,"_topicID",{get:r.oneOfGetter(i=["topicID"]),set:r.oneOfSetter(i)}),s.encode=function(e,t){return t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC.ControlGraft;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.topicID=e.string();break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC.ControlGraft)return e;var t=new o.RPC.ControlGraft;return null!=e.topicID&&(t.topicID=String(e.topicID)),t},s.toObject=function(e,t){t||(t={});var n={};return null!=e.topicID&&e.hasOwnProperty("topicID")&&(n.topicID=e.topicID,t.oneofs&&(n._topicID="topicID")),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlPrune=function(){function s(e){if(this.peers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i;return s.prototype.topicID=null,s.prototype.peers=r.emptyArray,s.prototype.backoff=null,Object.defineProperty(s.prototype,"_topicID",{get:r.oneOfGetter(i=["topicID"]),set:r.oneOfSetter(i)}),Object.defineProperty(s.prototype,"_backoff",{get:r.oneOfGetter(i=["backoff"]),set:r.oneOfSetter(i)}),s.encode=function(e,t){if(t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.peers&&e.peers.length)for(var r=0;r<e.peers.length;++r)o.RPC.PeerInfo.encode(e.peers[r],t.uint32(18).fork()).ldelim();return null!=e.backoff&&Object.hasOwnProperty.call(e,"backoff")&&t.uint32(24).uint64(e.backoff),t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC.ControlPrune;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.topicID=e.string();break;case 2:s.peers&&s.peers.length||(s.peers=[]),s.peers.push(o.RPC.PeerInfo.decode(e,e.uint32()));break;case 3:s.backoff=e.uint64();break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC.ControlPrune)return e;var t=new o.RPC.ControlPrune;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.peers){if(!Array.isArray(e.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");t.peers=[];for(var n=0;n<e.peers.length;++n){if("object"!==typeof e.peers[n])throw TypeError(".RPC.ControlPrune.peers: object expected");t.peers[n]=o.RPC.PeerInfo.fromObject(e.peers[n])}}return null!=e.backoff&&(r.Long?(t.backoff=r.Long.fromValue(e.backoff)).unsigned=!0:"string"===typeof e.backoff?t.backoff=parseInt(e.backoff,10):"number"===typeof e.backoff?t.backoff=e.backoff:"object"===typeof e.backoff&&(t.backoff=new r.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0))),t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.peers=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(n.topicID=e.topicID,t.oneofs&&(n._topicID="topicID")),e.peers&&e.peers.length){n.peers=[];for(var s=0;s<e.peers.length;++s)n.peers[s]=o.RPC.PeerInfo.toObject(e.peers[s],t)}return null!=e.backoff&&e.hasOwnProperty("backoff")&&("number"===typeof e.backoff?n.backoff=t.longs===String?String(e.backoff):e.backoff:n.backoff=t.longs===String?r.Long.prototype.toString.call(e.backoff):t.longs===Number?new r.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0):e.backoff,t.oneofs&&(n._backoff="backoff")),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.PeerInfo=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i;return s.prototype.peerID=null,s.prototype.signedPeerRecord=null,Object.defineProperty(s.prototype,"_peerID",{get:r.oneOfGetter(i=["peerID"]),set:r.oneOfSetter(i)}),Object.defineProperty(s.prototype,"_signedPeerRecord",{get:r.oneOfGetter(i=["signedPeerRecord"]),set:r.oneOfSetter(i)}),s.encode=function(e,t){return t||(t=n.create()),null!=e.peerID&&Object.hasOwnProperty.call(e,"peerID")&&t.uint32(10).bytes(e.peerID),null!=e.signedPeerRecord&&Object.hasOwnProperty.call(e,"signedPeerRecord")&&t.uint32(18).bytes(e.signedPeerRecord),t},s.decode=function(e,n){e instanceof t||(e=t.create(e));var r=void 0===n?e.len:e.pos+n,s=new o.RPC.PeerInfo;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:s.peerID=e.bytes();break;case 2:s.signedPeerRecord=e.bytes();break;default:e.skipType(7&i);break}}return s},s.fromObject=function(e){if(e instanceof o.RPC.PeerInfo)return e;var t=new o.RPC.PeerInfo;return null!=e.peerID&&("string"===typeof e.peerID?r.base64.decode(e.peerID,t.peerID=r.newBuffer(r.base64.length(e.peerID)),0):e.peerID.length&&(t.peerID=e.peerID)),null!=e.signedPeerRecord&&("string"===typeof e.signedPeerRecord?r.base64.decode(e.signedPeerRecord,t.signedPeerRecord=r.newBuffer(r.base64.length(e.signedPeerRecord)),0):e.signedPeerRecord.length&&(t.signedPeerRecord=e.signedPeerRecord)),t},s.toObject=function(e,t){t||(t={});var n={};return null!=e.peerID&&e.hasOwnProperty("peerID")&&(n.peerID=t.bytes===String?r.base64.encode(e.peerID,0,e.peerID.length):t.bytes===Array?Array.prototype.slice.call(e.peerID):e.peerID,t.oneofs&&(n._peerID="peerID")),null!=e.signedPeerRecord&&e.hasOwnProperty("signedPeerRecord")&&(n.signedPeerRecord=t.bytes===String?r.base64.encode(e.signedPeerRecord,0,e.signedPeerRecord.length):t.bytes===Array?Array.prototype.slice.call(e.signedPeerRecord):e.signedPeerRecord,t.oneofs&&(n._signedPeerRecord="signedPeerRecord")),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s}(),o}))},9297:function(e){(function(){e.exports=m;var t=86400,n=3200,r=146097*n/400,o=t*r,s=1e3*o,i=864e13,a=4294967296,l=1e6,c="000000000",u=Math.trunc||function(e){var t=e-e%1;return 0==t&&(e<0||0===e&&1/e!=1/0)?-0:t},d=m.prototype,h=(m.fromDate=function(e){return new m(+e)},m.fromInt64BE=S(0,1,2,3,0,4),m.fromInt64LE=S(3,2,1,0,4,0),m.fromString=function(e){var t,n=new m;e=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){e=+e;var t=1970+(e-1970)%400;return n.year=e-t,t})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,n,r){return n<0&&(r*=-1),t=6e4*(60*+n+ +r),""})).replace(/\.\d+$/,(function(e){return n.nano=+(e+c).substr(1,9),""})).split(/\D+/);if(1<e.length?e[1]--:e[1]=0,n.time=t=Date.UTC.apply(Date,e)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return y(n)},m.fromTimeT=function(e){return w(e,0)},d.year=0,d.time=0,d.nano=0,d.addNano=function(e){return this.nano+=+e||0,this},d.getNano=function(){var e=y(this);return(e.time%1e3*l+ +e.nano+1e9)%1e9},d.getTimeT=function(){var e=y(this),o=Math.floor(e.time/1e3);e=e.year;return e&&(o+=e*r*t/n),o},d.getYear=function(){return this.toDate().getUTCFullYear()+this.year},d.toDate=function(){return v(y(this).time)},d.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},d.toString=function(e){var t=this,n=t.toDate(),r={H:function(){return E(n.getUTCHours())},L:function(){return k(n.getUTCMilliseconds(),3)},M:function(){return E(n.getUTCMinutes())},N:function(){return k(t.getNano(),9)},S:function(){return E(n.getUTCSeconds())},Y:function(){var e=t.getYear();return 999999<e?"+"+e:9999<e?"+"+k(e,6):0<=e?k(e,4):-999999<=e?"-"+k(-e,6):e},a:function(){return f[n.getUTCDay()]},b:function(){return p[n.getUTCMonth()]},d:function(){return E(n.getUTCDate())},e:function(){return function(e){return(9<e?"":" ")+(0|e)}(n.getUTCDate())},m:function(){return E(n.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var n=t[1],o=g[n];n=r[n];return o?e(o):n?n():t}))}(e||h)},d.writeInt64BE=b(0,1,2,3,0,4),d.writeInt64LE=b(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return m;function m(e,t,n){var r=this;if(!(r instanceof m))return new m(e,t,n);r.time=+e||0,r.nano=+t||0,r.year=+n||0,y(r)}function y(e){var t,r,o,a=e.year,c=e.time,d=e.nano,h=((d<0||l<=d)&&(d-=(r=Math.floor(d/l))*l,c+=r,r=1),a%n);return(c<-i||i<c||h)&&((t=u(c/s))&&(a+=t*n,c-=t*s),(o=v(c)).setUTCFullYear(h+o.getUTCFullYear()),o=(c=+o)+(t=u((a-=h)/n))*s,t&&-i<=o&&o<=i&&(a-=t*n,c=o),r=1),r&&(e.year=a,e.time=c,e.nano=d),e}function v(e){var t=new Date(0);return t.setTime(e),t}function w(e,t){e=+e||0;var r=u((t=(0|t)*a)/o)+u(e/o);t=t%o+e%o,e=u(t/o);return e&&(r+=e,t-=e*o),new m(1e3*t,0,r*n)}function b(e,o,s,i,l,c){return function(e,o){var s=y(this);e=e||new Array(8),_(e,o|=0);var i=Math.floor(s.time/1e3),h=(s=s.year*(r*t/n),u(s/a)+u(i/a));s=s%a+i%a,i=Math.floor(s/a);return i&&(h+=i,s-=i*a),d(e,o+l,h),d(e,o+c,s),e};function d(t,n,r){t[n+e]=r>>24&255,t[n+o]=r>>16&255,t[n+s]=r>>8&255,t[n+i]=255&r}}function S(e,t,n,r,o,s){return function(e,t){_(e,t|=0);var n=i(e,t+o);return w(i(e,t+s),n)};function i(o,s){return 16777216*o[s+e]+(o[s+t]<<16|o[s+n]<<8|o[s+r])}}function _(e,t){if(e=e&&e.length,null==e)throw new TypeError("Invalid Buffer");if(e<t+8)throw new RangeError("Out of range")}function E(e){return(9<e?"":"0")+(0|e)}function k(e,t){return(c+(0|e)).substr(-t)}})()},5781:function(e,t,n){"use strict";n.d(t,{BAP:function(){return Je},BBB:function(){return gt},D5R:function(){return dn},DYM:function(){return zr},G7x:function(){return Rr},H9A:function(){return Wr},HG3:function(){return ct},ITT:function(){return St},JrY:function(){return se},K41:function(){return Oe},K5e:function(){return u},Ncu:function(){return sr},RhE:function(){return dr},Rrw:function(){return Ur},Ruj:function(){return En},SUY:function(){return Fe},TZ:function(){return W},Tkc:function(){return on},Tw$:function(){return ke},Ufu:function(){return Rn},Uxw:function(){return yr},Vx7:function(){return X},Vyf:function(){return Un},WF_:function(){return qt},XdH:function(){return m},a2Z:function(){return T},c5o:function(){return Er},cEj:function(){return Dt},caK:function(){return Tt},eJh:function(){return U},faS:function(){return z},gbz:function(){return jt},laI:function(){return Xn},ohl:function(){return Qt},olP:function(){return _},olm:function(){return Wn},rGh:function(){return zn},rV3:function(){return de},tsQ:function(){return rt},v37:function(){return yn},x8P:function(){return Ke},yGk:function(){return ve}});var r=n(6252),o=(e,t)=>{let n=e.__vccOpts||e;for(let[r,o]of t)n[r]=o;return n};
/*! Element Plus Icons Vue v2.1.0 */var s={name:"ArrowDown"},i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},a=(0,r._)("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),l=[a];function c(e,t,n,o,s,a){return(0,r.wg)(),(0,r.iD)("svg",i,l)}var u=o(s,[["render",c],["__file","arrow-down.vue"]]);var d={name:"ArrowLeft"},h={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},p=(0,r._)("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),f=[p];function g(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",h,f)}var m=o(d,[["render",g],["__file","arrow-left.vue"]]);var y={name:"ArrowRight"},v={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},w=(0,r._)("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),b=[w];function S(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",v,b)}var _=o(y,[["render",S],["__file","arrow-right.vue"]]);var E={name:"ArrowUp"},k={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},C=(0,r._)("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),I=[C];function A(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",k,I)}var T=o(E,[["render",A],["__file","arrow-up.vue"]]);var R={name:"Back"},x={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},O=(0,r._)("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),N=(0,r._)("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),P=[O,N];function D(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",x,P)}var U=o(R,[["render",D],["__file","back.vue"]]);var L={name:"Calendar"},B={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},M=(0,r._)("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"},null,-1),F=[M];function j(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",B,F)}var z=o(L,[["render",j],["__file","calendar.vue"]]);var $={name:"CaretRight"},V={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},H=(0,r._)("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),K=[H];function q(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",V,K)}var W=o($,[["render",q],["__file","caret-right.vue"]]),Y={name:"CaretTop"},G={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Z=(0,r._)("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),J=[Z];function Q(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",G,J)}var X=o(Y,[["render",Q],["__file","caret-top.vue"]]);var ee={name:"Check"},te={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ne=(0,r._)("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),re=[ne];function oe(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",te,re)}var se=o(ee,[["render",oe],["__file","check.vue"]]);var ie={name:"CircleCheckFilled"},ae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},le=(0,r._)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),ce=[le];function ue(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",ae,ce)}var de=o(ie,[["render",ue],["__file","circle-check-filled.vue"]]),he={name:"CircleCheck"},pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},fe=(0,r._)("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),ge=(0,r._)("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),me=[fe,ge];function ye(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",pe,me)}var ve=o(he,[["render",ye],["__file","circle-check.vue"]]),we={name:"CircleCloseFilled"},be={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Se=(0,r._)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),_e=[Se];function Ee(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",be,_e)}var ke=o(we,[["render",Ee],["__file","circle-close-filled.vue"]]),Ce={name:"CircleClose"},Ie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ae=(0,r._)("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),Te=(0,r._)("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),Re=[Ae,Te];function xe(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Ie,Re)}var Oe=o(Ce,[["render",xe],["__file","circle-close.vue"]]);var Ne={name:"Clock"},Pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},De=(0,r._)("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),Ue=(0,r._)("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"},null,-1),Le=(0,r._)("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),Be=[De,Ue,Le];function Me(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Pe,Be)}var Fe=o(Ne,[["render",Me],["__file","clock.vue"]]);var je={name:"Close"},ze={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},$e=(0,r._)("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Ve=[$e];function He(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",ze,Ve)}var Ke=o(je,[["render",He],["__file","close.vue"]]);var qe={name:"DArrowLeft"},We={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ye=(0,r._)("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),Ge=[Ye];function Ze(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",We,Ge)}var Je=o(qe,[["render",Ze],["__file","d-arrow-left.vue"]]),Qe={name:"DArrowRight"},Xe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},et=(0,r._)("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),tt=[et];function nt(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Xe,tt)}var rt=o(Qe,[["render",nt],["__file","d-arrow-right.vue"]]);var ot={name:"Delete"},st={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},it=(0,r._)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),at=[it];function lt(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",st,at)}var ct=o(ot,[["render",lt],["__file","delete.vue"]]);var ut={name:"Document"},dt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ht=(0,r._)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),pt=[ht];function ft(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",dt,pt)}var gt=o(ut,[["render",ft],["__file","document.vue"]]);var mt={name:"FullScreen"},yt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},vt=(0,r._)("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),wt=[vt];function bt(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",yt,wt)}var St=o(mt,[["render",bt],["__file","full-screen.vue"]]);var _t={name:"Hide"},Et={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},kt=(0,r._)("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),Ct=(0,r._)("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),It=[kt,Ct];function At(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Et,It)}var Tt=o(_t,[["render",At],["__file","hide.vue"]]);var Rt={name:"InfoFilled"},xt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ot=(0,r._)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),Nt=[Ot];function Pt(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",xt,Nt)}var Dt=o(Rt,[["render",Pt],["__file","info-filled.vue"]]);var Ut={name:"Loading"},Lt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Bt=(0,r._)("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Mt=[Bt];function Ft(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Lt,Mt)}var jt=o(Ut,[["render",Ft],["__file","loading.vue"]]);var zt={name:"Minus"},$t={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Vt=(0,r._)("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),Ht=[Vt];function Kt(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",$t,Ht)}var qt=o(zt,[["render",Kt],["__file","minus.vue"]]);var Wt={name:"MoreFilled"},Yt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Gt=(0,r._)("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),Zt=[Gt];function Jt(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Yt,Zt)}var Qt=o(Wt,[["render",Jt],["__file","more-filled.vue"]]),Xt={name:"More"},en={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},tn=(0,r._)("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),nn=[tn];function rn(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",en,nn)}var on=o(Xt,[["render",rn],["__file","more.vue"]]);var sn={name:"PictureFilled"},an={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ln=(0,r._)("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),cn=[ln];function un(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",an,cn)}var dn=o(sn,[["render",un],["__file","picture-filled.vue"]]);var hn={name:"Plus"},pn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},fn=(0,r._)("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),gn=[fn];function mn(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",pn,gn)}var yn=o(hn,[["render",mn],["__file","plus.vue"]]);var vn={name:"QuestionFilled"},wn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},bn=(0,r._)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),Sn=[bn];function _n(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",wn,Sn)}var En=o(vn,[["render",_n],["__file","question-filled.vue"]]);var kn={name:"RefreshLeft"},Cn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},In=(0,r._)("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),An=[In];function Tn(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Cn,An)}var Rn=o(kn,[["render",Tn],["__file","refresh-left.vue"]]),xn={name:"RefreshRight"},On={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Nn=(0,r._)("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),Pn=[Nn];function Dn(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",On,Pn)}var Un=o(xn,[["render",Dn],["__file","refresh-right.vue"]]);var Ln={name:"ScaleToOriginal"},Bn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Mn=(0,r._)("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),Fn=[Mn];function jn(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Bn,Fn)}var zn=o(Ln,[["render",jn],["__file","scale-to-original.vue"]]);var $n={name:"Search"},Vn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Hn=(0,r._)("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Kn=[Hn];function qn(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Vn,Kn)}var Wn=o($n,[["render",qn],["__file","search.vue"]]);var Yn={name:"SortDown"},Gn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Zn=(0,r._)("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0z"},null,-1),Jn=[Zn];function Qn(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Gn,Jn)}var Xn=o(Yn,[["render",Qn],["__file","sort-down.vue"]]),er={name:"SortUp"},tr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},nr=(0,r._)("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248z"},null,-1),rr=[nr];function or(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",tr,rr)}var sr=o(er,[["render",or],["__file","sort-up.vue"]]);var ir={name:"StarFilled"},ar={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},lr=(0,r._)("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"},null,-1),cr=[lr];function ur(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",ar,cr)}var dr=o(ir,[["render",ur],["__file","star-filled.vue"]]),hr={name:"Star"},pr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},fr=(0,r._)("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),gr=[fr];function mr(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",pr,gr)}var yr=o(hr,[["render",mr],["__file","star.vue"]]);var vr={name:"SuccessFilled"},wr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},br=(0,r._)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),Sr=[br];function _r(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",wr,Sr)}var Er=o(vr,[["render",_r],["__file","success-filled.vue"]]);var kr={name:"View"},Cr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ir=(0,r._)("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),Ar=[Ir];function Tr(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Cr,Ar)}var Rr=o(kr,[["render",Tr],["__file","view.vue"]]);var xr={name:"WarningFilled"},Or={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Nr=(0,r._)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),Pr=[Nr];function Dr(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Or,Pr)}var Ur=o(xr,[["render",Dr],["__file","warning-filled.vue"]]);var Lr={name:"ZoomIn"},Br={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Mr=(0,r._)("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),Fr=[Mr];function jr(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Br,Fr)}var zr=o(Lr,[["render",jr],["__file","zoom-in.vue"]]),$r={name:"ZoomOut"},Vr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Hr=(0,r._)("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),Kr=[Hr];function qr(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("svg",Vr,Kr)}var Wr=o($r,[["render",qr],["__file","zoom-out.vue"]])},490:function(e,t,n){"use strict";n.d(t,{i9H:function(){return h},NXq:function(){return a},Zaf:function(){return y},xKQ:function(){return v},rBN:function(){return k},ORN:function(){return u},yU7:function(){return E},NCN:function(){return P},vou:function(){return D},iPe:function(){return U}});var r=n(1218),o=n(6252),s=n(2262),i=!1;function a(e){var t;const n=(0,r.Ly)(e);return null!=(t=null==n?void 0:n.$el)?t:n}const l=r.C5?window:void 0,c=r.C5?window.document:void 0;r.C5&&window.navigator,r.C5&&window.location;function u(...e){let t,n,s,i;if((0,r.HD)(e[0])||Array.isArray(e[0])?([n,s,i]=e,t=l):[t,n,s,i]=e,!t)return r.ZT;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const c=[],u=()=>{c.forEach((e=>e())),c.length=0},d=(e,t,n,r)=>(e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)),h=(0,o.YP)((()=>[a(t),(0,r.Ly)(i)]),(([e,t])=>{u(),e&&c.push(...n.flatMap((n=>s.map((r=>d(e,n,r,t))))))}),{immediate:!0,flush:"post"}),p=()=>{h(),u()};return(0,r.IY)(p),p}let d=!1;function h(e,t,n={}){const{window:o=l,ignore:s=[],capture:i=!0,detectIframe:c=!1}=n;if(!o)return;r.gn&&!d&&(d=!0,Array.from(o.document.body.children).forEach((e=>e.addEventListener("click",r.ZT))));let h=!0;const p=e=>s.some((t=>{if("string"===typeof t)return Array.from(o.document.querySelectorAll(t)).some((t=>t===e.target||e.composedPath().includes(t)));{const n=a(t);return n&&(e.target===n||e.composedPath().includes(n))}})),f=n=>{const r=a(e);r&&r!==n.target&&!n.composedPath().includes(r)&&(0===n.detail&&(h=!p(n)),h?t(n):h=!0)},g=[u(o,"click",f,{passive:!0,capture:i}),u(o,"pointerdown",(t=>{const n=a(e);n&&(h=!t.composedPath().includes(n)&&!p(t))}),{passive:!0}),c&&u(o,"blur",(n=>{var r;const s=a(e);"IFRAME"!==(null==(r=o.document.activeElement)?void 0:r.tagName)||(null==s?void 0:s.contains(o.document.activeElement))||t(n)}))].filter(Boolean),m=()=>g.forEach((e=>e()));return m}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function p(e,t=!1){const n=(0,s.iH)(),o=()=>n.value=Boolean(e());return o(),(0,r.u7)(o,t),n}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function f(e){return JSON.parse(JSON.stringify(e))}const g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},m="__vueuse_ssr_handlers__";g[m]=g[m]||{};g[m];Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function y(e,t,{window:n=l,initialValue:i=""}={}){const c=(0,s.iH)(i),u=(0,o.Fl)((()=>{var e;return a(t)||(null==(e=null==n?void 0:n.document)?void 0:e.documentElement)}));return(0,o.YP)([u,()=>(0,r.Ly)(e)],(([e,t])=>{var r;if(e&&n){const o=null==(r=n.getComputedStyle(e).getPropertyValue(t))?void 0:r.trim();c.value=o||i}}),{immediate:!0}),(0,o.YP)(c,(t=>{var n;(null==(n=u.value)?void 0:n.style)&&u.value.style.setProperty((0,r.Ly)(e),t)})),c}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function v({document:e=c}={}){if(!e)return(0,s.iH)("visible");const t=(0,s.iH)(e.visibilityState);return u(e,"visibilitychange",(()=>{t.value=e.visibilityState})),t}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var w=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,_=(e,t)=>{var n={};for(var r in e)b.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&w)for(var r of w(e))t.indexOf(r)<0&&S.call(e,r)&&(n[r]=e[r]);return n};function E(e,t,n={}){const s=n,{window:i=l}=s,c=_(s,["window"]);let u;const d=p((()=>i&&"ResizeObserver"in i)),h=()=>{u&&(u.disconnect(),u=void 0)},f=(0,o.YP)((()=>a(e)),(e=>{h(),d.value&&i&&e&&(u=new ResizeObserver(t),u.observe(e,c))}),{immediate:!0,flush:"post"}),g=()=>{h(),f()};return(0,r.IY)(g),{isSupported:d,stop:g}}function k(e,t={}){const{reset:n=!0,windowResize:i=!0,windowScroll:l=!0,immediate:c=!0}=t,d=(0,s.iH)(0),h=(0,s.iH)(0),p=(0,s.iH)(0),f=(0,s.iH)(0),g=(0,s.iH)(0),m=(0,s.iH)(0),y=(0,s.iH)(0),v=(0,s.iH)(0);function w(){const t=a(e);if(!t)return void(n&&(d.value=0,h.value=0,p.value=0,f.value=0,g.value=0,m.value=0,y.value=0,v.value=0));const r=t.getBoundingClientRect();d.value=r.height,h.value=r.bottom,p.value=r.left,f.value=r.right,g.value=r.top,m.value=r.width,y.value=r.x,v.value=r.y}return E(e,w),(0,o.YP)((()=>a(e)),(e=>!e&&w())),l&&u("scroll",w,{capture:!0,passive:!0}),i&&u("resize",w,{passive:!0}),(0,r.u7)((()=>{c&&w()})),{height:d,bottom:h,left:p,right:f,top:g,width:m,x:y,y:v,update:w}}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;new Map;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var C;(function(e){e["UP"]="UP",e["RIGHT"]="RIGHT",e["DOWN"]="DOWN",e["LEFT"]="LEFT",e["NONE"]="NONE"})(C||(C={}));Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var I=Object.defineProperty,A=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,x=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))T.call(t,n)&&x(e,n,t[n]);if(A)for(var n of A(t))R.call(t,n)&&x(e,n,t[n]);return e};const N={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};O({linear:r.yR},N);function P(e,t,n,a={}){var l,c,u,d,h;const{clone:p=!1,passive:g=!1,eventName:m,deep:y=!1,defaultValue:v}=a,w=(0,o.FN)(),b=n||(null==w?void 0:w.emit)||(null==(l=null==w?void 0:w.$emit)?void 0:l.bind(w))||(null==(u=null==(c=null==w?void 0:w.proxy)?void 0:c.$emit)?void 0:u.bind(null==w?void 0:w.proxy));let S=m;if(!t)if(i){const e=null==(h=null==(d=null==w?void 0:w.proxy)?void 0:d.$options)?void 0:h.model;t=(null==e?void 0:e.value)||"value",m||(S=(null==e?void 0:e.event)||"input")}else t="modelValue";S=m||S||`update:${t.toString()}`;const _=e=>p?(0,r.mf)(p)?p(e):f(e):e,E=()=>(0,r.Xq)(e[t])?_(e[t]):v;if(g){const n=E(),r=(0,s.iH)(n);return(0,o.YP)((()=>e[t]),(e=>r.value=_(e))),(0,o.YP)(r,(n=>{(n!==e[t]||y)&&b(S,n)}),{deep:y}),r}return(0,o.Fl)({get(){return E()},set(e){b(S,e)}})}function D({window:e=l}={}){if(!e)return(0,s.iH)(!1);const t=(0,s.iH)(e.document.hasFocus());return u(e,"blur",(()=>{t.value=!1})),u(e,"focus",(()=>{t.value=!0})),t}function U(e={}){const{window:t=l,initialWidth:n=1/0,initialHeight:o=1/0,listenOrientation:i=!0,includeScrollbar:a=!0}=e,c=(0,s.iH)(n),d=(0,s.iH)(o),h=()=>{t&&(a?(c.value=t.innerWidth,d.value=t.innerHeight):(c.value=t.document.documentElement.clientWidth,d.value=t.document.documentElement.clientHeight))};return h(),(0,r.u7)(h),u("resize",h,{passive:!0}),i&&u("orientationchange",h,{passive:!0}),{width:c,height:d}}},1218:function(e,t,n){"use strict";n.d(t,{Rc:function(){return g},yR:function(){return T},jn:function(){return v},C5:function(){return m},Xq:function(){return y},mf:function(){return w},gn:function(){return E},hj:function(){return b},HD:function(){return S},ZT:function(){return _},Dp:function(){return O},Ly:function(){return k},u7:function(){return P},IY:function(){return R},vA:function(){return N},eM:function(){return D}});var r=n(2262),o=n(6252);var s,i=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&h(e,n,t[n]);if(c)for(var n of c(t))d.call(t,n)&&h(e,n,t[n]);return e},f=(e,t)=>a(e,l(t));function g(e,t){var n;const s=(0,r.XI)();return(0,o.m0)((()=>{s.value=e()}),f(p({},t),{flush:null!=(n=null==t?void 0:t.flush)?n:"sync"})),(0,r.OT)(s)}const m="undefined"!==typeof window,y=e=>"undefined"!==typeof e,v=(Object.prototype.toString,e=>"boolean"===typeof e),w=e=>"function"===typeof e,b=e=>"number"===typeof e,S=e=>"string"===typeof e,_=()=>{},E=m&&(null==(s=null==window?void 0:window.navigator)?void 0:s.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function k(e){return"function"===typeof e?e():(0,r.SU)(e)}function C(e,t){function n(...n){return new Promise(((r,o)=>{Promise.resolve(e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})).then(r).catch(o)}))}return n}function I(e,t={}){let n,r,o=_;const s=e=>{clearTimeout(e),o(),o=_},i=i=>{const a=k(e),l=k(t.maxWait);return n&&s(n),a<=0||void 0!==l&&l<=0?(r&&(s(r),r=null),Promise.resolve(i())):new Promise(((e,c)=>{o=t.rejectOnCancel?c:e,l&&!r&&(r=setTimeout((()=>{n&&s(n),r=null,e(i())}),l)),n=setTimeout((()=>{r&&s(r),r=null,e(i())}),a)}))};return i}function A(e,t=!0,n=!0,r=!1){let o,s,i=0,a=!0,l=_;const c=()=>{o&&(clearTimeout(o),o=void 0,l(),l=_)},u=u=>{const d=k(e),h=Date.now()-i,p=()=>s=u();return c(),d<=0?(i=Date.now(),p()):(h>d&&(n||!a)?(i=Date.now(),p()):t&&(s=new Promise(((e,t)=>{l=r?t:e,o=setTimeout((()=>{i=Date.now(),a=!0,e(p()),c()}),Math.max(0,d-h))}))),n||o||(o=setTimeout((()=>a=!0),d)),a=!1,s)};return u}function T(e){return e}function R(e){return!!(0,r.nZ)()&&((0,r.EB)(e),!0)}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function x(e,t=200,n={}){return C(I(t,n),e)}function O(e,t=200,n={}){const s=(0,r.iH)(e.value),i=x((()=>{s.value=e.value}),t,n);return(0,o.YP)(e,(()=>i())),s}function N(e,t=200,n=!1,r=!0,o=!1){return C(A(t,n,r,o),e)}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function P(e,t=!0){(0,o.FN)()?(0,o.bv)(e):t?e():(0,o.Y3)(e)}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function D(e,t,n={}){const{immediate:o=!0}=n,s=(0,r.iH)(!1);let i=null;function a(){i&&(clearTimeout(i),i=null)}function l(){s.value=!1,a()}function c(...n){a(),s.value=!0,i=setTimeout((()=>{s.value=!1,i=null,e(...n)}),k(t))}return o&&(s.value=!0,m&&c()),R(l),{isPending:(0,r.OT)(s),start:c,stop:l}}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable},1446:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n}},5659:function(e,t,n){"use strict";n.d(t,{mi:function(){return T},MO:function(){return R}});var r=n(6252),o=n(3577),s=n(2262),i=n(4181);const a=Symbol("buttonGroupContextKey");var l=n(9379),c=n(6502),u=n(5620),d=n(1069);const h=(e,t)=>{(0,l.A)({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},(0,r.Fl)((()=>"text"===e.type)));const n=(0,r.f3)(a,void 0),o=(0,c.WS)("button"),{form:i}=(0,u.A)(),h=(0,d.Cd)((0,r.Fl)((()=>null==n?void 0:n.size))),p=(0,d.DT)(),f=(0,s.iH)(),g=(0,r.Rr)(),m=(0,r.Fl)((()=>e.type||(null==n?void 0:n.type)||"")),y=(0,r.Fl)((()=>{var t,n,r;return null!=(r=null!=(n=e.autoInsertSpace)?n:null==(t=o.value)?void 0:t.autoInsertSpace)&&r})),v=(0,r.Fl)((()=>{var e;const t=null==(e=g.default)?void 0:e.call(g);if(y.value&&1===(null==t?void 0:t.length)){const e=t[0];if((null==e?void 0:e.type)===r.xv){const t=e.children;return/^\p{Unified_Ideograph}{2}$/u.test(t.trim())}}return!1})),w=n=>{"reset"===e.nativeType&&(null==i||i.resetFields()),t("click",n)};return{_disabled:p,_size:h,_type:m,_ref:f,shouldAddSpace:v,handleClick:w}};var p=n(7667),f=n(8032),g=n(9143);function m(e,t=20){return e.mix("#141414",t).toString()}function y(e){const t=(0,d.DT)(),n=(0,g.s3)("button");return(0,r.Fl)((()=>{let r={};const o=e.color;if(o){const s=new f.C(o),i=e.dark?s.tint(20).toString():m(s,20);if(e.plain)r=n.cssVarBlock({"bg-color":e.dark?m(s,90):s.tint(90).toString(),"text-color":o,"border-color":e.dark?m(s,50):s.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":o,"hover-border-color":o,"active-bg-color":i,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":i}),t.value&&(r[n.cssVarBlockName("disabled-bg-color")]=e.dark?m(s,90):s.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=e.dark?m(s,50):s.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=e.dark?m(s,80):s.tint(80).toString());else{const a=e.dark?m(s,30):s.tint(30).toString(),l=s.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":o,"text-color":l,"border-color":o,"hover-bg-color":a,"hover-text-color":l,"hover-border-color":a,"active-bg-color":i,"active-border-color":i}),t.value){const t=e.dark?m(s,50):s.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=t,r[n.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=t}}}return r}))}var v=n(1446);const w=["aria-disabled","disabled","autofocus","type"],b=(0,r.aZ)({name:"ElButton"}),S=(0,r.aZ)({...b,props:p.lS,emits:p.et,setup(e,{expose:t,emit:n}){const a=e,l=y(a),c=(0,g.s3)("button"),{_ref:u,_size:d,_type:p,_disabled:f,shouldAddSpace:m,handleClick:v}=h(a,n);return t({ref:u,size:d,type:p,disabled:f,shouldAddSpace:m}),(e,t)=>((0,r.wg)(),(0,r.iD)("button",{ref_key:"_ref",ref:u,class:(0,o.C_)([(0,s.SU)(c).b(),(0,s.SU)(c).m((0,s.SU)(p)),(0,s.SU)(c).m((0,s.SU)(d)),(0,s.SU)(c).is("disabled",(0,s.SU)(f)),(0,s.SU)(c).is("loading",e.loading),(0,s.SU)(c).is("plain",e.plain),(0,s.SU)(c).is("round",e.round),(0,s.SU)(c).is("circle",e.circle),(0,s.SU)(c).is("text",e.text),(0,s.SU)(c).is("link",e.link),(0,s.SU)(c).is("has-bg",e.bg)]),"aria-disabled":(0,s.SU)(f)||e.loading,disabled:(0,s.SU)(f)||e.loading,autofocus:e.autofocus,type:e.nativeType,style:(0,o.j5)((0,s.SU)(l)),onClick:t[0]||(t[0]=(...e)=>(0,s.SU)(v)&&(0,s.SU)(v)(...e))},[e.loading?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.$slots.loading?(0,r.WI)(e.$slots,"loading",{key:0}):((0,r.wg)(),(0,r.j4)((0,s.SU)(i.gn),{key:1,class:(0,o.C_)((0,s.SU)(c).is("loading"))},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.loadingIcon)))])),_:1},8,["class"]))],64)):e.icon||e.$slots.icon?((0,r.wg)(),(0,r.j4)((0,s.SU)(i.gn),{key:1},{default:(0,r.w5)((()=>[e.icon?((0,r.wg)(),(0,r.j4)((0,r.LL)(e.icon),{key:0})):(0,r.WI)(e.$slots,"icon",{key:1})])),_:3})):(0,r.kq)("v-if",!0),e.$slots.default?((0,r.wg)(),(0,r.iD)("span",{key:2,class:(0,o.C_)({[(0,s.SU)(c).em("text","expand")]:(0,s.SU)(m)})},[(0,r.WI)(e.$slots,"default")],2)):(0,r.kq)("v-if",!0)],14,w))}});var _=(0,v.Z)(S,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const E={size:p.lS.size,type:p.lS.type},k=(0,r.aZ)({name:"ElButtonGroup"}),C=(0,r.aZ)({...k,props:E,setup(e){const t=e;(0,r.JJ)(a,(0,s.qj)({size:(0,s.Vh)(t,"size"),type:(0,s.Vh)(t,"type")}));const n=(0,g.s3)("button");return(e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(`${(0,s.SU)(n).b("group")}`)},[(0,r.WI)(e.$slots,"default")],2))}});var I=(0,v.Z)(C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]),A=n(2123);const T=(0,A.nz)(_,{ButtonGroup:I}),R=(0,A.dp)(I)},7667:function(e,t,n){"use strict";n.d(t,{UH:function(){return a},et:function(){return u},lS:function(){return c}});var r=n(5781),o=n(5027),s=n(2771),i=n(9809);const a=["default","primary","success","warning","info","danger","text",""],l=["button","submit","reset"],c=(0,o.o8)({size:s.Pp,disabled:Boolean,type:{type:String,values:a,default:""},icon:{type:i.AA},nativeType:{type:String,values:l,default:"button"},loading:Boolean,loadingIcon:{type:i.AA,default:()=>r.gbz},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0}}),u={click:e=>e instanceof MouseEvent}},6502:function(e,t,n){"use strict";n.d(t,{AR:function(){return g},cU:function(){return f},WS:function(){return p}});var r=n(2262),o=n(6252);const s=Symbol();var i=n(9143),a=n(7774),l=n(4568),c=n(4721),u=n(2771),d=n(5437);const h=(0,r.iH)();function p(e,t=undefined){const n=(0,o.FN)()?(0,o.f3)(s,h):h;return e?(0,o.Fl)((()=>{var r,o;return null!=(o=null==(r=n.value)?void 0:r[e])?o:t})):n}function f(e,t){const n=p(),s=(0,i.s3)(e,(0,o.Fl)((()=>{var e;return(null==(e=n.value)?void 0:e.namespace)||i.tL}))),c=(0,a.bU)((0,o.Fl)((()=>{var e;return null==(e=n.value)?void 0:e.locale}))),u=(0,l.Cn)((0,o.Fl)((()=>{var e;return(null==(e=n.value)?void 0:e.zIndex)||l.DA}))),d=(0,o.Fl)((()=>{var e;return(0,r.SU)(t)||(null==(e=n.value)?void 0:e.size)||""}));return g((0,o.Fl)((()=>(0,r.SU)(n)||{}))),{ns:s,locale:c,zIndex:u,size:d}}const g=(e,t,n=!1)=>{var d;const f=!!(0,o.FN)(),g=f?p():void 0,y=null!=(d=null==t?void 0:t.provide)?d:f?o.JJ:void 0;if(!y)return void(0,c.N)("provideGlobalConfig","provideGlobalConfig() can only be used inside setup().");const v=(0,o.Fl)((()=>{const t=(0,r.SU)(e);return(null==g?void 0:g.value)?m(g.value,t):t}));return y(s,v),y(a._N,(0,o.Fl)((()=>v.value.locale))),y(i.dP,(0,o.Fl)((()=>v.value.namespace))),y(l.KM,(0,o.Fl)((()=>v.value.zIndex))),y(u.m8,{size:(0,o.Fl)((()=>v.value.size||""))}),!n&&h.value||(h.value=v.value),v},m=(e,t)=>{var n;const r=[...new Set([...(0,d.uc)(e),...(0,d.uc)(t)])],o={};for(const s of r)o[s]=null!=(n=t[s])?n:e[s];return o}},4377:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}});var r=n(6252),o=n(2262),s=n(7601),i=n(2889);const a=(0,o.iH)(),l=(0,o.iH)(0),c=(0,o.iH)(0);let u=0;const d=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0||e===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});while(n.nextNode())t.push(n.currentNode);return t},h=(e,t)=>{for(const n of e)if(!p(n,t))return n},p=(e,t)=>{if("hidden"===getComputedStyle(e).visibility)return!0;while(e){if(t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1},f=e=>{const t=d(e),n=h(t,e),r=h(t.reverse(),e);return[n,r]},g=e=>e instanceof HTMLInputElement&&"select"in e,m=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),c.value=window.performance.now(),e!==n&&g(e)&&t&&e.select()}};function y(e,t){const n=[...e],r=e.indexOf(t);return-1!==r&&n.splice(r,1),n}const v=()=>{let e=[];const t=t=>{const n=e[0];n&&t!==n&&n.pause(),e=y(e,t),e.unshift(t)},n=t=>{var n,r;e=y(e,t),null==(r=null==(n=e[0])?void 0:n.resume)||r.call(n)};return{push:t,remove:n}},w=(e,t=!1)=>{const n=document.activeElement;for(const r of e)if(m(r,t),document.activeElement!==n)return},b=v(),S=()=>l.value>c.value,_=()=>{a.value="pointer",l.value=window.performance.now()},E=()=>{a.value="keyboard",l.value=window.performance.now()},k=()=>((0,r.bv)((()=>{0===u&&(document.addEventListener("mousedown",_),document.addEventListener("touchstart",_),document.addEventListener("keydown",E)),u++})),(0,r.Jd)((()=>{u--,u<=0&&(document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_),document.removeEventListener("keydown",E))})),{focusReason:a,lastUserFocusTimestamp:l,lastAutomatedFocusTimestamp:c}),C=e=>new CustomEvent(i.RQ,{...i.Lf,detail:e});var I=n(1446),A=n(1218),T=n(4309);let R=[];const x=e=>{const t=e;t.key===T.n.esc&&R.forEach((e=>e(t)))},O=e=>{(0,r.bv)((()=>{0===R.length&&document.addEventListener("keydown",x),A.C5&&R.push(e)})),(0,r.Jd)((()=>{R=R.filter((t=>t!==e)),0===R.length&&A.C5&&document.removeEventListener("keydown",x)}))};var N=n(3577);const P=(0,r.aZ)({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[i.XM,i.Q4,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=(0,o.iH)();let a,l;const{focusReason:c}=k();O((n=>{e.trapped&&!u.paused&&t("release-requested",n)}));const u={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},h=n=>{if(!e.loop&&!e.trapped)return;if(u.paused)return;const{key:r,altKey:o,ctrlKey:s,metaKey:i,currentTarget:a,shiftKey:l}=n,{loop:d}=e,h=r===T.n.tab&&!o&&!s&&!i,p=document.activeElement;if(h&&p){const e=a,[r,o]=f(e),s=r&&o;if(s)if(l||p!==o){if(l&&[r,e].includes(p)){const e=C({focusReason:c.value});t("focusout-prevented",e),e.defaultPrevented||(n.preventDefault(),d&&m(o,!0))}}else{const e=C({focusReason:c.value});t("focusout-prevented",e),e.defaultPrevented||(n.preventDefault(),d&&m(r,!0))}else if(p===e){const e=C({focusReason:c.value});t("focusout-prevented",e),e.defaultPrevented||n.preventDefault()}}};(0,r.JJ)(i.D5,{focusTrapRef:n,onKeydown:h}),(0,r.YP)((()=>e.focusTrapEl),(e=>{e&&(n.value=e)}),{immediate:!0}),(0,r.YP)([n],(([e],[t])=>{e&&(e.addEventListener("keydown",h),e.addEventListener("focusin",y),e.addEventListener("focusout",v)),t&&(t.removeEventListener("keydown",h),t.removeEventListener("focusin",y),t.removeEventListener("focusout",v))}));const p=e=>{t(i.XM,e)},g=e=>t(i.Q4,e),y=r=>{const s=(0,o.SU)(n);if(!s)return;const i=r.target,c=r.relatedTarget,d=i&&s.contains(i);if(!e.trapped){const e=c&&s.contains(c);e||(a=c)}d&&t("focusin",r),u.paused||e.trapped&&(d?l=i:m(l,!0))},v=r=>{const i=(0,o.SU)(n);if(!u.paused&&i)if(e.trapped){const n=r.relatedTarget;(0,s.Z)(n)||i.contains(n)||setTimeout((()=>{if(!u.paused&&e.trapped){const e=C({focusReason:c.value});t("focusout-prevented",e),e.defaultPrevented||m(l,!0)}}),0)}else{const e=r.target,n=e&&i.contains(e);n||t("focusout",r)}};async function _(){await(0,r.Y3)();const t=(0,o.SU)(n);if(t){b.push(u);const n=t.contains(document.activeElement)?a:document.activeElement;a=n;const o=t.contains(n);if(!o){const o=new Event(i.vP,i.K9);t.addEventListener(i.vP,p),t.dispatchEvent(o),o.defaultPrevented||(0,r.Y3)((()=>{let r=e.focusStartEl;(0,N.HD)(r)||(m(r),document.activeElement!==r&&(r="first")),"first"===r&&w(d(t),!0),document.activeElement!==n&&"container"!==r||m(t)}))}}}function E(){const e=(0,o.SU)(n);if(e){e.removeEventListener(i.vP,p);const t=new CustomEvent(i.b7,{...i.K9,detail:{focusReason:c.value}});e.addEventListener(i.b7,g),e.dispatchEvent(t),t.defaultPrevented||"keyboard"!=c.value&&S()&&!e.contains(document.activeElement)||m(null!=a?a:document.body),e.removeEventListener(i.b7,p),b.remove(u)}}return(0,r.bv)((()=>{e.trapped&&_(),(0,r.YP)((()=>e.trapped),(e=>{e?_():E()}))})),(0,r.Jd)((()=>{e.trapped&&E()})),{onKeydown:h}}});function D(e,t,n,o,s,i){return(0,r.WI)(e.$slots,"default",{handleKeydown:e.onKeydown})}var U=(0,I.Z)(P,[["render",D],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]])},2889:function(e,t,n){"use strict";n.d(t,{D5:function(){return u},K9:function(){return i},Lf:function(){return a},Q4:function(){return c},RQ:function(){return s},XM:function(){return l},b7:function(){return o},vP:function(){return r}});const r="focus-trap.focus-after-trapped",o="focus-trap.focus-after-released",s="focus-trap.focusout-prevented",i={cancelable:!0,bubbles:!1},a={cancelable:!0,bubbles:!1},l="focusAfterTrapped",c="focusAfterReleased",u=Symbol("elFocusTrap")},165:function(e,t,n){"use strict";n.d(t,{H:function(){return r},K:function(){return o}});const r=Symbol("formContextKey"),o=Symbol("formItemContextKey")},1069:function(e,t,n){"use strict";n.d(t,{DT:function(){return c},Cd:function(){return l}});var r=n(2262),o=n(6252),s=n(165);const i=e=>{const t=(0,o.FN)();return(0,o.Fl)((()=>{var n,r;return null==(r=null==(n=null==t?void 0:t.proxy)?void 0:n.$props)?void 0:r[e]}))};var a=n(2771);const l=(e,t={})=>{const n=(0,r.iH)(void 0),l=t.prop?n:i("size"),c=t.global?n:(0,a.fl)(),u=t.form?{size:void 0}:(0,o.f3)(s.H,void 0),d=t.formItem?{size:void 0}:(0,o.f3)(s.K,void 0);return(0,o.Fl)((()=>l.value||(0,r.SU)(e)||(null==d?void 0:d.size)||(null==u?void 0:u.size)||c.value||""))},c=e=>{const t=i("disabled"),n=(0,o.f3)(s.H,void 0);return(0,o.Fl)((()=>t.value||(0,r.SU)(e)||(null==n?void 0:n.disabled)||!1))}},5620:function(e,t,n){"use strict";n.d(t,{A:function(){return a},p:function(){return l}});var r=n(6252),o=n(2262),s=n(165),i=n(2259);const a=()=>{const e=(0,r.f3)(s.H,void 0),t=(0,r.f3)(s.K,void 0);return{form:e,formItem:t}},l=(e,{formItemContext:t,disableIdGeneration:n,disableIdManagement:s})=>{n||(n=(0,o.iH)(!1)),s||(s=(0,o.iH)(!1));const a=(0,o.iH)();let l;const c=(0,r.Fl)((()=>{var n;return!!(!e.label&&t&&t.inputIds&&(null==(n=t.inputIds)?void 0:n.length)<=1)}));return(0,r.bv)((()=>{l=(0,r.YP)([(0,o.Vh)(e,"id"),n],(([e,n])=>{const r=null!=e?e:n?void 0:(0,i.Me)().value;r!==a.value&&((null==t?void 0:t.removeInputId)&&(a.value&&t.removeInputId(a.value),(null==s?void 0:s.value)||n||!r||t.addInputId(r)),a.value=r)}),{immediate:!0})})),(0,r.Ah)((()=>{l&&l(),(null==t?void 0:t.removeInputId)&&a.value&&t.removeInputId(a.value)})),{isLabeledByFormItem:c,inputId:a}}},4181:function(e,t,n){"use strict";n.d(t,{gn:function(){return g}});var r=n(6252),o=n(2262),s=n(5027);const i=(0,s.o8)({size:{type:(0,s.Cq)([Number,String])},color:{type:String}});var a=n(1446),l=n(9143),c=n(5162),u=n(7675);const d=(0,r.aZ)({name:"ElIcon",inheritAttrs:!1}),h=(0,r.aZ)({...d,props:i,setup(e){const t=e,n=(0,l.s3)("icon"),s=(0,r.Fl)((()=>{const{size:e,color:n}=t;return e||n?{fontSize:(0,c.o8)(e)?void 0:(0,u.Nn)(e),"--color":n}:{}}));return(e,t)=>((0,r.wg)(),(0,r.iD)("i",(0,r.dG)({class:(0,o.SU)(n).b(),style:(0,o.SU)(s)},e.$attrs),[(0,r.WI)(e.$slots,"default")],16))}});var p=(0,a.Z)(h,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]),f=n(2123);const g=(0,f.nz)(p)},3378:function(e,t,n){"use strict";n.d(t,{EZ:function(){return j}});var r=n(6252),o=n(2262),s=n(3577),i=n(9963),a=n(490),l=n(1218),c=n(7601),u=n(4181),d=n(5781),h=n(246);let p;const f=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${(0,h.v)()?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,g=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function m(e){const t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),o=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width")),s=g.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";");return{contextStyle:s,paddingSize:r,borderSize:o,boxSizing:n}}function y(e,t=1,n){var r;p||(p=document.createElement("textarea"),document.body.appendChild(p));const{paddingSize:o,borderSize:s,boxSizing:i,contextStyle:a}=m(e);p.setAttribute("style",`${a};${f}`),p.value=e.value||e.placeholder||"";let c=p.scrollHeight;const u={};"border-box"===i?c+=s:"content-box"===i&&(c-=o),p.value="";const d=p.scrollHeight-o;if((0,l.hj)(t)){let e=d*t;"border-box"===i&&(e=e+o+s),c=Math.max(e,c),u.minHeight=`${e}px`}if((0,l.hj)(n)){let e=d*n;"border-box"===i&&(e=e+o+s),c=Math.min(e,c)}return u.height=`${c}px`,null==(r=p.parentNode)||r.removeChild(p),p=void 0,u}var v=n(5027),w=n(2771),b=n(9809),S=n(5450),_=n(9460);const E=(0,v.o8)({id:{type:String,default:void 0},size:w.Pp,disabled:Boolean,modelValue:{type:(0,v.Cq)([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:(0,v.Cq)([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:b.AA},prefixIcon:{type:b.AA},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:(0,v.Cq)([Object,Array,String]),default:()=>(0,S.N)({})}}),k={[_.f_]:e=>(0,s.HD)(e),input:e=>(0,s.HD)(e),change:e=>(0,s.HD)(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};var C=n(1446),I=n(6274),A=n(5620),T=n(1069),R=n(9143);function x(e){const t=(0,o.iH)();function n(){if(void 0==e.value)return;const{selectionStart:n,selectionEnd:r,value:o}=e.value;if(null==n||null==r)return;const s=o.slice(0,Math.max(0,n)),i=o.slice(Math.max(0,r));t.value={selectionStart:n,selectionEnd:r,value:o,beforeTxt:s,afterTxt:i}}function r(){if(void 0==e.value||void 0==t.value)return;const{value:n}=e.value,{beforeTxt:r,afterTxt:o,selectionStart:s}=t.value;if(void 0==r||void 0==o||void 0==s)return;let i=n.length;if(n.endsWith(o))i=n.length-o.length;else if(n.startsWith(r))i=r.length;else{const e=r[s-1],t=n.indexOf(e,s-1);-1!==t&&(i=t+1)}e.value.setSelectionRange(i,i)}return[n,r]}var O=n(2746),N=n(4721);const P=["role"],D=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],U=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],L=(0,r.aZ)({name:"ElInput",inheritAttrs:!1}),B=(0,r.aZ)({...L,props:E,emits:k,setup(e,{expose:t,emit:n}){const h=e,p=(0,r.l1)(),f=(0,r.Rr)(),g=(0,r.Fl)((()=>{const e={};return"combobox"===h.containerRole&&(e["aria-haspopup"]=p["aria-haspopup"],e["aria-owns"]=p["aria-owns"],e["aria-expanded"]=p["aria-expanded"]),e})),m=(0,r.Fl)((()=>["textarea"===h.type?M.b():B.b(),B.m(C.value),B.is("disabled",L.value),B.is("exceed",se.value),{[B.b("group")]:f.prepend||f.append,[B.bm("group","append")]:f.append,[B.bm("group","prepend")]:f.prepend,[B.m("prefix")]:f.prefix||h.prefixIcon,[B.m("suffix")]:f.suffix||h.suffixIcon||h.clearable||h.showPassword,[B.bm("suffix","password-clear")]:te.value&&ne.value},p.class])),v=(0,r.Fl)((()=>[B.e("wrapper"),B.is("focus",z.value)])),w=(0,I.l)({excludeKeys:(0,r.Fl)((()=>Object.keys(g.value)))}),{form:S,formItem:E}=(0,A.A)(),{inputId:k}=(0,A.p)(h,{formItemContext:E}),C=(0,T.Cd)(),L=(0,T.DT)(),B=(0,R.s3)("input"),M=(0,R.s3)("textarea"),F=(0,o.XI)(),j=(0,o.XI)(),z=(0,o.iH)(!1),$=(0,o.iH)(!1),V=(0,o.iH)(!1),H=(0,o.iH)(!1),K=(0,o.iH)(),q=(0,o.XI)(h.inputStyle),W=(0,r.Fl)((()=>F.value||j.value)),Y=(0,r.Fl)((()=>{var e;return null!=(e=null==S?void 0:S.statusIcon)&&e})),G=(0,r.Fl)((()=>(null==E?void 0:E.validateState)||"")),Z=(0,r.Fl)((()=>G.value&&b.rU[G.value])),J=(0,r.Fl)((()=>H.value?d.G7x:d.caK)),Q=(0,r.Fl)((()=>[p.style,h.inputStyle])),X=(0,r.Fl)((()=>[h.inputStyle,q.value,{resize:h.resize}])),ee=(0,r.Fl)((()=>(0,c.Z)(h.modelValue)?"":String(h.modelValue))),te=(0,r.Fl)((()=>h.clearable&&!L.value&&!h.readonly&&!!ee.value&&(z.value||$.value))),ne=(0,r.Fl)((()=>h.showPassword&&!L.value&&!h.readonly&&!!ee.value&&(!!ee.value||z.value))),re=(0,r.Fl)((()=>h.showWordLimit&&!!w.value.maxlength&&("text"===h.type||"textarea"===h.type)&&!L.value&&!h.readonly&&!h.showPassword)),oe=(0,r.Fl)((()=>ee.value.length)),se=(0,r.Fl)((()=>!!re.value&&oe.value>Number(w.value.maxlength))),ie=(0,r.Fl)((()=>!!f.suffix||!!h.suffixIcon||te.value||h.showPassword||re.value||!!G.value&&Y.value)),[ae,le]=x(F);(0,a.yU7)(j,(e=>{if(!re.value||"both"!==h.resize)return;const t=e[0],{width:n}=t.contentRect;K.value={right:`calc(100% - ${n+15+6}px)`}}));const ce=()=>{const{type:e,autosize:t}=h;if(l.C5&&"textarea"===e&&j.value)if(t){const e=(0,s.Kn)(t)?t.minRows:void 0,n=(0,s.Kn)(t)?t.maxRows:void 0;q.value={...y(j.value,e,n)}}else q.value={minHeight:y(j.value).minHeight}},ue=()=>{const e=W.value;e&&e.value!==ee.value&&(e.value=ee.value)},de=async e=>{ae();let{value:t}=e.target;h.formatter&&(t=h.parser?h.parser(t):t,t=h.formatter(t)),V.value||(t!==ee.value?(n(_.f_,t),n("input",t),await(0,r.Y3)(),ue(),le()):ue())},he=e=>{n("change",e.target.value)},pe=e=>{n("compositionstart",e),V.value=!0},fe=e=>{var t;n("compositionupdate",e);const r=null==(t=e.target)?void 0:t.value,o=r[r.length-1]||"";V.value=!(0,O.w)(o)},ge=e=>{n("compositionend",e),V.value&&(V.value=!1,de(e))},me=()=>{H.value=!H.value,ye()},ye=async()=>{var e;await(0,r.Y3)(),null==(e=W.value)||e.focus()},ve=()=>{var e;return null==(e=W.value)?void 0:e.blur()},we=e=>{z.value=!0,n("focus",e)},be=e=>{var t;z.value=!1,n("blur",e),h.validateEvent&&(null==(t=null==E?void 0:E.validate)||t.call(E,"blur").catch((e=>(0,N.N)(e))))},Se=e=>{$.value=!1,n("mouseleave",e)},_e=e=>{$.value=!0,n("mouseenter",e)},Ee=e=>{n("keydown",e)},ke=()=>{var e;null==(e=W.value)||e.select()},Ce=()=>{n(_.f_,""),n("change",""),n("clear"),n("input","")};return(0,r.YP)((()=>h.modelValue),(()=>{var e;(0,r.Y3)((()=>ce())),h.validateEvent&&(null==(e=null==E?void 0:E.validate)||e.call(E,"change").catch((e=>(0,N.N)(e))))})),(0,r.YP)(ee,(()=>ue())),(0,r.YP)((()=>h.type),(async()=>{await(0,r.Y3)(),ue(),ce()})),(0,r.bv)((()=>{!h.formatter&&h.parser&&(0,N.N)("ElInput","If you set the parser, you also need to set the formatter."),ue(),(0,r.Y3)(ce)})),t({input:F,textarea:j,ref:W,textareaStyle:X,autosize:(0,o.Vh)(h,"autosize"),focus:ye,blur:ve,select:ke,clear:Ce,resizeTextarea:ce}),(e,t)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",(0,r.dG)((0,o.SU)(g),{class:(0,o.SU)(m),style:(0,o.SU)(Q),role:e.containerRole,onMouseenter:_e,onMouseleave:Se}),[(0,r.kq)(" input "),"textarea"!==e.type?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.kq)(" prepend slot "),e.$slots.prepend?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,s.C_)((0,o.SU)(B).be("group","prepend"))},[(0,r.WI)(e.$slots,"prepend")],2)):(0,r.kq)("v-if",!0),(0,r._)("div",{class:(0,s.C_)((0,o.SU)(v))},[(0,r.kq)(" prefix slot "),e.$slots.prefix||e.prefixIcon?((0,r.wg)(),(0,r.iD)("span",{key:0,class:(0,s.C_)((0,o.SU)(B).e("prefix"))},[(0,r._)("span",{class:(0,s.C_)((0,o.SU)(B).e("prefix-inner")),onClick:ye},[(0,r.WI)(e.$slots,"prefix"),e.prefixIcon?((0,r.wg)(),(0,r.j4)((0,o.SU)(u.gn),{key:0,class:(0,s.C_)((0,o.SU)(B).e("icon"))},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.prefixIcon)))])),_:1},8,["class"])):(0,r.kq)("v-if",!0)],2)],2)):(0,r.kq)("v-if",!0),(0,r._)("input",(0,r.dG)({id:(0,o.SU)(k),ref_key:"input",ref:F,class:(0,o.SU)(B).e("inner")},(0,o.SU)(w),{type:e.showPassword?H.value?"text":"password":e.type,disabled:(0,o.SU)(L),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:h.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ge,onInput:de,onFocus:we,onBlur:be,onChange:he,onKeydown:Ee}),null,16,D),(0,r.kq)(" suffix slot "),(0,o.SU)(ie)?((0,r.wg)(),(0,r.iD)("span",{key:1,class:(0,s.C_)((0,o.SU)(B).e("suffix"))},[(0,r._)("span",{class:(0,s.C_)((0,o.SU)(B).e("suffix-inner")),onClick:ye},[(0,o.SU)(te)&&(0,o.SU)(ne)&&(0,o.SU)(re)?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.WI)(e.$slots,"suffix"),e.suffixIcon?((0,r.wg)(),(0,r.j4)((0,o.SU)(u.gn),{key:0,class:(0,s.C_)((0,o.SU)(B).e("icon"))},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.suffixIcon)))])),_:1},8,["class"])):(0,r.kq)("v-if",!0)],64)),(0,o.SU)(te)?((0,r.wg)(),(0,r.j4)((0,o.SU)(u.gn),{key:1,class:(0,s.C_)([(0,o.SU)(B).e("icon"),(0,o.SU)(B).e("clear")]),onMousedown:(0,i.iM)((0,o.SU)(s.dG),["prevent"]),onClick:Ce},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(d.K41))])),_:1},8,["class","onMousedown"])):(0,r.kq)("v-if",!0),(0,o.SU)(ne)?((0,r.wg)(),(0,r.j4)((0,o.SU)(u.gn),{key:2,class:(0,s.C_)([(0,o.SU)(B).e("icon"),(0,o.SU)(B).e("password")]),onClick:me},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)((0,o.SU)(J))))])),_:1},8,["class"])):(0,r.kq)("v-if",!0),(0,o.SU)(re)?((0,r.wg)(),(0,r.iD)("span",{key:3,class:(0,s.C_)((0,o.SU)(B).e("count"))},[(0,r._)("span",{class:(0,s.C_)((0,o.SU)(B).e("count-inner"))},(0,s.zw)((0,o.SU)(oe))+" / "+(0,s.zw)((0,o.SU)(w).maxlength),3)],2)):(0,r.kq)("v-if",!0),(0,o.SU)(G)&&(0,o.SU)(Z)&&(0,o.SU)(Y)?((0,r.wg)(),(0,r.j4)((0,o.SU)(u.gn),{key:4,class:(0,s.C_)([(0,o.SU)(B).e("icon"),(0,o.SU)(B).e("validateIcon"),(0,o.SU)(B).is("loading","validating"===(0,o.SU)(G))])},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)((0,o.SU)(Z))))])),_:1},8,["class"])):(0,r.kq)("v-if",!0)],2)],2)):(0,r.kq)("v-if",!0)],2),(0,r.kq)(" append slot "),e.$slots.append?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,s.C_)((0,o.SU)(B).be("group","append"))},[(0,r.WI)(e.$slots,"append")],2)):(0,r.kq)("v-if",!0)],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.kq)(" textarea "),(0,r._)("textarea",(0,r.dG)({id:(0,o.SU)(k),ref_key:"textarea",ref:j,class:(0,o.SU)(M).e("inner")},(0,o.SU)(w),{tabindex:e.tabindex,disabled:(0,o.SU)(L),readonly:e.readonly,autocomplete:e.autocomplete,style:(0,o.SU)(X),"aria-label":e.label,placeholder:e.placeholder,form:h.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ge,onInput:de,onFocus:we,onBlur:be,onChange:he,onKeydown:Ee}),null,16,U),(0,o.SU)(re)?((0,r.wg)(),(0,r.iD)("span",{key:0,style:(0,s.j5)(K.value),class:(0,s.C_)((0,o.SU)(B).e("count"))},(0,s.zw)((0,o.SU)(oe))+" / "+(0,s.zw)((0,o.SU)(w).maxlength),7)):(0,r.kq)("v-if",!0)],64))],16,P)),[[i.F8,"hidden"!==e.type]])}});var M=(0,C.Z)(B,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]),F=n(2123);const j=(0,F.nz)(M)},9737:function(e,t,n){"use strict";n.d(t,{T:function(){return q}});var r=n(6252),o=n(9963),s=n(1218),i=n(2262),a=n(3577),l=n(5659),c=n(3378),u=n(6565),d=n(4181),h=n(1446),p=n(4309),f=n(1276);const g="_trap-focus-children",m=[],y=e=>{if(0===m.length)return;const t=m[m.length-1][g];if(t.length>0&&e.code===p.n.tab){if(1===t.length)return e.preventDefault(),void(document.activeElement!==t[0]&&t[0].focus());const n=e.shiftKey,r=e.target===t[0],o=e.target===t[t.length-1];r&&n&&(e.preventDefault(),t[t.length-1].focus()),o&&!n&&(e.preventDefault(),t[0].focus())}},v={beforeMount(e){e[g]=(0,f.b9)(e),m.push(e),m.length<=1&&document.addEventListener("keydown",y)},updated(e){(0,r.Y3)((()=>{e[g]=(0,f.b9)(e)}))},unmounted(){m.shift(),0===m.length&&document.removeEventListener("keydown",y)}};var w=n(4377),b=n(9809),S=n(2111),_=n(6502),E=n(2259),k=n(5818),C=n(4420),I=n(1258);const A=(e,t)=>{let n;(0,r.YP)((()=>e.value),(e=>{var r,o;e?(n=document.activeElement,(0,i.dq)(t)&&(null==(o=(r=t.value).focus)||o.call(r))):n.focus()}))},T=(0,r.aZ)({name:"ElMessageBox",directives:{TrapFocus:v},components:{ElButton:l.mi,ElFocusTrap:w.Z,ElInput:c.EZ,ElOverlay:u.F6,ElIcon:d.gn,...b.f5},inheritAttrs:!1,props:{buttonSize:{type:String,validator:S.P},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:n,zIndex:o,ns:s,size:a}=(0,_.cU)("message-box",(0,r.Fl)((()=>e.buttonSize))),{t:l}=n,{nextZIndex:c}=o,u=(0,i.iH)(!1),d=(0,i.qj)({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:c()}),h=(0,r.Fl)((()=>{const e=d.type;return{[s.bm("icon",e)]:e&&b.Rp[e]}})),p=(0,E.Me)(),f=(0,E.Me)(),g=(0,r.Fl)((()=>d.icon||b.Rp[d.type]||"")),m=(0,r.Fl)((()=>!!d.message)),y=(0,i.iH)(),v=(0,i.iH)(),w=(0,i.iH)(),S=(0,i.iH)(),T=(0,i.iH)(),R=(0,r.Fl)((()=>d.confirmButtonClass));(0,r.YP)((()=>d.inputValue),(async t=>{await(0,r.Y3)(),"prompt"===e.boxType&&null!==t&&L()}),{immediate:!0}),(0,r.YP)((()=>u.value),(t=>{var n,o;t&&("prompt"!==e.boxType&&(d.autofocus?w.value=null!=(o=null==(n=T.value)?void 0:n.$el)?o:y.value:w.value=y.value),d.zIndex=c()),"prompt"===e.boxType&&(t?(0,r.Y3)().then((()=>{var e;S.value&&S.value.$el&&(d.autofocus?w.value=null!=(e=B())?e:y.value:w.value=y.value)})):(d.editorErrorMessage="",d.validateError=!1))}));const x=(0,r.Fl)((()=>e.draggable));function O(){u.value&&(u.value=!1,(0,r.Y3)((()=>{d.action&&t("action",d.action)})))}(0,k.O)(y,v,x),(0,r.bv)((async()=>{await(0,r.Y3)(),e.closeOnHashChange&&window.addEventListener("hashchange",O)})),(0,r.Jd)((()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",O)}));const N=()=>{e.closeOnClickModal&&U(d.distinguishCancelAndClose?"close":"cancel")},P=(0,C.S)(N),D=e=>{if("textarea"!==d.inputType)return e.preventDefault(),U("confirm")},U=t=>{var n;("prompt"!==e.boxType||"confirm"!==t||L())&&(d.action=t,d.beforeClose?null==(n=d.beforeClose)||n.call(d,t,d,O):O())},L=()=>{if("prompt"===e.boxType){const e=d.inputPattern;if(e&&!e.test(d.inputValue||""))return d.editorErrorMessage=d.inputErrorMessage||l("el.messagebox.error"),d.validateError=!0,!1;const t=d.inputValidator;if("function"===typeof t){const e=t(d.inputValue);if(!1===e)return d.editorErrorMessage=d.inputErrorMessage||l("el.messagebox.error"),d.validateError=!0,!1;if("string"===typeof e)return d.editorErrorMessage=e,d.validateError=!0,!1}}return d.editorErrorMessage="",d.validateError=!1,!0},B=()=>{const e=S.value.$refs;return e.input||e.textarea},M=()=>{U("close")},F=()=>{e.closeOnPressEscape&&M()};return e.lockScroll&&(0,I.W)(u),A(u),{...(0,i.BK)(d),ns:s,overlayEvent:P,visible:u,hasMessage:m,typeClass:h,contentId:p,inputId:f,btnSize:a,iconComponent:g,confirmButtonClasses:R,rootRef:y,focusStartRef:w,headerRef:v,inputRef:S,confirmRef:T,doClose:O,handleClose:M,onCloseRequested:F,handleWrapperClick:N,handleInputEnter:D,handleAction:U,t:l}}}),R=["aria-label","aria-describedby"],x=["aria-label"],O=["id"];function N(e,t,n,s,i,l){const c=(0,r.up)("el-icon"),u=(0,r.up)("close"),d=(0,r.up)("el-input"),h=(0,r.up)("el-button"),p=(0,r.up)("el-focus-trap"),f=(0,r.up)("el-overlay");return(0,r.wg)(),(0,r.j4)(o.uT,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=t=>e.$emit("vanish")),persisted:""},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(f,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:(0,r.w5)((()=>[(0,r._)("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:(0,a.C_)(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...t)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...t)),onMousedown:t[9]||(t[9]=(...t)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...t)),onMouseup:t[10]||(t[10]=(...t)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...t))},[(0,r.Wm)(p,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:(0,r.w5)((()=>[(0,r._)("div",{ref:"rootRef",class:(0,a.C_)([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:(0,a.j5)(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=(0,o.iM)((()=>{}),["stop"]))},[null!==e.title&&void 0!==e.title?((0,r.wg)(),(0,r.iD)("div",{key:0,ref:"headerRef",class:(0,a.C_)(e.ns.e("header"))},[(0,r._)("div",{class:(0,a.C_)(e.ns.e("title"))},[e.iconComponent&&e.center?((0,r.wg)(),(0,r.j4)(c,{key:0,class:(0,a.C_)([e.ns.e("status"),e.typeClass])},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.iconComponent)))])),_:1},8,["class"])):(0,r.kq)("v-if",!0),(0,r._)("span",null,(0,a.zw)(e.title),1)],2),e.showClose?((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",class:(0,a.C_)(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=(0,o.D2)((0,o.iM)((t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"]))},[(0,r.Wm)(c,{class:(0,a.C_)(e.ns.e("close"))},{default:(0,r.w5)((()=>[(0,r.Wm)(u)])),_:1},8,["class"])],42,x)):(0,r.kq)("v-if",!0)],2)):(0,r.kq)("v-if",!0),(0,r._)("div",{id:e.contentId,class:(0,a.C_)(e.ns.e("content"))},[(0,r._)("div",{class:(0,a.C_)(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?((0,r.wg)(),(0,r.j4)(c,{key:0,class:(0,a.C_)([e.ns.e("status"),e.typeClass])},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.iconComponent)))])),_:1},8,["class"])):(0,r.kq)("v-if",!0),e.hasMessage?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,a.C_)(e.ns.e("message"))},[(0,r.WI)(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?((0,r.wg)(),(0,r.j4)((0,r.LL)(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):((0,r.wg)(),(0,r.j4)((0,r.LL)(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.dangerouslyUseHTMLString?"":e.message),1)])),_:1},8,["for"]))]))],2)):(0,r.kq)("v-if",!0)],2),(0,r.wy)((0,r._)("div",{class:(0,a.C_)(e.ns.e("input"))},[(0,r.Wm)(d,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValue=t),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:(0,a.C_)({invalid:e.validateError}),onKeydown:(0,o.D2)(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),(0,r._)("div",{class:(0,a.C_)(e.ns.e("errormsg")),style:(0,a.j5)({visibility:e.editorErrorMessage?"visible":"hidden"})},(0,a.zw)(e.editorErrorMessage),7)],2),[[o.F8,e.showInput]])],10,O),(0,r._)("div",{class:(0,a.C_)(e.ns.e("btns"))},[e.showCancelButton?((0,r.wg)(),(0,r.j4)(h,{key:0,loading:e.cancelButtonLoading,class:(0,a.C_)([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=t=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=(0,o.D2)((0,o.iM)((t=>e.handleAction("cancel")),["prevent"]),["enter"]))},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","class","round","size"])):(0,r.kq)("v-if",!0),(0,r.wy)((0,r.Wm)(h,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:(0,a.C_)([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=t=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=(0,o.D2)((0,o.iM)((t=>e.handleAction("confirm")),["prevent"]),["enter"]))},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","class","round","disabled","size"]),[[o.F8,e.showConfirmButton]])],2)],6)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,R)])),_:3},8,["z-index","overlay-class","mask"]),[[o.F8,e.visible]])])),_:3})}var P=(0,h.Z)(T,[["render",N],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]),D=n(5162),U=n(4721);const L=new Map,B=e=>{let t=document.body;return e.appendTo&&((0,a.HD)(e.appendTo)&&(t=document.querySelector(e.appendTo)),(0,D.kK)(e.appendTo)&&(t=e.appendTo),(0,D.kK)(t)||((0,U.N)("ElMessageBox","the appendTo option is not an HTMLElement. Falling back to document.body."),t=document.body)),t},M=(e,t,n=null)=>{const s=(0,r.Wm)(P,e,(0,a.mf)(e.message)||(0,r.lA)(e.message)?{default:(0,a.mf)(e.message)?e.message:()=>e.message}:null);return s.appContext=n,(0,o.sY)(s,t),B(e).appendChild(t.firstElementChild),s.component},F=()=>document.createElement("div"),j=(e,t)=>{const n=F();e.onVanish=()=>{(0,o.sY)(null,n),L.delete(s)},e.onAction=t=>{const n=L.get(s);let o;o=e.showInput?{value:s.inputValue,action:t}:t,e.callback?e.callback(o,r.proxy):"cancel"===t||"close"===t?e.distinguishCancelAndClose&&"cancel"!==t?n.reject("close"):n.reject("cancel"):n.resolve(o)};const r=M(e,n,t),s=r.proxy;for(const o in e)(0,a.RI)(e,o)&&!(0,a.RI)(s.$props,o)&&(s[o]=e[o]);return s.visible=!0,s};function z(e,t=null){if(!s.C5)return Promise.reject();let n;return(0,a.HD)(e)||(0,r.lA)(e)?e={message:e}:n=e.callback,new Promise(((r,o)=>{const s=j(e,null!=t?t:z._context);L.set(s,{options:e,callback:n,resolve:r,reject:o})}))}const $=["alert","confirm","prompt"],V={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};function H(e){return(t,n,r,o)=>{let s="";return(0,a.Kn)(n)?(r=n,s=""):s=(0,D.o8)(n)?"":n,z(Object.assign({title:s,message:t,type:"",...V[e]},r,{boxType:e}),o)}}$.forEach((e=>{z[e]=H(e)})),z.close=()=>{L.forEach(((e,t)=>{t.doClose()})),L.clear()},z._context=null;const K=z;K.install=e=>{K._context=e._context,e.config.globalProperties.$msgbox=K,e.config.globalProperties.$messageBox=K,e.config.globalProperties.$alert=K.alert,e.config.globalProperties.$confirm=K.confirm,e.config.globalProperties.$prompt=K.prompt};const q=K},9996:function(e,t,n){"use strict";n.d(t,{bM:function(){return D}});var r=n(6252),o=n(9963),s=n(1218),i=n(2262),a=n(3577),l=n(490),c=n(4181),u=n(5027),d=n(9809);const h=["success","info","warning","error"],p=(0,u.o8)({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:d.AA},id:{type:String,default:""},message:{type:(0,u.Cq)([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:(0,u.Cq)(Function),default:()=>{}},onClose:{type:(0,u.Cq)(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...h,""],default:""},zIndex:{type:Number,default:0}}),f={destroy:()=>!0};var g=n(1446),m=n(6502),y=n(4309);const v=["id"],w=["textContent"],b={key:0},S=["innerHTML"],_=(0,r.aZ)({name:"ElNotification"}),E=(0,r.aZ)({..._,props:p,emits:f,setup(e,{expose:t}){const n=e,{ns:u,zIndex:h}=(0,m.cU)("notification"),{nextZIndex:p,currentZIndex:f}=h,{Close:g}=d.NK,_=(0,i.iH)(!1);let E;const k=(0,r.Fl)((()=>{const e=n.type;return e&&d.Rp[n.type]?u.m(e):""})),C=(0,r.Fl)((()=>n.type&&d.Rp[n.type]||n.icon)),I=(0,r.Fl)((()=>n.position.endsWith("right")?"right":"left")),A=(0,r.Fl)((()=>n.position.startsWith("top")?"top":"bottom")),T=(0,r.Fl)((()=>({[A.value]:`${n.offset}px`,zIndex:f.value})));function R(){n.duration>0&&({stop:E}=(0,s.eM)((()=>{_.value&&O()}),n.duration))}function x(){null==E||E()}function O(){_.value=!1}function N({code:e}){e===y.n["delete"]||e===y.n.backspace?x():e===y.n.esc?_.value&&O():R()}return(0,r.bv)((()=>{R(),p(),_.value=!0})),(0,l.ORN)(document,"keydown",N),t({visible:_,close:O}),(e,t)=>((0,r.wg)(),(0,r.j4)(o.uT,{name:(0,i.SU)(u).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[1]||(t[1]=t=>e.$emit("destroy")),persisted:""},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("div",{id:e.id,class:(0,a.C_)([(0,i.SU)(u).b(),e.customClass,(0,i.SU)(I)]),style:(0,a.j5)((0,i.SU)(T)),role:"alert",onMouseenter:x,onMouseleave:R,onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[(0,i.SU)(C)?((0,r.wg)(),(0,r.j4)((0,i.SU)(c.gn),{key:0,class:(0,a.C_)([(0,i.SU)(u).e("icon"),(0,i.SU)(k)])},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)((0,i.SU)(C))))])),_:1},8,["class"])):(0,r.kq)("v-if",!0),(0,r._)("div",{class:(0,a.C_)((0,i.SU)(u).e("group"))},[(0,r._)("h2",{class:(0,a.C_)((0,i.SU)(u).e("title")),textContent:(0,a.zw)(e.title)},null,10,w),(0,r.wy)((0,r._)("div",{class:(0,a.C_)((0,i.SU)(u).e("content")),style:(0,a.j5)(e.title?void 0:{margin:0})},[(0,r.WI)(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.kq)(" Caution here, message could've been compromised, never use user's input as message "),(0,r._)("p",{innerHTML:e.message},null,8,S)],2112)):((0,r.wg)(),(0,r.iD)("p",b,(0,a.zw)(e.message),1))]))],6),[[o.F8,e.message]]),e.showClose?((0,r.wg)(),(0,r.j4)((0,i.SU)(c.gn),{key:0,class:(0,a.C_)((0,i.SU)(u).e("closeBtn")),onClick:(0,o.iM)(O,["stop"])},{default:(0,r.w5)((()=>[(0,r.Wm)((0,i.SU)(g))])),_:1},8,["class","onClick"])):(0,r.kq)("v-if",!0)],2)],46,v),[[o.F8,_.value]])])),_:3},8,["name","onBeforeLeave"]))}});var k=(0,g.Z)(E,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]),C=n(5162),I=n(4721);const A={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},T=16;let R=1;const x=function(e={},t=null){if(!s.C5)return{close:()=>{}};("string"===typeof e||(0,r.lA)(e))&&(e={message:e});const n=e.position||"top-right";let i=e.offset||0;A[n].forEach((({vm:e})=>{var t;i+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+T})),i+=T;const l="notification_"+R++,c=e.onClose,u={...e,offset:i,id:l,onClose:()=>{O(l,n,c)}};let d=document.body;(0,C.kK)(e.appendTo)?d=e.appendTo:(0,a.HD)(e.appendTo)&&(d=document.querySelector(e.appendTo)),(0,C.kK)(d)||((0,I.N)("ElNotification","the appendTo option is not an HTMLElement. Falling back to document.body."),d=document.body);const h=document.createElement("div"),p=(0,r.Wm)(k,u,(0,r.lA)(u.message)?{default:()=>u.message}:null);return p.appContext=null!=t?t:x._context,p.props.onDestroy=()=>{(0,o.sY)(null,h)},(0,o.sY)(p,h),A[n].push({vm:p}),d.appendChild(h.firstElementChild),{close:()=>{p.component.exposed.visible.value=!1}}};function O(e,t,n){const r=A[t],o=r.findIndex((({vm:t})=>{var n;return(null==(n=t.component)?void 0:n.props.id)===e}));if(-1===o)return;const{vm:s}=r[o];if(!s)return;null==n||n(s);const i=s.el.offsetHeight,a=t.split("-")[0];r.splice(o,1);const l=r.length;if(!(l<1))for(let c=o;c<l;c++){const{el:e,component:t}=r[c].vm,n=Number.parseInt(e.style[a],10)-i-T;t.props.offset=n}}function N(){for(const e of Object.values(A))e.forEach((({vm:e})=>{e.component.exposed.visible.value=!1}))}h.forEach((e=>{x[e]=(t={})=>(("string"===typeof t||(0,r.lA)(t))&&(t={message:t}),x({...t,type:e}))})),x.closeAll=N,x._context=null;var P=n(2123);const D=(0,P.oN)(x,"$notify")},6565:function(e,t,n){"use strict";n.d(t,{F6:function(){return h}});var r=n(6252),o=n(5027),s=n(9143),i=n(4420),a=n(2813);const l=(0,o.o8)({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:(0,o.Cq)([String,Array,Object])},zIndex:{type:(0,o.Cq)([String,Number])}}),c={click:e=>e instanceof MouseEvent},u="overlay";var d=(0,r.aZ)({name:"ElOverlay",props:l,emits:c,setup(e,{slots:t,emit:n}){const o=(0,s.s3)(u),l=e=>{n("click",e)},{onClick:c,onMousedown:d,onMouseup:h}=(0,i.S)(e.customMaskEvent?void 0:l);return()=>e.mask?(0,r.Wm)("div",{class:[o.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:d,onMouseup:h},[(0,r.WI)(t,"default")],a.y.STYLE|a.y.CLASS|a.y.PROPS,["onClick","onMouseup","onMousedown"]):(0,r.h)("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[(0,r.WI)(t,"default")])}});const h=d},4309:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});const r={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"}},9460:function(e,t,n){"use strict";n.d(t,{O7:function(){return o},e_:function(){return s},f_:function(){return r}});const r="update:modelValue",o="change",s="input"},209:function(e,t,n){"use strict";n.d(t,{V:function(){return o},k:function(){return r}});const r=["","default","small","large"],o={large:40,default:32,small:24}},9643:function(e,t,n){"use strict";n.d(t,{Z:function(){return Oz}});const r="2.3.1",o=Symbol("INSTALLED_KEY");var s=n(6502);const i=(e=[])=>{const t=(t,n)=>{t[o]||(t[o]=!0,e.forEach((e=>t.use(e))),n&&(0,s.AR)(n,t,!0))};return{version:r,install:t}};var a=n(6252),l=n(2262),c=n(3577),u=n(490),d=n(5027),h=n(1218),p=n(9460);const f=(0,d.o8)({zIndex:{type:(0,d.Cq)([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),g={scroll:({scrollTop:e,fixed:t})=>(0,h.hj)(e)&&(0,h.jn)(t),[p.O7]:e=>(0,h.jn)(e)};var m=n(1446),y=n(9143),v=n(7675),w=n(4721),b=n(7647);const S="ElAffix",_=(0,a.aZ)({name:S}),E=(0,a.aZ)({..._,props:f,emits:g,setup(e,{expose:t,emit:n}){const r=e,o=(0,y.s3)("affix"),s=(0,l.XI)(),i=(0,l.XI)(),d=(0,l.XI)(),{height:h}=(0,u.iPe)(),{height:p,width:f,top:g,bottom:m,update:_}=(0,u.rBN)(i,{windowScroll:!1}),E=(0,u.rBN)(s),k=(0,l.iH)(!1),C=(0,l.iH)(0),I=(0,l.iH)(0),A=(0,a.Fl)((()=>({height:k.value?`${p.value}px`:"",width:k.value?`${f.value}px`:""}))),T=(0,a.Fl)((()=>{if(!k.value)return{};const e=r.offset?(0,v.Nn)(r.offset):0;return{height:`${p.value}px`,width:`${f.value}px`,top:"top"===r.position?e:"",bottom:"bottom"===r.position?e:"",transform:I.value?`translateY(${I.value}px)`:"",zIndex:r.zIndex}})),R=()=>{if(d.value)if(C.value=d.value instanceof Window?document.documentElement.scrollTop:d.value.scrollTop||0,"top"===r.position)if(r.target){const e=E.bottom.value-r.offset-p.value;k.value=r.offset>g.value&&E.bottom.value>0,I.value=e<0?e:0}else k.value=r.offset>g.value;else if(r.target){const e=h.value-E.top.value-r.offset-p.value;k.value=h.value-r.offset<m.value&&h.value>E.top.value,I.value=e<0?-e:0}else k.value=h.value-r.offset<m.value},x=()=>{_(),n("scroll",{scrollTop:C.value,fixed:k.value})};return(0,a.YP)(k,(e=>n("change",e))),(0,a.bv)((()=>{var e;r.target?(s.value=null!=(e=document.querySelector(r.target))?e:void 0,s.value||(0,w._)(S,`Target is not existed: ${r.target}`)):s.value=document.documentElement,d.value=(0,b.JX)(i.value,!0),_()})),(0,u.ORN)(d,"scroll",x),(0,a.m0)(R),t({update:R,updateRoot:_}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"root",ref:i,class:(0,c.C_)((0,l.SU)(o).b()),style:(0,c.j5)((0,l.SU)(A))},[(0,a._)("div",{class:(0,c.C_)({[(0,l.SU)(o).m("fixed")]:k.value}),style:(0,c.j5)((0,l.SU)(T))},[(0,a.WI)(e.$slots,"default")],6)],6))}});var k=(0,m.Z)(E,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]),C=n(2123);const I=(0,C.nz)(k);var A=n(9963),T=n(4181),R=n(5437),x=n(9809);const O=["light","dark"],N=(0,d.o8)({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:(0,R.uc)(x.Rp),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:O,default:"light"}}),P={close:e=>e instanceof MouseEvent},D=(0,a.aZ)({name:"ElAlert"}),U=(0,a.aZ)({...D,props:N,emits:P,setup(e,{emit:t}){const n=e,{Close:r}=x.f5,o=(0,a.Rr)(),s=(0,y.s3)("alert"),i=(0,l.iH)(!0),u=(0,a.Fl)((()=>x.Rp[n.type])),d=(0,a.Fl)((()=>[s.e("icon"),{[s.is("big")]:!!n.description||!!o.default}])),h=(0,a.Fl)((()=>({[s.is("bold")]:n.description||o.default}))),p=e=>{i.value=!1,t("close",e)};return(e,t)=>((0,a.wg)(),(0,a.j4)(A.uT,{name:(0,l.SU)(s).b("fade"),persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",{class:(0,c.C_)([(0,l.SU)(s).b(),(0,l.SU)(s).m(e.type),(0,l.SU)(s).is("center",e.center),(0,l.SU)(s).is(e.effect)]),role:"alert"},[e.showIcon&&(0,l.SU)(u)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(d))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(u))))])),_:1},8,["class"])):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(s).e("content"))},[e.title||e.$slots.title?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,c.C_)([(0,l.SU)(s).e("title"),(0,l.SU)(h)])},[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a.Uk)((0,c.zw)(e.title),1)]))],2)):(0,a.kq)("v-if",!0),e.$slots.default||e.description?((0,a.wg)(),(0,a.iD)("p",{key:1,class:(0,c.C_)((0,l.SU)(s).e("description"))},[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,c.zw)(e.description),1)]))],2)):(0,a.kq)("v-if",!0),e.closable?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[e.closeText?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)([(0,l.SU)(s).e("close-btn"),(0,l.SU)(s).is("customed")]),onClick:p},(0,c.zw)(e.closeText),3)):((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1,class:(0,c.C_)((0,l.SU)(s).e("close-btn")),onClick:p},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(r))])),_:1},8,["class"]))],64)):(0,a.kq)("v-if",!0)],2)],2),[[A.F8,i.value]])])),_:3},8,["name"]))}});var L=(0,m.Z)(U,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const B=(0,C.nz)(L);var M=n(7226),F=n(6092),j=function(){return F.Z.Date.now()},z=j,$=/\s/;function V(e){var t=e.length;while(t--&&$.test(e.charAt(t)));return t}var H=V,K=/^\s+/;function q(e){return e?e.slice(0,H(e)+1).replace(K,""):e}var W=q,Y=n(2714),G=NaN,Z=/^[-+]0x[0-9a-f]+$/i,J=/^0b[01]+$/i,Q=/^0o[0-7]+$/i,X=parseInt;function ee(e){if("number"==typeof e)return e;if((0,Y.Z)(e))return G;if((0,M.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,M.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=W(e);var n=J.test(e);return n||Q.test(e)?X(e.slice(2),n?2:8):Z.test(e)?G:+e}var te=ee,ne="Expected a function",re=Math.max,oe=Math.min;function se(e,t,n){var r,o,s,i,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(ne);function p(t){var n=r,s=o;return r=o=void 0,c=t,i=e.apply(s,n),i}function f(e){return c=e,a=setTimeout(y,t),u?p(e):i}function g(e){var n=e-l,r=e-c,o=t-n;return d?oe(o,s-r):o}function m(e){var n=e-l,r=e-c;return void 0===l||n>=t||n<0||d&&r>=s}function y(){var e=z();if(m(e))return v(e);a=setTimeout(y,g(e))}function v(e){return a=void 0,h&&r?p(e):(r=o=void 0,i)}function w(){void 0!==a&&clearTimeout(a),c=0,r=l=o=a=void 0}function b(){return void 0===a?i:v(z())}function S(){var e=z(),n=m(e);if(r=arguments,o=this,l=e,n){if(void 0===a)return f(l);if(d)return clearTimeout(a),a=setTimeout(y,t),p(l)}return void 0===a&&(a=setTimeout(y,t)),i}return t=te(t)||0,(0,M.Z)(n)&&(u=!!n.leading,d="maxWait"in n,s=d?re(te(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),S.cancel=w,S.flush=b,S}var ie=se,ae=n(5781),le=n(3378);const ce=4,ue={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},de=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),he=Symbol("scrollbarContextKey"),pe=(0,d.o8)({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),fe="Thumb",ge=(0,a.aZ)({__name:"thumb",props:pe,setup(e){const t=e,n=(0,a.f3)(he),r=(0,y.s3)("scrollbar");n||(0,w._)(fe,"can not inject scrollbar context");const o=(0,l.iH)(),s=(0,l.iH)(),i=(0,l.iH)({}),d=(0,l.iH)(!1);let p=!1,f=!1,g=h.C5?document.onselectstart:null;const m=(0,a.Fl)((()=>ue[t.vertical?"vertical":"horizontal"])),v=(0,a.Fl)((()=>de({size:t.size,move:t.move,bar:m.value}))),b=(0,a.Fl)((()=>o.value[m.value.offset]**2/n.wrapElement[m.value.scrollSize]/t.ratio/s.value[m.value.offset])),S=e=>{var t;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(t=window.getSelection())||t.removeAllRanges(),E(e);const n=e.currentTarget;n&&(i.value[m.value.axis]=n[m.value.offset]-(e[m.value.client]-n.getBoundingClientRect()[m.value.direction]))},_=e=>{if(!s.value||!o.value||!n.wrapElement)return;const t=Math.abs(e.target.getBoundingClientRect()[m.value.direction]-e[m.value.client]),r=s.value[m.value.offset]/2,i=100*(t-r)*b.value/o.value[m.value.offset];n.wrapElement[m.value.scroll]=i*n.wrapElement[m.value.scrollSize]/100},E=e=>{e.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",k),document.addEventListener("mouseup",C),g=document.onselectstart,document.onselectstart=()=>!1},k=e=>{if(!o.value||!s.value)return;if(!1===p)return;const t=i.value[m.value.axis];if(!t)return;const r=-1*(o.value.getBoundingClientRect()[m.value.direction]-e[m.value.client]),a=s.value[m.value.offset]-t,l=100*(r-a)*b.value/o.value[m.value.offset];n.wrapElement[m.value.scroll]=l*n.wrapElement[m.value.scrollSize]/100},C=()=>{p=!1,i.value[m.value.axis]=0,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",C),R(),f&&(d.value=!1)},I=()=>{f=!1,d.value=!!t.size},T=()=>{f=!0,d.value=p};(0,a.Jd)((()=>{R(),document.removeEventListener("mouseup",C)}));const R=()=>{document.onselectstart!==g&&(document.onselectstart=g)};return(0,u.ORN)((0,l.Vh)(n,"scrollbarElement"),"mousemove",I),(0,u.ORN)((0,l.Vh)(n,"scrollbarElement"),"mouseleave",T),(e,t)=>((0,a.wg)(),(0,a.j4)(A.uT,{name:(0,l.SU)(r).b("fade"),persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",{ref_key:"instance",ref:o,class:(0,c.C_)([(0,l.SU)(r).e("bar"),(0,l.SU)(r).is((0,l.SU)(m).key)]),onMousedown:_},[(0,a._)("div",{ref_key:"thumb",ref:s,class:(0,c.C_)((0,l.SU)(r).e("thumb")),style:(0,c.j5)((0,l.SU)(v)),onMousedown:S},null,38)],34),[[A.F8,e.always||d.value]])])),_:1},8,["name"]))}});var me=(0,m.Z)(ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const ye=(0,d.o8)({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),ve=(0,a.aZ)({__name:"bar",props:ye,setup(e,{expose:t}){const n=e,r=(0,l.iH)(0),o=(0,l.iH)(0),s=e=>{if(e){const t=e.offsetHeight-ce,s=e.offsetWidth-ce;o.value=100*e.scrollTop/t*n.ratioY,r.value=100*e.scrollLeft/s*n.ratioX}};return t({handleScroll:s}),(e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(me,{move:r.value,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),(0,a.Wm)(me,{move:o.value,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64))}});var we=(0,m.Z)(ve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const be=(0,d.o8)({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:(0,d.Cq)([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Se={scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(h.hj)},_e="ElScrollbar",Ee=(0,a.aZ)({name:_e}),ke=(0,a.aZ)({...Ee,props:be,emits:Se,setup(e,{expose:t,emit:n}){const r=e,o=(0,y.s3)("scrollbar");let s,i;const d=(0,l.iH)(),p=(0,l.iH)(),f=(0,l.iH)(),g=(0,l.iH)("0"),m=(0,l.iH)("0"),b=(0,l.iH)(),S=(0,l.iH)(1),_=(0,l.iH)(1),E=(0,a.Fl)((()=>{const e={};return r.height&&(e.height=(0,v.Nn)(r.height)),r.maxHeight&&(e.maxHeight=(0,v.Nn)(r.maxHeight)),[r.wrapStyle,e]})),k=(0,a.Fl)((()=>[r.wrapClass,o.e("wrap"),{[o.em("wrap","hidden-default")]:!r.native}])),C=(0,a.Fl)((()=>[o.e("view"),r.viewClass])),I=()=>{var e;p.value&&(null==(e=b.value)||e.handleScroll(p.value),n("scroll",{scrollTop:p.value.scrollTop,scrollLeft:p.value.scrollLeft}))};function A(e,t){(0,c.Kn)(e)?p.value.scrollTo(e):(0,h.hj)(e)&&(0,h.hj)(t)&&p.value.scrollTo(e,t)}const T=e=>{(0,h.hj)(e)?p.value.scrollTop=e:(0,w.N)(_e,"value must be a number")},R=e=>{(0,h.hj)(e)?p.value.scrollLeft=e:(0,w.N)(_e,"value must be a number")},x=()=>{if(!p.value)return;const e=p.value.offsetHeight-ce,t=p.value.offsetWidth-ce,n=e**2/p.value.scrollHeight,o=t**2/p.value.scrollWidth,s=Math.max(n,r.minSize),i=Math.max(o,r.minSize);S.value=n/(e-n)/(s/(e-s)),_.value=o/(t-o)/(i/(t-i)),m.value=s+ce<e?`${s}px`:"",g.value=i+ce<t?`${i}px`:""};return(0,a.YP)((()=>r.noresize),(e=>{e?(null==s||s(),null==i||i()):(({stop:s}=(0,u.yU7)(f,x)),i=(0,u.ORN)("resize",x))}),{immediate:!0}),(0,a.YP)((()=>[r.maxHeight,r.height]),(()=>{r.native||(0,a.Y3)((()=>{var e;x(),p.value&&(null==(e=b.value)||e.handleScroll(p.value))}))})),(0,a.JJ)(he,(0,l.qj)({scrollbarElement:d,wrapElement:p})),(0,a.bv)((()=>{r.native||(0,a.Y3)((()=>{x()}))})),(0,a.ic)((()=>x())),t({wrapRef:p,update:x,scrollTo:A,setScrollTop:T,setScrollLeft:R,handleScroll:I}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"scrollbarRef",ref:d,class:(0,c.C_)((0,l.SU)(o).b())},[(0,a._)("div",{ref_key:"wrapRef",ref:p,class:(0,c.C_)((0,l.SU)(k)),style:(0,c.j5)((0,l.SU)(E)),onScroll:I},[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{ref_key:"resizeRef",ref:f,class:(0,c.C_)((0,l.SU)(C)),style:(0,c.j5)(e.viewStyle)},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["class","style"]))],38),e.native?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.j4)(we,{key:0,ref_key:"barRef",ref:b,height:m.value,width:g.value,always:e.always,"ratio-x":_.value,"ratio-y":S.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Ce=(0,m.Z)(ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ie=(0,C.nz)(Ce),Ae=Symbol("popper"),Te=Symbol("popperContent"),Re=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],xe=(0,d.o8)({role:{type:String,values:Re,default:"tooltip"}}),Oe=(0,a.aZ)({name:"ElPopper",inheritAttrs:!1}),Ne=(0,a.aZ)({...Oe,props:xe,setup(e,{expose:t}){const n=e,r=(0,l.iH)(),o=(0,l.iH)(),s=(0,l.iH)(),i=(0,l.iH)(),c=(0,a.Fl)((()=>n.role)),u={triggerRef:r,popperInstanceRef:o,contentRef:s,referenceRef:i,role:c};return t(u),(0,a.JJ)(Ae,u),(e,t)=>(0,a.WI)(e.$slots,"default")}});var Pe=(0,m.Z)(Ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const De=(0,C.nz)(Pe),Ue=Symbol("elTooltip");function Le(){let e;const t=(t,r)=>{n(),e=window.setTimeout(t,r)},n=()=>window.clearTimeout(e);return(0,h.IY)((()=>n())),{registerTimeout:t,cancelTimeout:n}}const Be=(0,d.o8)({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),Me=({showAfter:e,hideAfter:t,autoClose:n,open:r,close:o})=>{const{registerTimeout:s}=Le(),{registerTimeout:i,cancelTimeout:a}=Le(),c=t=>{s((()=>{r(t);const e=(0,l.SU)(n);(0,h.hj)(e)&&e>0&&i((()=>{o(t)}),e)}),(0,l.SU)(e))},u=e=>{a(),s((()=>{o(e)}),(0,l.SU)(t))};return{onOpen:c,onClose:u}};var Fe="top",je="bottom",ze="right",$e="left",Ve="auto",He=[Fe,je,ze,$e],Ke="start",qe="end",We="clippingParents",Ye="viewport",Ge="popper",Ze="reference",Je=He.reduce((function(e,t){return e.concat([t+"-"+Ke,t+"-"+qe])}),[]),Qe=[].concat(He,[Ve]).reduce((function(e,t){return e.concat([t,t+"-"+Ke,t+"-"+qe])}),[]),Xe="beforeRead",et="read",tt="afterRead",nt="beforeMain",rt="main",ot="afterMain",st="beforeWrite",it="write",at="afterWrite",lt=[Xe,et,tt,nt,rt,ot,st,it,at];function ct(e){return e?(e.nodeName||"").toLowerCase():null}function ut(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function dt(e){var t=ut(e).Element;return e instanceof t||e instanceof Element}function ht(e){var t=ut(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function pt(e){if("undefined"==typeof ShadowRoot)return!1;var t=ut(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ft(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];!ht(o)||!ct(o)||(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))}function gt(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]),i=s.reduce((function(e,t){return e[t]="",e}),{});!ht(r)||!ct(r)||(Object.assign(r.style,i),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}}var mt={name:"applyStyles",enabled:!0,phase:"write",fn:ft,effect:gt,requires:["computeStyles"]};function yt(e){return e.split("-")[0]}var vt=Math.max,wt=Math.min,bt=Math.round;function St(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,o=1;if(ht(e)&&t){var s=e.offsetHeight,i=e.offsetWidth;i>0&&(r=bt(n.width)/i||1),s>0&&(o=bt(n.height)/s||1)}return{width:n.width/r,height:n.height/o,top:n.top/o,right:n.right/r,bottom:n.bottom/o,left:n.left/r,x:n.left/r,y:n.top/o}}function _t(e){var t=St(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Et(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&pt(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function kt(e){return ut(e).getComputedStyle(e)}function Ct(e){return["table","td","th"].indexOf(ct(e))>=0}function It(e){return((dt(e)?e.ownerDocument:e.document)||window.document).documentElement}function At(e){return"html"===ct(e)?e:e.assignedSlot||e.parentNode||(pt(e)?e.host:null)||It(e)}function Tt(e){return ht(e)&&"fixed"!==kt(e).position?e.offsetParent:null}function Rt(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(n&&ht(e)){var r=kt(e);if("fixed"===r.position)return null}var o=At(e);for(pt(o)&&(o=o.host);ht(o)&&["html","body"].indexOf(ct(o))<0;){var s=kt(o);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return o;o=o.parentNode}return null}function xt(e){for(var t=ut(e),n=Tt(e);n&&Ct(n)&&"static"===kt(n).position;)n=Tt(n);return n&&("html"===ct(n)||"body"===ct(n)&&"static"===kt(n).position)?t:n||Rt(e)||t}function Ot(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Nt(e,t,n){return vt(e,wt(t,n))}function Pt(e,t,n){var r=Nt(e,t,n);return r>n?n:r}function Dt(){return{top:0,right:0,bottom:0,left:0}}function Ut(e){return Object.assign({},Dt(),e)}function Lt(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var Bt=function(e,t){return e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,Ut("number"!=typeof e?e:Lt(e,He))};function Mt(e){var t,n=e.state,r=e.name,o=e.options,s=n.elements.arrow,i=n.modifiersData.popperOffsets,a=yt(n.placement),l=Ot(a),c=[$e,ze].indexOf(a)>=0,u=c?"height":"width";if(s&&i){var d=Bt(o.padding,n),h=_t(s),p="y"===l?Fe:$e,f="y"===l?je:ze,g=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],m=i[l]-n.rects.reference[l],y=xt(s),v=y?"y"===l?y.clientHeight||0:y.clientWidth||0:0,w=g/2-m/2,b=d[p],S=v-h[u]-d[f],_=v/2-h[u]/2+w,E=Nt(b,_,S),k=l;n.modifiersData[r]=(t={},t[k]=E,t.centerOffset=E-_,t)}}function Ft(e){var t=e.state,n=e.options,r=n.element,o=void 0===r?"[data-popper-arrow]":r;null!=o&&("string"==typeof o&&(o=t.elements.popper.querySelector(o),!o)||!Et(t.elements.popper,o)||(t.elements.arrow=o))}var jt={name:"arrow",enabled:!0,phase:"main",fn:Mt,effect:Ft,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zt(e){return e.split("-")[1]}var $t={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(e){var t=e.x,n=e.y,r=window,o=r.devicePixelRatio||1;return{x:bt(t*o)/o||0,y:bt(n*o)/o||0}}function Ht(e){var t,n=e.popper,r=e.popperRect,o=e.placement,s=e.variation,i=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=i.x,p=void 0===h?0:h,f=i.y,g=void 0===f?0:f,m="function"==typeof u?u({x:p,y:g}):{x:p,y:g};p=m.x,g=m.y;var y=i.hasOwnProperty("x"),v=i.hasOwnProperty("y"),w=$e,b=Fe,S=window;if(c){var _=xt(n),E="clientHeight",k="clientWidth";if(_===ut(n)&&(_=It(n),"static"!==kt(_).position&&"absolute"===a&&(E="scrollHeight",k="scrollWidth")),o===Fe||(o===$e||o===ze)&&s===qe){b=je;var C=d&&_===S&&S.visualViewport?S.visualViewport.height:_[E];g-=C-r.height,g*=l?1:-1}if(o===$e||(o===Fe||o===je)&&s===qe){w=ze;var I=d&&_===S&&S.visualViewport?S.visualViewport.width:_[k];p-=I-r.width,p*=l?1:-1}}var A,T=Object.assign({position:a},c&&$t),R=!0===u?Vt({x:p,y:g}):{x:p,y:g};return p=R.x,g=R.y,l?Object.assign({},T,(A={},A[b]=v?"0":"",A[w]=y?"0":"",A.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",A)):Object.assign({},T,(t={},t[b]=v?g+"px":"",t[w]=y?p+"px":"",t.transform="",t))}function Kt(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,s=n.adaptive,i=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:yt(t.placement),variation:zt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ht(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ht(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var qt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Kt,data:{}},Wt={passive:!0};function Yt(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,s=void 0===o||o,i=r.resize,a=void 0===i||i,l=ut(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach((function(e){e.addEventListener("scroll",n.update,Wt)})),a&&l.addEventListener("resize",n.update,Wt),function(){s&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Wt)})),a&&l.removeEventListener("resize",n.update,Wt)}}var Gt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yt,data:{}},Zt={left:"right",right:"left",bottom:"top",top:"bottom"};function Jt(e){return e.replace(/left|right|bottom|top/g,(function(e){return Zt[e]}))}var Qt={start:"end",end:"start"};function Xt(e){return e.replace(/start|end/g,(function(e){return Qt[e]}))}function en(e){var t=ut(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function tn(e){return St(It(e)).left+en(e).scrollLeft}function nn(e){var t=ut(e),n=It(e),r=t.visualViewport,o=n.clientWidth,s=n.clientHeight,i=0,a=0;return r&&(o=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=r.offsetLeft,a=r.offsetTop)),{width:o,height:s,x:i+tn(e),y:a}}function rn(e){var t,n=It(e),r=en(e),o=null==(t=e.ownerDocument)?void 0:t.body,s=vt(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=vt(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+tn(e),l=-r.scrollTop;return"rtl"===kt(o||n).direction&&(a+=vt(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:i,x:a,y:l}}function on(e){var t=kt(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function sn(e){return["html","body","#document"].indexOf(ct(e))>=0?e.ownerDocument.body:ht(e)&&on(e)?e:sn(At(e))}function an(e,t){var n;void 0===t&&(t=[]);var r=sn(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),s=ut(r),i=o?[s].concat(s.visualViewport||[],on(r)?r:[]):r,a=t.concat(i);return o?a:a.concat(an(At(i)))}function ln(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function cn(e){var t=St(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function un(e,t){return t===Ye?ln(nn(e)):dt(t)?cn(t):ln(rn(It(e)))}function dn(e){var t=an(At(e)),n=["absolute","fixed"].indexOf(kt(e).position)>=0,r=n&&ht(e)?xt(e):e;return dt(r)?t.filter((function(e){return dt(e)&&Et(e,r)&&"body"!==ct(e)})):[]}function hn(e,t,n){var r="clippingParents"===t?dn(e):[].concat(t),o=[].concat(r,[n]),s=o[0],i=o.reduce((function(t,n){var r=un(e,n);return t.top=vt(r.top,t.top),t.right=wt(r.right,t.right),t.bottom=wt(r.bottom,t.bottom),t.left=vt(r.left,t.left),t}),un(e,s));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function pn(e){var t,n=e.reference,r=e.element,o=e.placement,s=o?yt(o):null,i=o?zt(o):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(s){case Fe:t={x:a,y:n.y-r.height};break;case je:t={x:a,y:n.y+n.height};break;case ze:t={x:n.x+n.width,y:l};break;case $e:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=s?Ot(s):null;if(null!=c){var u="y"===c?"height":"width";switch(i){case Ke:t[c]=t[c]-(n[u]/2-r[u]/2);break;case qe:t[c]=t[c]+(n[u]/2-r[u]/2);break}}return t}function fn(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,s=n.boundary,i=void 0===s?We:s,a=n.rootBoundary,l=void 0===a?Ye:a,c=n.elementContext,u=void 0===c?Ge:c,d=n.altBoundary,h=void 0!==d&&d,p=n.padding,f=void 0===p?0:p,g=Ut("number"!=typeof f?f:Lt(f,He)),m=u===Ge?Ze:Ge,y=e.rects.popper,v=e.elements[h?m:u],w=hn(dt(v)?v:v.contextElement||It(e.elements.popper),i,l),b=St(e.elements.reference),S=pn({reference:b,element:y,strategy:"absolute",placement:o}),_=ln(Object.assign({},y,S)),E=u===Ge?_:b,k={top:w.top-E.top+g.top,bottom:E.bottom-w.bottom+g.bottom,left:w.left-E.left+g.left,right:E.right-w.right+g.right},C=e.modifiersData.offset;if(u===Ge&&C){var I=C[o];Object.keys(k).forEach((function(e){var t=[ze,je].indexOf(e)>=0?1:-1,n=[Fe,je].indexOf(e)>=0?"y":"x";k[e]+=I[n]*t}))}return k}function gn(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,s=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Qe:l,u=zt(r),d=u?a?Je:Je.filter((function(e){return zt(e)===u})):He,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=fn(e,{placement:n,boundary:o,rootBoundary:s,padding:i})[yt(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}function mn(e){if(yt(e)===Ve)return[];var t=Jt(e);return[Xt(e),t,Xt(t)]}function yn(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,s=void 0===o||o,i=n.altAxis,a=void 0===i||i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,g=n.allowedAutoPlacements,m=t.options.placement,y=yt(m),v=y===m,w=l||(v||!f?[Jt(m)]:mn(m)),b=[m].concat(w).reduce((function(e,n){return e.concat(yt(n)===Ve?gn(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:g}):n)}),[]),S=t.rects.reference,_=t.rects.popper,E=new Map,k=!0,C=b[0],I=0;I<b.length;I++){var A=b[I],T=yt(A),R=zt(A)===Ke,x=[Fe,je].indexOf(T)>=0,O=x?"width":"height",N=fn(t,{placement:A,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),P=x?R?ze:$e:R?je:Fe;S[O]>_[O]&&(P=Jt(P));var D=Jt(P),U=[];if(s&&U.push(N[T]<=0),a&&U.push(N[P]<=0,N[D]<=0),U.every((function(e){return e}))){C=A,k=!1;break}E.set(A,U)}if(k)for(var L=f?3:1,B=function(e){var t=b.find((function(t){var n=E.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},M=L;M>0;M--){var F=B(M);if("break"===F)break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}}var vn={name:"flip",enabled:!0,phase:"main",fn:yn,requiresIfExists:["offset"],data:{_skip:!1}};function wn(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function bn(e){return[Fe,ze,je,$e].some((function(t){return e[t]>=0}))}function Sn(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,s=t.modifiersData.preventOverflow,i=fn(t,{elementContext:"reference"}),a=fn(t,{altBoundary:!0}),l=wn(i,r),c=wn(a,o,s),u=bn(l),d=bn(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var _n={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Sn};function En(e,t,n){var r=yt(e),o=[$e,Fe].indexOf(r)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=s[0],a=s[1];return i=i||0,a=(a||0)*o,[$e,ze].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function kn(e){var t=e.state,n=e.options,r=e.name,o=n.offset,s=void 0===o?[0,0]:o,i=Qe.reduce((function(e,n){return e[n]=En(n,t.rects,s),e}),{}),a=i[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=i}var Cn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kn};function In(e){var t=e.state,n=e.name;t.modifiersData[n]=pn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var An={name:"popperOffsets",enabled:!0,phase:"read",fn:In,data:{}};function Tn(e){return"x"===e?"y":"x"}function Rn(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,s=void 0===o||o,i=n.altAxis,a=void 0!==i&&i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,g=void 0===f?0:f,m=fn(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=yt(t.placement),v=zt(t.placement),w=!v,b=Ot(y),S=Tn(b),_=t.modifiersData.popperOffsets,E=t.rects.reference,k=t.rects.popper,C="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,I="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(_){if(s){var R,x="y"===b?Fe:$e,O="y"===b?je:ze,N="y"===b?"height":"width",P=_[b],D=P+m[x],U=P-m[O],L=p?-k[N]/2:0,B=v===Ke?E[N]:k[N],M=v===Ke?-k[N]:-E[N],F=t.elements.arrow,j=p&&F?_t(F):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Dt(),$=z[x],V=z[O],H=Nt(0,E[N],j[N]),K=w?E[N]/2-L-H-$-I.mainAxis:B-H-$-I.mainAxis,q=w?-E[N]/2+L+H+V+I.mainAxis:M+H+V+I.mainAxis,W=t.elements.arrow&&xt(t.elements.arrow),Y=W?"y"===b?W.clientTop||0:W.clientLeft||0:0,G=null!=(R=null==A?void 0:A[b])?R:0,Z=P+K-G-Y,J=P+q-G,Q=Nt(p?wt(D,Z):D,P,p?vt(U,J):U);_[b]=Q,T[b]=Q-P}if(a){var X,ee="x"===b?Fe:$e,te="x"===b?je:ze,ne=_[S],re="y"===S?"height":"width",oe=ne+m[ee],se=ne-m[te],ie=-1!==[Fe,$e].indexOf(y),ae=null!=(X=null==A?void 0:A[S])?X:0,le=ie?oe:ne-E[re]-k[re]-ae+I.altAxis,ce=ie?ne+E[re]+k[re]-ae-I.altAxis:se,ue=p&&ie?Pt(le,ne,ce):Nt(p?le:oe,ne,p?ce:se);_[S]=ue,T[S]=ue-ne}t.modifiersData[r]=T}}var xn={name:"preventOverflow",enabled:!0,phase:"main",fn:Rn,requiresIfExists:["offset"]};function On(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Nn(e){return e!==ut(e)&&ht(e)?On(e):en(e)}function Pn(e){var t=e.getBoundingClientRect(),n=bt(t.width)/e.offsetWidth||1,r=bt(t.height)/e.offsetHeight||1;return 1!==n||1!==r}function Dn(e,t,n){void 0===n&&(n=!1);var r=ht(t),o=ht(t)&&Pn(t),s=It(t),i=St(e,o),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==ct(t)||on(s))&&(a=Nn(t)),ht(t)?(l=St(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=tn(s))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function Un(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name);var s=[].concat(e.requires||[],e.requiresIfExists||[]);s.forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}function Ln(e){var t=Un(e);return lt.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}function Bn(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function Mn(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}var Fn={placement:"bottom",modifiers:[],strategy:"absolute"};function jn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function zn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,s=void 0===o?Fn:o;return function(e,t,n){void 0===n&&(n=s);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fn,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},i=[],a=!1,l={state:o,setOptions:function(n){var i="function"==typeof n?n(o.options):n;u(),o.options=Object.assign({},s,o.options,i),o.scrollParents={reference:dt(e)?an(e):e.contextElement?an(e.contextElement):[],popper:an(t)};var a=Ln(Mn([].concat(r,o.options.modifiers)));return o.orderedModifiers=a.filter((function(e){return e.enabled})),c(),l.update()},forceUpdate:function(){if(!a){var e=o.elements,t=e.reference,n=e.popper;if(jn(t,n)){o.rects={reference:Dn(t,xt(n),"fixed"===o.options.strategy),popper:_t(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<o.orderedModifiers.length;r++)if(!0!==o.reset){var s=o.orderedModifiers[r],i=s.fn,c=s.options,u=void 0===c?{}:c,d=s.name;"function"==typeof i&&(o=i({state:o,options:u,name:d,instance:l})||o)}else o.reset=!1,r=-1}}},update:Bn((function(){return new Promise((function(e){l.forceUpdate(),e(o)}))})),destroy:function(){u(),a=!0}};if(!jn(e,t))return l;function c(){o.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"==typeof s){var a=s({state:o,name:t,instance:l,options:r}),c=function(){};i.push(a||c)}}))}function u(){i.forEach((function(e){return e()})),i=[]}return l.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}zn();var $n=[Gt,An,qt,mt],Vn=(zn({defaultModifiers:$n}),[Gt,An,qt,mt,Cn,vn,xn,jt,_n]),Hn=zn({defaultModifiers:Vn});const Kn=["fixed","absolute"],qn=(0,d.o8)({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:(0,d.Cq)(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Qe,default:"bottom"},popperOptions:{type:(0,d.Cq)(Object),default:()=>({})},strategy:{type:String,values:Kn,default:"absolute"}}),Wn=(0,d.o8)({...qn,id:String,style:{type:(0,d.Cq)([String,Array,Object])},className:{type:(0,d.Cq)([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:(0,d.Cq)([String,Array,Object])},popperStyle:{type:(0,d.Cq)([String,Array,Object])},referenceEl:{type:(0,d.Cq)(Object)},triggerTargetEl:{type:(0,d.Cq)(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),Yn={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},Gn=(0,d.o8)({...Be,...Wn,appendTo:{type:(0,d.Cq)([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:(0,d.Cq)(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),Zn=(0,d.o8)({virtualRef:{type:(0,d.Cq)(Object)},virtualTriggering:Boolean,onMouseenter:{type:(0,d.Cq)(Function)},onMouseleave:{type:(0,d.Cq)(Function)},onClick:{type:(0,d.Cq)(Function)},onKeydown:{type:(0,d.Cq)(Function)},onFocus:{type:(0,d.Cq)(Function)},onBlur:{type:(0,d.Cq)(Function)},onContextmenu:{type:(0,d.Cq)(Function)},id:String,open:Boolean});var Jn=n(4309);const Qn=(0,d.o8)({...Zn,disabled:Boolean,trigger:{type:(0,d.Cq)([String,Array]),default:"hover"},triggerKeys:{type:(0,d.Cq)(Array),default:()=>[Jn.n.enter,Jn.n.space]}}),Xn=(0,d.l0)({type:(0,d.Cq)(Boolean),default:null}),er=(0,d.l0)({type:(0,d.Cq)(Function)}),tr=e=>{const t=`update:${e}`,n=`onUpdate:${e}`,r=[t],o={[e]:Xn,[n]:er},s=({indicator:r,toggleReason:o,shouldHideWhenRouteChanges:s,shouldProceed:i,onShow:l,onHide:u})=>{const d=(0,a.FN)(),{emit:p}=d,f=d.props,g=(0,a.Fl)((()=>(0,c.mf)(f[n]))),m=(0,a.Fl)((()=>null===f[e])),y=e=>{!0!==r.value&&(r.value=!0,o&&(o.value=e),(0,c.mf)(l)&&l(e))},v=e=>{!1!==r.value&&(r.value=!1,o&&(o.value=e),(0,c.mf)(u)&&u(e))},w=e=>{if(!0===f.disabled||(0,c.mf)(i)&&!i())return;const n=g.value&&h.C5;n&&p(t,!0),!m.value&&n||y(e)},b=e=>{if(!0===f.disabled||!h.C5)return;const n=g.value&&h.C5;n&&p(t,!1),!m.value&&n||v(e)},S=e=>{(0,h.jn)(e)&&(f.disabled&&e?g.value&&p(t,!1):r.value!==e&&(e?y():v()))},_=()=>{r.value?b():w()};return(0,a.YP)((()=>f[e]),S),s&&void 0!==d.appContext.config.globalProperties.$route&&(0,a.YP)((()=>({...d.proxy.$route})),(()=>{s.value&&r.value&&b()})),(0,a.bv)((()=>{S(f[e])})),{hide:b,show:w,toggle:_,hasUpdateHandler:g}};return{useModelToggle:s,useModelToggleProps:o,useModelToggleEmits:r}},{useModelToggle:nr,useModelToggleProps:rr,useModelToggleEmits:or}=tr("modelValue"),sr=(0,d.o8)({arrowOffset:{type:Number,default:5}}),{useModelToggleProps:ir,useModelToggleEmits:ar,useModelToggle:lr}=tr("visible"),cr=(0,d.o8)({...xe,...ir,...Gn,...Qn,...sr,showArrow:{type:Boolean,default:!0}}),ur=[...ar,"before-show","before-hide","show","hide","open","close"],dr=(e,t)=>(0,c.kJ)(e)?e.includes(t):e===t,hr=(e,t,n)=>r=>{dr((0,l.SU)(e),t)&&n(r)},pr=(e,t,{checkForDefaultPrevented:n=!0}={})=>{const r=r=>{const o=null==e?void 0:e(r);if(!1===n||!o)return null==t?void 0:t(r)};return r},fr=e=>t=>"mouse"===t.pointerType?e(t):void 0;var gr=n(7601);const mr=Symbol("elForwardRef"),yr=e=>{const t=t=>{e.value=t};(0,a.JJ)(mr,{setForwardRef:t})},vr=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}});var wr=n(5162);const br="ElOnlyChild",Sr=(0,a.aZ)({name:br,setup(e,{slots:t,attrs:n}){var r;const o=(0,a.f3)(mr),s=vr(null!=(r=null==o?void 0:o.setForwardRef)?r:c.dG);return()=>{var e;const r=null==(e=t.default)?void 0:e.call(t,n);if(!r)return null;if(r.length>1)return(0,w.N)(br,"requires exact only one valid child."),null;const o=_r(r);return o?(0,a.wy)((0,a.Ho)(o,n),[[s]]):((0,w.N)(br,"no valid child node found"),null)}}});function _r(e){if(!e)return null;const t=e;for(const n of t){if((0,c.Kn)(n))switch(n.type){case a.sv:continue;case a.xv:case"svg":return Er(n);case a.HY:return _r(n.children);default:return n}return Er(n)}return null}function Er(e){const t=(0,y.s3)("only-child");return(0,a.Wm)("span",{class:t.e("content")},[e])}const kr=(0,a.aZ)({name:"ElPopperTrigger",inheritAttrs:!1}),Cr=(0,a.aZ)({...kr,props:Zn,setup(e,{expose:t}){const n=e,{role:r,triggerRef:o}=(0,a.f3)(Ae,void 0);yr(o);const s=(0,a.Fl)((()=>c.value?n.id:void 0)),i=(0,a.Fl)((()=>{if(r&&"tooltip"===r.value)return n.open&&n.id?n.id:void 0})),c=(0,a.Fl)((()=>{if(r&&"tooltip"!==r.value)return r.value})),d=(0,a.Fl)((()=>c.value?`${n.open}`:void 0));let h;return(0,a.bv)((()=>{(0,a.YP)((()=>n.virtualRef),(e=>{e&&(o.value=(0,u.NXq)(e))}),{immediate:!0}),(0,a.YP)(o,((e,t)=>{null==h||h(),h=void 0,(0,wr.kK)(e)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach((r=>{var o;const s=n[r];s&&(e.addEventListener(r.slice(2).toLowerCase(),s),null==(o=null==t?void 0:t.removeEventListener)||o.call(t,r.slice(2).toLowerCase(),s))})),h=(0,a.YP)([s,i,c,d],(t=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(((n,r)=>{(0,gr.Z)(t[r])?e.removeAttribute(n):e.setAttribute(n,t[r])}))}),{immediate:!0})),(0,wr.kK)(t)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((e=>t.removeAttribute(e)))}),{immediate:!0})})),(0,a.Jd)((()=>{null==h||h(),h=void 0})),t({triggerRef:o}),(e,t)=>e.virtualTriggering?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.j4)((0,l.SU)(Sr),(0,a.dG)({key:0},e.$attrs,{"aria-controls":(0,l.SU)(s),"aria-describedby":(0,l.SU)(i),"aria-expanded":(0,l.SU)(d),"aria-haspopup":(0,l.SU)(c)}),{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Ir=(0,m.Z)(Cr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const Ar=(0,a.aZ)({name:"ElTooltipTrigger"}),Tr=(0,a.aZ)({...Ar,props:Qn,setup(e,{expose:t}){const n=e,r=(0,y.s3)("tooltip"),{controlled:o,id:s,open:i,onOpen:u,onClose:d,onToggle:h}=(0,a.f3)(Ue,void 0),p=(0,l.iH)(null),f=()=>{if((0,l.SU)(o)||n.disabled)return!0},g=(0,l.Vh)(n,"trigger"),m=pr(f,hr(g,"hover",u)),v=pr(f,hr(g,"hover",d)),w=pr(f,hr(g,"click",(e=>{0===e.button&&h(e)}))),b=pr(f,hr(g,"focus",u)),S=pr(f,hr(g,"focus",d)),_=pr(f,hr(g,"contextmenu",(e=>{e.preventDefault(),h(e)}))),E=pr(f,(e=>{const{code:t}=e;n.triggerKeys.includes(t)&&(e.preventDefault(),h(e))}));return t({triggerRef:p}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(Ir),{id:(0,l.SU)(s),"virtual-ref":e.virtualRef,open:(0,l.SU)(i),"virtual-triggering":e.virtualTriggering,class:(0,c.C_)((0,l.SU)(r).e("trigger")),onBlur:(0,l.SU)(S),onClick:(0,l.SU)(w),onContextmenu:(0,l.SU)(_),onFocus:(0,l.SU)(b),onMouseenter:(0,l.SU)(m),onMouseleave:(0,l.SU)(v),onKeydown:(0,l.SU)(E)},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Rr=(0,m.Z)(Tr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]),xr=n(2259);let Or;const Nr=()=>{const e=(0,y.u_)(),t=(0,xr.SG)(),n=(0,a.Fl)((()=>`${e.value}-popper-container-${t.prefix}`)),r=(0,a.Fl)((()=>`#${n.value}`));return{id:n,selector:r}},Pr=e=>{const t=document.createElement("div");return t.id=e,document.body.appendChild(t),t},Dr=()=>{const{id:e,selector:t}=Nr();return(0,a.wF)((()=>{h.C5&&(Or||document.body.querySelector(t.value)||(Or=Pr(e.value)))})),{id:e,selector:t}},Ur=(e,t)=>{const n=(0,l.iH)(!1),r=(0,l.iH)(),o=()=>{t("focus")},s=e=>{var n;"pointer"!==(null==(n=e.detail)?void 0:n.focusReason)&&(r.value="first",t("blur"))},i=t=>{e.visible&&!n.value&&(t.target&&(r.value=t.target),n.value=!0)},a=t=>{e.trapping||("pointer"===t.detail.focusReason&&t.preventDefault(),n.value=!1)},c=()=>{n.value=!1,t("close")};return{focusStartRef:r,trapped:n,onFocusAfterReleased:s,onFocusAfterTrapped:o,onFocusInTrap:i,onFocusoutPrevented:a,onReleaseRequested:c}};function Lr(e){return void 0===e}var Br=Lr;const Mr=(e,t=[])=>{const{placement:n,strategy:r,popperOptions:o}=e,s={placement:n,strategy:r,...o,modifiers:[...jr(e),...t]};return zr(s,null==o?void 0:o.modifiers),s},Fr=e=>{if(h.C5)return(0,u.NXq)(e)};function jr(e){const{offset:t,gpuAcceleration:n,fallbackPlacements:r}=e;return[{name:"offset",options:{offset:[0,null!=t?t:12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function zr(e,t){t&&(e.modifiers=[...e.modifiers,...null!=t?t:[]])}var $r=n(5937);const Vr=(e,t,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:e})=>{const t=Hr(e);Object.assign(i.value,t)},requires:["computeStyles"]},o=(0,a.Fl)((()=>{const{onFirstUpdate:e,placement:t,strategy:o,modifiers:s}=(0,l.SU)(n);return{onFirstUpdate:e,placement:t||"bottom",strategy:o||"absolute",modifiers:[...s||[],r,{name:"applyStyles",enabled:!1}]}})),s=(0,l.XI)(),i=(0,l.iH)({styles:{popper:{position:(0,l.SU)(o).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),c=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return(0,a.YP)(o,(e=>{const t=(0,l.SU)(s);t&&t.setOptions(e)}),{deep:!0}),(0,a.YP)([e,t],(([e,t])=>{c(),e&&t&&(s.value=Hn(e,t,(0,l.SU)(o)))})),(0,a.Jd)((()=>{c()})),{state:(0,a.Fl)((()=>{var e;return{...(null==(e=(0,l.SU)(s))?void 0:e.state)||{}}})),styles:(0,a.Fl)((()=>(0,l.SU)(i).styles)),attributes:(0,a.Fl)((()=>(0,l.SU)(i).attributes)),update:()=>{var e;return null==(e=(0,l.SU)(s))?void 0:e.update()},forceUpdate:()=>{var e;return null==(e=(0,l.SU)(s))?void 0:e.forceUpdate()},instanceRef:(0,a.Fl)((()=>(0,l.SU)(s)))}};function Hr(e){const t=Object.keys(e.elements),n=(0,$r.Z)(t.map((t=>[t,e.styles[t]||{}]))),r=(0,$r.Z)(t.map((t=>[t,e.attributes[t]])));return{styles:n,attributes:r}}const Kr=0,qr=e=>{const{popperInstanceRef:t,contentRef:n,triggerRef:r,role:o}=(0,a.f3)(Ae,void 0),s=(0,l.iH)(),i=(0,l.iH)(),c=(0,a.Fl)((()=>({name:"eventListeners",enabled:!!e.visible}))),u=(0,a.Fl)((()=>{var e;const t=(0,l.SU)(s),n=null!=(e=(0,l.SU)(i))?e:Kr;return{name:"arrow",enabled:!Br(t),options:{element:t,padding:n}}})),d=(0,a.Fl)((()=>({onFirstUpdate:()=>{m()},...Mr(e,[(0,l.SU)(u),(0,l.SU)(c)])}))),h=(0,a.Fl)((()=>Fr(e.referenceEl)||(0,l.SU)(r))),{attributes:p,state:f,styles:g,update:m,forceUpdate:y,instanceRef:v}=Vr(h,n,d);return(0,a.YP)(v,(e=>t.value=e)),(0,a.bv)((()=>{(0,a.YP)((()=>{var e;return null==(e=(0,l.SU)(h))?void 0:e.getBoundingClientRect()}),(()=>{m()}))})),{attributes:p,arrowRef:s,contentRef:n,instanceRef:v,state:f,styles:g,role:o,forceUpdate:y,update:m}};var Wr=n(4568);const Yr=(e,{attributes:t,styles:n,role:r})=>{const{nextZIndex:o}=(0,Wr.Cn)(),s=(0,y.s3)("popper"),i=(0,a.Fl)((()=>(0,l.SU)(t).popper)),c=(0,l.iH)(e.zIndex||o()),u=(0,a.Fl)((()=>[s.b(),s.is("pure",e.pure),s.is(e.effect),e.popperClass])),d=(0,a.Fl)((()=>[{zIndex:(0,l.SU)(c)},e.popperStyle||{},(0,l.SU)(n).popper])),h=(0,a.Fl)((()=>"dialog"===r.value?"false":void 0)),p=(0,a.Fl)((()=>(0,l.SU)(n).arrow||{})),f=()=>{c.value=e.zIndex||o()};return{ariaModal:h,arrowStyle:p,contentAttrs:i,contentClass:u,contentStyle:d,contentZIndex:c,updateZIndex:f}};var Gr=n(165),Zr=n(4377);const Jr=(0,a.aZ)({name:"ElPopperContent"}),Qr=(0,a.aZ)({...Jr,props:Wn,emits:Yn,setup(e,{expose:t,emit:n}){const r=e,{focusStartRef:o,trapped:s,onFocusAfterReleased:i,onFocusAfterTrapped:u,onFocusInTrap:d,onFocusoutPrevented:h,onReleaseRequested:p}=Ur(r,n),{attributes:f,arrowRef:g,contentRef:m,styles:y,instanceRef:v,role:w,update:b}=qr(r),{ariaModal:S,arrowStyle:_,contentAttrs:E,contentClass:k,contentStyle:C,updateZIndex:I}=Yr(r,{styles:y,attributes:f,role:w}),A=(0,a.f3)(Gr.K,void 0),T=(0,l.iH)();let R;(0,a.JJ)(Te,{arrowStyle:_,arrowRef:g,arrowOffset:T}),A&&(A.addInputId||A.removeInputId)&&(0,a.JJ)(Gr.K,{...A,addInputId:c.dG,removeInputId:c.dG});const x=(e=!0)=>{b(),e&&I()},O=()=>{x(!1),r.visible&&r.focusOnShow?s.value=!0:!1===r.visible&&(s.value=!1)};return(0,a.bv)((()=>{(0,a.YP)((()=>r.triggerTargetEl),((e,t)=>{null==R||R(),R=void 0;const n=(0,l.SU)(e||m.value),o=(0,l.SU)(t||m.value);(0,wr.kK)(n)&&(R=(0,a.YP)([w,()=>r.ariaLabel,S,()=>r.id],(e=>{["role","aria-label","aria-modal","id"].forEach(((t,r)=>{(0,gr.Z)(e[r])?n.removeAttribute(t):n.setAttribute(t,e[r])}))}),{immediate:!0})),o!==n&&(0,wr.kK)(o)&&["role","aria-label","aria-modal","id"].forEach((e=>{o.removeAttribute(e)}))}),{immediate:!0}),(0,a.YP)((()=>r.visible),O,{immediate:!0})})),(0,a.Jd)((()=>{null==R||R(),R=void 0})),t({popperContentRef:m,popperInstanceRef:v,updatePopper:x,contentStyle:C}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",(0,a.dG)({ref_key:"contentRef",ref:m},(0,l.SU)(E),{style:(0,l.SU)(C),class:(0,l.SU)(k),tabindex:"-1",onMouseenter:t[0]||(t[0]=t=>e.$emit("mouseenter",t)),onMouseleave:t[1]||(t[1]=t=>e.$emit("mouseleave",t))}),[(0,a.Wm)((0,l.SU)(Zr.Z),{trapped:(0,l.SU)(s),"trap-on-focus-in":!0,"focus-trap-el":(0,l.SU)(m),"focus-start-el":(0,l.SU)(o),onFocusAfterTrapped:(0,l.SU)(u),onFocusAfterReleased:(0,l.SU)(i),onFocusin:(0,l.SU)(d),onFocusoutPrevented:(0,l.SU)(h),onReleaseRequested:(0,l.SU)(p)},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var Xr=(0,m.Z)(Qr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const eo=(0,a.aZ)({name:"ElTooltipContent",inheritAttrs:!1}),to=(0,a.aZ)({...eo,props:Gn,setup(e,{expose:t}){const n=e,{selector:r}=Nr(),o=(0,y.s3)("tooltip"),s=(0,l.iH)(null),i=(0,l.iH)(!1),{controlled:c,id:d,open:h,trigger:p,onClose:f,onOpen:g,onShow:m,onHide:v,onBeforeShow:w,onBeforeHide:b}=(0,a.f3)(Ue,void 0),S=(0,a.Fl)((()=>n.transition||`${o.namespace.value}-fade-in-linear`)),_=(0,a.Fl)((()=>n.persistent));(0,a.Jd)((()=>{i.value=!0}));const E=(0,a.Fl)((()=>!!(0,l.SU)(_)||(0,l.SU)(h))),k=(0,a.Fl)((()=>!n.disabled&&(0,l.SU)(h))),C=(0,a.Fl)((()=>n.appendTo||r.value)),I=(0,a.Fl)((()=>{var e;return null!=(e=n.style)?e:{}})),T=(0,a.Fl)((()=>!(0,l.SU)(h))),R=()=>{v()},x=()=>{if((0,l.SU)(c))return!0},O=pr(x,(()=>{n.enterable&&"hover"===(0,l.SU)(p)&&g()})),N=pr(x,(()=>{"hover"===(0,l.SU)(p)&&f()})),P=()=>{var e,t;null==(t=null==(e=s.value)?void 0:e.updatePopper)||t.call(e),null==w||w()},D=()=>{null==b||b()},U=()=>{m(),B=(0,u.i9H)((0,a.Fl)((()=>{var e;return null==(e=s.value)?void 0:e.popperContentRef})),(()=>{if((0,l.SU)(c))return;const e=(0,l.SU)(p);"hover"!==e&&f()}))},L=()=>{n.virtualTriggering||f()};let B;return(0,a.YP)((()=>(0,l.SU)(h)),(e=>{e||null==B||B()}),{flush:"post"}),(0,a.YP)((()=>n.content),(()=>{var e,t;null==(t=null==(e=s.value)?void 0:e.updatePopper)||t.call(e)})),t({contentRef:s}),(e,t)=>((0,a.wg)(),(0,a.j4)(a.lR,{disabled:!e.teleported,to:(0,l.SU)(C)},[(0,a.Wm)(A.uT,{name:(0,l.SU)(S),onAfterLeave:R,onBeforeEnter:P,onAfterEnter:U,onBeforeLeave:D},{default:(0,a.w5)((()=>[(0,l.SU)(E)?(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,l.SU)(Xr),(0,a.dG)({key:0,id:(0,l.SU)(d),ref_key:"contentRef",ref:s},e.$attrs,{"aria-label":e.ariaLabel,"aria-hidden":(0,l.SU)(T),"boundaries-padding":e.boundariesPadding,"fallback-placements":e.fallbackPlacements,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,placement:e.placement,"popper-options":e.popperOptions,strategy:e.strategy,effect:e.effect,enterable:e.enterable,pure:e.pure,"popper-class":e.popperClass,"popper-style":[e.popperStyle,(0,l.SU)(I)],"reference-el":e.referenceEl,"trigger-target-el":e.triggerTargetEl,visible:(0,l.SU)(k),"z-index":e.zIndex,onMouseenter:(0,l.SU)(O),onMouseleave:(0,l.SU)(N),onBlur:L,onClose:(0,l.SU)(f)}),{default:(0,a.w5)((()=>[i.value?(0,a.kq)("v-if",!0):(0,a.WI)(e.$slots,"default",{key:0})])),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[A.F8,(0,l.SU)(k)]]):(0,a.kq)("v-if",!0)])),_:3},8,["name"])],8,["disabled","to"]))}});var no=(0,m.Z)(to,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const ro=(0,a.aZ)({name:"ElPopperArrow",inheritAttrs:!1}),oo=(0,a.aZ)({...ro,props:sr,setup(e,{expose:t}){const n=e,r=(0,y.s3)("popper"),{arrowOffset:o,arrowRef:s,arrowStyle:i}=(0,a.f3)(Te,void 0);return(0,a.YP)((()=>n.arrowOffset),(e=>{o.value=e})),(0,a.Jd)((()=>{s.value=void 0})),t({arrowRef:s}),(e,t)=>((0,a.wg)(),(0,a.iD)("span",{ref_key:"arrowRef",ref:s,class:(0,c.C_)((0,l.SU)(r).e("arrow")),style:(0,c.j5)((0,l.SU)(i)),"data-popper-arrow":""},null,6))}});var so=(0,m.Z)(oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const io=["innerHTML"],ao={key:1},lo=(0,a.aZ)({name:"ElTooltip"}),co=(0,a.aZ)({...lo,props:cr,emits:ur,setup(e,{expose:t,emit:n}){const r=e;Dr();const o=(0,xr.Me)(),s=(0,l.iH)(),i=(0,l.iH)(),u=()=>{var e;const t=(0,l.SU)(s);t&&(null==(e=t.popperInstanceRef)||e.update())},d=(0,l.iH)(!1),p=(0,l.iH)(),{show:f,hide:g,hasUpdateHandler:m}=lr({indicator:d,toggleReason:p}),{onOpen:y,onClose:v}=Me({showAfter:(0,l.Vh)(r,"showAfter"),hideAfter:(0,l.Vh)(r,"hideAfter"),autoClose:(0,l.Vh)(r,"autoClose"),open:f,close:g}),w=(0,a.Fl)((()=>(0,h.jn)(r.visible)&&!m.value));(0,a.JJ)(Ue,{controlled:w,id:o,open:(0,l.OT)(d),trigger:(0,l.Vh)(r,"trigger"),onOpen:e=>{y(e)},onClose:e=>{v(e)},onToggle:e=>{(0,l.SU)(d)?v(e):y(e)},onShow:()=>{n("show",p.value)},onHide:()=>{n("hide",p.value)},onBeforeShow:()=>{n("before-show",p.value)},onBeforeHide:()=>{n("before-hide",p.value)},updatePopper:u}),(0,a.YP)((()=>r.disabled),(e=>{e&&d.value&&(d.value=!1)}));const b=()=>{var e,t;const n=null==(t=null==(e=i.value)?void 0:e.contentRef)?void 0:t.popperContentRef;return n&&n.contains(document.activeElement)};return(0,a.se)((()=>d.value&&g())),t({popperRef:s,contentRef:i,isFocusInsideContent:b,updatePopper:u,onOpen:y,onClose:v,hide:g}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(De),{ref_key:"popperRef",ref:s,role:e.role},{default:(0,a.w5)((()=>[(0,a.Wm)(Rr,{disabled:e.disabled,trigger:e.trigger,"trigger-keys":e.triggerKeys,"virtual-ref":e.virtualRef,"virtual-triggering":e.virtualTriggering},{default:(0,a.w5)((()=>[e.$slots.default?(0,a.WI)(e.$slots,"default",{key:0}):(0,a.kq)("v-if",!0)])),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),(0,a.Wm)(no,{ref_key:"contentRef",ref:i,"aria-label":e.ariaLabel,"boundaries-padding":e.boundariesPadding,content:e.content,disabled:e.disabled,effect:e.effect,enterable:e.enterable,"fallback-placements":e.fallbackPlacements,"hide-after":e.hideAfter,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,persistent:e.persistent,"popper-class":e.popperClass,"popper-style":e.popperStyle,placement:e.placement,"popper-options":e.popperOptions,pure:e.pure,"raw-content":e.rawContent,"reference-el":e.referenceEl,"trigger-target-el":e.triggerTargetEl,"show-after":e.showAfter,strategy:e.strategy,teleported:e.teleported,transition:e.transition,"virtual-triggering":e.virtualTriggering,"z-index":e.zIndex,"append-to":e.appendTo},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"content",{},(()=>[e.rawContent?((0,a.wg)(),(0,a.iD)("span",{key:0,innerHTML:e.content},null,8,io)):((0,a.wg)(),(0,a.iD)("span",ao,(0,c.zw)(e.content),1))])),e.showArrow?((0,a.wg)(),(0,a.j4)((0,l.SU)(so),{key:0,"arrow-offset":e.arrowOffset},null,8,["arrow-offset"])):(0,a.kq)("v-if",!0)])),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])])),_:3},8,["role"]))}});var uo=(0,m.Z)(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const ho=(0,C.nz)(uo),po=(0,d.o8)({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:(0,d.Cq)(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:(0,d.Cq)([Function,Array]),default:c.dG},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:Gn.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String}),fo={[p.f_]:e=>(0,c.HD)(e),[p.e_]:e=>(0,c.HD)(e),[p.O7]:e=>(0,c.HD)(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>(0,c.Kn)(e)};var go=n(6274),mo=n(1069);const yo=()=>Math.floor(1e4*Math.random()),vo=["aria-expanded","aria-owns"],wo={key:0},bo=["id","aria-selected","onClick"],So="ElAutocomplete",_o=(0,a.aZ)({name:So,inheritAttrs:!1}),Eo=(0,a.aZ)({..._o,props:po,emits:fo,setup(e,{expose:t,emit:n}){const r=e,o=(0,go.l)(),s=(0,a.l1)(),i=(0,mo.DT)(),d=(0,y.s3)("autocomplete"),h=(0,l.iH)(),f=(0,l.iH)(),g=(0,l.iH)(),m=(0,l.iH)();let v=!1,b=!1;const S=(0,l.iH)([]),_=(0,l.iH)(-1),E=(0,l.iH)(""),k=(0,l.iH)(!1),C=(0,l.iH)(!1),I=(0,l.iH)(!1),R=(0,a.Fl)((()=>d.b(String(yo())))),x=(0,a.Fl)((()=>s.style)),O=(0,a.Fl)((()=>{const e=S.value.length>0;return(e||I.value)&&k.value})),N=(0,a.Fl)((()=>!r.hideLoading&&I.value)),P=(0,a.Fl)((()=>h.value?Array.from(h.value.$el.querySelectorAll("input")):[])),D=async()=>{await(0,a.Y3)(),O.value&&(E.value=`${h.value.$el.offsetWidth}px`)},U=()=>{_.value=-1},L=async e=>{if(C.value)return;const t=e=>{I.value=!1,C.value||((0,c.kJ)(e)?(S.value=e,_.value=r.highlightFirstItem?0:-1):(0,w._)(So,"autocomplete suggestions must be an array"))};if(I.value=!0,(0,c.kJ)(r.fetchSuggestions))t(r.fetchSuggestions);else{const n=await r.fetchSuggestions(e,t);(0,c.kJ)(n)&&t(n)}},B=ie(L,r.debounce),M=e=>{const t=!!e;if(n(p.e_,e),n(p.f_,e),C.value=!1,k.value||(k.value=t),!r.triggerOnFocus&&!e)return C.value=!0,void(S.value=[]);B(e)},F=e=>{var t;i.value||("INPUT"!==(null==(t=e.target)?void 0:t.tagName)||P.value.includes(document.activeElement))&&(k.value=!0)},j=e=>{n(p.O7,e)},z=e=>{b?b=!1:(k.value=!0,n("focus",e),r.triggerOnFocus&&!v&&B(String(r.modelValue)))},$=e=>{setTimeout((()=>{var t;(null==(t=g.value)?void 0:t.isFocusInsideContent())?b=!0:(k.value&&q(),n("blur",e))}))},V=()=>{k.value=!1,n(p.f_,""),n("clear")},H=async()=>{O.value&&_.value>=0&&_.value<S.value.length?G(S.value[_.value]):r.selectWhenUnmatched&&(n("select",{value:r.modelValue}),S.value=[],_.value=-1)},K=e=>{O.value&&(e.preventDefault(),e.stopPropagation(),q())},q=()=>{k.value=!1},W=()=>{var e;null==(e=h.value)||e.focus()},Y=()=>{var e;null==(e=h.value)||e.blur()},G=async e=>{n(p.e_,e[r.valueKey]),n(p.f_,e[r.valueKey]),n("select",e),S.value=[],_.value=-1},Z=e=>{if(!O.value||I.value)return;if(e<0)return void(_.value=-1);e>=S.value.length&&(e=S.value.length-1);const t=f.value.querySelector(`.${d.be("suggestion","wrap")}`),n=t.querySelectorAll(`.${d.be("suggestion","list")} li`),r=n[e],o=t.scrollTop,{offsetTop:s,scrollHeight:i}=r;s+i>o+t.clientHeight&&(t.scrollTop+=i),s<o&&(t.scrollTop-=i),_.value=e,h.value.ref.setAttribute("aria-activedescendant",`${R.value}-item-${_.value}`)};return(0,u.i9H)(m,(()=>{O.value&&q()})),(0,a.bv)((()=>{h.value.ref.setAttribute("role","textbox"),h.value.ref.setAttribute("aria-autocomplete","list"),h.value.ref.setAttribute("aria-controls","id"),h.value.ref.setAttribute("aria-activedescendant",`${R.value}-item-${_.value}`),v=h.value.ref.hasAttribute("readonly")})),t({highlightedIndex:_,activated:k,loading:I,inputRef:h,popperRef:g,suggestions:S,handleSelect:G,handleKeyEnter:H,focus:W,blur:Y,close:q,highlight:Z}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(ho),{ref_key:"popperRef",ref:g,visible:(0,l.SU)(O),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[(0,l.SU)(d).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${(0,l.SU)(d).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:D,onHide:U},{content:(0,a.w5)((()=>[(0,a._)("div",{ref_key:"regionRef",ref:f,class:(0,c.C_)([(0,l.SU)(d).b("suggestion"),(0,l.SU)(d).is("loading",(0,l.SU)(N))]),style:(0,c.j5)({[e.fitInputWidth?"width":"minWidth"]:E.value,outline:"none"}),role:"region"},[(0,a.Wm)((0,l.SU)(Ie),{id:(0,l.SU)(R),tag:"ul","wrap-class":(0,l.SU)(d).be("suggestion","wrap"),"view-class":(0,l.SU)(d).be("suggestion","list"),role:"listbox"},{default:(0,a.w5)((()=>[(0,l.SU)(N)?((0,a.wg)(),(0,a.iD)("li",wo,[(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)((0,l.SU)(d).is("loading"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.gbz))])),_:1},8,["class"])])):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(S.value,((t,n)=>((0,a.wg)(),(0,a.iD)("li",{id:`${(0,l.SU)(R)}-item-${n}`,key:n,class:(0,c.C_)({highlighted:_.value===n}),role:"option","aria-selected":_.value===n,onClick:e=>G(t)},[(0,a.WI)(e.$slots,"default",{item:t},(()=>[(0,a.Uk)((0,c.zw)(t[e.valueKey]),1)]))],10,bo)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:(0,a.w5)((()=>[(0,a._)("div",{ref_key:"listboxRef",ref:m,class:(0,c.C_)([(0,l.SU)(d).b(),e.$attrs.class]),style:(0,c.j5)((0,l.SU)(x)),role:"combobox","aria-haspopup":"listbox","aria-expanded":(0,l.SU)(O),"aria-owns":(0,l.SU)(R)},[(0,a.Wm)((0,l.SU)(le.EZ),(0,a.dG)({ref_key:"inputRef",ref:h},(0,l.SU)(o),{clearable:e.clearable,disabled:(0,l.SU)(i),name:e.name,"model-value":e.modelValue,onInput:M,onChange:j,onFocus:z,onBlur:$,onClear:V,onKeydown:[t[0]||(t[0]=(0,A.D2)((0,A.iM)((e=>Z(_.value-1)),["prevent"]),["up"])),t[1]||(t[1]=(0,A.D2)((0,A.iM)((e=>Z(_.value+1)),["prevent"]),["down"])),(0,A.D2)(H,["enter"]),(0,A.D2)(q,["tab"]),(0,A.D2)(K,["esc"])],onMousedown:F}),(0,a.Nv)({_:2},[e.$slots.prepend?{name:"prepend",fn:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"suffix")]))}:void 0]),1040,["clearable","disabled","name","model-value","onKeydown"])],14,vo)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var ko=(0,m.Z)(Eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const Co=(0,C.nz)(ko);var Io=n(209);const Ao=(0,d.o8)({size:{type:[Number,String],values:Io.k,default:"",validator:e=>(0,h.hj)(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:x.AA},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:(0,d.Cq)(String),default:"cover"}}),To={error:e=>e instanceof Event},Ro=["src","alt","srcset"],xo=(0,a.aZ)({name:"ElAvatar"}),Oo=(0,a.aZ)({...xo,props:Ao,emits:To,setup(e,{emit:t}){const n=e,r=(0,y.s3)("avatar"),o=(0,l.iH)(!1),s=(0,a.Fl)((()=>{const{size:e,icon:t,shape:o}=n,s=[r.b()];return(0,c.HD)(e)&&s.push(r.m(e)),t&&s.push(r.m("icon")),o&&s.push(r.m(o)),s})),i=(0,a.Fl)((()=>{const{size:e}=n;return(0,h.hj)(e)?r.cssVarBlock({size:(0,v.Nn)(e)||""}):void 0})),u=(0,a.Fl)((()=>({objectFit:n.fit})));function d(e){o.value=!0,t("error",e)}return(0,a.YP)((()=>n.src),(()=>o.value=!1)),(e,t)=>((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(s)),style:(0,c.j5)((0,l.SU)(i))},[!e.src&&!e.srcSet||o.value?e.icon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:1})):(0,a.WI)(e.$slots,"default",{key:2}):((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:(0,c.j5)((0,l.SU)(u)),onError:d},null,44,Ro))],6))}});var No=(0,m.Z)(Oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const Po=(0,C.nz)(No),Do={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},Uo={click:e=>e instanceof MouseEvent},Lo=(e,t,n)=>{const r=(0,l.XI)(),o=(0,l.XI)(),s=(0,l.iH)(!1),i=()=>{r.value&&(s.value=r.value.scrollTop>=e.visibilityHeight)},c=e=>{var n;null==(n=r.value)||n.scrollTo({top:0,behavior:"smooth"}),t("click",e)},d=(0,h.vA)(i,300,!0);return(0,u.ORN)(o,"scroll",d),(0,a.bv)((()=>{var t;o.value=document,r.value=document.documentElement,e.target&&(r.value=null!=(t=document.querySelector(e.target))?t:void 0,r.value||(0,w._)(n,`target does not exist: ${e.target}`),o.value=r.value)})),{visible:s,handleClick:c}},Bo="ElBacktop",Mo=(0,a.aZ)({name:Bo}),Fo=(0,a.aZ)({...Mo,props:Do,emits:Uo,setup(e,{emit:t}){const n=e,r=(0,y.s3)("backtop"),{handleClick:o,visible:s}=Lo(n,t,Bo),i=(0,a.Fl)((()=>({right:`${n.right}px`,bottom:`${n.bottom}px`})));return(e,t)=>((0,a.wg)(),(0,a.j4)(A.uT,{name:`${(0,l.SU)(r).namespace.value}-fade-in`},{default:(0,a.w5)((()=>[(0,l.SU)(s)?((0,a.wg)(),(0,a.iD)("div",{key:0,style:(0,c.j5)((0,l.SU)(i)),class:(0,c.C_)((0,l.SU)(r).b()),onClick:t[0]||(t[0]=(0,A.iM)(((...e)=>(0,l.SU)(o)&&(0,l.SU)(o)(...e)),["stop"]))},[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)((0,l.SU)(r).e("icon"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.Vx7))])),_:1},8,["class"])]))],6)):(0,a.kq)("v-if",!0)])),_:3},8,["name"]))}});var jo=(0,m.Z)(Fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const zo=(0,C.nz)(jo),$o=(0,d.o8)({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Vo=["textContent"],Ho=(0,a.aZ)({name:"ElBadge"}),Ko=(0,a.aZ)({...Ho,props:$o,setup(e,{expose:t}){const n=e,r=(0,y.s3)("badge"),o=(0,a.Fl)((()=>n.isDot?"":(0,h.hj)(n.value)&&(0,h.hj)(n.max)&&n.max<n.value?`${n.max}+`:`${n.value}`));return t({content:o}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(r).b())},[(0,a.WI)(e.$slots,"default"),(0,a.Wm)(A.uT,{name:`${(0,l.SU)(r).namespace.value}-zoom-in-center`,persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("sup",{class:(0,c.C_)([(0,l.SU)(r).e("content"),(0,l.SU)(r).em("content",e.type),(0,l.SU)(r).is("fixed",!!e.$slots.default),(0,l.SU)(r).is("dot",e.isDot)]),textContent:(0,c.zw)((0,l.SU)(o))},null,10,Vo),[[A.F8,!e.hidden&&((0,l.SU)(o)||e.isDot)]])])),_:1},8,["name"])],2))}});var qo=(0,m.Z)(Ko,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Wo=(0,C.nz)(qo),Yo=Symbol("breadcrumbKey"),Go=(0,d.o8)({separator:{type:String,default:"/"},separatorIcon:{type:x.AA}}),Zo=(0,a.aZ)({name:"ElBreadcrumb"}),Jo=(0,a.aZ)({...Zo,props:Go,setup(e){const t=e,n=(0,y.s3)("breadcrumb"),r=(0,l.iH)();return(0,a.JJ)(Yo,t),(0,a.bv)((()=>{const e=r.value.querySelectorAll(`.${n.e("item")}`);e.length&&e[e.length-1].setAttribute("aria-current","page")})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"breadcrumb",ref:r,class:(0,c.C_)((0,l.SU)(n).b()),"aria-label":"Breadcrumb",role:"navigation"},[(0,a.WI)(e.$slots,"default")],2))}});var Qo=(0,m.Z)(Jo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const Xo=(0,d.o8)({to:{type:(0,d.Cq)([String,Object]),default:""},replace:{type:Boolean,default:!1}}),es=(0,a.aZ)({name:"ElBreadcrumbItem"}),ts=(0,a.aZ)({...es,props:Xo,setup(e){const t=e,n=(0,a.FN)(),r=(0,a.f3)(Yo,void 0),o=(0,y.s3)("breadcrumb"),{separator:s,separatorIcon:i}=(0,l.BK)(r),u=n.appContext.config.globalProperties.$router,d=(0,l.iH)(),h=()=>{t.to&&u&&(t.replace?u.replace(t.to):u.push(t.to))};return(e,t)=>((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(o).e("item"))},[(0,a._)("span",{ref_key:"link",ref:d,class:(0,c.C_)([(0,l.SU)(o).e("inner"),(0,l.SU)(o).is("link",!!e.to)]),role:"link",onClick:h},[(0,a.WI)(e.$slots,"default")],2),(0,l.SU)(i)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(o).e("separator"))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(i))))])),_:1},8,["class"])):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,c.C_)((0,l.SU)(o).e("separator")),role:"presentation"},(0,c.zw)((0,l.SU)(s)),3))],2))}});var ns=(0,m.Z)(ts,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const rs=(0,C.nz)(Qo,{BreadcrumbItem:ns}),os=(0,C.dp)(ns);var ss=n(5659),is=n(7484);const as=(e,t)=>[e>0?e-1:void 0,e,e<t?e+1:void 0],ls=e=>Array.from(Array.from({length:e}).keys()),cs=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),us=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),ds=function(e,t){const n=(0,c.J_)(e),r=(0,c.J_)(t);return n&&r?e.getTime()===t.getTime():!n&&!r&&e===t},hs=function(e,t){const n=(0,c.kJ)(e),r=(0,c.kJ)(t);return n&&r?e.length===t.length&&e.every(((e,n)=>ds(e,t[n]))):!n&&!r&&ds(e,t)},ps=function(e,t,n){const r=(0,wr.xb)(t)||"x"===t?is(e).locale(n):is(e,t).locale(n);return r.isValid()?r:void 0},fs=function(e,t,n){return(0,wr.xb)(t)?e:"x"===t?+e:is(e).locale(n).format(t)},gs=(e,t)=>{var n;const r=[],o=null==t?void 0:t();for(let s=0;s<e;s++)r.push(null!=(n=null==o?void 0:o.includes(s))&&n);return r},ms=(e,t)=>{const n=e.subtract(1,"month").endOf("month").date();return ls(t).map(((e,r)=>n-(t-r-1)))},ys=e=>{const t=e.daysInMonth();return ls(t).map(((e,t)=>t+1))},vs=e=>ls(e.length/7).map((t=>{const n=7*t;return e.slice(n,n+7)})),ws=(0,d.o8)({selectedDay:{type:(0,d.Cq)(Object)},range:{type:(0,d.Cq)(Array)},date:{type:(0,d.Cq)(Object),required:!0},hideHeader:{type:Boolean}}),bs={pick:e=>(0,c.Kn)(e)};var Ss=n(6036),_s=n(7774);const Es=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],ks=["sun","mon","tue","wed","thu","fri","sat"],Cs=(e,t)=>{is.extend(Ss);const n=is.localeData().firstDayOfWeek(),{t:r,lang:o}=(0,_s.bU)(),s=is().locale(o.value),i=(0,a.Fl)((()=>!!e.range&&!!e.range.length)),l=(0,a.Fl)((()=>{let t=[];if(i.value){const[n,r]=e.range,o=ls(r.date()-n.date()+1).map((e=>({text:n.date()+e,type:"current"})));let s=o.length%7;s=0===s?0:7-s;const i=ls(s).map(((e,t)=>({text:t+1,type:"next"})));t=o.concat(i)}else{const r=e.date.startOf("month").day(),o=ms(e.date,(r-n+7)%7).map((e=>({text:e,type:"prev"}))),s=ys(e.date).map((e=>({text:e,type:"current"})));t=[...o,...s];const i=7-(t.length%7||7),a=ls(i).map(((e,t)=>({text:t+1,type:"next"})));t=t.concat(a)}return vs(t)})),c=(0,a.Fl)((()=>{const e=n;return 0===e?ks.map((e=>r(`el.datepicker.weeks.${e}`))):ks.slice(e).concat(ks.slice(0,e)).map((e=>r(`el.datepicker.weeks.${e}`)))})),u=(t,n)=>{switch(n){case"prev":return e.date.startOf("month").subtract(1,"month").date(t);case"next":return e.date.startOf("month").add(1,"month").date(t);case"current":return e.date.date(t)}},d=({text:e,type:n})=>{const r=u(e,n);t("pick",r)},h=({text:t,type:n})=>{const r=u(t,n);return{isSelected:r.isSame(e.selectedDay),type:`${n}-month`,day:r.format("YYYY-MM-DD"),date:r.toDate()}};return{now:s,isInRange:i,rows:l,weekDays:c,getFormattedDate:u,handlePickDay:d,getSlotData:h}},Is={key:0},As=["onClick"],Ts=(0,a.aZ)({name:"DateTable"}),Rs=(0,a.aZ)({...Ts,props:ws,emits:bs,setup(e,{expose:t,emit:n}){const r=e,{isInRange:o,now:s,rows:i,weekDays:u,getFormattedDate:d,handlePickDay:h,getSlotData:p}=Cs(r,n),f=(0,y.s3)("calendar-table"),g=(0,y.s3)("calendar-day"),m=({text:e,type:t})=>{const n=[t];if("current"===t){const o=d(e,t);o.isSame(r.selectedDay,"day")&&n.push(g.is("selected")),o.isSame(s,"day")&&n.push(g.is("today"))}return n};return t({getFormattedDate:d}),(e,t)=>((0,a.wg)(),(0,a.iD)("table",{class:(0,c.C_)([(0,l.SU)(f).b(),(0,l.SU)(f).is("range",(0,l.SU)(o))]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("thead",Is,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(u),(e=>((0,a.wg)(),(0,a.iD)("th",{key:e},(0,c.zw)(e),1)))),128))])),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(i),((t,n)=>((0,a.wg)(),(0,a.iD)("tr",{key:n,class:(0,c.C_)({[(0,l.SU)(f).e("row")]:!0,[(0,l.SU)(f).em("row","hide-border")]:0===n&&e.hideHeader})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,((t,n)=>((0,a.wg)(),(0,a.iD)("td",{key:n,class:(0,c.C_)(m(t)),onClick:e=>(0,l.SU)(h)(t)},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(g).b())},[(0,a.WI)(e.$slots,"date-cell",{data:(0,l.SU)(p)(t)},(()=>[(0,a._)("span",null,(0,c.zw)(t.text),1)]))],2)],10,As)))),128))],2)))),128))])],2))}});var xs=(0,m.Z)(Rs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]),Os=n(9379);const Ns=(e,t)=>{const n=e.endOf("month"),r=t.startOf("month"),o=n.isSame(r,"week"),s=o?r.add(1,"week"):r;return[[e,n],[s.startOf("week"),t]]},Ps=(e,t)=>{const n=e.endOf("month"),r=e.add(1,"month").startOf("month"),o=n.isSame(r,"week")?r.add(1,"week"):r,s=o.endOf("month"),i=t.startOf("month"),a=s.isSame(i,"week")?i.add(1,"week"):i;return[[e,n],[o.startOf("week"),s],[a.startOf("week"),t]]},Ds=(e,t,n)=>{const r=(0,a.Rr)(),{lang:o}=(0,_s.bU)(),s=(0,l.iH)(),i=is().locale(o.value),c=(0,a.Fl)({get(){return e.modelValue?d.value:s.value},set(e){if(!e)return;s.value=e;const n=e.toDate();t(p.e_,n),t(p.f_,n)}}),u=(0,a.Fl)((()=>{if(!e.range)return[];const t=e.range.map((e=>is(e).locale(o.value))),[r,s]=t;return r.isAfter(s)?((0,w.N)(n,"end time should be greater than start time"),[]):r.isSame(s,"month")?y(r,s):r.add(1,"month").month()!==s.month()?((0,w.N)(n,"start time and end time interval must not exceed two months"),[]):y(r,s)})),d=(0,a.Fl)((()=>e.modelValue?is(e.modelValue).locale(o.value):c.value||(u.value.length?u.value[0][0]:i))),h=(0,a.Fl)((()=>d.value.subtract(1,"month").date(1))),f=(0,a.Fl)((()=>d.value.add(1,"month").date(1))),g=(0,a.Fl)((()=>d.value.subtract(1,"year").date(1))),m=(0,a.Fl)((()=>d.value.add(1,"year").date(1))),y=(e,t)=>{const r=e.startOf("week"),o=t.endOf("week"),s=r.get("month"),i=o.get("month");return s===i?[[r,o]]:(s+1)%12===i?Ns(r,o):s+2===i||(s+1)%11===i?Ps(r,o):((0,w.N)(n,"start time and end time interval must not exceed two months"),[])},v=e=>{c.value=e},b=e=>{const t={"prev-month":h.value,"next-month":f.value,"prev-year":g.value,"next-year":m.value,today:i},n=t[e];n.isSame(d.value,"day")||v(n)};return(0,Os.A)({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},(0,a.Fl)((()=>!!r.dateCell))),{calculateValidatedDateRange:y,date:d,realSelectedDay:c,pickDay:v,selectDate:b,validatedRange:u}},Us=e=>(0,c.kJ)(e)&&2===e.length&&e.every((e=>(0,c.J_)(e))),Ls=(0,d.o8)({modelValue:{type:Date},range:{type:(0,d.Cq)(Array),validator:Us}}),Bs={[p.f_]:e=>(0,c.J_)(e),[p.e_]:e=>(0,c.J_)(e)},Ms="ElCalendar",Fs=(0,a.aZ)({name:Ms}),js=(0,a.aZ)({...Fs,props:Ls,emits:Bs,setup(e,{expose:t,emit:n}){const r=e,o=(0,y.s3)("calendar"),{calculateValidatedDateRange:s,date:i,pickDay:u,realSelectedDay:d,selectDate:h,validatedRange:p}=Ds(r,n,Ms),{t:f}=(0,_s.bU)(),g=(0,a.Fl)((()=>{const e=`el.datepicker.month${i.value.format("M")}`;return`${i.value.year()} ${f("el.datepicker.year")} ${f(e)}`}));return t({selectedDay:d,pickDay:u,selectDate:h,calculateValidatedDateRange:s}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(o).b())},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("header"))},[(0,a.WI)(e.$slots,"header",{date:(0,l.SU)(g)},(()=>[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("title"))},(0,c.zw)((0,l.SU)(g)),3),0===(0,l.SU)(p).length?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(o).e("button-group"))},[(0,a.Wm)((0,l.SU)(ss.MO),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ss.mi),{size:"small",onClick:t[0]||(t[0]=e=>(0,l.SU)(h)("prev-month"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(f)("el.datepicker.prevMonth")),1)])),_:1}),(0,a.Wm)((0,l.SU)(ss.mi),{size:"small",onClick:t[1]||(t[1]=e=>(0,l.SU)(h)("today"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(f)("el.datepicker.today")),1)])),_:1}),(0,a.Wm)((0,l.SU)(ss.mi),{size:"small",onClick:t[2]||(t[2]=e=>(0,l.SU)(h)("next-month"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(f)("el.datepicker.nextMonth")),1)])),_:1})])),_:1})],2)):(0,a.kq)("v-if",!0)]))],2),0===(0,l.SU)(p).length?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(o).e("body"))},[(0,a.Wm)(xs,{date:(0,l.SU)(i),"selected-day":(0,l.SU)(d),onPick:(0,l.SU)(u)},(0,a.Nv)({_:2},[e.$slots["date-cell"]||e.$slots.dateCell?{name:"date-cell",fn:(0,a.w5)((t=>[e.$slots["date-cell"]?(0,a.WI)(e.$slots,"date-cell",(0,c.vs)((0,a.dG)({key:0},t))):(0,a.WI)(e.$slots,"dateCell",(0,c.vs)((0,a.dG)({key:1},t)))]))}:void 0]),1032,["date","selected-day","onPick"])],2)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(o).e("body"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(p),((t,n)=>((0,a.wg)(),(0,a.j4)(xs,{key:n,date:t[0],"selected-day":(0,l.SU)(d),range:t,"hide-header":0!==n,onPick:(0,l.SU)(u)},(0,a.Nv)({_:2},[e.$slots["date-cell"]||e.$slots.dateCell?{name:"date-cell",fn:(0,a.w5)((t=>[e.$slots["date-cell"]?(0,a.WI)(e.$slots,"date-cell",(0,c.vs)((0,a.dG)({key:0},t))):(0,a.WI)(e.$slots,"dateCell",(0,c.vs)((0,a.dG)({key:1},t)))]))}:void 0]),1032,["date","selected-day","range","hide-header","onPick"])))),128))],2))],2))}});var zs=(0,m.Z)(js,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const $s=(0,C.nz)(zs),Vs=(0,d.o8)({header:{type:String,default:""},bodyStyle:{type:(0,d.Cq)([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),Hs=(0,a.aZ)({name:"ElCard"}),Ks=(0,a.aZ)({...Hs,props:Vs,setup(e){const t=(0,y.s3)("card");return(e,n)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(t).b(),(0,l.SU)(t).is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(t).e("header"))},[(0,a.WI)(e.$slots,"header",{},(()=>[(0,a.Uk)((0,c.zw)(e.header),1)]))],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(t).e("body")),style:(0,c.j5)(e.bodyStyle)},[(0,a.WI)(e.$slots,"default")],6)],2))}});var qs=(0,m.Z)(Ks,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const Ws=(0,C.nz)(qs),Ys=(0,d.o8)({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Gs={change:(e,t)=>[e,t].every(h.hj)};var Zs="Expected a function";function Js(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(Zs);return(0,M.Z)(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ie(e,t,{leading:r,maxWait:t,trailing:o})}var Qs=Js;const Xs=Symbol("carouselContextKey");var ei=n(2813);const ti=(e,t,n)=>{const r=(0,ei.M3)(e.subTree).filter((e=>{var n;return(0,a.lA)(e)&&(null==(n=e.type)?void 0:n.name)===t&&!!e.component})),o=r.map((e=>e.component.uid));return o.map((e=>n[e])).filter((e=>!!e))},ni=(e,t)=>{const n={},r=(0,l.XI)([]),o=o=>{n[o.uid]=o,r.value=ti(e,t,n)},s=e=>{delete n[e],r.value=r.value.filter((t=>t.uid!==e))};return{children:r,addChild:o,removeChild:s}},ri=300,oi=(e,t,n)=>{const{children:r,addChild:o,removeChild:s}=ni((0,a.FN)(),"ElCarouselItem"),i=(0,l.iH)(-1),d=(0,l.iH)(null),h=(0,l.iH)(!1),p=(0,l.iH)(),f=(0,a.Fl)((()=>"never"!==e.arrow&&!(0,l.SU)(y))),g=(0,a.Fl)((()=>r.value.some((e=>e.props.label.toString().length>0)))),m=(0,a.Fl)((()=>"card"===e.type)),y=(0,a.Fl)((()=>"vertical"===e.direction)),v=Qs((e=>{k(e)}),ri,{trailing:!0}),b=Qs((e=>{N(e)}),ri);function S(){d.value&&(clearInterval(d.value),d.value=null)}function _(){e.interval<=0||!e.autoplay||d.value||(d.value=setInterval((()=>E()),e.interval))}const E=()=>{i.value<r.value.length-1?i.value=i.value+1:e.loop&&(i.value=0)};function k(t){if((0,c.HD)(t)){const e=r.value.filter((e=>e.props.name===t));e.length>0&&(t=r.value.indexOf(e[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return void(0,w.N)(n,"index must be integer.");const o=r.value.length,s=i.value;i.value=t<0?e.loop?o-1:0:t>=o?e.loop?0:o-1:t,s===i.value&&C(s),U()}function C(e){r.value.forEach(((t,n)=>{t.translateItem(n,i.value,e)}))}function I(e,t){var n,o,s,i;const a=(0,l.SU)(r),c=a.length;if(0===c||!e.states.inStage)return!1;const u=t+1,d=t-1,h=c-1,p=a[h].states.active,f=a[0].states.active,g=null==(o=null==(n=a[u])?void 0:n.states)?void 0:o.active,m=null==(i=null==(s=a[d])?void 0:s.states)?void 0:i.active;return t===h&&f||g?"left":!!(0===t&&p||m)&&"right"}function A(){h.value=!0,e.pauseOnHover&&S()}function T(){h.value=!1,_()}function R(e){(0,l.SU)(y)||r.value.forEach(((t,n)=>{e===I(t,n)&&(t.states.hover=!0)}))}function x(){(0,l.SU)(y)||r.value.forEach((e=>{e.states.hover=!1}))}function O(e){i.value=e}function N(t){"hover"===e.trigger&&t!==i.value&&(i.value=t)}function P(){k(i.value-1)}function D(){k(i.value+1)}function U(){S(),_()}(0,a.YP)((()=>i.value),((e,n)=>{C(n),n>-1&&t("change",e,n)})),(0,a.YP)((()=>e.autoplay),(e=>{e?_():S()})),(0,a.YP)((()=>e.loop),(()=>{k(i.value)})),(0,a.YP)((()=>e.interval),(()=>{U()})),(0,a.YP)((()=>r.value),(()=>{r.value.length>0&&k(e.initialIndex)}));const L=(0,l.XI)();return(0,a.bv)((()=>{L.value=(0,u.yU7)(p.value,(()=>{C()})),_()})),(0,a.Jd)((()=>{S(),p.value&&L.value&&L.value.stop()})),(0,a.JJ)(Xs,{root:p,isCardType:m,isVertical:y,items:r,loop:e.loop,addItem:o,removeItem:s,setActiveItem:k}),{root:p,activeIndex:i,arrowDisplay:f,hasLabel:g,hover:h,isCardType:m,items:r,handleButtonEnter:R,handleButtonLeave:x,handleIndicatorClick:O,handleMouseEnter:A,handleMouseLeave:T,setActiveItem:k,prev:P,next:D,throttledArrowClick:v,throttledIndicatorHover:b}},si=["onMouseenter","onClick"],ii={key:0},ai="ElCarousel",li=(0,a.aZ)({name:ai}),ci=(0,a.aZ)({...li,props:Ys,emits:Gs,setup(e,{expose:t,emit:n}){const r=e,{root:o,activeIndex:s,arrowDisplay:i,hasLabel:u,hover:d,isCardType:h,items:p,handleButtonEnter:f,handleButtonLeave:g,handleIndicatorClick:m,handleMouseEnter:v,handleMouseLeave:w,setActiveItem:b,prev:S,next:_,throttledArrowClick:E,throttledIndicatorHover:k}=oi(r,n,ai),C=(0,y.s3)("carousel"),I=(0,a.Fl)((()=>{const e=[C.b(),C.m(r.direction)];return(0,l.SU)(h)&&e.push(C.m("card")),e})),R=(0,a.Fl)((()=>{const e=[C.e("indicators"),C.em("indicators",r.direction)];return(0,l.SU)(u)&&e.push(C.em("indicators","labels")),("outside"===r.indicatorPosition||(0,l.SU)(h))&&e.push(C.em("indicators","outside")),e}));return t({setActiveItem:b,prev:S,next:_}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"root",ref:o,class:(0,c.C_)((0,l.SU)(I)),onMouseenter:t[6]||(t[6]=(0,A.iM)(((...e)=>(0,l.SU)(v)&&(0,l.SU)(v)(...e)),["stop"])),onMouseleave:t[7]||(t[7]=(0,A.iM)(((...e)=>(0,l.SU)(w)&&(0,l.SU)(w)(...e)),["stop"]))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(C).e("container")),style:(0,c.j5)({height:e.height})},[(0,l.SU)(i)?((0,a.wg)(),(0,a.j4)(A.uT,{key:0,name:"carousel-arrow-left",persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(C).e("arrow"),(0,l.SU)(C).em("arrow","left")]),onMouseenter:t[0]||(t[0]=e=>(0,l.SU)(f)("left")),onMouseleave:t[1]||(t[1]=(...e)=>(0,l.SU)(g)&&(0,l.SU)(g)(...e)),onClick:t[2]||(t[2]=(0,A.iM)((e=>(0,l.SU)(E)((0,l.SU)(s)-1)),["stop"]))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.XdH))])),_:1})],34),[[A.F8,("always"===e.arrow||(0,l.SU)(d))&&(r.loop||(0,l.SU)(s)>0)]])])),_:1})):(0,a.kq)("v-if",!0),(0,l.SU)(i)?((0,a.wg)(),(0,a.j4)(A.uT,{key:1,name:"carousel-arrow-right",persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(C).e("arrow"),(0,l.SU)(C).em("arrow","right")]),onMouseenter:t[3]||(t[3]=e=>(0,l.SU)(f)("right")),onMouseleave:t[4]||(t[4]=(...e)=>(0,l.SU)(g)&&(0,l.SU)(g)(...e)),onClick:t[5]||(t[5]=(0,A.iM)((e=>(0,l.SU)(E)((0,l.SU)(s)+1)),["stop"]))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1})],34),[[A.F8,("always"===e.arrow||(0,l.SU)(d))&&(r.loop||(0,l.SU)(s)<(0,l.SU)(p).length-1)]])])),_:1})):(0,a.kq)("v-if",!0),(0,a.WI)(e.$slots,"default")],6),"none"!==e.indicatorPosition?((0,a.wg)(),(0,a.iD)("ul",{key:0,class:(0,c.C_)((0,l.SU)(R))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(p),((t,n)=>((0,a.wg)(),(0,a.iD)("li",{key:n,class:(0,c.C_)([(0,l.SU)(C).e("indicator"),(0,l.SU)(C).em("indicator",e.direction),(0,l.SU)(C).is("active",n===(0,l.SU)(s))]),onMouseenter:e=>(0,l.SU)(k)(n),onClick:(0,A.iM)((e=>(0,l.SU)(m)(n)),["stop"])},[(0,a._)("button",{class:(0,c.C_)((0,l.SU)(C).e("button"))},[(0,l.SU)(u)?((0,a.wg)(),(0,a.iD)("span",ii,(0,c.zw)(t.props.label),1)):(0,a.kq)("v-if",!0)],2)],42,si)))),128))],2)):(0,a.kq)("v-if",!0)],34))}});var ui=(0,m.Z)(ci,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const di=(0,d.o8)({name:{type:String,default:""},label:{type:[String,Number],default:""}}),hi=(e,t)=>{const n=(0,a.f3)(Xs),r=(0,a.FN)();n||(0,w.N)(t,"usage: <el-carousel></el-carousel-item></el-carousel>"),r||(0,w.N)(t,"compositional hook can only be invoked inside setups");const o=.83,s=(0,l.iH)(!1),i=(0,l.iH)(0),c=(0,l.iH)(1),u=(0,l.iH)(!1),d=(0,l.iH)(!1),h=(0,l.iH)(!1),p=(0,l.iH)(!1),{isCardType:f,isVertical:g}=n;function m(e,t,n){const r=n-1,o=t-1,s=t+1,i=n/2;return 0===t&&e===r?-1:t===r&&0===e?n:e<o&&t-e>=i?n+1:e>s&&e-t>=i?-2:e}function y(e,t){var r;const s=(null==(r=n.root.value)?void 0:r.offsetWidth)||0;return h.value?s*((2-o)*(e-t)+1)/4:e<t?-(1+o)*s/4:(3+o)*s/4}function v(e,t,r){const o=n.root.value;if(!o)return 0;const s=(r?o.offsetHeight:o.offsetWidth)||0;return s*(e-t)}const b=(e,t,r)=>{var s;const a=(0,l.SU)(f),b=null!=(s=n.items.value.length)?s:Number.NaN,S=e===t;a||(0,wr.o8)(r)||(p.value=S||e===r),!S&&b>2&&n.loop&&(e=m(e,t,b));const _=(0,l.SU)(g);u.value=S,a?(_&&(0,w.N)("Carousel","vertical direction is not supported for card mode"),h.value=Math.round(Math.abs(e-t))<=1,i.value=y(e,t),c.value=(0,l.SU)(u)?1:o):i.value=v(e,t,_),d.value=!0};function S(){if(n&&(0,l.SU)(f)){const e=n.items.value.findIndex((({uid:e})=>e===r.uid));n.setActiveItem(e)}}return(0,a.bv)((()=>{n.addItem({props:e,states:(0,l.qj)({hover:s,translate:i,scale:c,active:u,ready:d,inStage:h,animating:p}),uid:r.uid,translateItem:b})})),(0,a.Ah)((()=>{n.removeItem(r.uid)})),{active:u,animating:p,hover:s,inStage:h,isVertical:g,translate:i,isCardType:f,scale:c,ready:d,handleItemClick:S}},pi="ElCarouselItem",fi=(0,a.aZ)({name:"ElCarouselItem"}),gi=(0,a.aZ)({...fi,props:di,setup(e){const t=e,n=(0,y.s3)("carousel"),{active:r,animating:o,hover:s,inStage:i,isVertical:u,translate:d,isCardType:h,scale:p,ready:f,handleItemClick:g}=hi(t,pi),m=(0,a.Fl)((()=>{const e="translate"+((0,l.SU)(u)?"Y":"X"),t=`${e}(${(0,l.SU)(d)}px)`,n=`scale(${(0,l.SU)(p)})`,r=[t,n].join(" ");return{transform:r}}));return(e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(n).e("item"),(0,l.SU)(n).is("active",(0,l.SU)(r)),(0,l.SU)(n).is("in-stage",(0,l.SU)(i)),(0,l.SU)(n).is("hover",(0,l.SU)(s)),(0,l.SU)(n).is("animating",(0,l.SU)(o)),{[(0,l.SU)(n).em("item","card")]:(0,l.SU)(h)}]),style:(0,c.j5)((0,l.SU)(m)),onClick:t[0]||(t[0]=(...e)=>(0,l.SU)(g)&&(0,l.SU)(g)(...e))},[(0,l.SU)(h)?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(n).e("mask"))},null,2)),[[A.F8,!(0,l.SU)(r)]]):(0,a.kq)("v-if",!0),(0,a.WI)(e.$slots,"default")],6)),[[A.F8,(0,l.SU)(f)]])}});var mi=(0,m.Z)(gi,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const yi=(0,C.nz)(ui,{CarouselItem:mi}),vi=(0,C.dp)(mi);var wi=n(7308);function bi(){this.__data__=new wi.Z,this.size=0}var Si=bi;function _i(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}var Ei=_i;function ki(e){return this.__data__.get(e)}var Ci=ki;function Ii(e){return this.__data__.has(e)}var Ai=Ii,Ti=n(6183),Ri=n(7834),xi=200;function Oi(e,t){var n=this.__data__;if(n instanceof wi.Z){var r=n.__data__;if(!Ti.Z||r.length<xi-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ri.Z(r)}return n.set(e,t),this.size=n.size,this}var Ni=Oi;function Pi(e){var t=this.__data__=new wi.Z(e);this.size=t.size}Pi.prototype.clear=Si,Pi.prototype["delete"]=Ei,Pi.prototype.get=Ci,Pi.prototype.has=Ai,Pi.prototype.set=Ni;var Di=Pi;function Ui(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!1===t(e[n],n,e))break;return e}var Li=Ui,Bi=n(2954),Mi=n(4752);function Fi(e,t,n,r){var o=!n;n||(n={});var s=-1,i=t.length;while(++s<i){var a=t[s],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),o?(0,Mi.Z)(n,a,l):(0,Bi.Z)(n,a,l)}return n}var ji=Fi;function zi(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}var $i=zi,Vi=n(3589),Hi=n(8533),Ki="[object Arguments]";function qi(e){return(0,Hi.Z)(e)&&(0,Vi.Z)(e)==Ki}var Wi=qi,Yi=Object.prototype,Gi=Yi.hasOwnProperty,Zi=Yi.propertyIsEnumerable,Ji=Wi(function(){return arguments}())?Wi:function(e){return(0,Hi.Z)(e)&&Gi.call(e,"callee")&&!Zi.call(e,"callee")},Qi=Ji,Xi=n(7771);function ea(){return!1}var ta=ea,na="object"==typeof exports&&exports&&!exports.nodeType&&exports,ra=na&&"object"==typeof module&&module&&!module.nodeType&&module,oa=ra&&ra.exports===na,sa=oa?F.Z.Buffer:void 0,ia=sa?sa.isBuffer:void 0,aa=ia||ta,la=aa,ca=n(6009),ua=9007199254740991;function da(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ua}var ha=da,pa="[object Arguments]",fa="[object Array]",ga="[object Boolean]",ma="[object Date]",ya="[object Error]",va="[object Function]",wa="[object Map]",ba="[object Number]",Sa="[object Object]",_a="[object RegExp]",Ea="[object Set]",ka="[object String]",Ca="[object WeakMap]",Ia="[object ArrayBuffer]",Aa="[object DataView]",Ta="[object Float32Array]",Ra="[object Float64Array]",xa="[object Int8Array]",Oa="[object Int16Array]",Na="[object Int32Array]",Pa="[object Uint8Array]",Da="[object Uint8ClampedArray]",Ua="[object Uint16Array]",La="[object Uint32Array]",Ba={};function Ma(e){return(0,Hi.Z)(e)&&ha(e.length)&&!!Ba[(0,Vi.Z)(e)]}Ba[Ta]=Ba[Ra]=Ba[xa]=Ba[Oa]=Ba[Na]=Ba[Pa]=Ba[Da]=Ba[Ua]=Ba[La]=!0,Ba[pa]=Ba[fa]=Ba[Ia]=Ba[ga]=Ba[Aa]=Ba[ma]=Ba[ya]=Ba[va]=Ba[wa]=Ba[ba]=Ba[Sa]=Ba[_a]=Ba[Ea]=Ba[ka]=Ba[Ca]=!1;var Fa=Ma;function ja(e){return function(t){return e(t)}}var za=ja,$a=n(3413),Va="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ha=Va&&"object"==typeof module&&module&&!module.nodeType&&module,Ka=Ha&&Ha.exports===Va,qa=Ka&&$a.Z.process,Wa=function(){try{var e=Ha&&Ha.require&&Ha.require("util").types;return e||qa&&qa.binding&&qa.binding("util")}catch(nB){}}(),Ya=Wa,Ga=Ya&&Ya.isTypedArray,Za=Ga?za(Ga):Fa,Ja=Za,Qa=Object.prototype,Xa=Qa.hasOwnProperty;function el(e,t){var n=(0,Xi.Z)(e),r=!n&&Qi(e),o=!n&&!r&&la(e),s=!n&&!r&&!o&&Ja(e),i=n||r||o||s,a=i?$i(e.length,String):[],l=a.length;for(var c in e)!t&&!Xa.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||(0,ca.Z)(c,l))||a.push(c);return a}var tl=el,nl=Object.prototype;function rl(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||nl;return e===n}var ol=rl;function sl(e,t){return function(n){return e(t(n))}}var il=sl,al=il(Object.keys,Object),ll=al,cl=Object.prototype,ul=cl.hasOwnProperty;function dl(e){if(!ol(e))return ll(e);var t=[];for(var n in Object(e))ul.call(e,n)&&"constructor"!=n&&t.push(n);return t}var hl=dl,pl=n(3234);function fl(e){return null!=e&&ha(e.length)&&!(0,pl.Z)(e)}var gl=fl;function ml(e){return gl(e)?tl(e):hl(e)}var yl=ml;function vl(e,t){return e&&ji(t,yl(t),e)}var wl=vl;function bl(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}var Sl=bl,_l=Object.prototype,El=_l.hasOwnProperty;function kl(e){if(!(0,M.Z)(e))return Sl(e);var t=ol(e),n=[];for(var r in e)("constructor"!=r||!t&&El.call(e,r))&&n.push(r);return n}var Cl=kl;function Il(e){return gl(e)?tl(e,!0):Cl(e)}var Al=Il;function Tl(e,t){return e&&ji(t,Al(t),e)}var Rl=Tl,xl="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ol=xl&&"object"==typeof module&&module&&!module.nodeType&&module,Nl=Ol&&Ol.exports===xl,Pl=Nl?F.Z.Buffer:void 0,Dl=Pl?Pl.allocUnsafe:void 0;function Ul(e,t){if(t)return e.slice();var n=e.length,r=Dl?Dl(n):new e.constructor(n);return e.copy(r),r}var Ll=Ul;function Bl(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}var Ml=Bl;function Fl(e,t){var n=-1,r=null==e?0:e.length,o=0,s=[];while(++n<r){var i=e[n];t(i,n,e)&&(s[o++]=i)}return s}var jl=Fl;function zl(){return[]}var $l=zl,Vl=Object.prototype,Hl=Vl.propertyIsEnumerable,Kl=Object.getOwnPropertySymbols,ql=Kl?function(e){return null==e?[]:(e=Object(e),jl(Kl(e),(function(t){return Hl.call(e,t)})))}:$l,Wl=ql;function Yl(e,t){return ji(e,Wl(e),t)}var Gl=Yl;function Zl(e,t){var n=-1,r=t.length,o=e.length;while(++n<r)e[o+n]=t[n];return e}var Jl=Zl,Ql=il(Object.getPrototypeOf,Object),Xl=Ql,ec=Object.getOwnPropertySymbols,tc=ec?function(e){var t=[];while(e)Jl(t,Wl(e)),e=Xl(e);return t}:$l,nc=tc;function rc(e,t){return ji(e,nc(e),t)}var oc=rc;function sc(e,t,n){var r=t(e);return(0,Xi.Z)(e)?r:Jl(r,n(e))}var ic=sc;function ac(e){return ic(e,yl,Wl)}var lc=ac;function cc(e){return ic(e,Al,nc)}var uc=cc,dc=n(2508),hc=(0,dc.Z)(F.Z,"DataView"),pc=hc,fc=(0,dc.Z)(F.Z,"Promise"),gc=fc,mc=(0,dc.Z)(F.Z,"Set"),yc=mc,vc=(0,dc.Z)(F.Z,"WeakMap"),wc=vc,bc=n(19),Sc="[object Map]",_c="[object Object]",Ec="[object Promise]",kc="[object Set]",Cc="[object WeakMap]",Ic="[object DataView]",Ac=(0,bc.Z)(pc),Tc=(0,bc.Z)(Ti.Z),Rc=(0,bc.Z)(gc),xc=(0,bc.Z)(yc),Oc=(0,bc.Z)(wc),Nc=Vi.Z;(pc&&Nc(new pc(new ArrayBuffer(1)))!=Ic||Ti.Z&&Nc(new Ti.Z)!=Sc||gc&&Nc(gc.resolve())!=Ec||yc&&Nc(new yc)!=kc||wc&&Nc(new wc)!=Cc)&&(Nc=function(e){var t=(0,Vi.Z)(e),n=t==_c?e.constructor:void 0,r=n?(0,bc.Z)(n):"";if(r)switch(r){case Ac:return Ic;case Tc:return Sc;case Rc:return Ec;case xc:return kc;case Oc:return Cc}return t});var Pc=Nc,Dc=Object.prototype,Uc=Dc.hasOwnProperty;function Lc(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Uc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Bc=Lc,Mc=F.Z.Uint8Array,Fc=Mc;function jc(e){var t=new e.constructor(e.byteLength);return new Fc(t).set(new Fc(e)),t}var zc=jc;function $c(e,t){var n=t?zc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Vc=$c,Hc=/\w*$/;function Kc(e){var t=new e.constructor(e.source,Hc.exec(e));return t.lastIndex=e.lastIndex,t}var qc=Kc,Wc=n(7685),Yc=Wc.Z?Wc.Z.prototype:void 0,Gc=Yc?Yc.valueOf:void 0;function Zc(e){return Gc?Object(Gc.call(e)):{}}var Jc=Zc;function Qc(e,t){var n=t?zc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Xc=Qc,eu="[object Boolean]",tu="[object Date]",nu="[object Map]",ru="[object Number]",ou="[object RegExp]",su="[object Set]",iu="[object String]",au="[object Symbol]",lu="[object ArrayBuffer]",cu="[object DataView]",uu="[object Float32Array]",du="[object Float64Array]",hu="[object Int8Array]",pu="[object Int16Array]",fu="[object Int32Array]",gu="[object Uint8Array]",mu="[object Uint8ClampedArray]",yu="[object Uint16Array]",vu="[object Uint32Array]";function wu(e,t,n){var r=e.constructor;switch(t){case lu:return zc(e);case eu:case tu:return new r(+e);case cu:return Vc(e,n);case uu:case du:case hu:case pu:case fu:case gu:case mu:case yu:case vu:return Xc(e,n);case nu:return new r;case ru:case iu:return new r(e);case ou:return qc(e);case su:return new r;case au:return Jc(e)}}var bu=wu,Su=Object.create,_u=function(){function e(){}return function(t){if(!(0,M.Z)(t))return{};if(Su)return Su(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Eu=_u;function ku(e){return"function"!=typeof e.constructor||ol(e)?{}:Eu(Xl(e))}var Cu=ku,Iu="[object Map]";function Au(e){return(0,Hi.Z)(e)&&Pc(e)==Iu}var Tu=Au,Ru=Ya&&Ya.isMap,xu=Ru?za(Ru):Tu,Ou=xu,Nu="[object Set]";function Pu(e){return(0,Hi.Z)(e)&&Pc(e)==Nu}var Du=Pu,Uu=Ya&&Ya.isSet,Lu=Uu?za(Uu):Du,Bu=Lu,Mu=1,Fu=2,ju=4,zu="[object Arguments]",$u="[object Array]",Vu="[object Boolean]",Hu="[object Date]",Ku="[object Error]",qu="[object Function]",Wu="[object GeneratorFunction]",Yu="[object Map]",Gu="[object Number]",Zu="[object Object]",Ju="[object RegExp]",Qu="[object Set]",Xu="[object String]",ed="[object Symbol]",td="[object WeakMap]",nd="[object ArrayBuffer]",rd="[object DataView]",od="[object Float32Array]",sd="[object Float64Array]",id="[object Int8Array]",ad="[object Int16Array]",ld="[object Int32Array]",cd="[object Uint8Array]",ud="[object Uint8ClampedArray]",dd="[object Uint16Array]",hd="[object Uint32Array]",pd={};function fd(e,t,n,r,o,s){var i,a=t&Mu,l=t&Fu,c=t&ju;if(n&&(i=o?n(e,r,o,s):n(e)),void 0!==i)return i;if(!(0,M.Z)(e))return e;var u=(0,Xi.Z)(e);if(u){if(i=Bc(e),!a)return Ml(e,i)}else{var d=Pc(e),h=d==qu||d==Wu;if(la(e))return Ll(e,a);if(d==Zu||d==zu||h&&!o){if(i=l||h?{}:Cu(e),!a)return l?oc(e,Rl(i,e)):Gl(e,wl(i,e))}else{if(!pd[d])return o?e:{};i=bu(e,d,a)}}s||(s=new Di);var p=s.get(e);if(p)return p;s.set(e,i),Bu(e)?e.forEach((function(r){i.add(fd(r,t,n,r,e,s))})):Ou(e)&&e.forEach((function(r,o){i.set(o,fd(r,t,n,o,e,s))}));var f=c?l?uc:lc:l?Al:yl,g=u?void 0:f(e);return Li(g||e,(function(r,o){g&&(o=r,r=e[o]),(0,Bi.Z)(i,o,fd(r,t,n,o,e,s))})),i}pd[zu]=pd[$u]=pd[nd]=pd[rd]=pd[Vu]=pd[Hu]=pd[od]=pd[sd]=pd[id]=pd[ad]=pd[ld]=pd[Yu]=pd[Gu]=pd[Zu]=pd[Ju]=pd[Qu]=pd[Xu]=pd[ed]=pd[cd]=pd[ud]=pd[dd]=pd[hd]=!0,pd[Ku]=pd[qu]=pd[td]=!1;var gd=fd,md=1,yd=4;function vd(e){return gd(e,md|yd)}var wd=vd,bd="__lodash_hash_undefined__";function Sd(e){return this.__data__.set(e,bd),this}var _d=Sd;function Ed(e){return this.__data__.has(e)}var kd=Ed;function Cd(e){var t=-1,n=null==e?0:e.length;this.__data__=new Ri.Z;while(++t<n)this.add(e[t])}Cd.prototype.add=Cd.prototype.push=_d,Cd.prototype.has=kd;var Id=Cd;function Ad(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}var Td=Ad;function Rd(e,t){return e.has(t)}var xd=Rd,Od=1,Nd=2;function Pd(e,t,n,r,o,s){var i=n&Od,a=e.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=n&Nd?new Id:void 0;s.set(e,t),s.set(t,e);while(++d<a){var f=e[d],g=t[d];if(r)var m=i?r(g,f,d,t,e,s):r(f,g,d,e,t,s);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!Td(t,(function(e,t){if(!xd(p,t)&&(f===e||o(f,e,n,r,s)))return p.push(t)}))){h=!1;break}}else if(f!==g&&!o(f,g,n,r,s)){h=!1;break}}return s["delete"](e),s["delete"](t),h}var Dd=Pd,Ud=n(9651);function Ld(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}var Bd=Ld;function Md(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Fd=Md,jd=1,zd=2,$d="[object Boolean]",Vd="[object Date]",Hd="[object Error]",Kd="[object Map]",qd="[object Number]",Wd="[object RegExp]",Yd="[object Set]",Gd="[object String]",Zd="[object Symbol]",Jd="[object ArrayBuffer]",Qd="[object DataView]",Xd=Wc.Z?Wc.Z.prototype:void 0,eh=Xd?Xd.valueOf:void 0;function th(e,t,n,r,o,s,i){switch(n){case Qd:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Jd:return!(e.byteLength!=t.byteLength||!s(new Fc(e),new Fc(t)));case $d:case Vd:case qd:return(0,Ud.Z)(+e,+t);case Hd:return e.name==t.name&&e.message==t.message;case Wd:case Gd:return e==t+"";case Kd:var a=Bd;case Yd:var l=r&jd;if(a||(a=Fd),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;r|=zd,i.set(e,t);var u=Dd(a(e),a(t),r,o,s,i);return i["delete"](e),u;case Zd:if(eh)return eh.call(e)==eh.call(t)}return!1}var nh=th,rh=1,oh=Object.prototype,sh=oh.hasOwnProperty;function ih(e,t,n,r,o,s){var i=n&rh,a=lc(e),l=a.length,c=lc(t),u=c.length;if(l!=u&&!i)return!1;var d=l;while(d--){var h=a[d];if(!(i?h in t:sh.call(t,h)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var g=!0;s.set(e,t),s.set(t,e);var m=i;while(++d<l){h=a[d];var y=e[h],v=t[h];if(r)var w=i?r(v,y,h,t,e,s):r(y,v,h,e,t,s);if(!(void 0===w?y===v||o(y,v,n,r,s):w)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var b=e.constructor,S=t.constructor;b==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S||(g=!1)}return s["delete"](e),s["delete"](t),g}var ah=ih,lh=1,ch="[object Arguments]",uh="[object Array]",dh="[object Object]",hh=Object.prototype,ph=hh.hasOwnProperty;function fh(e,t,n,r,o,s){var i=(0,Xi.Z)(e),a=(0,Xi.Z)(t),l=i?uh:Pc(e),c=a?uh:Pc(t);l=l==ch?dh:l,c=c==ch?dh:c;var u=l==dh,d=c==dh,h=l==c;if(h&&la(e)){if(!la(t))return!1;i=!0,u=!1}if(h&&!u)return s||(s=new Di),i||Ja(e)?Dd(e,t,n,r,o,s):nh(e,t,l,n,r,o,s);if(!(n&lh)){var p=u&&ph.call(e,"__wrapped__"),f=d&&ph.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,m=f?t.value():t;return s||(s=new Di),o(g,m,n,r,s)}}return!!h&&(s||(s=new Di),ah(e,t,n,r,o,s))}var gh=fh;function mh(e,t,n,r,o){return e===t||(null==e||null==t||!(0,Hi.Z)(e)&&!(0,Hi.Z)(t)?e!==e&&t!==t:gh(e,t,n,r,mh,o))}var yh=mh;function vh(e,t){return yh(e,t)}var wh=vh,bh=Wc.Z?Wc.Z.isConcatSpreadable:void 0;function Sh(e){return(0,Xi.Z)(e)||Qi(e)||!!(bh&&e&&e[bh])}var _h=Sh;function Eh(e,t,n,r,o){var s=-1,i=e.length;n||(n=_h),o||(o=[]);while(++s<i){var a=e[s];t>0&&n(a)?t>1?Eh(a,t-1,n,r,o):Jl(o,a):r||(o[o.length]=a)}return o}var kh=Eh,Ch=1/0;function Ih(e){var t=null==e?0:e.length;return t?kh(e,Ch):[]}var Ah=Ih,Th=n(2771);const Rh={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Th.Pp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},xh={[p.f_]:e=>(0,c.HD)(e)||(0,h.hj)(e)||(0,h.jn)(e),change:e=>(0,c.HD)(e)||(0,h.hj)(e)||(0,h.jn)(e)},Oh=Symbol("checkboxGroupContextKey"),Nh=({model:e,isChecked:t})=>{const n=(0,a.f3)(Oh,void 0),r=(0,a.Fl)((()=>{var r,o;const s=null==(r=null==n?void 0:n.max)?void 0:r.value,i=null==(o=null==n?void 0:n.min)?void 0:o.value;return!(0,wr.o8)(s)&&e.value.length>=s&&!t.value||!(0,wr.o8)(i)&&e.value.length<=i&&t.value})),o=(0,mo.DT)((0,a.Fl)((()=>(null==n?void 0:n.disabled.value)||r.value)));return{isDisabled:o,isLimitDisabled:r}};var Ph=n(5620);const Dh=(e,{model:t,isLimitExceeded:n,hasOwnLabel:r,isDisabled:o,isLabeledByFormItem:s})=>{const i=(0,a.f3)(Oh,void 0),{formItem:l}=(0,Ph.A)(),{emit:c}=(0,a.FN)();function u(t){var n,r;return t===e.trueLabel||!0===t?null==(n=e.trueLabel)||n:null!=(r=e.falseLabel)&&r}function d(e,t){c("change",u(e),t)}function h(e){if(n.value)return;const t=e.target;c("change",u(t.checked),e)}async function p(i){if(!n.value&&!r.value&&!o.value&&s.value){const n=i.composedPath(),r=n.some((e=>"LABEL"===e.tagName));r||(t.value=u([!1,e.falseLabel].includes(t.value)),await(0,a.Y3)(),d(t.value,i))}}const f=(0,a.Fl)((()=>(null==i?void 0:i.validateEvent)||e.validateEvent));return(0,a.YP)((()=>e.modelValue),(()=>{f.value&&(null==l||l.validate("change").catch((e=>(0,w.N)(e))))})),{handleChange:h,onClickRoot:p}},Uh=e=>{const t=(0,l.iH)(!1),{emit:n}=(0,a.FN)(),r=(0,a.f3)(Oh,void 0),o=(0,a.Fl)((()=>!1===(0,wr.o8)(r))),s=(0,l.iH)(!1),i=(0,a.Fl)({get(){var n,s;return o.value?null==(n=null==r?void 0:r.modelValue)?void 0:n.value:null!=(s=e.modelValue)?s:t.value},set(e){var i,a;o.value&&(0,c.kJ)(e)?(s.value=void 0!==(null==(i=null==r?void 0:r.max)?void 0:i.value)&&e.length>(null==r?void 0:r.max.value),!1===s.value&&(null==(a=null==r?void 0:r.changeEvent)||a.call(r,e))):(n(p.f_,e),t.value=e)}});return{model:i,isGroup:o,isLimitExceeded:s}},Lh=(e,t,{model:n})=>{const r=(0,a.f3)(Oh,void 0),o=(0,l.iH)(!1),s=(0,a.Fl)((()=>{const t=n.value;return(0,h.jn)(t)?t:(0,c.kJ)(t)?(0,c.Kn)(e.label)?t.map(l.IU).some((t=>wh(t,e.label))):t.map(l.IU).includes(e.label):null!==t&&void 0!==t?t===e.trueLabel:!!t})),i=(0,mo.Cd)((0,a.Fl)((()=>{var e;return null==(e=null==r?void 0:r.size)?void 0:e.value})),{prop:!0}),u=(0,mo.Cd)((0,a.Fl)((()=>{var e;return null==(e=null==r?void 0:r.size)?void 0:e.value}))),d=(0,a.Fl)((()=>!(!t.default&&!e.label)));return{checkboxButtonSize:i,isChecked:s,isFocused:o,checkboxSize:u,hasOwnLabel:d}},Bh=(e,{model:t})=>{function n(){(0,c.kJ)(t.value)&&!t.value.includes(e.label)?t.value.push(e.label):t.value=e.trueLabel||!0}e.checked&&n()},Mh=(e,t)=>{const{formItem:n}=(0,Ph.A)(),{model:r,isGroup:o,isLimitExceeded:s}=Uh(e),{isFocused:i,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u}=Lh(e,t,{model:r}),{isDisabled:d}=Nh({model:r,isChecked:a}),{inputId:h,isLabeledByFormItem:p}=(0,Ph.p)(e,{formItemContext:n,disableIdGeneration:u,disableIdManagement:o}),{handleChange:f,onClickRoot:g}=Dh(e,{model:r,isLimitExceeded:s,hasOwnLabel:u,isDisabled:d,isLabeledByFormItem:p});return Bh(e,{model:r}),{inputId:h,isLabeledByFormItem:p,isChecked:a,isDisabled:d,isFocused:i,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:r,handleChange:f,onClickRoot:g}},Fh=["tabindex","role","aria-checked"],jh=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],zh=["id","aria-hidden","disabled","value","name","tabindex"],$h=(0,a.aZ)({name:"ElCheckbox"}),Vh=(0,a.aZ)({...$h,props:Rh,emits:xh,setup(e){const t=e,n=(0,a.Rr)(),{inputId:r,isLabeledByFormItem:o,isChecked:s,isDisabled:i,isFocused:u,checkboxSize:d,hasOwnLabel:h,model:p,handleChange:f,onClickRoot:g}=Mh(t,n),m=(0,y.s3)("checkbox"),v=(0,a.Fl)((()=>[m.b(),m.m(d.value),m.is("disabled",i.value),m.is("bordered",t.border),m.is("checked",s.value)])),w=(0,a.Fl)((()=>[m.e("input"),m.is("disabled",i.value),m.is("checked",s.value),m.is("indeterminate",t.indeterminate),m.is("focus",u.value)]));return(e,t)=>((0,a.wg)(),(0,a.j4)((0,a.LL)(!(0,l.SU)(h)&&(0,l.SU)(o)?"span":"label"),{class:(0,c.C_)((0,l.SU)(v)),"aria-controls":e.indeterminate?e.controls:null,onClick:(0,l.SU)(g)},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(w)),tabindex:e.indeterminate?0:void 0,role:e.indeterminate?"checkbox":void 0,"aria-checked":e.indeterminate?"mixed":void 0},[e.trueLabel||e.falseLabel?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,id:(0,l.SU)(r),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.dq)(p)?p.value=e:null),class:(0,c.C_)((0,l.SU)(m).e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,tabindex:e.tabindex,disabled:(0,l.SU)(i),"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...e)=>(0,l.SU)(f)&&(0,l.SU)(f)(...e)),onFocus:t[2]||(t[2]=e=>u.value=!0),onBlur:t[3]||(t[3]=e=>u.value=!1)},null,42,jh)),[[A.e8,(0,l.SU)(p)]]):(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:1,id:(0,l.SU)(r),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,l.dq)(p)?p.value=e:null),class:(0,c.C_)((0,l.SU)(m).e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:(0,l.SU)(i),value:e.label,name:e.name,tabindex:e.tabindex,onChange:t[5]||(t[5]=(...e)=>(0,l.SU)(f)&&(0,l.SU)(f)(...e)),onFocus:t[6]||(t[6]=e=>u.value=!0),onBlur:t[7]||(t[7]=e=>u.value=!1)},null,42,zh)),[[A.e8,(0,l.SU)(p)]]),(0,a._)("span",{class:(0,c.C_)((0,l.SU)(m).e("inner"))},null,2)],10,Fh),(0,l.SU)(h)?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,c.C_)((0,l.SU)(m).e("label"))},[(0,a.WI)(e.$slots,"default"),e.$slots.default?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,c.zw)(e.label),1)],64))],2)):(0,a.kq)("v-if",!0)])),_:3},8,["class","aria-controls","onClick"]))}});var Hh=(0,m.Z)(Vh,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const Kh=["name","tabindex","disabled","true-value","false-value"],qh=["name","tabindex","disabled","value"],Wh=(0,a.aZ)({name:"ElCheckboxButton"}),Yh=(0,a.aZ)({...Wh,props:Rh,emits:xh,setup(e){const t=e,n=(0,a.Rr)(),{isFocused:r,isChecked:o,isDisabled:s,checkboxButtonSize:i,model:u,handleChange:d}=Mh(t,n),h=(0,a.f3)(Oh,void 0),p=(0,y.s3)("checkbox"),f=(0,a.Fl)((()=>{var e,t,n,r;const o=null!=(t=null==(e=null==h?void 0:h.fill)?void 0:e.value)?t:"";return{backgroundColor:o,borderColor:o,color:null!=(r=null==(n=null==h?void 0:h.textColor)?void 0:n.value)?r:"",boxShadow:o?`-1px 0 0 0 ${o}`:void 0}})),g=(0,a.Fl)((()=>[p.b("button"),p.bm("button",i.value),p.is("disabled",s.value),p.is("checked",o.value),p.is("focus",r.value)]));return(e,t)=>((0,a.wg)(),(0,a.iD)("label",{class:(0,c.C_)((0,l.SU)(g))},[e.trueLabel||e.falseLabel?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.dq)(u)?u.value=e:null),class:(0,c.C_)((0,l.SU)(p).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:(0,l.SU)(s),"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...e)=>(0,l.SU)(d)&&(0,l.SU)(d)(...e)),onFocus:t[2]||(t[2]=e=>r.value=!0),onBlur:t[3]||(t[3]=e=>r.value=!1)},null,42,Kh)),[[A.e8,(0,l.SU)(u)]]):(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,l.dq)(u)?u.value=e:null),class:(0,c.C_)((0,l.SU)(p).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:(0,l.SU)(s),value:e.label,onChange:t[5]||(t[5]=(...e)=>(0,l.SU)(d)&&(0,l.SU)(d)(...e)),onFocus:t[6]||(t[6]=e=>r.value=!0),onBlur:t[7]||(t[7]=e=>r.value=!1)},null,42,qh)),[[A.e8,(0,l.SU)(u)]]),e.$slots.default||e.label?((0,a.wg)(),(0,a.iD)("span",{key:2,class:(0,c.C_)((0,l.SU)(p).be("button","inner")),style:(0,c.j5)((0,l.SU)(o)?(0,l.SU)(f):void 0)},[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,c.zw)(e.label),1)]))],6)):(0,a.kq)("v-if",!0)],2))}});var Gh=(0,m.Z)(Yh,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]),Zh=n(3317),Jh=n(8472),Qh=n(2064);function Xh(e,t,n){var r=-1,o=t.length,s={};while(++r<o){var i=t[r],a=(0,Zh.Z)(e,i);n(a,i)&&(0,Jh.Z)(s,(0,Qh.Z)(i,e),a)}return s}var ep=Xh;function tp(e,t){return null!=e&&t in Object(e)}var np=tp,rp=n(2281);function op(e,t,n){t=(0,Qh.Z)(t,e);var r=-1,o=t.length,s=!1;while(++r<o){var i=(0,rp.Z)(t[r]);if(!(s=null!=e&&n(e,i)))break;e=e[i]}return s||++r!=o?s:(o=null==e?0:e.length,!!o&&ha(o)&&(0,ca.Z)(i,o)&&((0,Xi.Z)(e)||Qi(e)))}var sp=op;function ip(e,t){return null!=e&&sp(e,t,np)}var ap=ip;function lp(e,t){return ep(e,t,(function(t,n){return ap(e,n)}))}var cp=lp;function up(e){var t=null==e?0:e.length;return t?kh(e,1):[]}var dp=up;function hp(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var pp=hp,fp=Math.max;function gp(e,t,n){return t=fp(void 0===t?e.length-1:t,0),function(){var r=arguments,o=-1,s=fp(r.length-t,0),i=Array(s);while(++o<s)i[o]=r[t+o];o=-1;var a=Array(t+1);while(++o<t)a[o]=r[o];return a[t]=n(i),pp(e,this,a)}}var mp=gp;function yp(e){return function(){return e}}var vp=yp,wp=n(7904);function bp(e){return e}var Sp=bp,_p=wp.Z?function(e,t){return(0,wp.Z)(e,"toString",{configurable:!0,enumerable:!1,value:vp(t),writable:!0})}:Sp,Ep=_p,kp=800,Cp=16,Ip=Date.now;function Ap(e){var t=0,n=0;return function(){var r=Ip(),o=Cp-(r-n);if(n=r,o>0){if(++t>=kp)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Tp=Ap,Rp=Tp(Ep),xp=Rp;function Op(e){return xp(mp(e,void 0,dp),e+"")}var Np=Op,Pp=Np((function(e,t){return null==e?{}:cp(e,t)})),Dp=Pp;const Up=(0,d.o8)({modelValue:{type:(0,d.Cq)(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Th.Pp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),Lp={[p.f_]:e=>(0,c.kJ)(e),change:e=>(0,c.kJ)(e)},Bp=(0,a.aZ)({name:"ElCheckboxGroup"}),Mp=(0,a.aZ)({...Bp,props:Up,emits:Lp,setup(e,{emit:t}){const n=e,r=(0,y.s3)("checkbox"),{formItem:o}=(0,Ph.A)(),{inputId:s,isLabeledByFormItem:i}=(0,Ph.p)(n,{formItemContext:o}),u=async e=>{t(p.f_,e),await(0,a.Y3)(),t("change",e)},d=(0,a.Fl)({get(){return n.modelValue},set(e){u(e)}});return(0,a.JJ)(Oh,{...Dp((0,l.BK)(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:d,changeEvent:u}),(0,a.YP)((()=>n.modelValue),(()=>{n.validateEvent&&(null==o||o.validate("change").catch((e=>(0,w.N)(e))))})),(e,t)=>{var n;return(0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{id:(0,l.SU)(s),class:(0,c.C_)((0,l.SU)(r).b("group")),role:"group","aria-label":(0,l.SU)(i)?void 0:e.label||"checkbox-group","aria-labelledby":(0,l.SU)(i)?null==(n=(0,l.SU)(o))?void 0:n.labelId:void 0},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var Fp=(0,m.Z)(Mp,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const jp=(0,C.nz)(Hh,{CheckboxButton:Gh,CheckboxGroup:Fp}),zp=(0,C.dp)(Gh),$p=(0,C.dp)(Fp),Vp=(0,d.o8)({size:Th.Pp,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),Hp=(0,d.o8)({...Vp,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),Kp={[p.f_]:e=>(0,c.HD)(e)||(0,h.hj)(e)||(0,h.jn)(e),[p.O7]:e=>(0,c.HD)(e)||(0,h.hj)(e)||(0,h.jn)(e)},qp=Symbol("radioGroupKey"),Wp=(e,t)=>{const n=(0,l.iH)(),r=(0,a.f3)(qp,void 0),o=(0,a.Fl)((()=>!!r)),s=(0,a.Fl)({get(){return o.value?r.modelValue:e.modelValue},set(s){o.value?r.changeEvent(s):t&&t(p.f_,s),n.value.checked=e.modelValue===e.label}}),i=(0,mo.Cd)((0,a.Fl)((()=>null==r?void 0:r.size))),c=(0,mo.DT)((0,a.Fl)((()=>null==r?void 0:r.disabled))),u=(0,l.iH)(!1),d=(0,a.Fl)((()=>c.value||o.value&&s.value!==e.label?-1:0));return{radioRef:n,isGroup:o,radioGroup:r,focus:u,size:i,disabled:c,tabIndex:d,modelValue:s}},Yp=["value","name","disabled"],Gp=(0,a.aZ)({name:"ElRadio"}),Zp=(0,a.aZ)({...Gp,props:Hp,emits:Kp,setup(e,{emit:t}){const n=e,r=(0,y.s3)("radio"),{radioRef:o,radioGroup:s,focus:i,size:u,disabled:d,modelValue:h}=Wp(n,t);function p(){(0,a.Y3)((()=>t("change",h.value)))}return(e,t)=>{var n;return(0,a.wg)(),(0,a.iD)("label",{class:(0,c.C_)([(0,l.SU)(r).b(),(0,l.SU)(r).is("disabled",(0,l.SU)(d)),(0,l.SU)(r).is("focus",(0,l.SU)(i)),(0,l.SU)(r).is("bordered",e.border),(0,l.SU)(r).is("checked",(0,l.SU)(h)===e.label),(0,l.SU)(r).m((0,l.SU)(u))])},[(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(r).e("input"),(0,l.SU)(r).is("disabled",(0,l.SU)(d)),(0,l.SU)(r).is("checked",(0,l.SU)(h)===e.label)])},[(0,a.wy)((0,a._)("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.dq)(h)?h.value=e:null),class:(0,c.C_)((0,l.SU)(r).e("original")),value:e.label,name:e.name||(null==(n=(0,l.SU)(s))?void 0:n.name),disabled:(0,l.SU)(d),type:"radio",onFocus:t[1]||(t[1]=e=>i.value=!0),onBlur:t[2]||(t[2]=e=>i.value=!1),onChange:p},null,42,Yp),[[A.G2,(0,l.SU)(h)]]),(0,a._)("span",{class:(0,c.C_)((0,l.SU)(r).e("inner"))},null,2)],2),(0,a._)("span",{class:(0,c.C_)((0,l.SU)(r).e("label")),onKeydown:t[3]||(t[3]=(0,A.iM)((()=>{}),["stop"]))},[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,c.zw)(e.label),1)]))],34)],2)}}});var Jp=(0,m.Z)(Zp,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const Qp=(0,d.o8)({...Vp,name:{type:String,default:""}}),Xp=["value","name","disabled"],ef=(0,a.aZ)({name:"ElRadioButton"}),tf=(0,a.aZ)({...ef,props:Qp,setup(e){const t=e,n=(0,y.s3)("radio"),{radioRef:r,focus:o,size:s,disabled:i,modelValue:u,radioGroup:d}=Wp(t),h=(0,a.Fl)((()=>({backgroundColor:(null==d?void 0:d.fill)||"",borderColor:(null==d?void 0:d.fill)||"",boxShadow:(null==d?void 0:d.fill)?`-1px 0 0 0 ${d.fill}`:"",color:(null==d?void 0:d.textColor)||""})));return(e,t)=>{var p;return(0,a.wg)(),(0,a.iD)("label",{class:(0,c.C_)([(0,l.SU)(n).b("button"),(0,l.SU)(n).is("active",(0,l.SU)(u)===e.label),(0,l.SU)(n).is("disabled",(0,l.SU)(i)),(0,l.SU)(n).is("focus",(0,l.SU)(o)),(0,l.SU)(n).bm("button",(0,l.SU)(s))])},[(0,a.wy)((0,a._)("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.dq)(u)?u.value=e:null),class:(0,c.C_)((0,l.SU)(n).be("button","original-radio")),value:e.label,type:"radio",name:e.name||(null==(p=(0,l.SU)(d))?void 0:p.name),disabled:(0,l.SU)(i),onFocus:t[1]||(t[1]=e=>o.value=!0),onBlur:t[2]||(t[2]=e=>o.value=!1)},null,42,Xp),[[A.G2,(0,l.SU)(u)]]),(0,a._)("span",{class:(0,c.C_)((0,l.SU)(n).be("button","inner")),style:(0,c.j5)((0,l.SU)(u)===e.label?(0,l.SU)(h):{}),onKeydown:t[3]||(t[3]=(0,A.iM)((()=>{}),["stop"]))},[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,c.zw)(e.label),1)]))],38)],2)}}});var nf=(0,m.Z)(tf,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const rf=(0,d.o8)({id:{type:String,default:void 0},size:Th.Pp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),of=Kp,sf=["id","aria-label","aria-labelledby"],af=(0,a.aZ)({name:"ElRadioGroup"}),lf=(0,a.aZ)({...af,props:rf,emits:of,setup(e,{emit:t}){const n=e,r=(0,y.s3)("radio"),o=(0,xr.Me)(),s=(0,l.iH)(),{formItem:i}=(0,Ph.A)(),{inputId:u,isLabeledByFormItem:d}=(0,Ph.p)(n,{formItemContext:i}),h=e=>{t(p.f_,e),(0,a.Y3)((()=>t("change",e)))};(0,a.bv)((()=>{const e=s.value.querySelectorAll("[type=radio]"),t=e[0];!Array.from(e).some((e=>e.checked))&&t&&(t.tabIndex=0)}));const f=(0,a.Fl)((()=>n.name||o.value));return(0,a.JJ)(qp,(0,l.qj)({...(0,l.BK)(n),changeEvent:h,name:f})),(0,a.YP)((()=>n.modelValue),(()=>{n.validateEvent&&(null==i||i.validate("change").catch((e=>(0,w.N)(e))))})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{id:(0,l.SU)(u),ref_key:"radioGroupRef",ref:s,class:(0,c.C_)((0,l.SU)(r).b("group")),role:"radiogroup","aria-label":(0,l.SU)(d)?void 0:e.label||"radio-group","aria-labelledby":(0,l.SU)(d)?(0,l.SU)(i).labelId:void 0},[(0,a.WI)(e.$slots,"default")],10,sf))}});var cf=(0,m.Z)(lf,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const uf=(0,C.nz)(Jp,{RadioButton:nf,RadioGroup:cf}),df=(0,C.dp)(cf),hf=(0,C.dp)(nf);var pf=(0,a.aZ)({name:"NodeContent",setup(){const e=(0,y.s3)("cascader-node");return{ns:e}},render(){const{ns:e}=this,{node:t,panel:n}=this.$parent,{data:r,label:o}=t,{renderLabelFn:s}=n;return(0,a.h)("span",{class:e.e("label")},s?s({node:t,data:r}):o)}});const ff=Symbol(),gf=(0,a.aZ)({name:"ElCascaderNode",components:{ElCheckbox:jp,ElRadio:uf,NodeContent:pf,ElIcon:T.gn,Check:ae.JrY,Loading:ae.gbz,ArrowRight:ae.olP},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=(0,a.f3)(ff),r=(0,y.s3)("cascader-node"),o=(0,a.Fl)((()=>n.isHoverMenu)),s=(0,a.Fl)((()=>n.config.multiple)),i=(0,a.Fl)((()=>n.config.checkStrictly)),l=(0,a.Fl)((()=>{var e;return null==(e=n.checkedNodes[0])?void 0:e.uid})),c=(0,a.Fl)((()=>e.node.isDisabled)),u=(0,a.Fl)((()=>e.node.isLeaf)),d=(0,a.Fl)((()=>i.value&&!u.value||!c.value)),h=(0,a.Fl)((()=>f(n.expandingNode))),p=(0,a.Fl)((()=>i.value&&n.checkedNodes.some(f))),f=t=>{var n;const{level:r,uid:o}=e.node;return(null==(n=null==t?void 0:t.pathNodes[r-1])?void 0:n.uid)===o},g=()=>{h.value||n.expandNode(e.node)},m=t=>{const{node:r}=e;t!==r.checked&&n.handleCheckChange(r,t)},v=()=>{n.lazyLoad(e.node,(()=>{u.value||g()}))},w=e=>{o.value&&(b(),!u.value&&t("expand",e))},b=()=>{const{node:t}=e;d.value&&!t.loading&&(t.loaded?g():v())},S=()=>{o.value&&!u.value||(!u.value||c.value||i.value||s.value?b():E(!0))},_=t=>{i.value?(m(t),e.node.loaded&&g()):E(t)},E=t=>{e.node.loaded?(m(t),!i.value&&g()):v()};return{panel:n,isHoverMenu:o,multiple:s,checkStrictly:i,checkedNodeId:l,isDisabled:c,isLeaf:u,expandable:d,inExpandingPath:h,inCheckedPath:p,ns:r,handleHoverExpand:w,handleExpand:b,handleClick:S,handleCheck:E,handleSelectCheck:_}}}),mf=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],yf=(0,a._)("span",null,null,-1);function vf(e,t,n,r,o,s){const i=(0,a.up)("el-checkbox"),l=(0,a.up)("el-radio"),u=(0,a.up)("check"),d=(0,a.up)("el-icon"),h=(0,a.up)("node-content"),p=(0,a.up)("loading"),f=(0,a.up)("arrow-right");return(0,a.wg)(),(0,a.iD)("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:(0,c.C_)([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...t)=>e.handleHoverExpand&&e.handleHoverExpand(...t)),onFocus:t[3]||(t[3]=(...t)=>e.handleHoverExpand&&e.handleHoverExpand(...t)),onClick:t[4]||(t[4]=(...t)=>e.handleClick&&e.handleClick(...t))},[(0,a.kq)(" prefix "),e.multiple?((0,a.wg)(),(0,a.j4)(i,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=(0,A.iM)((()=>{}),["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?((0,a.wg)(),(0,a.j4)(l,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=(0,A.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.kq)("\n        Add an empty element to avoid render label,\n        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485\n      "),yf])),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?((0,a.wg)(),(0,a.j4)(d,{key:2,class:(0,c.C_)(e.ns.e("prefix"))},{default:(0,a.w5)((()=>[(0,a.Wm)(u)])),_:1},8,["class"])):(0,a.kq)("v-if",!0),(0,a.kq)(" content "),(0,a.Wm)(h),(0,a.kq)(" postfix "),e.isLeaf?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:3},[e.node.loading?((0,a.wg)(),(0,a.j4)(d,{key:0,class:(0,c.C_)([e.ns.is("loading"),e.ns.e("postfix")])},{default:(0,a.w5)((()=>[(0,a.Wm)(p)])),_:1},8,["class"])):((0,a.wg)(),(0,a.j4)(d,{key:1,class:(0,c.C_)(["arrow-right",e.ns.e("postfix")])},{default:(0,a.w5)((()=>[(0,a.Wm)(f)])),_:1},8,["class"]))],64))],42,mf)}var wf=(0,m.Z)(gf,[["render",vf],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const bf=(0,a.aZ)({name:"ElCascaderMenu",components:{Loading:ae.gbz,ElIcon:T.gn,ElScrollbar:Ie,ElCascaderNode:wf},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=(0,a.FN)(),n=(0,y.s3)("cascader-menu"),{t:r}=(0,_s.bU)(),o=yo();let s=null,i=null;const c=(0,a.f3)(ff),u=(0,l.iH)(null),d=(0,a.Fl)((()=>!e.nodes.length)),h=(0,a.Fl)((()=>!c.initialLoaded)),p=(0,a.Fl)((()=>`cascader-menu-${o}-${e.index}`)),f=e=>{s=e.target},g=e=>{if(c.isHoverMenu&&s&&u.value)if(s.contains(e.target)){m();const n=t.vnode.el,{left:r}=n.getBoundingClientRect(),{offsetWidth:o,offsetHeight:i}=n,a=e.clientX-r,l=s.offsetTop,c=l+s.offsetHeight;u.value.innerHTML=`\n          <path style="pointer-events: auto;" fill="transparent" d="M${a} ${l} L${o} 0 V${l} Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M${a} ${c} L${o} ${i} V${c} Z" />\n        `}else i||(i=window.setTimeout(v,c.config.hoverThreshold))},m=()=>{i&&(clearTimeout(i),i=null)},v=()=>{u.value&&(u.value.innerHTML="",m())};return{ns:n,panel:c,hoverZone:u,isEmpty:d,isLoading:h,menuId:p,t:r,handleExpand:f,handleMouseMove:g,clearHoverZone:v}}});function Sf(e,t,n,r,o,s){const i=(0,a.up)("el-cascader-node"),l=(0,a.up)("loading"),u=(0,a.up)("el-icon"),d=(0,a.up)("el-scrollbar");return(0,a.wg)(),(0,a.j4)(d,{key:e.menuId,tag:"ul",role:"menu",class:(0,c.C_)(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:(0,a.w5)((()=>{var t;return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.nodes,(t=>((0,a.wg)(),(0,a.j4)(i,{key:t.uid,node:t,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"])))),128)),e.isLoading?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)(e.ns.e("empty-text"))},[(0,a.Wm)(u,{size:"14",class:(0,c.C_)(e.ns.is("loading"))},{default:(0,a.w5)((()=>[(0,a.Wm)(l)])),_:1},8,["class"]),(0,a.Uk)(" "+(0,c.zw)(e.t("el.cascader.loading")),1)],2)):e.isEmpty?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)(e.ns.e("empty-text"))},(0,c.zw)(e.t("el.cascader.noData")),3)):(null==(t=e.panel)?void 0:t.isHoverMenu)?((0,a.wg)(),(0,a.iD)("svg",{key:2,ref:"hoverZone",class:(0,c.C_)(e.ns.e("hover-zone"))},null,2)):(0,a.kq)("v-if",!0)]})),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var _f=(0,m.Z)(bf,[["render",Sf],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);const Ef=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),kf=e=>(0,c.kC)(e);let Cf=0;const If=e=>{const t=[e];let{parent:n}=e;while(n)t.unshift(n),n=n.parent;return t};class Af{constructor(e,t,n,r=!1){this.data=e,this.config=t,this.parent=n,this.root=r,this.uid=Cf++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:o,label:s,children:i}=t,a=e[i],l=If(this);this.level=r?0:n?n.level+1:1,this.value=e[o],this.label=e[s],this.pathNodes=l,this.pathValues=l.map((e=>e.value)),this.pathLabels=l.map((e=>e.label)),this.childrenData=a,this.children=(a||[]).map((e=>new Af(e,t,this))),this.loaded=!t.lazy||this.isLeaf||!(0,wr.xb)(a)}get isDisabled(){const{data:e,parent:t,config:n}=this,{disabled:r,checkStrictly:o}=n,s=(0,c.mf)(r)?r(e,this):!!e[r];return s||!o&&(null==t?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:n,loaded:r}=this,{lazy:o,leaf:s}=t,i=(0,c.mf)(s)?s(e,this):e[s];return(0,wr.o8)(i)?!(o&&!r)&&!(Array.isArray(n)&&n.length):!!i}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:n}=this,r=new Af(e,this.config,this);return Array.isArray(t)?t.push(e):this.childrenData=[e],n.push(r),r}calcText(e,t){const n=e?this.pathLabels.join(t):this.label;return this.text=n,n}broadcast(e,...t){const n=`onParent${kf(e)}`;this.children.forEach((r=>{r&&(r.broadcast(e,...t),r[n]&&r[n](...t))}))}emit(e,...t){const{parent:n}=this,r=`onChild${kf(e)}`;n&&(n[r]&&n[r](...t),n.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter((e=>!e.isDisabled)),n=!!t.length&&t.every((e=>e.checked));this.setCheckState(n)}setCheckState(e){const t=this.children.length,n=this.children.reduce(((e,t)=>{const n=t.checked?1:t.indeterminate?.5:0;return e+n}),0);this.checked=this.loaded&&this.children.filter((e=>!e.isDisabled)).every((e=>e.loaded&&e.checked))&&e,this.indeterminate=this.loaded&&n!==t&&n>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:n}=this.config;t||!n?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}}const Tf=(e,t)=>e.reduce(((e,n)=>(n.isLeaf?e.push(n):(!t&&e.push(n),e=e.concat(Tf(n.children,t))),e)),[]);class Rf{constructor(e,t){this.config=t;const n=(e||[]).map((e=>new Af(e,this.config)));this.nodes=n,this.allNodes=Tf(n,!1),this.leafNodes=Tf(n,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const n=t?t.appendChild(e):new Af(e,this.config);t||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(e,t){e.forEach((e=>this.appendNode(e,t)))}getNodeByValue(e,t=!1){if(!e&&0!==e)return null;const n=this.getFlattedNodes(t).find((t=>wh(t.value,e)||wh(t.pathValues,e)));return n||null}getSameNode(e){if(!e)return null;const t=this.getFlattedNodes(!1).find((({value:t,level:n})=>wh(e.value,t)&&e.level===n));return t||null}}const xf=(0,d.o8)({modelValue:{type:(0,d.Cq)([Number,String,Array])},options:{type:(0,d.Cq)(Array),default:()=>[]},props:{type:(0,d.Cq)(Object),default:()=>({})}}),Of={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:c.dG,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Nf=e=>(0,a.Fl)((()=>({...Of,...e.props})));var Pf=n(1276);const Df=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Uf=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():(0,Pf.Be)(e)&&e.click()},Lf=(e,t)=>{const n=t.slice(0),r=n.map((e=>e.uid)),o=e.reduce(((e,t)=>{const o=r.indexOf(t.uid);return o>-1&&(e.push(t),n.splice(o,1),r.splice(o,1)),e}),[]);return o.push(...n),o},Bf=e=>[...new Set(e)],Mf=e=>e||0===e?Array.isArray(e)?e:[e]:[],Ff=(0,a.aZ)({name:"ElCascaderPanel",components:{ElCascaderMenu:_f},props:{...xf,border:{type:Boolean,default:!0},renderLabel:Function},emits:[p.f_,p.O7,"close","expand-change"],setup(e,{emit:t,slots:n}){let r=!1;const o=(0,y.s3)("cascader"),s=Nf(e);let i=null;const c=(0,l.iH)(!0),u=(0,l.iH)([]),d=(0,l.iH)(null),f=(0,l.iH)([]),g=(0,l.iH)(null),m=(0,l.iH)([]),v=(0,a.Fl)((()=>"hover"===s.value.expandTrigger)),w=(0,a.Fl)((()=>e.renderLabel||n.default)),S=()=>{const{options:t}=e,n=s.value;r=!1,i=new Rf(t,n),f.value=[i.getNodes()],n.lazy&&(0,wr.xb)(e.options)?(c.value=!1,_(void 0,(e=>{e&&(i=new Rf(e,n),f.value=[i.getNodes()]),c.value=!0,x(!1,!0)}))):x(!1,!0)},_=(e,t)=>{const n=s.value;e=e||new Af({},n,void 0,!0),e.loading=!0;const r=n=>{const r=e,o=r.root?null:r;n&&(null==i||i.appendNodes(n,o)),r.loading=!1,r.loaded=!0,r.childrenData=r.childrenData||[],t&&t(n)};n.lazyLoad(e,r)},E=(e,n)=>{var r;const{level:o}=e,s=f.value.slice(0,o);let i;e.isLeaf?i=e.pathNodes[o-2]:(i=e,s.push(e.children)),(null==(r=g.value)?void 0:r.uid)!==(null==i?void 0:i.uid)&&(g.value=e,f.value=s,!n&&t("expand-change",(null==e?void 0:e.pathValues)||[]))},k=(e,n,o=!0)=>{const{checkStrictly:i,multiple:a}=s.value,l=m.value[0];r=!0,!a&&(null==l||l.doCheck(!1)),e.doCheck(n),R(),o&&!a&&!i&&t("close"),!o&&!a&&!i&&C(e)},C=e=>{e&&(e=e.parent,C(e),e&&E(e))},I=e=>null==i?void 0:i.getFlattedNodes(e),A=e=>{var t;return null==(t=I(e))?void 0:t.filter((e=>!1!==e.checked))},T=()=>{m.value.forEach((e=>e.doCheck(!1))),R(),f.value=f.value.slice(0,1),g.value=null,t("expand-change",[])},R=()=>{var e;const{checkStrictly:t,multiple:n}=s.value,r=m.value,o=A(!t),i=Lf(r,o),a=i.map((e=>e.valueByOption));m.value=i,d.value=n?a:null!=(e=a[0])?e:null},x=(t=!1,n=!1)=>{const{modelValue:o}=e,{lazy:a,multiple:l,checkStrictly:u}=s.value,h=!u;if(c.value&&!r&&(n||!wh(o,d.value)))if(a&&!t){const e=Bf(Ah(Mf(o))),t=e.map((e=>null==i?void 0:i.getNodeByValue(e))).filter((e=>!!e&&!e.loaded&&!e.loading));t.length?t.forEach((e=>{_(e,(()=>x(!1,n)))})):x(!0,n)}else{const e=l?Mf(o):[o],t=Bf(e.map((e=>null==i?void 0:i.getNodeByValue(e,h))));O(t,n),d.value=wd(o)}},O=(e,t=!0)=>{const{checkStrictly:n}=s.value,r=m.value,o=e.filter((e=>!!e&&(n||e.isLeaf))),l=null==i?void 0:i.getSameNode(g.value),c=t&&l||o[0];c?c.pathNodes.forEach((e=>E(e,!0))):g.value=null,r.forEach((e=>e.doCheck(!1))),o.forEach((e=>e.doCheck(!0))),m.value=o,(0,a.Y3)(N)},N=()=>{h.C5&&u.value.forEach((e=>{const t=null==e?void 0:e.$el;if(t){const e=t.querySelector(`.${o.namespace.value}-scrollbar__wrap`),n=t.querySelector(`.${o.b("node")}.${o.is("active")}`)||t.querySelector(`.${o.b("node")}.in-active-path`);(0,b.zT)(e,n)}}))},P=e=>{const t=e.target,{code:n}=e;switch(n){case Jn.n.up:case Jn.n.down:{e.preventDefault();const r=n===Jn.n.up?-1:1;(0,Pf.dJ)((0,Pf.Zs)(t,r,`.${o.b("node")}[tabindex="-1"]`));break}case Jn.n.left:{e.preventDefault();const n=u.value[Df(t)-1],r=null==n?void 0:n.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);(0,Pf.dJ)(r);break}case Jn.n.right:{e.preventDefault();const n=u.value[Df(t)+1],r=null==n?void 0:n.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);(0,Pf.dJ)(r);break}case Jn.n.enter:Uf(t);break}};return(0,a.JJ)(ff,(0,l.qj)({config:s,expandingNode:g,checkedNodes:m,isHoverMenu:v,initialLoaded:c,renderLabelFn:w,lazyLoad:_,expandNode:E,handleCheckChange:k})),(0,a.YP)([s,()=>e.options],S,{deep:!0,immediate:!0}),(0,a.YP)((()=>e.modelValue),(()=>{r=!1,x()}),{deep:!0}),(0,a.YP)((()=>d.value),(n=>{wh(n,e.modelValue)||(t(p.f_,n),t(p.O7,n))})),(0,a.Xn)((()=>u.value=[])),(0,a.bv)((()=>!(0,wr.xb)(e.modelValue)&&x())),{ns:o,menuList:u,menus:f,checkedNodes:m,handleKeyDown:P,handleCheckChange:k,getFlattedNodes:I,getCheckedNodes:A,clearCheckedNodes:T,calculateCheckedValue:R,scrollToExpandingNode:N}}});function jf(e,t,n,r,o,s){const i=(0,a.up)("el-cascader-menu");return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...t)=>e.handleKeyDown&&e.handleKeyDown(...t))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.menus,((t,n)=>((0,a.wg)(),(0,a.j4)(i,{key:n,ref_for:!0,ref:t=>e.menuList[n]=t,index:n,nodes:[...t]},null,8,["index","nodes"])))),128))],34)}var zf=(0,m.Z)(Ff,[["render",jf],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);zf.install=e=>{e.component(zf.name,zf)};const $f=zf,Vf=$f,Hf=(0,d.o8)({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:Io.k,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),Kf={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},qf=(0,a.aZ)({name:"ElTag"}),Wf=(0,a.aZ)({...qf,props:Hf,emits:Kf,setup(e,{emit:t}){const n=e,r=(0,mo.Cd)(),o=(0,y.s3)("tag"),s=(0,a.Fl)((()=>{const{type:e,hit:t,effect:s,closable:i,round:a}=n;return[o.b(),o.is("closable",i),o.m(e),o.m(r.value),o.m(s),o.is("hit",t),o.is("round",a)]})),i=e=>{t("close",e)},u=e=>{t("click",e)};return(e,t)=>e.disableTransitions?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,c.C_)((0,l.SU)(s)),style:(0,c.j5)({backgroundColor:e.color}),onClick:u},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(o).e("content"))},[(0,a.WI)(e.$slots,"default")],2),e.closable?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(o).e("close")),onClick:(0,A.iM)(i,["stop"])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.x8P))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0)],6)):((0,a.wg)(),(0,a.j4)(A.uT,{key:1,name:`${(0,l.SU)(o).namespace.value}-zoom-in-center`,appear:""},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(s)),style:(0,c.j5)({backgroundColor:e.color}),onClick:u},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(o).e("content"))},[(0,a.WI)(e.$slots,"default")],2),e.closable?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(o).e("close")),onClick:(0,A.iM)(i,["stop"])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.x8P))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0)],6)])),_:3},8,["name"]))}});var Yf=(0,m.Z)(Wf,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const Gf=(0,C.nz)(Yf),Zf=(0,d.o8)({...xf,size:Th.Pp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:(0,d.Cq)(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:(0,d.Cq)(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Gn.teleported,tagType:{...Hf.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),Jf={[p.f_]:e=>!!e||null===e,[p.O7]:e=>!!e||null===e,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>(0,h.jn)(e),expandChange:e=>!!e,removeTag:e=>!!e};var Qf=n(2746);const Xf=new Map;let eg;function tg(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:(0,wr.kK)(t.arg)&&n.push(t.arg),function(r,o){const s=t.instance.popperRef,i=r.target,a=null==o?void 0:o.target,l=!t||!t.instance,c=!i||!a,u=e.contains(i)||e.contains(a),d=e===i,h=n.length&&n.some((e=>null==e?void 0:e.contains(i)))||n.length&&n.includes(a),p=s&&(s.contains(i)||s.contains(a));l||c||u||d||h||p||t.value(r,o)}}h.C5&&(document.addEventListener("mousedown",(e=>eg=e)),document.addEventListener("mouseup",(e=>{for(const t of Xf.values())for(const{documentHandler:n}of t)n(e,eg)})));const ng={beforeMount(e,t){Xf.has(e)||Xf.set(e,[]),Xf.get(e).push({documentHandler:tg(e,t),bindingFn:t.value})},updated(e,t){Xf.has(e)||Xf.set(e,[]);const n=Xf.get(e),r=n.findIndex((e=>e.bindingFn===t.oldValue)),o={documentHandler:tg(e,t),bindingFn:t.value};r>=0?n.splice(r,1,o):n.push(o)},unmounted(e){Xf.delete(e)}},rg={key:0},og=["placeholder","onKeydown"],sg=["onClick"],ig="ElCascader",ag=(0,a.aZ)({name:ig}),lg=(0,a.aZ)({...ag,props:Zf,emits:Jf,setup(e,{expose:t,emit:n}){const r=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:t,placement:n}=e;["right","left","bottom","top"].includes(n)||(t.arrow.x=35)},requires:["arrow"]}]},s=(0,a.l1)();let i=0,d=0;const f=(0,y.s3)("cascader"),g=(0,y.s3)("input"),{t:m}=(0,_s.bU)(),{form:v,formItem:b}=(0,Ph.A)(),S=(0,l.iH)(null),_=(0,l.iH)(null),E=(0,l.iH)(null),k=(0,l.iH)(null),C=(0,l.iH)(null),I=(0,l.iH)(!1),R=(0,l.iH)(!1),x=(0,l.iH)(!1),O=(0,l.iH)(!1),N=(0,l.iH)(""),P=(0,l.iH)(""),D=(0,l.iH)([]),U=(0,l.iH)([]),L=(0,l.iH)([]),B=(0,l.iH)(!1),M=(0,a.Fl)((()=>s.style)),F=(0,a.Fl)((()=>r.disabled||(null==v?void 0:v.disabled))),j=(0,a.Fl)((()=>r.placeholder||m("el.cascader.placeholder"))),z=(0,a.Fl)((()=>P.value||D.value.length>0||B.value?"":j.value)),$=(0,mo.Cd)(),V=(0,a.Fl)((()=>["small"].includes($.value)?"small":"default")),H=(0,a.Fl)((()=>!!r.props.multiple)),K=(0,a.Fl)((()=>!r.filterable||H.value)),q=(0,a.Fl)((()=>H.value?P.value:N.value)),W=(0,a.Fl)((()=>{var e;return(null==(e=k.value)?void 0:e.checkedNodes)||[]})),Y=(0,a.Fl)((()=>!(!r.clearable||F.value||x.value||!R.value)&&!!W.value.length)),G=(0,a.Fl)((()=>{const{showAllLevels:e,separator:t}=r,n=W.value;return n.length?H.value?"":n[0].calcText(e,t):""})),Z=(0,a.Fl)({get(){return wd(r.modelValue)},set(e){n(p.f_,e),n(p.O7,e),r.validateEvent&&(null==b||b.validate("change").catch((e=>(0,w.N)(e))))}}),J=(0,a.Fl)((()=>[f.b(),f.m($.value),f.is("disabled",F.value),s.class])),Q=(0,a.Fl)((()=>[g.e("icon"),"icon-arrow-down",f.is("reverse",I.value)])),X=(0,a.Fl)((()=>f.is("focus",I.value||O.value))),ee=(0,a.Fl)((()=>{var e,t;return null==(t=null==(e=S.value)?void 0:e.popperRef)?void 0:t.contentRef})),te=e=>{var t,o,s;F.value||(e=null!=e?e:!I.value,e!==I.value&&(I.value=e,null==(o=null==(t=_.value)?void 0:t.input)||o.setAttribute("aria-expanded",`${e}`),e?(ne(),(0,a.Y3)(null==(s=k.value)?void 0:s.scrollToExpandingNode)):r.filterable&&ve(),n("visibleChange",e)))},ne=()=>{(0,a.Y3)((()=>{var e;null==(e=S.value)||e.updatePopper()}))},re=()=>{x.value=!1},oe=e=>{const{showAllLevels:t,separator:n}=r;return{node:e,key:e.uid,text:e.calcText(t,n),hitState:!1,closable:!F.value&&!e.isDisabled,isCollapseTag:!1}},se=e=>{var t;const r=e.node;r.doCheck(!1),null==(t=k.value)||t.calculateCheckedValue(),n("removeTag",r.valueByOption)},ce=()=>{if(!H.value)return;const e=W.value,t=[],n=[];if(e.forEach((e=>n.push(oe(e)))),U.value=n,e.length){const[n,...o]=e,s=o.length;t.push(oe(n)),s&&(r.collapseTags?t.push({key:-1,text:`+ ${s}`,closable:!1,isCollapseTag:!0}):o.forEach((e=>t.push(oe(e)))))}D.value=t},ue=()=>{var e,t;const{filterMethod:n,showAllLevels:o,separator:s}=r,i=null==(t=null==(e=k.value)?void 0:e.getFlattedNodes(!r.props.checkStrictly))?void 0:t.filter((e=>!e.isDisabled&&(e.calcText(o,s),n(e,q.value))));H.value&&(D.value.forEach((e=>{e.hitState=!1})),U.value.forEach((e=>{e.hitState=!1}))),x.value=!0,L.value=i,ne()},de=()=>{var e;let t;t=x.value&&C.value?C.value.$el.querySelector(`.${f.e("suggestion-item")}`):null==(e=k.value)?void 0:e.$el.querySelector(`.${f.b("node")}[tabindex="-1"]`),t&&(t.focus(),!x.value&&t.click())},he=()=>{var e,t;const n=null==(e=_.value)?void 0:e.input,r=E.value,o=null==(t=C.value)?void 0:t.$el;if(h.C5&&n){if(o){const e=o.querySelector(`.${f.e("suggestion-list")}`);e.style.minWidth=`${n.offsetWidth}px`}if(r){const{offsetHeight:e}=r,t=D.value.length>0?`${Math.max(e+6,i)}px`:`${i}px`;n.style.height=t,ne()}}},pe=e=>{var t;return null==(t=k.value)?void 0:t.getCheckedNodes(e)},fe=e=>{ne(),n("expandChange",e)},ge=e=>{var t;const n=null==(t=e.target)?void 0:t.value;if("compositionend"===e.type)B.value=!1,(0,a.Y3)((()=>Ce(n)));else{const e=n[n.length-1]||"";B.value=!(0,Qf.w)(e)}},me=e=>{if(!B.value)switch(e.code){case Jn.n.enter:te();break;case Jn.n.down:te(!0),(0,a.Y3)(de),e.preventDefault();break;case Jn.n.esc:!0===I.value&&(e.preventDefault(),e.stopPropagation(),te(!1));break;case Jn.n.tab:te(!1);break}},ye=()=>{var e;null==(e=k.value)||e.clearCheckedNodes(),!I.value&&r.filterable&&ve(),te(!1)},ve=()=>{const{value:e}=G;N.value=e,P.value=e},we=e=>{var t,n;const{checked:r}=e;H.value?null==(t=k.value)||t.handleCheckChange(e,!r,!1):(!r&&(null==(n=k.value)||n.handleCheckChange(e,!0,!1)),te(!1))},be=e=>{const t=e.target,{code:n}=e;switch(n){case Jn.n.up:case Jn.n.down:{const e=n===Jn.n.up?-1:1;(0,Pf.dJ)((0,Pf.Zs)(t,e,`.${f.e("suggestion-item")}[tabindex="-1"]`));break}case Jn.n.enter:t.click();break}},Se=()=>{const e=D.value,t=e[e.length-1];d=P.value?0:d+1,!t||!d||r.collapseTags&&e.length>1||(t.hitState?se(t):t.hitState=!0)},_e=e=>{const t=e.target,r=f.e("search-input");t.className===r&&(O.value=!0),n("focus",e)},Ee=e=>{O.value=!1,n("blur",e)},ke=ie((()=>{const{value:e}=q;if(!e)return;const t=r.beforeFilter(e);(0,c.tI)(t)?t.then(ue).catch((()=>{})):!1!==t?ue():re()}),r.debounce),Ce=(e,t)=>{!I.value&&te(!0),(null==t?void 0:t.isComposing)||(e?ke():re())};return(0,a.YP)(x,ne),(0,a.YP)([W,F],ce),(0,a.YP)(D,(()=>{(0,a.Y3)((()=>he()))})),(0,a.YP)(G,ve,{immediate:!0}),(0,a.bv)((()=>{const e=_.value.input,t=Number.parseFloat((0,u.Zaf)(g.cssVarName("input-height"),e).value)-2;i=e.offsetHeight||t,(0,u.yU7)(e,he)})),t({getCheckedNodes:pe,cascaderPanelRef:k,togglePopperVisible:te,contentRef:ee}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(ho),{ref_key:"tooltipRef",ref:S,visible:I.value,teleported:e.teleported,"popper-class":[(0,l.SU)(f).e("dropdown"),e.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${(0,l.SU)(f).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:re},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(J)),style:(0,c.j5)((0,l.SU)(M)),onClick:t[5]||(t[5]=()=>te(!(0,l.SU)(K)||void 0)),onKeydown:me,onMouseenter:t[6]||(t[6]=e=>R.value=!0),onMouseleave:t[7]||(t[7]=e=>R.value=!1)},[(0,a.Wm)((0,l.SU)(le.EZ),{ref_key:"input",ref:_,modelValue:N.value,"onUpdate:modelValue":t[1]||(t[1]=e=>N.value=e),placeholder:(0,l.SU)(z),readonly:(0,l.SU)(K),disabled:(0,l.SU)(F),"validate-event":!1,size:(0,l.SU)($),class:(0,c.C_)((0,l.SU)(X)),tabindex:(0,l.SU)(H)&&e.filterable&&!(0,l.SU)(F)?-1:void 0,onCompositionstart:ge,onCompositionupdate:ge,onCompositionend:ge,onFocus:_e,onBlur:Ee,onInput:Ce},{suffix:(0,a.w5)((()=>[(0,l.SU)(Y)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:"clear",class:(0,c.C_)([(0,l.SU)(g).e("icon"),"icon-circle-close"]),onClick:(0,A.iM)(ye,["stop"])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.K41))])),_:1},8,["class","onClick"])):((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:"arrow-down",class:(0,c.C_)((0,l.SU)(Q)),onClick:t[0]||(t[0]=(0,A.iM)((e=>te()),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.K5e))])),_:1},8,["class"]))])),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),(0,l.SU)(H)?((0,a.wg)(),(0,a.iD)("div",{key:0,ref_key:"tagWrapper",ref:E,class:(0,c.C_)((0,l.SU)(f).e("tags"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(D.value,(t=>((0,a.wg)(),(0,a.j4)((0,l.SU)(Gf),{key:t.key,type:e.tagType,size:(0,l.SU)(V),hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:e=>se(t)},{default:(0,a.w5)((()=>[!1===t.isCollapseTag?((0,a.wg)(),(0,a.iD)("span",rg,(0,c.zw)(t.text),1)):((0,a.wg)(),(0,a.j4)((0,l.SU)(ho),{key:1,disabled:I.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,c.zw)(t.text),1)])),content:(0,a.w5)((()=>[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(f).e("collapse-tags"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(U.value.slice(1),((t,n)=>((0,a.wg)(),(0,a.iD)("div",{key:n,class:(0,c.C_)((0,l.SU)(f).e("collapse-tag"))},[((0,a.wg)(),(0,a.j4)((0,l.SU)(Gf),{key:t.key,class:"in-tooltip",type:e.tagType,size:(0,l.SU)(V),hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:e=>se(t)},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,c.zw)(t.text),1)])),_:2},1032,["type","size","hit","closable","onClose"]))],2)))),128))],2)])),_:2},1032,["disabled"]))])),_:2},1032,["type","size","hit","closable","onClose"])))),128)),e.filterable&&!(0,l.SU)(F)?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=e=>P.value=e),type:"text",class:(0,c.C_)((0,l.SU)(f).e("search-input")),placeholder:(0,l.SU)(G)?"":(0,l.SU)(j),onInput:t[3]||(t[3]=e=>Ce(P.value,e)),onClick:t[4]||(t[4]=(0,A.iM)((e=>te(!0)),["stop"])),onKeydown:(0,A.D2)(Se,["delete"]),onCompositionstart:ge,onCompositionupdate:ge,onCompositionend:ge,onFocus:_e,onBlur:Ee},null,42,og)),[[A.nr,P.value]]):(0,a.kq)("v-if",!0)],2)):(0,a.kq)("v-if",!0)],38)),[[(0,l.SU)(ng),()=>te(!1),(0,l.SU)(ee)]])])),content:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)((0,l.SU)($f),{ref_key:"cascaderPanelRef",ref:k,modelValue:(0,l.SU)(Z),"onUpdate:modelValue":t[8]||(t[8]=e=>(0,l.dq)(Z)?Z.value=e:null),options:e.options,props:r.props,border:!1,"render-label":e.$slots.default,onExpandChange:fe,onClose:t[9]||(t[9]=t=>e.$nextTick((()=>te(!1))))},null,8,["modelValue","options","props","render-label"]),[[A.F8,!x.value]]),e.filterable?(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,l.SU)(Ie),{key:0,ref_key:"suggestionPanel",ref:C,tag:"ul",class:(0,c.C_)((0,l.SU)(f).e("suggestion-panel")),"view-class":(0,l.SU)(f).e("suggestion-list"),onKeydown:be},{default:(0,a.w5)((()=>[L.value.length?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(L.value,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.uid,class:(0,c.C_)([(0,l.SU)(f).e("suggestion-item"),(0,l.SU)(f).is("checked",e.checked)]),tabindex:-1,onClick:t=>we(e)},[(0,a._)("span",null,(0,c.zw)(e.text),1),e.checked?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.JrY))])),_:1})):(0,a.kq)("v-if",!0)],10,sg)))),128)):(0,a.WI)(e.$slots,"empty",{key:1},(()=>[(0,a._)("li",{class:(0,c.C_)((0,l.SU)(f).e("empty-text"))},(0,c.zw)((0,l.SU)(m)("el.cascader.noMatch")),3)]))])),_:3},8,["class","view-class"])),[[A.F8,x.value]]):(0,a.kq)("v-if",!0)])),_:3},8,["visible","teleported","popper-class","transition"]))}});var cg=(0,m.Z)(lg,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);cg.install=e=>{e.component(cg.name,cg)};const ug=cg,dg=ug,hg=(0,d.o8)({checked:{type:Boolean,default:!1}}),pg={"update:checked":e=>(0,h.jn)(e),[p.O7]:e=>(0,h.jn)(e)},fg=(0,a.aZ)({name:"ElCheckTag"}),gg=(0,a.aZ)({...fg,props:hg,emits:pg,setup(e,{emit:t}){const n=e,r=(0,y.s3)("check-tag"),o=()=>{const e=!n.checked;t(p.O7,e),t("update:checked",e)};return(e,t)=>((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)([(0,l.SU)(r).b(),(0,l.SU)(r).is("checked",e.checked)]),onClick:o},[(0,a.WI)(e.$slots,"default")],2))}});var mg=(0,m.Z)(gg,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const yg=(0,C.nz)(mg);var vg=n(5450);const wg=(0,d.o8)({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:(0,d.Cq)([Number,Object]),default:()=>(0,vg.N)({})},sm:{type:(0,d.Cq)([Number,Object]),default:()=>(0,vg.N)({})},md:{type:(0,d.Cq)([Number,Object]),default:()=>(0,vg.N)({})},lg:{type:(0,d.Cq)([Number,Object]),default:()=>(0,vg.N)({})},xl:{type:(0,d.Cq)([Number,Object]),default:()=>(0,vg.N)({})}}),bg=Symbol("rowContextKey"),Sg=(0,a.aZ)({name:"ElCol"}),_g=(0,a.aZ)({...Sg,props:wg,setup(e){const t=e,{gutter:n}=(0,a.f3)(bg,{gutter:(0,a.Fl)((()=>0))}),r=(0,y.s3)("col"),o=(0,a.Fl)((()=>{const e={};return n.value&&(e.paddingLeft=e.paddingRight=n.value/2+"px"),e})),s=(0,a.Fl)((()=>{const e=[],o=["span","offset","pull","push"];o.forEach((n=>{const o=t[n];(0,h.hj)(o)&&("span"===n?e.push(r.b(`${t[n]}`)):o>0&&e.push(r.b(`${n}-${t[n]}`)))}));const s=["xs","sm","md","lg","xl"];return s.forEach((n=>{(0,h.hj)(t[n])?e.push(r.b(`${n}-${t[n]}`)):(0,c.Kn)(t[n])&&Object.entries(t[n]).forEach((([t,o])=>{e.push("span"!==t?r.b(`${n}-${t}-${o}`):r.b(`${n}-${o}`))}))})),n.value&&e.push(r.is("guttered")),[r.b(),e]}));return(e,t)=>((0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{class:(0,c.C_)((0,l.SU)(s)),style:(0,c.j5)((0,l.SU)(o))},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["class","style"]))}});var Eg=(0,m.Z)(_g,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const kg=(0,C.nz)(Eg),Cg=e=>typeof(0,h.hj)(e),Ig=(0,d.o8)({accordion:Boolean,modelValue:{type:(0,d.Cq)([Array,String,Number]),default:()=>(0,vg.N)([])}}),Ag={[p.f_]:Cg,[p.O7]:Cg},Tg=Symbol("collapseContextKey");function Rg(){if(!arguments.length)return[];var e=arguments[0];return(0,Xi.Z)(e)?e:[e]}var xg=Rg;const Og=(e,t)=>{const n=(0,l.iH)(xg(e.modelValue)),r=r=>{n.value=r;const o=e.accordion?n.value[0]:n.value;t(p.f_,o),t(p.O7,o)},o=t=>{if(e.accordion)r([n.value[0]===t?"":t]);else{const e=[...n.value],o=e.indexOf(t);o>-1?e.splice(o,1):e.push(t),r(e)}};return(0,a.YP)((()=>e.modelValue),(()=>n.value=xg(e.modelValue)),{deep:!0}),(0,a.JJ)(Tg,{activeNames:n,handleItemClick:o}),{activeNames:n,setActiveNames:r}},Ng=()=>{const e=(0,y.s3)("collapse"),t=(0,a.Fl)((()=>e.b()));return{rootKls:t}},Pg=(0,a.aZ)({name:"ElCollapse"}),Dg=(0,a.aZ)({...Pg,props:Ig,emits:Ag,setup(e,{expose:t,emit:n}){const r=e,{activeNames:o,setActiveNames:s}=Og(r,n),{rootKls:i}=Ng();return t({activeNames:o,setActiveNames:s}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(i)),role:"tablist","aria-multiselectable":"true"},[(0,a.WI)(e.$slots,"default")],2))}});var Ug=(0,m.Z)(Dg,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const Lg=(0,a.aZ)({name:"ElCollapseTransition"}),Bg=(0,a.aZ)({...Lg,setup(e){const t=(0,y.s3)("collapse-transition"),n={beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow="hidden"},leave(e){0!==e.scrollHeight&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}};return(e,r)=>((0,a.wg)(),(0,a.j4)(A.uT,(0,a.dG)({name:(0,l.SU)(t).b()},(0,a.mx)(n)),{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16,["name"]))}});var Mg=(0,m.Z)(Bg,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);Mg.install=e=>{e.component(Mg.name,Mg)};const Fg=Mg,jg=Fg,zg=(0,d.o8)({title:{type:String,default:""},name:{type:(0,d.Cq)([String,Number]),default:()=>yo()},disabled:Boolean}),$g=e=>{const t=(0,a.f3)(Tg),n=(0,l.iH)(!1),r=(0,l.iH)(!1),o=(0,l.iH)(yo()),s=(0,a.Fl)((()=>null==t?void 0:t.activeNames.value.includes(e.name))),i=()=>{setTimeout((()=>{r.value?r.value=!1:n.value=!0}),50)},c=()=>{e.disabled||(null==t||t.handleItemClick(e.name),n.value=!1,r.value=!0)},u=()=>{null==t||t.handleItemClick(e.name)};return{focusing:n,id:o,isActive:s,handleFocus:i,handleHeaderClick:c,handleEnterClick:u}},Vg=(e,{focusing:t,isActive:n,id:r})=>{const o=(0,y.s3)("collapse"),s=(0,a.Fl)((()=>[o.b("item"),o.is("active",(0,l.SU)(n)),o.is("disabled",e.disabled)])),i=(0,a.Fl)((()=>[o.be("item","header"),o.is("active",(0,l.SU)(n)),{focusing:(0,l.SU)(t)&&!e.disabled}])),c=(0,a.Fl)((()=>[o.be("item","arrow"),o.is("active",(0,l.SU)(n))])),u=(0,a.Fl)((()=>o.be("item","wrap"))),d=(0,a.Fl)((()=>o.be("item","content"))),h=(0,a.Fl)((()=>o.b(`content-${(0,l.SU)(r)}`))),p=(0,a.Fl)((()=>o.b(`head-${(0,l.SU)(r)}`)));return{arrowKls:c,headKls:i,rootKls:s,itemWrapperKls:u,itemContentKls:d,scopedContentId:h,scopedHeadId:p}},Hg=["aria-expanded","aria-controls","aria-describedby"],Kg=["id","tabindex"],qg=["id","aria-hidden","aria-labelledby"],Wg=(0,a.aZ)({name:"ElCollapseItem"}),Yg=(0,a.aZ)({...Wg,props:zg,setup(e,{expose:t}){const n=e,{focusing:r,id:o,isActive:s,handleFocus:i,handleHeaderClick:u,handleEnterClick:d}=$g(n),{arrowKls:h,headKls:p,rootKls:f,itemWrapperKls:g,itemContentKls:m,scopedContentId:y,scopedHeadId:v}=Vg(n,{focusing:r,isActive:s,id:o});return t({isActive:s}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(f))},[(0,a._)("div",{role:"tab","aria-expanded":(0,l.SU)(s),"aria-controls":(0,l.SU)(y),"aria-describedby":(0,l.SU)(y)},[(0,a._)("div",{id:(0,l.SU)(v),class:(0,c.C_)((0,l.SU)(p)),role:"button",tabindex:e.disabled?-1:0,onClick:t[0]||(t[0]=(...e)=>(0,l.SU)(u)&&(0,l.SU)(u)(...e)),onKeypress:t[1]||(t[1]=(0,A.D2)((0,A.iM)(((...e)=>(0,l.SU)(d)&&(0,l.SU)(d)(...e)),["stop","prevent"]),["space","enter"])),onFocus:t[2]||(t[2]=(...e)=>(0,l.SU)(i)&&(0,l.SU)(i)(...e)),onBlur:t[3]||(t[3]=e=>r.value=!1)},[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a.Uk)((0,c.zw)(e.title),1)])),(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)((0,l.SU)(h))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1},8,["class"])],42,Kg)],8,Hg),(0,a.Wm)((0,l.SU)(Fg),null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",{id:(0,l.SU)(y),class:(0,c.C_)((0,l.SU)(g)),role:"tabpanel","aria-hidden":!(0,l.SU)(s),"aria-labelledby":(0,l.SU)(v)},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(m))},[(0,a.WI)(e.$slots,"default")],2)],10,qg),[[A.F8,(0,l.SU)(s)]])])),_:3})],2))}});var Gg=(0,m.Z)(Yg,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const Zg=(0,C.nz)(Ug,{CollapseItem:Gg}),Jg=(0,C.dp)(Gg),Qg=(0,d.o8)({color:{type:(0,d.Cq)(Object),required:!0},vertical:{type:Boolean,default:!1}});let Xg=!1;function em(e,t){if(!h.C5)return;const n=function(e){var n;null==(n=t.drag)||n.call(t,e)},r=function(e){var o;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,Xg=!1,null==(o=t.end)||o.call(t,e)},o=function(e){var o;Xg||(e.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),Xg=!0,null==(o=t.start)||o.call(t,e))};e.addEventListener("mousedown",o),e.addEventListener("touchstart",o)}const tm=(e,t)=>{if(!h.C5||!e||!t)return!1;const n=e.getBoundingClientRect();let r;return r=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right},nm=e=>{let t=0,n=e;while(n)t+=n.offsetTop,n=n.offsetParent;return t},rm=(e,t)=>Math.abs(nm(e)-nm(t)),om=e=>{let t,n;return"touchend"===e.type?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}},sm=e=>{const t=(0,a.FN)(),n=(0,l.XI)(),r=(0,l.XI)();function o(e){const t=e.target;t!==n.value&&s(e)}function s(o){if(!r.value||!n.value)return;const s=t.vnode.el,i=s.getBoundingClientRect(),{clientX:a,clientY:l}=om(o);if(e.vertical){let t=l-i.top;t=Math.max(n.value.offsetHeight/2,t),t=Math.min(t,i.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((t-n.value.offsetHeight/2)/(i.height-n.value.offsetHeight)*100))}else{let t=a-i.left;t=Math.max(n.value.offsetWidth/2,t),t=Math.min(t,i.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((t-n.value.offsetWidth/2)/(i.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:r,handleDrag:s,handleClick:o}},im=(e,{bar:t,thumb:n,handleDrag:r})=>{const o=(0,a.FN)(),s=(0,y.s3)("color-alpha-slider"),i=(0,l.iH)(0),c=(0,l.iH)(0),u=(0,l.iH)();function d(){if(!n.value)return 0;if(e.vertical)return 0;const t=o.vnode.el,r=e.color.get("alpha");return t?Math.round(r*(t.offsetWidth-n.value.offsetWidth/2)/100):0}function h(){if(!n.value)return 0;const t=o.vnode.el;if(!e.vertical)return 0;const r=e.color.get("alpha");return t?Math.round(r*(t.offsetHeight-n.value.offsetHeight/2)/100):0}function p(){if(e.color&&e.color.value){const{r:t,g:n,b:r}=e.color.toRgb();return`linear-gradient(to right, rgba(${t}, ${n}, ${r}, 0) 0%, rgba(${t}, ${n}, ${r}, 1) 100%)`}return""}function f(){i.value=d(),c.value=h(),u.value=p()}(0,a.bv)((()=>{if(!t.value||!n.value)return;const e={drag:e=>{r(e)},end:e=>{r(e)}};em(t.value,e),em(n.value,e),f()})),(0,a.YP)((()=>e.color.get("alpha")),(()=>f())),(0,a.YP)((()=>e.color.value),(()=>f()));const g=(0,a.Fl)((()=>[s.b(),s.is("vertical",e.vertical)])),m=(0,a.Fl)((()=>s.e("bar"))),w=(0,a.Fl)((()=>s.e("thumb"))),b=(0,a.Fl)((()=>({background:u.value}))),S=(0,a.Fl)((()=>({left:(0,v.Nn)(i.value),top:(0,v.Nn)(c.value)})));return{rootKls:g,barKls:m,barStyle:b,thumbKls:w,thumbStyle:S,update:f}},am="ElColorAlphaSlider",lm=(0,a.aZ)({name:am}),cm=(0,a.aZ)({...lm,props:Qg,setup(e,{expose:t}){const n=e,{bar:r,thumb:o,handleDrag:s,handleClick:i}=sm(n),{rootKls:u,barKls:d,barStyle:h,thumbKls:p,thumbStyle:f,update:g}=im(n,{bar:r,thumb:o,handleDrag:s});return t({update:g,bar:r,thumb:o}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(u))},[(0,a._)("div",{ref_key:"bar",ref:r,class:(0,c.C_)((0,l.SU)(d)),style:(0,c.j5)((0,l.SU)(h)),onClick:t[0]||(t[0]=(...e)=>(0,l.SU)(i)&&(0,l.SU)(i)(...e))},null,6),(0,a._)("div",{ref_key:"thumb",ref:o,class:(0,c.C_)((0,l.SU)(p)),style:(0,c.j5)((0,l.SU)(f))},null,6)],2))}});var um=(0,m.Z)(cm,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const dm=(0,a.aZ)({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=(0,y.s3)("color-hue-slider"),n=(0,a.FN)(),r=(0,l.iH)(),o=(0,l.iH)(),s=(0,l.iH)(0),i=(0,l.iH)(0),c=(0,a.Fl)((()=>e.color.get("hue")));function u(e){const t=e.target;t!==r.value&&d(e)}function d(t){if(!o.value||!r.value)return;const s=n.vnode.el,i=s.getBoundingClientRect(),{clientX:a,clientY:l}=om(t);let c;if(e.vertical){let e=l-i.top;e=Math.min(e,i.height-r.value.offsetHeight/2),e=Math.max(r.value.offsetHeight/2,e),c=Math.round((e-r.value.offsetHeight/2)/(i.height-r.value.offsetHeight)*360)}else{let e=a-i.left;e=Math.min(e,i.width-r.value.offsetWidth/2),e=Math.max(r.value.offsetWidth/2,e),c=Math.round((e-r.value.offsetWidth/2)/(i.width-r.value.offsetWidth)*360)}e.color.set("hue",c)}function h(){if(!r.value)return 0;const t=n.vnode.el;if(e.vertical)return 0;const o=e.color.get("hue");return t?Math.round(o*(t.offsetWidth-r.value.offsetWidth/2)/360):0}function p(){if(!r.value)return 0;const t=n.vnode.el;if(!e.vertical)return 0;const o=e.color.get("hue");return t?Math.round(o*(t.offsetHeight-r.value.offsetHeight/2)/360):0}function f(){s.value=h(),i.value=p()}return(0,a.YP)((()=>c.value),(()=>{f()})),(0,a.bv)((()=>{if(!o.value||!r.value)return;const e={drag:e=>{d(e)},end:e=>{d(e)}};em(o.value,e),em(r.value,e),f()})),{bar:o,thumb:r,thumbLeft:s,thumbTop:i,hueValue:c,handleClick:u,update:f,ns:t}}});function hm(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([e.ns.b(),e.ns.is("vertical",e.vertical)])},[(0,a._)("div",{ref:"bar",class:(0,c.C_)(e.ns.e("bar")),onClick:t[0]||(t[0]=(...t)=>e.handleClick&&e.handleClick(...t))},null,2),(0,a._)("div",{ref:"thumb",class:(0,c.C_)(e.ns.e("thumb")),style:(0,c.j5)({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var pm=(0,m.Z)(dm,[["render",hm],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const fm=(0,d.o8)({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Th.Pp,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:(0,d.Cq)(Array)},validateEvent:{type:Boolean,default:!0}}),gm={[p.f_]:e=>(0,c.HD)(e)||(0,gr.Z)(e),[p.O7]:e=>(0,c.HD)(e)||(0,gr.Z)(e),activeChange:e=>(0,c.HD)(e)||(0,gr.Z)(e)},mm=Symbol("colorPickerContextKey"),ym=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},vm=function(e){return"string"===typeof e&&e.includes(".")&&1===Number.parseFloat(e)},wm=function(e){return"string"===typeof e&&e.includes("%")},bm=function(e,t){vm(e)&&(e="100%");const n=wm(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(""+e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},Sm={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},_m=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${Sm[t]||t}${Sm[n]||n}`},Em=function({r:e,g:t,b:n}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+n)?"":`#${_m(e)}${_m(t)}${_m(n)}`},km={A:10,B:11,C:12,D:13,E:14,F:15},Cm=function(e){return 2===e.length?16*(km[e[0].toUpperCase()]||+e[0])+(km[e[1].toUpperCase()]||+e[1]):km[e[1].toUpperCase()]||+e[1]},Im=function(e,t,n){t/=100,n/=100;let r=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,r*=o<=1?o:2-o;const s=(n+t)/2,i=0===n?2*r/(o+r):2*t/(n+t);return{h:e,s:100*i,v:100*s}},Am=(e,t,n)=>{e=bm(e,255),t=bm(t,255),n=bm(n,255);const r=Math.max(e,t,n),o=Math.min(e,t,n);let s;const i=r,a=r-o,l=0===r?0:a/r;if(r===o)s=0;else{switch(r){case e:s=(t-n)/a+(t<n?6:0);break;case t:s=(n-e)/a+2;break;case n:s=(e-t)/a+4;break}s/=6}return{h:360*s,s:100*l,v:100*i}},Tm=function(e,t,n){e=6*bm(e,360),t=bm(t,100),n=bm(n,100);const r=Math.floor(e),o=e-r,s=n*(1-t),i=n*(1-o*t),a=n*(1-(1-o)*t),l=r%6,c=[n,i,s,s,a,n][l],u=[a,n,n,i,s,s][l],d=[s,s,a,n,n,i][l];return{r:Math.round(255*c),g:Math.round(255*u),b:Math.round(255*d)}};class Rm{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)(0,c.RI)(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(1!==arguments.length||"object"!==typeof e)this[`_${e}`]=t,this.doOnChange();else for(const n in e)(0,c.RI)(e,n)&&this.set(n,e[n])}get(e){return"alpha"===e?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Tm(this._hue,this._saturation,this._value)}fromString(e){if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();const t=(e,t,n)=>{this._hue=Math.max(0,Math.min(360,e)),this._saturation=Math.max(0,Math.min(100,t)),this._value=Math.max(0,Math.min(100,n)),this.doOnChange()};if(e.includes("hsl")){const n=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));if(4===n.length?this._alpha=100*Number.parseFloat(n[3]):3===n.length&&(this._alpha=100),n.length>=3){const{h:e,s:r,v:o}=Im(n[0],n[1],n[2]);t(e,r,o)}}else if(e.includes("hsv")){const n=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));4===n.length?this._alpha=100*Number.parseFloat(n[3]):3===n.length&&(this._alpha=100),n.length>=3&&t(n[0],n[1],n[2])}else if(e.includes("rgb")){const n=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));if(4===n.length?this._alpha=100*Number.parseFloat(n[3]):3===n.length&&(this._alpha=100),n.length>=3){const{h:e,s:r,v:o}=Am(n[0],n[1],n[2]);t(e,r,o)}}else if(e.includes("#")){const n=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(n))return;let r,o,s;3===n.length?(r=Cm(n[0]+n[0]),o=Cm(n[1]+n[1]),s=Cm(n[2]+n[2])):6!==n.length&&8!==n.length||(r=Cm(n.slice(0,2)),o=Cm(n.slice(2,4)),s=Cm(n.slice(4,6))),8===n.length?this._alpha=Cm(n.slice(6))/255*100:3!==n.length&&6!==n.length||(this._alpha=100);const{h:i,s:a,v:l}=Am(r,o,s);t(i,a,l)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:n,_alpha:r,format:o}=this;if(this.enableAlpha)switch(o){case"hsl":{const r=ym(e,t/100,n/100);this.value=`hsla(${e}, ${Math.round(100*r[1])}%, ${Math.round(100*r[2])}%, ${this.get("alpha")/100})`;break}case"hsv":this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(n)}%, ${this.get("alpha")/100})`;break;case"hex":this.value=`${Em(Tm(e,t,n))}${_m(255*r/100)}`;break;default:{const{r:r,g:o,b:s}=Tm(e,t,n);this.value=`rgba(${r}, ${o}, ${s}, ${this.get("alpha")/100})`}}else switch(o){case"hsl":{const r=ym(e,t/100,n/100);this.value=`hsl(${e}, ${Math.round(100*r[1])}%, ${Math.round(100*r[2])}%)`;break}case"hsv":this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(n)}%)`;break;case"rgb":{const{r:r,g:o,b:s}=Tm(e,t,n);this.value=`rgb(${r}, ${o}, ${s})`;break}default:this.value=Em(Tm(e,t,n))}}}const xm=(0,a.aZ)({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const t=(0,y.s3)("color-predefine"),{currentColor:n}=(0,a.f3)(mm),r=(0,l.iH)(s(e.colors,e.color));function o(t){e.color.fromString(e.colors[t])}function s(e,t){return e.map((e=>{const n=new Rm;return n.enableAlpha=!0,n.format="rgba",n.fromString(e),n.selected=n.value===t.value,n}))}return(0,a.YP)((()=>n.value),(e=>{const t=new Rm;t.fromString(e),r.value.forEach((e=>{e.selected=t.compare(e)}))})),(0,a.m0)((()=>{r.value=s(e.colors,e.color)})),{rgbaColors:r,handleSelect:o,ns:t}}}),Om=["onClick"];function Nm(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)(e.ns.b())},[(0,a._)("div",{class:(0,c.C_)(e.ns.e("colors"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.rgbaColors,((t,n)=>((0,a.wg)(),(0,a.iD)("div",{key:e.colors[n],class:(0,c.C_)([e.ns.e("color-selector"),e.ns.is("alpha",t._alpha<100),{selected:t.selected}]),onClick:t=>e.handleSelect(n)},[(0,a._)("div",{style:(0,c.j5)({backgroundColor:t.value})},null,4)],10,Om)))),128))],2)],2)}var Pm=(0,m.Z)(xm,[["render",Nm],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const Dm=(0,a.aZ)({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=(0,y.s3)("color-svpanel"),n=(0,a.FN)(),r=(0,l.iH)(0),o=(0,l.iH)(0),s=(0,l.iH)("hsl(0, 100%, 50%)"),i=(0,a.Fl)((()=>{const t=e.color.get("hue"),n=e.color.get("value");return{hue:t,value:n}}));function c(){const t=e.color.get("saturation"),i=e.color.get("value"),a=n.vnode.el,{clientWidth:l,clientHeight:c}=a;o.value=t*l/100,r.value=(100-i)*c/100,s.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function u(t){const s=n.vnode.el,i=s.getBoundingClientRect(),{clientX:a,clientY:l}=om(t);let c=a-i.left,u=l-i.top;c=Math.max(0,c),c=Math.min(c,i.width),u=Math.max(0,u),u=Math.min(u,i.height),o.value=c,r.value=u,e.color.set({saturation:c/i.width*100,value:100-u/i.height*100})}return(0,a.YP)((()=>i.value),(()=>{c()})),(0,a.bv)((()=>{em(n.vnode.el,{drag:e=>{u(e)},end:e=>{u(e)}}),c()})),{cursorTop:r,cursorLeft:o,background:s,colorValue:i,handleDrag:u,update:c,ns:t}}}),Um=(0,a._)("div",null,null,-1),Lm=[Um];function Bm(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)(e.ns.b()),style:(0,c.j5)({backgroundColor:e.background})},[(0,a._)("div",{class:(0,c.C_)(e.ns.e("white"))},null,2),(0,a._)("div",{class:(0,c.C_)(e.ns.e("black"))},null,2),(0,a._)("div",{class:(0,c.C_)(e.ns.e("cursor")),style:(0,c.j5)({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},Lm,6)],6)}var Mm=(0,m.Z)(Dm,[["render",Bm],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const Fm=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],jm=(0,a.aZ)({name:"ElColorPicker"}),zm=(0,a.aZ)({...jm,props:fm,emits:gm,setup(e,{expose:t,emit:n}){const r=e,{t:o}=(0,_s.bU)(),s=(0,y.s3)("color"),{formItem:i}=(0,Ph.A)(),u=(0,mo.Cd)(),d=(0,mo.DT)(),{inputId:h,isLabeledByFormItem:f}=(0,Ph.p)(r,{formItemContext:i}),g=(0,l.iH)(),m=(0,l.iH)(),v=(0,l.iH)(),b=(0,l.iH)();let S=!0;const _=(0,l.qj)(new Rm({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),E=(0,l.iH)(!1),k=(0,l.iH)(!1),C=(0,l.iH)(""),I=(0,a.Fl)((()=>r.modelValue||k.value?P(_,r.showAlpha):"transparent")),R=(0,a.Fl)((()=>r.modelValue||k.value?_.value:"")),x=(0,a.Fl)((()=>f.value?void 0:r.label||o("el.colorpicker.defaultLabel"))),O=(0,a.Fl)((()=>f.value?null==i?void 0:i.labelId:void 0)),N=(0,a.Fl)((()=>[s.b("picker"),s.is("disabled",d.value),s.bm("picker",u.value)]));function P(e,t){if(!(e instanceof Rm))throw new TypeError("color should be instance of _color Class");const{r:n,g:r,b:o}=e.toRgb();return t?`rgba(${n}, ${r}, ${o}, ${e.get("alpha")/100})`:`rgb(${n}, ${r}, ${o})`}function D(e){E.value=e}const U=ie(D,100);function L(){U(!1),B()}function B(){(0,a.Y3)((()=>{r.modelValue?_.fromString(r.modelValue):(_.value="",(0,a.Y3)((()=>{k.value=!1})))}))}function M(){d.value||U(!E.value)}function F(){_.fromString(C.value)}function j(){const e=_.value;n(p.f_,e),n("change",e),r.validateEvent&&(null==i||i.validate("change").catch((e=>(0,w.N)(e)))),U(!1),(0,a.Y3)((()=>{const e=new Rm({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});_.compare(e)||B()}))}function z(){U(!1),n(p.f_,null),n("change",null),null!==r.modelValue&&r.validateEvent&&(null==i||i.validate("change").catch((e=>(0,w.N)(e)))),B()}return(0,a.bv)((()=>{r.modelValue&&(C.value=R.value)})),(0,a.YP)((()=>r.modelValue),(e=>{e?e&&e!==_.value&&(S=!1,_.fromString(e)):k.value=!1})),(0,a.YP)((()=>R.value),(e=>{C.value=e,S&&n("activeChange",e),S=!0})),(0,a.YP)((()=>_.value),(()=>{r.modelValue||k.value||(k.value=!0)})),(0,a.YP)((()=>E.value),(()=>{(0,a.Y3)((()=>{var e,t,n;null==(e=g.value)||e.update(),null==(t=m.value)||t.update(),null==(n=v.value)||n.update()}))})),(0,a.JJ)(mm,{currentColor:R}),t({color:_}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(ho),{ref_key:"popper",ref:b,visible:E.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[(0,l.SU)(s).be("picker","panel"),(0,l.SU)(s).b("dropdown"),e.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${(0,l.SU)(s).namespace.value}-zoom-in-top`,persistent:""},{content:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(s).be("dropdown","main-wrapper"))},[(0,a.Wm)(pm,{ref_key:"hue",ref:g,class:"hue-slider",color:(0,l.SU)(_),vertical:""},null,8,["color"]),(0,a.Wm)(Mm,{ref:"svPanel",color:(0,l.SU)(_)},null,8,["color"])],2),e.showAlpha?((0,a.wg)(),(0,a.j4)(um,{key:0,ref_key:"alpha",ref:v,color:(0,l.SU)(_)},null,8,["color"])):(0,a.kq)("v-if",!0),e.predefine?((0,a.wg)(),(0,a.j4)(Pm,{key:1,ref:"predefine",color:(0,l.SU)(_),colors:e.predefine},null,8,["color","colors"])):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(s).be("dropdown","btns"))},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(s).be("dropdown","value"))},[(0,a.Wm)((0,l.SU)(le.EZ),{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),"validate-event":!1,size:"small",onKeyup:(0,A.D2)(F,["enter"]),onBlur:F},null,8,["modelValue","onKeyup"])],2),(0,a.Wm)((0,l.SU)(ss.mi),{class:(0,c.C_)((0,l.SU)(s).be("dropdown","link-btn")),text:"",size:"small",onClick:z},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(o)("el.colorpicker.clear")),1)])),_:1},8,["class"]),(0,a.Wm)((0,l.SU)(ss.mi),{plain:"",size:"small",class:(0,c.C_)((0,l.SU)(s).be("dropdown","btn")),onClick:j},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(o)("el.colorpicker.confirm")),1)])),_:1},8,["class"])],2)])),[[(0,l.SU)(ng),L]])])),default:(0,a.w5)((()=>[(0,a._)("div",{id:(0,l.SU)(h),class:(0,c.C_)((0,l.SU)(N)),role:"button","aria-label":(0,l.SU)(x),"aria-labelledby":(0,l.SU)(O),"aria-description":(0,l.SU)(o)("el.colorpicker.description",{color:e.modelValue||""}),tabindex:e.tabindex,onKeydown:(0,A.D2)(M,["enter"])},[(0,l.SU)(d)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(s).be("picker","mask"))},null,2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(s).be("picker","trigger")),onClick:M},[(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(s).be("picker","color"),(0,l.SU)(s).is("alpha",e.showAlpha)])},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(s).be("picker","color-inner")),style:(0,c.j5)({backgroundColor:(0,l.SU)(I)})},[(0,a.wy)((0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)([(0,l.SU)(s).be("picker","icon"),(0,l.SU)(s).is("icon-arrow-down")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.K5e))])),_:1},8,["class"]),[[A.F8,e.modelValue||k.value]]),e.modelValue||k.value?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)([(0,l.SU)(s).be("picker","empty"),(0,l.SU)(s).is("icon-close")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.x8P))])),_:1},8,["class"]))],6)],2)],2)],42,Fm)])),_:1},8,["visible","popper-class","transition"]))}});var $m=(0,m.Z)(zm,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const Vm=(0,C.nz)($m),Hm=(0,d.o8)({a11y:{type:Boolean,default:!0},locale:{type:(0,d.Cq)(Object)},size:Th.Pp,button:{type:(0,d.Cq)(Object)},experimentalFeatures:{type:(0,d.Cq)(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:(0,d.Cq)(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),Km={},qm=(0,a.aZ)({name:"ElConfigProvider",props:Hm,setup(e,{slots:t}){(0,a.YP)((()=>e.message),(e=>{Object.assign(Km,null!=e?e:{})}),{immediate:!0,deep:!0});const n=(0,s.AR)(e);return()=>(0,a.WI)(t,"default",{config:null==n?void 0:n.value})}}),Wm=(0,C.nz)(qm),Ym=(0,a.aZ)({name:"ElContainer"}),Gm=(0,a.aZ)({...Ym,props:{direction:{type:String}},setup(e){const t=e,n=(0,a.Rr)(),r=(0,y.s3)("container"),o=(0,a.Fl)((()=>{if("vertical"===t.direction)return!0;if("horizontal"===t.direction)return!1;if(n&&n.default){const e=n.default();return e.some((e=>{const t=e.type.name;return"ElHeader"===t||"ElFooter"===t}))}return!1}));return(e,t)=>((0,a.wg)(),(0,a.iD)("section",{class:(0,c.C_)([(0,l.SU)(r).b(),(0,l.SU)(r).is("vertical",(0,l.SU)(o))])},[(0,a.WI)(e.$slots,"default")],2))}});var Zm=(0,m.Z)(Gm,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const Jm=(0,a.aZ)({name:"ElAside"}),Qm=(0,a.aZ)({...Jm,props:{width:{type:String,default:null}},setup(e){const t=e,n=(0,y.s3)("aside"),r=(0,a.Fl)((()=>t.width?n.cssVarBlock({width:t.width}):{}));return(e,t)=>((0,a.wg)(),(0,a.iD)("aside",{class:(0,c.C_)((0,l.SU)(n).b()),style:(0,c.j5)((0,l.SU)(r))},[(0,a.WI)(e.$slots,"default")],6))}});var Xm=(0,m.Z)(Qm,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const ey=(0,a.aZ)({name:"ElFooter"}),ty=(0,a.aZ)({...ey,props:{height:{type:String,default:null}},setup(e){const t=e,n=(0,y.s3)("footer"),r=(0,a.Fl)((()=>t.height?n.cssVarBlock({height:t.height}):{}));return(e,t)=>((0,a.wg)(),(0,a.iD)("footer",{class:(0,c.C_)((0,l.SU)(n).b()),style:(0,c.j5)((0,l.SU)(r))},[(0,a.WI)(e.$slots,"default")],6))}});var ny=(0,m.Z)(ty,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const ry=(0,a.aZ)({name:"ElHeader"}),oy=(0,a.aZ)({...ry,props:{height:{type:String,default:null}},setup(e){const t=e,n=(0,y.s3)("header"),r=(0,a.Fl)((()=>t.height?n.cssVarBlock({height:t.height}):{}));return(e,t)=>((0,a.wg)(),(0,a.iD)("header",{class:(0,c.C_)((0,l.SU)(n).b()),style:(0,c.j5)((0,l.SU)(r))},[(0,a.WI)(e.$slots,"default")],6))}});var sy=(0,m.Z)(oy,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const iy=(0,a.aZ)({name:"ElMain"}),ay=(0,a.aZ)({...iy,setup(e){const t=(0,y.s3)("main");return(e,n)=>((0,a.wg)(),(0,a.iD)("main",{class:(0,c.C_)((0,l.SU)(t).b())},[(0,a.WI)(e.$slots,"default")],2))}});var ly=(0,m.Z)(ay,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const cy=(0,C.nz)(Zm,{Aside:Xm,Footer:ny,Header:sy,Main:ly}),uy=(0,C.dp)(Xm),dy=(0,C.dp)(ny),hy=(0,C.dp)(sy),py=(0,C.dp)(ly);var fy=n(285),gy=n(8734),my=n(5183),yy=n(172),vy=n(2997),wy=n(9212),by=n(7412);const Sy=Symbol(),_y=(0,d.o8)({type:{type:(0,d.Cq)(String),default:"date"}}),Ey=["date","dates","year","month","week","range"],ky=(0,d.o8)({disabledDate:{type:(0,d.Cq)(Function)},date:{type:(0,d.Cq)(Object),required:!0},minDate:{type:(0,d.Cq)(Object)},maxDate:{type:(0,d.Cq)(Object)},parsedValue:{type:(0,d.Cq)([Object,Array])},rangeState:{type:(0,d.Cq)(Object),default:()=>({endDate:null,selecting:!1})}}),Cy=(0,d.o8)({type:{type:(0,d.Cq)(String),required:!0,values:Es}}),Iy=(0,d.o8)({unlinkPanels:Boolean,parsedValue:{type:(0,d.Cq)(Array)}}),Ay=e=>({type:String,values:Ey,default:e}),Ty=(0,d.o8)({...Cy,parsedValue:{type:(0,d.Cq)([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Ry=(0,d.o8)({...ky,cellClassName:{type:(0,d.Cq)(Function)},showWeekNumber:Boolean,selectionMode:Ay("date")}),xy=e=>{if(!(0,c.kJ)(e))return!1;const[t,n]=e;return is.isDayjs(t)&&is.isDayjs(n)&&t.isSameOrBefore(n)},Oy=(e,{lang:t,unit:n,unlinkPanels:r})=>{let o;if((0,c.kJ)(e)){let[o,s]=e.map((e=>is(e).locale(t)));return r||(s=o.add(1,n)),[o,s]}return o=e?is(e):is(),o=o.locale(t),[o,o.add(1,n)]},Ny=(e,t,{columnIndexOffset:n,startDate:r,nextEndDate:o,now:s,unit:i,relativeDateGetter:a,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<e.row;u++){const d=t[u];for(let t=0;t<e.column;t++){let c=d[t+n];c||(c={row:u,column:t,type:"normal",inRange:!1,start:!1,end:!1});const h=u*e.column+t,p=a(h);c.dayjs=p,c.date=p.toDate(),c.timestamp=p.valueOf(),c.type="normal",c.inRange=!!(r&&p.isSameOrAfter(r,i)&&o&&p.isSameOrBefore(o,i))||!!(r&&p.isSameOrBefore(r,i)&&o&&p.isSameOrAfter(o,i)),(null==r?void 0:r.isSameOrAfter(o))?(c.start=!!o&&p.isSame(o,i),c.end=r&&p.isSame(r,i)):(c.start=!!r&&p.isSame(r,i),c.end=!!o&&p.isSame(o,i));const f=p.isSame(s,i);f&&(c.type="today"),null==l||l(c,{rowIndex:u,columnIndex:t}),d[t+n]=c}null==c||c(d)}},Py=(0,d.o8)({cell:{type:(0,d.Cq)(Object)}});var Dy=(0,a.aZ)({name:"ElDatePickerCell",props:Py,setup(e){const t=(0,y.s3)("date-table-cell"),{slots:n}=(0,a.f3)(Sy);return()=>{const{cell:r}=e;if(n.default){const e=n.default(r).filter((e=>-2!==e.patchFlag&&"Symbol(Comment)"!==e.type.toString()));if(e.length)return e}return(0,a.Wm)("div",{class:t.b()},[(0,a.Wm)("span",{class:t.e("text")},[null==r?void 0:r.text])])}}});const Uy=["aria-label","onMousedown"],Ly={key:0,scope:"col"},By=["aria-label"],My=["aria-current","aria-selected","tabindex"],Fy=(0,a.aZ)({__name:"basic-date-table",props:Ry,emits:["changerange","pick","select"],setup(e,{expose:t,emit:n}){const r=e,o=(0,y.s3)("date-table"),{t:s,lang:i}=(0,_s.bU)(),u=(0,l.iH)(),d=(0,l.iH)(),h=(0,l.iH)(),p=(0,l.iH)(),f=(0,l.iH)([[],[],[],[],[],[]]);let g=!1;const m=r.date.$locale().weekStart||7,v=r.date.locale("en").localeData().weekdaysShort().map((e=>e.toLowerCase())),w=(0,a.Fl)((()=>m>3?7-m:-m)),b=(0,a.Fl)((()=>{const e=r.date.startOf("month");return e.subtract(e.day()||7,"day")})),S=(0,a.Fl)((()=>v.concat(v).slice(m,m+7))),_=(0,a.Fl)((()=>dp(R.value).some((e=>e.isCurrent)))),E=(0,a.Fl)((()=>{const e=r.date.startOf("month"),t=e.day()||7,n=e.daysInMonth(),o=e.subtract(1,"month").daysInMonth();return{startOfMonthDay:t,dateCountOfMonth:n,dateCountOfLastMonth:o}})),k=(0,a.Fl)((()=>"dates"===r.selectionMode?Mf(r.parsedValue):[])),C=(e,{count:t,rowIndex:n,columnIndex:r})=>{const{startOfMonthDay:o,dateCountOfMonth:s,dateCountOfLastMonth:i}=(0,l.SU)(E),a=(0,l.SU)(w);if(!(n>=0&&n<=1))return t<=s?e.text=t:(e.text=t-s,e.type="next-month"),!0;{const s=o+a<0?7+o+a:o+a;if(r+7*n>=s)return e.text=t,!0;e.text=i-(s-r%7)+1+7*n,e.type="prev-month"}return!1},I=(e,{columnIndex:t,rowIndex:n},o)=>{const{disabledDate:s,cellClassName:i}=r,a=(0,l.SU)(k),c=C(e,{count:o,rowIndex:n,columnIndex:t}),u=e.dayjs.toDate();return e.selected=a.find((t=>t.valueOf()===e.dayjs.valueOf())),e.isSelected=!!e.selected,e.isCurrent=N(e),e.disabled=null==s?void 0:s(u),e.customClass=null==i?void 0:i(u),c},T=e=>{if("week"===r.selectionMode){const[t,n]=r.showWeekNumber?[1,7]:[0,6],o=$(e[t+1]);e[t].inRange=o,e[t].start=o,e[n].inRange=o,e[n].end=o}},R=(0,a.Fl)((()=>{const{minDate:e,maxDate:t,rangeState:n,showWeekNumber:o}=r,s=w.value,a=f.value,c="day";let u=1;if(o)for(let r=0;r<6;r++)a[r][0]||(a[r][0]={type:"week",text:b.value.add(7*r+1,c).week()});return Ny({row:6,column:7},a,{startDate:e,columnIndexOffset:o?1:0,nextEndDate:n.endDate||t||n.selecting&&e||null,now:is().locale((0,l.SU)(i)).startOf(c),unit:c,relativeDateGetter:e=>b.value.add(e-s,c),setCellMetadata:(...e)=>{I(...e,u)&&(u+=1)},setRowMetadata:T}),a}));(0,a.YP)((()=>r.date),(async()=>{var e,t;(null==(e=u.value)?void 0:e.contains(document.activeElement))&&(await(0,a.Y3)(),null==(t=d.value)||t.focus())}));const x=async()=>{var e;null==(e=d.value)||e.focus()},O=(e="")=>["normal","today"].includes(e),N=e=>"date"===r.selectionMode&&O(e.type)&&P(e,r.parsedValue),P=(e,t)=>!!t&&is(t).locale(i.value).isSame(r.date.date(Number(e.text)),"day"),D=e=>{const t=[];return O(e.type)&&!e.disabled?(t.push("available"),"today"===e.type&&t.push("today")):t.push(e.type),N(e)&&t.push("current"),e.inRange&&(O(e.type)||"week"===r.selectionMode)&&(t.push("in-range"),e.start&&t.push("start-date"),e.end&&t.push("end-date")),e.disabled&&t.push("disabled"),e.selected&&t.push("selected"),e.customClass&&t.push(e.customClass),t.join(" ")},U=(e,t)=>{const n=7*e+(t-(r.showWeekNumber?1:0))-w.value;return b.value.add(n,"day")},L=e=>{var t;if(!r.rangeState.selecting)return;let o=e.target;if("SPAN"===o.tagName&&(o=null==(t=o.parentNode)?void 0:t.parentNode),"DIV"===o.tagName&&(o=o.parentNode),"TD"!==o.tagName)return;const s=o.parentNode.rowIndex-1,i=o.cellIndex;R.value[s][i].disabled||s===h.value&&i===p.value||(h.value=s,p.value=i,n("changerange",{selecting:!0,endDate:U(s,i)}))},B=e=>!_.value&&1===(null==e?void 0:e.text)&&"normal"===e.type||e.isCurrent,M=e=>{g||_.value||"date"!==r.selectionMode||z(e,!0)},F=e=>{const t=e.target.closest("td");t&&(g=!0)},j=e=>{const t=e.target.closest("td");t&&(g=!1)},z=(e,t=!1)=>{const o=e.target.closest("td");if(!o)return;const s=o.parentNode.rowIndex-1,i=o.cellIndex,a=R.value[s][i];if(a.disabled||"week"===a.type)return;const l=U(s,i);if("range"===r.selectionMode)r.rangeState.selecting&&r.minDate?(l>=r.minDate?n("pick",{minDate:r.minDate,maxDate:l}):n("pick",{minDate:l,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:l,maxDate:null}),n("select",!0));else if("date"===r.selectionMode)n("pick",l,t);else if("week"===r.selectionMode){const e=l.week(),t=`${l.year()}w${e}`;n("pick",{year:l.year(),week:e,value:t,date:l.startOf("week")})}else if("dates"===r.selectionMode){const e=a.selected?Mf(r.parsedValue).filter((e=>(null==e?void 0:e.valueOf())!==l.valueOf())):Mf(r.parsedValue).concat([l]);n("pick",e)}},$=e=>{if("week"!==r.selectionMode)return!1;let t=r.date.startOf("day");if("prev-month"===e.type&&(t=t.subtract(1,"month")),"next-month"===e.type&&(t=t.add(1,"month")),t=t.date(Number.parseInt(e.text,10)),r.parsedValue&&!Array.isArray(r.parsedValue)){const e=(r.parsedValue.day()-m+7)%7-1,n=r.parsedValue.subtract(e,"day");return n.isSame(t,"day")}return!1};return t({focus:x}),(e,t)=>((0,a.wg)(),(0,a.iD)("table",{role:"grid","aria-label":(0,l.SU)(s)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:(0,c.C_)([(0,l.SU)(o).b(),{"is-week-mode":"week"===e.selectionMode}]),onClick:z,onMousemove:L,onMousedown:(0,A.iM)(F,["prevent"]),onMouseup:j},[(0,a._)("tbody",{ref_key:"tbodyRef",ref:u},[(0,a._)("tr",null,[e.showWeekNumber?((0,a.wg)(),(0,a.iD)("th",Ly,(0,c.zw)((0,l.SU)(s)("el.datepicker.week")),1)):(0,a.kq)("v-if",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(S),((e,t)=>((0,a.wg)(),(0,a.iD)("th",{key:t,scope:"col","aria-label":(0,l.SU)(s)("el.datepicker.weeksFull."+e)},(0,c.zw)((0,l.SU)(s)("el.datepicker.weeks."+e)),9,By)))),128))]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(R),((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t,class:(0,c.C_)([(0,l.SU)(o).e("row"),{current:$(e[1])}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,((e,n)=>((0,a.wg)(),(0,a.iD)("td",{key:`${t}.${n}`,ref_for:!0,ref:t=>B(e)&&(d.value=t),class:(0,c.C_)(D(e)),"aria-current":e.isCurrent?"date":void 0,"aria-selected":e.isCurrent,tabindex:B(e)?0:-1,onFocus:M},[(0,a.Wm)((0,l.SU)(Dy),{cell:e},null,8,["cell"])],42,My)))),128))],2)))),128))],512)],42,Uy))}});var jy=(0,m.Z)(Fy,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const zy=(0,d.o8)({...ky,selectionMode:Ay("month")}),$y=["aria-label"],Vy=["aria-selected","aria-label","tabindex","onKeydown"],Hy={class:"cell"},Ky=(0,a.aZ)({__name:"basic-month-table",props:zy,emits:["changerange","pick","select"],setup(e,{expose:t,emit:n}){const r=e,o=(e,t,n)=>{const r=is().locale(n).startOf("month").month(t).year(e),o=r.daysInMonth();return ls(o).map((e=>r.add(e,"day").toDate()))},s=(0,y.s3)("month-table"),{t:i,lang:u}=(0,_s.bU)(),d=(0,l.iH)(),h=(0,l.iH)(),p=(0,l.iH)(r.date.locale("en").localeData().monthsShort().map((e=>e.toLowerCase()))),f=(0,l.iH)([[],[],[]]),g=(0,l.iH)(),m=(0,l.iH)(),w=(0,a.Fl)((()=>{var e,t;const n=f.value,o=is().locale(u.value).startOf("month");for(let s=0;s<3;s++){const i=n[s];for(let n=0;n<4;n++){const a=i[n]||(i[n]={row:s,column:n,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});a.type="normal";const l=4*s+n,c=r.date.startOf("year").month(l),u=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;a.inRange=!!(r.minDate&&c.isSameOrAfter(r.minDate,"month")&&u&&c.isSameOrBefore(u,"month"))||!!(r.minDate&&c.isSameOrBefore(r.minDate,"month")&&u&&c.isSameOrAfter(u,"month")),(null==(e=r.minDate)?void 0:e.isSameOrAfter(u))?(a.start=!(!u||!c.isSame(u,"month")),a.end=r.minDate&&c.isSame(r.minDate,"month")):(a.start=!(!r.minDate||!c.isSame(r.minDate,"month")),a.end=!(!u||!c.isSame(u,"month")));const d=o.isSame(c);d&&(a.type="today"),a.text=l,a.disabled=(null==(t=r.disabledDate)?void 0:t.call(r,c.toDate()))||!1}}return n})),b=()=>{var e;null==(e=h.value)||e.focus()},S=e=>{const t={},n=r.date.year(),s=new Date,i=e.text;return t.disabled=!!r.disabledDate&&o(n,i,u.value).every(r.disabledDate),t.current=Mf(r.parsedValue).findIndex((e=>is.isDayjs(e)&&e.year()===n&&e.month()===i))>=0,t.today=s.getFullYear()===n&&s.getMonth()===i,e.inRange&&(t["in-range"]=!0,e.start&&(t["start-date"]=!0),e.end&&(t["end-date"]=!0)),t},_=e=>{const t=r.date.year(),n=e.text;return Mf(r.date).findIndex((e=>e.year()===t&&e.month()===n))>=0},E=e=>{var t;if(!r.rangeState.selecting)return;let o=e.target;if("A"===o.tagName&&(o=null==(t=o.parentNode)?void 0:t.parentNode),"DIV"===o.tagName&&(o=o.parentNode),"TD"!==o.tagName)return;const s=o.parentNode.rowIndex,i=o.cellIndex;w.value[s][i].disabled||s===g.value&&i===m.value||(g.value=s,m.value=i,n("changerange",{selecting:!0,endDate:r.date.startOf("year").month(4*s+i)}))},k=e=>{var t;const o=null==(t=e.target)?void 0:t.closest("td");if("TD"!==(null==o?void 0:o.tagName))return;if((0,v.pv)(o,"disabled"))return;const s=o.cellIndex,i=o.parentNode.rowIndex,a=4*i+s,l=r.date.startOf("year").month(a);"range"===r.selectionMode?r.rangeState.selecting?(r.minDate&&l>=r.minDate?n("pick",{minDate:r.minDate,maxDate:l}):n("pick",{minDate:l,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:l,maxDate:null}),n("select",!0)):n("pick",a)};return(0,a.YP)((()=>r.date),(async()=>{var e,t;(null==(e=d.value)?void 0:e.contains(document.activeElement))&&(await(0,a.Y3)(),null==(t=h.value)||t.focus())})),t({focus:b}),(e,t)=>((0,a.wg)(),(0,a.iD)("table",{role:"grid","aria-label":(0,l.SU)(i)("el.datepicker.monthTablePrompt"),class:(0,c.C_)((0,l.SU)(s).b()),onClick:k,onMousemove:E},[(0,a._)("tbody",{ref_key:"tbodyRef",ref:d},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(w),((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,((e,t)=>((0,a.wg)(),(0,a.iD)("td",{key:t,ref_for:!0,ref:t=>_(e)&&(h.value=t),class:(0,c.C_)(S(e)),"aria-selected":`${_(e)}`,"aria-label":(0,l.SU)(i)("el.datepicker.month"+(+e.text+1)),tabindex:_(e)?0:-1,onKeydown:[(0,A.D2)((0,A.iM)(k,["prevent","stop"]),["space"]),(0,A.D2)((0,A.iM)(k,["prevent","stop"]),["enter"])]},[(0,a._)("div",null,[(0,a._)("span",Hy,(0,c.zw)((0,l.SU)(i)("el.datepicker.months."+p.value[e.text])),1)])],42,Vy)))),128))])))),128))],512)],42,$y))}});var qy=(0,m.Z)(Ky,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date:Wy,disabledDate:Yy,parsedValue:Gy}=ky,Zy=(0,d.o8)({date:Wy,disabledDate:Yy,parsedValue:Gy}),Jy=["aria-label"],Qy=["aria-selected","tabindex","onKeydown"],Xy={class:"cell"},ev={key:1},tv=(0,a.aZ)({__name:"basic-year-table",props:Zy,emits:["pick"],setup(e,{expose:t,emit:n}){const r=e,o=(e,t)=>{const n=is(String(e)).locale(t).startOf("year"),r=n.endOf("year"),o=r.dayOfYear();return ls(o).map((e=>n.add(e,"day").toDate()))},s=(0,y.s3)("year-table"),{t:i,lang:u}=(0,_s.bU)(),d=(0,l.iH)(),h=(0,l.iH)(),p=(0,a.Fl)((()=>10*Math.floor(r.date.year()/10))),f=()=>{var e;null==(e=h.value)||e.focus()},g=e=>{const t={},n=is().locale(u.value);return t.disabled=!!r.disabledDate&&o(e,u.value).every(r.disabledDate),t.current=Mf(r.parsedValue).findIndex((t=>t.year()===e))>=0,t.today=n.year()===e,t},m=e=>e===p.value&&r.date.year()<p.value&&r.date.year()>p.value+9||Mf(r.date).findIndex((t=>t.year()===e))>=0,w=e=>{const t=e.target,r=t.closest("td");if(r&&r.textContent){if((0,v.pv)(r,"disabled"))return;const e=r.textContent||r.innerText;n("pick",Number(e))}};return(0,a.YP)((()=>r.date),(async()=>{var e,t;(null==(e=d.value)?void 0:e.contains(document.activeElement))&&(await(0,a.Y3)(),null==(t=h.value)||t.focus())})),t({focus:f}),(e,t)=>((0,a.wg)(),(0,a.iD)("table",{role:"grid","aria-label":(0,l.SU)(i)("el.datepicker.yearTablePrompt"),class:(0,c.C_)((0,l.SU)(s).b()),onClick:w},[(0,a._)("tbody",{ref_key:"tbodyRef",ref:d},[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(3,((e,t)=>(0,a._)("tr",{key:t},[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(4,((e,n)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t+"_"+n},[4*t+n<10?((0,a.wg)(),(0,a.iD)("td",{key:0,ref_for:!0,ref:e=>m((0,l.SU)(p)+4*t+n)&&(h.value=e),class:(0,c.C_)(["available",g((0,l.SU)(p)+4*t+n)]),"aria-selected":`${m((0,l.SU)(p)+4*t+n)}`,tabindex:m((0,l.SU)(p)+4*t+n)?0:-1,onKeydown:[(0,A.D2)((0,A.iM)(w,["prevent","stop"]),["space"]),(0,A.D2)((0,A.iM)(w,["prevent","stop"]),["enter"])]},[(0,a._)("span",Xy,(0,c.zw)((0,l.SU)(p)+4*t+n),1)],42,Qy)):((0,a.wg)(),(0,a.iD)("td",ev))],64)))),64))]))),64))],512)],10,Jy))}});var nv=(0,m.Z)(tv,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const rv=(0,d.o8)({disabledHours:{type:(0,d.Cq)(Function)},disabledMinutes:{type:(0,d.Cq)(Function)},disabledSeconds:{type:(0,d.Cq)(Function)}}),ov=(0,d.o8)({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),sv=(0,d.o8)({...ov,datetimeRole:String,parsedValue:{type:(0,d.Cq)(Object)}}),iv=({getAvailableHours:e,getAvailableMinutes:t,getAvailableSeconds:n})=>{const r=(r,o,s,i)=>{const a={hour:e,minute:t,second:n};let l=r;return["hour","minute","second"].forEach((e=>{if(a[e]){let t;const n=a[e];switch(e){case"minute":t=n(l.hour(),o,i);break;case"second":t=n(l.hour(),l.minute(),o,i);break;default:t=n(o,i);break}if((null==t?void 0:t.length)&&!t.includes(l[e]())){const n=s?0:t.length-1;l=l[e](t[n])}}})),l},o={},s=([e,t])=>{o[e]=t};return{timePickerOptions:o,getAvailableTime:r,onSetOption:s}},av=e=>{const t=(e,t)=>e||t,n=e=>!0!==e;return e.map(t).filter(n)},lv=(e,t,n)=>{const r=(t,n)=>gs(24,e&&(()=>null==e?void 0:e(t,n))),o=(e,n,r)=>gs(60,t&&(()=>null==t?void 0:t(e,n,r))),s=(e,t,r,o)=>gs(60,n&&(()=>null==n?void 0:n(e,t,r,o)));return{getHoursList:r,getMinutesList:o,getSecondsList:s}},cv=(e,t,n)=>{const{getHoursList:r,getMinutesList:o,getSecondsList:s}=lv(e,t,n),i=(e,t)=>av(r(e,t)),a=(e,t,n)=>av(o(e,t,n)),l=(e,t,n,r)=>av(s(e,t,n,r));return{getAvailableHours:i,getAvailableMinutes:a,getAvailableSeconds:l}},uv=e=>{const t=(0,l.iH)(e.parsedValue);return(0,a.YP)((()=>e.visible),(n=>{n||(t.value=e.parsedValue)})),t},dv=["hours","minutes","seconds"],hv="HH:mm:ss",pv="YYYY-MM-DD",fv={date:pv,dates:pv,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${pv} ${hv}`,monthrange:"YYYY-MM",daterange:pv,datetimerange:`${pv} ${hv}`},gv=(0,d.o8)({role:{type:String,required:!0},spinnerDate:{type:(0,d.Cq)(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:(0,d.Cq)(String),default:""},...rv}),mv=100,yv=600,vv={beforeMount(e,t){const n=t.value,{interval:r=mv,delay:o=yv}=(0,c.mf)(n)?{}:n;let s,i;const a=()=>(0,c.mf)(n)?n():n.handler(),l=()=>{i&&(clearTimeout(i),i=void 0),s&&(clearInterval(s),s=void 0)};e.addEventListener("mousedown",(e=>{0===e.button&&(l(),a(),document.addEventListener("mouseup",(()=>l()),{once:!0}),i=setTimeout((()=>{s=setInterval((()=>{a()}),r)}),o))}))}},wv=["onClick"],bv=["onMouseenter"],Sv=(0,a.aZ)({__name:"basic-time-spinner",props:gv,emits:["change","select-range","set-option"],setup(e,{emit:t}){const n=e,r=(0,y.s3)("time"),{getHoursList:o,getMinutesList:s,getSecondsList:i}=lv(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let u=!1;const d=(0,l.iH)(),h=(0,l.iH)(),p=(0,l.iH)(),f=(0,l.iH)(),g={hours:h,minutes:p,seconds:f},m=(0,a.Fl)((()=>n.showSeconds?dv:dv.slice(0,2))),v=(0,a.Fl)((()=>{const{spinnerDate:e}=n,t=e.hour(),r=e.minute(),o=e.second();return{hours:t,minutes:r,seconds:o}})),w=(0,a.Fl)((()=>{const{hours:e,minutes:t}=(0,l.SU)(v);return{hours:o(n.role),minutes:s(e,n.role),seconds:i(e,t,n.role)}})),b=(0,a.Fl)((()=>{const{hours:e,minutes:t,seconds:n}=(0,l.SU)(v);return{hours:as(e,23),minutes:as(t,59),seconds:as(n,59)}})),S=ie((e=>{u=!1,k(e)}),200),_=e=>{const t=!!n.amPmMode;if(!t)return"";const r="A"===n.amPmMode;let o=e<12?" am":" pm";return r&&(o=o.toUpperCase()),o},E=e=>{let n;switch(e){case"hours":n=[0,2];break;case"minutes":n=[3,5];break;case"seconds":n=[6,8];break}const[r,o]=n;t("select-range",r,o),d.value=e},k=e=>{A(e,(0,l.SU)(v)[e])},C=()=>{k("hours"),k("minutes"),k("seconds")},I=e=>e.querySelector(`.${r.namespace.value}-scrollbar__wrap`),A=(e,t)=>{if(n.arrowControl)return;const r=(0,l.SU)(g[e]);r&&r.$el&&(I(r.$el).scrollTop=Math.max(0,t*R(e)))},R=e=>{const t=(0,l.SU)(g[e]);return(null==t?void 0:t.$el.querySelector("li").offsetHeight)||0},x=()=>{N(1)},O=()=>{N(-1)},N=e=>{d.value||E("hours");const t=d.value,n=(0,l.SU)(v)[t],r="hours"===d.value?24:60,o=P(t,n,e,r);D(t,o),A(t,o),(0,a.Y3)((()=>E(t)))},P=(e,t,n,r)=>{let o=(t+n+r)%r;const s=(0,l.SU)(w)[e];while(s[o]&&o!==t)o=(o+n+r)%r;return o},D=(e,r)=>{const o=(0,l.SU)(w)[e],s=o[r];if(s)return;const{hours:i,minutes:a,seconds:c}=(0,l.SU)(v);let u;switch(e){case"hours":u=n.spinnerDate.hour(r).minute(a).second(c);break;case"minutes":u=n.spinnerDate.hour(i).minute(r).second(c);break;case"seconds":u=n.spinnerDate.hour(i).minute(a).second(r);break}t("change",u)},U=(e,{value:t,disabled:n})=>{n||(D(e,t),E(e),A(e,t))},L=e=>{u=!0,S(e);const t=Math.min(Math.round((I((0,l.SU)(g[e]).$el).scrollTop-(.5*B(e)-10)/R(e)+3)/R(e)),"hours"===e?23:59);D(e,t)},B=e=>(0,l.SU)(g[e]).$el.offsetHeight,M=()=>{const e=e=>{const t=(0,l.SU)(g[e]);t&&t.$el&&(I(t.$el).onscroll=()=>{L(e)})};e("hours"),e("minutes"),e("seconds")};(0,a.bv)((()=>{(0,a.Y3)((()=>{!n.arrowControl&&M(),C(),"start"===n.role&&E("hours")}))}));const F=(e,t)=>{g[t].value=e};return t("set-option",[`${n.role}_scrollDown`,N]),t("set-option",[`${n.role}_emitSelectRange`,E]),(0,a.YP)((()=>n.spinnerDate),(()=>{u||C()})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(r).b("spinner"),{"has-seconds":e.showSeconds}])},[e.arrowControl?(0,a.kq)("v-if",!0):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)((0,l.SU)(m),(t=>((0,a.wg)(),(0,a.j4)((0,l.SU)(Ie),{key:t,ref_for:!0,ref:e=>F(e,t),class:(0,c.C_)((0,l.SU)(r).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":(0,l.SU)(r).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:e=>E(t),onMousemove:e=>k(t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(w)[t],((n,o)=>((0,a.wg)(),(0,a.iD)("li",{key:o,class:(0,c.C_)([(0,l.SU)(r).be("spinner","item"),(0,l.SU)(r).is("active",o===(0,l.SU)(v)[t]),(0,l.SU)(r).is("disabled",n)]),onClick:e=>U(t,{value:o,disabled:n})},["hours"===t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,c.zw)(("0"+(e.amPmMode?o%12||12:o)).slice(-2))+(0,c.zw)(_(o)),1)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,c.zw)(("0"+o).slice(-2)),1)],64))],10,wv)))),128))])),_:2},1032,["class","view-class","onMouseenter","onMousemove"])))),128)),e.arrowControl?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)((0,l.SU)(m),(t=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:(0,c.C_)([(0,l.SU)(r).be("spinner","wrapper"),(0,l.SU)(r).is("arrow")]),onMouseenter:e=>E(t)},[(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{class:(0,c.C_)(["arrow-up",(0,l.SU)(r).be("spinner","arrow")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.a2Z))])),_:1},8,["class"])),[[(0,l.SU)(vv),O]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{class:(0,c.C_)(["arrow-down",(0,l.SU)(r).be("spinner","arrow")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.K5e))])),_:1},8,["class"])),[[(0,l.SU)(vv),x]]),(0,a._)("ul",{class:(0,c.C_)((0,l.SU)(r).be("spinner","list"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(b)[t],((n,o)=>((0,a.wg)(),(0,a.iD)("li",{key:o,class:(0,c.C_)([(0,l.SU)(r).be("spinner","item"),(0,l.SU)(r).is("active",n===(0,l.SU)(v)[t]),(0,l.SU)(r).is("disabled",(0,l.SU)(w)[t][n])])},["number"===typeof n?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},["hours"===t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,c.zw)(("0"+(e.amPmMode?n%12||12:n)).slice(-2))+(0,c.zw)(_(n)),1)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,c.zw)(("0"+n).slice(-2)),1)],64))],64)):(0,a.kq)("v-if",!0)],2)))),128))],2)],42,bv)))),128)):(0,a.kq)("v-if",!0)],2))}});var _v=(0,m.Z)(Sv,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const Ev=(0,a.aZ)({__name:"panel-time-pick",props:sv,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const n=e,r=(0,a.f3)("EP_PICKER_BASE"),{arrowControl:o,disabledHours:s,disabledMinutes:i,disabledSeconds:u,defaultValue:d}=r.props,{getAvailableHours:h,getAvailableMinutes:p,getAvailableSeconds:f}=cv(s,i,u),g=(0,y.s3)("time"),{t:m,lang:v}=(0,_s.bU)(),w=(0,l.iH)([0,2]),b=uv(n),S=(0,a.Fl)((()=>(0,wr.o8)(n.actualVisible)?`${g.namespace.value}-zoom-in-top`:"")),_=(0,a.Fl)((()=>n.format.includes("ss"))),E=(0,a.Fl)((()=>n.format.includes("A")?"A":n.format.includes("a")?"a":"")),k=e=>{const t=is(e).locale(v.value),n=U(t);return t.isSame(n)},C=()=>{t("pick",b.value,!1)},I=(e=!1,r=!1)=>{r||t("pick",n.parsedValue,e)},T=e=>{if(!n.visible)return;const r=U(e).millisecond(0);t("pick",r,!0)},R=(e,n)=>{t("select-range",e,n),w.value=[e,n]},x=e=>{const t=[0,3].concat(_.value?[6]:[]),n=["hours","minutes"].concat(_.value?["seconds"]:[]),r=t.indexOf(w.value[0]),o=(r+e+t.length)%t.length;N["start_emitSelectRange"](n[o])},O=e=>{const t=e.code,{left:n,right:r,up:o,down:s}=Jn.n;if([n,r].includes(t)){const r=t===n?-1:1;return x(r),void e.preventDefault()}if([o,s].includes(t)){const n=t===o?-1:1;return N["start_scrollDown"](n),void e.preventDefault()}},{timePickerOptions:N,onSetOption:P,getAvailableTime:D}=iv({getAvailableHours:h,getAvailableMinutes:p,getAvailableSeconds:f}),U=e=>D(e,n.datetimeRole||"",!0),L=e=>e?is(e,n.format).locale(v.value):null,B=e=>e?e.format(n.format):null,M=()=>is(d).locale(v.value);return t("set-picker-option",["isValidValue",k]),t("set-picker-option",["formatToString",B]),t("set-picker-option",["parseUserInput",L]),t("set-picker-option",["handleKeydownInput",O]),t("set-picker-option",["getRangeAvailableTime",U]),t("set-picker-option",["getDefaultValue",M]),(e,t)=>((0,a.wg)(),(0,a.j4)(A.uT,{name:(0,l.SU)(S)},{default:(0,a.w5)((()=>[e.actualVisible||e.visible?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(g).b("panel"))},[(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(g).be("panel","content"),{"has-seconds":(0,l.SU)(_)}])},[(0,a.Wm)(_v,{ref:"spinner",role:e.datetimeRole||"start","arrow-control":(0,l.SU)(o),"show-seconds":(0,l.SU)(_),"am-pm-mode":(0,l.SU)(E),"spinner-date":e.parsedValue,"disabled-hours":(0,l.SU)(s),"disabled-minutes":(0,l.SU)(i),"disabled-seconds":(0,l.SU)(u),onChange:T,onSetOption:(0,l.SU)(P),onSelectRange:R},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(g).be("panel","footer"))},[(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(g).be("panel","btn"),"cancel"]),onClick:C},(0,c.zw)((0,l.SU)(m)("el.datepicker.cancel")),3),(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(g).be("panel","btn"),"confirm"]),onClick:t[0]||(t[0]=e=>I())},(0,c.zw)((0,l.SU)(m)("el.datepicker.confirm")),3)],2)],2)):(0,a.kq)("v-if",!0)])),_:1},8,["name"]))}});var kv=(0,m.Z)(Ev,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const Cv=["onClick"],Iv=["aria-label"],Av=["aria-label"],Tv=["aria-label"],Rv=["aria-label"],xv=(0,a.aZ)({__name:"panel-date-pick",props:Ty,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:t}){const n=e,r=(e,t,n)=>!0,o=(0,y.s3)("picker-panel"),s=(0,y.s3)("date-picker"),i=(0,a.l1)(),u=(0,a.Rr)(),{t:d,lang:h}=(0,_s.bU)(),p=(0,a.f3)("EP_PICKER_BASE"),f=(0,a.f3)(Ue),{shortcuts:g,disabledDate:m,cellClassName:v,defaultTime:w,arrowControl:b}=p.props,S=(0,l.Vh)(p.props,"defaultValue"),_=(0,l.iH)(),E=(0,l.iH)(is().locale(h.value)),k=(0,l.iH)(!1),C=(0,a.Fl)((()=>is(w).locale(h.value))),I=(0,a.Fl)((()=>E.value.month())),R=(0,a.Fl)((()=>E.value.year())),x=(0,l.iH)([]),O=(0,l.iH)(null),N=(0,l.iH)(null),P=e=>!(x.value.length>0)||r(e,x.value,n.format||"HH:mm:ss"),D=e=>!w||ee.value||k.value?Y.value?e.millisecond(0):e.startOf("day"):C.value.year(e.year()).month(e.month()).date(e.date()),U=(e,...n)=>{if(e)if((0,c.kJ)(e)){const r=e.map(D);t("pick",r,...n)}else t("pick",D(e),...n);else t("pick",e,...n);O.value=null,N.value=null,k.value=!1},L=(e,t)=>{if("date"===$.value){let r=n.parsedValue?n.parsedValue.year(e.year()).month(e.month()).date(e.date()):e;P(r)||(r=x.value[0][0].year(e.year()).month(e.month()).date(e.date())),E.value=r,U(r,Y.value||t)}else"week"===$.value?U(e.date):"dates"===$.value&&U(e,!0)},B=e=>{const t=e?"add":"subtract";E.value=E.value[t](1,"month"),ve("month")},M=e=>{const t=E.value,n=e?"add":"subtract";E.value="year"===F.value?t[n](10,"year"):t[n](1,"year"),ve("year")},F=(0,l.iH)("date"),j=(0,a.Fl)((()=>{const e=d("el.datepicker.year");if("year"===F.value){const t=10*Math.floor(R.value/10);return e?`${t} ${e} - ${t+9} ${e}`:`${t} - ${t+9}`}return`${R.value} ${e}`})),z=e=>{const n=(0,c.mf)(e.value)?e.value():e.value;n?U(is(n).locale(h.value)):e.onClick&&e.onClick({attrs:i,slots:u,emit:t})},$=(0,a.Fl)((()=>{const{type:e}=n;return["week","month","year","dates"].includes(e)?e:"date"})),V=(0,a.Fl)((()=>"date"===$.value?F.value:$.value)),H=(0,a.Fl)((()=>!!g.length)),K=async e=>{E.value=E.value.startOf("month").month(e),"month"===$.value?U(E.value,!1):(F.value="date",["month","year","date","week"].includes($.value)&&(U(E.value,!0),await(0,a.Y3)(),ge())),ve("month")},q=async e=>{"year"===$.value?(E.value=E.value.startOf("year").year(e),U(E.value,!1)):(E.value=E.value.year(e),F.value="month",["month","year","date","week"].includes($.value)&&(U(E.value,!0),await(0,a.Y3)(),ge())),ve("year")},W=async e=>{F.value=e,await(0,a.Y3)(),ge()},Y=(0,a.Fl)((()=>"datetime"===n.type||"datetimerange"===n.type)),G=(0,a.Fl)((()=>Y.value||"dates"===$.value)),Z=()=>{if("dates"===$.value)U(n.parsedValue);else{let e=n.parsedValue;if(!e){const t=is(w).locale(h.value),n=fe();e=t.year(n.year()).month(n.month()).date(n.date())}E.value=e,U(e)}},J=()=>{const e=is().locale(h.value),t=e.toDate();k.value=!0,m&&m(t)||!P(t)||(E.value=is().locale(h.value),U(E.value))},Q=(0,a.Fl)((()=>us(n.format))),X=(0,a.Fl)((()=>cs(n.format))),ee=(0,a.Fl)((()=>N.value?N.value:n.parsedValue||S.value?(n.parsedValue||E.value).format(Q.value):void 0)),te=(0,a.Fl)((()=>O.value?O.value:n.parsedValue||S.value?(n.parsedValue||E.value).format(X.value):void 0)),ne=(0,l.iH)(!1),re=()=>{ne.value=!0},oe=()=>{ne.value=!1},se=e=>({hour:e.hour(),minute:e.minute(),second:e.second(),year:e.year(),month:e.month(),date:e.date()}),ie=(e,t,r)=>{const{hour:o,minute:s,second:i}=se(e),a=n.parsedValue?n.parsedValue.hour(o).minute(s).second(i):e;E.value=a,U(E.value,!0),r||(ne.value=t)},ce=e=>{const t=is(e,Q.value).locale(h.value);if(t.isValid()&&P(t)){const{year:e,month:n,date:r}=se(E.value);E.value=t.year(e).month(n).date(r),N.value=null,ne.value=!1,U(E.value,!0)}},ue=e=>{const t=is(e,X.value).locale(h.value);if(t.isValid()){if(m&&m(t.toDate()))return;const{hour:e,minute:n,second:r}=se(E.value);E.value=t.hour(e).minute(n).second(r),O.value=null,U(E.value,!0)}},de=e=>is.isDayjs(e)&&e.isValid()&&(!m||!m(e.toDate())),he=e=>"dates"===$.value?e.map((e=>e.format(n.format))):e.format(n.format),pe=e=>is(e,n.format).locale(h.value),fe=()=>{const e=is(S.value).locale(h.value);if(!S.value){const e=C.value;return is().hour(e.hour()).minute(e.minute()).second(e.second()).locale(h.value)}return e},ge=async()=>{var e;["week","month","year","date"].includes($.value)&&(null==(e=_.value)||e.focus(),"week"===$.value&&ye(Jn.n.down))},me=e=>{const{code:t}=e,n=[Jn.n.up,Jn.n.down,Jn.n.left,Jn.n.right,Jn.n.home,Jn.n.end,Jn.n.pageUp,Jn.n.pageDown];n.includes(t)&&(ye(t),e.stopPropagation(),e.preventDefault()),[Jn.n.enter,Jn.n.space].includes(t)&&null===O.value&&null===N.value&&(e.preventDefault(),U(E.value,!1))},ye=e=>{var n;const{up:r,down:o,left:s,right:i,home:a,end:l,pageUp:u,pageDown:d}=Jn.n,p={year:{[r]:-4,[o]:4,[s]:-1,[i]:1,offset:(e,t)=>e.setFullYear(e.getFullYear()+t)},month:{[r]:-4,[o]:4,[s]:-1,[i]:1,offset:(e,t)=>e.setMonth(e.getMonth()+t)},week:{[r]:-1,[o]:1,[s]:-1,[i]:1,offset:(e,t)=>e.setDate(e.getDate()+7*t)},date:{[r]:-7,[o]:7,[s]:-1,[i]:1,[a]:e=>-e.getDay(),[l]:e=>6-e.getDay(),[u]:e=>-new Date(e.getFullYear(),e.getMonth(),0).getDate(),[d]:e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),offset:(e,t)=>e.setDate(e.getDate()+t)}},f=E.value.toDate();while(Math.abs(E.value.diff(f,"year",!0))<1){const r=p[V.value];if(!r)return;if(r.offset(f,(0,c.mf)(r[e])?r[e](f):null!=(n=r[e])?n:0),m&&m(f))break;const o=is(f).locale(h.value);E.value=o,t("pick",o,!0);break}},ve=e=>{t("panel-change",E.value.toDate(),e,F.value)};return(0,a.YP)((()=>$.value),(e=>{["month","year"].includes(e)?F.value=e:F.value="date"}),{immediate:!0}),(0,a.YP)((()=>F.value),(()=>{null==f||f.updatePopper()})),(0,a.YP)((()=>S.value),(e=>{e&&(E.value=fe())}),{immediate:!0}),(0,a.YP)((()=>n.parsedValue),(e=>{if(e){if("dates"===$.value)return;if(Array.isArray(e))return;E.value=e}else E.value=fe()}),{immediate:!0}),t("set-picker-option",["isValidValue",de]),t("set-picker-option",["formatToString",he]),t("set-picker-option",["parseUserInput",pe]),t("set-picker-option",["handleFocusPicker",ge]),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(o).b(),(0,l.SU)(s).b(),{"has-sidebar":e.$slots.sidebar||(0,l.SU)(H),"has-time":(0,l.SU)(Y)}])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("body-wrapper"))},[(0,a.WI)(e.$slots,"sidebar",{class:(0,c.C_)((0,l.SU)(o).e("sidebar"))}),(0,l.SU)(H)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(o).e("sidebar"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(g),((e,t)=>((0,a.wg)(),(0,a.iD)("button",{key:t,type:"button",class:(0,c.C_)((0,l.SU)(o).e("shortcut")),onClick:t=>z(e)},(0,c.zw)(e.text),11,Cv)))),128))],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("body"))},[(0,l.SU)(Y)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(s).e("time-header"))},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(s).e("editor-wrap"))},[(0,a.Wm)((0,l.SU)(le.EZ),{placeholder:(0,l.SU)(d)("el.datepicker.selectDate"),"model-value":(0,l.SU)(te),size:"small","validate-event":!1,onInput:t[0]||(t[0]=e=>O.value=e),onChange:ue},null,8,["placeholder","model-value"])],2),(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(s).e("editor-wrap"))},[(0,a.Wm)((0,l.SU)(le.EZ),{placeholder:(0,l.SU)(d)("el.datepicker.selectTime"),"model-value":(0,l.SU)(ee),size:"small","validate-event":!1,onFocus:re,onInput:t[1]||(t[1]=e=>N.value=e),onChange:ce},null,8,["placeholder","model-value"]),(0,a.Wm)((0,l.SU)(kv),{visible:ne.value,format:(0,l.SU)(Q),"time-arrow-control":(0,l.SU)(b),"parsed-value":E.value,onPick:ie},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[(0,l.SU)(ng),oe]])],2)):(0,a.kq)("v-if",!0),(0,a.wy)((0,a._)("div",{class:(0,c.C_)([(0,l.SU)(s).e("header"),("year"===F.value||"month"===F.value)&&(0,l.SU)(s).e("header--bordered")])},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(s).e("prev-btn"))},[(0,a._)("button",{type:"button","aria-label":(0,l.SU)(d)("el.datepicker.prevYear"),class:(0,c.C_)(["d-arrow-left",(0,l.SU)(o).e("icon-btn")]),onClick:t[2]||(t[2]=e=>M(!1))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.BAP))])),_:1})],10,Iv),(0,a.wy)((0,a._)("button",{type:"button","aria-label":(0,l.SU)(d)("el.datepicker.prevMonth"),class:(0,c.C_)([(0,l.SU)(o).e("icon-btn"),"arrow-left"]),onClick:t[3]||(t[3]=e=>B(!1))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.XdH))])),_:1})],10,Av),[[A.F8,"date"===F.value]])],2),(0,a._)("span",{role:"button",class:(0,c.C_)((0,l.SU)(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:t[4]||(t[4]=(0,A.D2)((e=>W("year")),["enter"])),onClick:t[5]||(t[5]=e=>W("year"))},(0,c.zw)((0,l.SU)(j)),35),(0,a.wy)((0,a._)("span",{role:"button","aria-live":"polite",tabindex:"0",class:(0,c.C_)([(0,l.SU)(s).e("header-label"),{active:"month"===F.value}]),onKeydown:t[6]||(t[6]=(0,A.D2)((e=>W("month")),["enter"])),onClick:t[7]||(t[7]=e=>W("month"))},(0,c.zw)((0,l.SU)(d)(`el.datepicker.month${(0,l.SU)(I)+1}`)),35),[[A.F8,"date"===F.value]]),(0,a._)("span",{class:(0,c.C_)((0,l.SU)(s).e("next-btn"))},[(0,a.wy)((0,a._)("button",{type:"button","aria-label":(0,l.SU)(d)("el.datepicker.nextMonth"),class:(0,c.C_)([(0,l.SU)(o).e("icon-btn"),"arrow-right"]),onClick:t[8]||(t[8]=e=>B(!0))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1})],10,Tv),[[A.F8,"date"===F.value]]),(0,a._)("button",{type:"button","aria-label":(0,l.SU)(d)("el.datepicker.nextYear"),class:(0,c.C_)([(0,l.SU)(o).e("icon-btn"),"d-arrow-right"]),onClick:t[9]||(t[9]=e=>M(!0))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.tsQ))])),_:1})],10,Rv)],2)],2),[[A.F8,"time"!==F.value]]),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("content")),onKeydown:me},["date"===F.value?((0,a.wg)(),(0,a.j4)(jy,{key:0,ref_key:"currentViewRef",ref:_,"selection-mode":(0,l.SU)($),date:E.value,"parsed-value":e.parsedValue,"disabled-date":(0,l.SU)(m),"cell-class-name":(0,l.SU)(v),onPick:L},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):(0,a.kq)("v-if",!0),"year"===F.value?((0,a.wg)(),(0,a.j4)(nv,{key:1,ref_key:"currentViewRef",ref:_,date:E.value,"disabled-date":(0,l.SU)(m),"parsed-value":e.parsedValue,onPick:q},null,8,["date","disabled-date","parsed-value"])):(0,a.kq)("v-if",!0),"month"===F.value?((0,a.wg)(),(0,a.j4)(qy,{key:2,ref_key:"currentViewRef",ref:_,date:E.value,"parsed-value":e.parsedValue,"disabled-date":(0,l.SU)(m),onPick:K},null,8,["date","parsed-value","disabled-date"])):(0,a.kq)("v-if",!0)],34)],2)],2),(0,a.wy)((0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("footer"))},[(0,a.wy)((0,a.Wm)((0,l.SU)(ss.mi),{text:"",size:"small",class:(0,c.C_)((0,l.SU)(o).e("link-btn")),onClick:J},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(d)("el.datepicker.now")),1)])),_:1},8,["class"]),[[A.F8,"dates"!==(0,l.SU)($)]]),(0,a.Wm)((0,l.SU)(ss.mi),{plain:"",size:"small",class:(0,c.C_)((0,l.SU)(o).e("link-btn")),onClick:Z},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(d)("el.datepicker.confirm")),1)])),_:1},8,["class"])],2),[[A.F8,(0,l.SU)(G)&&"date"===F.value]])],2))}});var Ov=(0,m.Z)(xv,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const Nv=(0,d.o8)({...Cy,...Iy}),Pv=e=>{const{emit:t}=(0,a.FN)(),n=(0,a.l1)(),r=(0,a.Rr)(),o=o=>{const s=(0,c.mf)(o.value)?o.value():o.value;s?t("pick",[is(s[0]).locale(e.value),is(s[1]).locale(e.value)]):o.onClick&&o.onClick({attrs:n,slots:r,emit:t})};return o},Dv=(e,{defaultValue:t,leftDate:n,rightDate:r,unit:o,onParsedValueChanged:s})=>{const{emit:i}=(0,a.FN)(),{pickerNs:u}=(0,a.f3)(Sy),d=(0,y.s3)("date-range-picker"),{t:h,lang:p}=(0,_s.bU)(),f=Pv(p),g=(0,l.iH)(),m=(0,l.iH)(),v=(0,l.iH)({endDate:null,selecting:!1}),w=e=>{v.value=e},b=(e=!1)=>{const t=(0,l.SU)(g),n=(0,l.SU)(m);xy([t,n])&&i("pick",[t,n],e)},S=e=>{v.value.selecting=e,e||(v.value.endDate=null)},_=()=>{const[s,i]=Oy((0,l.SU)(t),{lang:(0,l.SU)(p),unit:o,unlinkPanels:e.unlinkPanels});g.value=void 0,m.value=void 0,n.value=s,r.value=i};return(0,a.YP)(t,(e=>{e&&_()}),{immediate:!0}),(0,a.YP)((()=>e.parsedValue),(e=>{if((0,c.kJ)(e)&&2===e.length){const[t,r]=e;g.value=t,n.value=t,m.value=r,s((0,l.SU)(g),(0,l.SU)(m))}else _()}),{immediate:!0}),{minDate:g,maxDate:m,rangeState:v,lang:p,ppNs:u,drpNs:d,handleChangeRange:w,handleRangeConfirm:b,handleShortcutClick:f,onSelect:S,t:h}},Uv=["onClick"],Lv=["disabled"],Bv=["disabled"],Mv=["disabled"],Fv=["disabled"],jv="month",zv=(0,a.aZ)({__name:"panel-date-range",props:Nv,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:t}){const n=e,r=(0,a.f3)("EP_PICKER_BASE"),{disabledDate:o,cellClassName:s,format:i,defaultTime:u,arrowControl:d,clearable:h}=r.props,p=(0,l.Vh)(r.props,"shortcuts"),f=(0,l.Vh)(r.props,"defaultValue"),{lang:g}=(0,_s.bU)(),m=(0,l.iH)(is().locale(g.value)),y=(0,l.iH)(is().locale(g.value).add(1,jv)),{minDate:v,maxDate:w,rangeState:b,ppNs:S,drpNs:_,handleChangeRange:E,handleRangeConfirm:k,handleShortcutClick:C,onSelect:I,t:A}=Dv(n,{defaultValue:f,leftDate:m,rightDate:y,unit:jv,onParsedValueChanged:be}),R=(0,l.iH)({min:null,max:null}),x=(0,l.iH)({min:null,max:null}),O=(0,a.Fl)((()=>`${m.value.year()} ${A("el.datepicker.year")} ${A(`el.datepicker.month${m.value.month()+1}`)}`)),N=(0,a.Fl)((()=>`${y.value.year()} ${A("el.datepicker.year")} ${A(`el.datepicker.month${y.value.month()+1}`)}`)),P=(0,a.Fl)((()=>m.value.year())),D=(0,a.Fl)((()=>m.value.month())),U=(0,a.Fl)((()=>y.value.year())),L=(0,a.Fl)((()=>y.value.month())),B=(0,a.Fl)((()=>!!p.value.length)),M=(0,a.Fl)((()=>null!==R.value.min?R.value.min:v.value?v.value.format(V.value):"")),F=(0,a.Fl)((()=>null!==R.value.max?R.value.max:w.value||v.value?(w.value||v.value).format(V.value):"")),j=(0,a.Fl)((()=>null!==x.value.min?x.value.min:v.value?v.value.format($.value):"")),z=(0,a.Fl)((()=>null!==x.value.max?x.value.max:w.value||v.value?(w.value||v.value).format($.value):"")),$=(0,a.Fl)((()=>us(i))),V=(0,a.Fl)((()=>cs(i))),H=()=>{m.value=m.value.subtract(1,"year"),n.unlinkPanels||(y.value=m.value.add(1,"month")),Q("year")},K=()=>{m.value=m.value.subtract(1,"month"),n.unlinkPanels||(y.value=m.value.add(1,"month")),Q("month")},q=()=>{n.unlinkPanels?y.value=y.value.add(1,"year"):(m.value=m.value.add(1,"year"),y.value=m.value.add(1,"month")),Q("year")},W=()=>{n.unlinkPanels?y.value=y.value.add(1,"month"):(m.value=m.value.add(1,"month"),y.value=m.value.add(1,"month")),Q("month")},Y=()=>{m.value=m.value.add(1,"year"),Q("year")},G=()=>{m.value=m.value.add(1,"month"),Q("month")},Z=()=>{y.value=y.value.subtract(1,"year"),Q("year")},J=()=>{y.value=y.value.subtract(1,"month"),Q("month")},Q=e=>{t("panel-change",[m.value.toDate(),y.value.toDate()],e)},X=(0,a.Fl)((()=>{const e=(D.value+1)%12,t=D.value+1>=12?1:0;return n.unlinkPanels&&new Date(P.value+t,e)<new Date(U.value,L.value)})),ee=(0,a.Fl)((()=>n.unlinkPanels&&12*U.value+L.value-(12*P.value+D.value+1)>=12)),te=(0,a.Fl)((()=>!(v.value&&w.value&&!b.value.selecting&&xy([v.value,w.value])))),ne=(0,a.Fl)((()=>"datetime"===n.type||"datetimerange"===n.type)),re=(e,t)=>{if(e){if(u){const n=is(u[t]||u).locale(g.value);return n.year(e.year()).month(e.month()).date(e.date())}return e}},oe=(e,n=!0)=>{const r=e.minDate,o=e.maxDate,s=re(r,0),i=re(o,1);w.value===i&&v.value===s||(t("calendar-change",[r.toDate(),o&&o.toDate()]),w.value=i,v.value=s,n&&!ne.value&&k())},se=(0,l.iH)(!1),ie=(0,l.iH)(!1),ce=()=>{se.value=!1},ue=()=>{ie.value=!1},de=(e,t)=>{R.value[t]=e;const r=is(e,V.value).locale(g.value);if(r.isValid()){if(o&&o(r.toDate()))return;"min"===t?(m.value=r,v.value=(v.value||m.value).year(r.year()).month(r.month()).date(r.date()),n.unlinkPanels||(y.value=r.add(1,"month"),w.value=v.value.add(1,"month"))):(y.value=r,w.value=(w.value||y.value).year(r.year()).month(r.month()).date(r.date()),n.unlinkPanels||(m.value=r.subtract(1,"month"),v.value=w.value.subtract(1,"month")))}},he=(e,t)=>{R.value[t]=null},pe=(e,t)=>{x.value[t]=e;const n=is(e,$.value).locale(g.value);n.isValid()&&("min"===t?(se.value=!0,v.value=(v.value||m.value).hour(n.hour()).minute(n.minute()).second(n.second()),w.value&&!w.value.isBefore(v.value)||(w.value=v.value)):(ie.value=!0,w.value=(w.value||y.value).hour(n.hour()).minute(n.minute()).second(n.second()),y.value=w.value,w.value&&w.value.isBefore(v.value)&&(v.value=w.value)))},fe=(e,t)=>{x.value[t]=null,"min"===t?(m.value=v.value,se.value=!1):(y.value=w.value,ie.value=!1)},ge=(e,t,n)=>{x.value.min||(e&&(m.value=e,v.value=(v.value||m.value).hour(e.hour()).minute(e.minute()).second(e.second())),n||(se.value=t),w.value&&!w.value.isBefore(v.value)||(w.value=v.value,y.value=e))},me=(e,t,n)=>{x.value.max||(e&&(y.value=e,w.value=(w.value||y.value).hour(e.hour()).minute(e.minute()).second(e.second())),n||(ie.value=t),w.value&&w.value.isBefore(v.value)&&(v.value=w.value))},ye=()=>{m.value=Oy((0,l.SU)(f),{lang:(0,l.SU)(g),unit:"month",unlinkPanels:n.unlinkPanels})[0],y.value=m.value.add(1,"month"),t("pick",null)},ve=e=>(0,c.kJ)(e)?e.map((e=>e.format(i))):e.format(i),we=e=>(0,c.kJ)(e)?e.map((e=>is(e,i).locale(g.value))):is(e,i).locale(g.value);function be(e,t){if(n.unlinkPanels&&t){const n=(null==e?void 0:e.year())||0,r=(null==e?void 0:e.month())||0,o=t.year(),s=t.month();y.value=n===o&&r===s?t.add(1,jv):t}else y.value=m.value.add(1,jv),t&&(y.value=y.value.hour(t.hour()).minute(t.minute()).second(t.second()))}return t("set-picker-option",["isValidValue",xy]),t("set-picker-option",["parseUserInput",we]),t("set-picker-option",["formatToString",ve]),t("set-picker-option",["handleClear",ye]),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(S).b(),(0,l.SU)(_).b(),{"has-sidebar":e.$slots.sidebar||(0,l.SU)(B),"has-time":(0,l.SU)(ne)}])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(S).e("body-wrapper"))},[(0,a.WI)(e.$slots,"sidebar",{class:(0,c.C_)((0,l.SU)(S).e("sidebar"))}),(0,l.SU)(B)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(S).e("sidebar"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(p),((e,t)=>((0,a.wg)(),(0,a.iD)("button",{key:t,type:"button",class:(0,c.C_)((0,l.SU)(S).e("shortcut")),onClick:t=>(0,l.SU)(C)(e)},(0,c.zw)(e.text),11,Uv)))),128))],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(S).e("body"))},[(0,l.SU)(ne)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(_).e("time-header"))},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(_).e("editors-wrap"))},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(_).e("time-picker-wrap"))},[(0,a.Wm)((0,l.SU)(le.EZ),{size:"small",disabled:(0,l.SU)(b).selecting,placeholder:(0,l.SU)(A)("el.datepicker.startDate"),class:(0,c.C_)((0,l.SU)(_).e("editor")),"model-value":(0,l.SU)(M),"validate-event":!1,onInput:t[0]||(t[0]=e=>de(e,"min")),onChange:t[1]||(t[1]=e=>he(e,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(_).e("time-picker-wrap"))},[(0,a.Wm)((0,l.SU)(le.EZ),{size:"small",class:(0,c.C_)((0,l.SU)(_).e("editor")),disabled:(0,l.SU)(b).selecting,placeholder:(0,l.SU)(A)("el.datepicker.startTime"),"model-value":(0,l.SU)(j),"validate-event":!1,onFocus:t[2]||(t[2]=e=>se.value=!0),onInput:t[3]||(t[3]=e=>pe(e,"min")),onChange:t[4]||(t[4]=e=>fe(e,"min"))},null,8,["class","disabled","placeholder","model-value"]),(0,a.Wm)((0,l.SU)(kv),{visible:se.value,format:(0,l.SU)($),"datetime-role":"start","time-arrow-control":(0,l.SU)(d),"parsed-value":m.value,onPick:ge},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[(0,l.SU)(ng),ce]])],2),(0,a._)("span",null,[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1})]),(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(_).e("editors-wrap"),"is-right"])},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(_).e("time-picker-wrap"))},[(0,a.Wm)((0,l.SU)(le.EZ),{size:"small",class:(0,c.C_)((0,l.SU)(_).e("editor")),disabled:(0,l.SU)(b).selecting,placeholder:(0,l.SU)(A)("el.datepicker.endDate"),"model-value":(0,l.SU)(F),readonly:!(0,l.SU)(v),"validate-event":!1,onInput:t[5]||(t[5]=e=>de(e,"max")),onChange:t[6]||(t[6]=e=>he(e,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(_).e("time-picker-wrap"))},[(0,a.Wm)((0,l.SU)(le.EZ),{size:"small",class:(0,c.C_)((0,l.SU)(_).e("editor")),disabled:(0,l.SU)(b).selecting,placeholder:(0,l.SU)(A)("el.datepicker.endTime"),"model-value":(0,l.SU)(z),readonly:!(0,l.SU)(v),"validate-event":!1,onFocus:t[7]||(t[7]=e=>(0,l.SU)(v)&&(ie.value=!0)),onInput:t[8]||(t[8]=e=>pe(e,"max")),onChange:t[9]||(t[9]=e=>fe(e,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),(0,a.Wm)((0,l.SU)(kv),{"datetime-role":"end",visible:ie.value,format:(0,l.SU)($),"time-arrow-control":(0,l.SU)(d),"parsed-value":y.value,onPick:me},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[(0,l.SU)(ng),ue]])],2)],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)([[(0,l.SU)(S).e("content"),(0,l.SU)(_).e("content")],"is-left"])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(_).e("header"))},[(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(S).e("icon-btn"),"d-arrow-left"]),onClick:H},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.BAP))])),_:1})],2),(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(S).e("icon-btn"),"arrow-left"]),onClick:K},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.XdH))])),_:1})],2),e.unlinkPanels?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",disabled:!(0,l.SU)(ee),class:(0,c.C_)([[(0,l.SU)(S).e("icon-btn"),{"is-disabled":!(0,l.SU)(ee)}],"d-arrow-right"]),onClick:Y},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.tsQ))])),_:1})],10,Lv)):(0,a.kq)("v-if",!0),e.unlinkPanels?((0,a.wg)(),(0,a.iD)("button",{key:1,type:"button",disabled:!(0,l.SU)(X),class:(0,c.C_)([[(0,l.SU)(S).e("icon-btn"),{"is-disabled":!(0,l.SU)(X)}],"arrow-right"]),onClick:G},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1})],10,Bv)):(0,a.kq)("v-if",!0),(0,a._)("div",null,(0,c.zw)((0,l.SU)(O)),1)],2),(0,a.Wm)(jy,{"selection-mode":"range",date:m.value,"min-date":(0,l.SU)(v),"max-date":(0,l.SU)(w),"range-state":(0,l.SU)(b),"disabled-date":(0,l.SU)(o),"cell-class-name":(0,l.SU)(s),onChangerange:(0,l.SU)(E),onPick:oe,onSelect:(0,l.SU)(I)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),(0,a._)("div",{class:(0,c.C_)([[(0,l.SU)(S).e("content"),(0,l.SU)(_).e("content")],"is-right"])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(_).e("header"))},[e.unlinkPanels?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",disabled:!(0,l.SU)(ee),class:(0,c.C_)([[(0,l.SU)(S).e("icon-btn"),{"is-disabled":!(0,l.SU)(ee)}],"d-arrow-left"]),onClick:Z},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.BAP))])),_:1})],10,Mv)):(0,a.kq)("v-if",!0),e.unlinkPanels?((0,a.wg)(),(0,a.iD)("button",{key:1,type:"button",disabled:!(0,l.SU)(X),class:(0,c.C_)([[(0,l.SU)(S).e("icon-btn"),{"is-disabled":!(0,l.SU)(X)}],"arrow-left"]),onClick:J},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.XdH))])),_:1})],10,Fv)):(0,a.kq)("v-if",!0),(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(S).e("icon-btn"),"d-arrow-right"]),onClick:q},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.tsQ))])),_:1})],2),(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(S).e("icon-btn"),"arrow-right"]),onClick:W},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1})],2),(0,a._)("div",null,(0,c.zw)((0,l.SU)(N)),1)],2),(0,a.Wm)(jy,{"selection-mode":"range",date:y.value,"min-date":(0,l.SU)(v),"max-date":(0,l.SU)(w),"range-state":(0,l.SU)(b),"disabled-date":(0,l.SU)(o),"cell-class-name":(0,l.SU)(s),onChangerange:(0,l.SU)(E),onPick:oe,onSelect:(0,l.SU)(I)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),(0,l.SU)(ne)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(S).e("footer"))},[(0,l.SU)(h)?((0,a.wg)(),(0,a.j4)((0,l.SU)(ss.mi),{key:0,text:"",size:"small",class:(0,c.C_)((0,l.SU)(S).e("link-btn")),onClick:ye},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(A)("el.datepicker.clear")),1)])),_:1},8,["class"])):(0,a.kq)("v-if",!0),(0,a.Wm)((0,l.SU)(ss.mi),{plain:"",size:"small",class:(0,c.C_)((0,l.SU)(S).e("link-btn")),disabled:(0,l.SU)(te),onClick:t[10]||(t[10]=e=>(0,l.SU)(k)(!1))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(A)("el.datepicker.confirm")),1)])),_:1},8,["class","disabled"])],2)):(0,a.kq)("v-if",!0)],2))}});var $v=(0,m.Z)(zv,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const Vv=(0,d.o8)({...Iy}),Hv=["pick","set-picker-option"],Kv=({unlinkPanels:e,leftDate:t,rightDate:n})=>{const{t:r}=(0,_s.bU)(),o=()=>{t.value=t.value.subtract(1,"year"),e.value||(n.value=n.value.subtract(1,"year"))},s=()=>{e.value||(t.value=t.value.add(1,"year")),n.value=n.value.add(1,"year")},i=()=>{t.value=t.value.add(1,"year")},l=()=>{n.value=n.value.subtract(1,"year")},c=(0,a.Fl)((()=>`${t.value.year()} ${r("el.datepicker.year")}`)),u=(0,a.Fl)((()=>`${n.value.year()} ${r("el.datepicker.year")}`)),d=(0,a.Fl)((()=>t.value.year())),h=(0,a.Fl)((()=>n.value.year()===t.value.year()?t.value.year()+1:n.value.year()));return{leftPrevYear:o,rightNextYear:s,leftNextYear:i,rightPrevYear:l,leftLabel:c,rightLabel:u,leftYear:d,rightYear:h}},qv=["onClick"],Wv=["disabled"],Yv=["disabled"],Gv="year",Zv=(0,a.aZ)({name:"DatePickerMonthRange"}),Jv=(0,a.aZ)({...Zv,props:Vv,emits:Hv,setup(e,{emit:t}){const n=e,{lang:r}=(0,_s.bU)(),o=(0,a.f3)("EP_PICKER_BASE"),{shortcuts:s,disabledDate:i,format:u}=o.props,d=(0,l.Vh)(o.props,"defaultValue"),h=(0,l.iH)(is().locale(r.value)),p=(0,l.iH)(is().locale(r.value).add(1,Gv)),{minDate:f,maxDate:g,rangeState:m,ppNs:y,drpNs:v,handleChangeRange:w,handleRangeConfirm:b,handleShortcutClick:S,onSelect:_}=Dv(n,{defaultValue:d,leftDate:h,rightDate:p,unit:Gv,onParsedValueChanged:L}),E=(0,a.Fl)((()=>!!s.length)),{leftPrevYear:k,rightNextYear:C,leftNextYear:I,rightPrevYear:A,leftLabel:R,rightLabel:x,leftYear:O,rightYear:N}=Kv({unlinkPanels:(0,l.Vh)(n,"unlinkPanels"),leftDate:h,rightDate:p}),P=(0,a.Fl)((()=>n.unlinkPanels&&N.value>O.value+1)),D=(e,t=!0)=>{const n=e.minDate,r=e.maxDate;g.value===r&&f.value===n||(g.value=r,f.value=n,t&&b())},U=e=>e.map((e=>e.format(u)));function L(e,t){if(n.unlinkPanels&&t){const n=(null==e?void 0:e.year())||0,r=t.year();p.value=n===r?t.add(1,Gv):t}else p.value=h.value.add(1,Gv)}return t("set-picker-option",["formatToString",U]),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(y).b(),(0,l.SU)(v).b(),{"has-sidebar":Boolean(e.$slots.sidebar)||(0,l.SU)(E)}])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(y).e("body-wrapper"))},[(0,a.WI)(e.$slots,"sidebar",{class:(0,c.C_)((0,l.SU)(y).e("sidebar"))}),(0,l.SU)(E)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(y).e("sidebar"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(s),((e,t)=>((0,a.wg)(),(0,a.iD)("button",{key:t,type:"button",class:(0,c.C_)((0,l.SU)(y).e("shortcut")),onClick:t=>(0,l.SU)(S)(e)},(0,c.zw)(e.text),11,qv)))),128))],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(y).e("body"))},[(0,a._)("div",{class:(0,c.C_)([[(0,l.SU)(y).e("content"),(0,l.SU)(v).e("content")],"is-left"])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(v).e("header"))},[(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(y).e("icon-btn"),"d-arrow-left"]),onClick:t[0]||(t[0]=(...e)=>(0,l.SU)(k)&&(0,l.SU)(k)(...e))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.BAP))])),_:1})],2),e.unlinkPanels?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",disabled:!(0,l.SU)(P),class:(0,c.C_)([[(0,l.SU)(y).e("icon-btn"),{[(0,l.SU)(y).is("disabled")]:!(0,l.SU)(P)}],"d-arrow-right"]),onClick:t[1]||(t[1]=(...e)=>(0,l.SU)(I)&&(0,l.SU)(I)(...e))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.tsQ))])),_:1})],10,Wv)):(0,a.kq)("v-if",!0),(0,a._)("div",null,(0,c.zw)((0,l.SU)(R)),1)],2),(0,a.Wm)(qy,{"selection-mode":"range",date:h.value,"min-date":(0,l.SU)(f),"max-date":(0,l.SU)(g),"range-state":(0,l.SU)(m),"disabled-date":(0,l.SU)(i),onChangerange:(0,l.SU)(w),onPick:D,onSelect:(0,l.SU)(_)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),(0,a._)("div",{class:(0,c.C_)([[(0,l.SU)(y).e("content"),(0,l.SU)(v).e("content")],"is-right"])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(v).e("header"))},[e.unlinkPanels?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",disabled:!(0,l.SU)(P),class:(0,c.C_)([[(0,l.SU)(y).e("icon-btn"),{"is-disabled":!(0,l.SU)(P)}],"d-arrow-left"]),onClick:t[2]||(t[2]=(...e)=>(0,l.SU)(A)&&(0,l.SU)(A)(...e))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.BAP))])),_:1})],10,Yv)):(0,a.kq)("v-if",!0),(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(y).e("icon-btn"),"d-arrow-right"]),onClick:t[3]||(t[3]=(...e)=>(0,l.SU)(C)&&(0,l.SU)(C)(...e))},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.tsQ))])),_:1})],2),(0,a._)("div",null,(0,c.zw)((0,l.SU)(x)),1)],2),(0,a.Wm)(qy,{"selection-mode":"range",date:p.value,"min-date":(0,l.SU)(f),"max-date":(0,l.SU)(g),"range-state":(0,l.SU)(m),"disabled-date":(0,l.SU)(i),onChangerange:(0,l.SU)(w),onPick:D,onSelect:(0,l.SU)(_)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var Qv=(0,m.Z)(Jv,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const Xv=function(e){switch(e){case"daterange":case"datetimerange":return $v;case"monthrange":return Qv;default:return Ov}},ew=(0,d.o8)({id:{type:(0,d.Cq)([Array,String])},name:{type:(0,d.Cq)([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:(0,d.Cq)([String,Object]),default:ae.K41},editable:{type:Boolean,default:!0},prefixIcon:{type:(0,d.Cq)([String,Object]),default:""},size:Th.Pp,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:(0,d.Cq)(Object),default:()=>({})},modelValue:{type:(0,d.Cq)([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:(0,d.Cq)([Date,Array])},defaultTime:{type:(0,d.Cq)([Date,Array])},isRange:{type:Boolean,default:!1},...rv,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:(0,d.Cq)([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),tw=["id","name","placeholder","value","disabled","readonly"],nw=["id","name","placeholder","value","disabled","readonly"],rw=(0,a.aZ)({name:"Picker"}),ow=(0,a.aZ)({...rw,props:ew,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:t,emit:n}){const r=e,{lang:o}=(0,_s.bU)(),s=(0,y.s3)("date"),i=(0,y.s3)("input"),d=(0,y.s3)("range"),{form:h,formItem:p}=(0,Ph.A)(),f=(0,a.f3)("ElPopperOptions",{}),g=(0,l.iH)(),m=(0,l.iH)(),v=(0,l.iH)(!1),b=(0,l.iH)(!1),S=(0,l.iH)(null);let _=!1,E=!1;(0,a.YP)(v,(e=>{e?(0,a.Y3)((()=>{e&&(S.value=r.modelValue)})):(ce.value=null,(0,a.Y3)((()=>{k(r.modelValue)})))}));const k=(e,t)=>{!t&&hs(e,S.value)||(n("change",e),r.validateEvent&&(null==p||p.validate("change").catch((e=>(0,w.N)(e)))))},C=e=>{if(!hs(r.modelValue,e)){let t;(0,c.kJ)(e)?t=e.map((e=>fs(e,r.valueFormat,o.value))):e&&(t=fs(e,r.valueFormat,o.value)),n("update:modelValue",e?t:e,o.value)}},I=e=>{n("keydown",e)},R=(0,a.Fl)((()=>{if(m.value){const e=re.value?m.value:m.value.$el;return Array.from(e.querySelectorAll("input"))}return[]})),x=(e,t,n)=>{const r=R.value;r.length&&(n&&"min"!==n?"max"===n&&(r[1].setSelectionRange(e,t),r[1].focus()):(r[0].setSelectionRange(e,t),r[0].focus()))},O=()=>{F(!0,!0),(0,a.Y3)((()=>{E=!1}))},N=(e="",t=!1)=>{let n;t||(E=!0),v.value=t,n=(0,c.kJ)(e)?e.map((e=>e.toDate())):e?e.toDate():e,ce.value=null,C(n)},P=()=>{b.value=!0},D=()=>{n("visible-change",!0)},U=e=>{(null==e?void 0:e.key)===Jn.n.esc&&F(!0,!0)},L=()=>{b.value=!1,v.value=!1,E=!1,n("visible-change",!1)},B=()=>{v.value=!0},M=()=>{v.value=!1},F=(e=!0,t=!1)=>{E=t;const[n,r]=(0,l.SU)(R);let o=n;!e&&re.value&&(o=r),o&&o.focus()},j=e=>{r.readonly||V.value||v.value||E||(v.value=!0,n("focus",e))};let z;const $=e=>{const t=async()=>{setTimeout((()=>{var o;z===t&&((null==(o=g.value)?void 0:o.isFocusInsideContent())&&!_||0!==R.value.filter((e=>e.contains(document.activeElement))).length||(ue(),v.value=!1,n("blur",e),r.validateEvent&&(null==p||p.validate("blur").catch((e=>(0,w.N)(e))))),_=!1)}),0)};z=t,t()},V=(0,a.Fl)((()=>r.disabled||(null==h?void 0:h.disabled))),H=(0,a.Fl)((()=>{let e;if(Q.value?be.value.getDefaultValue&&(e=be.value.getDefaultValue()):e=(0,c.kJ)(r.modelValue)?r.modelValue.map((e=>ps(e,r.valueFormat,o.value))):ps(r.modelValue,r.valueFormat,o.value),be.value.getRangeAvailableTime){const t=be.value.getRangeAvailableTime(e);wh(t,e)||(e=t,C((0,c.kJ)(e)?e.map((e=>e.toDate())):e.toDate()))}return(0,c.kJ)(e)&&e.some((e=>!e))&&(e=[]),e})),K=(0,a.Fl)((()=>{if(!be.value.panelReady)return"";const e=he(H.value);return(0,c.kJ)(ce.value)?[ce.value[0]||e&&e[0]||"",ce.value[1]||e&&e[1]||""]:null!==ce.value?ce.value:!W.value&&Q.value||!v.value&&Q.value?"":e?Y.value?e.join(", "):e:""})),q=(0,a.Fl)((()=>r.type.includes("time"))),W=(0,a.Fl)((()=>r.type.startsWith("time"))),Y=(0,a.Fl)((()=>"dates"===r.type)),G=(0,a.Fl)((()=>r.prefixIcon||(q.value?ae.SUY:ae.faS))),Z=(0,l.iH)(!1),J=e=>{r.readonly||V.value||Z.value&&(e.stopPropagation(),O(),C(null),k(null,!0),Z.value=!1,v.value=!1,be.value.handleClear&&be.value.handleClear())},Q=(0,a.Fl)((()=>{const{modelValue:e}=r;return!e||(0,c.kJ)(e)&&!e.filter(Boolean).length})),X=async e=>{var t;r.readonly||V.value||("INPUT"!==(null==(t=e.target)?void 0:t.tagName)||R.value.includes(document.activeElement))&&(v.value=!0)},ee=()=>{r.readonly||V.value||!Q.value&&r.clearable&&(Z.value=!0)},te=()=>{Z.value=!1},ne=e=>{var t;r.readonly||V.value||("INPUT"!==(null==(t=e.touches[0].target)?void 0:t.tagName)||R.value.includes(document.activeElement))&&(v.value=!0)},re=(0,a.Fl)((()=>r.type.includes("range"))),oe=(0,mo.Cd)(),se=(0,a.Fl)((()=>{var e,t;return null==(t=null==(e=(0,l.SU)(g))?void 0:e.popperRef)?void 0:t.contentRef})),ie=(0,a.Fl)((()=>{var e;return(0,l.SU)(re)?(0,l.SU)(m):null==(e=(0,l.SU)(m))?void 0:e.$el}));(0,u.i9H)(ie,(e=>{const t=(0,l.SU)(se),n=(0,l.SU)(ie);t&&(e.target===t||e.composedPath().includes(t))||e.target===n||e.composedPath().includes(n)||(v.value=!1)}));const ce=(0,l.iH)(null),ue=()=>{if(ce.value){const e=de(K.value);e&&pe(e)&&(C((0,c.kJ)(e)?e.map((e=>e.toDate())):e.toDate()),ce.value=null)}""===ce.value&&(C(null),k(null),ce.value=null)},de=e=>e?be.value.parseUserInput(e):null,he=e=>e?be.value.formatToString(e):null,pe=e=>be.value.isValidValue(e),fe=async e=>{if(r.readonly||V.value)return;const{code:t}=e;if(I(e),t!==Jn.n.esc)if(t===Jn.n.down&&(be.value.handleFocusPicker&&(e.preventDefault(),e.stopPropagation()),!1===v.value&&(v.value=!0,await(0,a.Y3)()),be.value.handleFocusPicker))be.value.handleFocusPicker();else{if(t!==Jn.n.tab)return t===Jn.n.enter||t===Jn.n.numpadEnter?((null===ce.value||""===ce.value||pe(de(K.value)))&&(ue(),v.value=!1),void e.stopPropagation()):void(ce.value?e.stopPropagation():be.value.handleKeydownInput&&be.value.handleKeydownInput(e));_=!0}else!0===v.value&&(v.value=!1,e.preventDefault(),e.stopPropagation())},ge=e=>{ce.value=e,v.value||(v.value=!0)},me=e=>{const t=e.target;ce.value?ce.value=[t.value,ce.value[1]]:ce.value=[t.value,null]},ye=e=>{const t=e.target;ce.value?ce.value=[ce.value[0],t.value]:ce.value=[null,t.value]},ve=()=>{var e;const t=ce.value,n=de(t&&t[0]),r=(0,l.SU)(H);if(n&&n.isValid()){ce.value=[he(n),(null==(e=K.value)?void 0:e[1])||null];const t=[n,r&&(r[1]||null)];pe(t)&&(C(t),ce.value=null)}},we=()=>{var e;const t=(0,l.SU)(ce),n=de(t&&t[1]),r=(0,l.SU)(H);if(n&&n.isValid()){ce.value=[(null==(e=(0,l.SU)(K))?void 0:e[0])||null,he(n)];const t=[r&&r[0],n];pe(t)&&(C(t),ce.value=null)}},be=(0,l.iH)({}),Se=e=>{be.value[e[0]]=e[1],be.value.panelReady=!0},_e=e=>{n("calendar-change",e)},Ee=(e,t,r)=>{n("panel-change",e,t,r)};return(0,a.JJ)("EP_PICKER_BASE",{props:r}),t({focus:F,handleFocusInput:j,handleBlurInput:$,handleOpen:B,handleClose:M,onPick:N}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(ho),(0,a.dG)({ref_key:"refPopper",ref:g,visible:v.value,effect:"light",pure:"",trigger:"click"},e.$attrs,{role:"dialog",teleported:"",transition:`${(0,l.SU)(s).namespace.value}-zoom-in-top`,"popper-class":[`${(0,l.SU)(s).namespace.value}-picker__popper`,e.popperClass],"popper-options":(0,l.SU)(f),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:P,onShow:D,onHide:L}),{default:(0,a.w5)((()=>[(0,l.SU)(re)?((0,a.wg)(),(0,a.iD)("div",{key:1,ref_key:"inputRef",ref:m,class:(0,c.C_)([(0,l.SU)(s).b("editor"),(0,l.SU)(s).bm("editor",e.type),(0,l.SU)(i).e("wrapper"),(0,l.SU)(s).is("disabled",(0,l.SU)(V)),(0,l.SU)(s).is("active",v.value),(0,l.SU)(d).b("editor"),(0,l.SU)(oe)?(0,l.SU)(d).bm("editor",(0,l.SU)(oe)):"",e.$attrs.class]),style:(0,c.j5)(e.$attrs.style),onClick:j,onMouseenter:ee,onMouseleave:te,onTouchstart:ne,onKeydown:fe},[(0,l.SU)(G)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)([(0,l.SU)(i).e("icon"),(0,l.SU)(d).e("icon")]),onMousedown:(0,A.iM)(X,["prevent"]),onTouchstart:ne},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(G))))])),_:1},8,["class","onMousedown"])):(0,a.kq)("v-if",!0),(0,a._)("input",{id:e.id&&e.id[0],autocomplete:"off",name:e.name&&e.name[0],placeholder:e.startPlaceholder,value:(0,l.SU)(K)&&(0,l.SU)(K)[0],disabled:(0,l.SU)(V),readonly:!e.editable||e.readonly,class:(0,c.C_)((0,l.SU)(d).b("input")),onMousedown:X,onInput:me,onChange:ve,onFocus:j,onBlur:$},null,42,tw),(0,a.WI)(e.$slots,"range-separator",{},(()=>[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(d).b("separator"))},(0,c.zw)(e.rangeSeparator),3)])),(0,a._)("input",{id:e.id&&e.id[1],autocomplete:"off",name:e.name&&e.name[1],placeholder:e.endPlaceholder,value:(0,l.SU)(K)&&(0,l.SU)(K)[1],disabled:(0,l.SU)(V),readonly:!e.editable||e.readonly,class:(0,c.C_)((0,l.SU)(d).b("input")),onMousedown:X,onFocus:j,onBlur:$,onInput:ye,onChange:we},null,42,nw),e.clearIcon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1,class:(0,c.C_)([(0,l.SU)(i).e("icon"),(0,l.SU)(d).e("close-icon"),{[(0,l.SU)(d).e("close-icon--hidden")]:!Z.value}]),onClick:J},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.clearIcon)))])),_:1},8,["class"])):(0,a.kq)("v-if",!0)],38)):((0,a.wg)(),(0,a.j4)((0,l.SU)(le.EZ),{key:0,id:e.id,ref_key:"inputRef",ref:m,"container-role":"combobox","model-value":(0,l.SU)(K),name:e.name,size:(0,l.SU)(oe),disabled:(0,l.SU)(V),placeholder:e.placeholder,class:(0,c.C_)([(0,l.SU)(s).b("editor"),(0,l.SU)(s).bm("editor",e.type),e.$attrs.class]),style:(0,c.j5)(e.$attrs.style),readonly:!e.editable||e.readonly||(0,l.SU)(Y)||"week"===e.type,label:e.label,tabindex:e.tabindex,"validate-event":!1,onInput:ge,onFocus:j,onBlur:$,onKeydown:fe,onChange:ue,onMousedown:X,onMouseenter:ee,onMouseleave:te,onTouchstart:ne,onClick:t[0]||(t[0]=(0,A.iM)((()=>{}),["stop"]))},{prefix:(0,a.w5)((()=>[(0,l.SU)(G)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(i).e("icon")),onMousedown:(0,A.iM)(X,["prevent"]),onTouchstart:ne},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(G))))])),_:1},8,["class","onMousedown"])):(0,a.kq)("v-if",!0)])),suffix:(0,a.w5)((()=>[Z.value&&e.clearIcon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)(`${(0,l.SU)(i).e("icon")} clear-icon`),onClick:(0,A.iM)(J,["stop"])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.clearIcon)))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0)])),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))])),content:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default",{visible:v.value,actualVisible:b.value,parsedValue:(0,l.SU)(H),format:e.format,unlinkPanels:e.unlinkPanels,type:e.type,defaultValue:e.defaultValue,onPick:N,onSelectRange:x,onSetPickerOption:Se,onCalendarChange:_e,onPanelChange:Ee,onKeydown:U,onMousedown:t[1]||(t[1]=(0,A.iM)((()=>{}),["stop"]))})])),_:3},16,["visible","transition","popper-class","popper-options"]))}});var sw=(0,m.Z)(ow,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);is.extend(Ss),is.extend(gy),is.extend(fy),is.extend(my),is.extend(yy),is.extend(vy),is.extend(wy),is.extend(by);var iw=(0,a.aZ)({name:"ElDatePicker",install:null,props:{...ew,..._y},emits:["update:modelValue"],setup(e,{expose:t,emit:n,slots:r}){const o=(0,y.s3)("picker-panel");(0,a.JJ)("ElPopperOptions",(0,l.qj)((0,l.Vh)(e,"popperOptions"))),(0,a.JJ)(Sy,{slots:r,pickerNs:o});const s=(0,l.iH)(),i={focus:(e=!0)=>{var t;null==(t=s.value)||t.focus(e)},handleOpen:()=>{var e;null==(e=s.value)||e.handleOpen()},handleClose:()=>{var e;null==(e=s.value)||e.handleClose()}};t(i);const c=e=>{n("update:modelValue",e)};return()=>{var t;const n=null!=(t=e.format)?t:fv[e.type]||pv,o=Xv(e.type);return(0,a.Wm)(sw,(0,a.dG)(e,{format:n,type:e.type,ref:s,"onUpdate:modelValue":c}),{default:e=>(0,a.Wm)(o,e,null),"range-separator":r["range-separator"]})}}});const aw=iw;aw.install=e=>{e.component(aw.name,aw)};const lw=aw,cw=Symbol("elDescriptions");var uw=(0,a.aZ)({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){const e=(0,a.f3)(cw,{});return{descriptions:e}},render(){var e,t,n,r,o,s;const i=(0,ei.r5)(this.cell),{border:l,direction:c}=this.descriptions,u="vertical"===c,d=(null==(n=null==(t=null==(e=this.cell)?void 0:e.children)?void 0:t.label)?void 0:n.call(t))||i.label,h=null==(s=null==(o=null==(r=this.cell)?void 0:r.children)?void 0:o.default)?void 0:s.call(o),p=i.span,f=i.align?`is-${i.align}`:"",g=i.labelAlign?`is-${i.labelAlign}`:f,m=i.className,w=i.labelClassName,b={width:(0,v.Nn)(i.width),minWidth:(0,v.Nn)(i.minWidth)},S=(0,y.s3)("descriptions");switch(this.type){case"label":return(0,a.h)(this.tag,{style:b,class:[S.e("cell"),S.e("label"),S.is("bordered-label",l),S.is("vertical-label",u),g,w],colSpan:u?p:1},d);case"content":return(0,a.h)(this.tag,{style:b,class:[S.e("cell"),S.e("content"),S.is("bordered-content",l),S.is("vertical-content",u),f,m],colSpan:u?p:2*p-1},h);default:return(0,a.h)("td",{style:b,class:[S.e("cell"),f],colSpan:p},[(0,gr.Z)(d)?void 0:(0,a.h)("span",{class:[S.e("label"),w]},d),(0,a.h)("span",{class:[S.e("content"),m]},h)])}}});const dw=(0,d.o8)({row:{type:Array,default:()=>[]}}),hw={key:1},pw=(0,a.aZ)({name:"ElDescriptionsRow"}),fw=(0,a.aZ)({...pw,props:dw,setup(e){const t=(0,a.f3)(cw,{});return(e,n)=>"vertical"===(0,l.SU)(t).direction?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.row,((e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(uw),{key:`tr1-${t}`,cell:e,tag:"th",type:"label"},null,8,["cell"])))),128))]),(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.row,((e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(uw),{key:`tr2-${t}`,cell:e,tag:"td",type:"content"},null,8,["cell"])))),128))])],64)):((0,a.wg)(),(0,a.iD)("tr",hw,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.row,((e,n)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:`tr3-${n}`},[(0,l.SU)(t).border?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)((0,l.SU)(uw),{cell:e,tag:"td",type:"label"},null,8,["cell"]),(0,a.Wm)((0,l.SU)(uw),{cell:e,tag:"td",type:"content"},null,8,["cell"])],64)):((0,a.wg)(),(0,a.j4)((0,l.SU)(uw),{key:1,cell:e,tag:"td",type:"both"},null,8,["cell"]))],64)))),128))]))}});var gw=(0,m.Z)(fw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const mw=(0,d.o8)({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:Th.Pp,title:{type:String,default:""},extra:{type:String,default:""}}),yw=(0,a.aZ)({name:"ElDescriptions"}),vw=(0,a.aZ)({...yw,props:mw,setup(e){const t=e,n=(0,y.s3)("descriptions"),r=(0,mo.Cd)(),o=(0,a.Rr)();(0,a.JJ)(cw,t);const s=(0,a.Fl)((()=>[n.b(),n.m(r.value)])),i=(e,t,n,r=!1)=>(e.props||(e.props={}),t>n&&(e.props.span=n),r&&(e.props.span=t),e),u=()=>{var e;const n=(0,ei.M3)(null==(e=o.default)?void 0:e.call(o)).filter((e=>{var t;return"ElDescriptionsItem"===(null==(t=null==e?void 0:e.type)?void 0:t.name)})),r=[];let s=[],a=t.column,l=0;return n.forEach(((e,o)=>{var c;const u=(null==(c=e.props)?void 0:c.span)||1;if(o<n.length-1&&(l+=u>a?a:u),o===n.length-1){const n=t.column-l%t.column;return s.push(i(e,n,a,!0)),void r.push(s)}u<a?(a-=u,s.push(e)):(s.push(i(e,u,a)),r.push(s),a=t.column,s=[])})),r};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(s))},[e.title||e.extra||e.$slots.title||e.$slots.extra?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(n).e("header"))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(n).e("title"))},[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a.Uk)((0,c.zw)(e.title),1)]))],2),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(n).e("extra"))},[(0,a.WI)(e.$slots,"extra",{},(()=>[(0,a.Uk)((0,c.zw)(e.extra),1)]))],2)],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(n).e("body"))},[(0,a._)("table",{class:(0,c.C_)([(0,l.SU)(n).e("table"),(0,l.SU)(n).is("bordered",e.border)])},[(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u(),((e,t)=>((0,a.wg)(),(0,a.j4)(gw,{key:t,row:e},null,8,["row"])))),128))])],2)],2)],2))}});var ww=(0,m.Z)(vw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),bw=(0,a.aZ)({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const Sw=(0,C.nz)(ww,{DescriptionsItem:bw}),_w=(0,C.dp)(bw);var Ew=n(6565);const kw=Symbol("dialogInjectionKey"),Cw=(0,d.o8)({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:x.AA},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Iw={close:()=>!0};var Aw=n(2889);const Tw=(...e)=>t=>{e.forEach((e=>{(0,c.mf)(e)?e(t):e.value=t}))};var Rw=n(5818);const xw=["aria-label"],Ow=["id"],Nw=(0,a.aZ)({name:"ElDialogContent"}),Pw=(0,a.aZ)({...Nw,props:Cw,emits:Iw,setup(e){const t=e,{t:n}=(0,_s.bU)(),{Close:r}=x.NK,{dialogRef:o,headerRef:s,bodyId:i,ns:u,style:d}=(0,a.f3)(kw),{focusTrapRef:h}=(0,a.f3)(Aw.D5),p=Tw(h,o),f=(0,a.Fl)((()=>t.draggable));return(0,Rw.O)(o,s,f),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref:(0,l.SU)(p),class:(0,c.C_)([(0,l.SU)(u).b(),(0,l.SU)(u).is("fullscreen",e.fullscreen),(0,l.SU)(u).is("draggable",(0,l.SU)(f)),(0,l.SU)(u).is("align-center",e.alignCenter),{[(0,l.SU)(u).m("center")]:e.center},e.customClass]),style:(0,c.j5)((0,l.SU)(d)),tabindex:"-1"},[(0,a._)("header",{ref_key:"headerRef",ref:s,class:(0,c.C_)((0,l.SU)(u).e("header"))},[(0,a.WI)(e.$slots,"header",{},(()=>[(0,a._)("span",{role:"heading",class:(0,c.C_)((0,l.SU)(u).e("title"))},(0,c.zw)(e.title),3)])),e.showClose?((0,a.wg)(),(0,a.iD)("button",{key:0,"aria-label":(0,l.SU)(n)("el.dialog.close"),class:(0,c.C_)((0,l.SU)(u).e("headerbtn")),type:"button",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)((0,l.SU)(u).e("close"))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.closeIcon||(0,l.SU)(r))))])),_:1},8,["class"])],10,xw)):(0,a.kq)("v-if",!0)],2),(0,a._)("div",{id:(0,l.SU)(i),class:(0,c.C_)((0,l.SU)(u).e("body"))},[(0,a.WI)(e.$slots,"default")],10,Ow),e.$slots.footer?((0,a.wg)(),(0,a.iD)("footer",{key:0,class:(0,c.C_)((0,l.SU)(u).e("footer"))},[(0,a.WI)(e.$slots,"footer")],2)):(0,a.kq)("v-if",!0)],6))}});var Dw=(0,m.Z)(Pw,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Uw=(0,d.o8)({...Cw,appendToBody:{type:Boolean,default:!1},beforeClose:{type:(0,d.Cq)(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Lw={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[p.f_]:e=>(0,h.jn)(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0};var Bw=n(1258);const Mw=(e,t)=>{const n=(0,a.FN)(),r=n.emit,{nextZIndex:o}=(0,Wr.Cn)();let i="";const c=(0,xr.Me)(),u=(0,xr.Me)(),d=(0,l.iH)(!1),f=(0,l.iH)(!1),g=(0,l.iH)(!1),m=(0,l.iH)(e.zIndex||o());let w,b;const S=(0,s.WS)("namespace",y.tL),_=(0,a.Fl)((()=>{const t={},n=`--${S.value}-dialog`;return e.fullscreen||(e.top&&(t[`${n}-margin-top`]=e.top),e.width&&(t[`${n}-width`]=(0,v.Nn)(e.width))),t})),E=(0,a.Fl)((()=>e.alignCenter?{display:"flex"}:{}));function k(){r("opened")}function C(){r("closed"),r(p.f_,!1),e.destroyOnClose&&(g.value=!1)}function I(){r("close")}function A(){null==b||b(),null==w||w(),e.openDelay&&e.openDelay>0?({stop:w}=(0,h.eM)((()=>O()),e.openDelay)):O()}function T(){null==w||w(),null==b||b(),e.closeDelay&&e.closeDelay>0?({stop:b}=(0,h.eM)((()=>N()),e.closeDelay)):N()}function R(){function t(e){e||(f.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(t):T()}function x(){e.closeOnClickModal&&R()}function O(){h.C5&&(d.value=!0)}function N(){d.value=!1}function P(){r("openAutoFocus")}function D(){r("closeAutoFocus")}function U(e){var t;"pointer"===(null==(t=e.detail)?void 0:t.focusReason)&&e.preventDefault()}function L(){e.closeOnPressEscape&&R()}return e.lockScroll&&(0,Bw.W)(d),(0,a.YP)((()=>e.modelValue),(n=>{n?(f.value=!1,A(),g.value=!0,m.value=e.zIndex?m.value++:o(),(0,a.Y3)((()=>{r("open"),t.value&&(t.value.scrollTop=0)}))):d.value&&T()})),(0,a.YP)((()=>e.fullscreen),(e=>{t.value&&(e?(i=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=i)})),(0,a.bv)((()=>{e.modelValue&&(d.value=!0,g.value=!0,A())})),{afterEnter:k,afterLeave:C,beforeLeave:I,handleClose:R,onModalClick:x,close:T,doClose:N,onOpenAutoFocus:P,onCloseAutoFocus:D,onCloseRequested:L,onFocusoutPrevented:U,titleId:c,bodyId:u,closed:f,style:_,overlayDialogStyle:E,rendered:g,visible:d,zIndex:m}};var Fw=n(4420);const jw=["aria-label","aria-labelledby","aria-describedby"],zw=(0,a.aZ)({name:"ElDialog",inheritAttrs:!1}),$w=(0,a.aZ)({...zw,props:Uw,emits:Lw,setup(e,{expose:t}){const n=e,r=(0,a.Rr)();(0,Os.A)({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},(0,a.Fl)((()=>!!r.title))),(0,Os.A)({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},(0,a.Fl)((()=>!!n.customClass)));const o=(0,y.s3)("dialog"),s=(0,l.iH)(),i=(0,l.iH)(),u=(0,l.iH)(),{visible:d,titleId:h,bodyId:p,style:f,overlayDialogStyle:g,rendered:m,zIndex:v,afterEnter:w,afterLeave:b,beforeLeave:S,handleClose:_,onModalClick:E,onOpenAutoFocus:k,onCloseAutoFocus:C,onCloseRequested:I,onFocusoutPrevented:T}=Mw(n,s);(0,a.JJ)(kw,{dialogRef:s,headerRef:i,bodyId:p,ns:o,rendered:m,style:f});const R=(0,Fw.S)(E),x=(0,a.Fl)((()=>n.draggable&&!n.fullscreen));return t({visible:d,dialogContentRef:u}),(e,t)=>((0,a.wg)(),(0,a.j4)(a.lR,{to:"body",disabled:!e.appendToBody},[(0,a.Wm)(A.uT,{name:"dialog-fade",onAfterEnter:(0,l.SU)(w),onAfterLeave:(0,l.SU)(b),onBeforeLeave:(0,l.SU)(S),persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)((0,l.SU)(Ew.F6),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":(0,l.SU)(v)},{default:(0,a.w5)((()=>[(0,a._)("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:(0,l.SU)(h),"aria-describedby":(0,l.SU)(p),class:(0,c.C_)(`${(0,l.SU)(o).namespace.value}-overlay-dialog`),style:(0,c.j5)((0,l.SU)(g)),onClick:t[0]||(t[0]=(...e)=>(0,l.SU)(R).onClick&&(0,l.SU)(R).onClick(...e)),onMousedown:t[1]||(t[1]=(...e)=>(0,l.SU)(R).onMousedown&&(0,l.SU)(R).onMousedown(...e)),onMouseup:t[2]||(t[2]=(...e)=>(0,l.SU)(R).onMouseup&&(0,l.SU)(R).onMouseup(...e))},[(0,a.Wm)((0,l.SU)(Zr.Z),{loop:"",trapped:(0,l.SU)(d),"focus-start-el":"container",onFocusAfterTrapped:(0,l.SU)(k),onFocusAfterReleased:(0,l.SU)(C),onFocusoutPrevented:(0,l.SU)(T),onReleaseRequested:(0,l.SU)(I)},{default:(0,a.w5)((()=>[(0,l.SU)(m)?((0,a.wg)(),(0,a.j4)(Dw,(0,a.dG)({key:0,ref_key:"dialogContentRef",ref:u},e.$attrs,{"custom-class":e.customClass,center:e.center,"align-center":e.alignCenter,"close-icon":e.closeIcon,draggable:(0,l.SU)(x),fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,onClose:(0,l.SU)(_)}),(0,a.Nv)({header:(0,a.w5)((()=>[e.$slots.title?(0,a.WI)(e.$slots,"title",{key:1}):(0,a.WI)(e.$slots,"header",{key:0,close:(0,l.SU)(_),titleId:(0,l.SU)(h),titleClass:(0,l.SU)(o).e("title")})])),default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"footer")]))}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):(0,a.kq)("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,jw)])),_:3},8,["mask","overlay-class","z-index"]),[[A.F8,(0,l.SU)(d)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Vw=(0,m.Z)($w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Hw=(0,C.nz)(Vw),Kw=(0,d.o8)({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:(0,d.Cq)(String),default:"solid"}}),qw=(0,a.aZ)({name:"ElDivider"}),Ww=(0,a.aZ)({...qw,props:Kw,setup(e){const t=e,n=(0,y.s3)("divider"),r=(0,a.Fl)((()=>n.cssVar({"border-style":t.borderStyle})));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(n).b(),(0,l.SU)(n).m(e.direction)]),style:(0,c.j5)((0,l.SU)(r)),role:"separator"},[e.$slots.default&&"vertical"!==e.direction?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)([(0,l.SU)(n).e("text"),(0,l.SU)(n).is(e.contentPosition)])},[(0,a.WI)(e.$slots,"default")],2)):(0,a.kq)("v-if",!0)],6))}});var Yw=(0,m.Z)(Ww,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const Gw=(0,C.nz)(Yw),Zw=(0,d.o8)({...Uw,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),Jw=Lw,Qw=(0,a.aZ)({name:"ElDrawer",components:{ElOverlay:Ew.F6,ElFocusTrap:Zr.Z,ElIcon:T.gn,Close:ae.x8P},inheritAttrs:!1,props:Zw,emits:Jw,setup(e,{slots:t}){(0,Os.A)({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},(0,a.Fl)((()=>!!t.title))),(0,Os.A)({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},(0,a.Fl)((()=>!!e.customClass)));const n=(0,l.iH)(),r=(0,l.iH)(),o=(0,y.s3)("drawer"),{t:s}=(0,_s.bU)(),i=(0,a.Fl)((()=>"rtl"===e.direction||"ltr"===e.direction)),c=(0,a.Fl)((()=>(0,v.Nn)(e.size)));return{...Mw(e,n),drawerRef:n,focusStartRef:r,isHorizontal:i,drawerSize:c,ns:o,t:s}}}),Xw=["aria-label","aria-labelledby","aria-describedby"],eb=["id"],tb=["aria-label"],nb=["id"];function rb(e,t,n,r,o,s){const i=(0,a.up)("close"),l=(0,a.up)("el-icon"),u=(0,a.up)("el-focus-trap"),d=(0,a.up)("el-overlay");return(0,a.wg)(),(0,a.j4)(a.lR,{to:"body",disabled:!e.appendToBody},[(0,a.Wm)(A.uT,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:(0,a.w5)((()=>[(0,a._)("div",(0,a.dG)({ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId},e.$attrs,{class:[e.ns.b(),e.direction,e.visible&&"open",e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,role:"dialog",onClick:t[1]||(t[1]=(0,A.iM)((()=>{}),["stop"]))}),[(0,a._)("span",{ref:"focusStartRef",class:(0,c.C_)(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?((0,a.wg)(),(0,a.iD)("header",{key:0,class:(0,c.C_)(e.ns.e("header"))},[e.$slots.title?(0,a.WI)(e.$slots,"title",{key:1},(()=>[(0,a.kq)(" DEPRECATED SLOT ")])):(0,a.WI)(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},(()=>[e.$slots.title?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",{key:0,id:e.titleId,role:"heading",class:(0,c.C_)(e.ns.e("title"))},(0,c.zw)(e.title),11,eb))])),e.showClose?((0,a.wg)(),(0,a.iD)("button",{key:2,"aria-label":e.t("el.drawer.close"),class:(0,c.C_)(e.ns.e("close-btn")),type:"button",onClick:t[0]||(t[0]=(...t)=>e.handleClose&&e.handleClose(...t))},[(0,a.Wm)(l,{class:(0,c.C_)(e.ns.e("close"))},{default:(0,a.w5)((()=>[(0,a.Wm)(i)])),_:1},8,["class"])],10,tb)):(0,a.kq)("v-if",!0)],2)):(0,a.kq)("v-if",!0),e.rendered?((0,a.wg)(),(0,a.iD)("div",{key:1,id:e.bodyId,class:(0,c.C_)(e.ns.e("body"))},[(0,a.WI)(e.$slots,"default")],10,nb)):(0,a.kq)("v-if",!0),e.$slots.footer?((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,c.C_)(e.ns.e("footer"))},[(0,a.WI)(e.$slots,"footer")],2)):(0,a.kq)("v-if",!0)],16,Xw)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])])),_:3},8,["mask","overlay-class","z-index","onClick"]),[[A.F8,e.visible]])])),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var ob=(0,m.Z)(Qw,[["render",rb],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const sb=(0,C.nz)(ob),ib=(0,a.aZ)({inheritAttrs:!1});function ab(e,t,n,r,o,s){return(0,a.WI)(e.$slots,"default")}var lb=(0,m.Z)(ib,[["render",ab],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const cb=(0,a.aZ)({name:"ElCollectionItem",inheritAttrs:!1});function ub(e,t,n,r,o,s){return(0,a.WI)(e.$slots,"default")}var db=(0,m.Z)(cb,[["render",ub],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const hb="data-el-collection-item",pb=e=>{const t=`El${e}Collection`,n=`${t}Item`,r=Symbol(t),o=Symbol(n),s={...lb,name:t,setup(){const e=(0,l.iH)(null),t=new Map,n=()=>{const n=(0,l.SU)(e);if(!n)return[];const r=Array.from(n.querySelectorAll(`[${hb}]`)),o=[...t.values()];return o.sort(((e,t)=>r.indexOf(e.ref)-r.indexOf(t.ref)))};(0,a.JJ)(r,{itemMap:t,getItems:n,collectionRef:e})}},i={...db,name:n,setup(e,{attrs:t}){const n=(0,l.iH)(null),s=(0,a.f3)(r,void 0);(0,a.JJ)(o,{collectionItemRef:n}),(0,a.bv)((()=>{const e=(0,l.SU)(n);e&&s.itemMap.set(e,{ref:e,...t})})),(0,a.Jd)((()=>{const e=(0,l.SU)(n);s.itemMap.delete(e)}))}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:s,ElCollectionItem:i}},fb=(0,d.o8)({trigger:Qn.trigger,effect:{...Gn.effect,default:"light"},type:{type:(0,d.Cq)(String)},placement:{type:(0,d.Cq)(String),default:"bottom"},popperOptions:{type:(0,d.Cq)(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:(0,d.Cq)([Number,String]),default:0},maxHeight:{type:(0,d.Cq)([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:(0,d.Cq)(Object)},teleported:Gn.teleported}),gb=(0,d.o8)({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:x.AA}}),mb=(0,d.o8)({onKeydown:{type:(0,d.Cq)(Function)}}),yb=[Jn.n.down,Jn.n.pageDown,Jn.n.home],vb=[Jn.n.up,Jn.n.pageUp,Jn.n.end],wb=[...yb,...vb],{ElCollection:bb,ElCollectionItem:Sb,COLLECTION_INJECTION_KEY:_b,COLLECTION_ITEM_INJECTION_KEY:Eb}=pb("Dropdown"),kb=Symbol("elDropdown"),Cb=(0,d.o8)({style:{type:(0,d.Cq)([String,Array,Object])},currentTabId:{type:(0,d.Cq)(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:(0,d.Cq)(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ib,ElCollectionItem:Ab,COLLECTION_INJECTION_KEY:Tb,COLLECTION_ITEM_INJECTION_KEY:Rb}=pb("RovingFocusGroup"),xb=Symbol("elRovingFocusGroup"),Ob=Symbol("elRovingFocusGroupItem"),Nb={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Pb=(e,t)=>{if("rtl"!==t)return e;switch(e){case Jn.n.right:return Jn.n.left;case Jn.n.left:return Jn.n.right;default:return e}},Db=(e,t,n)=>{const r=Pb(e.key,n);if(("vertical"!==t||![Jn.n.left,Jn.n.right].includes(r))&&("horizontal"!==t||![Jn.n.up,Jn.n.down].includes(r)))return Nb[r]},Ub=(e,t)=>e.map(((n,r)=>e[(r+t)%e.length])),Lb=e=>{const{activeElement:t}=document;for(const n of e){if(n===t)return;if(n.focus(),t!==document.activeElement)return}},Bb="currentTabIdChange",Mb="rovingFocusGroup.entryFocus",Fb={bubbles:!1,cancelable:!0},jb=(0,a.aZ)({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Cb,emits:[Bb,"entryFocus"],setup(e,{emit:t}){var n;const r=(0,l.iH)(null!=(n=e.currentTabId||e.defaultCurrentTabId)?n:null),o=(0,l.iH)(!1),s=(0,l.iH)(!1),i=(0,l.iH)(null),{getItems:c}=(0,a.f3)(Tb,void 0),d=(0,a.Fl)((()=>[{outline:"none"},e.style])),h=e=>{t(Bb,e)},p=()=>{o.value=!0},f=pr((t=>{var n;null==(n=e.onMousedown)||n.call(e,t)}),(()=>{s.value=!0})),g=pr((t=>{var n;null==(n=e.onFocus)||n.call(e,t)}),(e=>{const t=!(0,l.SU)(s),{target:n,currentTarget:i}=e;if(n===i&&t&&!(0,l.SU)(o)){const e=new Event(Mb,Fb);if(null==i||i.dispatchEvent(e),!e.defaultPrevented){const e=c().filter((e=>e.focusable)),t=e.find((e=>e.active)),n=e.find((e=>e.id===(0,l.SU)(r))),o=[t,n,...e].filter(Boolean),s=o.map((e=>e.ref));Lb(s)}}s.value=!1})),m=pr((t=>{var n;null==(n=e.onBlur)||n.call(e,t)}),(()=>{o.value=!1})),y=(...e)=>{t("entryFocus",...e)};(0,a.JJ)(xb,{currentTabbedId:(0,l.OT)(r),loop:(0,l.Vh)(e,"loop"),tabIndex:(0,a.Fl)((()=>(0,l.SU)(o)?-1:0)),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:d,orientation:(0,l.Vh)(e,"orientation"),dir:(0,l.Vh)(e,"dir"),onItemFocus:h,onItemShiftTab:p,onBlur:m,onFocus:g,onMousedown:f}),(0,a.YP)((()=>e.currentTabId),(e=>{r.value=null!=e?e:null})),(0,u.ORN)(i,Mb,y)}});function zb(e,t,n,r,o,s){return(0,a.WI)(e.$slots,"default")}var $b=(0,m.Z)(jb,[["render",zb],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const Vb=(0,a.aZ)({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ib,ElRovingFocusGroupImpl:$b}});function Hb(e,t,n,r,o,s){const i=(0,a.up)("el-roving-focus-group-impl"),l=(0,a.up)("el-focus-group-collection");return(0,a.wg)(),(0,a.j4)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,(0,c.vs)((0,a.F4)(e.$attrs)),{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16)])),_:3})}var Kb=(0,m.Z)(Vb,[["render",Hb],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const{ButtonGroup:qb}=ss.mi,Wb=(0,a.aZ)({name:"ElDropdown",components:{ElButton:ss.mi,ElButtonGroup:qb,ElScrollbar:Ie,ElDropdownCollection:bb,ElTooltip:ho,ElRovingFocusGroup:Kb,ElOnlyChild:Sr,ElIcon:T.gn,ArrowDown:ae.K5e},props:fb,emits:["visible-change","click","command"],setup(e,{emit:t}){const n=(0,a.FN)(),r=(0,y.s3)("dropdown"),{t:o}=(0,_s.bU)(),s=(0,l.iH)(),i=(0,l.iH)(),u=(0,l.iH)(null),d=(0,l.iH)(null),h=(0,l.iH)(null),p=(0,l.iH)(null),f=(0,l.iH)(!1),g=[Jn.n.enter,Jn.n.space,Jn.n.down],m=(0,a.Fl)((()=>({maxHeight:(0,v.Nn)(e.maxHeight)}))),w=(0,a.Fl)((()=>[r.m(C.value)])),b=(0,xr.Me)().value,S=(0,a.Fl)((()=>e.id||b));function _(){E()}function E(){var e;null==(e=u.value)||e.onClose()}function k(){var e;null==(e=u.value)||e.onOpen()}(0,a.YP)([s,(0,l.Vh)(e,"trigger")],(([e,t],[n])=>{var r,o,s;const i=(0,c.kJ)(t)?t:[t];(null==(r=null==n?void 0:n.$el)?void 0:r.removeEventListener)&&n.$el.removeEventListener("pointerenter",A),(null==(o=null==e?void 0:e.$el)?void 0:o.removeEventListener)&&e.$el.removeEventListener("pointerenter",A),(null==(s=null==e?void 0:e.$el)?void 0:s.addEventListener)&&i.includes("hover")&&e.$el.addEventListener("pointerenter",A)}),{immediate:!0}),(0,a.Jd)((()=>{var e,t;(null==(t=null==(e=s.value)?void 0:e.$el)?void 0:t.removeEventListener)&&s.value.$el.removeEventListener("pointerenter",A)}));const C=(0,mo.Cd)();function I(...e){t("command",...e)}function A(){var e,t;null==(t=null==(e=s.value)?void 0:e.$el)||t.focus()}function T(){}function R(){const e=(0,l.SU)(d);null==e||e.focus(),p.value=null}function x(e){p.value=e}function O(e){f.value||(e.preventDefault(),e.stopImmediatePropagation())}function N(){t("visible-change",!0)}function P(e){"keydown"===(null==e?void 0:e.type)&&d.value.focus()}function D(){t("visible-change",!1)}(0,a.JJ)(kb,{contentRef:d,role:(0,a.Fl)((()=>e.role)),triggerId:S,isUsingKeyboard:f,onItemEnter:T,onItemLeave:R}),(0,a.JJ)("elDropdown",{instance:n,dropdownSize:C,handleClick:_,commandHandler:I,trigger:(0,l.Vh)(e,"trigger"),hideOnClick:(0,l.Vh)(e,"hideOnClick")});const U=e=>{var t,n;e.preventDefault(),null==(n=null==(t=d.value)?void 0:t.focus)||n.call(t,{preventScroll:!0})},L=e=>{t("click",e)};return{t:o,ns:r,scrollbar:h,wrapStyle:m,dropdownTriggerKls:w,dropdownSize:C,triggerId:S,triggerKeys:g,currentTabId:p,handleCurrentTabIdChange:x,handlerMainButtonClick:L,handleEntryFocus:O,handleClose:E,handleOpen:k,handleBeforeShowTooltip:N,handleShowTooltip:P,handleBeforeHideTooltip:D,onFocusAfterTrapped:U,popperRef:u,contentRef:d,triggeringElementRef:s,referenceElementRef:i}}});function Yb(e,t,n,r,o,s){var i;const l=(0,a.up)("el-dropdown-collection"),u=(0,a.up)("el-roving-focus-group"),d=(0,a.up)("el-scrollbar"),h=(0,a.up)("el-only-child"),p=(0,a.up)("el-tooltip"),f=(0,a.up)("el-button"),g=(0,a.up)("arrow-down"),m=(0,a.up)("el-icon"),y=(0,a.up)("el-button-group");return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([e.ns.b(),e.ns.is("disabled",e.disabled)])},[(0,a.Wm)(p,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":null==(i=e.referenceElementRef)?void 0:i.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":"hover"===e.trigger?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},(0,a.Nv)({content:(0,a.w5)((()=>[(0,a.Wm)(d,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"dropdown")])),_:3})])),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])])),_:3},8,["wrap-style","view-class"])])),_:2},[e.splitButton?void 0:{name:"default",fn:(0,a.w5)((()=>[(0,a.Wm)(h,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["id","tabindex"])]))}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?((0,a.wg)(),(0,a.j4)(y,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(f,(0,a.dG)({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16,["size","type","disabled","tabindex","onClick"]),(0,a.Wm)(f,(0,a.dG)({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:(0,c.C_)(e.ns.e("icon"))},{default:(0,a.w5)((()=>[(0,a.Wm)(g)])),_:1},8,["class"])])),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])])),_:3})):(0,a.kq)("v-if",!0)],2)}var Gb=(0,m.Z)(Wb,[["render",Yb],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const Zb=(0,a.aZ)({name:"DropdownItemImpl",components:{ElIcon:T.gn},props:gb,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:t}){const n=(0,y.s3)("dropdown"),{role:r}=(0,a.f3)(kb,void 0),{collectionItemRef:o}=(0,a.f3)(Eb,void 0),{collectionItemRef:s}=(0,a.f3)(Rb,void 0),{rovingFocusGroupItemRef:i,tabIndex:l,handleFocus:c,handleKeydown:u,handleMousedown:d}=(0,a.f3)(Ob,void 0),h=Tw(o,s,i),p=(0,a.Fl)((()=>"menu"===r.value?"menuitem":"navigation"===r.value?"link":"button")),f=pr((e=>{const{code:n}=e;if(n===Jn.n.enter||n===Jn.n.space)return e.preventDefault(),e.stopImmediatePropagation(),t("clickimpl",e),!0}),u);return{ns:n,itemRef:h,dataset:{[hb]:""},role:p,tabIndex:l,handleFocus:c,handleKeydown:f,handleMousedown:d}}}),Jb=["aria-disabled","tabindex","role"];function Qb(e,t,n,r,o,s){const i=(0,a.up)("el-icon");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.divided?((0,a.wg)(),(0,a.iD)("li",(0,a.dG)({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):(0,a.kq)("v-if",!0),(0,a._)("li",(0,a.dG)({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:t[0]||(t[0]=t=>e.$emit("clickimpl",t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onKeydown:t[2]||(t[2]=(0,A.iM)(((...t)=>e.handleKeydown&&e.handleKeydown(...t)),["self"])),onMousedown:t[3]||(t[3]=(...t)=>e.handleMousedown&&e.handleMousedown(...t)),onPointermove:t[4]||(t[4]=t=>e.$emit("pointermove",t)),onPointerleave:t[5]||(t[5]=t=>e.$emit("pointerleave",t))}),[e.icon?((0,a.wg)(),(0,a.j4)(i,{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:1})):(0,a.kq)("v-if",!0),(0,a.WI)(e.$slots,"default")],16,Jb)],64)}var Xb=(0,m.Z)(Zb,[["render",Qb],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const eS=()=>{const e=(0,a.f3)("elDropdown",{}),t=(0,a.Fl)((()=>null==e?void 0:e.dropdownSize));return{elDropdown:e,_elDropdownSize:t}},tS=(0,a.aZ)({components:{ElRovingFocusCollectionItem:Ab},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:n,loop:r,onItemFocus:o,onItemShiftTab:s}=(0,a.f3)(xb,void 0),{getItems:i}=(0,a.f3)(Tb,void 0),c=(0,xr.Me)(),u=(0,l.iH)(null),d=pr((e=>{t("mousedown",e)}),(t=>{e.focusable?o((0,l.SU)(c)):t.preventDefault()})),h=pr((e=>{t("focus",e)}),(()=>{o((0,l.SU)(c))})),p=pr((e=>{t("keydown",e)}),(e=>{const{key:t,shiftKey:n,target:o,currentTarget:l}=e;if(t===Jn.n.tab&&n)return void s();if(o!==l)return;const c=Db(e);if(c){e.preventDefault();const t=i().filter((e=>e.focusable));let n=t.map((e=>e.ref));switch(c){case"last":n.reverse();break;case"prev":case"next":{"prev"===c&&n.reverse();const e=n.indexOf(l);n=r.value?Ub(n,e+1):n.slice(e+1);break}default:break}(0,a.Y3)((()=>{Lb(n)}))}})),f=(0,a.Fl)((()=>n.value===(0,l.SU)(c)));return(0,a.JJ)(Ob,{rovingFocusGroupItemRef:u,tabIndex:(0,a.Fl)((()=>(0,l.SU)(f)?0:-1)),handleMousedown:d,handleFocus:h,handleKeydown:p}),{id:c,handleKeydown:p,handleFocus:h,handleMousedown:d}}});function nS(e,t,n,r,o,s){const i=(0,a.up)("el-roving-focus-collection-item");return(0,a.wg)(),(0,a.j4)(i,{id:e.id,focusable:e.focusable,active:e.active},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["id","focusable","active"])}var rS=(0,m.Z)(tS,[["render",nS],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const oS=(0,a.aZ)({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Sb,ElRovingFocusItem:rS,ElDropdownItemImpl:Xb},inheritAttrs:!1,props:gb,emits:["pointermove","pointerleave","click"],setup(e,{emit:t,attrs:n}){const{elDropdown:r}=eS(),o=(0,a.FN)(),s=(0,l.iH)(null),i=(0,a.Fl)((()=>{var e,t;return null!=(t=null==(e=(0,l.SU)(s))?void 0:e.textContent)?t:""})),{onItemEnter:c,onItemLeave:u}=(0,a.f3)(kb,void 0),d=pr((e=>(t("pointermove",e),e.defaultPrevented)),fr((t=>{if(e.disabled)return void u(t);const n=t.currentTarget;n===document.activeElement||n.contains(document.activeElement)||(c(t),t.defaultPrevented||null==n||n.focus())}))),h=pr((e=>(t("pointerleave",e),e.defaultPrevented)),fr((e=>{u(e)}))),p=pr((n=>{if(!e.disabled)return t("click",n),"keydown"!==n.type&&n.defaultPrevented}),(t=>{var n,s,i;e.disabled?t.stopImmediatePropagation():((null==(n=null==r?void 0:r.hideOnClick)?void 0:n.value)&&(null==(s=r.handleClick)||s.call(r)),null==(i=r.commandHandler)||i.call(r,e.command,o,t))})),f=(0,a.Fl)((()=>({...e,...n})));return{handleClick:p,handlePointerMove:d,handlePointerLeave:h,textContent:i,propsAndAttrs:f}}});function sS(e,t,n,r,o,s){var i;const l=(0,a.up)("el-dropdown-item-impl"),c=(0,a.up)("el-roving-focus-item"),u=(0,a.up)("el-dropdown-collection-item");return(0,a.wg)(),(0,a.j4)(u,{disabled:e.disabled,"text-value":null!=(i=e.textValue)?i:e.textContent},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{focusable:!e.disabled},{default:(0,a.w5)((()=>[(0,a.Wm)(l,(0,a.dG)(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16,["onPointerleave","onPointermove","onClickimpl"])])),_:3},8,["focusable"])])),_:3},8,["disabled","text-value"])}var iS=(0,m.Z)(oS,[["render",sS],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const aS=(0,a.aZ)({name:"ElDropdownMenu",props:mb,setup(e){const t=(0,y.s3)("dropdown"),{_elDropdownSize:n}=eS(),r=n.value,{focusTrapRef:o,onKeydown:s}=(0,a.f3)(Aw.D5,void 0),{contentRef:i,role:c,triggerId:u}=(0,a.f3)(kb,void 0),{collectionRef:d,getItems:h}=(0,a.f3)(_b,void 0),{rovingFocusGroupRef:p,rovingFocusGroupRootStyle:f,tabIndex:g,onBlur:m,onFocus:v,onMousedown:w}=(0,a.f3)(xb,void 0),{collectionRef:b}=(0,a.f3)(Tb,void 0),S=(0,a.Fl)((()=>[t.b("menu"),t.bm("menu",null==r?void 0:r.value)])),_=Tw(i,d,o,p,b),E=pr((t=>{var n;null==(n=e.onKeydown)||n.call(e,t)}),(e=>{const{currentTarget:t,code:n,target:r}=e;t.contains(r);if(Jn.n.tab===n&&e.stopImmediatePropagation(),e.preventDefault(),r!==(0,l.SU)(i))return;if(!wb.includes(n))return;const o=h().filter((e=>!e.disabled)),s=o.map((e=>e.ref));vb.includes(n)&&s.reverse(),Lb(s)})),k=e=>{E(e),s(e)};return{size:r,rovingFocusGroupRootStyle:f,tabIndex:g,dropdownKls:S,role:c,triggerId:u,dropdownListWrapperRef:_,handleKeydown:k,onBlur:m,onFocus:v,onMousedown:w}}}),lS=["role","aria-labelledby"];function cS(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("ul",{ref:e.dropdownListWrapperRef,class:(0,c.C_)(e.dropdownKls),style:(0,c.j5)(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:t[0]||(t[0]=(...t)=>e.onBlur&&e.onBlur(...t)),onFocus:t[1]||(t[1]=(...t)=>e.onFocus&&e.onFocus(...t)),onKeydown:t[2]||(t[2]=(0,A.iM)(((...t)=>e.handleKeydown&&e.handleKeydown(...t)),["self"])),onMousedown:t[3]||(t[3]=(0,A.iM)(((...t)=>e.onMousedown&&e.onMousedown(...t)),["self"]))},[(0,a.WI)(e.$slots,"default")],46,lS)}var uS=(0,m.Z)(aS,[["render",cS],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const dS=(0,C.nz)(Gb,{DropdownItem:iS,DropdownMenu:uS}),hS=(0,C.dp)(iS),pS=(0,C.dp)(uS),fS={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},gS=["id"],mS=["stop-color"],yS=["stop-color"],vS=["id"],wS=["stop-color"],bS=["stop-color"],SS=["id"],_S={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},ES={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},kS={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},CS=["fill"],IS=["fill"],AS={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},TS=["fill"],RS=["fill"],xS=["fill"],OS=["fill"],NS=["fill"],PS={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},DS=["fill","xlink:href"],US=["fill","mask"],LS=["fill"],BS=(0,a.aZ)({name:"ImgEmpty"}),MS=(0,a.aZ)({...BS,setup(e){const t=(0,y.s3)("empty"),n=(0,xr.Me)();return(e,r)=>((0,a.wg)(),(0,a.iD)("svg",fS,[(0,a._)("defs",null,[(0,a._)("linearGradient",{id:`linearGradient-1-${(0,l.SU)(n)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[(0,a._)("stop",{"stop-color":`var(${(0,l.SU)(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,mS),(0,a._)("stop",{"stop-color":`var(${(0,l.SU)(t).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,yS)],8,gS),(0,a._)("linearGradient",{id:`linearGradient-2-${(0,l.SU)(n)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[(0,a._)("stop",{"stop-color":`var(${(0,l.SU)(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,wS),(0,a._)("stop",{"stop-color":`var(${(0,l.SU)(t).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,bS)],8,vS),(0,a._)("rect",{id:`path-3-${(0,l.SU)(n)}`,x:"0",y:"0",width:"17",height:"36"},null,8,SS)]),(0,a._)("g",_S,[(0,a._)("g",ES,[(0,a._)("g",kS,[(0,a._)("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-3")})`},null,8,CS),(0,a._)("polygon",{id:"Rectangle-Copy-14",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,IS),(0,a._)("g",AS,[(0,a._)("polygon",{id:"Rectangle-Copy-10",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,TS),(0,a._)("polygon",{id:"Rectangle-Copy-11",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,RS),(0,a._)("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${(0,l.SU)(n)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,xS),(0,a._)("polygon",{id:"Rectangle-Copy-13",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,OS)]),(0,a._)("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${(0,l.SU)(n)})`,x:"13",y:"45",width:"40",height:"36"},null,8,NS),(0,a._)("g",PS,[(0,a._)("use",{id:"Mask",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${(0,l.SU)(n)}`},null,8,DS),(0,a._)("polygon",{id:"Rectangle-Copy",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${(0,l.SU)(n)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,US)]),(0,a._)("polygon",{id:"Rectangle-Copy-18",fill:`var(${(0,l.SU)(t).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,LS)])])])]))}});var FS=(0,m.Z)(MS,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const jS=(0,d.o8)({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),zS=["src"],$S={key:1},VS=(0,a.aZ)({name:"ElEmpty"}),HS=(0,a.aZ)({...VS,props:jS,setup(e){const t=e,{t:n}=(0,_s.bU)(),r=(0,y.s3)("empty"),o=(0,a.Fl)((()=>t.description||n("el.table.emptyText"))),s=(0,a.Fl)((()=>({width:(0,v.Nn)(t.imageSize)})));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(r).b())},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(r).e("image")),style:(0,c.j5)((0,l.SU)(s))},[e.image?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.image,ondragstart:"return false"},null,8,zS)):(0,a.WI)(e.$slots,"image",{key:1},(()=>[(0,a.Wm)(FS)]))],6),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(r).e("description"))},[e.$slots.description?(0,a.WI)(e.$slots,"description",{key:0}):((0,a.wg)(),(0,a.iD)("p",$S,(0,c.zw)((0,l.SU)(o)),1))],2),e.$slots.default?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(r).e("bottom"))},[(0,a.WI)(e.$slots,"default")],2)):(0,a.kq)("v-if",!0)],2))}});var KS=(0,m.Z)(HS,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const qS=(0,C.nz)(KS),WS=(0,d.o8)({size:{type:String,values:Io.k},disabled:Boolean}),YS=(0,d.o8)({...WS,model:Object,rules:{type:(0,d.Cq)(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean}),GS={validate:(e,t,n)=>((0,c.kJ)(e)||(0,c.HD)(e))&&(0,h.jn)(t)&&(0,c.HD)(n)},ZS="ElForm";function JS(){const e=(0,l.iH)([]),t=(0,a.Fl)((()=>{if(!e.value.length)return"0";const t=Math.max(...e.value);return t?`${t}px`:""}));function n(n){const r=e.value.indexOf(n);return-1===r&&"0"===t.value&&(0,w.N)(ZS,`unexpected width ${n}`),r}function r(t,r){if(t&&r){const o=n(r);e.value.splice(o,1,t)}else t&&e.value.push(t)}function o(t){const r=n(t);r>-1&&e.value.splice(r,1)}return{autoLabelWidth:t,registerLabelWidth:r,deregisterLabelWidth:o}}const QS=(e,t)=>{const n=xg(t);return n.length>0?e.filter((e=>e.prop&&n.includes(e.prop))):e},XS="ElForm",e_=(0,a.aZ)({name:XS}),t_=(0,a.aZ)({...e_,props:YS,emits:GS,setup(e,{expose:t,emit:n}){const r=e,o=[],s=(0,mo.Cd)(),i=(0,y.s3)("form"),u=(0,a.Fl)((()=>{const{labelPosition:e,inline:t}=r;return[i.b(),i.m(s.value||"default"),{[i.m(`label-${e}`)]:e,[i.m("inline")]:t}]})),d=e=>{o.push(e)},h=e=>{e.prop&&o.splice(o.indexOf(e),1)},p=(e=[])=>{r.model?QS(o,e).forEach((e=>e.resetField())):(0,w.N)(XS,"model is required for resetFields to work.")},f=(e=[])=>{QS(o,e).forEach((e=>e.clearValidate()))},g=(0,a.Fl)((()=>{const e=!!r.model;return e||(0,w.N)(XS,"model is required for validate to work."),e})),m=e=>{if(0===o.length)return[];const t=QS(o,e);return t.length?t:((0,w.N)(XS,"please pass correct props!"),[])},v=async e=>S(void 0,e),b=async(e=[])=>{if(!g.value)return!1;const t=m(e);if(0===t.length)return!0;let n={};for(const o of t)try{await o.validate("")}catch(r){n={...n,...r}}return 0===Object.keys(n).length||Promise.reject(n)},S=async(e=[],t)=>{const n=!(0,c.mf)(t);try{const n=await b(e);return!0===n&&(null==t||t(n)),n}catch(nB){if(nB instanceof Error)throw nB;const o=nB;return r.scrollToError&&_(Object.keys(o)[0]),null==t||t(!1,o),n&&Promise.reject(o)}},_=e=>{var t;const n=QS(o,e)[0];n&&(null==(t=n.$el)||t.scrollIntoView())};return(0,a.YP)((()=>r.rules),(()=>{r.validateOnRuleChange&&v().catch((e=>(0,w.N)(e)))}),{deep:!0}),(0,a.JJ)(Gr.H,(0,l.qj)({...(0,l.BK)(r),emit:n,resetFields:p,clearValidate:f,validateField:S,addField:d,removeField:h,...JS()})),t({validate:v,validateField:S,resetFields:p,clearValidate:f,scrollToField:_}),(e,t)=>((0,a.wg)(),(0,a.iD)("form",{class:(0,c.C_)((0,l.SU)(u))},[(0,a.WI)(e.$slots,"default")],2))}});var n_=(0,m.Z)(t_,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r_.apply(this,arguments)}function o_(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i_(e,t)}function s_(e){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s_(e)}function i_(e,t){return i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i_(e,t)}function a_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(nB){return!1}}function l_(e,t,n){return l_=a_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),s=new o;return n&&i_(s,n.prototype),s},l_.apply(null,arguments)}function c_(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function u_(e){var t="function"===typeof Map?new Map:void 0;return u_=function(e){if(null===e||!c_(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l_(e,arguments,s_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i_(n,e)},u_(e)}var d_=/%[sdj%]/g,h_=function(){};function p_(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function f_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,s=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var i=e.replace(d_,(function(e){if("%%"===e)return"%";if(o>=s)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(nP){return"[Circular]"}break;default:return e}}));return i}return e}function g_(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}function m_(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!g_(t)||"string"!==typeof e||e))}function y_(e,t,n){var r=[],o=0,s=e.length;function i(e){r.push.apply(r,e||[]),o++,o===s&&n(r)}e.forEach((function(e){t(e,i)}))}function v_(e,t,n){var r=0,o=e.length;function s(i){if(i&&i.length)n(i);else{var a=r;r+=1,a<o?t(e[a],s):n([])}}s([])}function w_(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}var b_=function(e){function t(t,n){var r;return r=e.call(this,"Async Validation Error")||this,r.errors=t,r.fields=n,r}return o_(t,e),t}(u_(Error));function S_(e,t,n,r,o){if(t.first){var s=new Promise((function(t,s){var i=function(e){return r(e),e.length?s(new b_(e,p_(e))):t(o)},a=w_(e);v_(a,n,i)}));return s["catch"]((function(e){return e})),s}var i=!0===t.firstFields?Object.keys(e):t.firstFields||[],a=Object.keys(e),l=a.length,c=0,u=[],d=new Promise((function(t,s){var d=function(e){if(u.push.apply(u,e),c++,c===l)return r(u),u.length?s(new b_(u,p_(u))):t(o)};a.length||(r(u),t(o)),a.forEach((function(t){var r=e[t];-1!==i.indexOf(t)?v_(r,n,d):y_(r,n,d)}))}));return d["catch"]((function(e){return e})),d}function __(e){return!(!e||void 0===e.message)}function E_(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}function k_(e,t){return function(n){var r;return r=e.fullFields?E_(t,e.fullFields):t[n.field||e.fullField],__(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function C_(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===typeof r&&"object"===typeof e[n]?e[n]=r_({},e[n],r):e[n]=r}return e}var I_,A_=function(e,t,n,r,o,s){!e.required||n.hasOwnProperty(e.field)&&!m_(t,s||e.type)||r.push(f_(o.messages.required,e.fullField))},T_=function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(f_(o.messages.whitespace,e.fullField))},R_=function(){if(I_)return I_;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",o=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+n+"$)|(?:^"+o+"$)"),i=new RegExp("^"+n+"$"),a=new RegExp("^"+o+"$"),l=function(e){return e&&e.exact?s:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+o+t(e)+")","g")};l.v4=function(e){return e&&e.exact?i:new RegExp(""+t(e)+n+t(e),"g")},l.v6=function(e){return e&&e.exact?a:new RegExp(""+t(e)+o+t(e),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",f="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",m="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',v="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+p+f+g+")"+m+y;return I_=new RegExp("(?:^"+v+"$)","i"),I_},x_={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},O_={integer:function(e){return O_.number(e)&&parseInt(e,10)===e},float:function(e){return O_.number(e)&&!O_.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(nB){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!O_.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(x_.email)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(R_())},hex:function(e){return"string"===typeof e&&!!e.match(x_.hex)}},N_=function(e,t,n,r,o){if(e.required&&void 0===t)A_(e,t,n,r,o);else{var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],i=e.type;s.indexOf(i)>-1?O_[i](t)||r.push(f_(o.messages.types[i],e.fullField,e.type)):i&&typeof t!==e.type&&r.push(f_(o.messages.types[i],e.fullField,e.type))}},P_=function(e,t,n,r,o){var s="number"===typeof e.len,i="number"===typeof e.min,a="number"===typeof e.max,l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,u=null,d="number"===typeof t,h="string"===typeof t,p=Array.isArray(t);if(d?u="number":h?u="string":p&&(u="array"),!u)return!1;p&&(c=t.length),h&&(c=t.replace(l,"_").length),s?c!==e.len&&r.push(f_(o.messages[u].len,e.fullField,e.len)):i&&!a&&c<e.min?r.push(f_(o.messages[u].min,e.fullField,e.min)):a&&!i&&c>e.max?r.push(f_(o.messages[u].max,e.fullField,e.max)):i&&a&&(c<e.min||c>e.max)&&r.push(f_(o.messages[u].range,e.fullField,e.min,e.max))},D_="enum",U_=function(e,t,n,r,o){e[D_]=Array.isArray(e[D_])?e[D_]:[],-1===e[D_].indexOf(t)&&r.push(f_(o.messages[D_],e.fullField,e[D_].join(", ")))},L_=function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(f_(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){var s=new RegExp(e.pattern);s.test(t)||r.push(f_(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}},B_={required:A_,whitespace:T_,type:N_,range:P_,enum:U_,pattern:L_},M_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t,"string")&&!e.required)return n();B_.required(e,t,r,s,o,"string"),m_(t,"string")||(B_.type(e,t,r,s,o),B_.range(e,t,r,s,o),B_.pattern(e,t,r,s,o),!0===e.whitespace&&B_.whitespace(e,t,r,s,o))}n(s)},F_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),void 0!==t&&B_.type(e,t,r,s,o)}n(s)},j_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(""===t&&(t=void 0),m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),void 0!==t&&(B_.type(e,t,r,s,o),B_.range(e,t,r,s,o))}n(s)},z_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),void 0!==t&&B_.type(e,t,r,s,o)}n(s)},$_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),m_(t)||B_.type(e,t,r,s,o)}n(s)},V_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),void 0!==t&&(B_.type(e,t,r,s,o),B_.range(e,t,r,s,o))}n(s)},H_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),void 0!==t&&(B_.type(e,t,r,s,o),B_.range(e,t,r,s,o))}n(s)},K_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if((void 0===t||null===t)&&!e.required)return n();B_.required(e,t,r,s,o,"array"),void 0!==t&&null!==t&&(B_.type(e,t,r,s,o),B_.range(e,t,r,s,o))}n(s)},q_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),void 0!==t&&B_.type(e,t,r,s,o)}n(s)},W_="enum",Y_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o),void 0!==t&&B_[W_](e,t,r,s,o)}n(s)},G_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t,"string")&&!e.required)return n();B_.required(e,t,r,s,o),m_(t,"string")||B_.pattern(e,t,r,s,o)}n(s)},Z_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t,"date")&&!e.required)return n();var a;if(B_.required(e,t,r,s,o),!m_(t,"date"))a=t instanceof Date?t:new Date(t),B_.type(e,a,r,s,o),a&&B_.range(e,a.getTime(),r,s,o)}n(s)},J_=function(e,t,n,r,o){var s=[],i=Array.isArray(t)?"array":typeof t;B_.required(e,t,r,s,o,i),n(s)},Q_=function(e,t,n,r,o){var s=e.type,i=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m_(t,s)&&!e.required)return n();B_.required(e,t,r,i,o,s),m_(t,s)||B_.type(e,t,r,i,o)}n(i)},X_=function(e,t,n,r,o){var s=[],i=e.required||!e.required&&r.hasOwnProperty(e.field);if(i){if(m_(t)&&!e.required)return n();B_.required(e,t,r,s,o)}n(s)},eE={string:M_,method:F_,number:j_,boolean:z_,regexp:$_,integer:V_,float:H_,array:K_,object:q_,enum:Y_,pattern:G_,date:Z_,url:Q_,hex:Q_,email:Q_,required:J_,any:X_};function tE(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var nE=tE(),rE=function(){function e(e){this.rules=null,this._messages=nE,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=C_(tE(),e)),this._messages},t.validate=function(t,n,r){var o=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var s=t,i=n,a=r;if("function"===typeof i&&(a=i,i={}),!this.rules||0===Object.keys(this.rules).length)return a&&a(null,s),Promise.resolve(s);function l(e){var t=[],n={};function r(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var o=0;o<e.length;o++)r(e[o]);t.length?(n=p_(t),a(t,n)):a(null,s)}if(i.messages){var c=this.messages();c===nE&&(c=tE()),C_(c,i.messages),i.messages=c}else i.messages=this.messages();var u={},d=i.keys||Object.keys(this.rules);d.forEach((function(e){var n=o.rules[e],r=s[e];n.forEach((function(n){var i=n;"function"===typeof i.transform&&(s===t&&(s=r_({},s)),r=s[e]=i.transform(r)),i="function"===typeof i?{validator:i}:r_({},i),i.validator=o.getValidationMethod(i),i.validator&&(i.field=e,i.fullField=i.fullField||e,i.type=o.getType(i),u[e]=u[e]||[],u[e].push({rule:i,value:r,source:s,field:e}))}))}));var h={};return S_(u,i,(function(t,n){var r,o=t.rule,a=("object"===o.type||"array"===o.type)&&("object"===typeof o.fields||"object"===typeof o.defaultField);function l(e,t){return r_({},t,{fullField:o.fullField+"."+e,fullFields:o.fullFields?[].concat(o.fullFields,[e]):[e]})}function c(r){void 0===r&&(r=[]);var c=Array.isArray(r)?r:[r];!i.suppressWarning&&c.length&&e.warning("async-validator:",c),c.length&&void 0!==o.message&&(c=[].concat(o.message));var u=c.map(k_(o,s));if(i.first&&u.length)return h[o.field]=1,n(u);if(a){if(o.required&&!t.value)return void 0!==o.message?u=[].concat(o.message).map(k_(o,s)):i.error&&(u=[i.error(o,f_(i.messages.required,o.field))]),n(u);var d={};o.defaultField&&Object.keys(t.value).map((function(e){d[e]=o.defaultField})),d=r_({},d,t.rule.fields);var p={};Object.keys(d).forEach((function(e){var t=d[e],n=Array.isArray(t)?t:[t];p[e]=n.map(l.bind(null,e))}));var f=new e(p);f.messages(i.messages),t.rule.options&&(t.rule.options.messages=i.messages,t.rule.options.error=i.error),f.validate(t.value,t.rule.options||i,(function(e){var t=[];u&&u.length&&t.push.apply(t,u),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(u)}if(a=a&&(o.required||!o.required&&t.value),o.field=t.field,o.asyncValidator)r=o.asyncValidator(o,t.value,c,t.source,i);else if(o.validator){try{r=o.validator(o,t.value,c,t.source,i)}catch(w){null==console.error||console.error(w),i.suppressValidatorError||setTimeout((function(){throw w}),0),c(w.message)}!0===r?c():!1===r?c("function"===typeof o.message?o.message(o.fullField||o.field):o.message||(o.fullField||o.field)+" fails"):r instanceof Array?c(r):r instanceof Error&&c(r.message)}r&&r.then&&r.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){l(e)}),s)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!eE.hasOwnProperty(e.type))throw new Error(f_("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?eE.required:eE[this.getType(e)]||void 0},e}();rE.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");eE[e]=t},rE.warning=h_,rE.messages=nE,rE.validators=eE;var oE=4;function sE(e){return gd(e,oE)}var iE=sE;const aE=["","error","validating","success"],lE=(0,d.o8)({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:(0,d.Cq)([String,Array])},required:{type:Boolean,default:void 0},rules:{type:(0,d.Cq)([Object,Array])},error:String,validateStatus:{type:String,values:aE},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Io.k}}),cE="ElLabelWrap";var uE=(0,a.aZ)({name:cE,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const n=(0,a.f3)(Gr.H,void 0),r=(0,a.f3)(Gr.K);r||(0,w._)(cE,"usage: <el-form-item><label-wrap /></el-form-item>");const o=(0,y.s3)("form"),s=(0,l.iH)(),i=(0,l.iH)(0),c=()=>{var e;if(null==(e=s.value)?void 0:e.firstElementChild){const e=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(e))}return 0},d=(r="update")=>{(0,a.Y3)((()=>{t.default&&e.isAutoWidth&&("update"===r?i.value=c():"remove"===r&&(null==n||n.deregisterLabelWidth(i.value)))}))},h=()=>d("update");return(0,a.bv)((()=>{h()})),(0,a.Jd)((()=>{d("remove")})),(0,a.ic)((()=>h())),(0,a.YP)(i,((t,r)=>{e.updateAll&&(null==n||n.registerLabelWidth(t,r))})),(0,u.yU7)((0,a.Fl)((()=>{var e,t;return null!=(t=null==(e=s.value)?void 0:e.firstElementChild)?t:null})),h),()=>{var l,c;if(!t)return null;const{isAutoWidth:u}=e;if(u){const e=null==n?void 0:n.autoLabelWidth,c=null==r?void 0:r.hasLabel,u={};if(c&&e&&"auto"!==e){const t=Math.max(0,Number.parseInt(e,10)-i.value),r="left"===n.labelPosition?"marginRight":"marginLeft";t&&(u[r]=`${t}px`)}return(0,a.Wm)("div",{ref:s,class:[o.be("item","label-wrap")],style:u},[null==(l=t.default)?void 0:l.call(t)])}return(0,a.Wm)(a.HY,{ref:s},[null==(c=t.default)?void 0:c.call(t)])}}});const dE=["role","aria-labelledby"],hE=(0,a.aZ)({name:"ElFormItem"}),pE=(0,a.aZ)({...hE,props:lE,setup(e,{expose:t}){const n=e,r=(0,a.Rr)(),o=(0,a.f3)(Gr.H,void 0),s=(0,a.f3)(Gr.K,void 0),i=(0,mo.Cd)(void 0,{formItem:!1}),u=(0,y.s3)("form-item"),d=(0,xr.Me)().value,p=(0,l.iH)([]),f=(0,l.iH)(""),g=(0,h.Dp)(f,100),m=(0,l.iH)(""),w=(0,l.iH)();let b,S=!1;const _=(0,a.Fl)((()=>{if("top"===(null==o?void 0:o.labelPosition))return{};const e=(0,v.Nn)(n.labelWidth||(null==o?void 0:o.labelWidth)||"");return e?{width:e}:{}})),E=(0,a.Fl)((()=>{if("top"===(null==o?void 0:o.labelPosition)||(null==o?void 0:o.inline))return{};if(!n.label&&!n.labelWidth&&P)return{};const e=(0,v.Nn)(n.labelWidth||(null==o?void 0:o.labelWidth)||"");return n.label||r.label?{}:{marginLeft:e}})),k=(0,a.Fl)((()=>[u.b(),u.m(i.value),u.is("error","error"===f.value),u.is("validating","validating"===f.value),u.is("success","success"===f.value),u.is("required",M.value||n.required),u.is("no-asterisk",null==o?void 0:o.hideRequiredAsterisk),"right"===(null==o?void 0:o.requireAsteriskPosition)?"asterisk-right":"asterisk-left",{[u.m("feedback")]:null==o?void 0:o.statusIcon}])),C=(0,a.Fl)((()=>(0,h.jn)(n.inlineMessage)?n.inlineMessage:(null==o?void 0:o.inlineMessage)||!1)),I=(0,a.Fl)((()=>[u.e("error"),{[u.em("error","inline")]:C.value}])),T=(0,a.Fl)((()=>n.prop?(0,c.HD)(n.prop)?n.prop:n.prop.join("."):"")),x=(0,a.Fl)((()=>!(!n.label&&!r.label))),O=(0,a.Fl)((()=>n.for||1===p.value.length?p.value[0]:void 0)),N=(0,a.Fl)((()=>!O.value&&x.value)),P=!!s,D=(0,a.Fl)((()=>{const e=null==o?void 0:o.model;if(e&&n.prop)return(0,R.WJ)(e,n.prop).value})),U=(0,a.Fl)((()=>{const{required:e}=n,t=[];n.rules&&t.push(...xg(n.rules));const r=null==o?void 0:o.rules;if(r&&n.prop){const e=(0,R.WJ)(r,n.prop).value;e&&t.push(...xg(e))}if(void 0!==e){const n=t.map(((e,t)=>[e,t])).filter((([e])=>Object.keys(e).includes("required")));if(n.length>0)for(const[r,o]of n)r.required!==e&&(t[o]={...r,required:e});else t.push({required:e})}return t})),L=(0,a.Fl)((()=>U.value.length>0)),B=e=>{const t=U.value;return t.filter((t=>!t.trigger||!e||(Array.isArray(t.trigger)?t.trigger.includes(e):t.trigger===e))).map((({trigger:e,...t})=>t))},M=(0,a.Fl)((()=>U.value.some((e=>e.required)))),F=(0,a.Fl)((()=>{var e;return"error"===g.value&&n.showMessage&&(null==(e=null==o?void 0:o.showMessage)||e)})),j=(0,a.Fl)((()=>`${n.label||""}${(null==o?void 0:o.labelSuffix)||""}`)),z=e=>{f.value=e},$=e=>{var t,r;const{errors:s,fields:i}=e;s&&i||console.error(e),z("error"),m.value=s?null!=(r=null==(t=null==s?void 0:s[0])?void 0:t.message)?r:`${n.prop} is required`:"",null==o||o.emit("validate",n.prop,!1,m.value)},V=()=>{z("success"),null==o||o.emit("validate",n.prop,!0,"")},H=async e=>{const t=T.value,n=new rE({[t]:e});return n.validate({[t]:D.value},{firstFields:!0}).then((()=>(V(),!0))).catch((e=>($(e),Promise.reject(e))))},K=async(e,t)=>{if(S||!n.prop)return!1;const r=(0,c.mf)(t);if(!L.value)return null==t||t(!1),!1;const o=B(e);return 0===o.length?(null==t||t(!0),!0):(z("validating"),H(o).then((()=>(null==t||t(!0),!0))).catch((e=>{const{fields:n}=e;return null==t||t(!1,n),!r&&Promise.reject(n)})))},q=()=>{z(""),m.value="",S=!1},W=async()=>{const e=null==o?void 0:o.model;if(!e||!n.prop)return;const t=(0,R.WJ)(e,n.prop);S=!0,t.value=iE(b),await(0,a.Y3)(),q(),S=!1},Y=e=>{p.value.includes(e)||p.value.push(e)},G=e=>{p.value=p.value.filter((t=>t!==e))};(0,a.YP)((()=>n.error),(e=>{m.value=e||"",z(e?"error":"")}),{immediate:!0}),(0,a.YP)((()=>n.validateStatus),(e=>z(e||"")));const Z=(0,l.qj)({...(0,l.BK)(n),$el:w,size:i,validateState:f,labelId:d,inputIds:p,isGroup:N,hasLabel:x,addInputId:Y,removeInputId:G,resetField:W,clearValidate:q,validate:K});return(0,a.JJ)(Gr.K,Z),(0,a.bv)((()=>{n.prop&&(null==o||o.addField(Z),b=iE(D.value))})),(0,a.Jd)((()=>{null==o||o.removeField(Z)})),t({size:i,validateMessage:m,validateState:f,validate:K,clearValidate:q,resetField:W}),(e,t)=>{var n;return(0,a.wg)(),(0,a.iD)("div",{ref_key:"formItemRef",ref:w,class:(0,c.C_)((0,l.SU)(k)),role:(0,l.SU)(N)?"group":void 0,"aria-labelledby":(0,l.SU)(N)?(0,l.SU)(d):void 0},[(0,a.Wm)((0,l.SU)(uE),{"is-auto-width":"auto"===(0,l.SU)(_).width,"update-all":"auto"===(null==(n=(0,l.SU)(o))?void 0:n.labelWidth)},{default:(0,a.w5)((()=>[(0,l.SU)(x)?((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(O)?"label":"div"),{key:0,id:(0,l.SU)(d),for:(0,l.SU)(O),class:(0,c.C_)((0,l.SU)(u).e("label")),style:(0,c.j5)((0,l.SU)(_))},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"label",{label:(0,l.SU)(j)},(()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(j)),1)]))])),_:3},8,["id","for","class","style"])):(0,a.kq)("v-if",!0)])),_:3},8,["is-auto-width","update-all"]),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(u).e("content")),style:(0,c.j5)((0,l.SU)(E))},[(0,a.WI)(e.$slots,"default"),(0,a.Wm)(A.W3,{name:`${(0,l.SU)(u).namespace.value}-zoom-in-top`},{default:(0,a.w5)((()=>[(0,l.SU)(F)?(0,a.WI)(e.$slots,"error",{key:0,error:m.value},(()=>[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(I))},(0,c.zw)(m.value),3)])):(0,a.kq)("v-if",!0)])),_:3},8,["name"])],6)],10,dE)}}});var fE=(0,m.Z)(pE,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const gE=(0,C.nz)(n_,{FormItem:fE}),mE=(0,C.dp)(fE),yE=(0,d.o8)({urlList:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),vE={close:()=>!0,switch:e=>(0,h.hj)(e)},wE=["src"],bE=(0,a.aZ)({name:"ElImageViewer"}),SE=(0,a.aZ)({...bE,props:yE,emits:vE,setup(e,{expose:t,emit:n}){const r=e,o={CONTAIN:{name:"contain",icon:(0,l.Xl)(ae.ITT)},ORIGINAL:{name:"original",icon:(0,l.Xl)(ae.rGh)}},{t:s}=(0,_s.bU)(),i=(0,y.s3)("image-viewer"),{nextZIndex:d}=(0,Wr.Cn)(),p=(0,l.iH)(),f=(0,l.iH)([]),g=(0,l.B)(),m=(0,l.iH)(!0),v=(0,l.iH)(r.initialIndex),w=(0,l.XI)(o.CONTAIN),b=(0,l.iH)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),S=(0,a.Fl)((()=>{const{urlList:e}=r;return e.length<=1})),_=(0,a.Fl)((()=>0===v.value)),E=(0,a.Fl)((()=>v.value===r.urlList.length-1)),k=(0,a.Fl)((()=>r.urlList[v.value])),C=(0,a.Fl)((()=>{const{scale:e,deg:t,offsetX:n,offsetY:r,enableTransition:s}=b.value;let i=n/e,a=r/e;switch(t%360){case 90:case-270:[i,a]=[a,-i];break;case 180:case-180:[i,a]=[-i,-a];break;case 270:case-90:[i,a]=[-a,i];break}const l={transform:`scale(${e}) rotate(${t}deg) translate(${i}px, ${a}px)`,transition:s?"transform .3s":""};return w.value.name===o.CONTAIN.name&&(l.maxWidth=l.maxHeight="100%"),l})),I=(0,a.Fl)((()=>(0,h.hj)(r.zIndex)?r.zIndex:d()));function x(){N(),n("close")}function O(){const e=Qs((e=>{switch(e.code){case Jn.n.esc:r.closeOnPressEscape&&x();break;case Jn.n.space:B();break;case Jn.n.left:F();break;case Jn.n.up:z("zoomIn");break;case Jn.n.right:j();break;case Jn.n.down:z("zoomOut");break}})),t=Qs((e=>{const t=e.deltaY||e.deltaX;z(t<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})}));g.run((()=>{(0,u.ORN)(document,"keydown",e),(0,u.ORN)(document,"wheel",t)}))}function N(){g.stop()}function P(){m.value=!1}function D(e){m.value=!1,e.target.alt=s("el.image.error")}function U(e){if(m.value||0!==e.button||!p.value)return;b.value.enableTransition=!1;const{offsetX:t,offsetY:n}=b.value,r=e.pageX,o=e.pageY,s=Qs((e=>{b.value={...b.value,offsetX:t+e.pageX-r,offsetY:n+e.pageY-o}})),i=(0,u.ORN)(document,"mousemove",s);(0,u.ORN)(document,"mouseup",(()=>{i()})),e.preventDefault()}function L(){b.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function B(){if(m.value)return;const e=(0,R.uc)(o),t=Object.values(o),n=w.value.name,r=t.findIndex((e=>e.name===n)),s=(r+1)%e.length;w.value=o[e[s]],L()}function M(e){const t=r.urlList.length;v.value=(e+t)%t}function F(){_.value&&!r.infinite||M(v.value-1)}function j(){E.value&&!r.infinite||M(v.value+1)}function z(e,t={}){if(m.value)return;const{zoomRate:n,rotateDeg:o,enableTransition:s}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...t};switch(e){case"zoomOut":b.value.scale>.2&&(b.value.scale=Number.parseFloat((b.value.scale/n).toFixed(3)));break;case"zoomIn":b.value.scale<7&&(b.value.scale=Number.parseFloat((b.value.scale*n).toFixed(3)));break;case"clockwise":b.value.deg+=o;break;case"anticlockwise":b.value.deg-=o;break}b.value.enableTransition=s}return(0,a.YP)(k,(()=>{(0,a.Y3)((()=>{const e=f.value[0];(null==e?void 0:e.complete)||(m.value=!0)}))})),(0,a.YP)(v,(e=>{L(),n("switch",e)})),(0,a.bv)((()=>{var e,t;O(),null==(t=null==(e=p.value)?void 0:e.focus)||t.call(e)})),t({setActiveItem:M}),(e,t)=>((0,a.wg)(),(0,a.j4)(a.lR,{to:"body",disabled:!e.teleported},[(0,a.Wm)(A.uT,{name:"viewer-fade",appear:""},{default:(0,a.w5)((()=>[(0,a._)("div",{ref_key:"wrapper",ref:p,tabindex:-1,class:(0,c.C_)((0,l.SU)(i).e("wrapper")),style:(0,c.j5)({zIndex:(0,l.SU)(I)})},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).e("mask")),onClick:t[0]||(t[0]=(0,A.iM)((t=>e.hideOnClickModal&&x()),["self"]))},null,2),(0,a.kq)(" CLOSE "),(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(i).e("btn"),(0,l.SU)(i).e("close")]),onClick:x},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.x8P))])),_:1})],2),(0,a.kq)(" ARROW "),(0,l.SU)(S)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(i).e("btn"),(0,l.SU)(i).e("prev"),(0,l.SU)(i).is("disabled",!e.infinite&&(0,l.SU)(_))]),onClick:F},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.XdH))])),_:1})],2),(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(i).e("btn"),(0,l.SU)(i).e("next"),(0,l.SU)(i).is("disabled",!e.infinite&&(0,l.SU)(E))]),onClick:j},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1})],2)],64)),(0,a.kq)(" ACTIONS "),(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(i).e("btn"),(0,l.SU)(i).e("actions")])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).e("actions__inner"))},[(0,a.Wm)((0,l.SU)(T.gn),{onClick:t[1]||(t[1]=e=>z("zoomOut"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.H9A))])),_:1}),(0,a.Wm)((0,l.SU)(T.gn),{onClick:t[2]||(t[2]=e=>z("zoomIn"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.DYM))])),_:1}),(0,a._)("i",{class:(0,c.C_)((0,l.SU)(i).e("actions__divider"))},null,2),(0,a.Wm)((0,l.SU)(T.gn),{onClick:B},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(w).icon)))])),_:1}),(0,a._)("i",{class:(0,c.C_)((0,l.SU)(i).e("actions__divider"))},null,2),(0,a.Wm)((0,l.SU)(T.gn),{onClick:t[3]||(t[3]=e=>z("anticlockwise"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.Ufu))])),_:1}),(0,a.Wm)((0,l.SU)(T.gn),{onClick:t[4]||(t[4]=e=>z("clockwise"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.Vyf))])),_:1})],2)],2),(0,a.kq)(" CANVAS "),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).e("canvas"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.urlList,((e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("img",{ref_for:!0,ref:e=>f.value[t]=e,key:e,src:e,style:(0,c.j5)((0,l.SU)(C)),class:(0,c.C_)((0,l.SU)(i).e("img")),onLoad:P,onError:D,onMousedown:U},null,46,wE)),[[A.F8,t===v.value]]))),128))],2),(0,a.WI)(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}});var _E=(0,m.Z)(SE,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const EE=(0,C.nz)(_E),kE=(0,d.o8)({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:(0,d.Cq)([String,Object])},previewSrcList:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),CE={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,h.hj)(e),close:()=>!0,show:()=>!0},IE=["src","loading"],AE={key:0},TE=(0,a.aZ)({name:"ElImage",inheritAttrs:!1}),RE=(0,a.aZ)({...TE,props:kE,emits:CE,setup(e,{emit:t}){const n=e;let r="";const{t:o}=(0,_s.bU)(),s=(0,y.s3)("image"),i=(0,a.l1)(),d=(0,go.l)(),p=(0,l.iH)(),f=(0,l.iH)(!1),g=(0,l.iH)(!0),m=(0,l.iH)(!1),v=(0,l.iH)(),w=(0,l.iH)(),S=h.C5&&"loading"in HTMLImageElement.prototype;let _,E;const k=(0,a.Fl)((()=>i.style)),C=(0,a.Fl)((()=>{const{fit:e}=n;return h.C5&&e?{objectFit:e}:{}})),I=(0,a.Fl)((()=>{const{previewSrcList:e}=n;return Array.isArray(e)&&e.length>0})),A=(0,a.Fl)((()=>{const{previewSrcList:e,initialIndex:t}=n;let r=t;return t>e.length-1&&(r=0),r})),T=(0,a.Fl)((()=>"eager"!==n.loading&&(!S&&"lazy"===n.loading||n.lazy))),R=()=>{h.C5&&(g.value=!0,f.value=!1,p.value=n.src)};function x(e){g.value=!1,f.value=!1,t("load",e)}function O(e){g.value=!1,f.value=!0,t("error",e)}function N(){tm(v.value,w.value)&&(R(),U())}const P=(0,h.vA)(N,200);async function D(){var e;if(!h.C5)return;await(0,a.Y3)();const{scrollContainer:t}=n;(0,wr.kK)(t)?w.value=t:(0,c.HD)(t)&&""!==t?w.value=null!=(e=document.querySelector(t))?e:void 0:v.value&&(w.value=(0,b.JX)(v.value)),w.value&&(_=(0,u.ORN)(w,"scroll",P),setTimeout((()=>N()),100))}function U(){h.C5&&w.value&&P&&(null==_||_(),w.value=void 0)}function L(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function B(){I.value&&(E=(0,u.ORN)("wheel",L,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",m.value=!0,t("show"))}function M(){null==E||E(),document.body.style.overflow=r,m.value=!1,t("close")}function F(e){t("switch",e)}return(0,a.YP)((()=>n.src),(()=>{T.value?(g.value=!0,f.value=!1,U(),D()):R()})),(0,a.bv)((()=>{T.value?D():R()})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"container",ref:v,class:(0,c.C_)([(0,l.SU)(s).b(),e.$attrs.class]),style:(0,c.j5)((0,l.SU)(k))},[void 0===p.value||f.value?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("img",(0,a.dG)({key:0},(0,l.SU)(d),{src:p.value,loading:e.loading,style:(0,l.SU)(C),class:[(0,l.SU)(s).e("inner"),(0,l.SU)(I)&&(0,l.SU)(s).e("preview"),g.value&&(0,l.SU)(s).is("loading")],onClick:B,onLoad:x,onError:O}),null,16,IE)),g.value||f.value?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(s).e("wrapper"))},[g.value?(0,a.WI)(e.$slots,"placeholder",{key:0},(()=>[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(s).e("placeholder"))},null,2)])):f.value?(0,a.WI)(e.$slots,"error",{key:1},(()=>[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(s).e("error"))},(0,c.zw)((0,l.SU)(o)("el.image.error")),3)])):(0,a.kq)("v-if",!0)],2)):(0,a.kq)("v-if",!0),(0,l.SU)(I)?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[m.value?((0,a.wg)(),(0,a.j4)((0,l.SU)(EE),{key:0,"z-index":e.zIndex,"initial-index":(0,l.SU)(A),infinite:e.infinite,"zoom-rate":e.zoomRate,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:M,onSwitch:F},{default:(0,a.w5)((()=>[e.$slots.viewer?((0,a.wg)(),(0,a.iD)("div",AE,[(0,a.WI)(e.$slots,"viewer")])):(0,a.kq)("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):(0,a.kq)("v-if",!0)],64)):(0,a.kq)("v-if",!0)],6))}});var xE=(0,m.Z)(RE,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const OE=(0,C.nz)(xE),NE=(0,d.o8)({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Th.Pp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||(0,h.hj)(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}}),PE={[p.O7]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[p.e_]:e=>(0,h.hj)(e)||(0,gr.Z)(e),[p.f_]:e=>(0,h.hj)(e)||(0,gr.Z)(e)},DE=["aria-label","onKeydown"],UE=["aria-label","onKeydown"],LE=(0,a.aZ)({name:"ElInputNumber"}),BE=(0,a.aZ)({...LE,props:NE,emits:PE,setup(e,{expose:t,emit:n}){const r=e,{t:o}=(0,_s.bU)(),s=(0,y.s3)("input-number"),i=(0,l.iH)(),u=(0,l.qj)({currentValue:r.modelValue,userInput:null}),{formItem:d}=(0,Ph.A)(),f=(0,a.Fl)((()=>(0,h.hj)(r.modelValue)&&r.modelValue<=r.min)),g=(0,a.Fl)((()=>(0,h.hj)(r.modelValue)&&r.modelValue>=r.max)),m=(0,a.Fl)((()=>{const e=k(r.step);return(0,wr.o8)(r.precision)?Math.max(k(r.modelValue),e):(e>r.precision&&(0,w.N)("InputNumber","precision should not be less than the decimal places of step"),r.precision)})),v=(0,a.Fl)((()=>r.controls&&"right"===r.controlsPosition)),b=(0,mo.Cd)(),S=(0,mo.DT)(),_=(0,a.Fl)((()=>{if(null!==u.userInput)return u.userInput;let e=u.currentValue;if((0,gr.Z)(e))return"";if((0,h.hj)(e)){if(Number.isNaN(e))return"";(0,wr.o8)(r.precision)||(e=e.toFixed(r.precision))}return e})),E=(e,t)=>{if((0,wr.o8)(t)&&(t=m.value),0===t)return Math.round(e);let n=String(e);const r=n.indexOf(".");if(-1===r)return e;const o=n.replace(".","").split(""),s=o[r+t];if(!s)return e;const i=n.length;return"5"===n.charAt(i-1)&&(n=`${n.slice(0,Math.max(0,i-1))}6`),Number.parseFloat(Number(n).toFixed(t))},k=e=>{if((0,gr.Z)(e))return 0;const t=e.toString(),n=t.indexOf(".");let r=0;return-1!==n&&(r=t.length-n-1),r},C=(e,t=1)=>(0,h.hj)(e)?E(e+r.step*t):u.currentValue,I=()=>{if(r.readonly||S.value||g.value)return;const e=Number(_.value)||0,t=C(e);O(t),n(p.e_,u.currentValue)},R=()=>{if(r.readonly||S.value||f.value)return;const e=Number(_.value)||0,t=C(e,-1);O(t),n(p.e_,u.currentValue)},x=(e,t)=>{const{max:o,min:s,step:i,precision:a,stepStrictly:l,valueOnClear:u}=r;let d=Number(e);if((0,gr.Z)(e)||Number.isNaN(d))return null;if(""===e){if(null===u)return null;d=(0,c.HD)(u)?{min:s,max:o}[u]:u}return l&&(d=E(Math.round(d/i)*i,a)),(0,wr.o8)(a)||(d=E(d,a)),(d>o||d<s)&&(d=d>o?o:s,t&&n(p.f_,d)),d},O=(e,t=!0)=>{var o;const s=u.currentValue,i=x(e);t?s!==i&&(u.userInput=null,n(p.f_,i),n(p.O7,i,s),r.validateEvent&&(null==(o=null==d?void 0:d.validate)||o.call(d,"change").catch((e=>(0,w.N)(e)))),u.currentValue=i):n(p.f_,i)},N=e=>{u.userInput=e;const t=""===e?null:Number(e);n(p.e_,t),O(t,!1)},P=e=>{const t=""!==e?Number(e):"";((0,h.hj)(t)&&!Number.isNaN(t)||""===e)&&O(t),u.userInput=null},D=()=>{var e,t;null==(t=null==(e=i.value)?void 0:e.focus)||t.call(e)},U=()=>{var e,t;null==(t=null==(e=i.value)?void 0:e.blur)||t.call(e)},L=e=>{n("focus",e)},B=e=>{var t;n("blur",e),r.validateEvent&&(null==(t=null==d?void 0:d.validate)||t.call(d,"blur").catch((e=>(0,w.N)(e))))};return(0,a.YP)((()=>r.modelValue),(e=>{const t=x(u.userInput),n=x(e,!0);(0,h.hj)(t)||t&&t===n||(u.currentValue=n,u.userInput=null)}),{immediate:!0}),(0,a.bv)((()=>{var e;const{min:t,max:o,modelValue:s}=r,a=null==(e=i.value)?void 0:e.input;if(a.setAttribute("role","spinbutton"),Number.isFinite(o)?a.setAttribute("aria-valuemax",String(o)):a.removeAttribute("aria-valuemax"),Number.isFinite(t)?a.setAttribute("aria-valuemin",String(t)):a.removeAttribute("aria-valuemin"),a.setAttribute("aria-valuenow",String(u.currentValue)),a.setAttribute("aria-disabled",String(S.value)),!(0,h.hj)(s)&&null!=s){let e=Number(s);Number.isNaN(e)&&(e=null),n(p.f_,e)}})),(0,a.ic)((()=>{var e;const t=null==(e=i.value)?void 0:e.input;null==t||t.setAttribute("aria-valuenow",`${u.currentValue}`)})),t({focus:D,blur:U}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(s).b(),(0,l.SU)(s).m((0,l.SU)(b)),(0,l.SU)(s).is("disabled",(0,l.SU)(S)),(0,l.SU)(s).is("without-controls",!e.controls),(0,l.SU)(s).is("controls-right",(0,l.SU)(v))]),onDragstart:t[1]||(t[1]=(0,A.iM)((()=>{}),["prevent"]))},[e.controls?(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{key:0,role:"button","aria-label":(0,l.SU)(o)("el.inputNumber.decrease"),class:(0,c.C_)([(0,l.SU)(s).e("decrease"),(0,l.SU)(s).is("disabled",(0,l.SU)(f))]),onKeydown:(0,A.D2)(R,["enter"])},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,l.SU)(v)?((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.K5e),{key:0})):((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.WF_),{key:1}))])),_:1})],42,DE)),[[(0,l.SU)(vv),R]]):(0,a.kq)("v-if",!0),e.controls?(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{key:1,role:"button","aria-label":(0,l.SU)(o)("el.inputNumber.increase"),class:(0,c.C_)([(0,l.SU)(s).e("increase"),(0,l.SU)(s).is("disabled",(0,l.SU)(g))]),onKeydown:(0,A.D2)(I,["enter"])},[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,l.SU)(v)?((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.a2Z),{key:0})):((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.v37),{key:1}))])),_:1})],42,UE)),[[(0,l.SU)(vv),I]]):(0,a.kq)("v-if",!0),(0,a.Wm)((0,l.SU)(le.EZ),{id:e.id,ref_key:"input",ref:i,type:"number",step:e.step,"model-value":(0,l.SU)(_),placeholder:e.placeholder,readonly:e.readonly,disabled:(0,l.SU)(S),size:(0,l.SU)(b),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:t[0]||(t[0]=(0,A.iM)((()=>{}),["prevent"])),onKeydown:[(0,A.D2)((0,A.iM)(I,["prevent"]),["up"]),(0,A.D2)((0,A.iM)(R,["prevent"]),["down"])],onBlur:B,onFocus:L,onInput:N,onChange:P},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var ME=(0,m.Z)(BE,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const FE=(0,C.nz)(ME),jE=(0,d.o8)({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:x.AA}}),zE={click:e=>e instanceof MouseEvent},$E=["href"],VE=(0,a.aZ)({name:"ElLink"}),HE=(0,a.aZ)({...VE,props:jE,emits:zE,setup(e,{emit:t}){const n=e,r=(0,y.s3)("link"),o=(0,a.Fl)((()=>[r.b(),r.m(n.type),r.is("disabled",n.disabled),r.is("underline",n.underline&&!n.disabled)]));function s(e){n.disabled||t("click",e)}return(e,t)=>((0,a.wg)(),(0,a.iD)("a",{class:(0,c.C_)((0,l.SU)(o)),href:e.disabled||!e.href?void 0:e.href,onClick:s},[e.icon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:1})):(0,a.kq)("v-if",!0),e.$slots.default?((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,c.C_)((0,l.SU)(r).e("inner"))},[(0,a.WI)(e.$slots,"default")],2)):(0,a.kq)("v-if",!0),e.$slots.icon?(0,a.WI)(e.$slots,"icon",{key:2}):(0,a.kq)("v-if",!0)],10,$E))}});var KE=(0,m.Z)(HE,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const qE=(0,C.nz)(KE);class WE{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(t=>{t.addEventListener("keydown",(t=>{let n=!1;switch(t.code){case Jn.n.down:this.gotoSubIndex(this.subIndex+1),n=!0;break;case Jn.n.up:this.gotoSubIndex(this.subIndex-1),n=!0;break;case Jn.n.tab:(0,Pf.qe)(e,"mouseleave");break;case Jn.n.enter:case Jn.n.space:n=!0,t.currentTarget.click();break}return n&&(t.preventDefault(),t.stopPropagation()),!1}))}))}}class YE{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new WE(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",(e=>{let t=!1;switch(e.code){case Jn.n.down:(0,Pf.qe)(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break;case Jn.n.up:(0,Pf.qe)(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break;case Jn.n.tab:(0,Pf.qe)(e.currentTarget,"mouseleave");break;case Jn.n.enter:case Jn.n.space:t=!0,e.currentTarget.click();break}t&&e.preventDefault()}))}}class GE{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach((t=>{1===t.nodeType&&new YE(t,e)}))}}const ZE=(0,a.aZ)({name:"ElMenuCollapseTransition",setup(){const e=(0,y.s3)("menu"),t={onBeforeEnter:e=>e.style.opacity="0.2",onEnter(t,n){(0,v.cn)(t,`${e.namespace.value}-opacity-transition`),t.style.opacity="1",n()},onAfterEnter(t){(0,v.IV)(t,`${e.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),(0,v.pv)(t,e.m("collapse"))?((0,v.IV)(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),(0,v.cn)(t,e.m("collapse"))):((0,v.cn)(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),(0,v.IV)(t,e.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(e){(0,v.cn)(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}};return{listeners:t}}});function JE(e,t,n,r,o,s){return(0,a.wg)(),(0,a.j4)(A.uT,(0,a.dG)({mode:"out-in"},e.listeners),{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16)}var QE=(0,m.Z)(ZE,[["render",JE],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function XE(e,t){const n=(0,a.Fl)((()=>{let n=e.parent;const r=[t.value];while("ElMenu"!==n.type.name)n.props.index&&r.unshift(n.props.index),n=n.parent;return r})),r=(0,a.Fl)((()=>{let t=e.parent;while(t&&!["ElMenu","ElSubMenu"].includes(t.type.name))t=t.parent;return t}));return{parentMenu:r,indexPath:n}}var ek=n(8032);function tk(e){const t=(0,a.Fl)((()=>{const t=e.backgroundColor;return t?new ek.C(t).shade(20).toString():""}));return t}const nk=(e,t)=>{const n=(0,y.s3)("menu");return(0,a.Fl)((()=>n.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":tk(e).value||"","active-color":e.activeTextColor||"",level:`${t}`})))},rk=(0,d.o8)({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:x.AA},expandOpenIcon:{type:x.AA},collapseCloseIcon:{type:x.AA},collapseOpenIcon:{type:x.AA}}),ok="ElSubMenu";var sk=(0,a.aZ)({name:ok,props:rk,setup(e,{slots:t,expose:n}){(0,Os.A)({from:"popper-append-to-body",replacement:"teleported",scope:ok,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},(0,a.Fl)((()=>void 0!==e.popperAppendToBody)));const r=(0,a.FN)(),{indexPath:o,parentMenu:s}=XE(r,(0,a.Fl)((()=>e.index))),i=(0,y.s3)("menu"),u=(0,y.s3)("sub-menu"),d=(0,a.f3)("rootMenu");d||(0,w._)(ok,"can not inject root menu");const p=(0,a.f3)(`subMenu:${s.value.uid}`);p||(0,w._)(ok,"can not inject sub menu");const f=(0,l.iH)({}),g=(0,l.iH)({});let m;const v=(0,l.iH)(!1),b=(0,l.iH)(),S=(0,l.iH)(null),_=(0,a.Fl)((()=>"horizontal"===U.value&&k.value?"bottom-start":"right-start")),E=(0,a.Fl)((()=>"horizontal"===U.value&&k.value||"vertical"===U.value&&!d.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?x.value?e.expandOpenIcon:e.expandCloseIcon:ae.K5e:e.collapseCloseIcon&&e.collapseOpenIcon?x.value?e.collapseOpenIcon:e.collapseCloseIcon:ae.olP)),k=(0,a.Fl)((()=>0===p.level)),C=(0,a.Fl)((()=>{var t;const n=null!=(t=e.teleported)?t:e.popperAppendToBody;return void 0===n?k.value:n})),I=(0,a.Fl)((()=>d.props.collapse?`${i.namespace.value}-zoom-in-left`:`${i.namespace.value}-zoom-in-top`)),R=(0,a.Fl)((()=>"horizontal"===U.value&&k.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"])),x=(0,a.Fl)((()=>d.openedMenus.includes(e.index))),O=(0,a.Fl)((()=>{let e=!1;return Object.values(f.value).forEach((t=>{t.active&&(e=!0)})),Object.values(g.value).forEach((t=>{t.active&&(e=!0)})),e})),N=(0,a.Fl)((()=>d.props.backgroundColor||"")),P=(0,a.Fl)((()=>d.props.activeTextColor||"")),D=(0,a.Fl)((()=>d.props.textColor||"")),U=(0,a.Fl)((()=>d.props.mode)),L=(0,l.qj)({index:e.index,indexPath:o,active:O}),B=(0,a.Fl)((()=>"horizontal"!==U.value?{color:D.value}:{borderBottomColor:O.value?d.props.activeTextColor?P.value:"":"transparent",color:O.value?P.value:D.value})),M=()=>{var e,t,n;return null==(n=null==(t=null==(e=S.value)?void 0:e.popperRef)?void 0:t.popperInstanceRef)?void 0:n.destroy()},F=e=>{e||M()},j=()=>{"hover"===d.props.menuTrigger&&"horizontal"===d.props.mode||d.props.collapse&&"vertical"===d.props.mode||e.disabled||d.handleSubMenuClick({index:e.index,indexPath:o.value,active:O.value})},z=(t,n=e.showTimeout)=>{var r;"focus"!==t.type&&("click"===d.props.menuTrigger&&"horizontal"===d.props.mode||!d.props.collapse&&"vertical"===d.props.mode||e.disabled||(p.mouseInChild.value=!0,null==m||m(),({stop:m}=(0,h.eM)((()=>{d.openMenu(e.index,o.value)}),n)),C.value&&(null==(r=s.value.vnode.el)||r.dispatchEvent(new MouseEvent("mouseenter")))))},$=(t=!1)=>{var n,s;"click"===d.props.menuTrigger&&"horizontal"===d.props.mode||!d.props.collapse&&"vertical"===d.props.mode||(null==m||m(),p.mouseInChild.value=!1,({stop:m}=(0,h.eM)((()=>!v.value&&d.closeMenu(e.index,o.value)),e.hideTimeout)),C.value&&t&&"ElSubMenu"===(null==(n=r.parent)?void 0:n.type.name)&&(null==(s=p.handleMouseleave)||s.call(p,!0)))};(0,a.YP)((()=>d.props.collapse),(e=>F(Boolean(e))));{const e=e=>{g.value[e.index]=e},t=e=>{delete g.value[e.index]};(0,a.JJ)(`subMenu:${r.uid}`,{addSubMenu:e,removeSubMenu:t,handleMouseleave:$,mouseInChild:v,level:p.level+1})}return n({opened:x}),(0,a.bv)((()=>{d.addSubMenu(L),p.addSubMenu(L)})),(0,a.Jd)((()=>{p.removeSubMenu(L),d.removeSubMenu(L)})),()=>{var n;const o=[null==(n=t.title)?void 0:n.call(t),(0,a.h)(T.gn,{class:u.e("icon-arrow"),style:{transform:x.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&d.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>(0,c.HD)(E.value)?(0,a.h)(r.appContext.components[E.value]):(0,a.h)(E.value)})],s=nk(d.props,p.level+1),l=d.isMenuPopup?(0,a.h)(ho,{ref:S,visible:x.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:_.value,teleported:C.value,fallbackPlacements:R.value,transition:I.value,gpuAcceleration:!1},{content:()=>{var n;return(0,a.h)("div",{class:[i.m(U.value),i.m("popup-container"),e.popperClass],onMouseenter:e=>z(e,100),onMouseleave:()=>$(!0),onFocus:e=>z(e,100)},[(0,a.h)("ul",{class:[i.b(),i.m("popup"),i.m(`popup-${_.value}`)],style:s.value},[null==(n=t.default)?void 0:n.call(t)])])},default:()=>(0,a.h)("div",{class:u.e("title"),style:[B.value,{backgroundColor:N.value}],onClick:j},o)}):(0,a.h)(a.HY,{},[(0,a.h)("div",{class:u.e("title"),style:[B.value,{backgroundColor:N.value}],ref:b,onClick:j},o),(0,a.h)(Fg,{},{default:()=>{var e;return(0,a.wy)((0,a.h)("ul",{role:"menu",class:[i.b(),i.m("inline")],style:s.value},[null==(e=t.default)?void 0:e.call(t)]),[[A.F8,x.value]])}})]);return(0,a.h)("li",{class:[u.b(),u.is("active",O.value),u.is("opened",x.value),u.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:x.value,onMouseenter:z,onMouseleave:()=>$(!0),onFocus:z},[l])}}});const ik=(0,d.o8)({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),ak=e=>Array.isArray(e)&&e.every((e=>(0,c.HD)(e))),lk={close:(e,t)=>(0,c.HD)(e)&&ak(t),open:(e,t)=>(0,c.HD)(e)&&ak(t),select:(e,t,n,r)=>(0,c.HD)(e)&&ak(t)&&(0,c.Kn)(n)&&(void 0===r||r instanceof Promise)};var ck=(0,a.aZ)({name:"ElMenu",props:ik,emits:lk,setup(e,{emit:t,slots:n,expose:r}){const o=(0,a.FN)(),s=o.appContext.config.globalProperties.$router,i=(0,l.iH)(),c=(0,y.s3)("menu"),d=(0,y.s3)("sub-menu"),h=(0,l.iH)(-1),p=(0,l.iH)(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),f=(0,l.iH)(e.defaultActive),g=(0,l.iH)({}),m=(0,l.iH)({}),v=(0,a.Fl)((()=>"horizontal"===e.mode||"vertical"===e.mode&&e.collapse)),w=()=>{const t=f.value&&g.value[f.value];if(!t||"horizontal"===e.mode||e.collapse)return;const n=t.indexPath;n.forEach((e=>{const t=m.value[e];t&&b(e,t.indexPath)}))},b=(n,r)=>{p.value.includes(n)||(e.uniqueOpened&&(p.value=p.value.filter((e=>r.includes(e)))),p.value.push(n),t("open",n,r))},S=e=>{const t=p.value.indexOf(e);-1!==t&&p.value.splice(t,1)},_=(e,n)=>{S(e),t("close",e,n)},E=({index:e,indexPath:t})=>{const n=p.value.includes(e);n?_(e,t):b(e,t)},k=n=>{("horizontal"===e.mode||e.collapse)&&(p.value=[]);const{index:r,indexPath:o}=n;if(void 0!==r&&void 0!==o)if(e.router&&s){const e=n.route||r,i=s.push(e).then((e=>(e||(f.value=r),e)));t("select",r,o,{index:r,indexPath:o,route:e},i)}else f.value=r,t("select",r,o,{index:r,indexPath:o})},C=t=>{const n=g.value,r=n[t]||f.value&&n[f.value]||n[e.defaultActive];f.value=r?r.index:t},I=()=>{var e,t;if(!i.value)return-1;const n=Array.from(null!=(t=null==(e=i.value)?void 0:e.childNodes)?t:[]).filter((e=>"#text"!==e.nodeName||e.nodeValue)),r=64,o=Number.parseInt(getComputedStyle(i.value).paddingLeft,10),s=Number.parseInt(getComputedStyle(i.value).paddingRight,10),a=i.value.clientWidth-o-s;let l=0,c=0;return n.forEach(((e,t)=>{l+=e.offsetWidth||0,l<=a-r&&(c=t+1)})),c===n.length?-1:c},A=(e,t=33.34)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout((()=>{e()}),t)}};let R=!0;const x=()=>{const e=()=>{h.value=-1,(0,a.Y3)((()=>{h.value=I()}))};R?e():A(e)(),R=!1};let O;(0,a.YP)((()=>e.defaultActive),(e=>{g.value[e]||(f.value=""),C(e)})),(0,a.YP)((()=>e.collapse),(e=>{e&&(p.value=[])})),(0,a.YP)(g.value,w),(0,a.m0)((()=>{"horizontal"===e.mode&&e.ellipsis?O=(0,u.yU7)(i,x).stop:null==O||O()}));{const t=e=>{m.value[e.index]=e},n=e=>{delete m.value[e.index]},r=e=>{g.value[e.index]=e},s=e=>{delete g.value[e.index]};(0,a.JJ)("rootMenu",(0,l.qj)({props:e,openedMenus:p,items:g,subMenus:m,activeIndex:f,isMenuPopup:v,addMenuItem:r,removeMenuItem:s,addSubMenu:t,removeSubMenu:n,openMenu:b,closeMenu:_,handleMenuItemClick:k,handleSubMenuClick:E})),(0,a.JJ)(`subMenu:${o.uid}`,{addSubMenu:t,removeSubMenu:n,mouseInChild:(0,l.iH)(!1),level:0})}(0,a.bv)((()=>{"horizontal"===e.mode&&new GE(o.vnode.el,c.namespace.value)}));{const e=e=>{const{indexPath:t}=m.value[e];t.forEach((e=>b(e,t)))};r({open:e,close:S,handleResize:x})}return()=>{var t,r;let o=null!=(r=null==(t=n.default)?void 0:t.call(n))?r:[];const s=[];if("horizontal"===e.mode&&i.value){const t=(0,ei.M3)(o),n=-1===h.value?t:t.slice(0,h.value),r=-1===h.value?[]:t.slice(h.value);(null==r?void 0:r.length)&&e.ellipsis&&(o=n,s.push((0,a.h)(sk,{index:"sub-menu-more",class:d.e("hide-arrow")},{title:()=>(0,a.h)(T.gn,{class:d.e("icon-more")},{default:()=>(0,a.h)(ae.Tkc)}),default:()=>r})))}const l=nk(e,0),u=(0,a.h)("ul",{key:String(e.collapse),role:"menubar",ref:i,style:l.value,class:{[c.b()]:!0,[c.m(e.mode)]:!0,[c.m("collapse")]:e.collapse}},[...o,...s]);return e.collapseTransition&&"vertical"===e.mode?(0,a.h)(QE,(()=>u)):u}}});const uk=(0,d.o8)({index:{type:(0,d.Cq)([String,null]),default:null},route:{type:(0,d.Cq)([String,Object])},disabled:Boolean}),dk={click:e=>(0,c.HD)(e.index)&&Array.isArray(e.indexPath)},hk="ElMenuItem",pk=(0,a.aZ)({name:hk,components:{ElTooltip:ho},props:uk,emits:dk,setup(e,{emit:t}){const n=(0,a.FN)(),r=(0,a.f3)("rootMenu"),o=(0,y.s3)("menu"),s=(0,y.s3)("menu-item");r||(0,w._)(hk,"can not inject root menu");const{parentMenu:i,indexPath:c}=XE(n,(0,l.Vh)(e,"index")),u=(0,a.f3)(`subMenu:${i.value.uid}`);u||(0,w._)(hk,"can not inject sub menu");const d=(0,a.Fl)((()=>e.index===r.activeIndex)),h=(0,l.qj)({index:e.index,indexPath:c,active:d}),p=()=>{e.disabled||(r.handleMenuItemClick({index:e.index,indexPath:c.value,route:e.route}),t("click",h))};return(0,a.bv)((()=>{u.addSubMenu(h),r.addMenuItem(h)})),(0,a.Jd)((()=>{u.removeSubMenu(h),r.removeMenuItem(h)})),{parentMenu:i,rootMenu:r,active:d,nsMenu:o,nsMenuItem:s,handleClick:p}}});function fk(e,t,n,r,o,s){const i=(0,a.up)("el-tooltip");return(0,a.wg)(),(0,a.iD)("li",{class:(0,c.C_)([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:t[0]||(t[0]=(...t)=>e.handleClick&&e.handleClick(...t))},["ElMenu"===e.parentMenu.type.name&&e.rootMenu.props.collapse&&e.$slots.title?((0,a.wg)(),(0,a.j4)(i,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"title")])),default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,c.C_)(e.nsMenu.be("tooltip","trigger"))},[(0,a.WI)(e.$slots,"default")],2)])),_:3},8,["effect"])):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.WI)(e.$slots,"default"),(0,a.WI)(e.$slots,"title")],64))],2)}var gk=(0,m.Z)(pk,[["render",fk],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const mk={title:String},yk="ElMenuItemGroup",vk=(0,a.aZ)({name:yk,props:mk,setup(){const e=(0,y.s3)("menu-item-group");return{ns:e}}});function wk(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("li",{class:(0,c.C_)(e.ns.b())},[(0,a._)("div",{class:(0,c.C_)(e.ns.e("title"))},[e.$slots.title?(0,a.WI)(e.$slots,"title",{key:1}):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,c.zw)(e.title),1)],64))],2),(0,a._)("ul",null,[(0,a.WI)(e.$slots,"default")])],2)}var bk=(0,m.Z)(vk,[["render",wk],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const Sk=(0,C.nz)(ck,{MenuItem:gk,MenuItemGroup:bk,SubMenu:sk}),_k=(0,C.dp)(gk),Ek=(0,C.dp)(bk),kk=(0,C.dp)(sk),Ck=(0,d.o8)({icon:{type:x.AA,default:()=>ae.eJh},title:String,content:{type:String,default:""}}),Ik={back:()=>!0},Ak=["aria-label"],Tk=(0,a.aZ)({name:"ElPageHeader"}),Rk=(0,a.aZ)({...Tk,props:Ck,emits:Ik,setup(e,{emit:t}){const n=(0,a.Rr)(),{t:r}=(0,_s.bU)(),o=(0,y.s3)("page-header"),s=(0,a.Fl)((()=>[o.b(),{[o.m("has-breadcrumb")]:!!n.breadcrumb,[o.m("has-extra")]:!!n.extra,[o.is("contentful")]:!!n.default}]));function i(){t("back")}return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(s))},[e.$slots.breadcrumb?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(o).e("breadcrumb"))},[(0,a.WI)(e.$slots,"breadcrumb")],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("header"))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("left"))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("back")),role:"button",tabindex:"0",onClick:i},[e.icon||e.$slots.icon?((0,a.wg)(),(0,a.iD)("div",{key:0,"aria-label":e.title||(0,l.SU)(r)("el.pageHeader.title"),class:(0,c.C_)((0,l.SU)(o).e("icon"))},[(0,a.WI)(e.$slots,"icon",{},(()=>[e.icon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:1})):(0,a.kq)("v-if",!0)]))],10,Ak)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("title"))},[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a.Uk)((0,c.zw)(e.title||(0,l.SU)(r)("el.pageHeader.title")),1)]))],2)],2),(0,a.Wm)((0,l.SU)(Gw),{direction:"vertical"}),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("content"))},[(0,a.WI)(e.$slots,"content",{},(()=>[(0,a.Uk)((0,c.zw)(e.content),1)]))],2)],2),e.$slots.extra?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(o).e("extra"))},[(0,a.WI)(e.$slots,"extra")],2)):(0,a.kq)("v-if",!0)],2),e.$slots.default?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(o).e("main"))},[(0,a.WI)(e.$slots,"default")],2)):(0,a.kq)("v-if",!0)],2))}});var xk=(0,m.Z)(Rk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const Ok=(0,C.nz)(xk),Nk=Symbol("elPaginationKey"),Pk=(0,d.o8)({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:x.AA}}),Dk={click:e=>e instanceof MouseEvent},Uk=["disabled","aria-label","aria-disabled"],Lk={key:0},Bk=(0,a.aZ)({name:"ElPaginationPrev"}),Mk=(0,a.aZ)({...Bk,props:Pk,emits:Dk,setup(e){const t=e,{t:n}=(0,_s.bU)(),r=(0,a.Fl)((()=>t.disabled||t.currentPage<=1));return(e,t)=>((0,a.wg)(),(0,a.iD)("button",{type:"button",class:"btn-prev",disabled:(0,l.SU)(r),"aria-label":e.prevText||(0,l.SU)(n)("el.pagination.prev"),"aria-disabled":(0,l.SU)(r),onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[e.prevText?((0,a.wg)(),(0,a.iD)("span",Lk,(0,c.zw)(e.prevText),1)):((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.prevIcon)))])),_:1}))],8,Uk))}});var Fk=(0,m.Z)(Mk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const jk=(0,d.o8)({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:x.AA}}),zk=["disabled","aria-label","aria-disabled"],$k={key:0},Vk=(0,a.aZ)({name:"ElPaginationNext"}),Hk=(0,a.aZ)({...Vk,props:jk,emits:["click"],setup(e){const t=e,{t:n}=(0,_s.bU)(),r=(0,a.Fl)((()=>t.disabled||t.currentPage===t.pageCount||0===t.pageCount));return(e,t)=>((0,a.wg)(),(0,a.iD)("button",{type:"button",class:"btn-next",disabled:(0,l.SU)(r),"aria-label":e.nextText||(0,l.SU)(n)("el.pagination.next"),"aria-disabled":(0,l.SU)(r),onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[e.nextText?((0,a.wg)(),(0,a.iD)("span",$k,(0,c.zw)(e.nextText),1)):((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.nextIcon)))])),_:1}))],8,zk))}});var Kk=(0,m.Z)(Hk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]),qk=n(6423);const Wk=Symbol("ElSelectGroup"),Yk=Symbol("ElSelect");function Gk(e,t){const n=(0,a.f3)(Yk),r=(0,a.f3)(Wk,{disabled:!1}),o=(0,a.Fl)((()=>"[object object]"===Object.prototype.toString.call(e.value).toLowerCase())),s=(0,a.Fl)((()=>n.props.multiple?p(n.props.modelValue,e.value):f(e.value,n.props.modelValue))),i=(0,a.Fl)((()=>{if(n.props.multiple){const e=n.props.modelValue||[];return!s.value&&e.length>=n.props.multipleLimit&&n.props.multipleLimit>0}return!1})),c=(0,a.Fl)((()=>e.label||(o.value?"":e.value))),u=(0,a.Fl)((()=>e.value||e.label||"")),d=(0,a.Fl)((()=>e.disabled||t.groupDisabled||i.value)),h=(0,a.FN)(),p=(e=[],t)=>{if(o.value){const r=n.props.valueKey;return e&&e.some((e=>(0,l.IU)((0,qk.Z)(e,r))===(0,qk.Z)(t,r)))}return e&&e.includes(t)},f=(e,t)=>{if(o.value){const{valueKey:r}=n.props;return(0,qk.Z)(e,r)===(0,qk.Z)(t,r)}return e===t},g=()=>{e.disabled||r.disabled||(n.hoverIndex=n.optionsArray.indexOf(h.proxy))};(0,a.YP)((()=>c.value),(()=>{e.created||n.props.remote||n.setSelected()})),(0,a.YP)((()=>e.value),((t,r)=>{const{remote:o,valueKey:s}=n.props;if(Object.is(t,r)||(n.onOptionDestroy(r,h.proxy),n.onOptionCreate(h.proxy)),!e.created&&!o){if(s&&"object"===typeof t&&"object"===typeof r&&t[s]===r[s])return;n.setSelected()}})),(0,a.YP)((()=>r.disabled),(()=>{t.groupDisabled=r.disabled}),{immediate:!0});const{queryChange:m}=(0,l.IU)(n);return(0,a.YP)(m,(r=>{const{query:o}=(0,l.SU)(r),s=new RegExp(Ef(o),"i");t.visible=s.test(c.value)||e.created,t.visible||n.filteredOptionsCount--}),{immediate:!0}),{select:n,currentLabel:c,currentValue:u,itemSelected:s,isDisabled:d,hoverItem:g}}const Zk=(0,a.aZ)({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const t=(0,y.s3)("select"),n=(0,l.qj)({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:r,itemSelected:o,isDisabled:s,select:i,hoverItem:c}=Gk(e,n),{visible:u,hover:d}=(0,l.BK)(n),h=(0,a.FN)().proxy;function p(){!0!==e.disabled&&!0!==n.groupDisabled&&i.handleOptionSelect(h,!0)}return i.onOptionCreate(h),(0,a.Jd)((()=>{const e=h.value,{selected:t}=i,n=i.props.multiple?t:[t],r=n.some((e=>e.value===h.value));(0,a.Y3)((()=>{i.cachedOptions.get(e)!==h||r||i.cachedOptions.delete(e)})),i.onOptionDestroy(e,h)})),{ns:t,currentLabel:r,itemSelected:o,isDisabled:s,select:i,hoverItem:c,visible:u,hover:d,selectOptionClick:p,states:n}}});function Jk(e,t,n,r,o,s){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("li",{class:(0,c.C_)([e.ns.be("dropdown","item"),e.ns.is("disabled",e.isDisabled),{selected:e.itemSelected,hover:e.hover}]),onMouseenter:t[0]||(t[0]=(...t)=>e.hoverItem&&e.hoverItem(...t)),onClick:t[1]||(t[1]=(0,A.iM)(((...t)=>e.selectOptionClick&&e.selectOptionClick(...t)),["stop"]))},[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a._)("span",null,(0,c.zw)(e.currentLabel),1)]))],34)),[[A.F8,e.visible]])}var Qk=(0,m.Z)(Zk,[["render",Jk],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const Xk=(0,a.aZ)({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=(0,a.f3)(Yk),t=(0,y.s3)("select"),n=(0,a.Fl)((()=>e.props.popperClass)),r=(0,a.Fl)((()=>e.props.multiple)),o=(0,a.Fl)((()=>e.props.fitInputWidth)),s=(0,l.iH)("");function i(){var t;s.value=`${null==(t=e.selectWrapper)?void 0:t.offsetWidth}px`}return(0,a.bv)((()=>{i(),(0,u.yU7)(e.selectWrapper,i)})),{ns:t,minWidth:s,popperClass:n,isMultiple:r,isFitInputWidth:o}}});function eC(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:(0,c.j5)({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[(0,a.WI)(e.$slots,"default")],6)}var tC=(0,m.Z)(Xk,[["render",eC],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);const nC=e=>Io.V[e||"default"];function rC(e){const{t:t}=(0,_s.bU)();return(0,l.qj)({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:t("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:11,tagInMultiLine:!1,mouseEnter:!1})}const oC=(e,t,n)=>{const{t:r}=(0,_s.bU)(),o=(0,y.s3)("select");(0,Os.A)({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},(0,a.Fl)((()=>!1===e.suffixTransition)));const s=(0,l.iH)(null),i=(0,l.iH)(null),u=(0,l.iH)(null),d=(0,l.iH)(null),f=(0,l.iH)(null),g=(0,l.iH)(null),m=(0,l.iH)(null),v=(0,l.iH)(-1),S=(0,l.XI)({query:""}),_=(0,l.XI)(""),E=(0,l.iH)([]);let k=0;const{form:C,formItem:I}=(0,Ph.A)(),A=(0,a.Fl)((()=>!e.filterable||e.multiple||!t.visible)),T=(0,a.Fl)((()=>e.disabled||(null==C?void 0:C.disabled))),R=(0,a.Fl)((()=>{const n=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:void 0!==e.modelValue&&null!==e.modelValue&&""!==e.modelValue,r=e.clearable&&!T.value&&t.inputHovering&&n;return r})),x=(0,a.Fl)((()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon)),O=(0,a.Fl)((()=>o.is("reverse",x.value&&t.visible&&e.suffixTransition))),N=(0,a.Fl)((()=>e.remote?300:0)),P=(0,a.Fl)((()=>e.loading?e.loadingText||r("el.select.loading"):(!e.remote||""!==t.query||0!==t.options.size)&&(e.filterable&&t.query&&t.options.size>0&&0===t.filteredOptionsCount?e.noMatchText||r("el.select.noMatch"):0===t.options.size?e.noDataText||r("el.select.noData"):null))),D=(0,a.Fl)((()=>{const e=Array.from(t.options.values()),n=[];return E.value.forEach((t=>{const r=e.findIndex((e=>e.currentLabel===t));r>-1&&n.push(e[r])})),n.length?n:e})),U=(0,a.Fl)((()=>Array.from(t.cachedOptions.values()))),L=(0,a.Fl)((()=>{const n=D.value.filter((e=>!e.created)).some((e=>e.currentLabel===t.query));return e.filterable&&e.allowCreate&&""!==t.query&&!n})),B=(0,mo.Cd)(),M=(0,a.Fl)((()=>["small"].includes(B.value)?"small":"default")),F=(0,a.Fl)({get(){return t.visible&&!1!==P.value},set(e){t.visible=e}});(0,a.YP)([()=>T.value,()=>B.value,()=>null==C?void 0:C.size],(()=>{(0,a.Y3)((()=>{j()}))})),(0,a.YP)((()=>e.placeholder),(e=>{t.cachedPlaceHolder=t.currentPlaceholder=e})),(0,a.YP)((()=>e.modelValue),((n,r)=>{e.multiple&&(j(),n&&n.length>0||i.value&&""!==t.query?t.currentPlaceholder="":t.currentPlaceholder=t.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(t.query="",z(t.query))),H(),e.filterable&&!e.multiple&&(t.inputLength=20),!wh(n,r)&&e.validateEvent&&(null==I||I.validate("change").catch((e=>(0,w.N)(e))))}),{flush:"post",deep:!0}),(0,a.YP)((()=>t.visible),(r=>{var o,s,h,p,f;r?(null==(s=null==(o=d.value)?void 0:o.updatePopper)||s.call(o),e.filterable&&(t.filteredOptionsCount=t.optionsCount,t.query=e.remote?"":t.selectedLabel,null==(p=null==(h=u.value)?void 0:h.focus)||p.call(h),e.multiple?null==(f=i.value)||f.focus():t.selectedLabel&&(t.currentPlaceholder=`${t.selectedLabel}`,t.selectedLabel=""),z(t.query),e.multiple||e.remote||(S.value.query="",(0,l.oR)(S),(0,l.oR)(_)))):(e.filterable&&((0,c.mf)(e.filterMethod)&&e.filterMethod(""),(0,c.mf)(e.remoteMethod)&&e.remoteMethod("")),i.value&&i.value.blur(),t.query="",t.previousQuery=null,t.selectedLabel="",t.inputLength=20,t.menuVisibleOnFocus=!1,q(),(0,a.Y3)((()=>{i.value&&""===i.value.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),e.multiple||(t.selected&&(e.filterable&&e.allowCreate&&t.createdSelected&&t.createdLabel?t.selectedLabel=t.createdLabel:t.selectedLabel=t.selected.currentLabel,e.filterable&&(t.query=t.selectedLabel)),e.filterable&&(t.currentPlaceholder=t.cachedPlaceHolder))),n.emit("visible-change",r)})),(0,a.YP)((()=>t.options.entries()),(()=>{var n,r,o;if(!h.C5)return;null==(r=null==(n=d.value)?void 0:n.updatePopper)||r.call(n),e.multiple&&j();const s=(null==(o=g.value)?void 0:o.querySelectorAll("input"))||[];Array.from(s).includes(document.activeElement)||H(),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&V()}),{flush:"post"}),(0,a.YP)((()=>t.hoverIndex),(e=>{(0,h.hj)(e)&&e>-1?v.value=D.value[e]||{}:v.value={},D.value.forEach((e=>{e.hover=v.value===e}))}));const j=()=>{(0,a.Y3)((()=>{var e,n;if(!s.value)return;const r=s.value.$el.querySelector("input");k=k||(r.clientHeight>0?r.clientHeight+2:0);const o=f.value,i=nC(B.value||(null==C?void 0:C.size)),a=i===k||k<=0?i:k,l=null===r.offsetParent;!l&&(r.style.height=(0===t.selected.length?a:Math.max(o?o.clientHeight+(o.clientHeight>a?6:0):0,a))-2+"px"),t.tagInMultiLine=Number.parseFloat(r.style.height)>=a,t.visible&&!1!==P.value&&(null==(n=null==(e=d.value)?void 0:e.updatePopper)||n.call(e))}))},z=async n=>{t.previousQuery===n||t.isOnComposition||(null!==t.previousQuery||!(0,c.mf)(e.filterMethod)&&!(0,c.mf)(e.remoteMethod)?(t.previousQuery=n,(0,a.Y3)((()=>{var e,n;t.visible&&(null==(n=null==(e=d.value)?void 0:e.updatePopper)||n.call(e))})),t.hoverIndex=-1,e.multiple&&e.filterable&&(0,a.Y3)((()=>{const n=15*i.value.value.length+20;t.inputLength=e.collapseTags?Math.min(50,n):n,$(),j()})),e.remote&&(0,c.mf)(e.remoteMethod)?(t.hoverIndex=-1,e.remoteMethod(n)):(0,c.mf)(e.filterMethod)?(e.filterMethod(n),(0,l.oR)(_)):(t.filteredOptionsCount=t.optionsCount,S.value.query=n,(0,l.oR)(S),(0,l.oR)(_)),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&(await(0,a.Y3)(),V())):t.previousQuery=n)},$=()=>{""!==t.currentPlaceholder&&(t.currentPlaceholder=i.value.value?"":t.cachedPlaceHolder)},V=()=>{const e=D.value.filter((e=>e.visible&&!e.disabled&&!e.states.groupDisabled)),n=e.find((e=>e.created)),r=e[0];t.hoverIndex=re(D.value,n||r)},H=()=>{var n;if(!e.multiple){const r=K(e.modelValue);return(null==(n=r.props)?void 0:n.created)?(t.createdLabel=r.props.value,t.createdSelected=!0):t.createdSelected=!1,t.selectedLabel=r.currentLabel,t.selected=r,void(e.filterable&&(t.query=t.selectedLabel))}t.selectedLabel="";const r=[];Array.isArray(e.modelValue)&&e.modelValue.forEach((e=>{r.push(K(e))})),t.selected=r,(0,a.Y3)((()=>{j()}))},K=n=>{let r;const o="object"===(0,c.W7)(n).toLowerCase(),s="null"===(0,c.W7)(n).toLowerCase(),i="undefined"===(0,c.W7)(n).toLowerCase();for(let c=t.cachedOptions.size-1;c>=0;c--){const t=U.value[c],s=o?(0,qk.Z)(t.value,e.valueKey)===(0,qk.Z)(n,e.valueKey):t.value===n;if(s){r={value:n,currentLabel:t.currentLabel,isDisabled:t.isDisabled};break}}if(r)return r;const a=o?n.label:s||i?"":n,l={value:n,currentLabel:a};return e.multiple&&(l.hitState=!1),l},q=()=>{setTimeout((()=>{const n=e.valueKey;e.multiple?t.selected.length>0?t.hoverIndex=Math.min.apply(null,t.selected.map((e=>D.value.findIndex((t=>(0,qk.Z)(t,n)===(0,qk.Z)(e,n)))))):t.hoverIndex=-1:t.hoverIndex=D.value.findIndex((e=>Se(e)===Se(t.selected)))}),300)},W=()=>{var t,n;Y(),null==(n=null==(t=d.value)?void 0:t.updatePopper)||n.call(t),e.multiple&&j()},Y=()=>{var e;t.inputWidth=null==(e=s.value)?void 0:e.$el.offsetWidth},G=()=>{e.filterable&&t.query!==t.selectedLabel&&(t.query=t.selectedLabel,z(t.query))},Z=ie((()=>{G()}),N.value),J=ie((e=>{z(e.target.value)}),N.value),Q=t=>{wh(e.modelValue,t)||n.emit(p.O7,t)},X=r=>{if(r.target.value.length<=0&&!ue()){const t=e.modelValue.slice();t.pop(),n.emit(p.f_,t),Q(t)}1===r.target.value.length&&0===e.modelValue.length&&(t.currentPlaceholder=t.cachedPlaceHolder)},ee=(r,o)=>{const s=t.selected.indexOf(o);if(s>-1&&!T.value){const t=e.modelValue.slice();t.splice(s,1),n.emit(p.f_,t),Q(t),n.emit("remove-tag",o.value)}r.stopPropagation()},te=r=>{r.stopPropagation();const o=e.multiple?[]:"";if(!(0,c.HD)(o))for(const e of t.selected)e.isDisabled&&o.push(e.value);n.emit(p.f_,o),Q(o),t.hoverIndex=-1,t.visible=!1,n.emit("clear")},ne=(r,o)=>{var s;if(e.multiple){const o=(e.modelValue||[]).slice(),a=re(o,r.value);a>-1?o.splice(a,1):(e.multipleLimit<=0||o.length<e.multipleLimit)&&o.push(r.value),n.emit(p.f_,o),Q(o),r.created&&(t.query="",z(""),t.inputLength=20),e.filterable&&(null==(s=i.value)||s.focus())}else n.emit(p.f_,r.value),Q(r.value),t.visible=!1;t.isSilentBlur=o,oe(),t.visible||(0,a.Y3)((()=>{se(r)}))},re=(t=[],n)=>{if(!(0,c.Kn)(n))return t.indexOf(n);const r=e.valueKey;let o=-1;return t.some(((e,t)=>(0,l.IU)((0,qk.Z)(e,r))===(0,qk.Z)(n,r)&&(o=t,!0))),o},oe=()=>{t.softFocus=!0;const e=i.value||s.value;e&&(null==e||e.focus())},se=e=>{var t,n,r,s,i;const a=Array.isArray(e)?e[0]:e;let l=null;if(null==a?void 0:a.value){const e=D.value.filter((e=>e.value===a.value));e.length>0&&(l=e[0].$el)}if(d.value&&l){const e=null==(s=null==(r=null==(n=null==(t=d.value)?void 0:t.popperRef)?void 0:n.contentRef)?void 0:r.querySelector)?void 0:s.call(r,`.${o.be("dropdown","wrap")}`);e&&(0,b.zT)(e,l)}null==(i=m.value)||i.handleScroll()},ae=e=>{t.optionsCount++,t.filteredOptionsCount++,t.options.set(e.value,e),t.cachedOptions.set(e.value,e)},le=(e,n)=>{t.options.get(e)===n&&(t.optionsCount--,t.filteredOptionsCount--,t.options.delete(e))},ce=e=>{e.code!==Jn.n.backspace&&ue(!1),t.inputLength=15*i.value.value.length+20,j()},ue=e=>{if(!Array.isArray(t.selected))return;const n=t.selected[t.selected.length-1];return n?!0===e||!1===e?(n.hitState=e,e):(n.hitState=!n.hitState,n.hitState):void 0},de=e=>{const n=e.target.value;if("compositionend"===e.type)t.isOnComposition=!1,(0,a.Y3)((()=>z(n)));else{const e=n[n.length-1]||"";t.isOnComposition=!(0,Qf.w)(e)}},he=()=>{(0,a.Y3)((()=>se(t.selected)))},pe=r=>{t.softFocus?t.softFocus=!1:((e.automaticDropdown||e.filterable)&&(e.filterable&&!t.visible&&(t.menuVisibleOnFocus=!0),t.visible=!0),n.emit("focus",r))},fe=()=>{var e,n,r;t.visible=!1,null==(e=s.value)||e.blur(),null==(r=null==(n=u.value)?void 0:n.blur)||r.call(n)},ge=e=>{(0,a.Y3)((()=>{t.isSilentBlur?t.isSilentBlur=!1:n.emit("blur",e)})),t.softFocus=!1},me=e=>{te(e)},ye=()=>{t.visible=!1},ve=e=>{t.visible&&(e.preventDefault(),e.stopPropagation(),t.visible=!1)},we=e=>{var n;e&&!t.mouseEnter||T.value||(t.menuVisibleOnFocus?t.menuVisibleOnFocus=!1:d.value&&d.value.isFocusInsideContent()||(t.visible=!t.visible),t.visible&&(null==(n=i.value||s.value)||n.focus()))},be=()=>{t.visible?D.value[t.hoverIndex]&&ne(D.value[t.hoverIndex],void 0):we()},Se=t=>(0,c.Kn)(t.value)?(0,qk.Z)(t.value,e.valueKey):t.value,_e=(0,a.Fl)((()=>D.value.filter((e=>e.visible)).every((e=>e.disabled)))),Ee=(0,a.Fl)((()=>t.selected.slice(0,e.maxCollapseTags))),ke=(0,a.Fl)((()=>t.selected.slice(e.maxCollapseTags))),Ce=e=>{if(t.visible){if(0!==t.options.size&&0!==t.filteredOptionsCount&&!t.isOnComposition&&!_e.value){"next"===e?(t.hoverIndex++,t.hoverIndex===t.options.size&&(t.hoverIndex=0)):"prev"===e&&(t.hoverIndex--,t.hoverIndex<0&&(t.hoverIndex=t.options.size-1));const n=D.value[t.hoverIndex];!0!==n.disabled&&!0!==n.states.groupDisabled&&n.visible||Ce(e),(0,a.Y3)((()=>se(v.value)))}}else t.visible=!0},Ie=()=>{t.mouseEnter=!0},Ae=()=>{t.mouseEnter=!1};return{optionList:E,optionsArray:D,selectSize:B,handleResize:W,debouncedOnInputChange:Z,debouncedQueryChange:J,deletePrevTag:X,deleteTag:ee,deleteSelected:te,handleOptionSelect:ne,scrollToOption:se,readonly:A,resetInputHeight:j,showClose:R,iconComponent:x,iconReverse:O,showNewOption:L,collapseTagSize:M,setSelected:H,managePlaceholder:$,selectDisabled:T,emptyText:P,toggleLastOptionHitState:ue,resetInputState:ce,handleComposition:de,onOptionCreate:ae,onOptionDestroy:le,handleMenuEnter:he,handleFocus:pe,blur:fe,handleBlur:ge,handleClearClick:me,handleClose:ye,handleKeydownEscape:ve,toggleMenu:we,selectOption:be,getValueKey:Se,navigateOptions:Ce,dropMenuVisible:F,queryChange:S,groupQueryChange:_,showTagList:Ee,collapseTagList:ke,reference:s,input:i,iOSInput:u,tooltipRef:d,tags:f,selectWrapper:g,scrollbar:m,handleMouseEnter:Ie,handleMouseLeave:Ae}};var sC=(0,a.aZ)({name:"ElOptions",emits:["update-options"],setup(e,{slots:t,emit:n}){let r=[];function o(e,t){if(e.length!==t.length)return!1;for(const[n]of e.entries())if(e[n]!=t[n])return!1;return!0}return()=>{var e,s;const i=null==(e=t.default)?void 0:e.call(t),a=[];function l(e){Array.isArray(e)&&e.forEach((e=>{var t,n,r,o;const s=null==(t=(null==e?void 0:e.type)||{})?void 0:t.name;"ElOptionGroup"===s?l((0,c.HD)(e.children)||Array.isArray(e.children)||!(0,c.mf)(null==(n=e.children)?void 0:n.default)?e.children:null==(r=e.children)?void 0:r.default()):"ElOption"===s?a.push(null==(o=e.props)?void 0:o.label):Array.isArray(e.children)&&l(e.children)}))}return i.length&&l(null==(s=i[0])?void 0:s.children),o(a,r)||(r=a,n("update-options",a)),i}}}),iC=n(2111);const aC=e=>({focus:()=>{var t,n;null==(n=null==(t=e.value)?void 0:t.focus)||n.call(t)}}),lC="ElSelect",cC=(0,a.aZ)({name:lC,componentName:lC,components:{ElInput:le.EZ,ElSelectMenu:tC,ElOption:Qk,ElOptions:sC,ElTag:Gf,ElScrollbar:Ie,ElTooltip:ho,ElIcon:T.gn},directives:{ClickOutside:ng},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:iC.P},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},teleported:Gn.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:x.AA,default:ae.K41},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:x.AA,default:ae.K5e},tagType:{...Hf.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:{type:Boolean,default:!1},suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:Qe,default:"bottom-start"}},emits:[p.f_,p.O7,"remove-tag","clear","visible-change","focus","blur"],setup(e,t){const n=(0,y.s3)("select"),r=(0,y.s3)("input"),{t:o}=(0,_s.bU)(),s=rC(e),{optionList:i,optionsArray:c,selectSize:d,readonly:f,handleResize:g,collapseTagSize:m,debouncedOnInputChange:v,debouncedQueryChange:w,deletePrevTag:b,deleteTag:S,deleteSelected:_,handleOptionSelect:E,scrollToOption:k,setSelected:C,resetInputHeight:I,managePlaceholder:A,showClose:T,selectDisabled:R,iconComponent:x,iconReverse:O,showNewOption:N,emptyText:P,toggleLastOptionHitState:D,resetInputState:U,handleComposition:L,onOptionCreate:B,onOptionDestroy:M,handleMenuEnter:F,handleFocus:j,blur:z,handleBlur:$,handleClearClick:V,handleClose:H,handleKeydownEscape:K,toggleMenu:q,selectOption:W,getValueKey:Y,navigateOptions:G,dropMenuVisible:Z,reference:J,input:Q,iOSInput:X,tooltipRef:ee,tags:te,selectWrapper:ne,scrollbar:re,queryChange:oe,groupQueryChange:se,handleMouseEnter:ie,handleMouseLeave:ae,showTagList:le,collapseTagList:ce}=oC(e,s,t),{focus:ue}=aC(J),{inputWidth:de,selected:he,inputLength:pe,filteredOptionsCount:fe,visible:ge,softFocus:me,selectedLabel:ye,hoverIndex:ve,query:we,inputHovering:be,currentPlaceholder:Se,menuVisibleOnFocus:_e,isOnComposition:Ee,isSilentBlur:ke,options:Ce,cachedOptions:Ie,optionsCount:Ae,prefixWidth:Te,tagInMultiLine:Re}=(0,l.BK)(s),xe=(0,a.Fl)((()=>{const t=[n.b()],r=(0,l.SU)(d);return r&&t.push(n.m(r)),e.disabled&&t.push(n.m("disabled")),t})),Oe=(0,a.Fl)((()=>({maxWidth:(0,l.SU)(de)-32+"px",width:"100%"}))),Ne=(0,a.Fl)((()=>{const e=(0,l.SU)(de)>123?(0,l.SU)(de)-123:(0,l.SU)(de)-75;return{maxWidth:`${e}px`}}));(0,a.JJ)(Yk,(0,l.qj)({props:e,options:Ce,optionsArray:c,cachedOptions:Ie,optionsCount:Ae,filteredOptionsCount:fe,hoverIndex:ve,handleOptionSelect:E,onOptionCreate:B,onOptionDestroy:M,selectWrapper:ne,selected:he,setSelected:C,queryChange:oe,groupQueryChange:se})),(0,a.bv)((()=>{s.cachedPlaceHolder=Se.value=e.placeholder||(()=>o("el.select.placeholder")),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(Se.value=""),(0,u.yU7)(ne,g),e.remote&&e.multiple&&I(),(0,a.Y3)((()=>{const e=J.value&&J.value.$el;if(e&&(de.value=e.getBoundingClientRect().width,t.slots.prefix)){const t=e.querySelector(`.${r.e("prefix")}`);Te.value=Math.max(t.getBoundingClientRect().width+5,30)}})),C()})),e.multiple&&!Array.isArray(e.modelValue)&&t.emit(p.f_,[]),!e.multiple&&Array.isArray(e.modelValue)&&t.emit(p.f_,"");const Pe=(0,a.Fl)((()=>{var e,t;return null==(t=null==(e=ee.value)?void 0:e.popperRef)?void 0:t.contentRef})),De=e=>{i.value=e};return{isIOS:h.gn,onOptionsRendered:De,tagInMultiLine:Re,prefixWidth:Te,selectSize:d,readonly:f,handleResize:g,collapseTagSize:m,debouncedOnInputChange:v,debouncedQueryChange:w,deletePrevTag:b,deleteTag:S,deleteSelected:_,handleOptionSelect:E,scrollToOption:k,inputWidth:de,selected:he,inputLength:pe,filteredOptionsCount:fe,visible:ge,softFocus:me,selectedLabel:ye,hoverIndex:ve,query:we,inputHovering:be,currentPlaceholder:Se,menuVisibleOnFocus:_e,isOnComposition:Ee,isSilentBlur:ke,options:Ce,resetInputHeight:I,managePlaceholder:A,showClose:T,selectDisabled:R,iconComponent:x,iconReverse:O,showNewOption:N,emptyText:P,toggleLastOptionHitState:D,resetInputState:U,handleComposition:L,handleMenuEnter:F,handleFocus:j,blur:z,handleBlur:$,handleClearClick:V,handleClose:H,handleKeydownEscape:K,toggleMenu:q,selectOption:W,getValueKey:Y,navigateOptions:G,dropMenuVisible:Z,focus:ue,reference:J,input:Q,iOSInput:X,tooltipRef:ee,popperPaneRef:Pe,tags:te,selectWrapper:ne,scrollbar:re,wrapperKls:xe,selectTagsStyle:Oe,nsSelect:n,tagTextStyle:Ne,handleMouseEnter:ie,handleMouseLeave:ae,showTagList:le,collapseTagList:ce}}}),uC=["disabled","autocomplete"],dC=["disabled"],hC={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function pC(e,t,n,r,o,s){const i=(0,a.up)("el-tag"),l=(0,a.up)("el-tooltip"),u=(0,a.up)("el-icon"),d=(0,a.up)("el-input"),h=(0,a.up)("el-option"),p=(0,a.up)("el-options"),f=(0,a.up)("el-scrollbar"),g=(0,a.up)("el-select-menu"),m=(0,a.Q2)("click-outside");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{ref:"selectWrapper",class:(0,c.C_)(e.wrapperKls),onMouseenter:t[21]||(t[21]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:t[22]||(t[22]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t)),onClick:t[23]||(t[23]=(0,A.iM)(((...t)=>e.toggleMenu&&e.toggleMenu(...t)),["stop"]))},[(0,a.Wm)(l,{ref:"tooltipRef",visible:e.dropMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onShow:e.handleMenuEnter},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"select-trigger",onMouseenter:t[19]||(t[19]=t=>e.inputHovering=!0),onMouseleave:t[20]||(t[20]=t=>e.inputHovering=!1)},[e.multiple?((0,a.wg)(),(0,a.iD)("div",{key:0,ref:"tags",class:(0,c.C_)(e.nsSelect.e("tags")),style:(0,c.j5)(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?((0,a.wg)(),(0,a.j4)(A.uT,{key:0,onAfterLeave:e.resetInputHeight},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.showTagList,(t=>((0,a.wg)(),(0,a.j4)(i,{key:e.getValueKey(t),closable:!e.selectDisabled&&!t.isDisabled,size:e.collapseTagSize,hit:t.hitState,type:e.tagType,"disable-transitions":"",onClose:n=>e.deleteTag(n,t)},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelect.e("tags-text")),style:(0,c.j5)(e.tagTextStyle)},(0,c.zw)(t.currentLabel),7)])),_:2},1032,["closable","size","hit","type","onClose"])))),128)),e.selected.length>e.maxCollapseTags?((0,a.wg)(),(0,a.j4)(i,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:(0,a.w5)((()=>[e.collapseTagsTooltip?((0,a.wg)(),(0,a.j4)(l,{key:0,disabled:e.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelect.e("tags-text"))},"+ "+(0,c.zw)(e.selected.length-e.maxCollapseTags),3)])),content:(0,a.w5)((()=>[(0,a._)("div",{class:(0,c.C_)(e.nsSelect.e("collapse-tags"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.collapseTagList,(t=>((0,a.wg)(),(0,a.iD)("div",{key:e.getValueKey(t),class:(0,c.C_)(e.nsSelect.e("collapse-tag"))},[(0,a.Wm)(i,{class:"in-tooltip",closable:!e.selectDisabled&&!t.isDisabled,size:e.collapseTagSize,hit:t.hitState,type:e.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:n=>e.deleteTag(n,t)},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelect.e("tags-text")),style:(0,c.j5)({maxWidth:e.inputWidth-75+"px"})},(0,c.zw)(t.currentLabel),7)])),_:2},1032,["closable","size","hit","type","onClose"])],2)))),128))],2)])),_:1},8,["disabled","effect","teleported"])):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,c.C_)(e.nsSelect.e("tags-text"))},"+ "+(0,c.zw)(e.selected.length-e.maxCollapseTags),3))])),_:1},8,["size","type"])):(0,a.kq)("v-if",!0)],2)])),_:1},8,["onAfterLeave"])):(0,a.kq)("v-if",!0),e.collapseTags?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.j4)(A.uT,{key:1,onAfterLeave:e.resetInputHeight},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.selected,(t=>((0,a.wg)(),(0,a.j4)(i,{key:e.getValueKey(t),closable:!e.selectDisabled&&!t.isDisabled,size:e.collapseTagSize,hit:t.hitState,type:e.tagType,"disable-transitions":"",onClose:n=>e.deleteTag(n,t)},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelect.e("tags-text")),style:(0,c.j5)({maxWidth:e.inputWidth-75+"px"})},(0,c.zw)(t.currentLabel),7)])),_:2},1032,["closable","size","hit","type","onClose"])))),128))],2)])),_:1},8,["onAfterLeave"])),e.filterable?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:2,ref:"input","onUpdate:modelValue":t[0]||(t[0]=t=>e.query=t),type:"text",class:(0,c.C_)([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:(0,c.j5)({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:"",flexGrow:1,width:e.inputLength/(e.inputWidth-32)+"%",maxWidth:e.inputWidth-42+"px"}),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onKeyup:t[3]||(t[3]=(...t)=>e.managePlaceholder&&e.managePlaceholder(...t)),onKeydown:[t[4]||(t[4]=(...t)=>e.resetInputState&&e.resetInputState(...t)),t[5]||(t[5]=(0,A.D2)((0,A.iM)((t=>e.navigateOptions("next")),["prevent"]),["down"])),t[6]||(t[6]=(0,A.D2)((0,A.iM)((t=>e.navigateOptions("prev")),["prevent"]),["up"])),t[7]||(t[7]=(0,A.D2)(((...t)=>e.handleKeydownEscape&&e.handleKeydownEscape(...t)),["esc"])),t[8]||(t[8]=(0,A.D2)((0,A.iM)(((...t)=>e.selectOption&&e.selectOption(...t)),["stop","prevent"]),["enter"])),t[9]||(t[9]=(0,A.D2)(((...t)=>e.deletePrevTag&&e.deletePrevTag(...t)),["delete"])),t[10]||(t[10]=(0,A.D2)((t=>e.visible=!1),["tab"]))],onCompositionstart:t[11]||(t[11]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionupdate:t[12]||(t[12]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionend:t[13]||(t[13]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onInput:t[14]||(t[14]=(...t)=>e.debouncedQueryChange&&e.debouncedQueryChange(...t))},null,46,uC)),[[A.nr,e.query]]):(0,a.kq)("v-if",!0)],6)):(0,a.kq)("v-if",!0),(0,a.kq)(" fix: https://github.com/element-plus/element-plus/issues/11415 "),e.isIOS&&!e.multiple&&e.filterable&&e.readonly?((0,a.wg)(),(0,a.iD)("input",{key:1,ref:"iOSInput",class:(0,c.C_)([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize),e.nsSelect.em("input","iOS")]),disabled:e.selectDisabled,type:"text"},null,10,dC)):(0,a.kq)("v-if",!0),(0,a.Wm)(d,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":t[15]||(t[15]=t=>e.selectedLabel=t),type:"text",placeholder:"function"===typeof e.currentPlaceholder?e.currentPlaceholder():e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:(0,c.C_)([e.nsSelect.is("focus",e.visible)]),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[t[16]||(t[16]=(0,A.D2)((0,A.iM)((t=>e.navigateOptions("next")),["stop","prevent"]),["down"])),t[17]||(t[17]=(0,A.D2)((0,A.iM)((t=>e.navigateOptions("prev")),["stop","prevent"]),["up"])),(0,A.D2)((0,A.iM)(e.selectOption,["stop","prevent"]),["enter"]),(0,A.D2)(e.handleKeydownEscape,["esc"]),t[18]||(t[18]=(0,A.D2)((t=>e.visible=!1),["tab"]))]},(0,a.Nv)({suffix:(0,a.w5)((()=>[e.iconComponent&&!e.showClose?((0,a.wg)(),(0,a.j4)(u,{key:0,class:(0,c.C_)([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.iconComponent)))])),_:1},8,["class"])):(0,a.kq)("v-if",!0),e.showClose&&e.clearIcon?((0,a.wg)(),(0,a.j4)(u,{key:1,class:(0,c.C_)([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.clearIcon)))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0)])),_:2},[e.$slots.prefix?{name:"prefix",fn:(0,a.w5)((()=>[(0,a._)("div",hC,[(0,a.WI)(e.$slots,"prefix")])]))}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)])),content:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(f,{ref:"scrollbar",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:(0,c.C_)([e.nsSelect.is("empty",!e.allowCreate&&Boolean(e.query)&&0===e.filteredOptionsCount)])},{default:(0,a.w5)((()=>[e.showNewOption?((0,a.wg)(),(0,a.j4)(h,{key:0,value:e.query,created:!0},null,8,["value"])):(0,a.kq)("v-if",!0),(0,a.Wm)(p,{onUpdateOptions:e.onOptionsRendered},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["onUpdateOptions"])])),_:3},8,["wrap-class","view-class","class"]),[[A.F8,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.size)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[e.$slots.empty?(0,a.WI)(e.$slots,"empty",{key:0}):((0,a.wg)(),(0,a.iD)("p",{key:1,class:(0,c.C_)(e.nsSelect.be("dropdown","empty"))},(0,c.zw)(e.emptyText),3))],64)):(0,a.kq)("v-if",!0)])),_:3})])),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[m,e.handleClose,e.popperPaneRef]])}var fC=(0,m.Z)(cC,[["render",pC],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const gC=(0,a.aZ)({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const t=(0,y.s3)("select"),n=(0,l.iH)(!0),r=(0,a.FN)(),o=(0,l.iH)([]);(0,a.JJ)(Wk,(0,l.qj)({...(0,l.BK)(e)}));const s=(0,a.f3)(Yk);(0,a.bv)((()=>{o.value=i(r.subTree)}));const i=e=>{const t=[];return Array.isArray(e.children)&&e.children.forEach((e=>{var n;e.type&&"ElOption"===e.type.name&&e.component&&e.component.proxy?t.push(e.component.proxy):(null==(n=e.children)?void 0:n.length)&&t.push(...i(e))})),t},{groupQueryChange:c}=(0,l.IU)(s);return(0,a.YP)(c,(()=>{n.value=o.value.some((e=>!0===e.visible))}),{flush:"post"}),{visible:n,ns:t}}});function mC(e,t,n,r,o,s){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("ul",{class:(0,c.C_)(e.ns.be("group","wrap"))},[(0,a._)("li",{class:(0,c.C_)(e.ns.be("group","title"))},(0,c.zw)(e.label),3),(0,a._)("li",null,[(0,a._)("ul",{class:(0,c.C_)(e.ns.b("group"))},[(0,a.WI)(e.$slots,"default")],2)])],2)),[[A.F8,e.visible]])}var yC=(0,m.Z)(gC,[["render",mC],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const vC=(0,C.nz)(fC,{Option:Qk,OptionGroup:yC}),wC=(0,C.dp)(Qk),bC=(0,C.dp)(yC),SC=()=>(0,a.f3)(Nk,{}),_C=(0,d.o8)({pageSize:{type:Number,required:!0},pageSizes:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:Io.k}}),EC=(0,a.aZ)({name:"ElPaginationSizes"}),kC=(0,a.aZ)({...EC,props:_C,emits:["page-size-change"],setup(e,{emit:t}){const n=e,{t:r}=(0,_s.bU)(),o=(0,y.s3)("pagination"),s=SC(),i=(0,l.iH)(n.pageSize);(0,a.YP)((()=>n.pageSizes),((e,r)=>{if(!wh(e,r)&&Array.isArray(e)){const r=e.includes(n.pageSize)?n.pageSize:n.pageSizes[0];t("page-size-change",r)}})),(0,a.YP)((()=>n.pageSize),(e=>{i.value=e}));const u=(0,a.Fl)((()=>n.pageSizes));function d(e){var t;e!==i.value&&(i.value=e,null==(t=s.handleSizeChange)||t.call(s,Number(e)))}return(e,t)=>((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(o).e("sizes"))},[(0,a.Wm)((0,l.SU)(vC),{"model-value":i.value,disabled:e.disabled,"popper-class":e.popperClass,size:e.size,"validate-event":!1,onChange:d},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(u),(e=>((0,a.wg)(),(0,a.j4)((0,l.SU)(wC),{key:e,value:e,label:e+(0,l.SU)(r)("el.pagination.pagesize")},null,8,["value","label"])))),128))])),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var CC=(0,m.Z)(kC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const IC=(0,d.o8)({size:{type:String,values:Io.k}}),AC=["disabled"],TC=(0,a.aZ)({name:"ElPaginationJumper"}),RC=(0,a.aZ)({...TC,props:IC,setup(e){const{t:t}=(0,_s.bU)(),n=(0,y.s3)("pagination"),{pageCount:r,disabled:o,currentPage:s,changeEvent:i}=SC(),u=(0,l.iH)(),d=(0,a.Fl)((()=>{var e;return null!=(e=u.value)?e:null==s?void 0:s.value}));function h(e){u.value=+e}function p(e){e=Math.trunc(+e),null==i||i(+e),u.value=void 0}return(e,s)=>((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(n).e("jump")),disabled:(0,l.SU)(o)},[(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(n).e("goto")])},(0,c.zw)((0,l.SU)(t)("el.pagination.goto")),3),(0,a.Wm)((0,l.SU)(le.EZ),{size:e.size,class:(0,c.C_)([(0,l.SU)(n).e("editor"),(0,l.SU)(n).is("in-pagination")]),min:1,max:(0,l.SU)(r),disabled:(0,l.SU)(o),"model-value":(0,l.SU)(d),"validate-event":!1,label:(0,l.SU)(t)("el.pagination.page"),type:"number","onUpdate:modelValue":h,onChange:p},null,8,["size","class","max","disabled","model-value","label"]),(0,a._)("span",{class:(0,c.C_)([(0,l.SU)(n).e("classifier")])},(0,c.zw)((0,l.SU)(t)("el.pagination.pageClassifier")),3)],10,AC))}});var xC=(0,m.Z)(RC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const OC=(0,d.o8)({total:{type:Number,default:1e3}}),NC=["disabled"],PC=(0,a.aZ)({name:"ElPaginationTotal"}),DC=(0,a.aZ)({...PC,props:OC,setup(e){const{t:t}=(0,_s.bU)(),n=(0,y.s3)("pagination"),{disabled:r}=SC();return(e,o)=>((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)((0,l.SU)(n).e("total")),disabled:(0,l.SU)(r)},(0,c.zw)((0,l.SU)(t)("el.pagination.total",{total:e.total})),11,NC))}});var UC=(0,m.Z)(DC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const LC=(0,d.o8)({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),BC=["onKeyup"],MC=["aria-current","aria-label","tabindex"],FC=["tabindex","aria-label"],jC=["aria-current","aria-label","tabindex"],zC=["tabindex","aria-label"],$C=["aria-current","aria-label","tabindex"],VC=(0,a.aZ)({name:"ElPaginationPager"}),HC=(0,a.aZ)({...VC,props:LC,emits:["change"],setup(e,{emit:t}){const n=e,r=(0,y.s3)("pager"),o=(0,y.s3)("icon"),{t:s}=(0,_s.bU)(),i=(0,l.iH)(!1),u=(0,l.iH)(!1),d=(0,l.iH)(!1),h=(0,l.iH)(!1),p=(0,l.iH)(!1),f=(0,l.iH)(!1),g=(0,a.Fl)((()=>{const e=n.pagerCount,t=(e-1)/2,r=Number(n.currentPage),o=Number(n.pageCount);let s=!1,i=!1;o>e&&(r>e-t&&(s=!0),r<o-t&&(i=!0));const a=[];if(s&&!i){const t=o-(e-2);for(let e=t;e<o;e++)a.push(e)}else if(!s&&i)for(let n=2;n<e;n++)a.push(n);else if(s&&i){const t=Math.floor(e/2)-1;for(let e=r-t;e<=r+t;e++)a.push(e)}else for(let n=2;n<o;n++)a.push(n);return a})),m=(0,a.Fl)((()=>n.disabled?-1:0));function v(e=!1){n.disabled||(e?d.value=!0:h.value=!0)}function w(e=!1){e?p.value=!0:f.value=!0}function b(e){const r=e.target;if("li"===r.tagName.toLowerCase()&&Array.from(r.classList).includes("number")){const e=Number(r.textContent);e!==n.currentPage&&t("change",e)}else"li"===r.tagName.toLowerCase()&&Array.from(r.classList).includes("more")&&S(e)}function S(e){const r=e.target;if("ul"===r.tagName.toLowerCase()||n.disabled)return;let o=Number(r.textContent);const s=n.pageCount,i=n.currentPage,a=n.pagerCount-2;r.className.includes("more")&&(r.className.includes("quickprev")?o=i-a:r.className.includes("quicknext")&&(o=i+a)),Number.isNaN(+o)||(o<1&&(o=1),o>s&&(o=s)),o!==i&&t("change",o)}return(0,a.m0)((()=>{const e=(n.pagerCount-1)/2;i.value=!1,u.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-e&&(i.value=!0),n.currentPage<n.pageCount-e&&(u.value=!0))})),(e,t)=>((0,a.wg)(),(0,a.iD)("ul",{class:(0,c.C_)((0,l.SU)(r).b()),onClick:S,onKeyup:(0,A.D2)(b,["enter"])},[e.pageCount>0?((0,a.wg)(),(0,a.iD)("li",{key:0,class:(0,c.C_)([[(0,l.SU)(r).is("active",1===e.currentPage),(0,l.SU)(r).is("disabled",e.disabled)],"number"]),"aria-current":1===e.currentPage,"aria-label":(0,l.SU)(s)("el.pagination.currentPage",{pager:1}),tabindex:(0,l.SU)(m)}," 1 ",10,MC)):(0,a.kq)("v-if",!0),i.value?((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,c.C_)(["more","btn-quickprev",(0,l.SU)(o).b(),(0,l.SU)(r).is("disabled",e.disabled)]),tabindex:(0,l.SU)(m),"aria-label":(0,l.SU)(s)("el.pagination.prevPages",{pager:e.pagerCount-2}),onMouseenter:t[0]||(t[0]=e=>v(!0)),onMouseleave:t[1]||(t[1]=e=>d.value=!1),onFocus:t[2]||(t[2]=e=>w(!0)),onBlur:t[3]||(t[3]=e=>p.value=!1)},[!d.value&&!p.value||e.disabled?((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.ohl),{key:1})):((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.BAP),{key:0}))],42,FC)):(0,a.kq)("v-if",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(g),(t=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:(0,c.C_)([[(0,l.SU)(r).is("active",e.currentPage===t),(0,l.SU)(r).is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===t,"aria-label":(0,l.SU)(s)("el.pagination.currentPage",{pager:t}),tabindex:(0,l.SU)(m)},(0,c.zw)(t),11,jC)))),128)),u.value?((0,a.wg)(),(0,a.iD)("li",{key:2,class:(0,c.C_)(["more","btn-quicknext",(0,l.SU)(o).b(),(0,l.SU)(r).is("disabled",e.disabled)]),tabindex:(0,l.SU)(m),"aria-label":(0,l.SU)(s)("el.pagination.nextPages",{pager:e.pagerCount-2}),onMouseenter:t[4]||(t[4]=e=>v()),onMouseleave:t[5]||(t[5]=e=>h.value=!1),onFocus:t[6]||(t[6]=e=>w()),onBlur:t[7]||(t[7]=e=>f.value=!1)},[!h.value&&!f.value||e.disabled?((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.ohl),{key:1})):((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.tsQ),{key:0}))],42,zC)):(0,a.kq)("v-if",!0),e.pageCount>1?((0,a.wg)(),(0,a.iD)("li",{key:3,class:(0,c.C_)([[(0,l.SU)(r).is("active",e.currentPage===e.pageCount),(0,l.SU)(r).is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===e.pageCount,"aria-label":(0,l.SU)(s)("el.pagination.currentPage",{pager:e.pageCount}),tabindex:(0,l.SU)(m)},(0,c.zw)(e.pageCount),11,$C)):(0,a.kq)("v-if",!0)],42,BC))}});var KC=(0,m.Z)(HC,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const qC=e=>"number"!==typeof e,WC=(0,d.o8)({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>(0,h.hj)(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:x.AA,default:()=>ae.XdH},nextText:{type:String,default:""},nextIcon:{type:x.AA,default:()=>ae.olP},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),YC={"update:current-page":e=>(0,h.hj)(e),"update:page-size":e=>(0,h.hj)(e),"size-change":e=>(0,h.hj)(e),"current-change":e=>(0,h.hj)(e),"prev-click":e=>(0,h.hj)(e),"next-click":e=>(0,h.hj)(e)},GC="ElPagination";var ZC=(0,a.aZ)({name:GC,props:WC,emits:YC,setup(e,{emit:t,slots:n}){const{t:r}=(0,_s.bU)(),o=(0,y.s3)("pagination"),s=(0,a.FN)().vnode.props||{},i="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,c="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,u=(0,a.Fl)((()=>{if(qC(e.total)&&qC(e.pageCount))return!1;if(!qC(e.currentPage)&&!i)return!1;if(e.layout.includes("sizes"))if(qC(e.pageCount)){if(!qC(e.total)&&!qC(e.pageSize)&&!c)return!1}else if(!c)return!1;return!0})),d=(0,l.iH)(qC(e.defaultPageSize)?10:e.defaultPageSize),h=(0,l.iH)(qC(e.defaultCurrentPage)?1:e.defaultCurrentPage),p=(0,a.Fl)({get(){return qC(e.pageSize)?d.value:e.pageSize},set(n){qC(e.pageSize)&&(d.value=n),c&&(t("update:page-size",n),t("size-change",n))}}),f=(0,a.Fl)((()=>{let t=0;return qC(e.pageCount)?qC(e.total)||(t=Math.max(1,Math.ceil(e.total/p.value))):t=e.pageCount,t})),g=(0,a.Fl)({get(){return qC(e.currentPage)?h.value:e.currentPage},set(n){let r=n;n<1?r=1:n>f.value&&(r=f.value),qC(e.currentPage)&&(h.value=r),i&&(t("update:current-page",r),t("current-change",r))}});function m(e){g.value=e}function v(e){p.value=e;const t=f.value;g.value>t&&(g.value=t)}function b(){e.disabled||(g.value-=1,t("prev-click",g.value))}function S(){e.disabled||(g.value+=1,t("next-click",g.value))}function _(e,t){e&&(e.props||(e.props={}),e.props.class=[e.props.class,t].join(" "))}return(0,a.YP)(f,(e=>{g.value>e&&(g.value=e)})),(0,a.JJ)(Nk,{pageCount:f,disabled:(0,a.Fl)((()=>e.disabled)),currentPage:g,changeEvent:m,handleSizeChange:v}),()=>{var t,s;if(!u.value)return(0,w.N)(GC,r("el.pagination.deprecationWarning")),null;if(!e.layout)return null;if(e.hideOnSinglePage&&f.value<=1)return null;const i=[],l=[],c=(0,a.h)("div",{class:o.e("rightwrapper")},l),d={prev:(0,a.h)(Fk,{disabled:e.disabled,currentPage:g.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:b}),jumper:(0,a.h)(xC,{size:e.small?"small":"default"}),pager:(0,a.h)(KC,{currentPage:g.value,pageCount:f.value,pagerCount:e.pagerCount,onChange:m,disabled:e.disabled}),next:(0,a.h)(Kk,{disabled:e.disabled,currentPage:g.value,pageCount:f.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:S}),sizes:(0,a.h)(CC,{pageSize:p.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:null!=(s=null==(t=null==n?void 0:n.default)?void 0:t.call(n))?s:null,total:(0,a.h)(UC,{total:qC(e.total)?0:e.total})},h=e.layout.split(",").map((e=>e.trim()));let y=!1;return h.forEach((e=>{"->"!==e?y?l.push(d[e]):i.push(d[e]):y=!0})),_(i[0],o.is("first")),_(i[i.length-1],o.is("last")),y&&l.length>0&&(_(l[0],o.is("first")),_(l[l.length-1],o.is("last")),i.push(c)),(0,a.h)("div",{class:[o.b(),o.is("background",e.background),{[o.m("small")]:e.small}]},i)}}});const JC=(0,C.nz)(ZC);var QC=n(7667);const XC=(0,d.o8)({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:QC.UH,default:"primary"},cancelButtonType:{type:String,values:QC.UH,default:"text"},icon:{type:x.AA,default:()=>ae.Ruj},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Gn.teleported,persistent:Gn.persistent,width:{type:[String,Number],default:150}}),eI={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},tI=(0,a.aZ)({name:"ElPopconfirm"}),nI=(0,a.aZ)({...tI,props:XC,emits:eI,setup(e,{emit:t}){const n=e,{t:r}=(0,_s.bU)(),o=(0,y.s3)("popconfirm"),s=(0,l.iH)(),i=()=>{var e,t;null==(t=null==(e=s.value)?void 0:e.onClose)||t.call(e)},u=(0,a.Fl)((()=>({width:(0,v.Nn)(n.width)}))),d=e=>{t("confirm",e),i()},h=e=>{t("cancel",e),i()},p=(0,a.Fl)((()=>n.confirmButtonText||r("el.popconfirm.confirmButtonText"))),f=(0,a.Fl)((()=>n.cancelButtonText||r("el.popconfirm.cancelButtonText")));return(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(ho),(0,a.dG)({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},e.$attrs,{"popper-class":`${(0,l.SU)(o).namespace.value}-popover`,"popper-style":(0,l.SU)(u),teleported:e.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:e.persistent}),{content:(0,a.w5)((()=>[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).b())},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("main"))},[!e.hideIcon&&e.icon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(o).e("icon")),style:(0,c.j5)({color:e.iconColor})},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:1},8,["class","style"])):(0,a.kq)("v-if",!0),(0,a.Uk)(" "+(0,c.zw)(e.title),1)],2),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("action"))},[(0,a.Wm)((0,l.SU)(ss.mi),{size:"small",type:"text"===e.cancelButtonType?"":e.cancelButtonType,text:"text"===e.cancelButtonType,onClick:h},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(f)),1)])),_:1},8,["type","text"]),(0,a.Wm)((0,l.SU)(ss.mi),{size:"small",type:"text"===e.confirmButtonType?"":e.confirmButtonType,text:"text"===e.confirmButtonType,onClick:d},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)((0,l.SU)(p)),1)])),_:1},8,["type","text"])],2)],2)])),default:(0,a.w5)((()=>[e.$slots.reference?(0,a.WI)(e.$slots,"reference",{key:0}):(0,a.kq)("v-if",!0)])),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var rI=(0,m.Z)(nI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const oI=(0,C.nz)(rI),sI=(0,d.o8)({trigger:Qn.trigger,placement:fb.placement,disabled:Qn.disabled,visible:Gn.visible,transition:Gn.transition,popperOptions:fb.popperOptions,tabindex:fb.tabindex,content:Gn.content,popperStyle:Gn.popperStyle,popperClass:Gn.popperClass,enterable:{...Gn.enterable,default:!0},effect:{...Gn.effect,default:"light"},teleported:Gn.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),iI={"update:visible":e=>(0,h.jn)(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},aI="onUpdate:visible",lI=(0,a.aZ)({name:"ElPopover"}),cI=(0,a.aZ)({...lI,props:sI,emits:iI,setup(e,{expose:t,emit:n}){const r=e,o=(0,a.Fl)((()=>r[aI])),s=(0,y.s3)("popover"),i=(0,l.iH)(),u=(0,a.Fl)((()=>{var e;return null==(e=(0,l.SU)(i))?void 0:e.popperRef})),d=(0,a.Fl)((()=>[{width:(0,v.Nn)(r.width)},r.popperStyle])),h=(0,a.Fl)((()=>[s.b(),r.popperClass,{[s.m("plain")]:!!r.content}])),p=(0,a.Fl)((()=>r.transition===`${s.namespace.value}-fade-in-linear`)),f=()=>{var e;null==(e=i.value)||e.hide()},g=()=>{n("before-enter")},m=()=>{n("before-leave")},w=()=>{n("after-enter")},b=()=>{n("update:visible",!1),n("after-leave")};return t({popperRef:u,hide:f}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(ho),(0,a.dG)({ref_key:"tooltipRef",ref:i},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":(0,l.SU)(h),"popper-style":(0,l.SU)(d),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":(0,l.SU)(p),"onUpdate:visible":(0,l.SU)(o),onBeforeShow:g,onBeforeHide:m,onShow:w,onHide:b}),{content:(0,a.w5)((()=>[e.title?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(s).e("title")),role:"title"},(0,c.zw)(e.title),3)):(0,a.kq)("v-if",!0),(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,c.zw)(e.content),1)]))])),default:(0,a.w5)((()=>[e.$slots.reference?(0,a.WI)(e.$slots,"reference",{key:0}):(0,a.kq)("v-if",!0)])),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var uI=(0,m.Z)(cI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const dI=(e,t)=>{const n=t.arg||t.value,r=null==n?void 0:n.popperRef;r&&(r.triggerRef=e)};var hI={mounted(e,t){dI(e,t)},updated(e,t){dI(e,t)}};const pI="popover",fI=(0,C.dH)(hI,pI),gI=(0,C.nz)(uI,{directive:fI}),mI=(0,d.o8)({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:(0,d.Cq)(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:(0,d.Cq)([String,Array,Function]),default:""},format:{type:(0,d.Cq)(Function),default:e=>`${e}%`}}),yI=["aria-valuenow"],vI={viewBox:"0 0 100 100"},wI=["d","stroke","stroke-width"],bI=["d","stroke","opacity","stroke-linecap","stroke-width"],SI={key:0},_I=(0,a.aZ)({name:"ElProgress"}),EI=(0,a.aZ)({..._I,props:mI,setup(e){const t=e,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=(0,y.s3)("progress"),o=(0,a.Fl)((()=>({width:`${t.percentage}%`,animationDuration:`${t.duration}s`,backgroundColor:_(t.percentage)}))),s=(0,a.Fl)((()=>(t.strokeWidth/t.width*100).toFixed(1))),i=(0,a.Fl)((()=>["circle","dashboard"].includes(t.type)?Number.parseInt(""+(50-Number.parseFloat(s.value)/2),10):0)),u=(0,a.Fl)((()=>{const e=i.value,n="dashboard"===t.type;return`\n          M 50 50\n          m 0 ${n?"":"-"}${e}\n          a ${e} ${e} 0 1 1 0 ${n?"-":""}${2*e}\n          a ${e} ${e} 0 1 1 0 ${n?"":"-"}${2*e}\n          `})),d=(0,a.Fl)((()=>2*Math.PI*i.value)),h=(0,a.Fl)((()=>"dashboard"===t.type?.75:1)),p=(0,a.Fl)((()=>{const e=-1*d.value*(1-h.value)/2;return`${e}px`})),f=(0,a.Fl)((()=>({strokeDasharray:`${d.value*h.value}px, ${d.value}px`,strokeDashoffset:p.value}))),g=(0,a.Fl)((()=>({strokeDasharray:`${d.value*h.value*(t.percentage/100)}px, ${d.value}px`,strokeDashoffset:p.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"}))),m=(0,a.Fl)((()=>{let e;return e=t.color?_(t.percentage):n[t.status]||n.default,e})),v=(0,a.Fl)((()=>"warning"===t.status?ae.Rrw:"line"===t.type?"success"===t.status?ae.yGk:ae.K41:"success"===t.status?ae.JrY:ae.x8P)),w=(0,a.Fl)((()=>"line"===t.type?12+.4*t.strokeWidth:.111111*t.width+2)),b=(0,a.Fl)((()=>t.format(t.percentage)));function S(e){const t=100/e.length,n=e.map(((e,n)=>(0,c.HD)(e)?{color:e,percentage:(n+1)*t}:e));return n.sort(((e,t)=>e.percentage-t.percentage))}const _=e=>{var n;const{color:r}=t;if((0,c.mf)(r))return r(e);if((0,c.HD)(r))return r;{const t=S(r);for(const n of t)if(n.percentage>e)return n.color;return null==(n=t[t.length-1])?void 0:n.color}};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(r).b(),(0,l.SU)(r).m(e.type),(0,l.SU)(r).is(e.status),{[(0,l.SU)(r).m("without-text")]:!e.showText,[(0,l.SU)(r).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},["line"===e.type?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(r).b("bar"))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(r).be("bar","outer")),style:(0,c.j5)({height:`${e.strokeWidth}px`})},[(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(r).be("bar","inner"),{[(0,l.SU)(r).bem("bar","inner","indeterminate")]:e.indeterminate}]),style:(0,c.j5)((0,l.SU)(o))},[(e.showText||e.$slots.default)&&e.textInside?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(r).be("bar","innerText"))},[(0,a.WI)(e.$slots,"default",{percentage:e.percentage},(()=>[(0,a._)("span",null,(0,c.zw)((0,l.SU)(b)),1)]))],2)):(0,a.kq)("v-if",!0)],6)],6)],2)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(r).b("circle")),style:(0,c.j5)({height:`${e.width}px`,width:`${e.width}px`})},[((0,a.wg)(),(0,a.iD)("svg",vI,[(0,a._)("path",{class:(0,c.C_)((0,l.SU)(r).be("circle","track")),d:(0,l.SU)(u),stroke:`var(${(0,l.SU)(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":(0,l.SU)(s),fill:"none",style:(0,c.j5)((0,l.SU)(f))},null,14,wI),(0,a._)("path",{class:(0,c.C_)((0,l.SU)(r).be("circle","path")),d:(0,l.SU)(u),stroke:(0,l.SU)(m),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":(0,l.SU)(s),style:(0,c.j5)((0,l.SU)(g))},null,14,bI)]))],6)),!e.showText&&!e.$slots.default||e.textInside?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,c.C_)((0,l.SU)(r).e("text")),style:(0,c.j5)({fontSize:`${(0,l.SU)(w)}px`})},[(0,a.WI)(e.$slots,"default",{percentage:e.percentage},(()=>[e.status?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(v))))])),_:1})):((0,a.wg)(),(0,a.iD)("span",SI,(0,c.zw)((0,l.SU)(b)),1))]))],6))],10,yI))}});var kI=(0,m.Z)(EI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const CI=(0,C.nz)(kI),II=(0,d.o8)({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:(0,d.Cq)([Array,Object]),default:()=>(0,vg.N)(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:(0,d.Cq)([Array,Object]),default:()=>[ae.RhE,ae.RhE,ae.RhE]},voidIcon:{type:x.AA,default:()=>ae.Uxw},disabledVoidIcon:{type:x.AA,default:()=>ae.RhE},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:Th.Pp,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),AI={[p.O7]:e=>(0,h.hj)(e),[p.f_]:e=>(0,h.hj)(e)},TI=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],RI=["onMousemove","onClick"],xI=(0,a.aZ)({name:"ElRate"}),OI=(0,a.aZ)({...xI,props:II,emits:AI,setup(e,{expose:t,emit:n}){const r=e;function o(e,t){const n=e=>(0,c.Kn)(e),r=Object.keys(t).map((e=>+e)).filter((r=>{const o=t[r],s=!!n(o)&&o.excluded;return s?e<r:e<=r})).sort(((e,t)=>e-t)),o=t[r[0]];return n(o)&&o.value||o}const s=(0,a.f3)(Gr.H,void 0),i=(0,a.f3)(Gr.K,void 0),u=(0,mo.Cd)(),d=(0,y.s3)("rate"),{inputId:h,isLabeledByFormItem:f}=(0,Ph.p)(r,{formItemContext:i}),g=(0,l.iH)(r.modelValue),m=(0,l.iH)(-1),w=(0,l.iH)(!0),b=(0,a.Fl)((()=>[d.b(),d.m(u.value)])),S=(0,a.Fl)((()=>r.disabled||(null==s?void 0:s.disabled))),_=(0,a.Fl)((()=>d.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":I.value}))),E=(0,a.Fl)((()=>{let e="";return r.showScore?e=r.scoreTemplate.replace(/\{\s*value\s*\}/,S.value?`${r.modelValue}`:`${g.value}`):r.showText&&(e=r.texts[Math.ceil(g.value)-1]),e})),k=(0,a.Fl)((()=>100*r.modelValue-100*Math.floor(r.modelValue))),C=(0,a.Fl)((()=>(0,c.kJ)(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors)),I=(0,a.Fl)((()=>{const e=o(g.value,C.value);return(0,c.Kn)(e)?"":e})),R=(0,a.Fl)((()=>{let e="";return S.value?e=`${k.value}%`:r.allowHalf&&(e="50%"),{color:I.value,width:e}})),x=(0,a.Fl)((()=>{let e=(0,c.kJ)(r.icons)?[...r.icons]:{...r.icons};return e=(0,l.Xl)(e),(0,c.kJ)(e)?{[r.lowThreshold]:e[0],[r.highThreshold]:{value:e[1],excluded:!0},[r.max]:e[2]}:e})),O=(0,a.Fl)((()=>o(r.modelValue,x.value))),N=(0,a.Fl)((()=>S.value?(0,c.HD)(r.disabledVoidIcon)?r.disabledVoidIcon:(0,l.Xl)(r.disabledVoidIcon):(0,c.HD)(r.voidIcon)?r.voidIcon:(0,l.Xl)(r.voidIcon))),P=(0,a.Fl)((()=>o(g.value,x.value)));function D(e){const t=S.value&&k.value>0&&e-1<r.modelValue&&e>r.modelValue,n=r.allowHalf&&w.value&&e-.5<=g.value&&e>g.value;return t||n}function U(e){r.clearable&&e===r.modelValue&&(e=0),n(p.f_,e),r.modelValue!==e&&n("change",e)}function L(e){S.value||(r.allowHalf&&w.value?U(g.value):U(e))}function B(e){if(S.value)return;let t=g.value;const o=e.code;return o===Jn.n.up||o===Jn.n.right?(r.allowHalf?t+=.5:t+=1,e.stopPropagation(),e.preventDefault()):o!==Jn.n.left&&o!==Jn.n.down||(r.allowHalf?t-=.5:t-=1,e.stopPropagation(),e.preventDefault()),t=t<0?0:t,t=t>r.max?r.max:t,n(p.f_,t),n("change",t),t}function M(e,t){if(!S.value){if(r.allowHalf&&t){let n=t.target;(0,v.pv)(n,d.e("item"))&&(n=n.querySelector(`.${d.e("icon")}`)),(0===n.clientWidth||(0,v.pv)(n,d.e("decimal")))&&(n=n.parentNode),w.value=2*t.offsetX<=n.clientWidth,g.value=w.value?e-.5:e}else g.value=e;m.value=e}}function F(){S.value||(r.allowHalf&&(w.value=r.modelValue!==Math.floor(r.modelValue)),g.value=r.modelValue,m.value=-1)}return(0,a.YP)((()=>r.modelValue),(e=>{g.value=e,w.value=r.modelValue!==Math.floor(r.modelValue)})),r.modelValue||n(p.f_,0),t({setCurrentValue:M,resetCurrentValue:F}),(e,t)=>{var n;return(0,a.wg)(),(0,a.iD)("div",{id:(0,l.SU)(h),class:(0,c.C_)([(0,l.SU)(b),(0,l.SU)(d).is("disabled",(0,l.SU)(S))]),role:"slider","aria-label":(0,l.SU)(f)?void 0:e.label||"rating","aria-labelledby":(0,l.SU)(f)?null==(n=(0,l.SU)(i))?void 0:n.labelId:void 0,"aria-valuenow":g.value,"aria-valuetext":(0,l.SU)(E)||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:(0,c.j5)((0,l.SU)(_)),onKeydown:B},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.max,((e,t)=>((0,a.wg)(),(0,a.iD)("span",{key:t,class:(0,c.C_)((0,l.SU)(d).e("item")),onMousemove:t=>M(e,t),onMouseleave:F,onClick:t=>L(e)},[(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)([(0,l.SU)(d).e("icon"),{hover:m.value===e},(0,l.SU)(d).is("active",e<=g.value)])},{default:(0,a.w5)((()=>[D(e)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(P)),null,null,512)),[[A.F8,e<=g.value]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(N)),null,null,512)),[[A.F8,!(e<=g.value)]])],64)),D(e)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1,style:(0,c.j5)((0,l.SU)(R)),class:(0,c.C_)([(0,l.SU)(d).e("icon"),(0,l.SU)(d).e("decimal")])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(O))))])),_:1},8,["style","class"])):(0,a.kq)("v-if",!0)])),_:2},1032,["class"])],42,RI)))),128)),e.showText||e.showScore?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,c.C_)((0,l.SU)(d).e("text"))},(0,c.zw)((0,l.SU)(E)),3)):(0,a.kq)("v-if",!0)],46,TI)}}});var NI=(0,m.Z)(OI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const PI=(0,C.nz)(NI),DI={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},UI={[DI.success]:ae.rV3,[DI.warning]:ae.Rrw,[DI.error]:ae.Tw$,[DI.info]:ae.cEj},LI=(0,d.o8)({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),BI=(0,a.aZ)({name:"ElResult"}),MI=(0,a.aZ)({...BI,props:LI,setup(e){const t=e,n=(0,y.s3)("result"),r=(0,a.Fl)((()=>{const e=t.icon,n=e&&DI[e]?DI[e]:"icon-info",r=UI[n]||UI["icon-info"];return{class:n,component:r}}));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(n).b())},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(n).e("icon"))},[(0,a.WI)(e.$slots,"icon",{},(()=>[(0,l.SU)(r).component?((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(r).component),{key:0,class:(0,c.C_)((0,l.SU)(r).class)},null,8,["class"])):(0,a.kq)("v-if",!0)]))],2),e.title||e.$slots.title?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(n).e("title"))},[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a._)("p",null,(0,c.zw)(e.title),1)]))],2)):(0,a.kq)("v-if",!0),e.subTitle||e.$slots["sub-title"]?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(n).e("subtitle"))},[(0,a.WI)(e.$slots,"sub-title",{},(()=>[(0,a._)("p",null,(0,c.zw)(e.subTitle),1)]))],2)):(0,a.kq)("v-if",!0),e.$slots.extra?((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,c.C_)((0,l.SU)(n).e("extra"))},[(0,a.WI)(e.$slots,"extra")],2)):(0,a.kq)("v-if",!0)],2))}});var FI=(0,m.Z)(MI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const jI=(0,C.nz)(FI),zI=["start","center","end","space-around","space-between","space-evenly"],$I=["top","middle","bottom"],VI=(0,d.o8)({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:zI,default:"start"},align:{type:String,values:$I,default:"top"}}),HI=(0,a.aZ)({name:"ElRow"}),KI=(0,a.aZ)({...HI,props:VI,setup(e){const t=e,n=(0,y.s3)("row"),r=(0,a.Fl)((()=>t.gutter));(0,a.JJ)(bg,{gutter:r});const o=(0,a.Fl)((()=>{const e={};return t.gutter?(e.marginRight=e.marginLeft=`-${t.gutter/2}px`,e):e})),s=(0,a.Fl)((()=>[n.b(),n.is(`justify-${t.justify}`,"start"!==t.justify),n.is(`align-${t.align}`,"top"!==t.align)]));return(e,t)=>((0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{class:(0,c.C_)((0,l.SU)(s)),style:(0,c.j5)((0,l.SU)(o))},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["class","style"]))}});var qI=(0,m.Z)(KI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const WI=(0,C.nz)(qI),YI=(0,a.aZ)({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){const e=(0,y.s3)("select");return{ns:e}}});function GI(e,t,n,r,o,s){return e.item.isTitle?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)(e.ns.be("group","title")),style:(0,c.j5)([e.style,{lineHeight:`${e.height}px`}])},(0,c.zw)(e.item.label),7)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)(e.ns.be("group","split")),style:(0,c.j5)(e.style)},[(0,a._)("span",{class:(0,c.C_)(e.ns.be("group","split-dash")),style:(0,c.j5)({top:e.height/2+"px"})},null,6)],6))}var ZI=(0,m.Z)(YI,[["render",GI],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function JI(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const QI={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:ae.K41},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:Gn.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:iC.P},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:(0,d.Cq)(String),values:Qe,default:"bottom-start"}},XI={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},eA=(0,a.aZ)({props:XI,emits:["select","hover"],setup(e,{emit:t}){const n=(0,y.s3)("select"),{hoverItem:r,selectOptionClick:o}=JI(e,{emit:t});return{ns:n,hoverItem:r,selectOptionClick:o}}}),tA=["aria-selected"];function nA(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("li",{"aria-selected":e.selected,style:(0,c.j5)(e.style),class:(0,c.C_)([e.ns.be("dropdown","option-item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),{hover:e.hovering}]),onMouseenter:t[0]||(t[0]=(...t)=>e.hoverItem&&e.hoverItem(...t)),onClick:t[1]||(t[1]=(0,A.iM)(((...t)=>e.selectOptionClick&&e.selectOptionClick(...t)),["stop"]))},[(0,a.WI)(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},(()=>[(0,a._)("span",null,(0,c.zw)(e.item.label),1)]))],46,tA)}var rA=(0,m.Z)(eA,[["render",nA],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const oA=Symbol("ElSelectV2Injection");var sA=n(2454),iA=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function aA(e,t){return e===t||!(!iA(e)||!iA(t))}function lA(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!aA(e[n],t[n]))return!1;return!0}function cA(e,t){void 0===t&&(t=lA);var n=null;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var s=e.apply(this,r);return n={lastResult:s,lastArgs:r,lastThis:this},s}return r.clear=function(){n=null},r}const uA=()=>{const e=(0,a.FN)(),t=e.proxy.$props;return(0,a.Fl)((()=>{const e=(e,t,n)=>({});return t.perfMode?(0,sA.Z)(e):cA(e)}))},dA=50,hA="itemRendered",pA="scroll",fA="forward",gA="backward",mA="auto",yA="smart",vA="start",wA="center",bA="end",SA="horizontal",_A="vertical",EA="ltr",kA="rtl",CA="negative",IA="positive-ascending",AA="positive-descending",TA={[SA]:"left",[_A]:"top"},RA=20,xA=e=>h.C5?window.requestAnimationFrame(e):setTimeout(e,16),OA=e=>h.C5?window.cancelAnimationFrame(e):clearTimeout(e);var NA=n(246);const PA={[SA]:"deltaX",[_A]:"deltaY"},DA=({atEndEdge:e,atStartEdge:t,layout:n},r)=>{let o,s=0;const i=n=>{const r=n<0&&t.value||n>0&&e.value;return r},a=e=>{OA(o);const t=e[PA[n.value]];i(s)&&i(s+t)||(s+=t,(0,NA.v)()||e.preventDefault(),o=xA((()=>{r(s),s=0})))};return{hasReachedEdge:i,onWheel:a}},UA=(0,d.l0)({type:(0,d.Cq)([Number,Function]),required:!0}),LA=(0,d.l0)({type:Number}),BA=(0,d.l0)({type:Number,default:2}),MA=(0,d.l0)({type:String,values:["ltr","rtl"],default:"ltr"}),FA=(0,d.l0)({type:Number,default:0}),jA=(0,d.l0)({type:Number,required:!0}),zA=(0,d.l0)({type:String,values:["horizontal","vertical"],default:_A}),$A=(0,d.o8)({className:{type:String,default:""},containerElement:{type:(0,d.Cq)([String,Object]),default:"div"},data:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},direction:MA,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:(0,d.Cq)([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),VA=(0,d.o8)({cache:BA,estimatedItemSize:LA,layout:zA,initScrollOffset:FA,total:jA,itemSize:UA,...$A}),HA={type:Number,default:6},KA={type:Number,default:0},qA={type:Number,default:2},WA=(0,d.o8)({columnCache:BA,columnWidth:UA,estimatedColumnWidth:LA,estimatedRowHeight:LA,initScrollLeft:FA,initScrollTop:FA,itemKey:{type:(0,d.Cq)(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:BA,rowHeight:UA,totalColumn:jA,totalRow:jA,hScrollbarSize:HA,vScrollbarSize:HA,scrollbarStartGap:KA,scrollbarEndGap:qA,role:String,...$A}),YA=(0,d.o8)({alwaysOn:Boolean,class:String,layout:zA,total:jA,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:HA,startGap:KA,endGap:qA,visible:Boolean}),GA=(e,t)=>e<t?fA:gA,ZA=e=>e===EA||e===kA||e===SA,JA=e=>e===kA;let QA=null;function XA(e=!1){if(null===QA||e){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?QA=AA:(e.scrollLeft=1,QA=0===e.scrollLeft?CA:IA),document.body.removeChild(e),QA}return QA}function eT({move:e,size:t,bar:n},r){const o={},s=`translate${n.axis}(${e}px)`;return o[n.size]=t,o.transform=s,o.msTransform=s,o.webkitTransform=s,"horizontal"===r?o.height="100%":o.width="100%",o}const tT=(0,a.aZ)({name:"ElVirtualScrollBar",props:YA,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const n=(0,a.Fl)((()=>e.startGap+e.endGap)),r=(0,y.s3)("virtual-scrollbar"),o=(0,y.s3)("scrollbar"),s=(0,l.iH)(),i=(0,l.iH)();let c=null,u=null;const d=(0,l.qj)({isDragging:!1,traveled:0}),h=(0,a.Fl)((()=>ue[e.layout])),p=(0,a.Fl)((()=>e.clientSize-(0,l.SU)(n))),f=(0,a.Fl)((()=>({position:"absolute",width:`${SA===e.layout?p.value:e.scrollbarSize}px`,height:`${SA===e.layout?e.scrollbarSize:p.value}px`,[TA[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"}))),g=(0,a.Fl)((()=>{const t=e.ratio,n=e.clientSize;if(t>=100)return Number.POSITIVE_INFINITY;if(t>=50)return t*n/100;const r=n/3;return Math.floor(Math.min(Math.max(t*n,RA),r))})),m=(0,a.Fl)((()=>{if(!Number.isFinite(g.value))return{display:"none"};const t=`${g.value}px`,n=eT({bar:h.value,size:t,move:d.traveled},e.layout);return n})),v=(0,a.Fl)((()=>Math.floor(e.clientSize-g.value-(0,l.SU)(n)))),w=()=>{window.addEventListener("mousemove",E),window.addEventListener("mouseup",_);const e=(0,l.SU)(i);e&&(u=document.onselectstart,document.onselectstart=()=>!1,e.addEventListener("touchmove",E),e.addEventListener("touchend",_))},b=()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",_),document.onselectstart=u,u=null;const e=(0,l.SU)(i);e&&(e.removeEventListener("touchmove",E),e.removeEventListener("touchend",_))},S=e=>{e.stopImmediatePropagation(),e.ctrlKey||[1,2].includes(e.button)||(d.isDragging=!0,d[h.value.axis]=e.currentTarget[h.value.offset]-(e[h.value.client]-e.currentTarget.getBoundingClientRect()[h.value.direction]),t("start-move"),w())},_=()=>{d.isDragging=!1,d[h.value.axis]=0,t("stop-move"),b()},E=n=>{const{isDragging:r}=d;if(!r)return;if(!i.value||!s.value)return;const o=d[h.value.axis];if(!o)return;OA(c);const a=-1*(s.value.getBoundingClientRect()[h.value.direction]-n[h.value.client]),l=i.value[h.value.offset]-o,u=a-l;c=xA((()=>{d.traveled=Math.max(e.startGap,Math.min(u,v.value)),t("scroll",u,v.value)}))},k=e=>{const n=Math.abs(e.target.getBoundingClientRect()[h.value.direction]-e[h.value.client]),r=i.value[h.value.offset]/2,o=n-r;d.traveled=Math.max(0,Math.min(o,v.value)),t("scroll",o,v.value)};return(0,a.YP)((()=>e.scrollFrom),(e=>{d.isDragging||(d.traveled=Math.ceil(e*v.value))})),(0,a.Jd)((()=>{b()})),()=>(0,a.h)("div",{role:"presentation",ref:s,class:[r.b(),e.class,(e.alwaysOn||d.isDragging)&&"always-on"],style:f.value,onMousedown:(0,A.iM)(k,["stop","prevent"]),onTouchstartPrevent:S},(0,a.h)("div",{ref:i,class:o.e("thumb"),style:m.value,onMousedown:S},[]))}}),nT=({name:e,getOffset:t,getItemSize:n,getItemOffset:r,getEstimatedTotalSize:o,getStartIndexForOffset:s,getStopIndexForStartIndex:i,initCache:u,clearCache:d,validateProps:p})=>(0,a.aZ)({name:null!=e?e:"ElVirtualList",props:VA,emits:[hA,pA],setup(e,{emit:f,expose:g}){p(e);const m=(0,a.FN)(),v=(0,y.s3)("vl"),w=(0,l.iH)(u(e,m)),b=uA(),S=(0,l.iH)(),_=(0,l.iH)(),E=(0,l.iH)(),k=(0,l.iH)({isScrolling:!1,scrollDir:"forward",scrollOffset:(0,h.hj)(e.initScrollOffset)?e.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:e.scrollbarAlwaysOn}),C=(0,a.Fl)((()=>{const{total:t,cache:n}=e,{isScrolling:r,scrollDir:o,scrollOffset:a}=(0,l.SU)(k);if(0===t)return[0,0,0,0];const c=s(e,a,(0,l.SU)(w)),u=i(e,c,a,(0,l.SU)(w)),d=r&&o!==gA?1:Math.max(1,n),h=r&&o!==fA?1:Math.max(1,n);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,u+h)),c,u]})),I=(0,a.Fl)((()=>o(e,(0,l.SU)(w)))),A=(0,a.Fl)((()=>ZA(e.layout))),T=(0,a.Fl)((()=>[{position:"relative",["overflow-"+(A.value?"x":"y")]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:e.direction,height:(0,h.hj)(e.height)?`${e.height}px`:e.height,width:(0,h.hj)(e.width)?`${e.width}px`:e.width},e.style])),R=(0,a.Fl)((()=>{const e=(0,l.SU)(I),t=(0,l.SU)(A);return{height:t?"100%":`${e}px`,pointerEvents:(0,l.SU)(k).isScrolling?"none":void 0,width:t?`${e}px`:"100%"}})),x=(0,a.Fl)((()=>A.value?e.width:e.height)),{onWheel:O}=DA({atStartEdge:(0,a.Fl)((()=>k.value.scrollOffset<=0)),atEndEdge:(0,a.Fl)((()=>k.value.scrollOffset>=I.value)),layout:(0,a.Fl)((()=>e.layout))},(e=>{var t,n;null==(n=(t=E.value).onMouseUp)||n.call(t),B(Math.min(k.value.scrollOffset+e,I.value-x.value))})),N=()=>{const{total:t}=e;if(t>0){const[e,t,n,r]=(0,l.SU)(C);f(hA,e,t,n,r)}const{scrollDir:n,scrollOffset:r,updateRequested:o}=(0,l.SU)(k);f(pA,n,r,o)},P=e=>{const{clientHeight:t,scrollHeight:n,scrollTop:r}=e.currentTarget,o=(0,l.SU)(k);if(o.scrollOffset===r)return;const s=Math.max(0,Math.min(r,n-t));k.value={...o,isScrolling:!0,scrollDir:GA(o.scrollOffset,s),scrollOffset:s,updateRequested:!1},(0,a.Y3)(j)},D=t=>{const{clientWidth:n,scrollLeft:r,scrollWidth:o}=t.currentTarget,s=(0,l.SU)(k);if(s.scrollOffset===r)return;const{direction:i}=e;let c=r;if(i===kA)switch(XA()){case CA:c=-r;break;case AA:c=o-n-r;break}c=Math.max(0,Math.min(c,o-n)),k.value={...s,isScrolling:!0,scrollDir:GA(s.scrollOffset,c),scrollOffset:c,updateRequested:!1},(0,a.Y3)(j)},U=e=>{(0,l.SU)(A)?D(e):P(e),N()},L=(e,t)=>{const n=(I.value-x.value)/t*e;B(Math.min(I.value-x.value,n))},B=e=>{e=Math.max(e,0),e!==(0,l.SU)(k).scrollOffset&&(k.value={...(0,l.SU)(k),scrollOffset:e,scrollDir:GA((0,l.SU)(k).scrollOffset,e),updateRequested:!0},(0,a.Y3)(j))},M=(n,r=mA)=>{const{scrollOffset:o}=(0,l.SU)(k);n=Math.max(0,Math.min(n,e.total-1)),B(t(e,n,r,o,(0,l.SU)(w)))},F=t=>{const{direction:o,itemSize:s,layout:i}=e,a=b.value(d&&s,d&&i,d&&o);let u;if((0,c.RI)(a,String(t)))u=a[t];else{const s=r(e,t,(0,l.SU)(w)),i=n(e,t,(0,l.SU)(w)),c=(0,l.SU)(A),d=o===kA,h=c?s:0;a[t]=u={position:"absolute",left:d?void 0:`${h}px`,right:d?`${h}px`:void 0,top:c?0:`${s}px`,height:c?"100%":`${i}px`,width:c?`${i}px`:"100%"}}return u},j=()=>{k.value.isScrolling=!1,(0,a.Y3)((()=>{b.value(-1,null,null)}))},z=()=>{const e=S.value;e&&(e.scrollTop=0)};(0,a.bv)((()=>{if(!h.C5)return;const{initScrollOffset:t}=e,n=(0,l.SU)(S);(0,h.hj)(t)&&n&&((0,l.SU)(A)?n.scrollLeft=t:n.scrollTop=t),N()})),(0,a.ic)((()=>{const{direction:t,layout:n}=e,{scrollOffset:r,updateRequested:o}=(0,l.SU)(k),s=(0,l.SU)(S);if(o&&s)if(n===SA)if(t===kA)switch(XA()){case CA:s.scrollLeft=-r;break;case IA:s.scrollLeft=r;break;default:{const{clientWidth:e,scrollWidth:t}=s;s.scrollLeft=t-e-r;break}}else s.scrollLeft=r;else s.scrollTop=r}));const $={ns:v,clientSize:x,estimatedTotalSize:I,windowStyle:T,windowRef:S,innerRef:_,innerStyle:R,itemsToRender:C,scrollbarRef:E,states:k,getItemStyle:F,onScroll:U,onScrollbarScroll:L,onWheel:O,scrollTo:B,scrollToItem:M,resetScrollTop:z};return g({windowRef:S,innerRef:_,getItemStyleCache:b,scrollTo:B,scrollToItem:M,resetScrollTop:z,states:k}),$},render(e){var t;const{$slots:n,className:r,clientSize:o,containerElement:s,data:i,getItemStyle:l,innerElement:u,itemsToRender:d,innerStyle:h,layout:p,total:f,onScroll:g,onScrollbarScroll:m,onWheel:y,states:v,useIsScrolling:w,windowStyle:b,ns:S}=e,[_,E]=d,k=(0,a.LL)(s),C=(0,a.LL)(u),I=[];if(f>0)for(let a=_;a<=E;a++)I.push(null==(t=n.default)?void 0:t.call(n,{data:i,key:a,index:a,isScrolling:w?v.isScrolling:void 0,style:l(a)}));const A=[(0,a.h)(C,{style:h,ref:"innerRef"},(0,c.HD)(C)?I:{default:()=>I})],T=(0,a.h)(tT,{ref:"scrollbarRef",clientSize:o,layout:p,onScroll:m,ratio:100*o/this.estimatedTotalSize,scrollFrom:v.scrollOffset/(this.estimatedTotalSize-o),total:f}),R=(0,a.h)(k,{class:[S.e("window"),r],style:b,onScroll:g,onWheel:y,ref:"windowRef",key:0},(0,c.HD)(k)?[A]:{default:()=>[A]});return(0,a.h)("div",{key:0,class:[S.e("wrapper"),v.scrollbarAlwaysOn?"always-on":""]},[R,T])}}),rT=nT({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:n,layout:r,width:o},s,i,a)=>{const l=ZA(r)?o:e;const c=Math.max(0,t*n-l),u=Math.min(c,s*n),d=Math.max(0,(s+1)*n-l);switch(i===yA&&(i=a>=d-l&&a<=u+l?mA:wA),i){case vA:return u;case bA:return d;case wA:{const e=Math.round(d+(u-d)/2);return e<Math.ceil(l/2)?0:e>c+Math.floor(l/2)?c:e}case mA:default:return a>=d&&a<=u?a:a<d?d:u}},getStartIndexForOffset:({total:e,itemSize:t},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:n,layout:r,width:o},s,i)=>{const a=s*n,l=ZA(r)?o:e,c=Math.ceil((l+i-a)/n);return Math.max(0,Math.min(t-1,s+c-1))},initCache(){},clearCache:!0,validateProps(){}}),oT=(e,t,n)=>{const{itemSize:r}=e,{items:o,lastVisitedIndex:s}=n;if(t>s){let e=0;if(s>=0){const t=o[s];e=t.offset+t.size}for(let n=s+1;n<=t;n++){const t=r(n);o[n]={offset:e,size:t},e+=t}n.lastVisitedIndex=t}return o[t]},sT=(e,t,n)=>{const{items:r,lastVisitedIndex:o}=t,s=o>0?r[o].offset:0;return s>=n?iT(e,t,0,o,n):aT(e,t,Math.max(0,o),n)},iT=(e,t,n,r,o)=>{while(n<=r){const s=n+Math.floor((r-n)/2),i=oT(e,s,t).offset;if(i===o)return s;i<o?n=s+1:i>o&&(r=s-1)}return Math.max(0,n-1)},aT=(e,t,n,r)=>{const{total:o}=e;let s=1;while(n<o&&oT(e,n,t).offset<r)n+=s,s*=2;return iT(e,t,Math.floor(n/2),Math.min(n,o-1),r)},lT=({total:e},{items:t,estimatedItemSize:n,lastVisitedIndex:r})=>{let o=0;if(r>=e&&(r=e-1),r>=0){const e=t[r];o=e.offset+e.size}const s=e-r-1,i=s*n;return o+i},cT=nT({name:"ElDynamicSizeList",getItemOffset:(e,t,n)=>oT(e,t,n).offset,getItemSize:(e,t,{items:n})=>n[t].size,getEstimatedTotalSize:lT,getOffset:(e,t,n,r,o)=>{const{height:s,layout:i,width:a}=e,l=ZA(i)?a:s,c=oT(e,t,o),u=lT(e,o),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(n===yA&&(n=r>=h-l&&r<=d+l?mA:wA),n){case vA:return d;case bA:return h;case wA:return Math.round(h+(d-h)/2);case mA:default:return r>=h&&r<=d?r:r<h?h:d}},getStartIndexForOffset:(e,t,n)=>sT(e,n,t),getStopIndexForStartIndex:(e,t,n,r)=>{const{height:o,total:s,layout:i,width:a}=e,l=ZA(i)?a:o,c=oT(e,t,r),u=n+l;let d=c.offset+c.size,h=t;while(h<s-1&&d<u)h++,d+=oT(e,h,r).size;return h},initCache({estimatedItemSize:e=dA},t){const n={items:{},estimatedItemSize:e,lastVisitedIndex:-1,clearCacheAfterIndex:(e,r=!0)=>{var o,s;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,e-1),null==(o=t.exposed)||o.getItemStyleCache(-1),r&&(null==(s=t.proxy)||s.$forceUpdate())}};return n},clearCache:!1,validateProps:({itemSize:e})=>{0}});var uT=(0,a.aZ)({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(e,{slots:t,expose:n}){const r=(0,a.f3)(oA),o=(0,y.s3)("select"),s=(0,l.iH)([]),i=(0,l.iH)(),u=(0,a.Fl)((()=>e.data.length));(0,a.YP)((()=>u.value),(()=>{var e,t;null==(t=(e=r.popper.value).updatePopper)||t.call(e)}));const d=(0,a.Fl)((()=>(0,wr.o8)(r.props.estimatedOptionHeight))),h=(0,a.Fl)((()=>d.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:e=>s.value[e]})),p=(e=[],t)=>{const{props:{valueKey:n}}=r;return(0,c.Kn)(t)?e&&e.some((e=>(0,qk.Z)(e,n)===(0,qk.Z)(t,n))):e.includes(t)},f=(e,t)=>{if((0,c.Kn)(t)){const{valueKey:n}=r.props;return(0,qk.Z)(e,n)===(0,qk.Z)(t,n)}return e===t},g=(e,t)=>{const{valueKey:n}=r.props;return r.props.multiple?p(e,(0,qk.Z)(t,n)):f(e,(0,qk.Z)(t,n))},m=(e,t)=>{const{disabled:n,multiple:o,multipleLimit:s}=r.props;return n||!t&&!!o&&s>0&&e.length>=s},v=t=>e.hoveringIndex===t,w=e=>{const t=i.value;t&&t.scrollToItem(e)},b=()=>{const e=i.value;e&&e.resetScrollTop()};n({listRef:i,isSized:d,isItemDisabled:m,isItemHovering:v,isItemSelected:g,scrollToItem:w,resetScrollTop:b});const S=e=>{const{index:n,data:o,style:s}=e,i=(0,l.SU)(d),{itemSize:c,estimatedSize:u}=(0,l.SU)(h),{modelValue:p}=r.props,{onSelect:f,onHover:y}=r,w=o[n];if("Group"===w.type)return(0,a.Wm)(ZI,{item:w,style:s,height:i?c:u},null);const b=g(p,w),S=m(p,b),_=v(n);return(0,a.Wm)(rA,(0,a.dG)(e,{selected:b,disabled:w.disabled||S,created:!!w.created,hovering:_,item:w,onSelect:f,onHover:y}),{default:e=>{var n;return(null==(n=t.default)?void 0:n.call(t,e))||(0,a.Wm)("span",null,[w.label])}})},{onKeyboardNavigate:_,onKeyboardSelect:E}=r,k=()=>{_("forward")},C=()=>{_("backward")},I=()=>{r.expanded=!1},A=e=>{const{code:t}=e,{tab:n,esc:r,down:o,up:s,enter:i}=Jn.n;switch(t!==n&&(e.preventDefault(),e.stopPropagation()),t){case n:case r:I();break;case o:k();break;case s:C();break;case i:E();break}};return()=>{var n;const{data:s,width:c}=e,{height:u,multiple:p,scrollbarAlwaysOn:f}=r.props;if(0===s.length)return(0,a.Wm)("div",{class:o.b("dropdown"),style:{width:`${c}px`}},[null==(n=t.empty)?void 0:n.call(t)]);const g=(0,l.SU)(d)?rT:cT;return(0,a.Wm)("div",{class:[o.b("dropdown"),o.is("multiple",p)]},[(0,a.Wm)(g,(0,a.dG)({ref:i},(0,l.SU)(h),{className:o.be("dropdown","list"),scrollbarAlwaysOn:f,data:s,height:u,width:c,total:s.length,onKeydown:A}),{default:e=>(0,a.Wm)(S,e,null)})])}}});function dT(e,t){const n=(0,l.iH)(0),r=(0,l.iH)(null),o=(0,a.Fl)((()=>e.allowCreate&&e.filterable));function s(n){const r=e=>e.value===n;return e.options&&e.options.some(r)||t.createdOptions.some(r)}function i(t){o.value&&(e.multiple&&t.created?n.value++:r.value=t)}function c(i){if(o.value)if(i&&i.length>0&&!s(i)){const e={value:i,label:i,created:!0,disabled:!1};t.createdOptions.length>=n.value?t.createdOptions[n.value]=e:t.createdOptions.push(e)}else if(e.multiple)t.createdOptions.length=n.value;else{const e=r.value;t.createdOptions.length=0,e&&e.created&&t.createdOptions.push(e)}}function u(r){if(!o.value||!r||!r.created||r.created&&e.reserveKeyword&&t.inputValue===r.label)return;const s=t.createdOptions.findIndex((e=>e.value===r.value));~s&&(t.createdOptions.splice(s,1),n.value--)}function d(){o.value&&(t.createdOptions.length=0,n.value=0)}return{createNewOption:c,removeNewOption:u,selectNewOption:i,clearAllNewOption:d}}const hT=e=>{const t=[];return e.forEach((e=>{(0,c.kJ)(e.options)?(t.push({label:e.label,isTitle:!0,type:"Group"}),e.options.forEach((e=>{t.push(e)})),t.push({type:"Group"})):t.push(e)})),t};function pT(e){const t=(0,l.iH)(!1),n=()=>{t.value=!0},r=e=>{const n=e.target.value,r=n[n.length-1]||"";t.value=!(0,Qf.w)(r)},o=n=>{t.value&&(t.value=!1,(0,c.mf)(e)&&e(n))};return{handleCompositionStart:n,handleCompositionUpdate:r,handleCompositionEnd:o}}const fT="",gT=11,mT={larget:51,default:42,small:33},yT=(e,t)=>{const{t:n}=(0,_s.bU)(),r=(0,y.s3)("select-v2"),o=(0,y.s3)("input"),{form:s,formItem:i}=(0,Ph.A)(),d=(0,l.qj)({inputValue:fT,displayInputValue:fT,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),h=(0,l.iH)(-1),f=(0,l.iH)(-1),g=(0,l.iH)(null),m=(0,l.iH)(null),v=(0,l.iH)(null),b=(0,l.iH)(null),S=(0,l.iH)(null),_=(0,l.iH)(null),E=(0,l.iH)(null),k=(0,l.iH)(!1),C=(0,a.Fl)((()=>e.disabled||(null==s?void 0:s.disabled))),I=(0,a.Fl)((()=>{const t=34*L.value.length;return t>e.height?e.height:t})),A=(0,a.Fl)((()=>!(0,gr.Z)(e.modelValue))),T=(0,a.Fl)((()=>{const t=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:A.value,n=e.clearable&&!C.value&&d.comboBoxHovering&&t;return n})),R=(0,a.Fl)((()=>e.remote&&e.filterable?"":ae.a2Z)),O=(0,a.Fl)((()=>R.value&&r.is("reverse",k.value))),N=(0,a.Fl)((()=>(null==i?void 0:i.validateState)||"")),P=(0,a.Fl)((()=>x.rU[N.value])),D=(0,a.Fl)((()=>e.remote?300:0)),U=(0,a.Fl)((()=>{const t=L.value;return e.loading?e.loadingText||n("el.select.loading"):(!e.remote||""!==d.inputValue||0!==t.length)&&(e.filterable&&d.inputValue&&t.length>0?e.noMatchText||n("el.select.noMatch"):0===t.length?e.noDataText||n("el.select.noData"):null)})),L=(0,a.Fl)((()=>{const t=e=>{const t=d.inputValue,n=new RegExp(Ef(t),"i"),r=!t||n.test(e.label||"");return r};return e.loading?[]:hT(e.options.concat(d.createdOptions).map((n=>{if((0,c.kJ)(n.options)){const e=n.options.filter(t);if(e.length>0)return{...n,options:e}}else if(e.remote||t(n))return n;return null})).filter((e=>null!==e)))})),B=(0,a.Fl)((()=>L.value.every((e=>e.disabled)))),M=(0,mo.Cd)(),F=(0,a.Fl)((()=>"small"===M.value?"small":"default")),j=(0,a.Fl)((()=>{const e=_.value,t=F.value||"default",n=e?Number.parseInt(getComputedStyle(e).paddingLeft):0,r=e?Number.parseInt(getComputedStyle(e).paddingRight):0;return d.selectWidth-r-n-mT[t]})),z=()=>{var e;f.value=(null==(e=S.value)?void 0:e.offsetWidth)||200},$=(0,a.Fl)((()=>({width:`${0===d.calculatedWidth?gT:Math.ceil(d.calculatedWidth)+gT}px`}))),V=(0,a.Fl)((()=>(0,c.kJ)(e.modelValue)?0===e.modelValue.length&&!d.displayInputValue:!e.filterable||0===d.displayInputValue.length)),H=(0,a.Fl)((()=>{const t=e.placeholder||n("el.select.placeholder");return e.multiple||(0,gr.Z)(e.modelValue)?t:d.selectedLabel})),K=(0,a.Fl)((()=>{var e,t;return null==(t=null==(e=b.value)?void 0:e.popperRef)?void 0:t.contentRef})),q=(0,a.Fl)((()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0)return L.value.findIndex((n=>n.value===e.modelValue[t-1]))}else if(e.modelValue)return L.value.findIndex((t=>t.value===e.modelValue));return-1})),W=(0,a.Fl)({get(){return k.value&&!1!==U.value},set(e){k.value=e}}),Y=(0,a.Fl)((()=>d.cachedOptions.slice(0,e.maxCollapseTags))),G=(0,a.Fl)((()=>d.cachedOptions.slice(e.maxCollapseTags))),{createNewOption:Z,removeNewOption:J,selectNewOption:Q,clearAllNewOption:X}=dT(e,d),{handleCompositionStart:ee,handleCompositionUpdate:te,handleCompositionEnd:ne}=pT((e=>Oe(e))),re=()=>{var e,t,n;null==(t=null==(e=m.value)?void 0:e.focus)||t.call(e),null==(n=b.value)||n.updatePopper()},oe=()=>{if(!e.automaticDropdown)return C.value?void 0:(d.isComposing&&(d.softFocus=!0),(0,a.Y3)((()=>{var e,t;k.value=!k.value,null==(t=null==(e=m.value)?void 0:e.focus)||t.call(e)})))},se=()=>(e.filterable&&d.inputValue!==d.selectedLabel&&(d.query=d.selectedLabel),ce(d.inputValue),(0,a.Y3)((()=>{Z(d.inputValue)}))),le=ie(se,D.value),ce=t=>{d.previousQuery!==t&&(d.previousQuery=t,e.filterable&&(0,c.mf)(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&(0,c.mf)(e.remoteMethod)&&e.remoteMethod(t))},ue=n=>{wh(e.modelValue,n)||t(p.O7,n)},de=e=>{t(p.f_,e),ue(e),d.previousValue=null==e?void 0:e.toString()},he=(t=[],n)=>{if(!(0,c.Kn)(n))return t.indexOf(n);const r=e.valueKey;let o=-1;return t.some(((e,t)=>(0,qk.Z)(e,r)===(0,qk.Z)(n,r)&&(o=t,!0))),o},pe=t=>(0,c.Kn)(t)?(0,qk.Z)(t,e.valueKey):t,fe=e=>(0,c.Kn)(e)?e.label:e,ge=()=>(0,a.Y3)((()=>{var e,t;if(!m.value)return;const n=_.value;S.value.height=n.offsetHeight,k.value&&!1!==U.value&&(null==(t=null==(e=b.value)?void 0:e.updatePopper)||t.call(e))})),me=()=>{var t,n;if(ye(),z(),null==(n=null==(t=b.value)?void 0:t.updatePopper)||n.call(t),e.multiple)return ge()},ye=()=>{const e=_.value;e&&(d.selectWidth=e.getBoundingClientRect().width)},ve=(t,n,r=!0)=>{var o,s;if(e.multiple){let r=e.modelValue.slice();const i=he(r,pe(t));i>-1?(r=[...r.slice(0,i),...r.slice(i+1)],d.cachedOptions.splice(i,1),J(t)):(e.multipleLimit<=0||r.length<e.multipleLimit)&&(r=[...r,pe(t)],d.cachedOptions.push(t),Q(t),Te(n)),de(r),t.created&&(d.query="",ce(""),d.inputLength=20),e.filterable&&!e.reserveKeyword&&(null==(s=(o=m.value).focus)||s.call(o),Ce("")),e.filterable&&(d.calculatedWidth=E.value.getBoundingClientRect().width),ge(),xe()}else h.value=n,d.selectedLabel=t.label,de(pe(t)),k.value=!1,d.isComposing=!1,d.isSilentBlur=r,Q(t),t.created||X(),Te(n)},we=(n,r)=>{const{valueKey:o}=e,s=e.modelValue.indexOf((0,qk.Z)(r,o));if(s>-1&&!C.value){const n=[...e.modelValue.slice(0,s),...e.modelValue.slice(s+1)];return d.cachedOptions.splice(s,1),de(n),t("remove-tag",(0,qk.Z)(r,o)),d.softFocus=!0,J(r),(0,a.Y3)(re)}n.stopPropagation()},be=e=>{const n=d.isComposing;d.isComposing=!0,d.softFocus?d.softFocus=!1:n||t("focus",e)},Se=e=>(d.softFocus=!1,(0,a.Y3)((()=>{var n,r;null==(r=null==(n=m.value)?void 0:n.blur)||r.call(n),E.value&&(d.calculatedWidth=E.value.getBoundingClientRect().width),d.isSilentBlur?d.isSilentBlur=!1:d.isComposing&&t("blur",e),d.isComposing=!1}))),_e=()=>{d.displayInputValue.length>0?Ce(""):k.value=!1},Ee=t=>{if(0===d.displayInputValue.length){t.preventDefault();const n=e.modelValue.slice();n.pop(),J(d.cachedOptions.pop()),de(n)}},ke=()=>{let n;return n=(0,c.kJ)(e.modelValue)?[]:void 0,d.softFocus=!0,e.multiple?d.cachedOptions=[]:d.selectedLabel="",k.value=!1,de(n),t("clear"),X(),(0,a.Y3)(re)},Ce=e=>{d.displayInputValue=e,d.inputValue=e},Ie=(e,t=undefined)=>{const n=L.value;if(!["forward","backward"].includes(e)||C.value||n.length<=0||B.value)return;if(!k.value)return oe();void 0===t&&(t=d.hoveringIndex);let r=-1;"forward"===e?(r=t+1,r>=n.length&&(r=0)):"backward"===e&&(r=t-1,(r<0||r>=n.length)&&(r=n.length-1));const o=n[r];if(o.disabled||"Group"===o.type)return Ie(e,r);Te(r),De(r)},Ae=()=>{if(!k.value)return oe();~d.hoveringIndex&&L.value[d.hoveringIndex]&&ve(L.value[d.hoveringIndex],d.hoveringIndex,!1)},Te=e=>{d.hoveringIndex=e},Re=()=>{d.hoveringIndex=-1},xe=()=>{var e;const t=m.value;t&&(null==(e=t.focus)||e.call(t))},Oe=t=>{const n=t.target.value;if(Ce(n),d.displayInputValue.length>0&&!k.value&&(k.value=!0),d.calculatedWidth=E.value.getBoundingClientRect().width,e.multiple&&ge(),!e.remote)return se();le()},Ne=()=>(k.value=!1,Se()),Pe=()=>(d.inputValue=d.displayInputValue,(0,a.Y3)((()=>{~q.value&&(Te(q.value),De(d.hoveringIndex))}))),De=e=>{v.value.scrollToItem(e)},Ue=()=>{if(Re(),e.multiple)if(e.modelValue.length>0){let t=!1;d.cachedOptions.length=0,d.previousValue=e.modelValue.toString(),e.modelValue.forEach((e=>{const n=L.value.findIndex((t=>pe(t)===e));~n&&(d.cachedOptions.push(L.value[n]),t||Te(n),t=!0)}))}else d.cachedOptions=[],d.previousValue=void 0;else if(A.value){d.previousValue=e.modelValue;const t=L.value,n=t.findIndex((t=>pe(t)===pe(e.modelValue)));~n?(d.selectedLabel=t[n].label,Te(n)):d.selectedLabel=`${e.modelValue}`}else d.selectedLabel="",d.previousValue=void 0;X(),z()};return(0,a.YP)(k,(e=>{var n,r;t("visible-change",e),e?null==(r=(n=b.value).update)||r.call(n):(d.displayInputValue="",d.previousQuery=null,Z(""))})),(0,a.YP)((()=>e.modelValue),((t,n)=>{var r;t&&t.toString()===d.previousValue||Ue(),!wh(t,n)&&e.validateEvent&&(null==(r=null==i?void 0:i.validate)||r.call(i,"change").catch((e=>(0,w.N)(e))))}),{deep:!0}),(0,a.YP)((()=>e.options),(()=>{const e=m.value;(!e||e&&document.activeElement!==e)&&Ue()}),{deep:!0}),(0,a.YP)(L,(()=>(0,a.Y3)(v.value.resetScrollTop))),(0,a.bv)((()=>{Ue()})),(0,u.yU7)(S,me),{collapseTagSize:F,currentPlaceholder:H,expanded:k,emptyText:U,popupHeight:I,debounce:D,filteredOptions:L,iconComponent:R,iconReverse:O,inputWrapperStyle:$,popperSize:f,dropdownMenuVisible:W,hasModelValue:A,shouldShowPlaceholder:V,selectDisabled:C,selectSize:M,showClearBtn:T,states:d,tagMaxWidth:j,nsSelectV2:r,nsInput:o,calculatorRef:E,controlRef:g,inputRef:m,menuRef:v,popper:b,selectRef:S,selectionRef:_,popperRef:K,validateState:N,validateIcon:P,showTagList:Y,collapseTagList:G,debouncedOnInputChange:le,deleteTag:we,getLabel:fe,getValueKey:pe,handleBlur:Se,handleClear:ke,handleClickOutside:Ne,handleDel:Ee,handleEsc:_e,handleFocus:be,handleMenuEnter:Pe,handleResize:me,toggleMenu:oe,scrollTo:De,onInput:Oe,onKeyboardNavigate:Ie,onKeyboardSelect:Ae,onSelect:ve,onHover:Te,onUpdateInputValue:Ce,handleCompositionStart:ee,handleCompositionEnd:ne,handleCompositionUpdate:te}},vT=(0,a.aZ)({name:"ElSelectV2",components:{ElSelectMenu:uT,ElTag:Gf,ElTooltip:ho,ElIcon:T.gn},directives:{ClickOutside:ng,ModelText:A.nr},props:QI,emits:[p.f_,p.O7,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const n=(0,a.Fl)((()=>{const{modelValue:t,multiple:n}=e,r=n?[]:void 0;return(0,c.kJ)(t)?n?t:r:n?r:t})),r=yT((0,l.qj)({...(0,l.BK)(e),modelValue:n}),t);return(0,a.JJ)(oA,{props:(0,l.qj)({...(0,l.BK)(e),height:r.popupHeight,modelValue:n}),popper:r.popper,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect}),{...r,modelValue:n}}}),wT={key:0},bT=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],ST=["textContent"],_T=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],ET=["textContent"];function kT(e,t,n,r,o,s){const i=(0,a.up)("el-tag"),l=(0,a.up)("el-tooltip"),u=(0,a.up)("el-icon"),d=(0,a.up)("el-select-menu"),h=(0,a.Q2)("model-text"),p=(0,a.Q2)("click-outside");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{ref:"selectRef",class:(0,c.C_)([e.nsSelectV2.b(),e.nsSelectV2.m(e.selectSize)]),onClick:t[24]||(t[24]=(0,A.iM)(((...t)=>e.toggleMenu&&e.toggleMenu(...t)),["stop"])),onMouseenter:t[25]||(t[25]=t=>e.states.comboBoxHovering=!0),onMouseleave:t[26]||(t[26]=t=>e.states.comboBoxHovering=!1)},[(0,a.Wm)(l,{ref:"popper",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelectV2.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:t[23]||(t[23]=t=>e.states.inputValue=e.states.displayInputValue)},{default:(0,a.w5)((()=>[(0,a._)("div",{ref:"selectionRef",class:(0,c.C_)([e.nsSelectV2.e("wrapper"),e.nsSelectV2.is("focused",e.states.isComposing||e.expanded),e.nsSelectV2.is("hovering",e.states.comboBoxHovering),e.nsSelectV2.is("filterable",e.filterable),e.nsSelectV2.is("disabled",e.selectDisabled)])},[e.$slots.prefix?((0,a.wg)(),(0,a.iD)("div",wT,[(0,a.WI)(e.$slots,"prefix")])):(0,a.kq)("v-if",!0),e.multiple?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)(e.nsSelectV2.e("selection"))},[e.collapseTags&&e.modelValue.length>0?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.showTagList,(t=>((0,a.wg)(),(0,a.iD)("div",{key:e.getValueKey(t),class:(0,c.C_)(e.nsSelectV2.e("selected-item"))},[(0,a.Wm)(i,{closable:!e.selectDisabled&&!(null==t?void 0:t.disable),size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:n=>e.deleteTag(n,t)},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelectV2.e("tags-text")),style:(0,c.j5)({maxWidth:`${e.tagMaxWidth}px`})},(0,c.zw)(null==t?void 0:t.label),7)])),_:2},1032,["closable","size","onClose"])],2)))),128)),(0,a._)("div",{class:(0,c.C_)(e.nsSelectV2.e("selected-item"))},[e.modelValue.length>e.maxCollapseTags?((0,a.wg)(),(0,a.j4)(i,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:(0,a.w5)((()=>[e.collapseTagsTooltip?((0,a.wg)(),(0,a.j4)(l,{key:0,disabled:e.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:!1},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelectV2.e("tags-text")),style:(0,c.j5)({maxWidth:`${e.tagMaxWidth}px`})},"+ "+(0,c.zw)(e.modelValue.length-e.maxCollapseTags),7)])),content:(0,a.w5)((()=>[(0,a._)("div",{class:(0,c.C_)(e.nsSelectV2.e("selection"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.collapseTagList,(t=>((0,a.wg)(),(0,a.iD)("div",{key:e.getValueKey(t),class:(0,c.C_)(e.nsSelectV2.e("selected-item"))},[(0,a.Wm)(i,{closable:!e.selectDisabled&&!t.disabled,size:e.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:n=>e.deleteTag(n,t)},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelectV2.e("tags-text")),style:(0,c.j5)({maxWidth:`${e.tagMaxWidth}px`})},(0,c.zw)(e.getLabel(t)),7)])),_:2},1032,["closable","size","onClose"])],2)))),128))],2)])),_:1},8,["disabled","effect"])):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,c.C_)(e.nsSelectV2.e("tags-text")),style:(0,c.j5)({maxWidth:`${e.tagMaxWidth}px`})},"+ "+(0,c.zw)(e.modelValue.length-e.maxCollapseTags),7))])),_:1},8,["size"])):(0,a.kq)("v-if",!0)],2)],64)):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.states.cachedOptions,(t=>((0,a.wg)(),(0,a.iD)("div",{key:e.getValueKey(t),class:(0,c.C_)(e.nsSelectV2.e("selected-item"))},[(0,a.Wm)(i,{closable:!e.selectDisabled&&!t.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:n=>e.deleteTag(n,t)},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,c.C_)(e.nsSelectV2.e("tags-text")),style:(0,c.j5)({maxWidth:`${e.tagMaxWidth}px`})},(0,c.zw)(e.getLabel(t)),7)])),_:2},1032,["closable","size","onClose"])],2)))),128)),(0,a._)("div",{class:(0,c.C_)([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")]),style:(0,c.j5)(e.inputWrapperStyle)},[(0,a.wy)((0,a._)("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:(0,c.C_)([e.nsSelectV2.is(e.selectSize),e.nsSelectV2.e("combobox-input")]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":t[0]||(t[0]=(...t)=>e.onUpdateInputValue&&e.onUpdateInputValue(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onInput:t[3]||(t[3]=(...t)=>e.onInput&&e.onInput(...t)),onCompositionstart:t[4]||(t[4]=(...t)=>e.handleCompositionStart&&e.handleCompositionStart(...t)),onCompositionupdate:t[5]||(t[5]=(...t)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...t)),onCompositionend:t[6]||(t[6]=(...t)=>e.handleCompositionEnd&&e.handleCompositionEnd(...t)),onKeydown:[t[7]||(t[7]=(0,A.D2)((0,A.iM)((t=>e.onKeyboardNavigate("backward")),["stop","prevent"]),["up"])),t[8]||(t[8]=(0,A.D2)((0,A.iM)((t=>e.onKeyboardNavigate("forward")),["stop","prevent"]),["down"])),t[9]||(t[9]=(0,A.D2)((0,A.iM)(((...t)=>e.onKeyboardSelect&&e.onKeyboardSelect(...t)),["stop","prevent"]),["enter"])),t[10]||(t[10]=(0,A.D2)((0,A.iM)(((...t)=>e.handleEsc&&e.handleEsc(...t)),["stop","prevent"]),["esc"])),t[11]||(t[11]=(0,A.D2)((0,A.iM)(((...t)=>e.handleDel&&e.handleDel(...t)),["stop"]),["delete"]))]},null,42,bT),[[h,e.states.displayInputValue]]),e.filterable?((0,a.wg)(),(0,a.iD)("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:(0,c.C_)(e.nsSelectV2.e("input-calculator")),textContent:(0,c.zw)(e.states.displayInputValue)},null,10,ST)):(0,a.kq)("v-if",!0)],6)],2)):((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("div",{class:(0,c.C_)([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")])},[(0,a.wy)((0,a._)("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:(0,c.C_)(e.nsSelectV2.e("combobox-input")),disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:t[12]||(t[12]=(...t)=>e.handleCompositionStart&&e.handleCompositionStart(...t)),onCompositionupdate:t[13]||(t[13]=(...t)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...t)),onCompositionend:t[14]||(t[14]=(...t)=>e.handleCompositionEnd&&e.handleCompositionEnd(...t)),onFocus:t[15]||(t[15]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[16]||(t[16]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onInput:t[17]||(t[17]=(...t)=>e.onInput&&e.onInput(...t)),onKeydown:[t[18]||(t[18]=(0,A.D2)((0,A.iM)((t=>e.onKeyboardNavigate("backward")),["stop","prevent"]),["up"])),t[19]||(t[19]=(0,A.D2)((0,A.iM)((t=>e.onKeyboardNavigate("forward")),["stop","prevent"]),["down"])),t[20]||(t[20]=(0,A.D2)((0,A.iM)(((...t)=>e.onKeyboardSelect&&e.onKeyboardSelect(...t)),["stop","prevent"]),["enter"])),t[21]||(t[21]=(0,A.D2)((0,A.iM)(((...t)=>e.handleEsc&&e.handleEsc(...t)),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":t[22]||(t[22]=(...t)=>e.onUpdateInputValue&&e.onUpdateInputValue(...t))},null,42,_T),[[h,e.states.displayInputValue]])],2),e.filterable?((0,a.wg)(),(0,a.iD)("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:(0,c.C_)([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-calculator")]),textContent:(0,c.zw)(e.states.displayInputValue)},null,10,ET)):(0,a.kq)("v-if",!0)],64)),e.shouldShowPlaceholder?((0,a.wg)(),(0,a.iD)("span",{key:3,class:(0,c.C_)([e.nsSelectV2.e("placeholder"),e.nsSelectV2.is("transparent",e.multiple?0===e.modelValue.length:!e.hasModelValue)])},(0,c.zw)(e.currentPlaceholder),3)):(0,a.kq)("v-if",!0),(0,a._)("span",{class:(0,c.C_)(e.nsSelectV2.e("suffix"))},[e.iconComponent?(0,a.wy)(((0,a.wg)(),(0,a.j4)(u,{key:0,class:(0,c.C_)([e.nsSelectV2.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.iconComponent)))])),_:1},8,["class"])),[[A.F8,!e.showClearBtn]]):(0,a.kq)("v-if",!0),e.showClearBtn&&e.clearIcon?((0,a.wg)(),(0,a.j4)(u,{key:1,class:(0,c.C_)([e.nsSelectV2.e("caret"),e.nsInput.e("icon")]),onClick:(0,A.iM)(e.handleClear,["prevent","stop"])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.clearIcon)))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0),e.validateState&&e.validateIcon?((0,a.wg)(),(0,a.j4)(u,{key:2,class:(0,c.C_)([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.validateIcon)))])),_:1},8,["class"])):(0,a.kq)("v-if",!0)],2)],2)])),content:(0,a.w5)((()=>[(0,a.Wm)(d,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:(0,a.w5)((t=>[(0,a.WI)(e.$slots,"default",(0,c.vs)((0,a.F4)(t)))])),empty:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"empty",{},(()=>[(0,a._)("p",{class:(0,c.C_)(e.nsSelectV2.e("empty"))},(0,c.zw)(e.emptyText?e.emptyText:""),3)]))])),_:3},8,["data","width","hovering-index","scrollbar-always-on"])])),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[p,e.handleClickOutside,e.popperRef]])}var CT=(0,m.Z)(vT,[["render",kT],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);CT.install=e=>{e.component(CT.name,CT)};const IT=CT,AT=IT,TT=(0,d.o8)({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),RT=(0,d.o8)({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),xT=(0,a.aZ)({name:"ElSkeletonItem"}),OT=(0,a.aZ)({...xT,props:RT,setup(e){const t=(0,y.s3)("skeleton");return(e,n)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(t).e("item"),(0,l.SU)(t).e(e.variant)])},["image"===e.variant?((0,a.wg)(),(0,a.j4)((0,l.SU)(ae.D5R),{key:0})):(0,a.kq)("v-if",!0)],2))}});var NT=(0,m.Z)(OT,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const PT=(e,t=0)=>{if(0===t)return e;const n=(0,l.iH)(!1);let r=0;const o=()=>{r&&clearTimeout(r),r=window.setTimeout((()=>{n.value=e.value}),t)};return(0,a.bv)(o),(0,a.YP)((()=>e.value),(e=>{e?o():n.value=e})),n},DT=(0,a.aZ)({name:"ElSkeleton"}),UT=(0,a.aZ)({...DT,props:TT,setup(e,{expose:t}){const n=e,r=(0,y.s3)("skeleton"),o=PT((0,l.Vh)(n,"loading"),n.throttle);return t({uiLoading:o}),(e,t)=>(0,l.SU)(o)?((0,a.wg)(),(0,a.iD)("div",(0,a.dG)({key:0,class:[(0,l.SU)(r).b(),(0,l.SU)(r).is("animated",e.animated)]},e.$attrs),[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.count,(t=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},[e.loading?(0,a.WI)(e.$slots,"template",{key:t},(()=>[(0,a.Wm)(NT,{class:(0,c.C_)((0,l.SU)(r).is("first")),variant:"p"},null,8,["class"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.rows,(t=>((0,a.wg)(),(0,a.j4)(NT,{key:t,class:(0,c.C_)([(0,l.SU)(r).e("paragraph"),(0,l.SU)(r).is("last",t===e.rows&&e.rows>1)]),variant:"p"},null,8,["class"])))),128))])):(0,a.kq)("v-if",!0)],64)))),128))],16)):(0,a.WI)(e.$slots,"default",(0,c.vs)((0,a.dG)({key:1},e.$attrs)))}});var LT=(0,m.Z)(UT,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const BT=(0,C.nz)(LT,{SkeletonItem:NT}),MT=(0,C.dp)(NT),FT=Symbol("sliderContextKey"),jT=(0,d.o8)({modelValue:{type:(0,d.Cq)([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Th.Pp,inputSize:Th.Pp,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:(0,d.Cq)(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:(0,d.Cq)(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Qe,default:"top"},marks:{type:(0,d.Cq)(Object)},validateEvent:{type:Boolean,default:!0}}),zT=e=>(0,h.hj)(e)||(0,c.kJ)(e)&&e.every(h.hj),$T={[p.f_]:zT,[p.e_]:zT,[p.O7]:zT},VT=(0,d.o8)({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Qe,default:"top"}}),HT={[p.f_]:e=>(0,h.hj)(e)},{left:KT,down:qT,right:WT,up:YT,home:GT,end:ZT,pageUp:JT,pageDown:QT}=Jn.n,XT=(e,t,n)=>{const r=(0,l.iH)(),o=(0,l.iH)(!1),s=(0,a.Fl)((()=>t.value instanceof Function)),i=(0,a.Fl)((()=>s.value&&t.value(e.modelValue)||e.modelValue)),c=ie((()=>{n.value&&(o.value=!0)}),50),u=ie((()=>{n.value&&(o.value=!1)}),50);return{tooltip:r,tooltipVisible:o,formatValue:i,displayTooltip:c,hideTooltip:u}},eR=(e,t,n)=>{const{disabled:r,min:o,max:s,step:i,showTooltip:c,precision:u,sliderSize:d,formatTooltip:h,emitChange:f,resetSize:g,updateDragging:m}=(0,a.f3)(FT),{tooltip:y,tooltipVisible:v,formatValue:w,displayTooltip:b,hideTooltip:S}=XT(e,h,c),_=(0,l.iH)(),E=(0,a.Fl)((()=>(e.modelValue-o.value)/(s.value-o.value)*100+"%")),k=(0,a.Fl)((()=>e.vertical?{bottom:E.value}:{left:E.value})),C=()=>{t.hovering=!0,b()},I=()=>{t.hovering=!1,t.dragging||S()},A=e=>{r.value||(e.preventDefault(),B(e),window.addEventListener("mousemove",M),window.addEventListener("touchmove",M),window.addEventListener("mouseup",F),window.addEventListener("touchend",F),window.addEventListener("contextmenu",F),_.value.focus())},T=e=>{r.value||(t.newPosition=Number.parseFloat(E.value)+e/(s.value-o.value)*100,j(t.newPosition),f())},R=()=>{T(-i.value)},x=()=>{T(i.value)},O=()=>{T(4*-i.value)},N=()=>{T(4*i.value)},P=()=>{r.value||(j(0),f())},D=()=>{r.value||(j(100),f())},U=e=>{let t=!0;[KT,qT].includes(e.key)?R():[WT,YT].includes(e.key)?x():e.key===GT?P():e.key===ZT?D():e.key===QT?O():e.key===JT?N():t=!1,t&&e.preventDefault()},L=e=>{let t,n;return e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}},B=n=>{t.dragging=!0,t.isClick=!0;const{clientX:r,clientY:o}=L(n);e.vertical?t.startY=o:t.startX=r,t.startPosition=Number.parseFloat(E.value),t.newPosition=t.startPosition},M=n=>{if(t.dragging){let r;t.isClick=!1,b(),g();const{clientX:o,clientY:s}=L(n);e.vertical?(t.currentY=s,r=(t.startY-t.currentY)/d.value*100):(t.currentX=o,r=(t.currentX-t.startX)/d.value*100),t.newPosition=t.startPosition+r,j(t.newPosition)}},F=()=>{t.dragging&&(setTimeout((()=>{t.dragging=!1,t.hovering||S(),t.isClick||j(t.newPosition),f()}),0),window.removeEventListener("mousemove",M),window.removeEventListener("touchmove",M),window.removeEventListener("mouseup",F),window.removeEventListener("touchend",F),window.removeEventListener("contextmenu",F))},j=async r=>{if(null===r||Number.isNaN(+r))return;r<0?r=0:r>100&&(r=100);const l=100/((s.value-o.value)/i.value),c=Math.round(r/l);let d=c*l*(s.value-o.value)*.01+o.value;d=Number.parseFloat(d.toFixed(u.value)),d!==e.modelValue&&n(p.f_,d),t.dragging||e.modelValue===t.oldValue||(t.oldValue=e.modelValue),await(0,a.Y3)(),t.dragging&&b(),y.value.updatePopper()};return(0,a.YP)((()=>t.dragging),(e=>{m(e)})),{disabled:r,button:_,tooltip:y,tooltipVisible:v,showTooltip:c,wrapperStyle:k,formatValue:w,handleMouseEnter:C,handleMouseLeave:I,onButtonDown:A,onKeyDown:U,setPosition:j}},tR=["tabindex"],nR=(0,a.aZ)({name:"ElSliderButton"}),rR=(0,a.aZ)({...nR,props:VT,emits:HT,setup(e,{expose:t,emit:n}){const r=e,o=(0,y.s3)("slider"),s=(0,l.qj)({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),{disabled:i,button:u,tooltip:d,showTooltip:h,tooltipVisible:p,wrapperStyle:f,formatValue:g,handleMouseEnter:m,handleMouseLeave:v,onButtonDown:w,onKeyDown:b,setPosition:S}=eR(r,s,n),{hovering:_,dragging:E}=(0,l.BK)(s);return t({onButtonDown:w,onKeyDown:b,setPosition:S,hovering:_,dragging:E}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"button",ref:u,class:(0,c.C_)([(0,l.SU)(o).e("button-wrapper"),{hover:(0,l.SU)(_),dragging:(0,l.SU)(E)}]),style:(0,c.j5)((0,l.SU)(f)),tabindex:(0,l.SU)(i)?-1:0,onMouseenter:t[0]||(t[0]=(...e)=>(0,l.SU)(m)&&(0,l.SU)(m)(...e)),onMouseleave:t[1]||(t[1]=(...e)=>(0,l.SU)(v)&&(0,l.SU)(v)(...e)),onMousedown:t[2]||(t[2]=(...e)=>(0,l.SU)(w)&&(0,l.SU)(w)(...e)),onTouchstart:t[3]||(t[3]=(...e)=>(0,l.SU)(w)&&(0,l.SU)(w)(...e)),onFocus:t[4]||(t[4]=(...e)=>(0,l.SU)(m)&&(0,l.SU)(m)(...e)),onBlur:t[5]||(t[5]=(...e)=>(0,l.SU)(v)&&(0,l.SU)(v)(...e)),onKeydown:t[6]||(t[6]=(...e)=>(0,l.SU)(b)&&(0,l.SU)(b)(...e))},[(0,a.Wm)((0,l.SU)(ho),{ref_key:"tooltip",ref:d,visible:(0,l.SU)(p),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!(0,l.SU)(h),persistent:""},{content:(0,a.w5)((()=>[(0,a._)("span",null,(0,c.zw)((0,l.SU)(g)),1)])),default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(o).e("button"),{hover:(0,l.SU)(_),dragging:(0,l.SU)(E)}])},null,2)])),_:1},8,["visible","placement","popper-class","disabled"])],46,tR))}});var oR=(0,m.Z)(rR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const sR=(0,d.o8)({mark:{type:(0,d.Cq)([String,Object]),default:void 0}});var iR=(0,a.aZ)({name:"ElSliderMarker",props:sR,setup(e){const t=(0,y.s3)("slider"),n=(0,a.Fl)((()=>(0,c.HD)(e.mark)?e.mark:e.mark.label)),r=(0,a.Fl)((()=>(0,c.HD)(e.mark)?void 0:e.mark.style));return()=>(0,a.h)("div",{class:t.e("marks-text"),style:r.value},n.value)}});const aR=(e,t,n)=>{const{form:r,formItem:o}=(0,Ph.A)(),s=(0,l.XI)(),i=(0,l.iH)(),c=(0,l.iH)(),u={firstButton:i,secondButton:c},d=(0,a.Fl)((()=>e.disabled||(null==r?void 0:r.disabled)||!1)),h=(0,a.Fl)((()=>Math.min(t.firstValue,t.secondValue))),f=(0,a.Fl)((()=>Math.max(t.firstValue,t.secondValue))),g=(0,a.Fl)((()=>e.range?100*(f.value-h.value)/(e.max-e.min)+"%":100*(t.firstValue-e.min)/(e.max-e.min)+"%")),m=(0,a.Fl)((()=>e.range?100*(h.value-e.min)/(e.max-e.min)+"%":"0%")),y=(0,a.Fl)((()=>e.vertical?{height:e.height}:{})),v=(0,a.Fl)((()=>e.vertical?{height:g.value,bottom:m.value}:{width:g.value,left:m.value})),w=()=>{s.value&&(t.sliderSize=s.value["client"+(e.vertical?"Height":"Width")])},b=n=>{const r=e.min+n*(e.max-e.min)/100;if(!e.range)return i;let o;return o=Math.abs(h.value-r)<Math.abs(f.value-r)?t.firstValue<t.secondValue?"firstButton":"secondButton":t.firstValue>t.secondValue?"firstButton":"secondButton",u[o]},S=e=>{const t=b(e);return t.value.setPosition(e),t},_=n=>{t.firstValue=n,k(e.range?[h.value,f.value]:n)},E=n=>{t.secondValue=n,e.range&&k([h.value,f.value])},k=e=>{n(p.f_,e),n(p.e_,e)},C=async()=>{await(0,a.Y3)(),n(p.O7,e.range?[h.value,f.value]:e.modelValue)},I=n=>{var r,o,i,a,l,c;if(d.value||t.dragging)return;w();let u=0;if(e.vertical){const e=null!=(i=null==(o=null==(r=n.touches)?void 0:r.item(0))?void 0:o.clientY)?i:n.clientY,a=s.value.getBoundingClientRect().bottom;u=(a-e)/t.sliderSize*100}else{const e=null!=(c=null==(l=null==(a=n.touches)?void 0:a.item(0))?void 0:l.clientX)?c:n.clientX,r=s.value.getBoundingClientRect().left;u=(e-r)/t.sliderSize*100}return u<0||u>100?void 0:S(u)},A=e=>{var t,n;((null==(t=u["firstButton"].value)?void 0:t.dragging)||(null==(n=u["secondButton"].value)?void 0:n.dragging))&&e.preventDefault()},T=async e=>{const t=I(e);t&&(await(0,a.Y3)(),t.value.onButtonDown(e))},R=e=>{const t=I(e);t&&C()};return{elFormItem:o,slider:s,firstButton:i,secondButton:c,sliderDisabled:d,minValue:h,maxValue:f,runwayStyle:y,barStyle:v,resetSize:w,setPosition:S,emitChange:C,onSliderWrapperPrevent:A,onSliderClick:R,onSliderDown:T,setFirstValue:_,setSecondValue:E}},lR=(e,t,n,r)=>{const o=(0,a.Fl)((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return(0,w.N)("ElSlider","step should not be 0."),[];const o=(e.max-e.min)/e.step,s=100*e.step/(e.max-e.min),i=Array.from({length:o-1}).map(((e,t)=>(t+1)*s));return e.range?i.filter((t=>t<100*(n.value-e.min)/(e.max-e.min)||t>100*(r.value-e.min)/(e.max-e.min))):i.filter((n=>n>100*(t.firstValue-e.min)/(e.max-e.min)))})),s=t=>e.vertical?{bottom:`${t}%`}:{left:`${t}%`};return{stops:o,getStopStyle:s}},cR=e=>(0,a.Fl)((()=>{if(!e.marks)return[];const t=Object.keys(e.marks);return t.map(Number.parseFloat).sort(((e,t)=>e-t)).filter((t=>t<=e.max&&t>=e.min)).map((t=>({point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]})))})),uR=(e,t,n,r,o,s)=>{const i=e=>{o(p.f_,e),o(p.e_,e)},l=()=>e.range?![n.value,r.value].every(((e,n)=>e===t.oldValue[n])):e.modelValue!==t.oldValue,c=()=>{var n,r;e.min>e.max&&(0,w._)("Slider","min should not be greater than max.");const o=e.modelValue;e.range&&Array.isArray(o)?o[1]<e.min?i([e.min,e.min]):o[0]>e.max?i([e.max,e.max]):o[0]<e.min?i([e.min,o[1]]):o[1]>e.max?i([o[0],e.max]):(t.firstValue=o[0],t.secondValue=o[1],l()&&(e.validateEvent&&(null==(n=null==s?void 0:s.validate)||n.call(s,"change").catch((e=>(0,w.N)(e)))),t.oldValue=o.slice())):e.range||"number"!==typeof o||Number.isNaN(o)||(o<e.min?i(e.min):o>e.max?i(e.max):(t.firstValue=o,l()&&(e.validateEvent&&(null==(r=null==s?void 0:s.validate)||r.call(s,"change").catch((e=>(0,w.N)(e)))),t.oldValue=o)))};c(),(0,a.YP)((()=>t.dragging),(e=>{e||c()})),(0,a.YP)((()=>e.modelValue),((e,n)=>{t.dragging||Array.isArray(e)&&Array.isArray(n)&&e.every(((e,t)=>e===n[t]))&&t.firstValue===e[0]&&t.secondValue===e[1]||c()}),{deep:!0}),(0,a.YP)((()=>[e.min,e.max]),(()=>{c()}))},dR=(e,t,n)=>{const r=(0,l.iH)();return(0,a.bv)((async()=>{e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):("number"!==typeof e.modelValue||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),(0,u.ORN)(window,"resize",n),await(0,a.Y3)(),n()})),{sliderWrapper:r}},hR=["id","role","aria-label","aria-labelledby"],pR={key:1},fR=(0,a.aZ)({name:"ElSlider"}),gR=(0,a.aZ)({...fR,props:jT,emits:$T,setup(e,{expose:t,emit:n}){const r=e,o=(0,y.s3)("slider"),{t:s}=(0,_s.bU)(),i=(0,l.qj)({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:u,slider:d,firstButton:h,secondButton:p,sliderDisabled:f,minValue:g,maxValue:m,runwayStyle:v,barStyle:w,resetSize:b,emitChange:S,onSliderWrapperPrevent:_,onSliderClick:E,onSliderDown:k,setFirstValue:C,setSecondValue:I}=aR(r,i,n),{stops:A,getStopStyle:T}=lR(r,i,g,m),{inputId:R,isLabeledByFormItem:x}=(0,Ph.p)(r,{formItemContext:u}),O=(0,mo.Cd)(),N=(0,a.Fl)((()=>r.inputSize||O.value)),P=(0,a.Fl)((()=>r.label||s("el.slider.defaultLabel",{min:r.min,max:r.max}))),D=(0,a.Fl)((()=>r.range?r.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):P.value)),U=(0,a.Fl)((()=>r.formatValueText?r.formatValueText($.value):`${$.value}`)),L=(0,a.Fl)((()=>r.rangeEndLabel||s("el.slider.defaultRangeEndLabel"))),B=(0,a.Fl)((()=>r.formatValueText?r.formatValueText(V.value):`${V.value}`)),M=(0,a.Fl)((()=>[o.b(),o.m(O.value),o.is("vertical",r.vertical),{[o.m("with-input")]:r.showInput}])),F=cR(r);uR(r,i,g,m,n,u);const j=(0,a.Fl)((()=>{const e=[r.min,r.max,r.step].map((e=>{const t=`${e}`.split(".")[1];return t?t.length:0}));return Math.max.apply(null,e)})),{sliderWrapper:z}=dR(r,i,b),{firstValue:$,secondValue:V,sliderSize:H}=(0,l.BK)(i),K=e=>{i.dragging=e};return(0,a.JJ)(FT,{...(0,l.BK)(r),sliderSize:H,disabled:f,precision:j,emitChange:S,resetSize:b,updateDragging:K}),t({onSliderClick:E}),(e,t)=>{var n,r;return(0,a.wg)(),(0,a.iD)("div",{id:e.range?(0,l.SU)(R):void 0,ref_key:"sliderWrapper",ref:z,class:(0,c.C_)((0,l.SU)(M)),role:e.range?"group":void 0,"aria-label":e.range&&!(0,l.SU)(x)?(0,l.SU)(P):void 0,"aria-labelledby":e.range&&(0,l.SU)(x)?null==(n=(0,l.SU)(u))?void 0:n.labelId:void 0,onTouchstart:t[2]||(t[2]=(...e)=>(0,l.SU)(_)&&(0,l.SU)(_)(...e)),onTouchmove:t[3]||(t[3]=(...e)=>(0,l.SU)(_)&&(0,l.SU)(_)(...e))},[(0,a._)("div",{ref_key:"slider",ref:d,class:(0,c.C_)([(0,l.SU)(o).e("runway"),{"show-input":e.showInput&&!e.range},(0,l.SU)(o).is("disabled",(0,l.SU)(f))]),style:(0,c.j5)((0,l.SU)(v)),onMousedown:t[0]||(t[0]=(...e)=>(0,l.SU)(k)&&(0,l.SU)(k)(...e)),onTouchstart:t[1]||(t[1]=(...e)=>(0,l.SU)(k)&&(0,l.SU)(k)(...e))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("bar")),style:(0,c.j5)((0,l.SU)(w))},null,6),(0,a.Wm)(oR,{id:e.range?void 0:(0,l.SU)(R),ref_key:"firstButton",ref:h,"model-value":(0,l.SU)($),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!(0,l.SU)(x)?(0,l.SU)(D):void 0,"aria-labelledby":!e.range&&(0,l.SU)(x)?null==(r=(0,l.SU)(u))?void 0:r.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?(0,l.SU)(V):e.max,"aria-valuenow":(0,l.SU)($),"aria-valuetext":(0,l.SU)(U),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":(0,l.SU)(f),"onUpdate:modelValue":(0,l.SU)(C)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?((0,a.wg)(),(0,a.j4)(oR,{key:0,ref_key:"secondButton",ref:p,"model-value":(0,l.SU)(V),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":(0,l.SU)(L),"aria-valuemin":(0,l.SU)($),"aria-valuemax":e.max,"aria-valuenow":(0,l.SU)(V),"aria-valuetext":(0,l.SU)(B),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":(0,l.SU)(f),"onUpdate:modelValue":(0,l.SU)(I)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):(0,a.kq)("v-if",!0),e.showStops?((0,a.wg)(),(0,a.iD)("div",pR,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(A),((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:(0,c.C_)((0,l.SU)(o).e("stop")),style:(0,c.j5)((0,l.SU)(T)(e))},null,6)))),128))])):(0,a.kq)("v-if",!0),(0,l.SU)(F).length>0?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(F),((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,style:(0,c.j5)((0,l.SU)(T)(e.position)),class:(0,c.C_)([(0,l.SU)(o).e("stop"),(0,l.SU)(o).e("marks-stop")])},null,6)))),128))]),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).e("marks"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(F),((e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(iR),{key:t,mark:e.mark,style:(0,c.j5)((0,l.SU)(T)(e.position))},null,8,["mark","style"])))),128))],2)],64)):(0,a.kq)("v-if",!0)],38),e.showInput&&!e.range?((0,a.wg)(),(0,a.j4)((0,l.SU)(FE),{key:0,ref:"input","model-value":(0,l.SU)($),class:(0,c.C_)((0,l.SU)(o).e("input")),step:e.step,disabled:(0,l.SU)(f),controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:(0,l.SU)(N),"onUpdate:modelValue":(0,l.SU)(C),onChange:(0,l.SU)(S)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):(0,a.kq)("v-if",!0)],42,hR)}}});var mR=(0,m.Z)(gR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const yR=(0,C.nz)(mR),vR=(0,d.o8)({prefixCls:{type:String}}),wR=(0,a.aZ)({name:"ElSpaceItem",props:vR,setup(e,{slots:t}){const n=(0,y.s3)("space"),r=(0,a.Fl)((()=>`${e.prefixCls||n.b()}__item`));return()=>(0,a.h)("div",{class:r.value},(0,a.WI)(t,"default"))}}),bR={small:8,default:12,large:16};function SR(e){const t=(0,y.s3)("space"),n=(0,a.Fl)((()=>[t.b(),t.m(e.direction),e.class])),r=(0,l.iH)(0),o=(0,l.iH)(0),s=(0,a.Fl)((()=>{const t=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${o.value}px`}:{},n={alignItems:e.alignment};return[t,n,e.style]})),i=(0,a.Fl)((()=>{const t={paddingBottom:`${o.value}px`,marginRight:`${r.value}px`},n=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[t,n]}));return(0,a.m0)((()=>{const{size:t="small",wrap:n,direction:s,fill:i}=e;if((0,c.kJ)(t)){const[e=0,n=0]=t;r.value=e,o.value=n}else{let e;e=(0,h.hj)(t)?t:bR[t||"small"]||bR.small,(n||i)&&"horizontal"===s?r.value=o.value=e:"horizontal"===s?(r.value=e,o.value=0):(o.value=e,r.value=0)}})),{classes:n,containerStyle:s,itemStyle:i}}const _R=(0,d.o8)({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:(0,d.Cq)([String,Object,Array]),default:""},style:{type:(0,d.Cq)([String,Array,Object]),default:""},alignment:{type:(0,d.Cq)(String),default:"center"},prefixCls:{type:String},spacer:{type:(0,d.Cq)([Object,String,Number,Array]),default:null,validator:e=>(0,a.lA)(e)||(0,h.hj)(e)||(0,c.HD)(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Io.k,validator:e=>(0,h.hj)(e)||(0,c.kJ)(e)&&2===e.length&&e.every(h.hj)}}),ER=(0,a.aZ)({name:"ElSpace",props:_R,setup(e,{slots:t}){const{classes:n,containerStyle:r,itemStyle:o}=SR(e);function s(t,n="",r=[]){const{prefixCls:i}=e;return t.forEach(((e,t)=>{(0,ei.M2)(e)?(0,c.kJ)(e.children)&&e.children.forEach(((e,t)=>{(0,ei.M2)(e)&&(0,c.kJ)(e.children)?s(e.children,`${n+t}-`,r):r.push((0,a.Wm)(wR,{style:o.value,prefixCls:i,key:`nested-${n+t}`},{default:()=>[e]},ei.y.PROPS|ei.y.STYLE,["style","prefixCls"]))})):(0,ei.Lg)(e)&&r.push((0,a.Wm)(wR,{style:o.value,prefixCls:i,key:`LoopKey${n+t}`},{default:()=>[e]},ei.y.PROPS|ei.y.STYLE,["style","prefixCls"]))})),r}return()=>{var i;const{spacer:l,direction:u}=e,d=(0,a.WI)(t,"default",{key:0},(()=>[]));if(0===(null!=(i=d.children)?i:[]).length)return null;if((0,c.kJ)(d.children)){let e=s(d.children);if(l){const t=e.length-1;e=e.reduce(((e,n,r)=>{const s=[...e,n];return r!==t&&s.push((0,a.Wm)("span",{style:[o.value,"vertical"===u?"width: 100%":null],key:r},[(0,a.lA)(l)?l:(0,a.Uk)(l,ei.y.TEXT)],ei.y.STYLE)),s}),[])}return(0,a.Wm)("div",{class:n.value,style:r.value},e,ei.y.STYLE|ei.y.CLASS)}return d.children}}}),kR=(0,C.nz)(ER),CR=(0,d.o8)({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:(0,d.Cq)([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:(0,d.Cq)([String,Object,Array])}}),IR=(0,a.aZ)({name:"ElStatistic"}),AR=(0,a.aZ)({...IR,props:CR,setup(e,{expose:t}){const n=e,r=(0,y.s3)("statistic"),o=(0,a.Fl)((()=>{const{value:e,formatter:t,precision:r,decimalSeparator:o,groupSeparator:s}=n;if((0,c.mf)(t))return t(e);if(!(0,h.hj)(e))return e;let[i,a=""]=String(e).split(".");return a=a.padEnd(r,"0").slice(0,r>0?r:0),i=i.replace(/\B(?=(\d{3})+(?!\d))/g,s),[i,a].join(a?o:"")}));return t({displayValue:o}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(r).b())},[e.$slots.title||e.title?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(r).e("head"))},[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a.Uk)((0,c.zw)(e.title),1)]))],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(r).e("content"))},[e.$slots.prefix||e.prefix?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(r).e("prefix"))},[(0,a.WI)(e.$slots,"prefix",{},(()=>[(0,a._)("span",null,(0,c.zw)(e.prefix),1)]))],2)):(0,a.kq)("v-if",!0),(0,a._)("span",{class:(0,c.C_)((0,l.SU)(r).e("number")),style:(0,c.j5)(e.valueStyle)},(0,c.zw)((0,l.SU)(o)),7),e.$slots.suffix||e.suffix?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(r).e("suffix"))},[(0,a.WI)(e.$slots,"suffix",{},(()=>[(0,a._)("span",null,(0,c.zw)(e.suffix),1)]))],2)):(0,a.kq)("v-if",!0)],2)],2))}});var TR=(0,m.Z)(AR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/statistic/src/statistic.vue"]]);const RR=(0,C.nz)(TR),xR=(0,d.o8)({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:(0,d.Cq)([Number,Object]),default:0},valueStyle:{type:(0,d.Cq)([String,Object,Array])}}),OR={finish:()=>!0,[p.O7]:e=>(0,h.hj)(e)},NR=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]],PR=e=>(0,h.hj)(e)?new Date(e).getTime():e.valueOf(),DR=(e,t)=>{let n=e;const r=/\[([^\]]*)]/g,o=NR.reduce(((e,[t,r])=>{const o=new RegExp(`${t}+(?![^\\[\\]]*\\])`,"g");if(o.test(e)){const t=Math.floor(n/r);return n-=t*r,e.replace(o,(e=>String(t).padStart(e.length,"0")))}return e}),t);return o.replace(r,"$1")},UR=(0,a.aZ)({name:"ElCountdown"}),LR=(0,a.aZ)({...UR,props:xR,emits:OR,setup(e,{expose:t,emit:n}){const r=e;let o;const s=(0,l.iH)(PR(r.value)-Date.now()),i=(0,a.Fl)((()=>DR(s.value,r.format))),c=e=>DR(e,r.format),u=()=>{o&&(OA(o),o=void 0)},d=()=>{const e=PR(r.value),t=()=>{let r=e-Date.now();n("change",r),r<=0?(r=0,u(),n("finish")):o=xA(t),s.value=r};o=xA(t)};return(0,a.YP)((()=>[r.value,r.format]),(()=>{u(),d()}),{immediate:!0}),(0,a.Jd)((()=>{u()})),t({displayValue:i}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(RR),{value:s.value,title:e.title,prefix:e.prefix,suffix:e.suffix,"value-style":e.valueStyle,formatter:c},(0,a.Nv)({_:2},[(0,a.Ko)(e.$slots,((t,n)=>({name:n,fn:(0,a.w5)((()=>[(0,a.WI)(e.$slots,n)]))})))]),1032,["value","title","prefix","suffix","value-style"]))}});var BR=(0,m.Z)(LR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/countdown/src/countdown.vue"]]);const MR=(0,C.nz)(BR),FR=(0,d.o8)({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),jR={[p.O7]:(e,t)=>[e,t].every(h.hj)},zR=(0,a.aZ)({name:"ElSteps"}),$R=(0,a.aZ)({...zR,props:FR,emits:jR,setup(e,{emit:t}){const n=e,r=(0,y.s3)("steps"),o=(0,l.iH)([]);return(0,a.YP)(o,(()=>{o.value.forEach(((e,t)=>{e.setIndex(t)}))})),(0,a.JJ)("ElSteps",{props:n,steps:o}),(0,a.YP)((()=>n.active),((e,n)=>{t(p.O7,e,n)})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(r).b(),(0,l.SU)(r).m(e.simple?"simple":e.direction)])},[(0,a.WI)(e.$slots,"default")],2))}});var VR=(0,m.Z)($R,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const HR=(0,d.o8)({title:{type:String,default:""},icon:{type:x.AA},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),KR=(0,a.aZ)({name:"ElStep"}),qR=(0,a.aZ)({...KR,props:HR,setup(e){const t=e,n=(0,y.s3)("step"),r=(0,l.iH)(-1),o=(0,l.iH)({}),s=(0,l.iH)(""),i=(0,a.f3)("ElSteps"),u=(0,a.FN)();(0,a.bv)((()=>{(0,a.YP)([()=>i.props.active,()=>i.props.processStatus,()=>i.props.finishStatus],(([e])=>{k(e)}),{immediate:!0})})),(0,a.Jd)((()=>{i.steps.value=i.steps.value.filter((e=>e.uid!==(null==u?void 0:u.uid)))}));const d=(0,a.Fl)((()=>t.status||s.value)),p=(0,a.Fl)((()=>{const e=i.steps.value[r.value-1];return e?e.currentStatus:"wait"})),f=(0,a.Fl)((()=>i.props.alignCenter)),g=(0,a.Fl)((()=>"vertical"===i.props.direction)),m=(0,a.Fl)((()=>i.props.simple)),v=(0,a.Fl)((()=>i.steps.value.length)),w=(0,a.Fl)((()=>{var e;return(null==(e=i.steps.value[v.value-1])?void 0:e.uid)===(null==u?void 0:u.uid)})),b=(0,a.Fl)((()=>m.value?"":i.props.space)),S=(0,a.Fl)((()=>{const e={flexBasis:(0,h.hj)(b.value)?`${b.value}px`:b.value?b.value:100/(v.value-(f.value?0:1))+"%"};return g.value||w.value&&(e.maxWidth=100/v.value+"%"),e})),_=e=>{r.value=e},E=e=>{const t="wait"===e,n={transitionDelay:`${t?"-":""}${150*r.value}ms`},s=e===i.props.processStatus||t?0:100;n.borderWidth=s&&!m.value?"1px":0,n["vertical"===i.props.direction?"height":"width"]=`${s}%`,o.value=n},k=e=>{e>r.value?s.value=i.props.finishStatus:e===r.value&&"error"!==p.value?s.value=i.props.processStatus:s.value="wait";const t=i.steps.value[r.value-1];t&&t.calcProgress(s.value)},C=(0,l.qj)({uid:(0,a.Fl)((()=>null==u?void 0:u.uid)),currentStatus:d,setIndex:_,calcProgress:E});return i.steps.value=[...i.steps.value,C],(e,t)=>((0,a.wg)(),(0,a.iD)("div",{style:(0,c.j5)((0,l.SU)(S)),class:(0,c.C_)([(0,l.SU)(n).b(),(0,l.SU)(n).is((0,l.SU)(m)?"simple":(0,l.SU)(i).props.direction),(0,l.SU)(n).is("flex",(0,l.SU)(w)&&!(0,l.SU)(b)&&!(0,l.SU)(f)),(0,l.SU)(n).is("center",(0,l.SU)(f)&&!(0,l.SU)(g)&&!(0,l.SU)(m))])},[(0,a.kq)(" icon & line "),(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(n).e("head"),(0,l.SU)(n).is((0,l.SU)(d))])},[(0,l.SU)(m)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(n).e("line"))},[(0,a._)("i",{class:(0,c.C_)((0,l.SU)(n).e("line-inner")),style:(0,c.j5)(o.value)},null,6)],2)),(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(n).e("icon"),(0,l.SU)(n).is(e.icon||e.$slots.icon?"icon":"text")])},[(0,a.WI)(e.$slots,"icon",{},(()=>[e.icon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(n).e("icon-inner"))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:1},8,["class"])):"success"===(0,l.SU)(d)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1,class:(0,c.C_)([(0,l.SU)(n).e("icon-inner"),(0,l.SU)(n).is("status")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.JrY))])),_:1},8,["class"])):"error"===(0,l.SU)(d)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:2,class:(0,c.C_)([(0,l.SU)(n).e("icon-inner"),(0,l.SU)(n).is("status")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.x8P))])),_:1},8,["class"])):(0,l.SU)(m)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:3,class:(0,c.C_)((0,l.SU)(n).e("icon-inner"))},(0,c.zw)(r.value+1),3))]))],2)],2),(0,a.kq)(" title & description "),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(n).e("main"))},[(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(n).e("title"),(0,l.SU)(n).is((0,l.SU)(d))])},[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a.Uk)((0,c.zw)(e.title),1)]))],2),(0,l.SU)(m)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(n).e("arrow"))},null,2)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)([(0,l.SU)(n).e("description"),(0,l.SU)(n).is((0,l.SU)(d))])},[(0,a.WI)(e.$slots,"description",{},(()=>[(0,a.Uk)((0,c.zw)(e.description),1)]))],2))],2)],6))}});var WR=(0,m.Z)(qR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const YR=(0,C.nz)(VR,{Step:WR}),GR=(0,C.dp)(WR),ZR=(0,d.o8)({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:x.AA},inactiveIcon:{type:x.AA},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:(0,d.Cq)(Function)},size:{type:String,validator:iC.P},tabindex:{type:[String,Number]}}),JR={[p.f_]:e=>(0,h.jn)(e)||(0,c.HD)(e)||(0,h.hj)(e),[p.O7]:e=>(0,h.jn)(e)||(0,c.HD)(e)||(0,h.hj)(e),[p.e_]:e=>(0,h.jn)(e)||(0,c.HD)(e)||(0,h.hj)(e)},QR=["onClick"],XR=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],ex=["aria-hidden"],tx=["aria-hidden"],nx=["aria-hidden"],rx="ElSwitch",ox=(0,a.aZ)({name:rx}),sx=(0,a.aZ)({...ox,props:ZR,emits:JR,setup(e,{expose:t,emit:n}){const r=e,o=(0,a.FN)(),{formItem:s}=(0,Ph.A)(),i=(0,mo.Cd)(),u=(0,y.s3)("switch");(0,Os.A)({from:'"value"',replacement:'"model-value" or "v-model"',scope:rx,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},(0,a.Fl)((()=>{var e;return!!(null==(e=o.vnode.props)?void 0:e.value)})));const{inputId:d}=(0,Ph.p)(r,{formItemContext:s}),f=(0,mo.DT)((0,a.Fl)((()=>r.loading))),g=(0,l.iH)(!1!==r.modelValue),m=(0,l.iH)(),b=(0,l.iH)(),S=(0,a.Fl)((()=>[u.b(),u.m(i.value),u.is("disabled",f.value),u.is("checked",k.value)])),_=(0,a.Fl)((()=>({width:(0,v.Nn)(r.width)})));(0,a.YP)((()=>r.modelValue),(()=>{g.value=!0})),(0,a.YP)((()=>r.value),(()=>{g.value=!1}));const E=(0,a.Fl)((()=>g.value?r.modelValue:r.value)),k=(0,a.Fl)((()=>E.value===r.activeValue));[r.activeValue,r.inactiveValue].includes(E.value)||(n(p.f_,r.inactiveValue),n(p.O7,r.inactiveValue),n(p.e_,r.inactiveValue)),(0,a.YP)(k,(e=>{var t;m.value.checked=e,r.validateEvent&&(null==(t=null==s?void 0:s.validate)||t.call(s,"change").catch((e=>(0,w.N)(e))))}));const C=()=>{const e=k.value?r.inactiveValue:r.activeValue;n(p.f_,e),n(p.O7,e),n(p.e_,e),(0,a.Y3)((()=>{m.value.checked=k.value}))},I=()=>{if(f.value)return;const{beforeChange:e}=r;if(!e)return void C();const t=e(),n=[(0,c.tI)(t),(0,h.jn)(t)].includes(!0);n||(0,w._)(rx,"beforeChange must return type `Promise<boolean>` or `boolean`"),(0,c.tI)(t)?t.then((e=>{e&&C()})).catch((e=>{(0,w.N)(rx,`some error occurred: ${e}`)})):t&&C()},R=(0,a.Fl)((()=>u.cssVarBlock({...r.activeColor?{"on-color":r.activeColor}:null,...r.inactiveColor?{"off-color":r.inactiveColor}:null,...r.borderColor?{"border-color":r.borderColor}:null}))),x=()=>{var e,t;null==(t=null==(e=m.value)?void 0:e.focus)||t.call(e)};return(0,a.bv)((()=>{m.value.checked=k.value})),t({focus:x,checked:k}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(S)),style:(0,c.j5)((0,l.SU)(R)),onClick:(0,A.iM)(I,["prevent"])},[(0,a._)("input",{id:(0,l.SU)(d),ref_key:"input",ref:m,class:(0,c.C_)((0,l.SU)(u).e("input")),type:"checkbox",role:"switch","aria-checked":(0,l.SU)(k),"aria-disabled":(0,l.SU)(f),name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:(0,l.SU)(f),tabindex:e.tabindex,onChange:C,onKeydown:(0,A.D2)(I,["enter"])},null,42,XR),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,c.C_)([(0,l.SU)(u).e("label"),(0,l.SU)(u).em("label","left"),(0,l.SU)(u).is("active",!(0,l.SU)(k))])},[e.inactiveIcon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.inactiveIcon)))])),_:1})):(0,a.kq)("v-if",!0),!e.inactiveIcon&&e.inactiveText?((0,a.wg)(),(0,a.iD)("span",{key:1,"aria-hidden":(0,l.SU)(k)},(0,c.zw)(e.inactiveText),9,ex)):(0,a.kq)("v-if",!0)],2)),(0,a._)("span",{ref_key:"core",ref:b,class:(0,c.C_)((0,l.SU)(u).e("core")),style:(0,c.j5)((0,l.SU)(_))},[e.inlinePrompt?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)((0,l.SU)(u).e("inner"))},[e.activeIcon||e.inactiveIcon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(u).is("icon"))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(k)?e.activeIcon:e.inactiveIcon)))])),_:1},8,["class"])):e.activeText||e.inactiveText?((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,c.C_)((0,l.SU)(u).is("text")),"aria-hidden":!(0,l.SU)(k)},(0,c.zw)((0,l.SU)(k)?e.activeText:e.inactiveText),11,tx)):(0,a.kq)("v-if",!0)],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(u).e("action"))},[e.loading?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(u).is("loading"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.gbz))])),_:1},8,["class"])):(0,a.kq)("v-if",!0)],2)],6),e.inlinePrompt||!e.activeIcon&&!e.activeText?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,c.C_)([(0,l.SU)(u).e("label"),(0,l.SU)(u).em("label","right"),(0,l.SU)(u).is("active",(0,l.SU)(k))])},[e.activeIcon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.activeIcon)))])),_:1})):(0,a.kq)("v-if",!0),!e.activeIcon&&e.activeText?((0,a.wg)(),(0,a.iD)("span",{key:1,"aria-hidden":!(0,l.SU)(k)},(0,c.zw)(e.activeText),9,nx)):(0,a.kq)("v-if",!0)],2))],14,QR))}});var ix=(0,m.Z)(sx,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const ax=(0,C.nz)(ix);function lx(e,t,n){(void 0!==n&&!(0,Ud.Z)(e[t],n)||void 0===n&&!(t in e))&&(0,Mi.Z)(e,t,n)}var cx=lx;function ux(e){return function(t,n,r){var o=-1,s=Object(t),i=r(t),a=i.length;while(a--){var l=i[e?a:++o];if(!1===n(s[l],l,s))break}return t}}var dx=ux,hx=dx(),px=hx;function fx(e){return(0,Hi.Z)(e)&&gl(e)}var gx=fx,mx="[object Object]",yx=Function.prototype,vx=Object.prototype,wx=yx.toString,bx=vx.hasOwnProperty,Sx=wx.call(Object);function _x(e){if(!(0,Hi.Z)(e)||(0,Vi.Z)(e)!=mx)return!1;var t=Xl(e);if(null===t)return!0;var n=bx.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&wx.call(n)==Sx}var Ex=_x;function kx(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Cx=kx;function Ix(e){return ji(e,Al(e))}var Ax=Ix;function Tx(e,t,n,r,o,s,i){var a=Cx(e,n),l=Cx(t,n),c=i.get(l);if(c)cx(e,n,c);else{var u=s?s(a,l,n+"",e,t,i):void 0,d=void 0===u;if(d){var h=(0,Xi.Z)(l),p=!h&&la(l),f=!h&&!p&&Ja(l);u=l,h||p||f?(0,Xi.Z)(a)?u=a:gx(a)?u=Ml(a):p?(d=!1,u=Ll(l,!0)):f?(d=!1,u=Xc(l,!0)):u=[]:Ex(l)||Qi(l)?(u=a,Qi(a)?u=Ax(a):(0,M.Z)(a)&&!(0,pl.Z)(a)||(u=Cu(l))):d=!1}d&&(i.set(l,u),o(u,l,r,s,i),i["delete"](l)),cx(e,n,u)}}var Rx=Tx;function xx(e,t,n,r,o){e!==t&&px(t,(function(s,i){if(o||(o=new Di),(0,M.Z)(s))Rx(e,t,i,n,xx,r,o);else{var a=r?r(Cx(e,i),s,i+"",e,t,o):void 0;void 0===a&&(a=s),cx(e,i,a)}}),Al)}var Ox=xx;function Nx(e,t){return xp(mp(e,t,Sp),e+"")}var Px=Nx;function Dx(e,t,n){if(!(0,M.Z)(n))return!1;var r=typeof t;return!!("number"==r?gl(n)&&(0,ca.Z)(t,n.length):"string"==r&&t in n)&&(0,Ud.Z)(n[t],e)}var Ux=Dx;function Lx(e){return Px((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;s=e.length>3&&"function"==typeof s?(o--,s):void 0,i&&Ux(n[0],n[1],i)&&(s=o<3?void 0:s,o=1),t=Object(t);while(++r<o){var a=n[r];a&&e(t,a,r,s)}return t}))}var Bx=Lx,Mx=Bx((function(e,t,n){Ox(e,t,n)})),Fx=Mx,jx=n(4073),zx=1,$x=2;function Vx(e,t,n,r){var o=n.length,s=o,i=!r;if(null==e)return!s;e=Object(e);while(o--){var a=n[o];if(i&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}while(++o<s){a=n[o];var l=a[0],c=e[l],u=a[1];if(i&&a[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Di;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?yh(u,c,zx|$x,r,d):h))return!1}}return!0}var Hx=Vx;function Kx(e){return e===e&&!(0,M.Z)(e)}var qx=Kx;function Wx(e){var t=yl(e),n=t.length;while(n--){var r=t[n],o=e[r];t[n]=[r,o,qx(o)]}return t}var Yx=Wx;function Gx(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}var Zx=Gx;function Jx(e){var t=Yx(e);return 1==t.length&&t[0][2]?Zx(t[0][0],t[0][1]):function(n){return n===e||Hx(n,e,t)}}var Qx=Jx,Xx=n(9365),eO=1,tO=2;function nO(e,t){return(0,Xx.Z)(e)&&qx(t)?Zx((0,rp.Z)(e),t):function(n){var r=(0,qk.Z)(n,e);return void 0===r&&r===t?ap(n,e):yh(t,r,eO|tO)}}var rO=nO;function oO(e){return function(t){return null==t?void 0:t[e]}}var sO=oO;function iO(e){return function(t){return(0,Zh.Z)(t,e)}}var aO=iO;function lO(e){return(0,Xx.Z)(e)?sO((0,rp.Z)(e)):aO(e)}var cO=lO;function uO(e){return"function"==typeof e?e:null==e?Sp:"object"==typeof e?(0,Xi.Z)(e)?rO(e[0],e[1]):Qx(e):cO(e)}var dO=uO;function hO(e,t){return e&&px(e,t,yl)}var pO=hO;function fO(e,t){return function(n,r){if(null==n)return n;if(!gl(n))return e(n,r);var o=n.length,s=t?o:-1,i=Object(n);while(t?s--:++s<o)if(!1===r(i[s],s,i))break;return n}}var gO=fO,mO=gO(pO),yO=mO;function vO(e,t){var n=-1,r=gl(e)?Array(e.length):[];return yO(e,(function(e,o,s){r[++n]=t(e,o,s)})),r}var wO=vO;function bO(e,t){var n=(0,Xi.Z)(e)?jx.Z:wO;return n(e,dO(t,3))}var SO=bO;function _O(e,t){return kh(SO(e,t),1)}var EO=_O,kO=n(5573);const CO=function(e){var t;return null==(t=e.target)?void 0:t.closest("td")},IO=function(e,t,n,r,o){if(!t&&!r&&(!o||Array.isArray(o)&&!o.length))return e;n="string"===typeof n?"descending"===n?-1:1:n&&n<0?-1:1;const s=r?null:function(n,r){return o?(Array.isArray(o)||(o=[o]),o.map((t=>"string"===typeof t?(0,qk.Z)(n,t):t(n,r,e)))):("$key"!==t&&(0,c.Kn)(n)&&"$value"in n&&(n=n.$value),[(0,c.Kn)(n)?(0,qk.Z)(n,t):n])},i=function(e,t){if(r)return r(e.value,t.value);for(let n=0,r=e.key.length;n<r;n++){if(e.key[n]<t.key[n])return-1;if(e.key[n]>t.key[n])return 1}return 0};return e.map(((e,t)=>({value:e,index:t,key:s?s(e,t):null}))).sort(((e,t)=>{let r=i(e,t);return r||(r=e.index-t.index),r*+n})).map((e=>e.value))},AO=function(e,t){let n=null;return e.columns.forEach((e=>{e.id===t&&(n=e)})),n},TO=function(e,t){let n=null;for(let r=0;r<e.columns.length;r++){const o=e.columns[r];if(o.columnKey===t){n=o;break}}return n||(0,w._)("ElTable",`No column matching with column-key: ${t}`),n},RO=function(e,t,n){const r=(t.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return r?AO(e,r[0]):null},xO=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if("string"===typeof t){if(!t.includes("."))return`${e[t]}`;const n=t.split(".");let r=e;for(const e of n)r=r[e];return`${r}`}if("function"===typeof t)return t.call(null,e)},OO=function(e,t){const n={};return(e||[]).forEach(((e,r)=>{n[xO(e,t)]={row:e,index:r}})),n};function NO(e,t){const n={};let r;for(r in e)n[r]=e[r];for(r in t)if((0,c.RI)(t,r)){const e=t[r];"undefined"!==typeof e&&(n[r]=e)}return n}function PO(e){return""===e||void 0!==e&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function DO(e){return""===e||void 0!==e&&(e=PO(e),Number.isNaN(e)&&(e=80)),e}function UO(e){return"number"===typeof e?e:"string"===typeof e?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function LO(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}function BO(e,t,n){let r=!1;const o=e.indexOf(t),s=-1!==o,i=i=>{"add"===i?e.push(t):e.splice(o,1),r=!0,(0,c.kJ)(t.children)&&t.children.forEach((t=>{BO(e,t,null!=n?n:!s)}))};return(0,h.jn)(n)?n&&!s?i("add"):!n&&s&&i("remove"):i(s?"remove":"add"),r}function MO(e,t,n="children",r="hasChildren"){const o=e=>!(Array.isArray(e)&&e.length);function s(e,i,a){t(e,i,a),i.forEach((e=>{if(e[r])return void t(e,null,a+1);const i=e[n];o(i)||s(e,i,a+1)}))}e.forEach((e=>{if(e[r])return void t(e,null,0);const i=e[n];o(i)||s(e,i,0)}))}let FO;function jO(e,t,n,r,o){o=Fx({enterable:!0,showArrow:!0},o);const s=null==e?void 0:e.dataset.prefix,i=null==e?void 0:e.querySelector(`.${s}-scrollbar__wrap`);function a(){const t="light"===o.effect,i=document.createElement("div");return i.className=[`${s}-popper`,t?"is-light":"is-dark",o.popperClass||""].join(" "),n=kO(n),i.innerHTML=n,i.style.zIndex=String(r()),null==e||e.appendChild(i),i}function l(){const e=document.createElement("div");return e.className=`${s}-popper__arrow`,e}function c(){u&&u.update()}null==FO||FO(),FO=()=>{try{u&&u.destroy(),p&&(null==e||e.removeChild(p)),t.removeEventListener("mouseenter",d),t.removeEventListener("mouseleave",h),null==i||i.removeEventListener("scroll",FO),FO=void 0}catch(nB){}};let u=null,d=c,h=FO;o.enterable&&({onOpen:d,onClose:h}=Me({showAfter:o.showAfter,hideAfter:o.hideAfter,open:c,close:FO}));const p=a();p.onmouseenter=d,p.onmouseleave=h;const f=[];if(o.offset&&f.push({name:"offset",options:{offset:[0,o.offset]}}),o.showArrow){const e=p.appendChild(l());f.push({name:"arrow",options:{element:e,padding:10}})}const g=o.popperOptions||{};return u=Hn(t,p,{placement:o.placement||"top",strategy:"fixed",...g,modifiers:g.modifiers?f.concat(g.modifiers):f}),t.addEventListener("mouseenter",d),t.addEventListener("mouseleave",h),null==i||i.addEventListener("scroll",FO),u}function zO(e){return e.children?EO(e.children,zO):[e]}function $O(e,t){return e+t.colSpan}const VO=(e,t,n,r)=>{let o=0,s=e;const i=n.states.columns.value;if(r){const t=zO(r[e]),n=i.slice(0,i.indexOf(t[0]));o=n.reduce($O,0),s=o+t.reduce($O,0)-1}else o=e;let a;switch(t){case"left":s<n.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":o>=i.length-n.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:s<n.states.fixedLeafColumnsLength.value?a="left":o>=i.length-n.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:o,after:s}:{}},HO=(e,t,n,r,o,s=0)=>{const i=[],{direction:a,start:l,after:c}=VO(t,n,r,o);if(a){const t="left"===a;i.push(`${e}-fixed-column--${a}`),t&&c+s===r.states.fixedLeafColumnsLength.value-1?i.push("is-last-column"):t||l-s!==r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value||i.push("is-first-column")}return i};function KO(e,t){return e+(null===t.realWidth||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const qO=(e,t,n,r)=>{const{direction:o,start:s=0,after:i=0}=VO(e,t,n,r);if(!o)return;const a={},l="left"===o,c=n.states.columns.value;return l?a.left=c.slice(0,s).reduce(KO,0):a.right=c.slice(i+1).reverse().reduce(KO,0),a},WO=(e,t)=>{e&&(Number.isNaN(e[t])||(e[t]=`${e[t]}px`))};function YO(e){const t=(0,a.FN)(),n=(0,l.iH)(!1),r=(0,l.iH)([]),o=()=>{const t=e.data.value||[],o=e.rowKey.value;if(n.value)r.value=t.slice();else if(o){const e=OO(r.value,o);r.value=t.reduce(((t,n)=>{const r=xO(n,o),s=e[r];return s&&t.push(n),t}),[])}else r.value=[]},s=(e,n)=>{const o=BO(r.value,e,n);o&&t.emit("expand-change",e,r.value.slice())},i=n=>{t.store.assertRowKey();const o=e.data.value||[],s=e.rowKey.value,i=OO(o,s);r.value=n.reduce(((e,t)=>{const n=i[t];return n&&e.push(n.row),e}),[])},c=t=>{const n=e.rowKey.value;if(n){const e=OO(r.value,n);return!!e[xO(t,n)]}return r.value.includes(t)};return{updateExpandRows:o,toggleRowExpansion:s,setExpandRowKeys:i,isRowExpanded:c,states:{expandRows:r,defaultExpandAll:n}}}function GO(e){const t=(0,a.FN)(),n=(0,l.iH)(null),r=(0,l.iH)(null),o=e=>{t.store.assertRowKey(),n.value=e,i(e)},s=()=>{n.value=null},i=n=>{const{data:o,rowKey:s}=e;let i=null;s.value&&(i=((0,l.SU)(o)||[]).find((e=>xO(e,s.value)===n))),r.value=i,t.emit("current-change",r.value,null)},c=e=>{const n=r.value;if(e&&e!==n)return r.value=e,void t.emit("current-change",r.value,n);!e&&n&&(r.value=null,t.emit("current-change",null,n))},u=()=>{const o=e.rowKey.value,a=e.data.value||[],l=r.value;if(!a.includes(l)&&l){if(o){const e=xO(l,o);i(e)}else r.value=null;null===r.value&&t.emit("current-change",null,l)}else n.value&&(i(n.value),s())};return{setCurrentRowKey:o,restoreCurrentRowKey:s,setCurrentRowByKey:i,updateCurrentRow:c,updateCurrentRowData:u,states:{_currentRowKey:n,currentRow:r}}}function ZO(e){const t=(0,l.iH)([]),n=(0,l.iH)({}),r=(0,l.iH)(16),o=(0,l.iH)(!1),s=(0,l.iH)({}),i=(0,l.iH)("hasChildren"),c=(0,l.iH)("children"),u=(0,a.FN)(),d=(0,a.Fl)((()=>{if(!e.rowKey.value)return{};const t=e.data.value||[];return p(t)})),h=(0,a.Fl)((()=>{const t=e.rowKey.value,n=Object.keys(s.value),r={};return n.length?(n.forEach((e=>{if(s.value[e].length){const n={children:[]};s.value[e].forEach((e=>{const o=xO(e,t);n.children.push(o),e[i.value]&&!r[o]&&(r[o]={children:[]})})),r[e]=n}})),r):r})),p=t=>{const n=e.rowKey.value,r={};return MO(t,((e,t,s)=>{const i=xO(e,n);Array.isArray(t)?r[i]={children:t.map((e=>xO(e,n))),level:s}:o.value&&(r[i]={children:[],lazy:!0,level:s})}),c.value,i.value),r},f=(e=!1,r=(e=>null==(e=u.store)?void 0:e.states.defaultExpandAll.value)())=>{var s;const i=d.value,a=h.value,c=Object.keys(i),p={};if(c.length){const s=(0,l.SU)(n),u=[],d=(n,o)=>{if(e)return t.value?r||t.value.includes(o):!(!r&&!(null==n?void 0:n.expanded));{const e=r||t.value&&t.value.includes(o);return!(!(null==n?void 0:n.expanded)&&!e)}};c.forEach((e=>{const t=s[e],n={...i[e]};if(n.expanded=d(t,e),n.lazy){const{loaded:r=!1,loading:o=!1}=t||{};n.loaded=!!r,n.loading=!!o,u.push(e)}p[e]=n}));const h=Object.keys(a);o.value&&h.length&&u.length&&h.forEach((e=>{const t=s[e],n=a[e].children;if(u.includes(e)){if(0!==p[e].children.length)throw new Error("[ElTable]children must be an empty array.");p[e].children=n}else{const{loaded:r=!1,loading:o=!1}=t||{};p[e]={lazy:!0,loaded:!!r,loading:!!o,expanded:d(t,e),children:n,level:""}}}))}n.value=p,null==(s=u.store)||s.updateTableScrollY()};(0,a.YP)((()=>t.value),(()=>{f(!0)})),(0,a.YP)((()=>d.value),(()=>{f()})),(0,a.YP)((()=>h.value),(()=>{f()}));const g=e=>{t.value=e,f()},m=(t,r)=>{u.store.assertRowKey();const o=e.rowKey.value,s=xO(t,o),i=s&&n.value[s];if(s&&i&&"expanded"in i){const e=i.expanded;r="undefined"===typeof r?!i.expanded:r,n.value[s].expanded=r,e!==r&&u.emit("expand-change",t,r),u.store.updateTableScrollY()}},y=t=>{u.store.assertRowKey();const r=e.rowKey.value,s=xO(t,r),i=n.value[s];o.value&&i&&"loaded"in i&&!i.loaded?v(t,s,i):m(t,void 0)},v=(e,t,r)=>{const{load:o}=u.props;o&&!n.value[t].loaded&&(n.value[t].loading=!0,o(e,r,(r=>{if(!Array.isArray(r))throw new TypeError("[ElTable] data must be an array");n.value[t].loading=!1,n.value[t].loaded=!0,n.value[t].expanded=!0,r.length&&(s.value[t]=r),u.emit("expand-change",e,!0)})))};return{loadData:v,loadOrToggle:y,toggleTreeExpansion:m,updateTreeExpandKeys:g,updateTreeData:f,normalize:p,states:{expandRowKeys:t,treeData:n,indent:r,lazy:o,lazyTreeNodeMap:s,lazyColumnIdentifier:i,childrenColumnName:c}}}const JO=(e,t)=>{const n=t.sortingColumn;return n&&"string"!==typeof n.sortable?IO(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy):e},QO=e=>{const t=[];return e.forEach((e=>{e.children?t.push.apply(t,QO(e.children)):t.push(e)})),t};function XO(){var e;const t=(0,a.FN)(),{size:n}=(0,l.BK)(null==(e=t.proxy)?void 0:e.$props),r=(0,l.iH)(null),o=(0,l.iH)([]),s=(0,l.iH)([]),i=(0,l.iH)(!1),u=(0,l.iH)([]),d=(0,l.iH)([]),h=(0,l.iH)([]),p=(0,l.iH)([]),f=(0,l.iH)([]),g=(0,l.iH)([]),m=(0,l.iH)([]),y=(0,l.iH)([]),v=[],w=(0,l.iH)(0),b=(0,l.iH)(0),S=(0,l.iH)(0),_=(0,l.iH)(!1),E=(0,l.iH)([]),k=(0,l.iH)(!1),C=(0,l.iH)(!1),I=(0,l.iH)(null),A=(0,l.iH)({}),T=(0,l.iH)(null),R=(0,l.iH)(null),x=(0,l.iH)(null),O=(0,l.iH)(null),N=(0,l.iH)(null);(0,a.YP)(o,(()=>t.state&&L(!1)),{deep:!0});const P=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},D=e=>{var t;null==(t=e.children)||t.forEach((t=>{t.fixed=e.fixed,D(t)}))},U=()=>{u.value.forEach((e=>{D(e)})),p.value=u.value.filter((e=>!0===e.fixed||"left"===e.fixed)),f.value=u.value.filter((e=>"right"===e.fixed)),p.value.length>0&&u.value[0]&&"selection"===u.value[0].type&&!u.value[0].fixed&&(u.value[0].fixed=!0,p.value.unshift(u.value[0]));const e=u.value.filter((e=>!e.fixed));d.value=[].concat(p.value).concat(e).concat(f.value);const t=QO(e),n=QO(p.value),r=QO(f.value);w.value=t.length,b.value=n.length,S.value=r.length,h.value=[].concat(n).concat(t).concat(r),i.value=p.value.length>0||f.value.length>0},L=(e,n=!1)=>{e&&U(),n?t.state.doLayout():t.state.debouncedUpdateLayout()},B=e=>E.value.includes(e),M=()=>{_.value=!1;const e=E.value;e.length&&(E.value=[],t.emit("selection-change",[]))},F=()=>{let e;if(r.value){e=[];const t=OO(E.value,r.value),n=OO(o.value,r.value);for(const r in t)(0,c.RI)(t,r)&&!n[r]&&e.push(t[r].row)}else e=E.value.filter((e=>!o.value.includes(e)));if(e.length){const n=E.value.filter((t=>!e.includes(t)));E.value=n,t.emit("selection-change",n.slice())}},j=()=>(E.value||[]).slice(),z=(e,n=undefined,r=!0)=>{const o=BO(E.value,e,n);if(o){const n=(E.value||[]).slice();r&&t.emit("select",n,e),t.emit("selection-change",n)}},$=()=>{var e,n;const r=C.value?!_.value:!(_.value||E.value.length);_.value=r;let s=!1,i=0;const a=null==(n=null==(e=null==t?void 0:t.store)?void 0:e.states)?void 0:n.rowKey.value;o.value.forEach(((e,t)=>{const n=t+i;I.value?I.value.call(null,e,n)&&BO(E.value,e,r)&&(s=!0):BO(E.value,e,r)&&(s=!0),i+=K(xO(e,a))})),s&&t.emit("selection-change",E.value?E.value.slice():[]),t.emit("select-all",E.value)},V=()=>{const e=OO(E.value,r.value);o.value.forEach((t=>{const n=xO(t,r.value),o=e[n];o&&(E.value[o.index]=t)}))},H=()=>{var e,n,s;if(0===(null==(e=o.value)?void 0:e.length))return void(_.value=!1);let i;r.value&&(i=OO(E.value,r.value));const a=function(e){return i?!!i[xO(e,r.value)]:E.value.includes(e)};let l=!0,c=0,u=0;for(let r=0,d=(o.value||[]).length;r<d;r++){const e=null==(s=null==(n=null==t?void 0:t.store)?void 0:n.states)?void 0:s.rowKey.value,i=r+u,d=o.value[r],h=I.value&&I.value.call(null,d,i);if(a(d))c++;else if(!I.value||h){l=!1;break}u+=K(xO(d,e))}0===c&&(l=!1),_.value=l},K=e=>{var n;if(!t||!t.store)return 0;const{treeData:r}=t.store.states;let o=0;const s=null==(n=r.value[e])?void 0:n.children;return s&&(o+=s.length,s.forEach((e=>{o+=K(e)}))),o},q=(e,t)=>{Array.isArray(e)||(e=[e]);const n={};return e.forEach((e=>{A.value[e.id]=t,n[e.columnKey||e.id]=t})),n},W=(e,t,n)=>{R.value&&R.value!==e&&(R.value.order=null),R.value=e,x.value=t,O.value=n},Y=()=>{let e=(0,l.SU)(s);Object.keys(A.value).forEach((t=>{const n=A.value[t];if(!n||0===n.length)return;const r=AO({columns:h.value},t);r&&r.filterMethod&&(e=e.filter((e=>n.some((t=>r.filterMethod.call(null,t,e,r))))))})),T.value=e},G=()=>{o.value=JO(T.value,{sortingColumn:R.value,sortProp:x.value,sortOrder:O.value})},Z=(e=undefined)=>{e&&e.filter||Y(),G()},J=e=>{const{tableHeaderRef:n}=t.refs;if(!n)return;const r=Object.assign({},n.filterPanels),o=Object.keys(r);if(o.length)if("string"===typeof e&&(e=[e]),Array.isArray(e)){const n=e.map((e=>TO({columns:h.value},e)));o.forEach((e=>{const t=n.find((t=>t.id===e));t&&(t.filteredValue=[])})),t.store.commit("filterChange",{column:n,values:[],silent:!0,multi:!0})}else o.forEach((e=>{const t=h.value.find((t=>t.id===e));t&&(t.filteredValue=[])})),A.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},Q=()=>{R.value&&(W(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:X,toggleRowExpansion:ee,updateExpandRows:te,states:ne,isRowExpanded:re}=YO({data:o,rowKey:r}),{updateTreeExpandKeys:oe,toggleTreeExpansion:se,updateTreeData:ie,loadOrToggle:ae,states:le}=ZO({data:o,rowKey:r}),{updateCurrentRowData:ce,updateCurrentRow:ue,setCurrentRowKey:de,states:he}=GO({data:o,rowKey:r}),pe=e=>{X(e),oe(e)},fe=(e,t)=>{const n=h.value.some((({type:e})=>"expand"===e));n?ee(e,t):se(e,t)};return{assertRowKey:P,updateColumns:U,scheduleLayout:L,isSelected:B,clearSelection:M,cleanSelection:F,getSelectionRows:j,toggleRowSelection:z,_toggleAllSelection:$,toggleAllSelection:null,updateSelectionByRowKey:V,updateAllSelected:H,updateFilters:q,updateCurrentRow:ue,updateSort:W,execFilter:Y,execSort:G,execQuery:Z,clearFilter:J,clearSort:Q,toggleRowExpansion:ee,setExpandRowKeysAdapter:pe,setCurrentRowKey:de,toggleRowExpansionAdapter:fe,isRowExpanded:re,updateExpandRows:te,updateCurrentRowData:ce,loadOrToggle:ae,updateTreeData:ie,states:{tableSize:n,rowKey:r,data:o,_data:s,isComplex:i,_columns:u,originColumns:d,columns:h,fixedColumns:p,rightFixedColumns:f,leafColumns:g,fixedLeafColumns:m,rightFixedLeafColumns:y,updateOrderFns:v,leafColumnsLength:w,fixedLeafColumnsLength:b,rightFixedLeafColumnsLength:S,isAllSelected:_,selection:E,reserveSelection:k,selectOnIndeterminate:C,selectable:I,filters:A,filteredData:T,sortingColumn:R,sortProp:x,sortOrder:O,hoverRow:N,...ne,...le,...he}}}function eN(e,t){return e.map((e=>{var n;return e.id===t.id?t:((null==(n=e.children)?void 0:n.length)&&(e.children=eN(e.children,t)),e)}))}function tN(e){e.forEach((e=>{var t,n;e.no=null==(t=e.getColumnIndex)?void 0:t.call(e),(null==(n=e.children)?void 0:n.length)&&tN(e.children)})),e.sort(((e,t)=>e.no-t.no))}function nN(){const e=(0,a.FN)(),t=XO(),n=(0,y.s3)("table"),r={setData(t,n){const r=(0,l.SU)(t._data)!==n;t.data.value=n,t._data.value=n,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),(0,l.SU)(t.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):r?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(t,n,r,o){const s=(0,l.SU)(t._columns);let i=[];r?(r&&!r.children&&(r.children=[]),r.children.push(n),i=eN(s,r)):(s.push(n),i=s),tN(i),t._columns.value=i,t.updateOrderFns.push(o),"selection"===n.type&&(t.selectable.value=n.selectable,t.reserveSelection.value=n.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(t,n){var r;const o=null==(r=n.getColumnIndex)?void 0:r.call(n);o!==n.no&&(tN(t._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(t,n,r,o){const s=(0,l.SU)(t._columns)||[];if(r)r.children.splice(r.children.findIndex((e=>e.id===n.id)),1),(0,a.Y3)((()=>{var e;0===(null==(e=r.children)?void 0:e.length)&&delete r.children})),t._columns.value=eN(s,r);else{const e=s.indexOf(n);e>-1&&(s.splice(e,1),t._columns.value=s)}const i=t.updateOrderFns.indexOf(o);i>-1&&t.updateOrderFns.splice(i,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(t,n){const{prop:r,order:o,init:s}=n;if(r){const n=(0,l.SU)(t.columns).find((e=>e.property===r));n&&(n.order=o,e.store.updateSort(n,r,o),e.store.commit("changeSortCondition",{init:s}))}},changeSortCondition(t,n){const{sortingColumn:r,sortProp:o,sortOrder:s}=t,i=(0,l.SU)(r),a=(0,l.SU)(o),c=(0,l.SU)(s);null===c&&(t.sortingColumn.value=null,t.sortProp.value=null);const u={filter:!0};e.store.execQuery(u),n&&(n.silent||n.init)||e.emit("sort-change",{column:i,prop:a,order:c}),e.store.updateTableScrollY()},filterChange(t,n){const{column:r,values:o,silent:s}=n,i=e.store.updateFilters(r,o);e.store.execQuery(),s||e.emit("filter-change",i),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(t,n){e.store.toggleRowSelection(n),e.store.updateAllSelected()},setHoverRow(e,t){e.hoverRow.value=t},setCurrentRow(t,n){e.store.updateCurrentRow(n)}},o=function(t,...n){const r=e.store.mutations;if(!r[t])throw new Error(`Action not found: ${t}`);r[t].apply(e,[e.store.states].concat(n))},s=function(){(0,a.Y3)((()=>e.layout.updateScrollY.apply(e.layout)))};return{ns:n,...t,mutations:r,commit:o,updateTableScrollY:s}}const rN={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data",["treeProps.hasChildren"]:{key:"lazyColumnIdentifier",default:"hasChildren"},["treeProps.children"]:{key:"childrenColumnName",default:"children"}};function oN(e,t){if(!e)throw new Error("Table is required.");const n=nN();return n.toggleAllSelection=ie(n._toggleAllSelection,10),Object.keys(rN).forEach((e=>{iN(aN(t,e),e,n)})),sN(n,t),n}function sN(e,t){Object.keys(rN).forEach((n=>{(0,a.YP)((()=>aN(t,n)),(t=>{iN(t,n,e)}))}))}function iN(e,t,n){let r=e,o=rN[t];"object"===typeof rN[t]&&(o=o.key,r=r||rN[t].default),n.states[o].value=r}function aN(e,t){if(t.includes(".")){const n=t.split(".");let r=e;return n.forEach((e=>{r=r[e]})),r}return e[t]}class lN{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=(0,l.iH)(null),this.scrollX=(0,l.iH)(!1),this.scrollY=(0,l.iH)(!1),this.bodyWidth=(0,l.iH)(null),this.fixedWidth=(0,l.iH)(null),this.rightFixedWidth=(0,l.iH)(null),this.gutterWidth=0;for(const t in e)(0,c.RI)(e,t)&&((0,l.dq)(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){const e=this.height.value;if(null===e)return!1;const t=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(null==t?void 0:t.wrapRef)){let e=!0;const n=this.scrollY.value;return e=t.wrapRef.scrollHeight>t.wrapRef.clientHeight,this.scrollY.value=e,n!==e}return!1}setHeight(e,t="height"){if(!h.C5)return;const n=this.table.vnode.el;if(e=UO(e),this.height.value=Number(e),!n&&(e||0===e))return(0,a.Y3)((()=>this.setHeight(e,t)));"number"===typeof e?(n.style[t]=`${e}px`,this.updateElsHeight()):"string"===typeof e&&(n.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[],t=this.table.store.states.columns.value;return t.forEach((t=>{t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)})),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;while("DIV"!==t.tagName){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!h.C5)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let n=0;const r=this.getFlattenColumns(),o=r.filter((e=>"number"!==typeof e.width));if(r.forEach((e=>{"number"===typeof e.width&&e.realWidth&&(e.realWidth=null)})),o.length>0&&e){if(r.forEach((e=>{n+=Number(e.width||e.minWidth||80)})),n<=t){this.scrollX.value=!1;const e=t-n;if(1===o.length)o[0].realWidth=Number(o[0].minWidth||80)+e;else{const t=o.reduce(((e,t)=>e+Number(t.minWidth||80)),0),n=e/t;let r=0;o.forEach(((e,t)=>{if(0===t)return;const o=Math.floor(Number(e.minWidth||80)*n);r+=o,e.realWidth=Number(e.minWidth||80)+o})),o[0].realWidth=Number(o[0].minWidth||80)+e-r}}else this.scrollX.value=!0,o.forEach((e=>{e.realWidth=Number(e.minWidth)}));this.bodyWidth.value=Math.max(n,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else r.forEach((e=>{e.width||e.minWidth?e.realWidth=Number(e.width||e.minWidth):e.realWidth=80,n+=e.realWidth})),this.scrollX.value=n>t,this.bodyWidth.value=n;const s=this.store.states.fixedColumns.value;if(s.length>0){let e=0;s.forEach((t=>{e+=Number(t.realWidth||t.width)})),this.fixedWidth.value=e}const i=this.store.states.rightFixedColumns.value;if(i.length>0){let e=0;i.forEach((t=>{e+=Number(t.realWidth||t.width)})),this.rightFixedWidth.value=e}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)}notifyObservers(e){const t=this.observers;t.forEach((t=>{var n,r;switch(e){case"columns":null==(n=t.state)||n.onColumnsChange(this);break;case"scrollable":null==(r=t.state)||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}}))}}const{CheckboxGroup:cN}=jp,uN=(0,a.aZ)({name:"ElTableFilterPanel",components:{ElCheckbox:jp,ElCheckboxGroup:cN,ElScrollbar:Ie,ElTooltip:ho,ElIcon:T.gn,ArrowDown:ae.K5e,ArrowUp:ae.a2Z},directives:{ClickOutside:ng},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=(0,a.FN)(),{t:n}=(0,_s.bU)(),r=(0,y.s3)("table-filter"),o=null==t?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const s=(0,l.iH)(!1),i=(0,l.iH)(null),c=(0,a.Fl)((()=>e.column&&e.column.filters)),u=(0,a.Fl)({get:()=>{var t;return((null==(t=e.column)?void 0:t.filteredValue)||[])[0]},set:e=>{d.value&&("undefined"!==typeof e&&null!==e?d.value.splice(0,1,e):d.value.splice(0,1))}}),d=(0,a.Fl)({get(){return e.column&&e.column.filteredValue||[]},set(t){e.column&&e.upDataColumn("filteredValue",t)}}),h=(0,a.Fl)((()=>!e.column||e.column.filterMultiple)),p=e=>e.value===u.value,f=()=>{s.value=!1},g=e=>{e.stopPropagation(),s.value=!s.value},m=()=>{s.value=!1},v=()=>{S(d.value),f()},w=()=>{d.value=[],S(d.value),f()},b=e=>{u.value=e,S("undefined"!==typeof e&&null!==e?d.value:[]),f()},S=t=>{e.store.commit("filterChange",{column:e.column,values:t}),e.store.updateAllSelected()};(0,a.YP)(s,(t=>{e.column&&e.upDataColumn("filterOpened",t)}),{immediate:!0});const _=(0,a.Fl)((()=>{var e,t;return null==(t=null==(e=i.value)?void 0:e.popperRef)?void 0:t.contentRef}));return{tooltipVisible:s,multiple:h,filteredValue:d,filterValue:u,filters:c,handleConfirm:v,handleReset:w,handleSelect:b,isActive:p,t:n,ns:r,showFilterPanel:g,hideFilterPanel:m,popperPaneRef:_,tooltip:i}}}),dN={key:0},hN=["disabled"],pN=["label","onClick"];function fN(e,t,n,r,o,s){const i=(0,a.up)("el-checkbox"),l=(0,a.up)("el-checkbox-group"),u=(0,a.up)("el-scrollbar"),d=(0,a.up)("arrow-up"),h=(0,a.up)("arrow-down"),p=(0,a.up)("el-icon"),f=(0,a.up)("el-tooltip"),g=(0,a.Q2)("click-outside");return(0,a.wg)(),(0,a.j4)(f,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.ns.b(),persistent:""},{content:(0,a.w5)((()=>[e.multiple?((0,a.wg)(),(0,a.iD)("div",dN,[(0,a._)("div",{class:(0,c.C_)(e.ns.e("content"))},[(0,a.Wm)(u,{"wrap-class":e.ns.e("wrap")},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:e.filteredValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filteredValue=t),class:(0,c.C_)(e.ns.e("checkbox-group"))},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filters,(e=>((0,a.wg)(),(0,a.j4)(i,{key:e.value,label:e.value},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.text),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","class"])])),_:1},8,["wrap-class"])],2),(0,a._)("div",{class:(0,c.C_)(e.ns.e("bottom"))},[(0,a._)("button",{class:(0,c.C_)({[e.ns.is("disabled")]:0===e.filteredValue.length}),disabled:0===e.filteredValue.length,type:"button",onClick:t[1]||(t[1]=(...t)=>e.handleConfirm&&e.handleConfirm(...t))},(0,c.zw)(e.t("el.table.confirmFilter")),11,hN),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=(...t)=>e.handleReset&&e.handleReset(...t))},(0,c.zw)(e.t("el.table.resetFilter")),1)],2)])):((0,a.wg)(),(0,a.iD)("ul",{key:1,class:(0,c.C_)(e.ns.e("list"))},[(0,a._)("li",{class:(0,c.C_)([e.ns.e("list-item"),{[e.ns.is("active")]:void 0===e.filterValue||null===e.filterValue}]),onClick:t[3]||(t[3]=t=>e.handleSelect(null))},(0,c.zw)(e.t("el.table.clearFilter")),3),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filters,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.value,class:(0,c.C_)([e.ns.e("list-item"),e.ns.is("active",e.isActive(t))]),label:t.value,onClick:n=>e.handleSelect(t.value)},(0,c.zw)(t.text),11,pN)))),128))],2))])),default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,c.C_)([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:t[4]||(t[4]=(...t)=>e.showFilterPanel&&e.showFilterPanel(...t))},[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[e.column.filterOpened?((0,a.wg)(),(0,a.j4)(d,{key:0})):((0,a.wg)(),(0,a.j4)(h,{key:1}))])),_:1})],2)),[[g,e.hideFilterPanel,e.popperPaneRef]])])),_:1},8,["visible","placement","popper-class"])}var gN=(0,m.Z)(uN,[["render",fN],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function mN(e){const t=(0,a.FN)();(0,a.wF)((()=>{n.value.addObserver(t)})),(0,a.bv)((()=>{r(n.value),o(n.value)})),(0,a.ic)((()=>{r(n.value),o(n.value)})),(0,a.Ah)((()=>{n.value.removeObserver(t)}));const n=(0,a.Fl)((()=>{const t=e.layout;if(!t)throw new Error("Can not find table layout.");return t})),r=t=>{var n;const r=(null==(n=e.vnode.el)?void 0:n.querySelectorAll("colgroup > col"))||[];if(!r.length)return;const o=t.getFlattenColumns(),s={};o.forEach((e=>{s[e.id]=e}));for(let e=0,i=r.length;e<i;e++){const t=r[e],n=t.getAttribute("name"),o=s[n];o&&t.setAttribute("width",o.realWidth||o.width)}},o=t=>{var n,r;const o=(null==(n=e.vnode.el)?void 0:n.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let e=0,i=o.length;e<i;e++){const n=o[e];n.setAttribute("width",t.scrollY.value?t.gutterWidth:"0")}const s=(null==(r=e.vnode.el)?void 0:r.querySelectorAll("th.gutter"))||[];for(let e=0,i=s.length;e<i;e++){const n=s[e];n.style.width=t.scrollY.value?`${t.gutterWidth}px`:"0",n.style.display=t.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:r,onScrollableChange:o}}const yN=Symbol("ElTable");function vN(e,t){const n=(0,a.FN)(),r=(0,a.f3)(yN),o=e=>{e.stopPropagation()},s=(e,t)=>{!t.filters&&t.sortable?y(e,t,!1):t.filterable&&!t.sortable&&o(e),null==r||r.emit("header-click",t,e)},i=(e,t)=>{null==r||r.emit("header-contextmenu",t,e)},c=(0,l.iH)(null),u=(0,l.iH)(!1),d=(0,l.iH)({}),p=(o,s)=>{if(h.C5&&!(s.children&&s.children.length>0)&&c.value&&e.border){u.value=!0;const i=r;t("set-drag-visible",!0);const a=null==i?void 0:i.vnode.el,l=a.getBoundingClientRect().left,h=n.vnode.el.querySelector(`th.${s.id}`),p=h.getBoundingClientRect(),f=p.left-l+30;(0,v.cn)(h,"noclick"),d.value={startMouseLeft:o.clientX,startLeft:p.right-l,startColumnLeft:p.left-l,tableLeft:l};const g=null==i?void 0:i.refs.resizeProxy;g.style.left=`${d.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const m=e=>{const t=e.clientX-d.value.startMouseLeft,n=d.value.startLeft+t;g.style.left=`${Math.max(f,n)}px`},y=()=>{if(u.value){const{startColumnLeft:n,startLeft:r}=d.value,a=Number.parseInt(g.style.left,10),l=a-n;s.width=s.realWidth=l,null==i||i.emit("header-dragend",s.width,r-n,s,o),requestAnimationFrame((()=>{e.store.scheduleLayout(!1,!0)})),document.body.style.cursor="",u.value=!1,c.value=null,d.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y),document.onselectstart=null,document.ondragstart=null,setTimeout((()=>{(0,v.IV)(h,"noclick")}),0)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",y)}},f=(t,n)=>{var r;if(n.children&&n.children.length>0)return;const o=null==(r=t.target)?void 0:r.closest("th");if(n&&n.resizable&&!u.value&&e.border){const e=o.getBoundingClientRect(),r=document.body.style;e.width>12&&e.right-t.pageX<8?(r.cursor="col-resize",(0,v.pv)(o,"is-sortable")&&(o.style.cursor="col-resize"),c.value=n):u.value||(r.cursor="",(0,v.pv)(o,"is-sortable")&&(o.style.cursor="pointer"),c.value=null)}},g=()=>{h.C5&&(document.body.style.cursor="")},m=({order:e,sortOrders:t})=>{if(""===e)return t[0];const n=t.indexOf(e||null);return t[n>t.length-2?0:n+1]},y=(t,n,o)=>{var s;t.stopPropagation();const i=n.order===o?null:o||m(n),a=null==(s=t.target)?void 0:s.closest("th");if(a&&(0,v.pv)(a,"noclick"))return void(0,v.IV)(a,"noclick");if(!n.sortable)return;const l=e.store.states;let c,u=l.sortProp.value;const d=l.sortingColumn.value;(d!==n||d===n&&null===d.order)&&(d&&(d.order=null),l.sortingColumn.value=n,u=n.property),c=n.order=i||null,l.sortProp.value=u,l.sortOrder.value=c,null==r||r.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:i,handleMouseDown:p,handleMouseMove:f,handleMouseOut:g,handleSortClick:y,handleFilterClick:o}}function wN(e){const t=(0,a.f3)(yN),n=(0,y.s3)("table"),r=e=>{const n=null==t?void 0:t.props.headerRowStyle;return"function"===typeof n?n.call(null,{rowIndex:e}):n},o=e=>{const n=[],r=null==t?void 0:t.props.headerRowClassName;return"string"===typeof r?n.push(r):"function"===typeof r&&n.push(r.call(null,{rowIndex:e})),n.join(" ")},s=(n,r,o,s)=>{var i;let a=null!=(i=null==t?void 0:t.props.headerCellStyle)?i:{};"function"===typeof a&&(a=a.call(null,{rowIndex:n,columnIndex:r,row:o,column:s}));const l=qO(r,s.fixed,e.store,o);return WO(l,"left"),WO(l,"right"),Object.assign({},a,l)},i=(r,o,s,i)=>{const a=HO(n.b(),o,i.fixed,e.store,s),l=[i.id,i.order,i.headerAlign,i.className,i.labelClassName,...a];i.children||l.push("is-leaf"),i.sortable&&l.push("is-sortable");const c=null==t?void 0:t.props.headerCellClassName;return"string"===typeof c?l.push(c):"function"===typeof c&&l.push(c.call(null,{rowIndex:r,columnIndex:o,row:s,column:i})),l.push(n.e("cell")),l.filter((e=>Boolean(e))).join(" ")};return{getHeaderRowStyle:r,getHeaderRowClass:o,getHeaderCellStyle:s,getHeaderCellClass:i}}const bN=e=>{const t=[];return e.forEach((e=>{e.children?(t.push(e),t.push.apply(t,bN(e.children))):t.push(e)})),t},SN=e=>{let t=1;const n=(e,r)=>{if(r&&(e.level=r.level+1,t<e.level&&(t=e.level)),e.children){let t=0;e.children.forEach((r=>{n(r,e),t+=r.colSpan})),e.colSpan=t}else e.colSpan=1};e.forEach((e=>{e.level=1,n(e,void 0)}));const r=[];for(let s=0;s<t;s++)r.push([]);const o=bN(e);return o.forEach((e=>{e.children?(e.rowSpan=1,e.children.forEach((e=>e.isSubColumn=!0))):e.rowSpan=t-e.level+1,r[e.level-1].push(e)})),r};function _N(e){const t=(0,a.f3)(yN),n=(0,a.Fl)((()=>SN(e.store.states.originColumns.value))),r=(0,a.Fl)((()=>{const e=n.value.length>1;return e&&t&&(t.state.isGroup.value=!0),e})),o=e=>{e.stopPropagation(),null==t||t.store.commit("toggleAllSelection")};return{isGroup:r,toggleAllSelection:o,columnRows:n}}var EN=(0,a.aZ)({name:"ElTableHeader",components:{ElCheckbox:jp},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const n=(0,a.FN)(),r=(0,a.f3)(yN),o=(0,y.s3)("table"),s=(0,l.iH)({}),{onColumnsChange:i,onScrollableChange:c}=mN(r);(0,a.bv)((async()=>{await(0,a.Y3)(),await(0,a.Y3)();const{prop:t,order:n}=e.defaultSort;null==r||r.store.commit("sort",{prop:t,order:n,init:!0})}));const{handleHeaderClick:u,handleHeaderContextMenu:d,handleMouseDown:h,handleMouseMove:p,handleMouseOut:f,handleSortClick:g,handleFilterClick:m}=vN(e,t),{getHeaderRowStyle:v,getHeaderRowClass:w,getHeaderCellStyle:b,getHeaderCellClass:S}=wN(e),{isGroup:_,toggleAllSelection:E,columnRows:k}=_N(e);return n.state={onColumnsChange:i,onScrollableChange:c},n.filterPanels=s,{ns:o,filterPanels:s,onColumnsChange:i,onScrollableChange:c,columnRows:k,getHeaderRowClass:w,getHeaderRowStyle:v,getHeaderCellClass:S,getHeaderCellStyle:b,handleHeaderClick:u,handleHeaderContextMenu:d,handleMouseDown:h,handleMouseMove:p,handleMouseOut:f,handleSortClick:g,handleFilterClick:m,isGroup:_,toggleAllSelection:E}},render(){const{ns:e,isGroup:t,columnRows:n,getHeaderCellStyle:r,getHeaderCellClass:o,getHeaderRowClass:s,getHeaderRowStyle:i,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleSortClick:h,handleMouseOut:p,store:f,$parent:g}=this;let m=1;return(0,a.h)("thead",{class:{[e.is("group")]:t}},n.map(((e,t)=>(0,a.h)("tr",{class:s(t),key:t,style:i(t)},e.map(((n,s)=>(n.rowSpan>m&&(m=n.rowSpan),(0,a.h)("th",{class:o(t,s,e,n),colspan:n.colSpan,key:`${n.id}-thead`,rowspan:n.rowSpan,style:r(t,s,e,n),onClick:e=>l(e,n),onContextmenu:e=>c(e,n),onMousedown:e=>u(e,n),onMousemove:e=>d(e,n),onMouseout:p},[(0,a.h)("div",{class:["cell",n.filteredValue&&n.filteredValue.length>0?"highlight":""]},[n.renderHeader?n.renderHeader({column:n,$index:s,store:f,_self:g}):n.label,n.sortable&&(0,a.h)("span",{onClick:e=>h(e,n),class:"caret-wrapper"},[(0,a.h)("i",{onClick:e=>h(e,n,"ascending"),class:"sort-caret ascending"}),(0,a.h)("i",{onClick:e=>h(e,n,"descending"),class:"sort-caret descending"})]),n.filterable&&(0,a.h)(gN,{store:f,placement:n.filterPlacement||"bottom-start",column:n,upDataColumn:(e,t)=>{n[e]=t}})])]))))))))}});function kN(e){const t=(0,a.f3)(yN),n=(0,l.iH)(""),r=(0,l.iH)((0,a.h)("div")),{nextZIndex:o}=(0,Wr.Cn)(),s=(n,r,o)=>{var s;const i=t,a=CO(n);let l;const c=null==(s=null==i?void 0:i.vnode.el)?void 0:s.dataset.prefix;a&&(l=RO({columns:e.store.states.columns.value},a,c),l&&(null==i||i.emit(`cell-${o}`,r,l,a,n))),null==i||i.emit(`row-${o}`,r,l,n)},i=(e,t)=>{s(e,t,"dblclick")},c=(t,n)=>{e.store.commit("setCurrentRow",n),s(t,n,"click")},u=(e,t)=>{s(e,t,"contextmenu")},d=ie((t=>{e.store.commit("setHoverRow",t)}),30),h=ie((()=>{e.store.commit("setHoverRow",null)}),30),p=(n,r,s)=>{var i;const a=t,l=CO(n),c=null==(i=null==a?void 0:a.vnode.el)?void 0:i.dataset.prefix;if(l){const t=RO({columns:e.store.states.columns.value},l,c),o=a.hoverState={cell:l,column:t,row:r};null==a||a.emit("cell-mouse-enter",o.row,o.column,o.cell,n)}if(!s)return;const u=n.target.querySelector(".cell");if(!(0,v.pv)(u,`${c}-tooltip`)||!u.childNodes.length)return;const d=document.createRange();d.setStart(u,0),d.setEnd(u,u.childNodes.length);const h=Math.round(d.getBoundingClientRect().width),p=(Number.parseInt((0,v.C2)(u,"paddingLeft"),10)||0)+(Number.parseInt((0,v.C2)(u,"paddingRight"),10)||0);(h+p>u.offsetWidth||u.scrollWidth>u.offsetWidth)&&jO(null==t?void 0:t.refs.tableWrapper,l,l.innerText||l.textContent,o,s)},f=e=>{const n=CO(e);if(!n)return;const r=null==t?void 0:t.hoverState;null==t||t.emit("cell-mouse-leave",null==r?void 0:r.row,null==r?void 0:r.column,null==r?void 0:r.cell,e)};return{handleDoubleClick:i,handleClick:c,handleContextMenu:u,handleMouseEnter:d,handleMouseLeave:h,handleCellMouseEnter:p,handleCellMouseLeave:f,tooltipContent:n,tooltipTrigger:r}}function CN(e){const t=(0,a.f3)(yN),n=(0,y.s3)("table"),r=(e,n)=>{const r=null==t?void 0:t.props.rowStyle;return"function"===typeof r?r.call(null,{row:e,rowIndex:n}):r||null},o=(r,o)=>{const s=[n.e("row")];(null==t?void 0:t.props.highlightCurrentRow)&&r===e.store.states.currentRow.value&&s.push("current-row"),e.stripe&&o%2===1&&s.push(n.em("row","striped"));const i=null==t?void 0:t.props.rowClassName;return"string"===typeof i?s.push(i):"function"===typeof i&&s.push(i.call(null,{row:r,rowIndex:o})),s},s=(n,r,o,s)=>{const i=null==t?void 0:t.props.cellStyle;let a=null!=i?i:{};"function"===typeof i&&(a=i.call(null,{rowIndex:n,columnIndex:r,row:o,column:s}));const l=qO(r,null==e?void 0:e.fixed,e.store);return WO(l,"left"),WO(l,"right"),Object.assign({},a,l)},i=(r,o,s,i,a)=>{const l=HO(n.b(),o,null==e?void 0:e.fixed,e.store,void 0,a),c=[i.id,i.align,i.className,...l],u=null==t?void 0:t.props.cellClassName;return"string"===typeof u?c.push(u):"function"===typeof u&&c.push(u.call(null,{rowIndex:r,columnIndex:o,row:s,column:i})),c.push(n.e("cell")),c.filter((e=>Boolean(e))).join(" ")},l=(e,n,r,o)=>{let s=1,i=1;const a=null==t?void 0:t.props.spanMethod;if("function"===typeof a){const t=a({row:e,column:n,rowIndex:r,columnIndex:o});Array.isArray(t)?(s=t[0],i=t[1]):"object"===typeof t&&(s=t.rowspan,i=t.colspan)}return{rowspan:s,colspan:i}},c=(e,t,n)=>{if(t<1)return e[n].realWidth;const r=e.map((({realWidth:e,width:t})=>e||t)).slice(n,n+t);return Number(r.reduce(((e,t)=>Number(e)+Number(t)),-1))};return{getRowStyle:r,getRowClass:o,getCellStyle:s,getCellClass:i,getSpan:l,getColspanRealWidth:c}}function IN(e){const t=(0,a.f3)(yN),n=(0,y.s3)("table"),{handleDoubleClick:r,handleClick:o,handleContextMenu:s,handleMouseEnter:i,handleMouseLeave:l,handleCellMouseEnter:c,handleCellMouseLeave:u,tooltipContent:d,tooltipTrigger:h}=kN(e),{getRowStyle:p,getRowClass:f,getCellStyle:g,getCellClass:m,getSpan:v,getColspanRealWidth:w}=CN(e),b=(0,a.Fl)((()=>e.store.states.columns.value.findIndex((({type:e})=>"default"===e)))),S=(e,n)=>{const r=t.props.rowKey;return r?xO(e,r):n},_=(d,h,y,_=!1)=>{const{tooltipEffect:k,tooltipOptions:C,store:I}=e,{indent:A,columns:T}=I.states,R=f(d,h);let x=!0;y&&(R.push(n.em("row",`level-${y.level}`)),x=y.display);const O=x?null:{display:"none"};return(0,a.h)("tr",{style:[O,p(d,h)],class:R,key:S(d,h),onDblclick:e=>r(e,d),onClick:e=>o(e,d),onContextmenu:e=>s(e,d),onMouseenter:()=>i(h),onMouseleave:l},T.value.map(((n,r)=>{const{rowspan:o,colspan:s}=v(d,n,h,r);if(!o||!s)return null;const i={...n};i.realWidth=w(T.value,s,r);const l={store:e.store,_self:e.context||t,column:i,row:d,$index:h,cellIndex:r,expanded:_};r===b.value&&y&&(l.treeNode={indent:y.level*A.value,level:y.level},"boolean"===typeof y.expanded&&(l.treeNode.expanded=y.expanded,"loading"in y&&(l.treeNode.loading=y.loading),"noLazyChildren"in y&&(l.treeNode.noLazyChildren=y.noLazyChildren)));const p=`${h},${r}`,f=i.columnKey||i.rawColumnKey||"",S=E(r,n,l),I=n.showOverflowTooltip&&Fx({effect:k},C,n.showOverflowTooltip);return(0,a.h)("td",{style:g(h,r,d,n),class:m(h,r,d,n,s-1),key:`${f}${p}`,rowspan:o,colspan:s,onMouseenter:e=>c(e,d,I),onMouseleave:u},[S])})))},E=(e,t,n)=>t.renderCell(n),k=(r,o)=>{const s=e.store,{isRowExpanded:i,assertRowKey:l}=s,{treeData:c,lazyTreeNodeMap:u,childrenColumnName:d,rowKey:h}=s.states,p=s.states.columns.value,f=p.some((({type:e})=>"expand"===e));if(f){const e=i(r),l=_(r,o,void 0,e),c=t.renderExpanded;return e?c?[[l,(0,a.h)("tr",{key:`expanded-row__${l.key}`},[(0,a.h)("td",{colspan:p.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[c({row:r,$index:o,store:s,expanded:e})])])]]:(console.error("[Element Error]renderExpanded is required."),l):[[l]]}if(Object.keys(c.value).length){l();const e=xO(r,h.value);let t=c.value[e],n=null;t&&(n={expanded:t.expanded,level:t.level,display:!0},"boolean"===typeof t.lazy&&("boolean"===typeof t.loaded&&t.loaded&&(n.noLazyChildren=!(t.children&&t.children.length)),n.loading=t.loading));const s=[_(r,o,n)];if(t){let n=0;const i=(e,r)=>{e&&e.length&&r&&e.forEach((e=>{const a={display:r.display&&r.expanded,level:r.level+1,expanded:!1,noLazyChildren:!1,loading:!1},l=xO(e,h.value);if(void 0===l||null===l)throw new Error("For nested data item, row-key is required.");if(t={...c.value[l]},t&&(a.expanded=t.expanded,t.level=t.level||a.level,t.display=!(!t.expanded||!a.display),"boolean"===typeof t.lazy&&("boolean"===typeof t.loaded&&t.loaded&&(a.noLazyChildren=!(t.children&&t.children.length)),a.loading=t.loading)),n++,s.push(_(e,o+n,a)),t){const n=u.value[l]||e[d.value];i(n,t)}}))};t.display=!0;const a=u.value[e]||r[d.value];i(a,t)}return s}return _(r,o,void 0)};return{wrappedRowRender:k,tooltipContent:d,tooltipTrigger:h}}const AN={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var TN=(0,a.aZ)({name:"ElTableBody",props:AN,setup(e){const t=(0,a.FN)(),n=(0,a.f3)(yN),r=(0,y.s3)("table"),{wrappedRowRender:o,tooltipContent:s,tooltipTrigger:i}=IN(e),{onColumnsChange:l,onScrollableChange:c}=mN(n);return(0,a.YP)(e.store.states.hoverRow,((n,o)=>{if(!e.store.states.isComplex.value||!h.C5)return;let s=window.requestAnimationFrame;s||(s=e=>window.setTimeout(e,16)),s((()=>{const e=null==t?void 0:t.vnode.el,s=Array.from((null==e?void 0:e.children)||[]).filter((e=>null==e?void 0:e.classList.contains(`${r.e("row")}`))),i=s[o],a=s[n];i&&(0,v.IV)(i,"hover-row"),a&&(0,v.cn)(a,"hover-row")}))})),(0,a.Ah)((()=>{var e;null==(e=FO)||e()})),{ns:r,onColumnsChange:l,onScrollableChange:c,wrappedRowRender:o,tooltipContent:s,tooltipTrigger:i}},render(){const{wrappedRowRender:e,store:t}=this,n=t.states.data.value||[];return(0,a.h)("tbody",{},[n.reduce(((t,n)=>t.concat(e(n,t.length))),[])])}});function RN(e){const t="auto"===e.tableLayout;let n=e.columns||[];t&&n.every((e=>void 0===e.width))&&(n=[]);const r=n=>{const r={key:`${e.tableLayout}_${n.id}`,style:{},name:void 0};return t?r.style={width:`${n.width}px`}:r.name=n.id,r};return(0,a.h)("colgroup",{},n.map((e=>(0,a.h)("col",r(e)))))}function xN(){const e=(0,a.f3)(yN),t=null==e?void 0:e.store,n=(0,a.Fl)((()=>t.states.fixedLeafColumnsLength.value)),r=(0,a.Fl)((()=>t.states.rightFixedColumns.value.length)),o=(0,a.Fl)((()=>t.states.columns.value.length)),s=(0,a.Fl)((()=>t.states.fixedColumns.value.length)),i=(0,a.Fl)((()=>t.states.rightFixedColumns.value.length));return{leftFixedLeafCount:n,rightFixedLeafCount:r,columnsCount:o,leftFixedCount:s,rightFixedCount:i,columns:t.states.columns}}function ON(e){const{columns:t}=xN(),n=(0,y.s3)("table"),r=(t,r)=>{const o=t[r],s=[n.e("cell"),o.id,o.align,o.labelClassName,...HO(n.b(),r,o.fixed,e.store)];return o.className&&s.push(o.className),o.children||s.push(n.is("leaf")),s},o=(t,n)=>{const r=qO(n,t.fixed,e.store);return WO(r,"left"),WO(r,"right"),r};return{getCellClasses:r,getCellStyles:o,columns:t}}RN.props=["columns","tableLayout"];var NN=(0,a.aZ)({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:n,columns:r}=ON(e),o=(0,y.s3)("table");return{ns:o,getCellClasses:t,getCellStyles:n,columns:r}},render(){const{columns:e,getCellStyles:t,getCellClasses:n,summaryMethod:r,sumText:o,ns:s}=this,i=this.store.states.data.value;let l=[];return r?l=r({columns:e,data:i}):e.forEach(((e,t)=>{if(0===t)return void(l[t]=o);const n=i.map((t=>Number(t[e.property]))),r=[];let s=!0;n.forEach((e=>{if(!Number.isNaN(+e)){s=!1;const t=`${e}`.split(".")[1];r.push(t?t.length:0)}}));const a=Math.max.apply(null,r);l[t]=s?"":n.reduce(((e,t)=>{const n=Number(t);return Number.isNaN(+n)?e:Number.parseFloat((e+t).toFixed(Math.min(a,20)))}),0)})),(0,a.h)("table",{class:s.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[RN({columns:e}),(0,a.h)("tbody",[(0,a.h)("tr",{},[...e.map(((r,o)=>(0,a.h)("td",{key:o,colspan:r.colSpan,rowspan:r.rowSpan,class:n(e,o),style:t(r,o)},[(0,a.h)("div",{class:["cell",r.labelClassName]},[l[o]])])))])])])}});function PN(e){const t=t=>{e.commit("setCurrentRow",t)},n=()=>e.getSelectionRows(),r=(t,n)=>{e.toggleRowSelection(t,n,!1),e.updateAllSelected()},o=()=>{e.clearSelection()},s=t=>{e.clearFilter(t)},i=()=>{e.commit("toggleAllSelection")},a=(t,n)=>{e.toggleRowExpansionAdapter(t,n)},l=()=>{e.clearSort()},c=(t,n)=>{e.commit("sort",{prop:t,order:n})};return{setCurrentRow:t,getSelectionRows:n,toggleRowSelection:r,clearSelection:o,clearFilter:s,toggleAllSelection:i,toggleRowExpansion:a,clearSort:l,sort:c}}function DN(e,t,n,r){const o=(0,l.iH)(!1),s=(0,l.iH)(null),i=(0,l.iH)(!1),c=e=>{i.value=e},d=(0,l.iH)({width:null,height:null,headerHeight:null}),h=(0,l.iH)(!1),p={display:"inline-block",verticalAlign:"middle"},f=(0,l.iH)(),g=(0,l.iH)(0),m=(0,l.iH)(0),y=(0,l.iH)(0),v=(0,l.iH)(0);(0,a.m0)((()=>{t.setHeight(e.height)})),(0,a.m0)((()=>{t.setMaxHeight(e.maxHeight)})),(0,a.YP)((()=>[e.currentRowKey,n.states.rowKey]),(([e,t])=>{(0,l.SU)(t)&&(0,l.SU)(e)&&n.setCurrentRowKey(`${e}`)}),{immediate:!0}),(0,a.YP)((()=>e.data),(e=>{r.store.commit("setData",e)}),{immediate:!0,deep:!0}),(0,a.m0)((()=>{e.expandRowKeys&&n.setExpandRowKeysAdapter(e.expandRowKeys)}));const w=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},b=(e,t)=>{const{pixelX:n,pixelY:o}=t;Math.abs(n)>=Math.abs(o)&&(r.refs.bodyWrapper.scrollLeft+=t.pixelX/5)},S=(0,a.Fl)((()=>e.height||e.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0)),_=(0,a.Fl)((()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""}))),E=()=>{S.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(A)};(0,a.bv)((async()=>{await(0,a.Y3)(),n.updateColumns(),T(),requestAnimationFrame(E);const t=r.vnode.el,o=r.refs.headerWrapper;e.flexible&&t&&t.parentElement&&(t.parentElement.style.minWidth="0"),d.value={width:f.value=t.offsetWidth,height:t.offsetHeight,headerHeight:e.showHeader&&o?o.offsetHeight:null},n.states.columns.value.forEach((e=>{e.filteredValue&&e.filteredValue.length&&r.store.commit("filterChange",{column:e,values:e.filteredValue,silent:!0})})),r.$ready=!0}));const k=(e,n)=>{if(!e)return;const r=Array.from(e.classList).filter((e=>!e.startsWith("is-scrolling-")));r.push(t.scrollX.value?n:"is-scrolling-none"),e.className=r.join(" ")},C=e=>{const{tableWrapper:t}=r.refs;k(t,e)},I=e=>{const{tableWrapper:t}=r.refs;return!(!t||!t.classList.contains(e))},A=function(){if(!r.refs.scrollBarRef)return;if(!t.scrollX.value){const e="is-scrolling-none";return void(I(e)||C(e))}const e=r.refs.scrollBarRef.wrapRef;if(!e)return;const{scrollLeft:n,offsetWidth:o,scrollWidth:s}=e,{headerWrapper:i,footerWrapper:a}=r.refs;i&&(i.scrollLeft=n),a&&(a.scrollLeft=n);const l=s-o-1;C(n>=l?"is-scrolling-right":0===n?"is-scrolling-left":"is-scrolling-middle")},T=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&(0,u.ORN)(r.refs.scrollBarRef.wrapRef,"scroll",A,{passive:!0}),e.fit?(0,u.yU7)(r.vnode.el,R):(0,u.ORN)(window,"resize",R),(0,u.yU7)(r.refs.bodyWrapper,(()=>{var e,t;R(),null==(t=null==(e=r.refs)?void 0:e.scrollBarRef)||t.update()})))},R=()=>{var t,n,o;const s=r.vnode.el;if(!r.$ready||!s)return;let i=!1;const{width:a,height:l,headerHeight:c}=d.value,u=f.value=s.offsetWidth;a!==u&&(i=!0);const h=s.offsetHeight;(e.height||S.value)&&l!==h&&(i=!0);const p="fixed"===e.tableLayout?r.refs.headerWrapper:null==(t=r.refs.tableHeaderRef)?void 0:t.$el;e.showHeader&&(null==p?void 0:p.offsetHeight)!==c&&(i=!0),g.value=(null==(n=r.refs.tableWrapper)?void 0:n.scrollHeight)||0,y.value=(null==p?void 0:p.scrollHeight)||0,v.value=(null==(o=r.refs.footerWrapper)?void 0:o.offsetHeight)||0,m.value=g.value-y.value-v.value,i&&(d.value={width:u,height:h,headerHeight:e.showHeader&&(null==p?void 0:p.offsetHeight)||0},E())},x=(0,mo.Cd)(),O=(0,a.Fl)((()=>{const{bodyWidth:e,scrollY:n,gutterWidth:r}=t;return e.value?e.value-(n.value?r:0)+"px":""})),N=(0,a.Fl)((()=>e.maxHeight?"fixed":e.tableLayout)),P=(0,a.Fl)((()=>{if(e.data&&e.data.length)return null;let t="100%";e.height&&m.value&&(t=`${m.value}px`);const n=f.value;return{width:n?`${n}px`:"",height:t}})),D=(0,a.Fl)((()=>e.height?{height:Number.isNaN(Number(e.height))?e.height:`${e.height}px`}:e.maxHeight?{maxHeight:Number.isNaN(Number(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`}:{})),U=(0,a.Fl)((()=>{if(e.height)return{height:"100%"};if(e.maxHeight){if(Number.isNaN(Number(e.maxHeight)))return{maxHeight:`calc(${e.maxHeight} - ${y.value+v.value}px)`};{const t=e.maxHeight,n=g.value>=Number(t);if(n)return{maxHeight:g.value-y.value-v.value+"px"}}}return{}})),L=(e,t)=>{const n=r.refs.bodyWrapper;if(Math.abs(t.spinY)>0){const r=n.scrollTop;t.pixelY<0&&0!==r&&e.preventDefault(),t.pixelY>0&&n.scrollHeight-n.clientHeight>r&&e.preventDefault(),n.scrollTop+=Math.ceil(t.pixelY/5)}else n.scrollLeft+=Math.ceil(t.pixelX/5)};return{isHidden:o,renderExpanded:s,setDragVisible:c,isGroup:h,handleMouseLeave:w,handleHeaderFooterMousewheel:b,tableSize:x,emptyBlockStyle:P,handleFixedMousewheel:L,resizeProxyVisible:i,bodyWidth:O,resizeState:d,doLayout:E,tableBodyStyles:_,tableLayout:N,scrollbarViewStyle:p,tableInnerStyle:D,scrollbarStyle:U}}function UN(e){const t=(0,l.iH)(),n=()=>{const n=e.vnode.el,r=n.querySelector(".hidden-columns"),o={childList:!0,subtree:!0},s=e.store.states.updateOrderFns;t.value=new MutationObserver((()=>{s.forEach((e=>e()))})),t.value.observe(r,o)};(0,a.bv)((()=>{n()})),(0,a.Ah)((()=>{var e;null==(e=t.value)||e.disconnect()}))}var LN={data:{type:Array,default:()=>[]},size:Th.Pp,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean};const BN=()=>{const e=(0,l.iH)(),t=(t,n)=>{const r=e.value;r&&r.scrollTo(t,n)},n=(t,n)=>{const r=e.value;r&&(0,h.hj)(n)&&["Top","Left"].includes(t)&&r[`setScroll${t}`](n)},r=e=>n("Top",e),o=e=>n("Left",e);return{scrollBarRef:e,scrollTo:t,setScrollTop:r,setScrollLeft:o}};var MN,FN,jN,zN,$N,VN,HN,KN,qN,WN,YN,GN,ZN,JN,QN,XN=!1;function eP(){if(!XN){XN=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(GN=/\b(iPhone|iP[ao]d)/.exec(e),ZN=/\b(iP[ao]d)/.exec(e),WN=/Android/i.exec(e),JN=/FBAN\/\w+;/i.exec(e),QN=/Mobile/i.exec(e),YN=!!/Win64/.exec(e),t){MN=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,MN&&document&&document.documentMode&&(MN=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);VN=r?parseFloat(r[1])+4:MN,FN=t[2]?parseFloat(t[2]):NaN,jN=t[3]?parseFloat(t[3]):NaN,zN=t[4]?parseFloat(t[4]):NaN,zN?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),$N=t&&t[1]?parseFloat(t[1]):NaN):$N=NaN}else MN=FN=jN=$N=zN=NaN;if(n){if(n[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);HN=!o||parseFloat(o[1].replace("_","."))}else HN=!1;KN=!!n[2],qN=!!n[3]}else HN=KN=qN=!1}}var tP,nP={ie:function(){return eP()||MN},ieCompatibilityMode:function(){return eP()||VN>MN},ie64:function(){return nP.ie()&&YN},firefox:function(){return eP()||FN},opera:function(){return eP()||jN},webkit:function(){return eP()||zN},safari:function(){return nP.webkit()},chrome:function(){return eP()||$N},windows:function(){return eP()||KN},osx:function(){return eP()||HN},linux:function(){return eP()||qN},iphone:function(){return eP()||GN},mobile:function(){return eP()||GN||ZN||WN||QN},nativeApp:function(){return eP()||JN},android:function(){return eP()||WN},ipad:function(){return eP()||ZN}},rP=nP,oP=!!(typeof window<"u"&&window.document&&window.document.createElement),sP={canUseDOM:oP,canUseWorkers:typeof Worker<"u",canUseEventListeners:oP&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:oP&&!!window.screen,isInWorker:!oP},iP=sP;function aP(e,t){if(!iP.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var o=document.createElement("div");o.setAttribute(n,"return;"),r="function"==typeof o[n]}return!r&&tP&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}iP.canUseDOM&&(tP=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var lP=aP,cP=10,uP=40,dP=800;function hP(e){var t=0,n=0,r=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*cP,o=n*cP,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||o)&&e.deltaMode&&(1==e.deltaMode?(r*=uP,o*=uP):(r*=dP,o*=dP)),r&&!t&&(t=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:o}}hP.getEventType=function(){return rP.firefox()?"DOMMouseScroll":lP("wheel")?"wheel":"mousewheel"};var pP=hP;
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const fP=function(e,t){if(e&&e.addEventListener){const n=function(e){const n=pP(e);t&&Reflect.apply(t,this,[e,n])};e.addEventListener("wheel",n,{passive:!0})}},gP={beforeMount(e,t){fP(e,t.value)}};let mP=1;const yP=(0,a.aZ)({name:"ElTable",directives:{Mousewheel:gP},components:{TableHeader:EN,TableBody:TN,TableFooter:NN,ElScrollbar:Ie,hColgroup:RN},props:LN,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t:t}=(0,_s.bU)(),n=(0,y.s3)("table"),r=(0,a.FN)();(0,a.JJ)(yN,r);const o=oN(r,e);r.store=o;const s=new lN({store:r.store,table:r,fit:e.fit,showHeader:e.showHeader});r.layout=s;const i=(0,a.Fl)((()=>0===(o.states.data.value||[]).length)),{setCurrentRow:l,getSelectionRows:c,toggleRowSelection:u,clearSelection:d,clearFilter:h,toggleAllSelection:p,toggleRowExpansion:f,clearSort:g,sort:m}=PN(o),{isHidden:v,renderExpanded:w,setDragVisible:b,isGroup:S,handleMouseLeave:_,handleHeaderFooterMousewheel:E,tableSize:k,emptyBlockStyle:C,handleFixedMousewheel:I,resizeProxyVisible:A,bodyWidth:T,resizeState:R,doLayout:x,tableBodyStyles:O,tableLayout:N,scrollbarViewStyle:P,tableInnerStyle:D,scrollbarStyle:U}=DN(e,s,o,r),{scrollBarRef:L,scrollTo:B,setScrollLeft:M,setScrollTop:F}=BN(),j=ie(x,50),z=`${n.namespace.value}-table_${mP++}`;r.tableId=z,r.state={isGroup:S,resizeState:R,doLayout:x,debouncedUpdateLayout:j};const $=(0,a.Fl)((()=>e.sumText||t("el.table.sumText"))),V=(0,a.Fl)((()=>e.emptyText||t("el.table.emptyText")));return UN(r),{ns:n,layout:s,store:o,handleHeaderFooterMousewheel:E,handleMouseLeave:_,tableId:z,tableSize:k,isHidden:v,isEmpty:i,renderExpanded:w,resizeProxyVisible:A,resizeState:R,isGroup:S,bodyWidth:T,tableBodyStyles:O,emptyBlockStyle:C,debouncedUpdateLayout:j,handleFixedMousewheel:I,setCurrentRow:l,getSelectionRows:c,toggleRowSelection:u,clearSelection:d,clearFilter:h,toggleAllSelection:p,toggleRowExpansion:f,clearSort:g,doLayout:x,sort:m,t:t,setDragVisible:b,context:r,computedSumText:$,computedEmptyText:V,tableLayout:N,scrollbarViewStyle:P,tableInnerStyle:D,scrollbarStyle:U,scrollBarRef:L,scrollTo:B,setScrollLeft:M,setScrollTop:F}}}),vP=["data-prefix"],wP={ref:"hiddenColumns",class:"hidden-columns"};function bP(e,t,n,r,o,s){const i=(0,a.up)("hColgroup"),l=(0,a.up)("table-header"),u=(0,a.up)("table-body"),d=(0,a.up)("el-scrollbar"),h=(0,a.up)("table-footer"),p=(0,a.Q2)("mousewheel");return(0,a.wg)(),(0,a.iD)("div",{ref:"tableWrapper",class:(0,c.C_)([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:0!==(e.store.states.data.value||[]).length&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:(0,c.j5)(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:t[0]||(t[0]=t=>e.handleMouseLeave())},[(0,a._)("div",{class:(0,c.C_)(e.ns.e("inner-wrapper")),style:(0,c.j5)(e.tableInnerStyle)},[(0,a._)("div",wP,[(0,a.WI)(e.$slots,"default")],512),e.showHeader&&"fixed"===e.tableLayout?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:0,ref:"headerWrapper",class:(0,c.C_)(e.ns.e("header-wrapper"))},[(0,a._)("table",{ref:"tableHeader",class:(0,c.C_)(e.ns.e("header")),style:(0,c.j5)(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[(0,a.Wm)(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),(0,a.Wm)(l,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[p,e.handleHeaderFooterMousewheel]]):(0,a.kq)("v-if",!0),(0,a._)("div",{ref:"bodyWrapper",class:(0,c.C_)(e.ns.e("body-wrapper"))},[(0,a.Wm)(d,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn},{default:(0,a.w5)((()=>[(0,a._)("table",{ref:"tableBody",class:(0,c.C_)(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:(0,c.j5)({width:e.bodyWidth,tableLayout:e.tableLayout})},[(0,a.Wm)(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&"auto"===e.tableLayout?((0,a.wg)(),(0,a.j4)(l,{key:0,ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):(0,a.kq)("v-if",!0),(0,a.Wm)(u,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"])],6),e.isEmpty?((0,a.wg)(),(0,a.iD)("div",{key:0,ref:"emptyBlock",style:(0,c.j5)(e.emptyBlockStyle),class:(0,c.C_)(e.ns.e("empty-block"))},[(0,a._)("span",{class:(0,c.C_)(e.ns.e("empty-text"))},[(0,a.WI)(e.$slots,"empty",{},(()=>[(0,a.Uk)((0,c.zw)(e.computedEmptyText),1)]))],2)],6)):(0,a.kq)("v-if",!0),e.$slots.append?((0,a.wg)(),(0,a.iD)("div",{key:1,ref:"appendWrapper",class:(0,c.C_)(e.ns.e("append-wrapper"))},[(0,a.WI)(e.$slots,"append")],2)):(0,a.kq)("v-if",!0)])),_:3},8,["view-style","wrap-style","always"])],2),e.showSummary?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:1,ref:"footerWrapper",class:(0,c.C_)(e.ns.e("footer-wrapper"))},[(0,a.Wm)(h,{border:e.border,"default-sort":e.defaultSort,store:e.store,style:(0,c.j5)(e.tableBodyStyles),"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[A.F8,!e.isEmpty],[p,e.handleHeaderFooterMousewheel]]):(0,a.kq)("v-if",!0),e.border||e.isGroup?((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,c.C_)(e.ns.e("border-left-patch"))},null,2)):(0,a.kq)("v-if",!0)],6),(0,a.wy)((0,a._)("div",{ref:"resizeProxy",class:(0,c.C_)(e.ns.e("column-resize-proxy"))},null,2),[[A.F8,e.resizeProxyVisible]])],46,vP)}var SP=(0,m.Z)(yP,[["render",bP],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const _P={selection:"table-column--selection",expand:"table__expand-column"},EP={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},kP=e=>_P[e]||"",CP={selection:{renderHeader({store:e}){function t(){return e.states.data.value&&0===e.states.data.value.length}return(0,a.h)(jp,{disabled:t(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value})},renderCell({row:e,column:t,store:n,$index:r}){return(0,a.h)(jp,{disabled:!!t.selectable&&!t.selectable.call(null,e,r),size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",e)},onClick:e=>e.stopPropagation(),modelValue:n.isSelected(e)})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let n=t+1;const r=e.index;return"number"===typeof r?n=t+r:"function"===typeof r&&(n=r(t)),(0,a.h)("div",{},[n])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:n}){const{ns:r}=t,o=[r.e("expand-icon")];n&&o.push(r.em("expand-icon","expanded"));const s=function(n){n.stopPropagation(),t.toggleRowExpansion(e)};return(0,a.h)("div",{class:o,onClick:s},{default:()=>[(0,a.h)(T.gn,null,{default:()=>[(0,a.h)(ae.olP)]})]})},sortable:!1,resizable:!1}};function IP({row:e,column:t,$index:n}){var r;const o=t.property,s=o&&(0,R.WJ)(e,o).value;return t&&t.formatter?t.formatter(e,t,s,n):(null==(r=null==s?void 0:s.toString)?void 0:r.call(s))||""}function AP({row:e,treeNode:t,store:n},r=!1){const{ns:o}=n;if(!t)return r?[(0,a.h)("span",{class:o.e("placeholder")})]:null;const s=[],i=function(r){r.stopPropagation(),t.loading||n.loadOrToggle(e)};if(t.indent&&s.push((0,a.h)("span",{class:o.e("indent"),style:{"padding-left":`${t.indent}px`}})),"boolean"!==typeof t.expanded||t.noLazyChildren)s.push((0,a.h)("span",{class:o.e("placeholder")}));else{const e=[o.e("expand-icon"),t.expanded?o.em("expand-icon","expanded"):""];let n=ae.olP;t.loading&&(n=ae.gbz),s.push((0,a.h)("div",{class:e,onClick:i},{default:()=>[(0,a.h)(T.gn,{class:{[o.is("loading")]:t.loading}},{default:()=>[(0,a.h)(n)]})]}))}return s}function TP(e,t){return e.reduce(((e,t)=>(e[t]=t,e)),t)}function RP(e,t){const n=(0,a.FN)(),r=()=>{const r=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},s=TP(r,o);Object.keys(s).forEach((r=>{const s=o[r];(0,c.RI)(t,s)&&(0,a.YP)((()=>t[s]),(t=>{let o=t;"width"===s&&"realWidth"===r&&(o=PO(t)),"minWidth"===s&&"realMinWidth"===r&&(o=DO(t)),n.columnConfig.value[s]=o,n.columnConfig.value[r]=o;const i="fixed"===s;e.value.store.scheduleLayout(i)}))}))},o=()=>{const e=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],r={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},o=TP(e,r);Object.keys(o).forEach((e=>{const o=r[e];(0,c.RI)(t,o)&&(0,a.YP)((()=>t[o]),(t=>{n.columnConfig.value[e]=t}))}))};return{registerComplexWatchers:r,registerNormalWatchers:o}}function xP(e,t,n){const r=(0,a.FN)(),o=(0,l.iH)(""),s=(0,l.iH)(!1),i=(0,l.iH)(),c=(0,l.iH)(),u=(0,y.s3)("table");(0,a.m0)((()=>{i.value=e.align?`is-${e.align}`:null,i.value})),(0,a.m0)((()=>{c.value=e.headerAlign?`is-${e.headerAlign}`:i.value,c.value}));const d=(0,a.Fl)((()=>{let e=r.vnode.vParent||r.parent;while(e&&!e.tableId&&!e.columnId)e=e.vnode.vParent||e.parent;return e})),h=(0,a.Fl)((()=>{const{store:e}=r.parent;if(!e)return!1;const{treeData:t}=e.states,n=t.value;return n&&Object.keys(n).length>0})),p=(0,l.iH)(PO(e.width)),f=(0,l.iH)(DO(e.minWidth)),g=e=>(p.value&&(e.width=p.value),f.value&&(e.minWidth=f.value),!p.value&&f.value&&(e.width=void 0),e.minWidth||(e.minWidth=80),e.realWidth=Number(void 0===e.width?e.minWidth:e.width),e),m=e=>{const t=e.type,n=CP[t]||{};Object.keys(n).forEach((t=>{const r=n[t];"className"!==t&&void 0!==r&&(e[t]=r)}));const r=kP(t);if(r){const t=`${(0,l.SU)(u.namespace)}-${r}`;e.className=e.className?`${e.className} ${t}`:t}return e},v=e=>{function t(e){var t;"ElTableColumn"===(null==(t=null==e?void 0:e.type)?void 0:t.name)&&(e.vParent=r)}Array.isArray(e)?e.forEach((e=>t(e))):t(e)},b=o=>{e.renderHeader?(0,w.N)("TableColumn","Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):"selection"!==o.type&&(o.renderHeader=e=>{r.columnConfig.value["label"];const n=t.header;return n?n(e):o.label});let s=o.renderCell;return"expand"===o.type?(o.renderCell=e=>(0,a.h)("div",{class:"cell"},[s(e)]),n.value.renderExpanded=e=>t.default?t.default(e):t.default):(s=s||IP,o.renderCell=e=>{let r=null;if(t.default){const n=t.default(e);r=n.some((e=>e.type!==a.sv))?n:s(e)}else r=s(e);const{columns:i}=n.value.store.states,c=i.value.findIndex((e=>"default"===e.type)),d=h.value&&e.cellIndex===c,p=AP(e,d),f={class:"cell",style:{}};return o.showOverflowTooltip&&(f.class=`${f.class} ${(0,l.SU)(u.namespace)}-tooltip`,f.style={width:(e.column.realWidth||Number(e.column.width))-1+"px"}),v(r),(0,a.h)("div",f,[p,r])}),o},S=(...t)=>t.reduce(((t,n)=>(Array.isArray(n)&&n.forEach((n=>{t[n]=e[n]})),t)),{}),_=(e,t)=>Array.prototype.indexOf.call(e,t),E=()=>{n.value.store.commit("updateColumnOrder",r.columnConfig.value)};return{columnId:o,realAlign:i,isSubColumn:s,realHeaderAlign:c,columnOrTableParent:d,setColumnWidth:g,setColumnForcedProps:m,setColumnRenders:b,getPropsData:S,getColumnElIndex:_,updateColumnOrder:E}}var OP={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:[Boolean,Object],fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every((e=>["ascending","descending",null].includes(e)))}};let NP=1;var PP=(0,a.aZ)({name:"ElTableColumn",components:{ElCheckbox:jp},props:OP,setup(e,{slots:t}){const n=(0,a.FN)(),r=(0,l.iH)({}),o=(0,a.Fl)((()=>{let e=n.parent;while(e&&!e.tableId)e=e.parent;return e})),{registerNormalWatchers:s,registerComplexWatchers:i}=RP(o,e),{columnId:c,isSubColumn:u,realHeaderAlign:d,columnOrTableParent:h,setColumnWidth:p,setColumnForcedProps:f,setColumnRenders:g,getPropsData:m,getColumnElIndex:y,realAlign:v,updateColumnOrder:w}=xP(e,t,o),b=h.value;c.value=`${b.tableId||b.columnId}_column_${NP++}`,(0,a.wF)((()=>{u.value=o.value!==b;const t=e.type||"default",a=""===e.sortable||e.sortable,l={...EP[t],id:c.value,type:t,property:e.prop||e.property,align:v,headerAlign:d,showOverflowTooltip:e.showOverflowTooltip,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:a,index:e.index,rawColumnKey:n.vnode.key},h=["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],y=["sortMethod","sortBy","sortOrders"],w=["selectable","reserveSelection"],S=["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"];let _=m(h,y,w,S);_=NO(l,_);const E=LO(g,p,f);_=E(_),r.value=_,s(),i()})),(0,a.bv)((()=>{var e;const t=h.value,s=u.value?t.vnode.el.children:null==(e=t.refs.hiddenColumns)?void 0:e.children,i=()=>y(s||[],n.vnode.el);r.value.getColumnIndex=i;const a=i();a>-1&&o.value.store.commit("insertColumn",r.value,u.value?t.columnConfig.value:null,w)})),(0,a.Jd)((()=>{o.value.store.commit("removeColumn",r.value,u.value?b.columnConfig.value:null,w)})),n.columnId=c.value,n.columnConfig=r},render(){var e,t,n;try{const r=null==(t=(e=this.$slots).default)?void 0:t.call(e,{row:{},column:{},$index:-1}),o=[];if(Array.isArray(r))for(const e of r)"ElTableColumn"===(null==(n=e.type)?void 0:n.name)||2&e.shapeFlag?o.push(e):e.type===a.HY&&Array.isArray(e.children)&&e.children.forEach((e=>{1024===(null==e?void 0:e.patchFlag)||(0,c.HD)(null==e?void 0:e.children)||o.push(e)}));const s=(0,a.h)("div",o);return s}catch(nB){return(0,a.h)("div",[])}}});const DP=(0,C.nz)(SP,{TableColumn:PP}),UP=(0,C.dp)(PP);var LP=(e=>(e["ASC"]="asc",e["DESC"]="desc",e))(LP||{}),BP=(e=>(e["CENTER"]="center",e["RIGHT"]="right",e))(BP||{}),MP=(e=>(e["LEFT"]="left",e["RIGHT"]="right",e))(MP||{});const FP={["asc"]:"desc",["desc"]:"asc"},jP=Symbol("placeholder"),zP=(e,t,n)=>{var r;const o={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};n||(o.flexShrink=1);const s={...null!=(r=e.style)?r:{},...o,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(s.maxWidth=e.maxWidth),e.minWidth&&(s.minWidth=e.minWidth)),s};function $P(e,t,n){const r=(0,a.Fl)((()=>(0,l.SU)(t).filter((e=>!e.hidden)))),o=(0,a.Fl)((()=>(0,l.SU)(r).filter((e=>"left"===e.fixed||!0===e.fixed)))),s=(0,a.Fl)((()=>(0,l.SU)(r).filter((e=>"right"===e.fixed)))),i=(0,a.Fl)((()=>(0,l.SU)(r).filter((e=>!e.fixed)))),u=(0,a.Fl)((()=>{const e=[];return(0,l.SU)(o).forEach((t=>{e.push({...t,placeholderSign:jP})})),(0,l.SU)(i).forEach((t=>{e.push(t)})),(0,l.SU)(s).forEach((t=>{e.push({...t,placeholderSign:jP})})),e})),d=(0,a.Fl)((()=>(0,l.SU)(o).length||(0,l.SU)(s).length)),h=(0,a.Fl)((()=>{const r=(0,l.SU)(t);return r.reduce(((t,r)=>(t[r.key]=zP(r,(0,l.SU)(n),e.fixed),t)),{})})),p=(0,a.Fl)((()=>(0,l.SU)(r).reduce(((e,t)=>e+t.width),0))),f=e=>(0,l.SU)(t).find((t=>t.key===e)),g=e=>(0,l.SU)(h)[e],m=(e,t)=>{e.width=t};function y(t){var n;const{key:r}=t.currentTarget.dataset;if(!r)return;const{sortState:o,sortBy:s}=e;let i=LP.ASC;i=(0,c.Kn)(o)?FP[o[r]]:FP[s.order],null==(n=e.onColumnSort)||n.call(e,{column:f(r),key:r,order:i})}return{columns:t,columnsStyles:h,columnsTotalWidth:p,fixedColumnsOnLeft:o,fixedColumnsOnRight:s,hasFixedColumns:d,mainColumns:u,normalColumns:i,visibleColumns:r,getColumn:f,getColumnStyle:g,updateColumnWidth:m,onColumnSorted:y}}const VP=(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,onMaybeEndReached:o})=>{const s=(0,l.iH)({scrollLeft:0,scrollTop:0});function i(e){var o,s,i;const{scrollTop:a}=e;null==(o=t.value)||o.scrollTo(e),null==(s=n.value)||s.scrollToTop(a),null==(i=r.value)||i.scrollToTop(a)}function c(e){s.value=e,i(e)}function u(e){s.value.scrollTop=e,i((0,l.SU)(s))}function d(e){var n,r;s.value.scrollLeft=e,null==(r=null==(n=t.value)?void 0:n.scrollTo)||r.call(n,(0,l.SU)(s))}function h(t){var n;c(t),null==(n=e.onScroll)||n.call(e,t)}function p({scrollTop:e}){const{scrollTop:t}=(0,l.SU)(s);e!==t&&u(e)}function f(e,n="auto"){var r;null==(r=t.value)||r.scrollToRow(e,n)}return(0,a.YP)((()=>(0,l.SU)(s).scrollTop),((e,t)=>{e>t&&o()})),{scrollPos:s,scrollTo:c,scrollToLeft:d,scrollToTop:u,scrollToRow:f,onScroll:h,onVerticalScroll:p}},HP=(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r})=>{const o=(0,a.FN)(),{emit:s}=o,i=(0,l.XI)(!1),c=(0,l.XI)(null),u=(0,l.iH)(e.defaultExpandedRowKeys||[]),d=(0,l.iH)(-1),p=(0,l.XI)(null),f=(0,l.iH)({}),g=(0,l.iH)({}),m=(0,l.XI)({}),y=(0,l.XI)({}),v=(0,l.XI)({}),w=(0,a.Fl)((()=>(0,h.hj)(e.estimatedRowHeight)));function b(t){var n;null==(n=e.onRowsRendered)||n.call(e,t),t.rowCacheEnd>(0,l.SU)(d)&&(d.value=t.rowCacheEnd)}function S({hovered:e,rowKey:t}){c.value=e?t:null}function _({expanded:t,rowData:n,rowIndex:r,rowKey:o}){var i,a;const c=[...(0,l.SU)(u)],d=c.indexOf(o);t?-1===d&&c.push(o):d>-1&&c.splice(d,1),u.value=c,s("update:expandedRowKeys",c),null==(i=e.onRowExpand)||i.call(e,{expanded:t,rowData:n,rowIndex:r,rowKey:o}),null==(a=e.onExpandedRowsChange)||a.call(e,c)}const E=ie((()=>{var e,s,a,c;i.value=!0,f.value={...(0,l.SU)(f),...(0,l.SU)(g)},k((0,l.SU)(p),!1),g.value={},p.value=null,null==(e=t.value)||e.forceUpdate(),null==(s=n.value)||s.forceUpdate(),null==(a=r.value)||a.forceUpdate(),null==(c=o.proxy)||c.$forceUpdate(),i.value=!1}),0);function k(e,o=!1){(0,l.SU)(w)&&[t,n,r].forEach((t=>{const n=(0,l.SU)(t);n&&n.resetAfterRowIndex(e,o)}))}function C(e,t,n){const r=(0,l.SU)(p);(null===r||r>n)&&(p.value=n),g.value[e]=t}function I({rowKey:e,height:t,rowIndex:n},r){r?r===MP.RIGHT?v.value[e]=t:m.value[e]=t:y.value[e]=t;const o=Math.max(...[m,v,y].map((t=>t.value[e]||0)));(0,l.SU)(f)[e]!==o&&(C(e,o,n),E())}return{hoveringRowKey:c,expandedRowKeys:u,lastRenderedRowIndex:d,isDynamic:w,isResetting:i,rowHeights:f,resetAfterIndex:k,onRowExpanded:_,onRowHovered:S,onRowsRendered:b,onRowHeightChange:I}},KP=(e,{expandedRowKeys:t,lastRenderedRowIndex:n,resetAfterIndex:r})=>{const o=(0,l.iH)({}),s=(0,a.Fl)((()=>{const n={},{data:r,rowKey:s}=e,i=(0,l.SU)(t);if(!i||!i.length)return r;const a=[],c=new Set;i.forEach((e=>c.add(e)));let u=r.slice();u.forEach((e=>n[e[s]]=0));while(u.length>0){const e=u.shift();a.push(e),c.has(e[s])&&Array.isArray(e.children)&&e.children.length>0&&(u=[...e.children,...u],e.children.forEach((t=>n[t[s]]=n[e[s]]+1)))}return o.value=n,a})),i=(0,a.Fl)((()=>{const{data:t,expandColumnKey:n}=e;return n?(0,l.SU)(s):t}));return(0,a.YP)(i,((e,t)=>{e!==t&&(n.value=-1,r(0,!0))})),{data:i,depthMap:o}},qP=(e,t)=>e+t,WP=e=>(0,c.kJ)(e)?e.reduce(qP,0):e,YP=(e,t,n={})=>(0,c.mf)(e)?e(t):null!=e?e:n,GP=e=>(["width","maxWidth","minWidth","height"].forEach((t=>{e[t]=(0,v.Nn)(e[t])})),e),ZP=e=>(0,a.lA)(e)?t=>(0,a.h)(e,t):e,JP=(e,{columnsTotalWidth:t,data:n,fixedColumnsOnLeft:r,fixedColumnsOnRight:o})=>{const s=(0,a.Fl)((()=>{const{fixed:n,width:r,vScrollbarSize:o}=e,s=r-o;return n?Math.max(Math.round((0,l.SU)(t)),s):s})),i=(0,a.Fl)((()=>(0,l.SU)(s)+(e.fixed?e.vScrollbarSize:0))),c=(0,a.Fl)((()=>{const{height:t=0,maxHeight:n=0,footerHeight:r,hScrollbarSize:o}=e;if(n>0){const e=(0,l.SU)(y),t=(0,l.SU)(u),s=(0,l.SU)(m),i=s+e+t+o;return Math.min(i,n-r)}return t-r})),u=(0,a.Fl)((()=>{const{rowHeight:t,estimatedRowHeight:r}=e,o=(0,l.SU)(n);return(0,h.hj)(r)?o.length*r:o.length*t})),d=(0,a.Fl)((()=>{const{maxHeight:t}=e,n=(0,l.SU)(c);if((0,h.hj)(t)&&t>0)return n;const r=(0,l.SU)(u)+(0,l.SU)(m)+(0,l.SU)(y);return Math.min(n,r)})),p=e=>e.width,f=(0,a.Fl)((()=>WP((0,l.SU)(r).map(p)))),g=(0,a.Fl)((()=>WP((0,l.SU)(o).map(p)))),m=(0,a.Fl)((()=>WP(e.headerHeight))),y=(0,a.Fl)((()=>{var t;return((null==(t=e.fixedData)?void 0:t.length)||0)*e.rowHeight})),w=(0,a.Fl)((()=>(0,l.SU)(c)-(0,l.SU)(m)-(0,l.SU)(y))),b=(0,a.Fl)((()=>{const{style:t={},height:n,width:r}=e;return GP({...t,height:n,width:r})})),S=(0,a.Fl)((()=>GP({height:e.footerHeight}))),_=(0,a.Fl)((()=>({top:(0,v.Nn)((0,l.SU)(m)),bottom:(0,v.Nn)(e.footerHeight),width:(0,v.Nn)(e.width)})));return{bodyWidth:s,fixedTableHeight:d,mainTableHeight:c,leftTableWidth:f,rightTableWidth:g,headerWidth:i,rowsHeight:u,windowHeight:w,footerHeight:S,emptyStyle:_,rootStyle:b,headerHeight:m}};function QP(e){const t=(0,l.iH)(),n=(0,l.iH)(),r=(0,l.iH)(),{columns:o,columnsStyles:s,columnsTotalWidth:i,fixedColumnsOnLeft:u,fixedColumnsOnRight:d,hasFixedColumns:h,mainColumns:p,onColumnSorted:f}=$P(e,(0,l.Vh)(e,"columns"),(0,l.Vh)(e,"fixed")),{scrollTo:g,scrollToLeft:m,scrollToTop:y,scrollToRow:v,onScroll:w,onVerticalScroll:b,scrollPos:S}=VP(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,onMaybeEndReached:J}),{expandedRowKeys:_,hoveringRowKey:E,lastRenderedRowIndex:k,isDynamic:C,isResetting:I,rowHeights:A,resetAfterIndex:T,onRowExpanded:R,onRowHeightChange:x,onRowHovered:O,onRowsRendered:N}=HP(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r}),{data:P,depthMap:D}=KP(e,{expandedRowKeys:_,lastRenderedRowIndex:k,resetAfterIndex:T}),{bodyWidth:U,fixedTableHeight:L,mainTableHeight:B,leftTableWidth:M,rightTableWidth:F,headerWidth:j,rowsHeight:z,windowHeight:$,footerHeight:V,emptyStyle:H,rootStyle:K,headerHeight:q}=JP(e,{columnsTotalWidth:i,data:P,fixedColumnsOnLeft:u,fixedColumnsOnRight:d}),W=(0,l.XI)(!1),Y=(0,l.iH)(),G=(0,a.Fl)((()=>{const t=0===(0,l.SU)(P).length;return(0,c.kJ)(e.fixedData)?0===e.fixedData.length&&t:t}));function Z(t){const{estimatedRowHeight:n,rowHeight:r,rowKey:o}=e;return n?(0,l.SU)(A)[(0,l.SU)(P)[t][o]]||n:r}function J(){const{onEndReached:t}=e;if(!t)return;const{scrollTop:n}=(0,l.SU)(S),r=(0,l.SU)(z),o=(0,l.SU)($),s=r-(n+o)+e.hScrollbarSize;(0,l.SU)(k)>=0&&r===n+(0,l.SU)(B)-(0,l.SU)(q)&&t(s)}return(0,a.YP)((()=>e.expandedRowKeys),(e=>_.value=e),{deep:!0}),{columns:o,containerRef:Y,mainTableRef:t,leftTableRef:n,rightTableRef:r,isDynamic:C,isResetting:I,isScrolling:W,hoveringRowKey:E,hasFixedColumns:h,columnsStyles:s,columnsTotalWidth:i,data:P,expandedRowKeys:_,depthMap:D,fixedColumnsOnLeft:u,fixedColumnsOnRight:d,mainColumns:p,bodyWidth:U,emptyStyle:H,rootStyle:K,headerWidth:j,footerHeight:V,mainTableHeight:B,fixedTableHeight:L,leftTableWidth:M,rightTableWidth:F,showEmpty:G,getRowHeight:Z,onColumnSorted:f,onRowHovered:O,onRowExpanded:R,onRowsRendered:N,onRowHeightChange:x,scrollTo:g,scrollToLeft:m,scrollToTop:y,scrollToRow:v,onScroll:w,onVerticalScroll:b}}const XP=Symbol("tableV2"),eD=String,tD={type:(0,d.Cq)(Array),required:!0},nD=((0,d.Cq)(Object),{type:(0,d.Cq)(Array)}),rD={...nD,required:!0},oD=String,sD={type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},iD={type:Number,required:!0},aD={type:(0,d.Cq)([String,Number,Symbol]),default:"id"},lD={type:(0,d.Cq)(Object)},cD=(0,d.o8)({class:String,columns:tD,columnsStyles:{type:(0,d.Cq)(Object),required:!0},depth:Number,expandColumnKey:oD,estimatedRowHeight:{...WA.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:(0,d.Cq)(Function)},onRowHover:{type:(0,d.Cq)(Function)},onRowHeightChange:{type:(0,d.Cq)(Function)},rowData:{type:(0,d.Cq)(Object),required:!0},rowEventHandlers:{type:(0,d.Cq)(Object)},rowIndex:{type:Number,required:!0},rowKey:aD,style:{type:(0,d.Cq)(Object)}}),uD={type:Number,required:!0},dD=(0,d.o8)({class:String,columns:tD,fixedHeaderData:{type:(0,d.Cq)(Array)},headerData:{type:(0,d.Cq)(Array),required:!0},headerHeight:{type:(0,d.Cq)([Number,Array]),default:50},rowWidth:uD,rowHeight:{type:Number,default:50},height:uD,width:uD}),hD=(0,d.o8)({columns:tD,data:rD,fixedData:nD,estimatedRowHeight:cD.estimatedRowHeight,width:iD,height:iD,headerWidth:iD,headerHeight:dD.headerHeight,bodyWidth:iD,rowHeight:iD,cache:VA.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:WA.scrollbarAlwaysOn,scrollbarStartGap:WA.scrollbarStartGap,scrollbarEndGap:WA.scrollbarEndGap,class:eD,style:lD,containerStyle:lD,getRowHeight:{type:(0,d.Cq)(Function),required:!0},rowKey:cD.rowKey,onRowsRendered:{type:(0,d.Cq)(Function)},onScroll:{type:(0,d.Cq)(Function)}}),pD=(0,d.o8)({cache:hD.cache,estimatedRowHeight:cD.estimatedRowHeight,rowKey:aD,headerClass:{type:(0,d.Cq)([String,Function])},headerProps:{type:(0,d.Cq)([Object,Function])},headerCellProps:{type:(0,d.Cq)([Object,Function])},headerHeight:dD.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:(0,d.Cq)([String,Function])},rowProps:{type:(0,d.Cq)([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:(0,d.Cq)([Object,Function])},columns:tD,data:rD,dataGetter:{type:(0,d.Cq)(Function)},fixedData:nD,expandColumnKey:cD.expandColumnKey,expandedRowKeys:sD,defaultExpandedRowKeys:sD,class:eD,fixed:Boolean,style:{type:(0,d.Cq)(Object)},width:iD,height:iD,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:WA.hScrollbarSize,vScrollbarSize:WA.vScrollbarSize,scrollbarAlwaysOn:YA.alwaysOn,sortBy:{type:(0,d.Cq)(Object),default:()=>({})},sortState:{type:(0,d.Cq)(Object),default:void 0},onColumnSort:{type:(0,d.Cq)(Function)},onExpandedRowsChange:{type:(0,d.Cq)(Function)},onEndReached:{type:(0,d.Cq)(Function)},onRowExpand:cD.onRowExpand,onScroll:hD.onScroll,onRowsRendered:hD.onRowsRendered,rowEventHandlers:cD.rowEventHandlers}),fD=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:n,atYStartEdge:r},o)=>{let s=null,i=0,a=0;const l=(o,s)=>{const i=o<=0&&t.value||o>=0&&e.value,a=s<=0&&r.value||s>=0&&n.value;return i&&a},c=e=>{OA(s);let t=e.deltaX,n=e.deltaY;Math.abs(t)>Math.abs(n)?n=0:t=0,e.shiftKey&&0!==n&&(t=n,n=0),l(i,a)&&l(i+t,a+n)||(i+=t,a+=n,e.preventDefault(),s=xA((()=>{o(i,a),i=0,a=0})))};return{hasReachedEdge:l,onWheel:c}},gD=({name:e,clearCache:t,getColumnPosition:n,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:o,getEstimatedTotalHeight:s,getEstimatedTotalWidth:i,getColumnOffset:u,getRowOffset:d,getRowPosition:p,getRowStartIndexForOffset:f,getRowStopIndexForStartIndex:g,initCache:m,injectToInstance:v,validateProps:w})=>(0,a.aZ)({name:null!=e?e:"ElVirtualList",props:WA,emits:[hA,pA],setup(e,{emit:S,expose:_,slots:E}){const k=(0,y.s3)("vl");w(e);const C=(0,a.FN)(),I=(0,l.iH)(m(e,C));null==v||v(C,I);const A=(0,l.iH)(),T=(0,l.iH)(),R=(0,l.iH)(),x=(0,l.iH)(null),O=(0,l.iH)({isScrolling:!1,scrollLeft:(0,h.hj)(e.initScrollLeft)?e.initScrollLeft:0,scrollTop:(0,h.hj)(e.initScrollTop)?e.initScrollTop:0,updateRequested:!1,xAxisScrollDir:fA,yAxisScrollDir:fA}),N=uA(),P=(0,a.Fl)((()=>Number.parseInt(`${e.height}`,10))),D=(0,a.Fl)((()=>Number.parseInt(`${e.width}`,10))),U=(0,a.Fl)((()=>{const{totalColumn:t,totalRow:n,columnCache:s}=e,{isScrolling:i,xAxisScrollDir:a,scrollLeft:c}=(0,l.SU)(O);if(0===t||0===n)return[0,0,0,0];const u=r(e,c,(0,l.SU)(I)),d=o(e,u,c,(0,l.SU)(I)),h=i&&a!==gA?1:Math.max(1,s),p=i&&a!==fA?1:Math.max(1,s);return[Math.max(0,u-h),Math.max(0,Math.min(t-1,d+p)),u,d]})),L=(0,a.Fl)((()=>{const{totalColumn:t,totalRow:n,rowCache:r}=e,{isScrolling:o,yAxisScrollDir:s,scrollTop:i}=(0,l.SU)(O);if(0===t||0===n)return[0,0,0,0];const a=f(e,i,(0,l.SU)(I)),c=g(e,a,i,(0,l.SU)(I)),u=o&&s!==gA?1:Math.max(1,r),d=o&&s!==fA?1:Math.max(1,r);return[Math.max(0,a-u),Math.max(0,Math.min(n-1,c+d)),a,c]})),B=(0,a.Fl)((()=>s(e,(0,l.SU)(I)))),M=(0,a.Fl)((()=>i(e,(0,l.SU)(I)))),F=(0,a.Fl)((()=>{var t;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:e.direction,height:(0,h.hj)(e.height)?`${e.height}px`:e.height,width:(0,h.hj)(e.width)?`${e.width}px`:e.width},null!=(t=e.style)?t:{}]})),j=(0,a.Fl)((()=>{const e=`${(0,l.SU)(M)}px`,t=`${(0,l.SU)(B)}px`;return{height:t,pointerEvents:(0,l.SU)(O).isScrolling?"none":void 0,width:e}})),z=()=>{const{totalColumn:t,totalRow:n}=e;if(t>0&&n>0){const[e,t,n,r]=(0,l.SU)(U),[o,s,i,a]=(0,l.SU)(L);S(hA,{columnCacheStart:e,columnCacheEnd:t,rowCacheStart:o,rowCacheEnd:s,columnVisibleStart:n,columnVisibleEnd:r,rowVisibleStart:i,rowVisibleEnd:a})}const{scrollLeft:r,scrollTop:o,updateRequested:s,xAxisScrollDir:i,yAxisScrollDir:a}=(0,l.SU)(O);S(pA,{xAxisScrollDir:i,scrollLeft:r,yAxisScrollDir:a,scrollTop:o,updateRequested:s})},$=t=>{const{clientHeight:n,clientWidth:r,scrollHeight:o,scrollLeft:s,scrollTop:i,scrollWidth:c}=t.currentTarget,u=(0,l.SU)(O);if(u.scrollTop===i&&u.scrollLeft===s)return;let d=s;if(JA(e.direction))switch(XA()){case CA:d=-s;break;case AA:d=c-r-s;break}O.value={...u,isScrolling:!0,scrollLeft:d,scrollTop:Math.max(0,Math.min(i,o-n)),updateRequested:!0,xAxisScrollDir:GA(u.scrollLeft,d),yAxisScrollDir:GA(u.scrollTop,i)},(0,a.Y3)((()=>G())),Z(),z()},V=(e,t)=>{const n=(0,l.SU)(P),r=(B.value-n)/t*e;q({scrollTop:Math.min(B.value-n,r)})},H=(e,t)=>{const n=(0,l.SU)(D),r=(M.value-n)/t*e;q({scrollLeft:Math.min(M.value-n,r)})},{onWheel:K}=fD({atXStartEdge:(0,a.Fl)((()=>O.value.scrollLeft<=0)),atXEndEdge:(0,a.Fl)((()=>O.value.scrollLeft>=M.value-(0,l.SU)(D))),atYStartEdge:(0,a.Fl)((()=>O.value.scrollTop<=0)),atYEndEdge:(0,a.Fl)((()=>O.value.scrollTop>=B.value-(0,l.SU)(P)))},((e,t)=>{var n,r,o,s;null==(r=null==(n=T.value)?void 0:n.onMouseUp)||r.call(n),null==(s=null==(o=T.value)?void 0:o.onMouseUp)||s.call(o);const i=(0,l.SU)(D),a=(0,l.SU)(P);q({scrollLeft:Math.min(O.value.scrollLeft+e,M.value-i),scrollTop:Math.min(O.value.scrollTop+t,B.value-a)})})),q=({scrollLeft:e=O.value.scrollLeft,scrollTop:t=O.value.scrollTop})=>{e=Math.max(e,0),t=Math.max(t,0);const n=(0,l.SU)(O);t===n.scrollTop&&e===n.scrollLeft||(O.value={...n,xAxisScrollDir:GA(n.scrollLeft,e),yAxisScrollDir:GA(n.scrollTop,t),scrollLeft:e,scrollTop:t,updateRequested:!0},(0,a.Y3)((()=>G())),Z(),z())},W=(t=0,n=0,r=mA)=>{const o=(0,l.SU)(O);n=Math.max(0,Math.min(n,e.totalColumn-1)),t=Math.max(0,Math.min(t,e.totalRow-1));const a=(0,b.Iz)(k.namespace.value),c=(0,l.SU)(I),h=s(e,c),p=i(e,c);q({scrollLeft:u(e,n,r,o.scrollLeft,c,p>e.width?a:0),scrollTop:d(e,t,r,o.scrollTop,c,h>e.height?a:0)})},Y=(r,o)=>{const{columnWidth:s,direction:i,rowHeight:a}=e,u=N.value(t&&s,t&&a,t&&i),d=`${r},${o}`;if((0,c.RI)(u,d))return u[d];{const[,t]=n(e,o,(0,l.SU)(I)),s=(0,l.SU)(I),a=JA(i),[c,h]=p(e,r,s),[f]=n(e,o,s);return u[d]={position:"absolute",left:a?void 0:`${t}px`,right:a?`${t}px`:void 0,top:`${h}px`,height:`${c}px`,width:`${f}px`},u[d]}},G=()=>{O.value.isScrolling=!1,(0,a.Y3)((()=>{N.value(-1,null,null)}))};(0,a.bv)((()=>{if(!h.C5)return;const{initScrollLeft:t,initScrollTop:n}=e,r=(0,l.SU)(A);r&&((0,h.hj)(t)&&(r.scrollLeft=t),(0,h.hj)(n)&&(r.scrollTop=n)),z()}));const Z=()=>{const{direction:t}=e,{scrollLeft:n,scrollTop:r,updateRequested:o}=(0,l.SU)(O),s=(0,l.SU)(A);if(o&&s){if(t===kA)switch(XA()){case CA:s.scrollLeft=-n;break;case IA:s.scrollLeft=n;break;default:{const{clientWidth:e,scrollWidth:t}=s;s.scrollLeft=t-e-n;break}}else s.scrollLeft=Math.max(0,n);s.scrollTop=Math.max(0,r)}},{resetAfterColumnIndex:J,resetAfterRowIndex:Q,resetAfter:X}=C.proxy;_({windowRef:A,innerRef:x,getItemStyleCache:N,scrollTo:q,scrollToItem:W,states:O,resetAfterColumnIndex:J,resetAfterRowIndex:Q,resetAfter:X});const ee=()=>{const{scrollbarAlwaysOn:t,scrollbarStartGap:n,scrollbarEndGap:r,totalColumn:o,totalRow:s}=e,i=(0,l.SU)(D),c=(0,l.SU)(P),u=(0,l.SU)(M),d=(0,l.SU)(B),{scrollLeft:h,scrollTop:p}=(0,l.SU)(O),f=(0,a.h)(tT,{ref:T,alwaysOn:t,startGap:n,endGap:r,class:k.e("horizontal"),clientSize:i,layout:"horizontal",onScroll:H,ratio:100*i/u,scrollFrom:h/(u-i),total:s,visible:!0}),g=(0,a.h)(tT,{ref:R,alwaysOn:t,startGap:n,endGap:r,class:k.e("vertical"),clientSize:c,layout:"vertical",onScroll:V,ratio:100*c/d,scrollFrom:p/(d-c),total:o,visible:!0});return{horizontalScrollbar:f,verticalScrollbar:g}},te=()=>{var t;const[n,r]=(0,l.SU)(U),[o,s]=(0,l.SU)(L),{data:i,totalColumn:a,totalRow:c,useIsScrolling:u,itemKey:d}=e,h=[];if(c>0&&a>0)for(let e=o;e<=s;e++)for(let o=n;o<=r;o++)h.push(null==(t=E.default)?void 0:t.call(E,{columnIndex:o,data:i,key:d({columnIndex:o,data:i,rowIndex:e}),isScrolling:u?(0,l.SU)(O).isScrolling:void 0,style:Y(e,o),rowIndex:e}));return h},ne=()=>{const t=(0,a.LL)(e.innerElement),n=te();return[(0,a.h)(t,{style:(0,l.SU)(j),ref:x},(0,c.HD)(t)?n:{default:()=>n})]},re=()=>{const t=(0,a.LL)(e.containerElement),{horizontalScrollbar:n,verticalScrollbar:r}=ee(),o=ne();return(0,a.h)("div",{key:0,class:k.e("wrapper"),role:e.role},[(0,a.h)(t,{class:e.className,style:(0,l.SU)(F),onScroll:$,onWheel:K,ref:A},(0,c.HD)(t)?o:{default:()=>o}),n,r])};return re}}),{max:mD,min:yD,floor:vD}=Math,wD={column:"columnWidth",row:"rowHeight"},bD={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},SD=(e,t,n,r)=>{const[o,s,i]=[n[r],e[wD[r]],n[bD[r]]];if(t>i){let e=0;if(i>=0){const t=o[i];e=t.offset+t.size}for(let n=i+1;n<=t;n++){const t=s(n);o[n]={offset:e,size:t},e+=t}n[bD[r]]=t}return o[t]},_D=(e,t,n,r,o,s)=>{while(n<=r){const i=n+vD((r-n)/2),a=SD(e,i,t,s).offset;if(a===o)return i;a<o?n=i+1:r=i-1}return mD(0,n-1)},ED=(e,t,n,r,o)=>{const s="column"===o?e.totalColumn:e.totalRow;let i=1;while(n<s&&SD(e,n,t,o).offset<r)n+=i,i*=2;return _D(e,t,vD(n/2),yD(n,s-1),r,o)},kD=(e,t,n,r)=>{const[o,s]=[t[r],t[bD[r]]],i=s>0?o[s].offset:0;return i>=n?_D(e,t,0,s,n,r):ED(e,t,mD(0,s),n,r)},CD=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:n,row:r})=>{let o=0;if(n>=e&&(n=e-1),n>=0){const e=r[n];o=e.offset+e.size}const s=e-n-1,i=s*t;return o+i},ID=({totalColumn:e},{column:t,estimatedColumnWidth:n,lastVisitedColumnIndex:r})=>{let o=0;if(r>e&&(r=e-1),r>=0){const e=t[r];o=e.offset+e.size}const s=e-r-1,i=s*n;return o+i},AD={column:ID,row:CD},TD=(e,t,n,r,o,s,i)=>{const[a,l]=["row"===s?e.height:e.width,AD[s]],c=SD(e,t,o,s),u=l(e,o),d=mD(0,yD(u-a,c.offset)),h=mD(0,c.offset-a+i+c.size);switch(n===yA&&(n=r>=h-a&&r<=d+a?mA:wA),n){case vA:return d;case bA:return h;case wA:return Math.round(h+(d-h)/2);case mA:default:return r>=h&&r<=d?r:h>d||r<h?h:d}},RD=gD({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,n)=>{const r=SD(e,t,n,"column");return[r.size,r.offset]},getRowPosition:(e,t,n)=>{const r=SD(e,t,n,"row");return[r.size,r.offset]},getColumnOffset:(e,t,n,r,o,s)=>TD(e,t,n,r,o,"column",s),getRowOffset:(e,t,n,r,o,s)=>TD(e,t,n,r,o,"row",s),getColumnStartIndexForOffset:(e,t,n)=>kD(e,n,t,"column"),getColumnStopIndexForStartIndex:(e,t,n,r)=>{const o=SD(e,t,r,"column"),s=n+e.width;let i=o.offset+o.size,a=t;while(a<e.totalColumn-1&&i<s)a++,i+=SD(e,t,r,"column").size;return a},getEstimatedTotalHeight:CD,getEstimatedTotalWidth:ID,getRowStartIndexForOffset:(e,t,n)=>kD(e,n,t,"row"),getRowStopIndexForStartIndex:(e,t,n,r)=>{const{totalRow:o,height:s}=e,i=SD(e,t,r,"row"),a=n+s;let l=i.size+i.offset,c=t;while(c<o-1&&l<a)c++,l+=SD(e,c,r,"row").size;return c},injectToInstance:(e,t)=>{const n=({columnIndex:n,rowIndex:r},o)=>{var s,i;o=!!(0,wr.o8)(o)||o,(0,h.hj)(n)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,n-1)),(0,h.hj)(r)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,r-1)),null==(s=e.exposed)||s.getItemStyleCache.value(-1,null,null),o&&(null==(i=e.proxy)||i.$forceUpdate())},r=(e,t)=>{n({columnIndex:e},t)},o=(e,t)=>{n({rowIndex:e},t)};Object.assign(e.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:o,resetAfter:n})},initCache:({estimatedColumnWidth:e=dA,estimatedRowHeight:t=dA})=>{const n={column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}};return n},clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{0}}),xD=gD({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:n},r,o,s,i,a)=>{n=Number(n);const l=Math.max(0,e*t-n),c=Math.min(l,r*t),u=Math.max(0,r*t-n+a+t);switch("smart"===o&&(o=s>=u-n&&s<=c+n?mA:wA),o){case vA:return c;case bA:return u;case wA:{const e=Math.round(u+(c-u)/2);return e<Math.ceil(n/2)?0:e>l+Math.floor(n/2)?l:e}case mA:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getRowOffset:({rowHeight:e,height:t,totalRow:n},r,o,s,i,a)=>{t=Number(t);const l=Math.max(0,n*e-t),c=Math.min(l,r*e),u=Math.max(0,r*e-t+a+e);switch(o===yA&&(o=s>=u-t&&s<=c+t?mA:wA),o){case vA:return c;case bA:return u;case wA:{const e=Math.round(u+(c-u)/2);return e<Math.ceil(t/2)?0:e>l+Math.floor(t/2)?l:e}case mA:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:n},r,o)=>{const s=r*e,i=Math.ceil((n+o-s)/e);return Math.max(0,Math.min(t-1,r+i-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:n},r,o)=>{const s=r*e,i=Math.ceil((n+o-s)/e);return Math.max(0,Math.min(t-1,r+i-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{0}}),OD="ElTableV2Header",ND=(0,a.aZ)({name:OD,props:dD,setup(e,{slots:t,expose:n}){const r=(0,y.s3)("table-v2"),o=(0,l.iH)(),s=(0,a.Fl)((()=>GP({width:e.width,height:e.height}))),i=(0,a.Fl)((()=>GP({width:e.rowWidth,height:e.height}))),c=(0,a.Fl)((()=>xg((0,l.SU)(e.headerHeight)))),u=e=>{const t=(0,l.SU)(o);(0,a.Y3)((()=>{(null==t?void 0:t.scroll)&&t.scroll({left:e})}))},d=()=>{const n=r.e("fixed-header-row"),{columns:o,fixedHeaderData:s,rowHeight:i}=e;return null==s?void 0:s.map(((e,r)=>{var s;const a=GP({height:i,width:"100%"});return null==(s=t.fixed)?void 0:s.call(t,{class:n,columns:o,rowData:e,rowIndex:-(r+1),style:a})}))},h=()=>{const n=r.e("dynamic-header-row"),{columns:o}=e;return(0,l.SU)(c).map(((e,r)=>{var s;const i=GP({width:"100%",height:e});return null==(s=t.dynamic)?void 0:s.call(t,{class:n,columns:o,headerIndex:r,style:i})}))};return n({scrollToLeft:u}),()=>{if(!(e.height<=0))return(0,a.Wm)("div",{ref:o,class:e.class,style:(0,l.SU)(s),role:"rowgroup"},[(0,a.Wm)("div",{style:(0,l.SU)(i),class:r.e("header")},[h(),d()])])}}}),PD="ElTableV2Grid",DD=e=>{const t=(0,l.iH)(),n=(0,l.iH)(),r=(0,a.Fl)((()=>{const{data:t,rowHeight:n,estimatedRowHeight:r}=e;if(!r)return t.length*n})),o=(0,a.Fl)((()=>{const{fixedData:t,rowHeight:n}=e;return((null==t?void 0:t.length)||0)*n})),s=(0,a.Fl)((()=>WP(e.headerHeight))),i=(0,a.Fl)((()=>{const{height:t}=e;return Math.max(0,t-(0,l.SU)(s)-(0,l.SU)(o))})),u=(0,a.Fl)((()=>(0,l.SU)(s)+(0,l.SU)(o)>0)),d=({data:t,rowIndex:n})=>t[n][e.rowKey];function h({rowCacheStart:t,rowCacheEnd:n,rowVisibleStart:r,rowVisibleEnd:o}){var s;null==(s=e.onRowsRendered)||s.call(e,{rowCacheStart:t,rowCacheEnd:n,rowVisibleStart:r,rowVisibleEnd:o})}function p(e,t){var r;null==(r=n.value)||r.resetAfterRowIndex(e,t)}function f(e,r){const o=(0,l.SU)(t),s=(0,l.SU)(n);o&&s&&((0,c.Kn)(e)?(o.scrollToLeft(e.scrollLeft),s.scrollTo(e)):(o.scrollToLeft(e),s.scrollTo({scrollLeft:e,scrollTop:r})))}function g(e){var t;null==(t=(0,l.SU)(n))||t.scrollTo({scrollTop:e})}function m(e,t){var r;null==(r=(0,l.SU)(n))||r.scrollToItem(e,1,t)}function y(){var e,r;null==(e=(0,l.SU)(n))||e.$forceUpdate(),null==(r=(0,l.SU)(t))||r.$forceUpdate()}return{bodyRef:n,forceUpdate:y,fixedRowHeight:o,gridHeight:i,hasHeader:u,headerHeight:s,headerRef:t,totalHeight:r,itemKey:d,onItemRendered:h,resetAfterRowIndex:p,scrollTo:f,scrollToTop:g,scrollToRow:m}},UD=(0,a.aZ)({name:PD,props:hD,setup(e,{slots:t,expose:n}){const{ns:r}=(0,a.f3)(XP),{bodyRef:o,fixedRowHeight:s,gridHeight:i,hasHeader:c,headerRef:u,headerHeight:d,totalHeight:p,forceUpdate:f,itemKey:g,onItemRendered:m,resetAfterRowIndex:y,scrollTo:v,scrollToTop:w,scrollToRow:b}=DD(e);n({forceUpdate:f,totalHeight:p,scrollTo:v,scrollToTop:w,scrollToRow:b,resetAfterRowIndex:y});const S=()=>e.bodyWidth;return()=>{const{cache:n,columns:p,data:f,fixedData:y,useIsScrolling:v,scrollbarAlwaysOn:w,scrollbarEndGap:b,scrollbarStartGap:_,style:E,rowHeight:k,bodyWidth:C,estimatedRowHeight:I,headerWidth:A,height:T,width:R,getRowHeight:x,onScroll:O}=e,N=(0,h.hj)(I),P=N?RD:xD,D=(0,l.SU)(d);return(0,a.Wm)("div",{role:"table",class:[r.e("table"),e.class],style:E},[(0,a.Wm)(P,{ref:o,data:f,useIsScrolling:v,itemKey:g,columnCache:0,columnWidth:N?S:C,totalColumn:1,totalRow:f.length,rowCache:n,rowHeight:N?x:k,width:R,height:(0,l.SU)(i),class:r.e("body"),role:"rowgroup",scrollbarStartGap:_,scrollbarEndGap:b,scrollbarAlwaysOn:w,onScroll:O,onItemRendered:m,perfMode:!1},{default:e=>{var n;const r=f[e.rowIndex];return null==(n=t.row)?void 0:n.call(t,{...e,columns:p,rowData:r})}}),(0,l.SU)(c)&&(0,a.Wm)(ND,{ref:u,class:r.e("header-wrapper"),columns:p,headerData:f,headerHeight:e.headerHeight,fixedHeaderData:y,rowWidth:A,rowHeight:k,width:R,height:Math.min(D+(0,l.SU)(s),T)},{dynamic:t.header,fixed:t.row})])}}});function LD(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,a.lA)(e)}const BD=(e,{slots:t})=>{const{mainTableRef:n,...r}=e;return(0,a.Wm)(UD,(0,a.dG)({ref:n},r),LD(t)?t:{default:()=>[t]})};function MD(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,a.lA)(e)}const FD=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:n,...r}=e;return(0,a.Wm)(UD,(0,a.dG)({ref:n},r),MD(t)?t:{default:()=>[t]})};function jD(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,a.lA)(e)}const zD=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:n,...r}=e;return(0,a.Wm)(UD,(0,a.dG)({ref:n},r),jD(t)?t:{default:()=>[t]})},$D=e=>{const{isScrolling:t}=(0,a.f3)(XP),n=(0,l.iH)(!1),r=(0,l.iH)(),o=(0,a.Fl)((()=>(0,h.hj)(e.estimatedRowHeight)&&e.rowIndex>=0)),s=(t=!1)=>{const o=(0,l.SU)(r);if(!o)return;const{columns:s,onRowHeightChange:i,rowKey:c,rowIndex:u,style:d}=e,{height:h}=o.getBoundingClientRect();n.value=!0,(0,a.Y3)((()=>{if(t||h!==Number.parseInt(d.height)){const e=s[0],t=(null==e?void 0:e.placeholderSign)===jP;null==i||i({rowKey:c,height:h,rowIndex:u},e&&!t&&e.fixed)}}))},i=(0,a.Fl)((()=>{const{rowData:t,rowIndex:n,rowKey:r,onRowHover:o}=e,s=e.rowEventHandlers||{},i={};return Object.entries(s).forEach((([e,o])=>{(0,c.mf)(o)&&(i[e]=e=>{o({event:e,rowData:t,rowIndex:n,rowKey:r})})})),o&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach((({name:e,hovered:s})=>{const a=i[e];i[e]=e=>{o({event:e,hovered:s,rowData:t,rowIndex:n,rowKey:r}),null==a||a(e)}})),i})),u=t=>{const{onRowExpand:n,rowData:r,rowIndex:o,rowKey:s}=e;null==n||n({expanded:t,rowData:r,rowIndex:o,rowKey:s})};return(0,a.bv)((()=>{(0,l.SU)(o)&&s(!0)})),{isScrolling:t,measurable:o,measured:n,rowRef:r,eventHandlers:i,onExpand:u}},VD="ElTableV2TableRow",HD=(0,a.aZ)({name:VD,props:cD,setup(e,{expose:t,slots:n,attrs:r}){const{eventHandlers:o,isScrolling:s,measurable:i,measured:u,rowRef:d,onExpand:h}=$D(e);return t({onExpand:h}),()=>{const{columns:t,columnsStyles:p,expandColumnKey:f,depth:g,rowData:m,rowIndex:y,style:v}=e;let w=t.map(((e,r)=>{const o=(0,c.kJ)(m.children)&&m.children.length>0&&e.key===f;return n.cell({column:e,columns:t,columnIndex:r,depth:g,style:p[e.key],rowData:m,rowIndex:y,isScrolling:(0,l.SU)(s),expandIconProps:o?{rowData:m,rowIndex:y,onExpand:h}:void 0})}));if(n.row&&(w=n.row({cells:w.map((e=>(0,c.kJ)(e)&&1===e.length?e[0]:e)),style:v,columns:t,depth:g,rowData:m,rowIndex:y,isScrolling:(0,l.SU)(s)})),(0,l.SU)(i)){const{height:t,...n}=v||{},s=(0,l.SU)(u);return(0,a.Wm)("div",(0,a.dG)({ref:d,class:e.class,style:s?v:n,role:"row"},r,(0,l.SU)(o)),[w])}return(0,a.Wm)("div",(0,a.dG)(r,{ref:d,class:e.class,style:v,role:"row"},(0,l.SU)(o)),[w])}}});function KD(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,a.lA)(e)}const qD=(e,{slots:t})=>{const{columns:n,columnsStyles:r,depthMap:o,expandColumnKey:s,expandedRowKeys:i,estimatedRowHeight:l,hasFixedColumns:c,hoveringRowKey:u,rowData:d,rowIndex:h,style:p,isScrolling:f,rowProps:g,rowClass:m,rowKey:y,rowEventHandlers:v,ns:w,onRowHovered:b,onRowExpanded:S}=e,_=YP(m,{columns:n,rowData:d,rowIndex:h},""),E=YP(g,{columns:n,rowData:d,rowIndex:h}),k=d[y],C=o[k]||0,I=Boolean(s),A=h<0,T=[w.e("row"),_,{[w.e(`row-depth-${C}`)]:I&&h>=0,[w.is("expanded")]:I&&i.includes(k),[w.is("hovered")]:!f&&k===u,[w.is("fixed")]:!C&&A,[w.is("customized")]:Boolean(t.row)}],R=c?b:void 0,x={...E,columns:n,columnsStyles:r,class:T,depth:C,expandColumnKey:s,estimatedRowHeight:A?void 0:l,isScrolling:f,rowIndex:h,rowData:d,rowKey:k,rowEventHandlers:v,style:p};return(0,a.Wm)(HD,(0,a.dG)(x,{onRowHover:R,onRowExpand:S}),KD(t)?t:{default:()=>[t]})},WD=(e,{slots:t})=>{var n;const{cellData:r,style:o}=e,s=(null==(n=null==r?void 0:r.toString)?void 0:n.call(r))||"";return(0,a.Wm)("div",{class:e.class,title:s,style:o},[t.default?t.default(e):s])};WD.displayName="ElTableV2Cell",WD.inheritAttrs=!1;const YD=e=>{const{expanded:t,expandable:n,onExpand:r,style:o,size:s}=e,i={onClick:n?()=>r(!t):void 0,class:e.class};return(0,a.Wm)(T.gn,(0,a.dG)(i,{size:s,style:o}),{default:()=>[(0,a.Wm)(ae.olP,null,null)]})},GD=({columns:e,column:t,columnIndex:n,depth:r,expandIconProps:o,isScrolling:s,rowData:i,rowIndex:l,style:u,expandedRowKeys:d,ns:h,cellProps:p,expandColumnKey:f,indentSize:g,iconSize:m,rowKey:y},{slots:v})=>{const w=GP(u);if(t.placeholderSign===jP)return(0,a.Wm)("div",{class:h.em("row-cell","placeholder"),style:w},null);const{cellRenderer:b,dataKey:S,dataGetter:_}=t,E=ZP(b),k=E||v.default||(e=>(0,a.Wm)(WD,e,null)),C=(0,c.mf)(_)?_({columns:e,column:t,columnIndex:n,rowData:i,rowIndex:l}):(0,qk.Z)(i,null!=S?S:""),I=YP(p,{cellData:C,columns:e,column:t,columnIndex:n,rowIndex:l,rowData:i}),A={class:h.e("cell-text"),columns:e,column:t,columnIndex:n,cellData:C,isScrolling:s,rowData:i,rowIndex:l},T=k(A),R=[h.e("row-cell"),t.class,t.align===BP.CENTER&&h.is("align-center"),t.align===BP.RIGHT&&h.is("align-right")],x=l>=0&&t.key===f,O=l>=0&&d.includes(i[y]);let N;const P=`margin-inline-start: ${r*g}px;`;return x&&(N=(0,c.Kn)(o)?(0,a.Wm)(YD,(0,a.dG)(o,{class:[h.e("expand-icon"),h.is("expanded",O)],size:m,expanded:O,style:P,expandable:!0}),null):(0,a.Wm)("div",{style:[P,`width: ${m}px; height: ${m}px;`].join(" ")},null)),(0,a.Wm)("div",(0,a.dG)({class:R,style:w},I,{role:"cell"}),[N,T])};GD.inheritAttrs=!1;const ZD=(0,d.o8)({class:String,columns:tD,columnsStyles:{type:(0,d.Cq)(Object),required:!0},headerIndex:Number,style:{type:(0,d.Cq)(Object)}}),JD=(0,a.aZ)({name:"ElTableV2HeaderRow",props:ZD,setup(e,{slots:t}){return()=>{const{columns:n,columnsStyles:r,headerIndex:o,style:s}=e;let i=n.map(((e,s)=>t.cell({columns:n,column:e,columnIndex:s,headerIndex:o,style:r[e.key]})));return t.header&&(i=t.header({cells:i.map((e=>(0,c.kJ)(e)&&1===e.length?e[0]:e)),columns:n,headerIndex:o})),(0,a.Wm)("div",{class:e.class,style:s,role:"row"},[i])}}});function QD(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,a.lA)(e)}const XD=({columns:e,columnsStyles:t,headerIndex:n,style:r,headerClass:o,headerProps:s,ns:i},{slots:l})=>{const c={columns:e,headerIndex:n},u=[i.e("header-row"),YP(o,c,""),{[i.is("customized")]:Boolean(l.header)}],d={...YP(s,c),columnsStyles:t,class:u,columns:e,headerIndex:n,style:r};return(0,a.Wm)(JD,d,QD(l)?l:{default:()=>[l]})},eU=(e,{slots:t})=>{var n,r;return t.default?t.default(e):(0,a.Wm)("div",{class:e.class,title:null==(n=e.column)?void 0:n.title},[null==(r=e.column)?void 0:r.title])};eU.displayName="ElTableV2HeaderCell",eU.inheritAttrs=!1;const tU=e=>{const{sortOrder:t}=e;return(0,a.Wm)(T.gn,{size:14,class:e.class},{default:()=>[t===LP.ASC?(0,a.Wm)(ae.Ncu,null,null):(0,a.Wm)(ae.laI,null,null)]})},nU=(e,{slots:t})=>{const{column:n,ns:r,style:o,onColumnSorted:s}=e,i=GP(o);if(n.placeholderSign===jP)return(0,a.Wm)("div",{class:r.em("header-row-cell","placeholder"),style:i},null);const{headerCellRenderer:l,headerClass:c,sortable:u}=n,d={...e,class:r.e("header-cell-text")},h=ZP(l)||t.default||(e=>(0,a.Wm)(eU,e,null)),p=h(d),{sortBy:f,sortState:g,headerCellProps:m}=e;let y,v;if(g){const e=g[n.key];y=Boolean(FP[e]),v=y?e:LP.ASC}else y=n.key===f.key,v=y?f.order:LP.ASC;const w=[r.e("header-cell"),YP(c,e,""),n.align===BP.CENTER&&r.is("align-center"),n.align===BP.RIGHT&&r.is("align-right"),u&&r.is("sortable")],b={...YP(m,e),onClick:n.sortable?s:void 0,class:w,style:i,["data-key"]:n.key};return(0,a.Wm)("div",(0,a.dG)(b,{role:"columnheader"}),[p,u&&(0,a.Wm)(tU,{class:[r.e("sort-icon"),y&&r.is("sorting")],sortOrder:v},null)])},rU=(e,{slots:t})=>{var n;return(0,a.Wm)("div",{class:e.class,style:e.style},[null==(n=t.default)?void 0:n.call(t)])};rU.displayName="ElTableV2Footer";const oU=(e,{slots:t})=>(0,a.Wm)("div",{class:e.class,style:e.style},[t.default?t.default():(0,a.Wm)(qS,null,null)]);oU.displayName="ElTableV2Empty";const sU=(e,{slots:t})=>{var n;return(0,a.Wm)("div",{class:e.class,style:e.style},[null==(n=t.default)?void 0:n.call(t)])};function iU(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,a.lA)(e)}sU.displayName="ElTableV2Overlay";const aU="ElTableV2",lU=(0,a.aZ)({name:aU,props:pD,setup(e,{slots:t,expose:n}){const r=(0,y.s3)("table-v2"),{columnsStyles:o,fixedColumnsOnLeft:s,fixedColumnsOnRight:i,mainColumns:c,mainTableHeight:u,fixedTableHeight:d,leftTableWidth:h,rightTableWidth:p,data:f,depthMap:g,expandedRowKeys:m,hasFixedColumns:v,hoveringRowKey:w,mainTableRef:b,leftTableRef:S,rightTableRef:_,isDynamic:E,isResetting:k,isScrolling:C,bodyWidth:I,emptyStyle:A,rootStyle:T,headerWidth:R,footerHeight:x,showEmpty:O,scrollTo:N,scrollToLeft:P,scrollToTop:D,scrollToRow:U,getRowHeight:L,onColumnSorted:B,onRowHeightChange:M,onRowHovered:F,onRowExpanded:j,onRowsRendered:z,onScroll:$,onVerticalScroll:V}=QP(e);return n({scrollTo:N,scrollToLeft:P,scrollToTop:D,scrollToRow:U}),(0,a.JJ)(XP,{ns:r,isResetting:k,hoveringRowKey:w,isScrolling:C}),()=>{const{cache:n,cellProps:y,estimatedRowHeight:k,expandColumnKey:C,fixedData:N,headerHeight:P,headerClass:D,headerProps:U,headerCellProps:H,sortBy:K,sortState:q,rowHeight:W,rowClass:Y,rowEventHandlers:G,rowKey:Z,rowProps:J,scrollbarAlwaysOn:Q,indentSize:X,iconSize:ee,useIsScrolling:te,vScrollbarSize:ne,width:re}=e,oe=(0,l.SU)(f),se={cache:n,class:r.e("main"),columns:(0,l.SU)(c),data:oe,fixedData:N,estimatedRowHeight:k,bodyWidth:(0,l.SU)(I),headerHeight:P,headerWidth:(0,l.SU)(R),height:(0,l.SU)(u),mainTableRef:b,rowKey:Z,rowHeight:W,scrollbarAlwaysOn:Q,scrollbarStartGap:2,scrollbarEndGap:ne,useIsScrolling:te,width:re,getRowHeight:L,onRowsRendered:z,onScroll:$},ie=(0,l.SU)(h),ae=(0,l.SU)(d),le={cache:n,class:r.e("left"),columns:(0,l.SU)(s),data:oe,estimatedRowHeight:k,leftTableRef:S,rowHeight:W,bodyWidth:ie,headerWidth:ie,headerHeight:P,height:ae,rowKey:Z,scrollbarAlwaysOn:Q,scrollbarStartGap:2,scrollbarEndGap:ne,useIsScrolling:te,width:ie,getRowHeight:L,onScroll:V},ce=(0,l.SU)(p),ue=ce+ne,de={cache:n,class:r.e("right"),columns:(0,l.SU)(i),data:oe,estimatedRowHeight:k,rightTableRef:_,rowHeight:W,bodyWidth:ue,headerWidth:ue,headerHeight:P,height:ae,rowKey:Z,scrollbarAlwaysOn:Q,scrollbarStartGap:2,scrollbarEndGap:ne,width:ue,style:`--${(0,l.SU)(r.namespace)}-table-scrollbar-size: ${ne}px`,useIsScrolling:te,getRowHeight:L,onScroll:V},he=(0,l.SU)(o),pe={ns:r,depthMap:(0,l.SU)(g),columnsStyles:he,expandColumnKey:C,expandedRowKeys:(0,l.SU)(m),estimatedRowHeight:k,hasFixedColumns:(0,l.SU)(v),hoveringRowKey:(0,l.SU)(w),rowProps:J,rowClass:Y,rowKey:Z,rowEventHandlers:G,onRowHovered:F,onRowExpanded:j,onRowHeightChange:M},fe={cellProps:y,expandColumnKey:C,indentSize:X,iconSize:ee,rowKey:Z,expandedRowKeys:(0,l.SU)(m),ns:r},ge={ns:r,headerClass:D,headerProps:U,columnsStyles:he},me={ns:r,sortBy:K,sortState:q,headerCellProps:H,onColumnSorted:B},ye={row:e=>(0,a.Wm)(qD,(0,a.dG)(e,pe),{row:t.row,cell:e=>{let n;return t.cell?(0,a.Wm)(GD,(0,a.dG)(e,fe,{style:he[e.column.key]}),iU(n=t.cell(e))?n:{default:()=>[n]}):(0,a.Wm)(GD,(0,a.dG)(e,fe,{style:he[e.column.key]}),null)}}),header:e=>(0,a.Wm)(XD,(0,a.dG)(e,ge),{header:t.header,cell:e=>{let n;return t["header-cell"]?(0,a.Wm)(nU,(0,a.dG)(e,me,{style:he[e.column.key]}),iU(n=t["header-cell"](e))?n:{default:()=>[n]}):(0,a.Wm)(nU,(0,a.dG)(e,me,{style:he[e.column.key]}),null)}})},ve=[e.class,r.b(),r.e("root"),{[r.is("dynamic")]:(0,l.SU)(E)}],we={class:r.e("footer"),style:(0,l.SU)(x)};return(0,a.Wm)("div",{class:ve,style:(0,l.SU)(T)},[(0,a.Wm)(BD,se,iU(ye)?ye:{default:()=>[ye]}),(0,a.Wm)(FD,le,iU(ye)?ye:{default:()=>[ye]}),(0,a.Wm)(zD,de,iU(ye)?ye:{default:()=>[ye]}),t.footer&&(0,a.Wm)(rU,we,{default:t.footer}),(0,l.SU)(O)&&(0,a.Wm)(oU,{class:r.e("empty"),style:(0,l.SU)(A)},{default:t.empty}),t.overlay&&(0,a.Wm)(sU,{class:r.e("overlay")},{default:t.overlay})])}}}),cU=(0,d.o8)({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:(0,d.Cq)(Function)}}),uU=e=>{const t=(0,l.iH)(),n=(0,l.iH)(0),r=(0,l.iH)(0);let o;return(0,a.bv)((()=>{o=(0,u.yU7)(t,(([e])=>{const{width:t,height:o}=e.contentRect,{paddingLeft:s,paddingRight:i,paddingTop:a,paddingBottom:l}=getComputedStyle(e.target),c=Number.parseInt(s)||0,u=Number.parseInt(i)||0,d=Number.parseInt(a)||0,h=Number.parseInt(l)||0;n.value=t-c-u,r.value=o-d-h})).stop})),(0,a.Jd)((()=>{null==o||o()})),(0,a.YP)([n,r],(([t,n])=>{var r;null==(r=e.onResize)||r.call(e,{width:t,height:n})})),{sizer:t,width:n,height:r}},dU=(0,a.aZ)({name:"ElAutoResizer",props:cU,setup(e,{slots:t}){const n=(0,y.s3)("auto-resizer"),{height:r,width:o,sizer:s}=uU(e),i={width:"100%",height:"100%"};return()=>{var e;return(0,a.Wm)("div",{ref:s,class:n.b(),style:i},[null==(e=t.default)?void 0:e.call(t,{height:r.value,width:o.value})])}}}),hU=(0,C.nz)(lU),pU=(0,C.nz)(dU),fU=Symbol("tabsRootContextKey"),gU=(0,d.o8)({tabs:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])}}),mU="ElTabBar",yU=(0,a.aZ)({name:mU}),vU=(0,a.aZ)({...yU,props:gU,setup(e,{expose:t}){const n=e,r=(0,a.FN)(),o=(0,a.f3)(fU);o||(0,w._)(mU,"<el-tabs><el-tab-bar /></el-tabs>");const s=(0,y.s3)("tabs"),i=(0,l.iH)(),d=(0,l.iH)(),h=()=>{let e=0,t=0;const s=["top","bottom"].includes(o.props.tabPosition)?"width":"height",i="width"===s?"x":"y",a="x"===i?"left":"top";return n.tabs.every((o=>{var i,l;const c=null==(l=null==(i=r.parent)?void 0:i.refs)?void 0:l[`tab-${o.uid}`];if(!c)return!1;if(!o.active)return!0;e=c[`offset${kf(a)}`],t=c[`client${kf(s)}`];const u=window.getComputedStyle(c);return"width"===s&&(n.tabs.length>1&&(t-=Number.parseFloat(u.paddingLeft)+Number.parseFloat(u.paddingRight)),e+=Number.parseFloat(u.paddingLeft)),!1})),{[s]:`${t}px`,transform:`translate${kf(i)}(${e}px)`}},p=()=>d.value=h();return(0,a.YP)((()=>n.tabs),(async()=>{await(0,a.Y3)(),p()}),{immediate:!0}),(0,u.yU7)(i,(()=>p())),t({ref:i,update:p}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"barRef",ref:i,class:(0,c.C_)([(0,l.SU)(s).e("active-bar"),(0,l.SU)(s).is((0,l.SU)(o).props.tabPosition)]),style:(0,c.j5)(d.value)},null,6))}});var wU=(0,m.Z)(vU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const bU=(0,d.o8)({panes:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),SU={tabClick:(e,t,n)=>n instanceof Event,tabRemove:(e,t)=>t instanceof Event},_U="ElTabNav",EU=(0,a.aZ)({name:_U,props:bU,emits:SU,setup(e,{expose:t,emit:n}){const r=(0,a.FN)(),o=(0,a.f3)(fU);o||(0,w._)(_U,"<el-tabs><tab-nav /></el-tabs>");const s=(0,y.s3)("tabs"),i=(0,u.xKQ)(),c=(0,u.vou)(),d=(0,l.iH)(),h=(0,l.iH)(),p=(0,l.iH)(),f=(0,l.iH)(),g=(0,l.iH)(!1),m=(0,l.iH)(0),v=(0,l.iH)(!1),b=(0,l.iH)(!0),S=(0,a.Fl)((()=>["top","bottom"].includes(o.props.tabPosition)?"width":"height")),_=(0,a.Fl)((()=>{const e="width"===S.value?"X":"Y";return{transform:`translate${e}(-${m.value}px)`}})),E=()=>{if(!d.value)return;const e=d.value[`offset${kf(S.value)}`],t=m.value;if(!t)return;const n=t>e?t-e:0;m.value=n},k=()=>{if(!d.value||!h.value)return;const e=h.value[`offset${kf(S.value)}`],t=d.value[`offset${kf(S.value)}`],n=m.value;if(e-n<=t)return;const r=e-n>2*t?n+t:e-t;m.value=r},C=async()=>{const e=h.value;if(!g.value||!p.value||!d.value||!e)return;await(0,a.Y3)();const t=p.value.querySelector(".is-active");if(!t)return;const n=d.value,r=["top","bottom"].includes(o.props.tabPosition),s=t.getBoundingClientRect(),i=n.getBoundingClientRect(),l=r?e.offsetWidth-i.width:e.offsetHeight-i.height,c=m.value;let u=c;r?(s.left<i.left&&(u=c-(i.left-s.left)),s.right>i.right&&(u=c+s.right-i.right)):(s.top<i.top&&(u=c-(i.top-s.top)),s.bottom>i.bottom&&(u=c+(s.bottom-i.bottom))),u=Math.max(u,0),m.value=Math.min(u,l)},I=()=>{var t;if(!h.value||!d.value)return;e.stretch&&(null==(t=f.value)||t.update());const n=h.value[`offset${kf(S.value)}`],r=d.value[`offset${kf(S.value)}`],o=m.value;r<n?(g.value=g.value||{},g.value.prev=o,g.value.next=o+r<n,n-o<r&&(m.value=n-r)):(g.value=!1,o>0&&(m.value=0))},A=e=>{const t=e.code,{up:n,down:r,left:o,right:s}=Jn.n;if(![n,r,o,s].includes(t))return;const i=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),a=i.indexOf(e.target);let l;l=t===o||t===n?0===a?i.length-1:a-1:a<i.length-1?a+1:0,i[l].focus({preventScroll:!0}),i[l].click(),R()},R=()=>{b.value&&(v.value=!0)},x=()=>v.value=!1;return(0,a.YP)(i,(e=>{"hidden"===e?b.value=!1:"visible"===e&&setTimeout((()=>b.value=!0),50)})),(0,a.YP)(c,(e=>{e?setTimeout((()=>b.value=!0),50):b.value=!1})),(0,u.yU7)(p,I),(0,a.bv)((()=>setTimeout((()=>C()),0))),(0,a.ic)((()=>I())),t({scrollToActiveTab:C,removeFocus:x}),(0,a.YP)((()=>e.panes),(()=>r.update()),{flush:"post",deep:!0}),()=>{const t=g.value?[(0,a.Wm)("span",{class:[s.e("nav-prev"),s.is("disabled",!g.value.prev)],onClick:E},[(0,a.Wm)(T.gn,null,{default:()=>[(0,a.Wm)(ae.XdH,null,null)]})]),(0,a.Wm)("span",{class:[s.e("nav-next"),s.is("disabled",!g.value.next)],onClick:k},[(0,a.Wm)(T.gn,null,{default:()=>[(0,a.Wm)(ae.olP,null,null)]})])]:null,r=e.panes.map(((t,r)=>{var i,l,c,u;const d=t.uid,h=t.props.disabled,p=null!=(l=null!=(i=t.props.name)?i:t.index)?l:`${r}`,f=!h&&(t.isClosable||e.editable);t.index=`${r}`;const g=f?(0,a.Wm)(T.gn,{class:"is-icon-close",onClick:e=>n("tabRemove",t,e)},{default:()=>[(0,a.Wm)(ae.x8P,null,null)]}):null,m=(null==(u=(c=t.slots).label)?void 0:u.call(c))||t.props.label,y=!h&&t.active?0:-1;return(0,a.Wm)("div",{ref:`tab-${d}`,class:[s.e("item"),s.is(o.props.tabPosition),s.is("active",t.active),s.is("disabled",h),s.is("closable",f),s.is("focus",v.value)],id:`tab-${p}`,key:`tab-${d}`,"aria-controls":`pane-${p}`,role:"tab","aria-selected":t.active,tabindex:y,onFocus:()=>R(),onBlur:()=>x(),onClick:e=>{x(),n("tabClick",t,p,e)},onKeydown:e=>{!f||e.code!==Jn.n["delete"]&&e.code!==Jn.n.backspace||n("tabRemove",t,e)}},[m,g])}));return(0,a.Wm)("div",{ref:p,class:[s.e("nav-wrap"),s.is("scrollable",!!g.value),s.is(o.props.tabPosition)]},[t,(0,a.Wm)("div",{class:s.e("nav-scroll"),ref:d},[(0,a.Wm)("div",{class:[s.e("nav"),s.is(o.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:h,style:_.value,role:"tablist",onKeydown:A},[e.type?null:(0,a.Wm)(wU,{ref:f,tabs:[...e.panes]},null),r])])])}}}),kU=(0,d.o8)({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:(0,d.Cq)(Function),default:()=>!0},stretch:Boolean}),CU=e=>(0,c.HD)(e)||(0,h.hj)(e),IU={[p.f_]:e=>CU(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>CU(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>CU(e),tabAdd:()=>!0};var AU=(0,a.aZ)({name:"ElTabs",props:kU,emits:IU,setup(e,{emit:t,slots:n,expose:r}){var o,s;const i=(0,y.s3)("tabs"),{children:c,addChild:u,removeChild:d}=ni((0,a.FN)(),"ElTabPane"),h=(0,l.iH)(),f=(0,l.iH)(null!=(s=null!=(o=e.modelValue)?o:e.activeName)?s:"0"),g=e=>{f.value=e,t(p.f_,e),t("tabChange",e)},m=async t=>{var n,r,o;if(f.value!==t&&!(0,wr.o8)(t))try{const s=await(null==(n=e.beforeLeave)?void 0:n.call(e,t,f.value));!1!==s&&(g(t),null==(o=null==(r=h.value)?void 0:r.removeFocus)||o.call(r))}catch(nB){}},v=(e,n,r)=>{e.props.disabled||(m(n),t("tabClick",e,r))},w=(e,n)=>{e.props.disabled||(0,wr.o8)(e.props.name)||(n.stopPropagation(),t("edit",e.props.name,"remove"),t("tabRemove",e.props.name))},b=()=>{t("edit",void 0,"add"),t("tabAdd")};return(0,Os.A)({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},(0,a.Fl)((()=>!!e.activeName))),(0,a.YP)((()=>e.activeName),(e=>m(e))),(0,a.YP)((()=>e.modelValue),(e=>m(e))),(0,a.YP)(f,(async()=>{var e;await(0,a.Y3)(),null==(e=h.value)||e.scrollToActiveTab()})),(0,a.JJ)(fU,{props:e,currentName:f,registerPane:u,unregisterPane:d}),r({currentName:f}),()=>{const t=e.editable||e.addable?(0,a.Wm)("span",{class:i.e("new-tab"),tabindex:"0",onClick:b,onKeydown:e=>{e.code===Jn.n.enter&&b()}},[(0,a.Wm)(T.gn,{class:i.is("icon-plus")},{default:()=>[(0,a.Wm)(ae.v37,null,null)]})]):null,r=(0,a.Wm)("div",{class:[i.e("header"),i.is(e.tabPosition)]},[t,(0,a.Wm)(EU,{ref:h,currentName:f.value,editable:e.editable,type:e.type,panes:c.value,stretch:e.stretch,onTabClick:v,onTabRemove:w},null)]),o=(0,a.Wm)("div",{class:i.e("content")},[(0,a.WI)(n,"default")]);return(0,a.Wm)("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:"card"===e.type,[i.m("border-card")]:"border-card"===e.type}]},[..."bottom"!==e.tabPosition?[r,o]:[o,r]])}}});const TU=(0,d.o8)({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),RU=["id","aria-hidden","aria-labelledby"],xU="ElTabPane",OU=(0,a.aZ)({name:xU}),NU=(0,a.aZ)({...OU,props:TU,setup(e){const t=e,n=(0,a.FN)(),r=(0,a.Rr)(),o=(0,a.f3)(fU);o||(0,w._)(xU,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=(0,y.s3)("tab-pane"),i=(0,l.iH)(),u=(0,a.Fl)((()=>t.closable||o.props.closable)),d=(0,h.Rc)((()=>{var e;return o.currentName.value===(null!=(e=t.name)?e:i.value)})),p=(0,l.iH)(d.value),f=(0,a.Fl)((()=>{var e;return null!=(e=t.name)?e:i.value})),g=(0,h.Rc)((()=>!t.lazy||p.value||d.value));(0,a.YP)(d,(e=>{e&&(p.value=!0)}));const m=(0,l.qj)({uid:n.uid,slots:r,props:t,paneName:f,active:d,index:i,isClosable:u});return(0,a.bv)((()=>{o.registerPane(m)})),(0,a.Ah)((()=>{o.unregisterPane(m.uid)})),(e,t)=>(0,l.SU)(g)?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:0,id:`pane-${(0,l.SU)(f)}`,class:(0,c.C_)((0,l.SU)(s).b()),role:"tabpanel","aria-hidden":!(0,l.SU)(d),"aria-labelledby":`tab-${(0,l.SU)(f)}`},[(0,a.WI)(e.$slots,"default")],10,RU)),[[A.F8,(0,l.SU)(d)]]):(0,a.kq)("v-if",!0)}});var PU=(0,m.Z)(NU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const DU=(0,C.nz)(AU,{TabPane:PU}),UU=(0,C.dp)(PU),LU=(0,d.o8)({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Io.k,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),BU=(0,a.aZ)({name:"ElText"}),MU=(0,a.aZ)({...BU,props:LU,setup(e){const t=e,n=(0,mo.Cd)(),r=(0,y.s3)("text"),o=(0,a.Fl)((()=>[r.b(),r.m(t.type),r.m(n.value),r.is("truncated",t.truncated)]));return(e,t)=>((0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{class:(0,c.C_)((0,l.SU)(o))},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["class"]))}});var FU=(0,m.Z)(MU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const jU=(0,C.nz)(FU);function zU(e,t,n,r){var o=e.length,s=n+(r?1:-1);while(r?s--:++s<o)if(t(e[s],s,e))return s;return-1}var $U=zU;function VU(e){return e!==e}var HU=VU;function KU(e,t,n){var r=n-1,o=e.length;while(++r<o)if(e[r]===t)return r;return-1}var qU=KU;function WU(e,t,n){return t===t?qU(e,t,n):$U(e,HU,n)}var YU=WU;function GU(e,t){var n=null==e?0:e.length;return!!n&&YU(e,t,0)>-1}var ZU=GU;function JU(e,t,n){var r=-1,o=null==e?0:e.length;while(++r<o)if(n(t,e[r]))return!0;return!1}var QU=JU;function XU(){}var eL=XU,tL=1/0,nL=yc&&1/Fd(new yc([,-0]))[1]==tL?function(e){return new yc(e)}:eL,rL=nL,oL=200;function sL(e,t,n){var r=-1,o=ZU,s=e.length,i=!0,a=[],l=a;if(n)i=!1,o=QU;else if(s>=oL){var c=t?null:rL(e);if(c)return Fd(c);i=!1,o=xd,l=new Id}else l=t?[]:a;e:while(++r<s){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,i&&d===d){var h=l.length;while(h--)if(l[h]===d)continue e;t&&l.push(d),a.push(u)}else o(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var iL=sL,aL=Px((function(e){return iL(kh(e,1,gx,!0))})),lL=aL;const cL=(0,d.o8)({...ov,parsedValue:{type:(0,d.Cq)(Array)}}),uL=["disabled"],dL=(0,a.aZ)({__name:"panel-time-range",props:cL,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const n=e,r=(e,t)=>{const n=[];for(let r=e;r<=t;r++)n.push(r);return n},{t:o,lang:s}=(0,_s.bU)(),i=(0,y.s3)("time"),u=(0,y.s3)("picker"),d=(0,a.f3)("EP_PICKER_BASE"),{arrowControl:h,disabledHours:p,disabledMinutes:f,disabledSeconds:g,defaultValue:m}=d.props,v=(0,a.Fl)((()=>n.parsedValue[0])),w=(0,a.Fl)((()=>n.parsedValue[1])),b=uv(n),S=()=>{t("pick",b.value,!1)},_=(0,a.Fl)((()=>n.format.includes("ss"))),E=(0,a.Fl)((()=>n.format.includes("A")?"A":n.format.includes("a")?"a":"")),k=(e=!1)=>{t("pick",[v.value,w.value],e)},C=e=>{T(e.millisecond(0),w.value)},I=e=>{T(v.value,e.millisecond(0))},A=e=>{const t=e.map((e=>is(e).locale(s.value))),n=F(t);return t[0].isSame(n[0])&&t[1].isSame(n[1])},T=(e,n)=>{t("pick",[e,n],!0)},R=(0,a.Fl)((()=>v.value>w.value)),x=(0,l.iH)([0,2]),O=(e,n)=>{t("select-range",e,n,"min"),x.value=[e,n]},N=(0,a.Fl)((()=>_.value?11:8)),P=(e,n)=>{t("select-range",e,n,"max");const r=(0,l.SU)(N);x.value=[e+r,n+r]},D=e=>{const t=_.value?[0,3,6,11,14,17]:[0,3,8,11],n=["hours","minutes"].concat(_.value?["seconds"]:[]),r=t.indexOf(x.value[0]),o=(r+e+t.length)%t.length,s=t.length/2;o<s?V["start_emitSelectRange"](n[o]):V["end_emitSelectRange"](n[o-s])},U=e=>{const t=e.code,{left:n,right:r,up:o,down:s}=Jn.n;if([n,r].includes(t)){const r=t===n?-1:1;return D(r),void e.preventDefault()}if([o,s].includes(t)){const n=t===o?-1:1,r=x.value[0]<N.value?"start":"end";return V[`${r}_scrollDown`](n),void e.preventDefault()}},L=(e,t)=>{const n=p?p(e):[],o="start"===e,s=t||(o?w.value:v.value),i=s.hour(),a=o?r(i+1,23):r(0,i-1);return lL(n,a)},B=(e,t,n)=>{const o=f?f(e,t):[],s="start"===t,i=n||(s?w.value:v.value),a=i.hour();if(e!==a)return o;const l=i.minute(),c=s?r(l+1,59):r(0,l-1);return lL(o,c)},M=(e,t,n,o)=>{const s=g?g(e,t,n):[],i="start"===n,a=o||(i?w.value:v.value),l=a.hour(),c=a.minute();if(e!==l||t!==c)return s;const u=a.second(),d=i?r(u+1,59):r(0,u-1);return lL(s,d)},F=([e,t])=>[H(e,"start",!0,t),H(t,"end",!1,e)],{getAvailableHours:j,getAvailableMinutes:z,getAvailableSeconds:$}=cv(L,B,M),{timePickerOptions:V,getAvailableTime:H,onSetOption:K}=iv({getAvailableHours:j,getAvailableMinutes:z,getAvailableSeconds:$}),q=e=>e?(0,c.kJ)(e)?e.map((e=>is(e,n.format).locale(s.value))):is(e,n.format).locale(s.value):null,W=e=>e?(0,c.kJ)(e)?e.map((e=>e.format(n.format))):e.format(n.format):null,Y=()=>{if((0,c.kJ)(m))return m.map((e=>is(e).locale(s.value)));const e=is(m).locale(s.value);return[e,e.add(60,"m")]};return t("set-picker-option",["formatToString",W]),t("set-picker-option",["parseUserInput",q]),t("set-picker-option",["isValidValue",A]),t("set-picker-option",["handleKeydownInput",U]),t("set-picker-option",["getDefaultValue",Y]),t("set-picker-option",["getRangeAvailableTime",F]),(e,t)=>e.actualVisible?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)([(0,l.SU)(i).b("range-picker"),(0,l.SU)(u).b("panel")])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).be("range-picker","content"))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).be("range-picker","cell"))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).be("range-picker","header"))},(0,c.zw)((0,l.SU)(o)("el.datepicker.startTime")),3),(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(i).be("range-picker","body"),(0,l.SU)(i).be("panel","content"),(0,l.SU)(i).is("arrow",(0,l.SU)(h)),{"has-seconds":(0,l.SU)(_)}])},[(0,a.Wm)(_v,{ref:"minSpinner",role:"start","show-seconds":(0,l.SU)(_),"am-pm-mode":(0,l.SU)(E),"arrow-control":(0,l.SU)(h),"spinner-date":(0,l.SU)(v),"disabled-hours":L,"disabled-minutes":B,"disabled-seconds":M,onChange:C,onSetOption:(0,l.SU)(K),onSelectRange:O},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).be("range-picker","cell"))},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).be("range-picker","header"))},(0,c.zw)((0,l.SU)(o)("el.datepicker.endTime")),3),(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(i).be("range-picker","body"),(0,l.SU)(i).be("panel","content"),(0,l.SU)(i).is("arrow",(0,l.SU)(h)),{"has-seconds":(0,l.SU)(_)}])},[(0,a.Wm)(_v,{ref:"maxSpinner",role:"end","show-seconds":(0,l.SU)(_),"am-pm-mode":(0,l.SU)(E),"arrow-control":(0,l.SU)(h),"spinner-date":(0,l.SU)(w),"disabled-hours":L,"disabled-minutes":B,"disabled-seconds":M,onChange:I,onSetOption:(0,l.SU)(K),onSelectRange:P},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).be("panel","footer"))},[(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(i).be("panel","btn"),"cancel"]),onClick:t[0]||(t[0]=e=>S())},(0,c.zw)((0,l.SU)(o)("el.datepicker.cancel")),3),(0,a._)("button",{type:"button",class:(0,c.C_)([(0,l.SU)(i).be("panel","btn"),"confirm"]),disabled:(0,l.SU)(R),onClick:t[1]||(t[1]=e=>k())},(0,c.zw)((0,l.SU)(o)("el.datepicker.confirm")),11,uL)],2)],2)):(0,a.kq)("v-if",!0)}});var hL=(0,m.Z)(dL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);is.extend(fy);var pL=(0,a.aZ)({name:"ElTimePicker",install:null,props:{...ew,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,t){const n=(0,l.iH)(),[r,o]=e.isRange?["timerange",hL]:["time",kv],s=e=>t.emit("update:modelValue",e);return(0,a.JJ)("ElPopperOptions",e.popperOptions),t.expose({focus:e=>{var t;null==(t=n.value)||t.handleFocusInput(e)},blur:e=>{var t;null==(t=n.value)||t.handleBlurInput(e)},handleOpen:()=>{var e;null==(e=n.value)||e.handleOpen()},handleClose:()=>{var e;null==(e=n.value)||e.handleClose()}}),()=>{var t;const i=null!=(t=e.format)?t:hv;return(0,a.Wm)(sw,(0,a.dG)(e,{ref:n,type:r,format:i,"onUpdate:modelValue":s}),{default:e=>(0,a.Wm)(o,e,null)})}}});const fL=pL;fL.install=e=>{e.component(fL.name,fL)};const gL=fL,mL=(0,d.o8)({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:Th.Pp,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:(0,d.Cq)([String,Object]),default:()=>ae.SUY},clearIcon:{type:(0,d.Cq)([String,Object]),default:()=>ae.K41}}),yL=e=>{const t=(e||"").split(":");if(t.length>=2){let n=Number.parseInt(t[0],10);const r=Number.parseInt(t[1],10),o=e.toUpperCase();return o.includes("AM")&&12===n?n=0:o.includes("PM")&&12!==n&&(n+=12),{hours:n,minutes:r}}return null},vL=(e,t)=>{const n=yL(e);if(!n)return-1;const r=yL(t);if(!r)return-1;const o=n.minutes+60*n.hours,s=r.minutes+60*r.hours;return o===s?0:o>s?1:-1},wL=e=>`${e}`.padStart(2,"0"),bL=e=>`${wL(e.hours)}:${wL(e.minutes)}`,SL=(e,t)=>{const n=yL(e);if(!n)return"";const r=yL(t);if(!r)return"";const o={hours:n.hours,minutes:n.minutes};return o.minutes+=r.minutes,o.hours+=r.hours,o.hours+=Math.floor(o.minutes/60),o.minutes=o.minutes%60,bL(o)},_L=(0,a.aZ)({name:"ElTimeSelect"}),EL=(0,a.aZ)({..._L,props:mL,emits:["change","blur","focus","update:modelValue"],setup(e,{expose:t}){const n=e;is.extend(fy);const{Option:r}=vC,o=(0,y.s3)("input"),s=(0,l.iH)(),i=(0,mo.DT)(),u=(0,a.Fl)((()=>n.modelValue)),d=(0,a.Fl)((()=>{const e=yL(n.start);return e?bL(e):null})),h=(0,a.Fl)((()=>{const e=yL(n.end);return e?bL(e):null})),p=(0,a.Fl)((()=>{const e=yL(n.step);return e?bL(e):null})),f=(0,a.Fl)((()=>{const e=yL(n.minTime||"");return e?bL(e):null})),g=(0,a.Fl)((()=>{const e=yL(n.maxTime||"");return e?bL(e):null})),m=(0,a.Fl)((()=>{const e=[];if(n.start&&n.end&&n.step){let t,r=d.value;while(r&&h.value&&vL(r,h.value)<=0)t=is(r,"HH:mm").format(n.format),e.push({value:t,disabled:vL(r,f.value||"-1:-1")<=0||vL(r,g.value||"100:100")>=0}),r=SL(r,p.value)}return e})),v=()=>{var e,t;null==(t=null==(e=s.value)?void 0:e.blur)||t.call(e)},w=()=>{var e,t;null==(t=null==(e=s.value)?void 0:e.focus)||t.call(e)};return t({blur:v,focus:w}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,l.SU)(vC),{ref_key:"select",ref:s,"model-value":(0,l.SU)(u),disabled:(0,l.SU)(i),clearable:e.clearable,"clear-icon":e.clearIcon,size:e.size,effect:e.effect,placeholder:e.placeholder,"default-first-option":"",filterable:e.editable,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:modelValue",t)),onChange:t[1]||(t[1]=t=>e.$emit("change",t)),onBlur:t[2]||(t[2]=t=>e.$emit("blur",t)),onFocus:t[3]||(t[3]=t=>e.$emit("focus",t))},{prefix:(0,a.w5)((()=>[e.prefixIcon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(o).e("prefix-icon"))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.prefixIcon)))])),_:1},8,["class"])):(0,a.kq)("v-if",!0)])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(m),(e=>((0,a.wg)(),(0,a.j4)((0,l.SU)(r),{key:e.value,label:e.value,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])))),128))])),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var kL=(0,m.Z)(EL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);kL.install=e=>{e.component(kL.name,kL)};const CL=kL,IL=CL,AL=(0,a.aZ)({name:"ElTimeline",setup(e,{slots:t}){const n=(0,y.s3)("timeline");return(0,a.JJ)("timeline",t),()=>(0,a.h)("ul",{class:[n.b()]},[(0,a.WI)(t,"default")])}}),TL=(0,d.o8)({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:x.AA},hollow:{type:Boolean,default:!1}}),RL=(0,a.aZ)({name:"ElTimelineItem"}),xL=(0,a.aZ)({...RL,props:TL,setup(e){const t=(0,y.s3)("timeline-item");return(e,n)=>((0,a.wg)(),(0,a.iD)("li",{class:(0,c.C_)([(0,l.SU)(t).b(),{[(0,l.SU)(t).e("center")]:e.center}])},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(t).e("tail"))},null,2),e.$slots.dot?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)([(0,l.SU)(t).e("node"),(0,l.SU)(t).em("node",e.size||""),(0,l.SU)(t).em("node",e.type||""),(0,l.SU)(t).is("hollow",e.hollow)]),style:(0,c.j5)({backgroundColor:e.color})},[e.icon?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)((0,l.SU)(t).e("icon"))},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:1},8,["class"])):(0,a.kq)("v-if",!0)],6)),e.$slots.dot?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(t).e("dot"))},[(0,a.WI)(e.$slots,"dot")],2)):(0,a.kq)("v-if",!0),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(t).e("wrapper"))},[e.hideTimestamp||"top"!==e.placement?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)([(0,l.SU)(t).e("timestamp"),(0,l.SU)(t).is("top")])},(0,c.zw)(e.timestamp),3)),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(t).e("content"))},[(0,a.WI)(e.$slots,"default")],2),e.hideTimestamp||"bottom"!==e.placement?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)([(0,l.SU)(t).e("timestamp"),(0,l.SU)(t).is("bottom")])},(0,c.zw)(e.timestamp),3))],2)],2))}});var OL=(0,m.Z)(xL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const NL=(0,C.nz)(AL,{TimelineItem:OL}),PL=(0,C.dp)(OL),DL=(0,d.o8)({nowrap:Boolean});var UL=(e=>(e["top"]="top",e["bottom"]="bottom",e["left"]="left",e["right"]="right",e))(UL||{});const LL=Object.values(UL),BL=(0,d.o8)({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:(0,d.Cq)(Object),default:null}}),ML=(0,d.o8)({side:{type:(0,d.Cq)(String),values:LL,required:!0}}),FL=["absolute","fixed"],jL=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],zL=(0,d.o8)({ariaLabel:String,arrowPadding:{type:(0,d.Cq)(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:(0,d.Cq)(String),values:jL,default:"bottom"},reference:{type:(0,d.Cq)(Object),default:null},offset:{type:Number,default:8},strategy:{type:(0,d.Cq)(String),values:FL,default:"absolute"},showArrow:{type:Boolean,default:!1}}),$L=(0,d.o8)({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:(0,d.Cq)(Function)},"onUpdate:open":{type:(0,d.Cq)(Function)}}),VL={type:(0,d.Cq)(Function)},HL=(0,d.o8)({onBlur:VL,onClick:VL,onFocus:VL,onMouseDown:VL,onMouseEnter:VL,onMouseLeave:VL}),KL=(0,d.o8)({...$L,...BL,...HL,...zL,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:(0,d.Cq)(Object),default:null},teleported:Boolean,to:{type:(0,d.Cq)(String),default:"body"}}),qL=Symbol("tooltipV2"),WL=Symbol("tooltipV2Content"),YL="tooltip_v2.open",GL=(0,a.aZ)({name:"ElTooltipV2Root"}),ZL=(0,a.aZ)({...GL,props:$L,setup(e,{expose:t}){const n=e,r=(0,l.iH)(n.defaultOpen),o=(0,l.iH)(null),s=(0,a.Fl)({get:()=>(0,wr.Cl)(n.open)?r.value:n.open,set:e=>{var t;r.value=e,null==(t=n["onUpdate:open"])||t.call(n,e)}}),i=(0,a.Fl)((()=>(0,h.hj)(n.delayDuration)&&n.delayDuration>0)),{start:c,stop:u}=(0,h.eM)((()=>{s.value=!0}),(0,a.Fl)((()=>n.delayDuration)),{immediate:!1}),d=(0,y.s3)("tooltip-v2"),p=(0,xr.Me)(),f=()=>{u(),s.value=!0},g=()=>{(0,l.SU)(i)?c():f()},m=f,v=()=>{u(),s.value=!1},w=e=>{var t;e&&(document.dispatchEvent(new CustomEvent(YL)),m()),null==(t=n.onOpenChange)||t.call(n,e)};return(0,a.YP)(s,w),(0,a.bv)((()=>{document.addEventListener(YL,v)})),(0,a.Jd)((()=>{u(),document.removeEventListener(YL,v)})),(0,a.JJ)(qL,{contentId:p,triggerRef:o,ns:d,onClose:v,onDelayOpen:g,onOpen:m}),t({onOpen:m,onClose:v}),(e,t)=>(0,a.WI)(e.$slots,"default",{open:(0,l.SU)(s)})}});var JL=(0,m.Z)(ZL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const QL=(0,a.aZ)({name:"ElTooltipV2Arrow"}),XL=(0,a.aZ)({...QL,props:{...BL,...ML},setup(e){const t=e,{ns:n}=(0,a.f3)(qL),{arrowRef:r}=(0,a.f3)(WL),o=(0,a.Fl)((()=>{const{style:e,width:r,height:o}=t,s=n.namespace.value;return{[`--${s}-tooltip-v2-arrow-width`]:`${r}px`,[`--${s}-tooltip-v2-arrow-height`]:`${o}px`,[`--${s}-tooltip-v2-arrow-border-width`]:r/2+"px",[`--${s}-tooltip-v2-arrow-cover-width`]:r/2-1,...e||{}}}));return(e,t)=>((0,a.wg)(),(0,a.iD)("span",{ref_key:"arrowRef",ref:r,style:(0,c.j5)((0,l.SU)(o)),class:(0,c.C_)((0,l.SU)(n).e("arrow"))},null,6))}});var eB=(0,m.Z)(XL,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);function tB(e){return e.split("-")[1]}function nB(e){return"y"===e?"height":"width"}function rB(e){return e.split("-")[0]}function oB(e){return["top","bottom"].includes(rB(e))?"x":"y"}function sB(e,t,n){let{reference:r,floating:o}=e;const s=r.x+r.width/2-o.width/2,i=r.y+r.height/2-o.height/2,a=oB(t),l=nB(a),c=r[l]/2-o[l]/2,u="x"===a;let d;switch(rB(t)){case"top":d={x:s,y:r.y-o.height};break;case"bottom":d={x:s,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:i};break;case"left":d={x:r.x-o.width,y:i};break;default:d={x:r.x,y:r.y}}switch(tB(t)){case"start":d[a]-=c*(n&&u?-1:1);break;case"end":d[a]+=c*(n&&u?-1:1)}return d}const iB=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=sB(c,r,l),h=r,p={},f=0;for(let g=0;g<a.length;g++){const{name:n,fn:s}=a[g],{x:m,y:y,data:v,reset:w}=await s({x:u,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});u=null!=m?m:u,d=null!=y?y:d,p={...p,[n]:{...p[n],...v}},w&&f<=50&&(f++,"object"==typeof w&&(w.placement&&(h=w.placement),w.rects&&(c=!0===w.rects?await i.getElementRects({reference:e,floating:t,strategy:o}):w.rects),({x:u,y:d}=sB(c,h,l))),g=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:p}};function aB(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function lB(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const cB=Math.min,uB=Math.max;function dB(e,t,n){return uB(e,cB(t,n))}const hB=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e||{},{x:o,y:s,placement:i,rects:a,platform:l,elements:c}=t;if(null==n)return{};const u=aB(r),d={x:o,y:s},h=oB(i),p=nB(h),f=await l.getDimensions(n),g="y"===h,m=g?"top":"left",y=g?"bottom":"right",v=g?"clientHeight":"clientWidth",w=a.reference[p]+a.reference[h]-d[h]-a.floating[p],b=d[h]-a.reference[h],S=await(null==l.getOffsetParent?void 0:l.getOffsetParent(n));let _=S?S[v]:0;_&&await(null==l.isElement?void 0:l.isElement(S))||(_=c.floating[v]||a.floating[p]);const E=w/2-b/2,k=u[m],C=_-f[p]-u[y],I=_/2-f[p]/2+E,A=dB(k,I,C),T=null!=tB(i)&&I!=A&&a.reference[p]/2-(I<k?u[m]:u[y])-f[p]/2<0;return{[h]:d[h]-(T?I<k?k-I:C-I:0),data:{[h]:A,centerOffset:I-A}}}}),pB=["top","right","bottom","left"];pB.reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]);const fB=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,o=await async function(e,t){const{placement:n,platform:r,elements:o}=e,s=await(null==r.isRTL?void 0:r.isRTL(o.floating)),i=rB(n),a=tB(n),l="x"===oB(n),c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,d="function"==typeof t?t(e):t;let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return{x:n+o.x,y:r+o.y,data:o}}}};function gB(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function mB(e){return gB(e).getComputedStyle(e)}function yB(e){return e instanceof gB(e).Node}function vB(e){return yB(e)?(e.nodeName||"").toLowerCase():""}let wB;function bB(){if(wB)return wB;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(wB=e.brands.map((e=>e.brand+"/"+e.version)).join(" "),wB):navigator.userAgent}function SB(e){return e instanceof gB(e).HTMLElement}function _B(e){return e instanceof gB(e).Element}function EB(e){return"undefined"!=typeof ShadowRoot&&(e instanceof gB(e).ShadowRoot||e instanceof ShadowRoot)}function kB(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=mB(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function CB(e){return["table","td","th"].includes(vB(e))}function IB(e){const t=/firefox/i.test(bB()),n=mB(e),r=n.backdropFilter||n.WebkitBackdropFilter;return"none"!==n.transform||"none"!==n.perspective||!!r&&"none"!==r||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some((e=>n.willChange.includes(e)))||["paint","layout","strict","content"].some((e=>{const t=n.contain;return null!=t&&t.includes(e)}))}function AB(){return/^((?!chrome|android).)*safari/i.test(bB())}function TB(e){return["html","body","#document"].includes(vB(e))}const RB=Math.min,xB=Math.max,OB=Math.round;function NB(e){const t=mB(e);let n=parseFloat(t.width),r=parseFloat(t.height);const o=SB(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=OB(n)!==s||OB(r)!==i;return a&&(n=s,r=i),{width:n,height:r,fallback:a}}function PB(e){return _B(e)?e:e.contextElement}const DB={x:1,y:1};function UB(e){const t=PB(e);if(!SB(t))return DB;const n=t.getBoundingClientRect(),{width:r,height:o,fallback:s}=NB(t);let i=(s?OB(n.width):n.width)/r,a=(s?OB(n.height):n.height)/o;return i&&Number.isFinite(i)||(i=1),a&&Number.isFinite(a)||(a=1),{x:i,y:a}}function LB(e,t,n,r){var o,s;void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),a=PB(e);let l=DB;t&&(r?_B(r)&&(l=UB(r)):l=UB(e));const c=a?gB(a):window,u=AB()&&n;let d=(i.left+(u&&(null==(o=c.visualViewport)?void 0:o.offsetLeft)||0))/l.x,h=(i.top+(u&&(null==(s=c.visualViewport)?void 0:s.offsetTop)||0))/l.y,p=i.width/l.x,f=i.height/l.y;if(a){const e=gB(a),t=r&&_B(r)?gB(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=UB(n),t=n.getBoundingClientRect(),r=getComputedStyle(n);t.x+=(n.clientLeft+parseFloat(r.paddingLeft))*e.x,t.y+=(n.clientTop+parseFloat(r.paddingTop))*e.y,d*=e.x,h*=e.y,p*=e.x,f*=e.y,d+=t.x,h+=t.y,n=gB(n).frameElement}}return lB({width:p,height:f,x:d,y:h})}function BB(e){return((yB(e)?e.ownerDocument:e.document)||window.document).documentElement}function MB(e){return _B(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function FB(e){return LB(BB(e)).left+MB(e).scrollLeft}function jB(e){if("html"===vB(e))return e;const t=e.assignedSlot||e.parentNode||EB(e)&&e.host||BB(e);return EB(t)?t.host:t}function zB(e){const t=jB(e);return TB(t)?t.ownerDocument.body:SB(t)&&kB(t)?t:zB(t)}function $B(e,t){var n;void 0===t&&(t=[]);const r=zB(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),s=gB(r);return o?t.concat(s,s.visualViewport||[],kB(r)?r:[]):t.concat(r,$B(r))}function VB(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=gB(e),r=BB(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const e=AB();(!e||e&&"fixed"===t)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=BB(e),n=MB(e),r=e.ownerDocument.body,o=xB(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=xB(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+FB(e);const a=-n.scrollTop;return"rtl"===mB(r).direction&&(i+=xB(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}(BB(e));else if(_B(t))r=function(e,t){const n=LB(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=SB(e)?UB(e):{x:1,y:1};return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:o*s.x,y:r*s.y}}(t,n);else{const n={...t};if(AB()){var o,s;const t=gB(e);n.x-=(null==(o=t.visualViewport)?void 0:o.offsetLeft)||0,n.y-=(null==(s=t.visualViewport)?void 0:s.offsetTop)||0}r=n}return lB(r)}function HB(e,t){return SB(e)&&"fixed"!==mB(e).position?t?t(e):e.offsetParent:null}function KB(e,t){const n=gB(e);if(!SB(e))return n;let r=HB(e,t);for(;r&&CB(r)&&"static"===mB(r).position;)r=HB(r,t);return r&&("html"===vB(r)||"body"===vB(r)&&"static"===mB(r).position&&!IB(r))?n:r||function(e){let t=jB(e);for(;SB(t)&&!TB(t);){if(IB(t))return t;t=jB(t)}return null}(e)||n}function qB(e,t,n){const r=SB(t),o=BB(t),s=LB(e,!0,"fixed"===n,t);let i={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==vB(t)||kB(o))&&(i=MB(t)),SB(t)){const e=LB(t,!0);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else o&&(a.x=FB(o));return{x:s.left+i.scrollLeft-a.x,y:s.top+i.scrollTop-a.y,width:s.width,height:s.height}}const WB={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const s="clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=$B(e).filter((e=>_B(e)&&"body"!==vB(e))),o=null;const s="fixed"===mB(e).position;let i=s?jB(e):e;for(;_B(i)&&!TB(i);){const e=mB(i),t=IB(i);"fixed"===e.position?o=null:(s?t||o:t||"static"!==e.position||!o||!["absolute","fixed"].includes(o.position))?o=e:r=r.filter((e=>e!==i)),i=jB(i)}return t.set(e,r),r}(t,this._c):[].concat(n),i=[...s,r],a=i[0],l=i.reduce(((e,n)=>{const r=VB(t,n,o);return e.top=xB(r.top,e.top),e.right=RB(r.right,e.right),e.bottom=RB(r.bottom,e.bottom),e.left=xB(r.left,e.left),e}),VB(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const o=SB(n),s=BB(n);if(n===s)return t;let i={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((o||!o&&"fixed"!==r)&&(("body"!==vB(n)||kB(s))&&(i=MB(n)),SB(n))){const e=LB(n);a=UB(n),l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-i.scrollLeft*a.x+l.x,y:t.y*a.y-i.scrollTop*a.y+l.y}},isElement:_B,getDimensions:function(e){return NB(e)},getOffsetParent:KB,getDocumentElement:BB,getScale:UB,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const o=this.getOffsetParent||KB,s=this.getDimensions;return{reference:qB(t,await o(n),r),floating:{x:0,y:0,...await s(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===mB(e).direction};const YB=(e,t,n)=>{const r=new Map,o={platform:WB,...n},s={...o.platform,_c:r};return iB(e,t,{...o,platform:s})},GB=((0,d.o8)({}),e=>{if(!h.C5)return;if(!e)return e;const t=(0,u.NXq)(e);return t||((0,l.dq)(e)?t:e)}),ZB=({middleware:e,placement:t,strategy:n})=>{const r=(0,l.iH)(),o=(0,l.iH)(),s=(0,l.iH)(),i=(0,l.iH)(),c=(0,l.iH)({}),d={x:s,y:i,placement:t,strategy:n,middlewareData:c},p=async()=>{if(!h.C5)return;const s=GB(r),i=(0,u.NXq)(o);if(!s||!i)return;const a=await YB(s,i,{placement:(0,l.SU)(t),strategy:(0,l.SU)(n),middleware:(0,l.SU)(e)});(0,R.uc)(d).forEach((e=>{d[e].value=a[e]}))};return(0,a.bv)((()=>{(0,a.m0)((()=>{p()}))})),{...d,update:p,referenceRef:r,contentRef:o}},JB=({arrowRef:e,padding:t})=>({name:"arrow",options:{element:e,padding:t},fn(n){const r=(0,l.SU)(e);return r?hB({element:r,padding:t}).fn(n):{}}}),QB=(0,d.o8)({style:{type:(0,d.Cq)([String,Object,Array]),default:()=>({})}}),XB=(0,a.aZ)({name:"ElVisuallyHidden"}),eM=(0,a.aZ)({...XB,props:QB,setup(e){const t=e,n=(0,a.Fl)((()=>[t.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]));return(e,t)=>((0,a.wg)(),(0,a.iD)("span",(0,a.dG)(e.$attrs,{style:(0,l.SU)(n)}),[(0,a.WI)(e.$slots,"default")],16))}});var tM=(0,m.Z)(eM,[["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const nM=["data-side"],rM=(0,a.aZ)({name:"ElTooltipV2Content"}),oM=(0,a.aZ)({...rM,props:{...zL,...DL},setup(e){const t=e,{triggerRef:n,contentId:r}=(0,a.f3)(qL),o=(0,l.iH)(t.placement),s=(0,l.iH)(t.strategy),i=(0,l.iH)(null),{referenceRef:u,contentRef:d,middlewareData:h,x:p,y:f,update:g}=ZB({placement:o,strategy:s,middleware:(0,a.Fl)((()=>{const e=[fB(t.offset)];return t.showArrow&&e.push(JB({arrowRef:i})),e}))}),m=(0,Wr.Cn)().nextZIndex(),v=(0,y.s3)("tooltip-v2"),w=(0,a.Fl)((()=>o.value.split("-")[0])),b=(0,a.Fl)((()=>({position:(0,l.SU)(s),top:`${(0,l.SU)(f)||0}px`,left:`${(0,l.SU)(p)||0}px`,zIndex:m}))),S=(0,a.Fl)((()=>{if(!t.showArrow)return{};const{arrow:e}=(0,l.SU)(h);return{[`--${v.namespace.value}-tooltip-v2-arrow-x`]:`${null==e?void 0:e.x}px`||"",[`--${v.namespace.value}-tooltip-v2-arrow-y`]:`${null==e?void 0:e.y}px`||""}})),_=(0,a.Fl)((()=>[v.e("content"),v.is("dark","dark"===t.effect),v.is((0,l.SU)(s)),t.contentClass]));return(0,a.YP)(i,(()=>g())),(0,a.YP)((()=>t.placement),(e=>o.value=e)),(0,a.bv)((()=>{(0,a.YP)((()=>t.reference||n.value),(e=>{u.value=e||void 0}),{immediate:!0})})),(0,a.JJ)(WL,{arrowRef:i}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"contentRef",ref:d,style:(0,c.j5)((0,l.SU)(b)),"data-tooltip-v2-root":""},[e.nowrap?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,"data-side":(0,l.SU)(w),class:(0,c.C_)((0,l.SU)(_))},[(0,a.WI)(e.$slots,"default",{contentStyle:(0,l.SU)(b),contentClass:(0,l.SU)(_)}),(0,a.Wm)((0,l.SU)(tM),{id:(0,l.SU)(r),role:"tooltip"},{default:(0,a.w5)((()=>[e.ariaLabel?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,c.zw)(e.ariaLabel),1)],64)):(0,a.WI)(e.$slots,"default",{key:1})])),_:3},8,["id"]),(0,a.WI)(e.$slots,"arrow",{style:(0,c.j5)((0,l.SU)(S)),side:(0,l.SU)(w)})],10,nM))],4))}});var sM=(0,m.Z)(oM,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const iM=(0,d.o8)({setRef:{type:(0,d.Cq)(Function),required:!0},onlyChild:Boolean});var aM=(0,a.aZ)({props:iM,setup(e,{slots:t}){const n=(0,l.iH)(),r=Tw(n,(t=>{t?e.setRef(t.nextElementSibling):e.setRef(null)}));return()=>{var n;const[o]=(null==(n=t.default)?void 0:n.call(t))||[],s=e.onlyChild?(0,ei.gL)(o.children):o.children;return(0,a.Wm)(a.HY,{ref:r},[s])}}});const lM=(0,a.aZ)({name:"ElTooltipV2Trigger"}),cM=(0,a.aZ)({...lM,props:{...DL,...HL},setup(e){const t=e,{onClose:n,onOpen:r,onDelayOpen:o,triggerRef:s,contentId:i}=(0,a.f3)(qL);let c=!1;const u=e=>{s.value=e},d=()=>{c=!1},h=pr(t.onMouseEnter,o),p=pr(t.onMouseLeave,n),f=pr(t.onMouseDown,(()=>{n(),c=!0,document.addEventListener("mouseup",d,{once:!0})})),g=pr(t.onFocus,(()=>{c||r()})),m=pr(t.onBlur,n),y=pr(t.onClick,(e=>{0===e.detail&&n()})),v={blur:m,click:y,focus:g,mousedown:f,mouseenter:h,mouseleave:p},w=(e,t,n)=>{e&&Object.entries(t).forEach((([t,r])=>{e[n](t,r)}))};return(0,a.YP)(s,((e,t)=>{w(e,v,"addEventListener"),w(t,v,"removeEventListener"),e&&e.setAttribute("aria-describedby",i.value)})),(0,a.Jd)((()=>{w(s.value,v,"removeEventListener"),document.removeEventListener("mouseup",d)})),(e,t)=>e.nowrap?((0,a.wg)(),(0,a.j4)((0,l.SU)(aM),{key:0,"set-ref":u,"only-child":""},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3})):((0,a.wg)(),(0,a.iD)("button",(0,a.dG)({key:1,ref_key:"triggerRef",ref:s},e.$attrs),[(0,a.WI)(e.$slots,"default")],16))}});var uM=(0,m.Z)(cM,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const dM=(0,a.aZ)({name:"ElTooltipV2"}),hM=(0,a.aZ)({...dM,props:KL,setup(e){const t=e,n=(0,l.BK)(t),r=(0,l.qj)(Dp(n,Object.keys(BL))),o=(0,l.qj)(Dp(n,Object.keys(zL))),s=(0,l.qj)(Dp(n,Object.keys($L))),i=(0,l.qj)(Dp(n,Object.keys(HL)));return(e,t)=>((0,a.wg)(),(0,a.j4)(JL,(0,c.vs)((0,a.F4)(s)),{default:(0,a.w5)((({open:t})=>[(0,a.Wm)(uM,(0,a.dG)(i,{nowrap:""}),{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"trigger")])),_:3},16),((0,a.wg)(),(0,a.j4)(a.lR,{to:e.to,disabled:!e.teleported},[e.fullTransition?((0,a.wg)(),(0,a.j4)(A.uT,(0,c.vs)((0,a.dG)({key:0},e.transitionProps)),{default:(0,a.w5)((()=>[e.alwaysOn||t?((0,a.wg)(),(0,a.j4)(sM,(0,c.vs)((0,a.dG)({key:0},o)),{arrow:(0,a.w5)((({style:t,side:n})=>[e.showArrow?((0,a.wg)(),(0,a.j4)(eB,(0,a.dG)({key:0},r,{style:t,side:n}),null,16,["style","side"])):(0,a.kq)("v-if",!0)])),default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16)):(0,a.kq)("v-if",!0)])),_:2},1040)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[e.alwaysOn||t?((0,a.wg)(),(0,a.j4)(sM,(0,c.vs)((0,a.dG)({key:0},o)),{arrow:(0,a.w5)((({style:t,side:n})=>[e.showArrow?((0,a.wg)(),(0,a.j4)(eB,(0,a.dG)({key:0},r,{style:t,side:n}),null,16,["style","side"])):(0,a.kq)("v-if",!0)])),default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},16)):(0,a.kq)("v-if",!0)],64))],8,["to","disabled"]))])),_:3},16))}});var pM=(0,m.Z)(hM,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const fM=(0,C.nz)(pM),gM="left-check-change",mM="right-check-change",yM=(0,d.o8)({data:{type:(0,d.Cq)(Array),default:()=>[]},titles:{type:(0,d.Cq)(Array),default:()=>[]},buttonTexts:{type:(0,d.Cq)(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:(0,d.Cq)(Function)},leftDefaultChecked:{type:(0,d.Cq)(Array),default:()=>[]},rightDefaultChecked:{type:(0,d.Cq)(Array),default:()=>[]},renderContent:{type:(0,d.Cq)(Function)},modelValue:{type:(0,d.Cq)(Array),default:()=>[]},format:{type:(0,d.Cq)(Object),default:()=>({})},filterable:Boolean,props:{type:(0,d.Cq)(Object),default:()=>(0,vg.N)({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),vM=(e,t)=>[e,t].every(c.kJ)||(0,c.kJ)(e)&&(0,gr.Z)(t),wM={[p.O7]:(e,t,n)=>[e,n].every(c.kJ)&&["left","right"].includes(t),[p.f_]:e=>(0,c.kJ)(e),[gM]:vM,[mM]:vM},bM="checked-change",SM=(0,d.o8)({data:yM.data,optionRender:{type:(0,d.Cq)(Function)},placeholder:String,title:String,filterable:Boolean,format:yM.format,filterMethod:yM.filterMethod,defaultChecked:yM.leftDefaultChecked,props:yM.props}),_M={[bM]:vM},EM=e=>{const t={label:"label",key:"key",disabled:"disabled"};return(0,a.Fl)((()=>({...t,...e.props})))},kM=(e,t,n)=>{const r=EM(e),o=(0,a.Fl)((()=>e.data.filter((n=>{if((0,c.mf)(e.filterMethod))return e.filterMethod(t.query,n);{const e=String(n[r.value.label]||n[r.value.key]);return e.toLowerCase().includes(t.query.toLowerCase())}})))),s=(0,a.Fl)((()=>o.value.filter((e=>!e[r.value.disabled])))),i=(0,a.Fl)((()=>{const n=t.checked.length,r=e.data.length,{noChecked:o,hasChecked:s}=e.format;return o&&s?n>0?s.replace(/\${checked}/g,n.toString()).replace(/\${total}/g,r.toString()):o.replace(/\${total}/g,r.toString()):`${n}/${r}`})),l=(0,a.Fl)((()=>{const e=t.checked.length;return e>0&&e<s.value.length})),u=()=>{const e=s.value.map((e=>e[r.value.key]));t.allChecked=e.length>0&&e.every((e=>t.checked.includes(e)))},d=e=>{t.checked=e?s.value.map((e=>e[r.value.key])):[]};return(0,a.YP)((()=>t.checked),((e,r)=>{if(u(),t.checkChangeByUser){const t=e.concat(r).filter((t=>!e.includes(t)||!r.includes(t)));n(bM,e,t)}else n(bM,e),t.checkChangeByUser=!0})),(0,a.YP)(s,(()=>{u()})),(0,a.YP)((()=>e.data),(()=>{const e=[],n=o.value.map((e=>e[r.value.key]));t.checked.forEach((t=>{n.includes(t)&&e.push(t)})),t.checkChangeByUser=!1,t.checked=e})),(0,a.YP)((()=>e.defaultChecked),((e,n)=>{if(n&&e.length===n.length&&e.every((e=>n.includes(e))))return;const o=[],i=s.value.map((e=>e[r.value.key]));e.forEach((e=>{i.includes(e)&&o.push(e)})),t.checkChangeByUser=!1,t.checked=o}),{immediate:!0}),{filteredData:o,checkableData:s,checkedSummary:i,isIndeterminate:l,updateAllChecked:u,handleAllCheckedChange:d}},CM=(0,a.aZ)({name:"ElTransferPanel"}),IM=(0,a.aZ)({...CM,props:SM,emits:_M,setup(e,{expose:t,emit:n}){const r=e,o=(0,a.Rr)(),s=({option:e})=>e,{t:i}=(0,_s.bU)(),u=(0,y.s3)("transfer"),d=(0,l.qj)({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),h=EM(r),{filteredData:p,checkedSummary:f,isIndeterminate:g,handleAllCheckedChange:m}=kM(r,d,n),v=(0,a.Fl)((()=>!(0,wr.xb)(d.query)&&(0,wr.xb)(p.value))),w=(0,a.Fl)((()=>!(0,wr.xb)(o.default()[0].children))),{checked:b,allChecked:S,query:_}=(0,l.BK)(d);return t({query:_}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(u).b("panel"))},[(0,a._)("p",{class:(0,c.C_)((0,l.SU)(u).be("panel","header"))},[(0,a.Wm)((0,l.SU)(jp),{modelValue:(0,l.SU)(S),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.dq)(S)?S.value=e:null),indeterminate:(0,l.SU)(g),"validate-event":!1,onChange:(0,l.SU)(m)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.title)+" ",1),(0,a._)("span",null,(0,c.zw)((0,l.SU)(f)),1)])),_:1},8,["modelValue","indeterminate","onChange"])],2),(0,a._)("div",{class:(0,c.C_)([(0,l.SU)(u).be("panel","body"),(0,l.SU)(u).is("with-footer",(0,l.SU)(w))])},[e.filterable?((0,a.wg)(),(0,a.j4)((0,l.SU)(le.EZ),{key:0,modelValue:(0,l.SU)(_),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,l.dq)(_)?_.value=e:null),class:(0,c.C_)((0,l.SU)(u).be("panel","filter")),size:"default",placeholder:e.placeholder,"prefix-icon":(0,l.SU)(ae.olm),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):(0,a.kq)("v-if",!0),(0,a.wy)((0,a.Wm)((0,l.SU)($p),{modelValue:(0,l.SU)(b),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,l.dq)(b)?b.value=e:null),"validate-event":!1,class:(0,c.C_)([(0,l.SU)(u).is("filterable",e.filterable),(0,l.SU)(u).be("panel","list")])},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(p),(t=>((0,a.wg)(),(0,a.j4)((0,l.SU)(jp),{key:t[(0,l.SU)(h).key],class:(0,c.C_)((0,l.SU)(u).be("panel","item")),label:t[(0,l.SU)(h).key],disabled:t[(0,l.SU)(h).disabled],"validate-event":!1},{default:(0,a.w5)((()=>{var n;return[(0,a.Wm)(s,{option:null==(n=e.optionRender)?void 0:n.call(e,t)},null,8,["option"])]})),_:2},1032,["class","label","disabled"])))),128))])),_:1},8,["modelValue","class"]),[[A.F8,!(0,l.SU)(v)&&!(0,l.SU)(wr.xb)(e.data)]]),(0,a.wy)((0,a._)("p",{class:(0,c.C_)((0,l.SU)(u).be("panel","empty"))},(0,c.zw)((0,l.SU)(v)?(0,l.SU)(i)("el.transfer.noMatch"):(0,l.SU)(i)("el.transfer.noData")),3),[[A.F8,(0,l.SU)(v)||(0,l.SU)(wr.xb)(e.data)]])],2),(0,l.SU)(w)?((0,a.wg)(),(0,a.iD)("p",{key:0,class:(0,c.C_)((0,l.SU)(u).be("panel","footer"))},[(0,a.WI)(e.$slots,"default")],2)):(0,a.kq)("v-if",!0)],2))}});var AM=(0,m.Z)(IM,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const TM=e=>{const t=EM(e),n=(0,a.Fl)((()=>e.data.reduce(((e,n)=>(e[n[t.value.key]]=n)&&e),{}))),r=(0,a.Fl)((()=>e.data.filter((n=>!e.modelValue.includes(n[t.value.key]))))),o=(0,a.Fl)((()=>"original"===e.targetOrder?e.data.filter((n=>e.modelValue.includes(n[t.value.key]))):e.modelValue.reduce(((e,t)=>{const r=n.value[t];return r&&e.push(r),e}),[])));return{sourceData:r,targetData:o}},RM=(e,t)=>{const n=(n,r)=>{e.leftChecked=n,r&&t(gM,n,r)},r=(n,r)=>{e.rightChecked=n,r&&t(mM,n,r)};return{onSourceCheckedChange:n,onTargetCheckedChange:r}},xM=(e,t,n)=>{const r=EM(e),o=(e,t,r)=>{n(p.f_,e),n(p.O7,e,t,r)},s=()=>{const n=e.modelValue.slice();t.rightChecked.forEach((e=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)})),o(n,"left",t.rightChecked)},i=()=>{let n=e.modelValue.slice();const s=e.data.filter((n=>{const o=n[r.value.key];return t.leftChecked.includes(o)&&!e.modelValue.includes(o)})).map((e=>e[r.value.key]));n="unshift"===e.targetOrder?s.concat(n):n.concat(s),"original"===e.targetOrder&&(n=e.data.filter((e=>n.includes(e[r.value.key]))).map((e=>e[r.value.key]))),o(n,"right",t.leftChecked)};return{addToLeft:s,addToRight:i}},OM={key:0},NM={key:0},PM=(0,a.aZ)({name:"ElTransfer"}),DM=(0,a.aZ)({...PM,props:yM,emits:wM,setup(e,{expose:t,emit:n}){const r=e,o=(0,a.Rr)(),{t:s}=(0,_s.bU)(),i=(0,y.s3)("transfer"),{formItem:u}=(0,Ph.A)(),d=(0,l.qj)({leftChecked:[],rightChecked:[]}),h=EM(r),{sourceData:p,targetData:f}=TM(r),{onSourceCheckedChange:g,onTargetCheckedChange:m}=RM(d,n),{addToLeft:v,addToRight:b}=xM(r,d,n),S=(0,l.iH)(),_=(0,l.iH)(),E=e=>{switch(e){case"left":S.value.query="";break;case"right":_.value.query="";break}},k=(0,a.Fl)((()=>2===r.buttonTexts.length)),C=(0,a.Fl)((()=>r.titles[0]||s("el.transfer.titles.0"))),I=(0,a.Fl)((()=>r.titles[1]||s("el.transfer.titles.1"))),A=(0,a.Fl)((()=>r.filterPlaceholder||s("el.transfer.filterPlaceholder")));(0,a.YP)((()=>r.modelValue),(()=>{var e;r.validateEvent&&(null==(e=null==u?void 0:u.validate)||e.call(u,"change").catch((e=>(0,w.N)(e))))}));const R=(0,a.Fl)((()=>e=>r.renderContent?r.renderContent(a.h,e):o.default?o.default({option:e}):(0,a.h)("span",e[h.value.label]||e[h.value.key])));return t({clearQuery:E,leftPanel:S,rightPanel:_}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)((0,l.SU)(i).b())},[(0,a.Wm)(AM,{ref_key:"leftPanel",ref:S,data:(0,l.SU)(p),"option-render":(0,l.SU)(R),placeholder:(0,l.SU)(A),title:(0,l.SU)(C),filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,"default-checked":e.leftDefaultChecked,props:r.props,onCheckedChange:(0,l.SU)(g)},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"left-footer")])),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),(0,a._)("div",{class:(0,c.C_)((0,l.SU)(i).e("buttons"))},[(0,a.Wm)((0,l.SU)(ss.mi),{type:"primary",class:(0,c.C_)([(0,l.SU)(i).e("button"),(0,l.SU)(i).is("with-texts",(0,l.SU)(k))]),disabled:(0,l.SU)(wr.xb)(d.rightChecked),onClick:(0,l.SU)(v)},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.XdH))])),_:1}),(0,l.SU)(wr.o8)(e.buttonTexts[0])?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",OM,(0,c.zw)(e.buttonTexts[0]),1))])),_:1},8,["class","disabled","onClick"]),(0,a.Wm)((0,l.SU)(ss.mi),{type:"primary",class:(0,c.C_)([(0,l.SU)(i).e("button"),(0,l.SU)(i).is("with-texts",(0,l.SU)(k))]),disabled:(0,l.SU)(wr.xb)(d.leftChecked),onClick:(0,l.SU)(b)},{default:(0,a.w5)((()=>[(0,l.SU)(wr.o8)(e.buttonTexts[1])?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",NM,(0,c.zw)(e.buttonTexts[1]),1)),(0,a.Wm)((0,l.SU)(T.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.olP))])),_:1})])),_:1},8,["class","disabled","onClick"])],2),(0,a.Wm)(AM,{ref_key:"rightPanel",ref:_,data:(0,l.SU)(f),"option-render":(0,l.SU)(R),placeholder:(0,l.SU)(A),filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,title:(0,l.SU)(I),"default-checked":e.rightDefaultChecked,props:r.props,onCheckedChange:(0,l.SU)(m)},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"right-footer")])),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var UM=(0,m.Z)(DM,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const LM=(0,C.nz)(UM),BM="$treeNodeId",MM=function(e,t){t&&!t[BM]&&Object.defineProperty(t,BM,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},FM=function(e,t){return e?t[e]:t[BM]},jM=(e,t,n)=>{const r=e.value.currentNode;n();const o=e.value.currentNode;r!==o&&t("current-change",o?o.data:null,o)},zM=e=>{let t=!0,n=!0,r=!0;for(let o=0,s=e.length;o<s;o++){const s=e[o];(!0!==s.checked||s.indeterminate)&&(t=!1,s.disabled||(r=!1)),(!1!==s.checked||s.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:r,half:!t&&!n}},$M=function(e){if(0===e.childNodes.length||e.loading)return;const{all:t,none:n,half:r}=zM(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):r?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const o=e.parent;o&&0!==o.level&&(e.store.checkStrictly||$M(o))},VM=function(e,t){const n=e.store.props,r=e.data||{},o=n[t];if("function"===typeof o)return o(r,e);if("string"===typeof o)return r[o];if("undefined"===typeof o){const e=r[t];return void 0===e?"":e}};let HM=0;class KM{constructor(e){this.id=HM++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)(0,c.RI)(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&"undefined"!==typeof t.isLeaf){const e=VM(this,"isLeaf");"boolean"===typeof e&&(this.isLeafByUser=e)}if(!0!==e.lazy&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||MM(this,this.data),!this.data)return;const n=e.defaultExpandedKeys,r=e.key;r&&n&&n.includes(this.key)&&this.expand(null,e.autoExpandParent),r&&void 0!==e.currentNodeKey&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),!this.parent||1!==this.level&&!0!==this.parent.expanded||(this.canFocus=!0)}setData(e){let t;Array.isArray(e)||MM(this,e),this.data=e,this.childNodes=[],t=0===this.level&&Array.isArray(this.data)?this.data:VM(this,"children")||[];for(let n=0,r=t.length;n<r;n++)this.insertChild({data:t[n]})}get label(){return VM(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return VM(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some((n=>n===e||t&&n.contains(e)))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,n){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof KM)){if(!n){const n=this.getChildren(!0);n.includes(e.data)||("undefined"===typeof t||t<0?n.push(e.data):n.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=(0,l.qj)(new KM(e)),e instanceof KM&&e.initialize()}e.level=this.level+1,"undefined"===typeof t||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let n;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)}insertAfter(e,t){let n;t&&(n=this.childNodes.indexOf(t),-1!==n&&(n+=1)),this.insertChild(e,n)}removeChild(e){const t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);const r=this.childNodes.indexOf(e);r>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(r,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===e){t=this.childNodes[n];break}t&&this.removeChild(t)}expand(e,t){const n=()=>{if(t){let e=this.parent;while(e.level>0)e.expanded=!0,e=e.parent}this.expanded=!0,e&&e(),this.childNodes.forEach((e=>{e.canFocus=!0}))};this.shouldLoadData()?this.loadData((e=>{Array.isArray(e)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||$M(this),n())})):n()}doCreateChildren(e,t={}){e.forEach((e=>{this.insertChild(Object.assign({data:e},t),void 0,!0)}))}collapse(){this.expanded=!1,this.childNodes.forEach((e=>{e.canFocus=!1}))}shouldLoadData(){return!0===this.store.lazy&&this.store.load&&!this.loaded}updateLeafState(){if(!0===this.store.lazy&&!0!==this.loaded&&"undefined"!==typeof this.isLeafByUser)return void(this.isLeaf=this.isLeafByUser);const e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}setChecked(e,t,n,r){if(this.indeterminate="half"===e,this.checked=!0===e,this.store.checkStrictly)return;if(!this.shouldLoadData()||this.store.checkDescendants){const{all:n,allWithoutDisable:o}=zM(this.childNodes);this.isLeaf||n||!o||(this.checked=!1,e=!1);const s=()=>{if(t){const n=this.childNodes;for(let i=0,a=n.length;i<a;i++){const o=n[i];r=r||!1!==e;const s=o.disabled?o.checked:r;o.setChecked(s,t,!0,r)}const{half:o,all:s}=zM(n);s||(this.checked=s,this.indeterminate=o)}};if(this.shouldLoadData())return void this.loadData((()=>{s(),$M(this)}),{checked:!1!==e});s()}const o=this.parent;o&&0!==o.level&&(n||$M(o))}getChildren(e=!1){if(0===this.level)return this.data;const t=this.data;if(!t)return null;const n=this.store.props;let r="children";return n&&(r=n.children||"children"),void 0===t[r]&&(t[r]=null),e&&!t[r]&&(t[r]=[]),t[r]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map((e=>e.data)),n={},r=[];e.forEach(((e,o)=>{const s=e[BM],i=!!s&&t.findIndex((e=>e[BM]===s))>=0;i?n[s]={index:o,data:e}:r.push({index:o,data:e})})),this.store.lazy||t.forEach((e=>{n[e[BM]]||this.removeChildByData(e)})),r.forEach((({index:e,data:t})=>{this.insertChild({data:t},e)})),this.updateLeafState()}loadData(e,t={}){if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(t).length)e&&e.call(this);else{this.loading=!0;const n=n=>{this.childNodes=[],this.doCreateChildren(n,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,n)};this.store.load(this,n)}}}class qM{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)(0,c.RI)(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new KM({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,(e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()}))}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,n=this.lazy,r=function(o){const s=o.root?o.root.childNodes:o.childNodes;if(s.forEach((n=>{n.visible=t.call(n,e,n.data,n),r(n)})),!o.visible&&s.length){let e=!0;e=!s.some((e=>e.visible)),o.root?o.root.visible=!1===e:o.visible=!1===e}e&&(!o.visible||o.isLeaf||n||o.expand())};r(this)}setData(e){const t=e!==this.root.data;t?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof KM)return e;const t=(0,c.Kn)(e)?FM(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const n=this.getNode(t);n.parent.insertBefore({data:e},n)}insertAfter(e,t){const n=this.getNode(t);n.parent.insertAfter({data:e},n)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const n=t?this.getNode(t):this.root;n&&n.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach((e=>{const n=t[e];n&&n.setChecked(!0,!this.checkStrictly)}))}_initDefaultCheckedNode(e){const t=this.defaultCheckedKeys||[];t.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;if(e&&e.data)if(t){const t=e.key;void 0!==t&&(this.nodesMap[e.key]=e)}else this.nodesMap[e.id]=e}deregisterNode(e){const t=this.key;t&&e&&e.data&&(e.childNodes.forEach((e=>{this.deregisterNode(e)})),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const n=[],r=function(o){const s=o.root?o.root.childNodes:o.childNodes;s.forEach((o=>{(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&n.push(o.data),r(o)}))};return r(this),n}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map((e=>(e||{})[this.key]))}getHalfCheckedNodes(){const e=[],t=function(n){const r=n.root?n.root.childNodes:n.childNodes;r.forEach((n=>{n.indeterminate&&e.push(n.data),t(n)}))};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map((e=>(e||{})[this.key]))}_getAllNodes(){const e=[],t=this.nodesMap;for(const n in t)(0,c.RI)(t,n)&&e.push(t[n]);return e}updateChildren(e,t){const n=this.nodesMap[e];if(!n)return;const r=n.childNodes;for(let o=r.length-1;o>=0;o--){const e=r[o];this.remove(e.data)}for(let o=0,s=t.length;o<s;o++){const e=t[o];this.append(e,n.data)}}_setCheckedKeys(e,t=!1,n){const r=this._getAllNodes().sort(((e,t)=>t.level-e.level)),o=Object.create(null),s=Object.keys(n);r.forEach((e=>e.setChecked(!1,!1)));for(let i=0,a=r.length;i<a;i++){const n=r[i],a=n.data[e].toString(),l=s.includes(a);if(!l){n.checked&&!o[a]&&n.setChecked(!1,!1);continue}let c=n.parent;while(c&&c.level>0)o[c.data[e]]=!0,c=c.parent;if(n.isLeaf||this.checkStrictly)n.setChecked(!0,!1);else if(n.setChecked(!0,!0),t){n.setChecked(!1,!1);const e=function(t){const n=t.childNodes;n.forEach((t=>{t.isLeaf||t.setChecked(!1,!1),e(t)}))};e(n)}}}setCheckedNodes(e,t=!1){const n=this.key,r={};e.forEach((e=>{r[(e||{})[n]]=!0})),this._setCheckedKeys(n,t,r)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const n=this.key,r={};e.forEach((e=>{r[e]=!0})),this._setCheckedKeys(n,t,r)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach((e=>{const t=this.getNode(e);t&&t.expand(null,this.autoExpandParent)}))}setChecked(e,t,n){const r=this.getNode(e);r&&r.setChecked(!!t,n)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const n=e[this.key],r=this.nodesMap[n];this.setCurrentNode(r),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(null===e||void 0===e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);const n=this.getNode(e);n&&(this.setCurrentNode(n),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const WM=(0,a.aZ)({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=(0,y.s3)("tree"),n=(0,a.f3)("NodeInstance"),r=(0,a.f3)("RootTree");return()=>{const o=e.node,{data:s,store:i}=o;return e.renderContent?e.renderContent(a.h,{_self:n,node:o,data:s,store:i}):r.ctx.slots.default?r.ctx.slots.default({node:o,data:s}):(0,a.h)("span",{class:t.be("node","label")},[o.label])}}});var YM=(0,m.Z)(WM,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function GM(e){const t=(0,a.f3)("TreeNodeMap",null),n={treeNodeExpand:t=>{e.node!==t&&e.node.collapse()},children:[]};return t&&t.children.push(n),(0,a.JJ)("TreeNodeMap",n),{broadcastExpanded:t=>{if(e.accordion)for(const e of n.children)e.treeNodeExpand(t)}}}const ZM=Symbol("dragEvents");function JM({props:e,ctx:t,el$:n,dropIndicator$:r,store:o}){const s=(0,y.s3)("tree"),i=(0,l.iH)({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null}),c=({event:n,treeNode:r})=>{if("function"===typeof e.allowDrag&&!e.allowDrag(r.node))return n.preventDefault(),!1;n.dataTransfer.effectAllowed="move";try{n.dataTransfer.setData("text/plain","")}catch(nB){}i.value.draggingNode=r,t.emit("node-drag-start",r.node,n)},u=({event:o,treeNode:a})=>{const l=a,c=i.value.dropNode;c&&c!==l&&(0,v.IV)(c.$el,s.is("drop-inner"));const u=i.value.draggingNode;if(!u||!l)return;let d=!0,h=!0,p=!0,f=!0;"function"===typeof e.allowDrop&&(d=e.allowDrop(u.node,l.node,"prev"),f=h=e.allowDrop(u.node,l.node,"inner"),p=e.allowDrop(u.node,l.node,"next")),o.dataTransfer.dropEffect=h||d||p?"move":"none",(d||h||p)&&c!==l&&(c&&t.emit("node-drag-leave",u.node,c.node,o),t.emit("node-drag-enter",u.node,l.node,o)),(d||h||p)&&(i.value.dropNode=l),l.node.nextSibling===u.node&&(p=!1),l.node.previousSibling===u.node&&(d=!1),l.node.contains(u.node,!1)&&(h=!1),(u.node===l.node||u.node.contains(l.node))&&(d=!1,h=!1,p=!1);const g=l.$el.getBoundingClientRect(),m=n.value.getBoundingClientRect();let y;const w=d?h?.25:p?.45:1:-1,b=p?h?.75:d?.55:0:1;let S=-9999;const _=o.clientY-g.top;y=_<g.height*w?"before":_>g.height*b?"after":h?"inner":"none";const E=l.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),k=r.value;"before"===y?S=E.top-m.top:"after"===y&&(S=E.bottom-m.top),k.style.top=`${S}px`,k.style.left=E.right-m.left+"px","inner"===y?(0,v.cn)(l.$el,s.is("drop-inner")):(0,v.IV)(l.$el,s.is("drop-inner")),i.value.showDropIndicator="before"===y||"after"===y,i.value.allowDrop=i.value.showDropIndicator||f,i.value.dropType=y,t.emit("node-drag-over",u.node,l.node,o)},d=e=>{const{draggingNode:n,dropType:r,dropNode:a}=i.value;if(e.preventDefault(),e.dataTransfer.dropEffect="move",n&&a){const i={data:n.node.data};"none"!==r&&n.node.remove(),"before"===r?a.node.parent.insertBefore(i,a.node):"after"===r?a.node.parent.insertAfter(i,a.node):"inner"===r&&a.node.insertChild(i),"none"!==r&&o.value.registerNode(i),(0,v.IV)(a.$el,s.is("drop-inner")),t.emit("node-drag-end",n.node,a.node,r,e),"none"!==r&&t.emit("node-drop",n.node,a.node,r,e)}n&&!a&&t.emit("node-drag-end",n.node,null,r,e),i.value.showDropIndicator=!1,i.value.draggingNode=null,i.value.dropNode=null,i.value.allowDrop=!0};return(0,a.JJ)(ZM,{treeNodeDragStart:c,treeNodeDragOver:u,treeNodeDragEnd:d}),{dragState:i}}const QM=(0,a.aZ)({name:"ElTreeNode",components:{ElCollapseTransition:Fg,ElCheckbox:jp,NodeContent:YM,ElIcon:T.gn,Loading:ae.gbz},props:{node:{type:KM,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const n=(0,y.s3)("tree"),{broadcastExpanded:r}=GM(e),o=(0,a.f3)("RootTree"),s=(0,l.iH)(!1),i=(0,l.iH)(!1),u=(0,l.iH)(null),d=(0,l.iH)(null),h=(0,l.iH)(null),p=(0,a.f3)(ZM),f=(0,a.FN)();(0,a.JJ)("NodeInstance",f),o||(0,w.N)("Tree","Can not find node's tree."),e.node.expanded&&(s.value=!0,i.value=!0);const g=o.props["children"]||"children";(0,a.YP)((()=>{const t=e.node.data[g];return t&&[...t]}),(()=>{e.node.updateChildren()})),(0,a.YP)((()=>e.node.indeterminate),(t=>{b(e.node.checked,t)})),(0,a.YP)((()=>e.node.checked),(t=>{b(t,e.node.indeterminate)})),(0,a.YP)((()=>e.node.expanded),(e=>{(0,a.Y3)((()=>s.value=e)),e&&(i.value=!0)}));const m=e=>FM(o.props.nodeKey,e.data),v=t=>{const n=e.props.class;if(!n)return{};let r;if((0,c.mf)(n)){const{data:e}=t;r=n(e,t)}else r=n;return(0,c.HD)(r)?{[r]:!0}:r},b=(t,n)=>{u.value===t&&d.value===n||o.ctx.emit("check-change",e.node.data,t,n),u.value=t,d.value=n},S=t=>{jM(o.store,o.ctx.emit,(()=>o.store.value.setCurrentNode(e.node))),o.currentNode.value=e.node,o.props.expandOnClickNode&&E(),o.props.checkOnClickNode&&!e.node.disabled&&k(null,{target:{checked:!e.node.checked}}),o.ctx.emit("node-click",e.node.data,e.node,f,t)},_=t=>{o.instance.vnode.props["onNodeContextmenu"]&&(t.stopPropagation(),t.preventDefault()),o.ctx.emit("node-contextmenu",t,e.node.data,e.node,f)},E=()=>{e.node.isLeaf||(s.value?(o.ctx.emit("node-collapse",e.node.data,e.node,f),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,f)))},k=(t,n)=>{e.node.setChecked(n.target.checked,!o.props.checkStrictly),(0,a.Y3)((()=>{const t=o.store.value;o.ctx.emit("check",e.node.data,{checkedNodes:t.getCheckedNodes(),checkedKeys:t.getCheckedKeys(),halfCheckedNodes:t.getHalfCheckedNodes(),halfCheckedKeys:t.getHalfCheckedKeys()})}))},C=(e,t,n)=>{r(t),o.ctx.emit("node-expand",e,t,n)},I=t=>{o.props.draggable&&p.treeNodeDragStart({event:t,treeNode:e})},A=t=>{t.preventDefault(),o.props.draggable&&p.treeNodeDragOver({event:t,treeNode:{$el:h.value,node:e.node}})},T=e=>{e.preventDefault()},R=e=>{o.props.draggable&&p.treeNodeDragEnd(e)};return{ns:n,node$:h,tree:o,expanded:s,childNodeRendered:i,oldChecked:u,oldIndeterminate:d,getNodeKey:m,getNodeClass:v,handleSelectChange:b,handleClick:S,handleContextMenu:_,handleExpandIconClick:E,handleCheckChange:k,handleChildNodeExpand:C,handleDragStart:I,handleDragOver:A,handleDrop:T,handleDragEnd:R,CaretRight:ae.TZ}}}),XM=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],eF=["aria-expanded"];function tF(e,t,n,r,o,s){const i=(0,a.up)("el-icon"),l=(0,a.up)("el-checkbox"),u=(0,a.up)("loading"),d=(0,a.up)("node-content"),h=(0,a.up)("el-tree-node"),p=(0,a.up)("el-collapse-transition");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{ref:"node$",class:(0,c.C_)([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=(0,A.iM)(((...t)=>e.handleClick&&e.handleClick(...t)),["stop"])),onContextmenu:t[2]||(t[2]=(...t)=>e.handleContextMenu&&e.handleContextMenu(...t)),onDragstart:t[3]||(t[3]=(0,A.iM)(((...t)=>e.handleDragStart&&e.handleDragStart(...t)),["stop"])),onDragover:t[4]||(t[4]=(0,A.iM)(((...t)=>e.handleDragOver&&e.handleDragOver(...t)),["stop"])),onDragend:t[5]||(t[5]=(0,A.iM)(((...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),["stop"])),onDrop:t[6]||(t[6]=(0,A.iM)(((...t)=>e.handleDrop&&e.handleDrop(...t)),["stop"]))},[(0,a._)("div",{class:(0,c.C_)(e.ns.be("node","content")),style:(0,c.j5)({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?((0,a.wg)(),(0,a.j4)(i,{key:0,class:(0,c.C_)([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:(0,A.iM)(e.handleExpandIconClick,["stop"])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.tree.props.icon||e.CaretRight)))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0),e.showCheckbox?((0,a.wg)(),(0,a.j4)(l,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=(0,A.iM)((()=>{}),["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):(0,a.kq)("v-if",!0),e.node.loading?((0,a.wg)(),(0,a.j4)(i,{key:2,class:(0,c.C_)([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:(0,a.w5)((()=>[(0,a.Wm)(u)])),_:1},8,["class"])):(0,a.kq)("v-if",!0),(0,a.Wm)(d,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[!e.renderAfterExpand||e.childNodeRendered?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.node.childNodes,(t=>((0,a.wg)(),(0,a.j4)(h,{key:e.getNodeKey(t),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:t,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"])))),128))],10,eF)),[[A.F8,e.expanded]]):(0,a.kq)("v-if",!0)])),_:1})],42,XM)),[[A.F8,e.node.visible]])}var nF=(0,m.Z)(QM,[["render",tF],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function rF({el$:e},t){const n=(0,y.s3)("tree"),r=(0,l.XI)([]),o=(0,l.XI)([]);(0,a.bv)((()=>{i()})),(0,a.ic)((()=>{r.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),o.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))})),(0,a.YP)(o,(e=>{e.forEach((e=>{e.setAttribute("tabindex","-1")}))}));const s=o=>{const s=o.target;if(!s.className.includes(n.b("node")))return;const i=o.code;r.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const a=r.value.indexOf(s);let l;if([Jn.n.up,Jn.n.down].includes(i)){if(o.preventDefault(),i===Jn.n.up){l=-1===a?0:0!==a?a-1:r.value.length-1;const e=l;while(1){if(t.value.getNode(r.value[l].dataset.key).canFocus)break;if(l--,l===e){l=-1;break}l<0&&(l=r.value.length-1)}}else{l=-1===a?0:a<r.value.length-1?a+1:0;const e=l;while(1){if(t.value.getNode(r.value[l].dataset.key).canFocus)break;if(l++,l===e){l=-1;break}l>=r.value.length&&(l=0)}}-1!==l&&r.value[l].focus()}[Jn.n.left,Jn.n.right].includes(i)&&(o.preventDefault(),s.click());const c=s.querySelector('[type="checkbox"]');[Jn.n.enter,Jn.n.space].includes(i)&&c&&(o.preventDefault(),c.click())};(0,u.ORN)(e,"keydown",s);const i=()=>{var t;r.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),o.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const s=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);s.length?s[0].setAttribute("tabindex","0"):null==(t=r.value[0])||t.setAttribute("tabindex","0")}}const oF=(0,a.aZ)({name:"ElTree",components:{ElTreeNode:nF},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:x.AA}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=(0,_s.bU)(),r=(0,y.s3)("tree"),o=(0,l.iH)(new qM({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));o.value.initialize();const s=(0,l.iH)(o.value.root),i=(0,l.iH)(null),c=(0,l.iH)(null),u=(0,l.iH)(null),{broadcastExpanded:d}=GM(e),{dragState:h}=JM({props:e,ctx:t,el$:c,dropIndicator$:u,store:o});rF({el$:c},o);const p=(0,a.Fl)((()=>{const{childNodes:e}=s.value;return!e||0===e.length||e.every((({visible:e})=>!e))}));(0,a.YP)((()=>e.currentNodeKey),(e=>{o.value.setCurrentNodeKey(e)})),(0,a.YP)((()=>e.defaultCheckedKeys),(e=>{o.value.setDefaultCheckedKey(e)})),(0,a.YP)((()=>e.defaultExpandedKeys),(e=>{o.value.setDefaultExpandedKeys(e)})),(0,a.YP)((()=>e.data),(e=>{o.value.setData(e)}),{deep:!0}),(0,a.YP)((()=>e.checkStrictly),(e=>{o.value.checkStrictly=e}));const f=t=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");o.value.filter(t)},g=t=>FM(e.nodeKey,t.data),m=t=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const n=o.value.getNode(t);if(!n)return[];const r=[n.data];let i=n.parent;while(i&&i!==s.value)r.push(i.data),i=i.parent;return r.reverse()},v=(e,t)=>o.value.getCheckedNodes(e,t),w=e=>o.value.getCheckedKeys(e),b=()=>{const e=o.value.getCurrentNode();return e?e.data:null},S=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const t=b();return t?t[e.nodeKey]:null},_=(t,n)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");o.value.setCheckedNodes(t,n)},E=(t,n)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");o.value.setCheckedKeys(t,n)},k=(e,t,n)=>{o.value.setChecked(e,t,n)},C=()=>o.value.getHalfCheckedNodes(),I=()=>o.value.getHalfCheckedKeys(),A=(n,r=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");jM(o,t.emit,(()=>o.value.setUserCurrentNode(n,r)))},T=(n,r=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");jM(o,t.emit,(()=>o.value.setCurrentNodeKey(n,r)))},R=e=>o.value.getNode(e),x=e=>{o.value.remove(e)},O=(e,t)=>{o.value.append(e,t)},N=(e,t)=>{o.value.insertBefore(e,t)},P=(e,t)=>{o.value.insertAfter(e,t)},D=(e,n,r)=>{d(n),t.emit("node-expand",e,n,r)},U=(t,n)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");o.value.updateChildren(t,n)};return(0,a.JJ)("RootTree",{ctx:t,props:e,store:o,root:s,currentNode:i,instance:(0,a.FN)()}),(0,a.JJ)(Gr.K,void 0),{ns:r,store:o,root:s,currentNode:i,dragState:h,el$:c,dropIndicator$:u,isEmpty:p,filter:f,getNodeKey:g,getNodePath:m,getCheckedNodes:v,getCheckedKeys:w,getCurrentNode:b,getCurrentKey:S,setCheckedNodes:_,setCheckedKeys:E,setChecked:k,getHalfCheckedNodes:C,getHalfCheckedKeys:I,setCurrentNode:A,setCurrentKey:T,t:n,getNode:R,remove:x,append:O,insertBefore:N,insertAfter:P,handleNodeExpand:D,updateKeyChildren:U}}});function sF(e,t,n,r,o,s){var i;const l=(0,a.up)("el-tree-node");return(0,a.wg)(),(0,a.iD)("div",{ref:"el$",class:(0,c.C_)([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner","inner"===e.dragState.dropType),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.root.childNodes,(t=>((0,a.wg)(),(0,a.j4)(l,{key:e.getNodeKey(t),node:t,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"])))),128)),e.isEmpty?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,c.C_)(e.ns.e("empty-block"))},[(0,a._)("span",{class:(0,c.C_)(e.ns.e("empty-text"))},(0,c.zw)(null!=(i=e.emptyText)?i:e.t("el.tree.emptyText")),3)],2)):(0,a.kq)("v-if",!0),(0,a.wy)((0,a._)("div",{ref:"dropIndicator$",class:(0,c.C_)(e.ns.e("drop-indicator"))},null,2),[[A.F8,e.dragState.showDropIndicator]])],2)}var iF=(0,m.Z)(oF,[["render",sF],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);iF.install=e=>{e.component(iF.name,iF)};const aF=iF,lF=aF,cF=(e,{attrs:t},{tree:n,key:r})=>{const o=(0,y.s3)("tree-select"),s={...Dp((0,l.BK)(e),Object.keys(vC.props)),...t,valueKey:r,popperClass:(0,a.Fl)((()=>{const t=[o.e("popper")];return e.popperClass&&t.push(e.popperClass),t.join(" ")})),filterMethod:(t="")=>{e.filterMethod&&e.filterMethod(t),(0,a.Y3)((()=>{var e;null==(e=n.value)||e.filter(t)}))},onVisibleChange:n=>{var r;null==(r=t.onVisibleChange)||r.call(t,n),e.filterable&&n&&s.filterMethod()}};return s},uF=(0,a.aZ)({extends:wC,setup(e,t){const n=wC.setup(e,t);delete n.selectOptionClick;const r=(0,a.FN)().proxy;return(0,a.Y3)((()=>{n.select.cachedOptions.get(r.value)||n.select.onOptionCreate(r)})),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function dF(e){return e||0===e}function hF(e){return Array.isArray(e)&&e.length}function pF(e){return Array.isArray(e)?e:dF(e)?[e]:[]}function fF(e,t,n,r,o){for(let s=0;s<e.length;s++){const i=e[s];if(t(i,s,e,o))return r?r(i,s,e,o):i;{const e=n(i);if(hF(e)){const o=fF(e,t,n,r,i);if(o)return o}}}}function gF(e,t,n,r){for(let o=0;o<e.length;o++){const s=e[o];t(s,o,e,r);const i=n(s);hF(i)&&gF(i,t,n,s)}}const mF=(e,{attrs:t,slots:n,emit:r},{select:o,tree:s,key:i})=>{(0,a.YP)((()=>e.modelValue),(()=>{e.showCheckbox&&(0,a.Y3)((()=>{const t=s.value;t&&!wh(t.getCheckedKeys(),pF(e.modelValue))&&t.setCheckedKeys(pF(e.modelValue))}))}),{immediate:!0,deep:!0});const u=(0,a.Fl)((()=>({value:i.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props}))),d=(e,t)=>{var n;const r=u.value[e];return(0,c.mf)(r)?r(t,null==(n=s.value)?void 0:n.getNode(d("value",t))):t[r]},h=pF(e.modelValue).map((t=>fF(e.data||[],(e=>d("value",e)===t),(e=>d("children",e)),((e,t,n,r)=>r&&d("value",r))))).filter((e=>dF(e))),f=(0,a.Fl)((()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const t=[];return gF(e.data.concat(e.cacheData),(e=>{const n=d("value",e);t.push({value:n,currentLabel:d("label",e),isDisabled:d("disabled",e)})}),(e=>d("children",e))),t}));return{...Dp((0,l.BK)(e),Object.keys(aF.props)),...t,nodeKey:i,expandOnClickNode:(0,a.Fl)((()=>!e.checkStrictly&&e.expandOnClickNode)),defaultExpandedKeys:(0,a.Fl)((()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(h):h)),renderContent:(t,{node:r,data:o,store:s})=>t(uF,{value:d("value",o),label:d("label",o),disabled:d("disabled",o)},e.renderContent?()=>e.renderContent(t,{node:r,data:o,store:s}):n.default?()=>n.default({node:r,data:o,store:s}):void 0),filterNodeMethod:(t,n,r)=>{var o;return e.filterNodeMethod?e.filterNodeMethod(t,n,r):!t||(null==(o=d("label",n))?void 0:o.includes(t))},onNodeClick:(n,r,s)=>{var i,a,l;if(null==(i=t.onNodeClick)||i.call(t,n,r,s),!e.showCheckbox||!e.checkOnClickNode)if(e.showCheckbox||!e.checkStrictly&&!r.isLeaf)e.expandOnClickNode&&s.proxy.handleExpandIconClick();else if(!d("disabled",n)){const e=null==(a=o.value)?void 0:a.options.get(d("value",n));null==(l=o.value)||l.handleOptionSelect(e,!0)}},onCheck:(n,o)=>{var i;null==(i=t.onCheck)||i.call(t,n,o);const a=d("value",n);if(e.checkStrictly)r(p.f_,e.multiple?o.checkedKeys:o.checkedKeys.includes(a)?a:void 0);else if(e.multiple)r(p.f_,s.value.getCheckedKeys(!0));else{const t=fF([n],(e=>!hF(d("children",e))&&!d("disabled",e)),(e=>d("children",e))),o=t?d("value",t):void 0,s=dF(e.modelValue)&&!!fF([n],(t=>d("value",t)===e.modelValue),(e=>d("children",e)));r(p.f_,o===e.modelValue||s?void 0:o)}},cacheOptions:f}};var yF=(0,a.aZ)({props:{data:{type:Array,default:()=>[]}},setup(e){const t=(0,a.f3)(Yk);return(0,a.YP)((()=>e.data),(()=>{var n;e.data.forEach((e=>{t.cachedOptions.has(e.value)||t.cachedOptions.set(e.value,e)}));const r=(null==(n=t.selectWrapper)?void 0:n.querySelectorAll("input"))||[];Array.from(r).includes(document.activeElement)||t.setSelected()}),{flush:"post",immediate:!0}),()=>{}}});const vF=(0,a.aZ)({name:"ElTreeSelect",inheritAttrs:!1,props:{...vC.props,...aF.props,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:n,expose:r}=t,o=(0,l.iH)(),s=(0,l.iH)(),i=(0,a.Fl)((()=>e.nodeKey||e.valueKey||"value")),c=cF(e,t,{select:o,tree:s,key:i}),{cacheOptions:u,...d}=mF(e,t,{select:o,tree:s,key:i}),h=(0,l.qj)({});return r(h),(0,a.bv)((()=>{Object.assign(h,{...Dp(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Dp(o.value,["focus","blur"])})})),()=>(0,a.h)(vC,(0,l.qj)({...c,ref:e=>o.value=e}),{...n,default:()=>[(0,a.h)(yF,{data:u.value}),(0,a.h)(aF,(0,l.qj)({...d,ref:e=>s.value=e}))]})}});var wF=(0,m.Z)(vF,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);wF.install=e=>{e.component(wF.name,wF)};const bF=wF,SF=bF,_F=Symbol(),EF={key:-1,level:-1,data:{}};var kF=(e=>(e["KEY"]="id",e["LABEL"]="label",e["CHILDREN"]="children",e["DISABLED"]="disabled",e))(kF||{}),CF=(e=>(e["ADD"]="add",e["DELETE"]="delete",e))(CF||{});const IF={type:Number,default:26},AF=(0,d.o8)({data:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:(0,d.Cq)(Object),default:()=>(0,vg.N)({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},indent:{type:Number,default:16},itemSize:IF,icon:{type:x.AA},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:(0,d.Cq)([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:(0,d.Cq)(Function)},perfMode:{type:Boolean,default:!0}}),TF=(0,d.o8)({node:{type:(0,d.Cq)(Object),default:()=>(0,vg.N)(EF)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:IF}),RF=(0,d.o8)({node:{type:(0,d.Cq)(Object),required:!0}}),xF="node-click",OF="node-expand",NF="node-collapse",PF="current-change",DF="check",UF="check-change",LF="node-contextmenu",BF={[xF]:(e,t,n)=>e&&t&&n,[OF]:(e,t)=>e&&t,[NF]:(e,t)=>e&&t,[PF]:(e,t)=>e&&t,[DF]:(e,t)=>e&&t,[UF]:(e,t)=>e&&"boolean"===typeof t,[LF]:(e,t,n)=>e&&t&&n},MF={click:(e,t)=>!(!e||!t),toggle:e=>!!e,check:(e,t)=>e&&"boolean"===typeof t};function FF(e,t){const n=(0,l.iH)(new Set),r=(0,l.iH)(new Set),{emit:o}=(0,a.FN)();(0,a.YP)([()=>t.value,()=>e.defaultCheckedKeys],(()=>(0,a.Y3)((()=>{b(e.defaultCheckedKeys)}))),{immediate:!0});const s=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:o,maxLevel:s}=t.value,i=n.value,a=new Set;for(let e=s-1;e>=1;--e){const t=o.get(e);t&&t.forEach((e=>{const t=e.children;if(t){let n=!0,r=!1;for(const e of t){const t=e.key;if(i.has(t))r=!0;else{if(a.has(t)){n=!1,r=!0;break}n=!1}}n?i.add(e.key):r?(a.add(e.key),i.delete(e.key)):(i.delete(e.key),a.delete(e.key))}}))}r.value=a},i=e=>n.value.has(e.key),c=e=>r.value.has(e.key),u=(t,r,o=!0)=>{const i=n.value,a=(t,n)=>{i[n?CF.ADD:CF.DELETE](t.key);const r=t.children;!e.checkStrictly&&r&&r.forEach((e=>{e.disabled||a(e,n)}))};a(t,r),s(),o&&d(t,r)},d=(e,t)=>{const{checkedNodes:n,checkedKeys:r}=m(),{halfCheckedNodes:s,halfCheckedKeys:i}=y();o(DF,e.data,{checkedKeys:r,checkedNodes:n,halfCheckedKeys:i,halfCheckedNodes:s}),o(UF,e.data,t)};function h(e=!1){return m(e).checkedKeys}function p(e=!1){return m(e).checkedNodes}function f(){return y().halfCheckedKeys}function g(){return y().halfCheckedNodes}function m(r=!1){const o=[],s=[];if((null==t?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:e}=t.value;n.value.forEach((t=>{const n=e.get(t);n&&(!r||r&&n.isLeaf)&&(s.push(t),o.push(n.data))}))}return{checkedKeys:s,checkedNodes:o}}function y(){const n=[],o=[];if((null==t?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:e}=t.value;r.value.forEach((t=>{const r=e.get(t);r&&(o.push(t),n.push(r.data))}))}return{halfCheckedNodes:n,halfCheckedKeys:o}}function v(e){n.value.clear(),r.value.clear(),b(e)}function w(n,r){if((null==t?void 0:t.value)&&e.showCheckbox){const e=t.value.treeNodeMap.get(n);e&&u(e,r,!1)}}function b(n){if(null==t?void 0:t.value){const{treeNodeMap:r}=t.value;if(e.showCheckbox&&r&&n)for(const e of n){const t=r.get(e);t&&!i(t)&&u(t,!0,!1)}}}return{updateCheckedKeys:s,toggleCheckbox:u,isChecked:i,isIndeterminate:c,getCheckedKeys:h,getCheckedNodes:p,getHalfCheckedKeys:f,getHalfCheckedNodes:g,setChecked:w,setCheckedKeys:v}}function jF(e,t){const n=(0,l.iH)(new Set([])),r=(0,l.iH)(new Set([])),o=(0,a.Fl)((()=>(0,c.mf)(e.filterMethod)));function s(s){var i;if(!o.value)return;const a=new Set,l=r.value,c=n.value,u=[],d=(null==(i=t.value)?void 0:i.treeNodes)||[],h=e.filterMethod;function p(e){e.forEach((e=>{u.push(e),(null==h?void 0:h(s,e.data))?u.forEach((e=>{a.add(e.key)})):e.isLeaf&&c.add(e.key);const t=e.children;if(t&&p(t),!e.isLeaf)if(a.has(e.key)){if(t){let n=!0;for(const e of t)if(!c.has(e.key)){n=!1;break}n?l.add(e.key):l.delete(e.key)}}else c.add(e.key);u.pop()}))}return c.clear(),p(d),a}function i(e){return r.value.has(e.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:n,doFilter:s,isForceHiddenExpandIcon:i}}function zF(e,t){const n=(0,l.iH)(new Set(e.defaultExpandedKeys)),r=(0,l.iH)(),o=(0,l.XI)();(0,a.YP)((()=>e.currentNodeKey),(e=>{r.value=e}),{immediate:!0}),(0,a.YP)((()=>e.data),(e=>{K(e)}),{immediate:!0});const{isIndeterminate:s,isChecked:i,toggleCheckbox:u,getCheckedKeys:d,getCheckedNodes:h,getHalfCheckedKeys:p,getHalfCheckedNodes:f,setChecked:g,setCheckedKeys:m}=FF(e,o),{doFilter:y,hiddenNodeKeySet:v,isForceHiddenExpandIcon:w}=jF(e,o),b=(0,a.Fl)((()=>{var t;return(null==(t=e.props)?void 0:t.value)||kF.KEY})),S=(0,a.Fl)((()=>{var t;return(null==(t=e.props)?void 0:t.children)||kF.CHILDREN})),_=(0,a.Fl)((()=>{var t;return(null==(t=e.props)?void 0:t.disabled)||kF.DISABLED})),E=(0,a.Fl)((()=>{var t;return(null==(t=e.props)?void 0:t.label)||kF.LABEL})),k=(0,a.Fl)((()=>{const e=n.value,t=v.value,r=[],s=o.value&&o.value.treeNodes||[];function i(){const n=[];for(let e=s.length-1;e>=0;--e)n.push(s[e]);while(n.length){const o=n.pop();if(o&&(t.has(o.key)||r.push(o),e.has(o.key))){const e=o.children;if(e){const t=e.length;for(let r=t-1;r>=0;--r)n.push(e[r])}}}}return i(),r})),C=(0,a.Fl)((()=>k.value.length>0));function I(e){const t=new Map,n=new Map;let r=1;function o(e,s=1,i=undefined){var a;const l=[];for(const r of e){const e=R(r),c={level:s,key:e,data:r};c.label=O(r),c.parent=i;const u=T(r);c.disabled=x(r),c.isLeaf=!u||0===u.length,u&&u.length&&(c.children=o(u,s+1,c)),l.push(c),t.set(e,c),n.has(s)||n.set(s,[]),null==(a=n.get(s))||a.push(c)}return s>r&&(r=s),l}const s=o(e);return{treeNodeMap:t,levelTreeNodeMap:n,maxLevel:r,treeNodes:s}}function A(e){const t=y(e);t&&(n.value=t)}function T(e){return e[S.value]}function R(e){return e?e[b.value]:""}function x(e){return e[_.value]}function O(e){return e[E.value]}function N(e){const t=n.value;t.has(e.key)?M(e):B(e)}function P(e){n.value=new Set(e)}function D(n,r){t(xF,n.data,n,r),U(n),e.expandOnClickNode&&N(n),e.showCheckbox&&e.checkOnClickNode&&!n.disabled&&u(n,!i(n),!0)}function U(e){z(e)||(r.value=e.key,t(PF,e.data,e))}function L(e,t){u(e,t)}function B(r){const s=n.value;if(o.value&&e.accordion){const{treeNodeMap:e}=o.value;s.forEach((t=>{const n=e.get(t);r&&r.level===(null==n?void 0:n.level)&&s.delete(t)}))}s.add(r.key),t(OF,r.data,r)}function M(e){n.value.delete(e.key),t(NF,e.data,e)}function F(e){return n.value.has(e.key)}function j(e){return!!e.disabled}function z(e){const t=r.value;return!!t&&t===e.key}function $(){var e,t;if(r.value)return null==(t=null==(e=o.value)?void 0:e.treeNodeMap.get(r.value))?void 0:t.data}function V(){return r.value}function H(e){r.value=e}function K(e){(0,a.Y3)((()=>o.value=I(e)))}function q(e){var t;const n=(0,c.Kn)(e)?R(e):e;return null==(t=o.value)?void 0:t.treeNodeMap.get(n)}return{tree:o,flattenTree:k,isNotEmpty:C,getKey:R,getChildren:T,toggleExpand:N,toggleCheckbox:u,isExpanded:F,isChecked:i,isIndeterminate:s,isDisabled:j,isCurrent:z,isForceHiddenExpandIcon:w,handleNodeClick:D,handleNodeCheck:L,getCurrentNode:$,getCurrentKey:V,setCurrentKey:H,getCheckedKeys:d,getCheckedNodes:h,getHalfCheckedKeys:p,getHalfCheckedNodes:f,setChecked:g,setCheckedKeys:m,filter:A,setData:K,getNode:q,expandNode:B,collapseNode:M,setExpandedKeys:P}}var $F=(0,a.aZ)({name:"ElTreeNodeContent",props:RF,setup(e){const t=(0,a.f3)(_F),n=(0,y.s3)("tree");return()=>{const r=e.node,{data:o}=r;return(null==t?void 0:t.ctx.slots.default)?t.ctx.slots.default({node:r,data:o}):(0,a.h)("span",{class:n.be("node","label")},[null==r?void 0:r.label])}}});const VF=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],HF=(0,a.aZ)({name:"ElTreeNode"}),KF=(0,a.aZ)({...HF,props:TF,emits:MF,setup(e,{emit:t}){const n=e,r=(0,a.f3)(_F),o=(0,y.s3)("tree"),s=(0,a.Fl)((()=>{var e;return null!=(e=null==r?void 0:r.props.indent)?e:16})),i=(0,a.Fl)((()=>{var e;return null!=(e=null==r?void 0:r.props.icon)?e:ae.TZ})),u=e=>{t("click",n.node,e)},d=()=>{t("toggle",n.node)},h=e=>{t("check",n.node,e)},p=e=>{var t,o,s,i;(null==(s=null==(o=null==(t=null==r?void 0:r.instance)?void 0:t.vnode)?void 0:o.props)?void 0:s["onNodeContextmenu"])&&(e.stopPropagation(),e.preventDefault()),null==r||r.ctx.emit(LF,e,null==(i=n.node)?void 0:i.data,n.node)};return(e,t)=>{var n,r,f;return(0,a.wg)(),(0,a.iD)("div",{ref:"node$",class:(0,c.C_)([(0,l.SU)(o).b("node"),(0,l.SU)(o).is("expanded",e.expanded),(0,l.SU)(o).is("current",e.current),(0,l.SU)(o).is("focusable",!e.disabled),(0,l.SU)(o).is("checked",!e.disabled&&e.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.disabled,"aria-checked":e.checked,"data-key":null==(n=e.node)?void 0:n.key,onClick:(0,A.iM)(u,["stop"]),onContextmenu:p},[(0,a._)("div",{class:(0,c.C_)((0,l.SU)(o).be("node","content")),style:(0,c.j5)({paddingLeft:(e.node.level-1)*(0,l.SU)(s)+"px",height:e.itemSize+"px"})},[(0,l.SU)(i)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)([(0,l.SU)(o).is("leaf",!!(null==(r=e.node)?void 0:r.isLeaf)),(0,l.SU)(o).is("hidden",e.hiddenExpandIcon),{expanded:!(null==(f=e.node)?void 0:f.isLeaf)&&e.expanded},(0,l.SU)(o).be("node","expand-icon")]),onClick:(0,A.iM)(d,["stop"])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(i))))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0),e.showCheckbox?((0,a.wg)(),(0,a.j4)((0,l.SU)(jp),{key:1,"model-value":e.checked,indeterminate:e.indeterminate,disabled:e.disabled,onChange:h,onClick:t[0]||(t[0]=(0,A.iM)((()=>{}),["stop"]))},null,8,["model-value","indeterminate","disabled"])):(0,a.kq)("v-if",!0),(0,a.Wm)((0,l.SU)($F),{node:e.node},null,8,["node"])],6)],42,VF)}}});var qF=(0,m.Z)(KF,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const WF=(0,a.aZ)({name:"ElTreeV2"}),YF=(0,a.aZ)({...WF,props:AF,emits:BF,setup(e,{expose:t,emit:n}){const r=e,o=(0,a.Rr)(),s=(0,a.Fl)((()=>r.itemSize));(0,a.JJ)(_F,{ctx:{emit:n,slots:o},props:r,instance:(0,a.FN)()}),(0,a.JJ)(Gr.K,void 0);const{t:i}=(0,_s.bU)(),u=(0,y.s3)("tree"),{flattenTree:d,isNotEmpty:h,toggleExpand:p,isExpanded:f,isIndeterminate:g,isChecked:m,isDisabled:v,isCurrent:w,isForceHiddenExpandIcon:b,handleNodeClick:S,handleNodeCheck:_,toggleCheckbox:E,getCurrentNode:k,getCurrentKey:C,setCurrentKey:I,getCheckedKeys:A,getCheckedNodes:T,getHalfCheckedKeys:R,getHalfCheckedNodes:x,setChecked:O,setCheckedKeys:N,filter:P,setData:D,getNode:U,expandNode:L,collapseNode:B,setExpandedKeys:M}=zF(r,n);return t({toggleCheckbox:E,getCurrentNode:k,getCurrentKey:C,setCurrentKey:I,getCheckedKeys:A,getCheckedNodes:T,getHalfCheckedKeys:R,getHalfCheckedNodes:x,setChecked:O,setCheckedKeys:N,filter:P,setData:D,getNode:U,expandNode:L,collapseNode:B,setExpandedKeys:M}),(e,t)=>{var n;return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(u).b(),{[(0,l.SU)(u).m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(0,l.SU)(h)?((0,a.wg)(),(0,a.j4)((0,l.SU)(rT),{key:0,"class-name":(0,l.SU)(u).b("virtual-list"),data:(0,l.SU)(d),total:(0,l.SU)(d).length,height:e.height,"item-size":(0,l.SU)(s),"perf-mode":e.perfMode},{default:(0,a.w5)((({data:t,index:n,style:r})=>[((0,a.wg)(),(0,a.j4)(qF,{key:t[n].key,style:(0,c.j5)(r),node:t[n],expanded:(0,l.SU)(f)(t[n]),"show-checkbox":e.showCheckbox,checked:(0,l.SU)(m)(t[n]),indeterminate:(0,l.SU)(g)(t[n]),"item-size":(0,l.SU)(s),disabled:(0,l.SU)(v)(t[n]),current:(0,l.SU)(w)(t[n]),"hidden-expand-icon":(0,l.SU)(b)(t[n]),onClick:(0,l.SU)(S),onToggle:(0,l.SU)(p),onCheck:(0,l.SU)(_)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))])),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(u).e("empty-block"))},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(u).e("empty-text"))},(0,c.zw)(null!=(n=e.emptyText)?n:(0,l.SU)(i)("el.tree.emptyText")),3)],2))],2)}}});var GF=(0,m.Z)(YF,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const ZF=(0,C.nz)(GF),JF=Symbol("uploadContextKey"),QF="ElUpload";class XF extends Error{constructor(e,t,n,r){super(e),this.name="UploadAjaxError",this.status=t,this.method=n,this.url=r}}function ej(e,t,n){let r;return r=n.response?`${n.response.error||n.response}`:n.responseText?`${n.responseText}`:`fail to ${t.method} ${e} ${n.status}`,new XF(r,n.status,t.method,e)}function tj(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(nB){return t}}const nj=e=>{"undefined"===typeof XMLHttpRequest&&(0,w._)(QF,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener("progress",(t=>{const n=t;n.percent=t.total>0?t.loaded/t.total*100:0,e.onProgress(n)}));const r=new FormData;if(e.data)for(const[s,i]of Object.entries(e.data))Array.isArray(i)?r.append(s,...i):r.append(s,i);r.append(e.filename,e.file,e.file.name),t.addEventListener("error",(()=>{e.onError(ej(n,e,t))})),t.addEventListener("load",(()=>{if(t.status<200||t.status>=300)return e.onError(ej(n,e,t));e.onSuccess(tj(t))})),t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const o=e.headers||{};if(o instanceof Headers)o.forEach(((e,n)=>t.setRequestHeader(n,e)));else for(const[s,i]of Object.entries(o))(0,gr.Z)(i)||t.setRequestHeader(s,String(i));return t.send(r),t},rj=["text","picture","picture-card"];let oj=1;const sj=()=>Date.now()+oj++,ij=(0,d.o8)({action:{type:String,default:"#"},headers:{type:(0,d.Cq)(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>(0,vg.N)({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:rj,default:"text"},httpRequest:{type:(0,d.Cq)(Function),default:nj},disabled:Boolean,limit:Number}),aj=(0,d.o8)({...ij,beforeUpload:{type:(0,d.Cq)(Function),default:c.dG},beforeRemove:{type:(0,d.Cq)(Function)},onRemove:{type:(0,d.Cq)(Function),default:c.dG},onChange:{type:(0,d.Cq)(Function),default:c.dG},onPreview:{type:(0,d.Cq)(Function),default:c.dG},onSuccess:{type:(0,d.Cq)(Function),default:c.dG},onProgress:{type:(0,d.Cq)(Function),default:c.dG},onError:{type:(0,d.Cq)(Function),default:c.dG},onExceed:{type:(0,d.Cq)(Function),default:c.dG}}),lj=(0,d.o8)({files:{type:(0,d.Cq)(Array),default:()=>(0,vg.N)([])},disabled:{type:Boolean,default:!1},handlePreview:{type:(0,d.Cq)(Function),default:c.dG},listType:{type:String,values:rj,default:"text"}}),cj={remove:e=>!!e},uj=["onKeydown"],dj=["src"],hj=["onClick"],pj=["onClick"],fj=["onClick"],gj=(0,a.aZ)({name:"ElUploadList"}),mj=(0,a.aZ)({...gj,props:lj,emits:cj,setup(e,{emit:t}){const{t:n}=(0,_s.bU)(),r=(0,y.s3)("upload"),o=(0,y.s3)("icon"),s=(0,y.s3)("list"),i=(0,mo.DT)(),u=(0,l.iH)(!1),d=e=>{t("remove",e)};return(e,t)=>((0,a.wg)(),(0,a.j4)(A.W3,{tag:"ul",class:(0,c.C_)([(0,l.SU)(r).b("list"),(0,l.SU)(r).bm("list",e.listType),(0,l.SU)(r).is("disabled",(0,l.SU)(i))]),name:(0,l.SU)(s).b()},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.files,(s=>((0,a.wg)(),(0,a.iD)("li",{key:s.uid||s.name,class:(0,c.C_)([(0,l.SU)(r).be("list","item"),(0,l.SU)(r).is(s.status),{focusing:u.value}]),tabindex:"0",onKeydown:(0,A.D2)((e=>!(0,l.SU)(i)&&d(s)),["delete"]),onFocus:t[0]||(t[0]=e=>u.value=!0),onBlur:t[1]||(t[1]=e=>u.value=!1),onClick:t[2]||(t[2]=e=>u.value=!1)},[(0,a.WI)(e.$slots,"default",{file:s},(()=>["picture"===e.listType||"uploading"!==s.status&&"picture-card"===e.listType?((0,a.wg)(),(0,a.iD)("img",{key:0,class:(0,c.C_)((0,l.SU)(r).be("list","item-thumbnail")),src:s.url,alt:""},null,10,dj)):(0,a.kq)("v-if",!0),"uploading"===s.status||"picture-card"!==e.listType?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,c.C_)((0,l.SU)(r).be("list","item-info"))},[(0,a._)("a",{class:(0,c.C_)((0,l.SU)(r).be("list","item-name")),onClick:(0,A.iM)((t=>e.handlePreview(s)),["prevent"])},[(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)((0,l.SU)(o).m("document"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.BBB))])),_:1},8,["class"]),(0,a._)("span",{class:(0,c.C_)((0,l.SU)(r).be("list","item-file-name"))},(0,c.zw)(s.name),3)],10,hj),"uploading"===s.status?((0,a.wg)(),(0,a.j4)((0,l.SU)(CI),{key:0,type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:Number(s.percentage),style:(0,c.j5)("picture-card"===e.listType?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):(0,a.kq)("v-if",!0)],2)):(0,a.kq)("v-if",!0),(0,a._)("label",{class:(0,c.C_)((0,l.SU)(r).be("list","item-status-label"))},["text"===e.listType?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:0,class:(0,c.C_)([(0,l.SU)(o).m("upload-success"),(0,l.SU)(o).m("circle-check")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.yGk))])),_:1},8,["class"])):["picture-card","picture"].includes(e.listType)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1,class:(0,c.C_)([(0,l.SU)(o).m("upload-success"),(0,l.SU)(o).m("check")])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.JrY))])),_:1},8,["class"])):(0,a.kq)("v-if",!0)],2),(0,l.SU)(i)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:2,class:(0,c.C_)((0,l.SU)(o).m("close")),onClick:e=>d(s)},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.x8P))])),_:2},1032,["class","onClick"])),(0,a.kq)(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),(0,a.kq)(" This is a bug which needs to be fixed "),(0,a.kq)(" TODO: Fix the incorrect navigation interaction "),(0,l.SU)(i)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("i",{key:3,class:(0,c.C_)((0,l.SU)(o).m("close-tip"))},(0,c.zw)((0,l.SU)(n)("el.upload.deleteTip")),3)),"picture-card"===e.listType?((0,a.wg)(),(0,a.iD)("span",{key:4,class:(0,c.C_)((0,l.SU)(r).be("list","item-actions"))},[(0,a._)("span",{class:(0,c.C_)((0,l.SU)(r).be("list","item-preview")),onClick:t=>e.handlePreview(s)},[(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)((0,l.SU)(o).m("zoom-in"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.DYM))])),_:1},8,["class"])],10,pj),(0,l.SU)(i)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,c.C_)((0,l.SU)(r).be("list","item-delete")),onClick:e=>d(s)},[(0,a.Wm)((0,l.SU)(T.gn),{class:(0,c.C_)((0,l.SU)(o).m("delete"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(ae.HG3))])),_:1},8,["class"])],10,fj))],2)):(0,a.kq)("v-if",!0)]))],42,uj)))),128)),(0,a.WI)(e.$slots,"append")])),_:3},8,["class","name"]))}});var yj=(0,m.Z)(mj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const vj=(0,d.o8)({disabled:{type:Boolean,default:!1}}),wj={file:e=>(0,c.kJ)(e)},bj=["onDrop","onDragover"],Sj="ElUploadDrag",_j=(0,a.aZ)({name:Sj}),Ej=(0,a.aZ)({..._j,props:vj,emits:wj,setup(e,{emit:t}){const n=(0,a.f3)(JF);n||(0,w._)(Sj,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=(0,y.s3)("upload"),o=(0,l.iH)(!1),s=(0,mo.DT)(),i=e=>{if(s.value)return;o.value=!1,e.stopPropagation();const r=Array.from(e.dataTransfer.files),i=n.accept.value;if(!i)return void t("file",r);const a=r.filter((e=>{const{type:t,name:n}=e,r=n.includes(".")?`.${n.split(".").pop()}`:"",o=t.replace(/\/.*$/,"");return i.split(",").map((e=>e.trim())).filter((e=>e)).some((e=>e.startsWith(".")?r===e:/\/\*$/.test(e)?o===e.replace(/\/\*$/,""):!!/^[^/]+\/[^/]+$/.test(e)&&t===e))}));t("file",a)},u=()=>{s.value||(o.value=!0)};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(r).b("dragger"),(0,l.SU)(r).is("dragover",o.value)]),onDrop:(0,A.iM)(i,["prevent"]),onDragover:(0,A.iM)(u,["prevent"]),onDragleave:t[0]||(t[0]=(0,A.iM)((e=>o.value=!1),["prevent"]))},[(0,a.WI)(e.$slots,"default")],42,bj))}});var kj=(0,m.Z)(Ej,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const Cj=(0,d.o8)({...ij,beforeUpload:{type:(0,d.Cq)(Function),default:c.dG},onRemove:{type:(0,d.Cq)(Function),default:c.dG},onStart:{type:(0,d.Cq)(Function),default:c.dG},onSuccess:{type:(0,d.Cq)(Function),default:c.dG},onProgress:{type:(0,d.Cq)(Function),default:c.dG},onError:{type:(0,d.Cq)(Function),default:c.dG},onExceed:{type:(0,d.Cq)(Function),default:c.dG}}),Ij=["onKeydown"],Aj=["name","multiple","accept"],Tj=(0,a.aZ)({name:"ElUploadContent",inheritAttrs:!1}),Rj=(0,a.aZ)({...Tj,props:Cj,setup(e,{expose:t}){const n=e,r=(0,y.s3)("upload"),o=(0,mo.DT)(),s=(0,l.XI)({}),i=(0,l.XI)(),u=e=>{if(0===e.length)return;const{autoUpload:t,limit:r,fileList:o,multiple:s,onStart:i,onExceed:a}=n;if(r&&o.length+e.length>r)a(e,o);else{s||(e=e.slice(0,1));for(const n of e){const e=n;e.uid=sj(),i(e),t&&d(e)}}},d=async e=>{if(i.value.value="",!n.beforeUpload)return h(e);let t;try{t=await n.beforeUpload(e)}catch(nB){t=!1}if(!1===t)return void n.onRemove(e);let r=e;t instanceof Blob&&(r=t instanceof File?t:new File([t],e.name,{type:e.type})),h(Object.assign(r,{uid:e.uid}))},h=e=>{const{headers:t,data:r,method:o,withCredentials:i,name:a,action:l,onProgress:c,onSuccess:u,onError:d,httpRequest:h}=n,{uid:p}=e,f={headers:t||{},withCredentials:i,file:e,data:r,method:o,filename:a,action:l,onProgress:t=>{c(t,e)},onSuccess:t=>{u(t,e),delete s.value[p]},onError:t=>{d(t,e),delete s.value[p]}},g=h(f);s.value[p]=g,g instanceof Promise&&g.then(f.onSuccess,f.onError)},p=e=>{const t=e.target.files;t&&u(Array.from(t))},f=()=>{o.value||(i.value.value="",i.value.click())},g=()=>{f()},m=e=>{const t=(0,R.vu)(s.value).filter(e?([t])=>String(e.uid)===t:()=>!0);t.forEach((([e,t])=>{t instanceof XMLHttpRequest&&t.abort(),delete s.value[e]}))};return t({abort:m,upload:d}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)([(0,l.SU)(r).b(),(0,l.SU)(r).m(e.listType),(0,l.SU)(r).is("drag",e.drag)]),tabindex:"0",onClick:f,onKeydown:(0,A.D2)((0,A.iM)(g,["self"]),["enter","space"])},[e.drag?((0,a.wg)(),(0,a.j4)(kj,{key:0,disabled:(0,l.SU)(o),onFile:u},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["disabled"])):(0,a.WI)(e.$slots,"default",{key:1}),(0,a._)("input",{ref_key:"inputRef",ref:i,class:(0,c.C_)((0,l.SU)(r).e("input")),name:e.name,multiple:e.multiple,accept:e.accept,type:"file",onChange:p,onClick:t[0]||(t[0]=(0,A.iM)((()=>{}),["stop"]))},null,42,Aj)],42,Ij))}});var xj=(0,m.Z)(Rj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const Oj="ElUpload",Nj=e=>{var t;(null==(t=e.url)?void 0:t.startsWith("blob:"))&&URL.revokeObjectURL(e.url)},Pj=(e,t)=>{const n=(0,u.NCN)(e,"fileList",void 0,{passive:!0}),r=e=>n.value.find((t=>t.uid===e.uid));function o(e){var n;null==(n=t.value)||n.abort(e)}function s(e=["ready","uploading","success","fail"]){n.value=n.value.filter((t=>!e.includes(t.status)))}const i=(t,o)=>{const s=r(o);s&&(console.error(t),s.status="fail",n.value.splice(n.value.indexOf(s),1),e.onError(t,s,n.value),e.onChange(s,n.value))},l=(t,o)=>{const s=r(o);s&&(e.onProgress(t,s,n.value),s.status="uploading",s.percentage=Math.round(t.percent))},c=(t,o)=>{const s=r(o);s&&(s.status="success",s.response=t,e.onSuccess(t,s,n.value),e.onChange(s,n.value))},d=t=>{(0,gr.Z)(t.uid)&&(t.uid=sj());const r={name:t.name,percentage:0,status:"ready",size:t.size,raw:t,uid:t.uid};if("picture-card"===e.listType||"picture"===e.listType)try{r.url=URL.createObjectURL(t)}catch(o){(0,w.N)(Oj,o.message),e.onError(o,r,n.value)}n.value=[...n.value,r],e.onChange(r,n.value)},h=async t=>{const s=t instanceof File?r(t):t;s||(0,w._)(Oj,"file to be removed not found");const i=t=>{o(t);const r=n.value;r.splice(r.indexOf(t),1),e.onRemove(t,r),Nj(t)};if(e.beforeRemove){const t=await e.beforeRemove(s,n.value);!1!==t&&i(s)}else i(s)};function p(){n.value.filter((({status:e})=>"ready"===e)).forEach((({raw:e})=>{var n;return e&&(null==(n=t.value)?void 0:n.upload(e))}))}return(0,a.YP)((()=>e.listType),(t=>{"picture-card"!==t&&"picture"!==t||(n.value=n.value.map((t=>{const{raw:r,url:o}=t;if(!o&&r)try{t.url=URL.createObjectURL(r)}catch(s){e.onError(s,t,n.value)}return t})))})),(0,a.YP)(n,(e=>{for(const t of e)t.uid||(t.uid=sj()),t.status||(t.status="success")}),{immediate:!0,deep:!0}),{uploadFiles:n,abort:o,clearFiles:s,handleError:i,handleProgress:l,handleStart:d,handleSuccess:c,handleRemove:h,submit:p}},Dj=(0,a.aZ)({name:"ElUpload"}),Uj=(0,a.aZ)({...Dj,props:aj,setup(e,{expose:t}){const n=e,r=(0,a.Rr)(),o=(0,mo.DT)(),s=(0,l.XI)(),{abort:i,submit:c,clearFiles:u,uploadFiles:d,handleStart:h,handleError:p,handleRemove:f,handleSuccess:g,handleProgress:m}=Pj(n,s),y=(0,a.Fl)((()=>"picture-card"===n.listType)),v=(0,a.Fl)((()=>({...n,fileList:d.value,onStart:h,onProgress:m,onSuccess:g,onError:p,onRemove:f})));return(0,a.Jd)((()=>{d.value.forEach((({url:e})=>{(null==e?void 0:e.startsWith("blob:"))&&URL.revokeObjectURL(e)}))})),(0,a.JJ)(JF,{accept:(0,l.Vh)(n,"accept")}),t({abort:i,submit:c,clearFiles:u,handleStart:h,handleRemove:f}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,l.SU)(y)&&e.showFileList?((0,a.wg)(),(0,a.j4)(yj,{key:0,disabled:(0,l.SU)(o),"list-type":e.listType,files:(0,l.SU)(d),"handle-preview":e.onPreview,onRemove:(0,l.SU)(f)},(0,a.Nv)({append:(0,a.w5)((()=>[(0,a.Wm)(xj,(0,a.dG)({ref_key:"uploadRef",ref:s},(0,l.SU)(v)),{default:(0,a.w5)((()=>[(0,l.SU)(r).trigger?(0,a.WI)(e.$slots,"trigger",{key:0}):(0,a.kq)("v-if",!0),!(0,l.SU)(r).trigger&&(0,l.SU)(r).default?(0,a.WI)(e.$slots,"default",{key:1}):(0,a.kq)("v-if",!0)])),_:3},16)])),_:2},[e.$slots.file?{name:"default",fn:(0,a.w5)((({file:t})=>[(0,a.WI)(e.$slots,"file",{file:t})]))}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):(0,a.kq)("v-if",!0),!(0,l.SU)(y)||(0,l.SU)(y)&&!e.showFileList?((0,a.wg)(),(0,a.j4)(xj,(0,a.dG)({key:1,ref_key:"uploadRef",ref:s},(0,l.SU)(v)),{default:(0,a.w5)((()=>[(0,l.SU)(r).trigger?(0,a.WI)(e.$slots,"trigger",{key:0}):(0,a.kq)("v-if",!0),!(0,l.SU)(r).trigger&&(0,l.SU)(r).default?(0,a.WI)(e.$slots,"default",{key:1}):(0,a.kq)("v-if",!0)])),_:3},16)):(0,a.kq)("v-if",!0),e.$slots.trigger?(0,a.WI)(e.$slots,"default",{key:2}):(0,a.kq)("v-if",!0),(0,a.WI)(e.$slots,"tip"),!(0,l.SU)(y)&&e.showFileList?((0,a.wg)(),(0,a.j4)(yj,{key:3,disabled:(0,l.SU)(o),"list-type":e.listType,files:(0,l.SU)(d),"handle-preview":e.onPreview,onRemove:(0,l.SU)(f)},(0,a.Nv)({_:2},[e.$slots.file?{name:"default",fn:(0,a.w5)((({file:t})=>[(0,a.WI)(e.$slots,"file",{file:t})]))}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):(0,a.kq)("v-if",!0)]))}});var Lj=(0,m.Z)(Uj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Bj=(0,C.nz)(Lj);var Mj=[I,B,Co,pU,Po,zo,Wo,rs,os,ss.mi,ss.MO,$s,Ws,yi,vi,dg,Vf,yg,jp,zp,$p,kg,Zg,Jg,jg,Vm,Wm,cy,uy,dy,hy,py,lw,Sw,_w,Hw,Gw,sb,dS,hS,pS,qS,gE,mE,T.gn,OE,EE,le.EZ,FE,qE,Sk,_k,Ek,kk,Ok,JC,oI,gI,De,CI,uf,hf,df,PI,jI,WI,Ie,vC,wC,bC,AT,BT,MT,yR,kR,RR,MR,YR,GR,ax,DP,UP,hU,DU,UU,Gf,jU,gL,IL,NL,PL,ho,fM,LM,lF,SF,ZF,Bj];const Fj="ElInfiniteScroll",jj=50,zj=200,$j=0,Vj={delay:{type:Number,default:zj},distance:{type:Number,default:$j},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Hj=(e,t)=>Object.entries(Vj).reduce(((n,[r,o])=>{var s,i;const{type:a,default:l}=o,c=e.getAttribute(`infinite-scroll-${r}`);let u=null!=(i=null!=(s=t[c])?s:c)?i:l;return u="false"!==u&&u,u=a(u),n[r]=Number.isNaN(u)?l:u,n}),{}),Kj=e=>{const{observer:t}=e[Fj];t&&(t.disconnect(),delete e[Fj].observer)},qj=(e,t)=>{const{container:n,containerEl:r,instance:o,observer:s,lastScrollTop:i}=e[Fj],{disabled:a,distance:l}=Hj(e,o),{clientHeight:c,scrollHeight:u,scrollTop:d}=r,h=d-i;if(e[Fj].lastScrollTop=d,s||a||h<0)return;let p=!1;if(n===e)p=u-(c+d)<=l;else{const{clientTop:t,scrollHeight:n}=e,o=rm(e,r);p=d+c>=o+t+n-l}p&&t.call(o)};function Wj(e,t){const{containerEl:n,instance:r}=e[Fj],{disabled:o}=Hj(e,r);o||0===n.clientHeight||(n.scrollHeight<=n.clientHeight?t.call(r):Kj(e))}const Yj={async mounted(e,t){const{instance:n,value:r}=t;(0,c.mf)(r)||(0,w._)(Fj,"'v-infinite-scroll' binding value must be a function"),await(0,a.Y3)();const{delay:o,immediate:s}=Hj(e,n),i=(0,b.JX)(e,!0),l=i===window?document.documentElement:i,u=Qs(qj.bind(null,e,r),o);if(i){if(e[Fj]={instance:n,container:i,containerEl:l,delay:o,cb:r,onScroll:u,lastScrollTop:l.scrollTop},s){const t=new MutationObserver(Qs(Wj.bind(null,e,r),jj));e[Fj].observer=t,t.observe(e,{childList:!0,subtree:!0}),Wj(e,r)}i.addEventListener("scroll",u)}},unmounted(e){const{container:t,onScroll:n}=e[Fj];null==t||t.removeEventListener("scroll",n),Kj(e)},async updated(e){if(e[Fj]){const{containerEl:t,cb:n,observer:r}=e[Fj];t.clientHeight&&r&&Wj(e,n)}else await(0,a.Y3)()}},Gj=Yj;Gj.install=e=>{e.directive("InfiniteScroll",Gj)};const Zj=Gj;function Jj(e){let t;const n=(0,l.iH)(!1),r=(0,l.qj)({...e,originalPosition:"",originalOverflow:"",visible:!1});function o(e){r.text=e}function i(){const e=r.parent,t=f.ns;if(!e.vLoadingAddClassList){let n=e.getAttribute("loading-number");n=Number.parseInt(n)-1,n?e.setAttribute("loading-number",n.toString()):((0,v.IV)(e,t.bm("parent","relative")),e.removeAttribute("loading-number")),(0,v.IV)(e,t.bm("parent","hidden"))}c(),p.unmount()}function c(){var e,t;null==(t=null==(e=f.$el)?void 0:e.parentNode)||t.removeChild(f.$el)}function u(){var o;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=window.setTimeout(d,400),r.visible=!1,null==(o=e.closed)||o.call(e))}function d(){if(!n.value)return;const e=r.parent;n.value=!1,e.vLoadingAddClassList=void 0,i()}const h=(0,a.aZ)({name:"ElLoading",setup(e,{expose:t}){const{ns:n}=(0,s.cU)("loading"),o=(0,Wr.Cn)();return t({ns:n,zIndex:o}),()=>{const e=r.spinner||r.svg,t=(0,a.h)("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...e?{innerHTML:e}:{}},[(0,a.h)("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),o=r.text?(0,a.h)("p",{class:n.b("text")},[r.text]):void 0;return(0,a.h)(A.uT,{name:n.b("fade"),onAfterLeave:d},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)("div",{style:{backgroundColor:r.background||""},class:[n.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[(0,a.h)("div",{class:n.b("spinner")},[t,o])]),[[A.F8,r.visible]])]))})}}}),p=(0,A.ri)(h),f=p.mount(document.createElement("div"));return{...(0,l.BK)(r),setText:o,removeElLoadingChild:c,close:u,handleAfterLeave:d,vm:f,get $el(){return f.$el}}}let Qj;const Xj=function(e={}){if(!h.C5)return;const t=ez(e);if(t.fullscreen&&Qj)return Qj;const n=Jj({...t,closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(Qj=void 0)}});tz(t,t.parent,n),nz(t,t.parent,n),t.parent.vLoadingAddClassList=()=>nz(t,t.parent,n);let r=t.parent.getAttribute("loading-number");return r=r?`${Number.parseInt(r)+1}`:"1",t.parent.setAttribute("loading-number",r),t.parent.appendChild(n.$el),(0,a.Y3)((()=>n.visible.value=t.visible)),t.fullscreen&&(Qj=n),n},ez=e=>{var t,n,r,o;let s;return s=(0,c.HD)(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:s===document.body||e.body?document.body:s,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:s===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(r=e.lock)&&r,customClass:e.customClass||"",visible:null==(o=e.visible)||o,target:s}},tz=async(e,t,n)=>{const{nextZIndex:r}=n.vm.zIndex,o={};if(e.fullscreen)n.originalPosition.value=(0,v.C2)(document.body,"position"),n.originalOverflow.value=(0,v.C2)(document.body,"overflow"),o.zIndex=r();else if(e.parent===document.body){n.originalPosition.value=(0,v.C2)(document.body,"position"),await(0,a.Y3)();for(const t of["top","left"]){const n="top"===t?"scrollTop":"scrollLeft";o[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-Number.parseInt((0,v.C2)(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])o[t]=`${e.target.getBoundingClientRect()[t]}px`}else n.originalPosition.value=(0,v.C2)(t,"position");for(const[s,i]of Object.entries(o))n.$el.style[s]=i},nz=(e,t,n)=>{const r=n.vm.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?(0,v.IV)(t,r.bm("parent","relative")):(0,v.cn)(t,r.bm("parent","relative")),e.fullscreen&&e.lock?(0,v.cn)(t,r.bm("parent","hidden")):(0,v.IV)(t,r.bm("parent","hidden"))},rz=Symbol("ElLoading"),oz=(e,t)=>{var n,r,o,s;const i=t.instance,a=e=>(0,c.Kn)(t.value)?t.value[e]:void 0,u=e=>{const t=(0,c.HD)(e)&&(null==i?void 0:i[e])||e;return t?(0,l.iH)(t):t},d=t=>u(a(t)||e.getAttribute(`element-loading-${(0,c.rs)(t)}`)),h=null!=(n=a("fullscreen"))?n:t.modifiers.fullscreen,p={text:d("text"),svg:d("svg"),svgViewBox:d("svgViewBox"),spinner:d("spinner"),background:d("background"),customClass:d("customClass"),fullscreen:h,target:null!=(r=a("target"))?r:h?void 0:e,body:null!=(o=a("body"))?o:t.modifiers.body,lock:null!=(s=a("lock"))?s:t.modifiers.lock};e[rz]={options:p,instance:Xj(p)}},sz=(e,t)=>{for(const n of Object.keys(t))(0,l.dq)(t[n])&&(t[n].value=e[n])},iz={mounted(e,t){t.value&&oz(e,t)},updated(e,t){const n=e[rz];t.oldValue!==t.value&&(t.value&&!t.oldValue?oz(e,t):t.value&&t.oldValue?(0,c.Kn)(t.value)&&sz(t.value,n.options):null==n||n.instance.close())},unmounted(e){var t;null==(t=e[rz])||t.instance.close()}},az={install(e){e.directive("loading",iz),e.config.globalProperties.$loading=Xj},directive:iz,service:Xj},lz=["success","info","warning","error"],cz=(0,vg.N)({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:h.C5?document.body:void 0}),uz=(0,d.o8)({customClass:{type:String,default:cz.customClass},center:{type:Boolean,default:cz.center},dangerouslyUseHTMLString:{type:Boolean,default:cz.dangerouslyUseHTMLString},duration:{type:Number,default:cz.duration},icon:{type:x.AA,default:cz.icon},id:{type:String,default:cz.id},message:{type:(0,d.Cq)([String,Object,Function]),default:cz.message},onClose:{type:(0,d.Cq)(Function),required:!1},showClose:{type:Boolean,default:cz.showClose},type:{type:String,values:lz,default:cz.type},offset:{type:Number,default:cz.offset},zIndex:{type:Number,default:cz.zIndex},grouping:{type:Boolean,default:cz.grouping},repeatNum:{type:Number,default:cz.repeatNum}}),dz={destroy:()=>!0},hz=(0,l.Um)([]),pz=e=>{const t=hz.findIndex((t=>t.id===e)),n=hz[t];let r;return t>0&&(r=hz[t-1]),{current:n,prev:r}},fz=e=>{const{prev:t}=pz(e);return t?t.vm.exposed.bottom.value:0},gz=(e,t)=>{const n=hz.findIndex((t=>t.id===e));return n>0?20:t},mz=["id"],yz=["innerHTML"],vz=(0,a.aZ)({name:"ElMessage"}),wz=(0,a.aZ)({...vz,props:uz,emits:dz,setup(e,{expose:t}){const n=e,{Close:r}=x.f5,{ns:o,zIndex:i}=(0,s.cU)("message"),{currentZIndex:d,nextZIndex:p}=i,f=(0,l.iH)(),g=(0,l.iH)(!1),m=(0,l.iH)(0);let y;const v=(0,a.Fl)((()=>n.type?"error"===n.type?"danger":n.type:"info")),w=(0,a.Fl)((()=>{const e=n.type;return{[o.bm("icon",e)]:e&&x.Rp[e]}})),b=(0,a.Fl)((()=>n.icon||x.Rp[n.type]||"")),S=(0,a.Fl)((()=>fz(n.id))),_=(0,a.Fl)((()=>gz(n.id,n.offset)+S.value)),E=(0,a.Fl)((()=>m.value+_.value)),k=(0,a.Fl)((()=>({top:`${_.value}px`,zIndex:d.value})));function C(){0!==n.duration&&({stop:y}=(0,h.eM)((()=>{R()}),n.duration))}function I(){null==y||y()}function R(){g.value=!1}function O({code:e}){e===Jn.n.esc&&R()}return(0,a.bv)((()=>{C(),p(),g.value=!0})),(0,a.YP)((()=>n.repeatNum),(()=>{I(),C()})),(0,u.ORN)(document,"keydown",O),(0,u.yU7)(f,(()=>{m.value=f.value.getBoundingClientRect().height})),t({visible:g,bottom:E,close:R}),(e,t)=>((0,a.wg)(),(0,a.j4)(A.uT,{name:(0,l.SU)(o).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[0]||(t[0]=t=>e.$emit("destroy")),persisted:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",{id:e.id,ref_key:"messageRef",ref:f,class:(0,c.C_)([(0,l.SU)(o).b(),{[(0,l.SU)(o).m(e.type)]:e.type&&!e.icon},(0,l.SU)(o).is("center",e.center),(0,l.SU)(o).is("closable",e.showClose),e.customClass]),style:(0,c.j5)((0,l.SU)(k)),role:"alert",onMouseenter:I,onMouseleave:C},[e.repeatNum>1?((0,a.wg)(),(0,a.j4)((0,l.SU)(Wo),{key:0,value:e.repeatNum,type:(0,l.SU)(v),class:(0,c.C_)((0,l.SU)(o).e("badge"))},null,8,["value","type","class"])):(0,a.kq)("v-if",!0),(0,l.SU)(b)?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:1,class:(0,c.C_)([(0,l.SU)(o).e("icon"),(0,l.SU)(w)])},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(b))))])),_:1},8,["class"])):(0,a.kq)("v-if",!0),(0,a.WI)(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.kq)(" Caution here, message could've been compromised, never use user's input as message "),(0,a._)("p",{class:(0,c.C_)((0,l.SU)(o).e("content")),innerHTML:e.message},null,10,yz)],2112)):((0,a.wg)(),(0,a.iD)("p",{key:0,class:(0,c.C_)((0,l.SU)(o).e("content"))},(0,c.zw)(e.message),3))])),e.showClose?((0,a.wg)(),(0,a.j4)((0,l.SU)(T.gn),{key:2,class:(0,c.C_)((0,l.SU)(o).e("closeBtn")),onClick:(0,A.iM)(R,["stop"])},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(r))])),_:1},8,["class","onClick"])):(0,a.kq)("v-if",!0)],46,mz),[[A.F8,g.value]])])),_:3},8,["name","onBeforeLeave"]))}});var bz=(0,m.Z)(wz,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Sz=1;const _z=e=>{const t=!e||(0,c.HD)(e)||(0,a.lA)(e)||(0,c.mf)(e)?{message:e}:e,n={...cz,...t};if(n.appendTo){if((0,c.HD)(n.appendTo)){let e=document.querySelector(n.appendTo);(0,wr.kK)(e)||((0,w.N)("ElMessage","the appendTo option is not an HTMLElement. Falling back to document.body."),e=document.body),n.appendTo=e}}else n.appendTo=document.body;return n},Ez=e=>{const t=hz.indexOf(e);if(-1===t)return;hz.splice(t,1);const{handler:n}=e;n.close()},kz=({appendTo:e,...t},n)=>{const r="message_"+Sz++,o=t.onClose,s=document.createElement("div"),i={...t,id:r,onClose:()=>{null==o||o(),Ez(h)},onDestroy:()=>{(0,A.sY)(null,s)}},l=(0,a.Wm)(bz,i,(0,c.mf)(i.message)||(0,a.lA)(i.message)?{default:(0,c.mf)(i.message)?i.message:()=>i.message}:null);l.appContext=n||Cz._context,(0,A.sY)(l,s),e.appendChild(s.firstElementChild);const u=l.component,d={close:()=>{u.exposed.visible.value=!1}},h={id:r,vnode:l,vm:u,handler:d,props:l.component.props};return h},Cz=(e={},t)=>{if(!h.C5)return{close:()=>{}};if((0,h.hj)(Km.max)&&hz.length>=Km.max)return{close:()=>{}};const n=_z(e);if(n.grouping&&hz.length){const e=hz.find((({vnode:e})=>{var t;return(null==(t=e.props)?void 0:t.message)===n.message}));if(e)return e.props.repeatNum+=1,e.props.type=n.type,e.handler}const r=kz(n,t);return hz.push(r),r.handler};function Iz(e){for(const t of hz)e&&e!==t.props.type||t.handler.close()}lz.forEach((e=>{Cz[e]=(t={},n)=>{const r=_z(t);return Cz({...r,type:e},n)}})),Cz.closeAll=Iz,Cz._context=null;const Az=(0,C.oN)(Cz,"$message");var Tz=n(9737),Rz=n(9996),xz=[Zj,az,Az,Tz.T,Rz.bM,fI],Oz=i([...Mj,...xz])},6274:function(e,t,n){"use strict";n.d(t,{l:function(){return l}});var r=n(6252),o=n(5937),s=n(4721);const i=["class","style"],a=/^on[A-Z]/,l=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n}=e,l=(0,r.Fl)((()=>((null==n?void 0:n.value)||[]).concat(i))),c=(0,r.FN)();return c?(0,r.Fl)((()=>{var e;return(0,o.Z)(Object.entries(null==(e=c.proxy)?void 0:e.$attrs).filter((([e])=>!l.value.includes(e)&&!(t&&a.test(e)))))})):((0,s.N)("use-attrs","getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function"),(0,r.Fl)((()=>({}))))}},9379:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(6252),o=n(2262),s=n(4721);const i=({from:e,replacement:t,scope:n,version:i,ref:a,type:l="API"},c)=>{(0,r.YP)((()=>(0,o.SU)(c)),(r=>{r&&(0,s.N)(n,`[${l}] ${e} is about to be deprecated in version ${i}, please use ${t} instead.\nFor more detail, please visit: ${a}\n`)}),{immediate:!0})}},5818:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(6252),o=n(7675);const s=(e,t,n)=>{let s={offsetX:0,offsetY:0};const i=t=>{const n=t.clientX,r=t.clientY,{offsetX:i,offsetY:a}=s,l=e.value.getBoundingClientRect(),c=l.left,u=l.top,d=l.width,h=l.height,p=document.documentElement.clientWidth,f=document.documentElement.clientHeight,g=-c+i,m=-u+a,y=p-c-d+i,v=f-u-h+a,w=t=>{const l=Math.min(Math.max(i+t.clientX-n,g),y),c=Math.min(Math.max(a+t.clientY-r,m),v);s={offsetX:l,offsetY:c},e.value.style.transform=`translate(${(0,o.Nn)(l)}, ${(0,o.Nn)(c)})`},b=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",b)},a=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",i)},l=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",i)};(0,r.bv)((()=>{(0,r.m0)((()=>{n.value?a():l()}))})),(0,r.Jd)((()=>{l()}))}},2259:function(e,t,n){"use strict";n.d(t,{Me:function(){return d},SG:function(){return u}});var r=n(6252),o=n(2262),s=n(1218),i=n(9143),a=n(4721);const l={prefix:Math.floor(1e4*Math.random()),current:0},c=Symbol("elIdInjection"),u=()=>(0,r.FN)()?(0,r.f3)(c,l):l,d=e=>{const t=u();s.C5||t!==l||(0,a.N)("IdInjection","Looks like you are using server rendering, you must provide a id provider to ensure the hydration process to be succeed\nusage: app.provide(ID_INJECTION_KEY, {\n  prefix: number,\n  current: number,\n})");const n=(0,i.u_)(),c=(0,r.Fl)((()=>(0,o.SU)(e)||`${n.value}-id-${t.prefix}-${t.current++}`));return c}},7774:function(e,t,n){"use strict";n.d(t,{_N:function(){return u},bU:function(){return d}});var r=n(2262),o=n(6252),s=n(6423),i={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const a=e=>(t,n)=>l(t,n,(0,r.SU)(e)),l=(e,t,n)=>(0,s.Z)(n,e,e).replace(/\{(\w+)\}/g,((e,n)=>{var r;return`${null!=(r=null==t?void 0:t[n])?r:`{${n}}`}`})),c=e=>{const t=(0,o.Fl)((()=>(0,r.SU)(e).name)),n=(0,r.dq)(e)?e:(0,r.iH)(e);return{lang:t,locale:n,t:a(e)}},u=Symbol("localeContextKey"),d=e=>{const t=e||(0,o.f3)(u,(0,r.iH)());return c((0,o.Fl)((()=>t.value||i)))}},1258:function(e,t,n){"use strict";n.d(t,{W:function(){return u}});var r=n(2262),o=n(6252),s=n(1218),i=n(9143),a=n(4721),l=n(7675),c=n(7647);const u=(e,t={})=>{(0,r.dq)(e)||(0,a._)("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||(0,i.s3)("popup"),u=(0,r.Fl)((()=>n.bm("parent","hidden")));if(!s.C5||(0,l.pv)(document.body,u.value))return;let d=0,h=!1,p="0";const f=()=>{setTimeout((()=>{(0,l.IV)(null==document?void 0:document.body,u.value),h&&document&&(document.body.style.width=p)}),200)};(0,o.YP)(e,(e=>{if(!e)return void f();h=!(0,l.pv)(document.body,u.value),h&&(p=document.body.style.width),d=(0,c.Iz)(n.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,r=(0,l.C2)(document.body,"overflowY");d>0&&(t||"scroll"===r)&&h&&(document.body.style.width=`calc(100% - ${d}px)`),(0,l.cn)(document.body,u.value)})),(0,r.EB)((()=>f()))}},9143:function(e,t,n){"use strict";n.d(t,{dP:function(){return l},s3:function(){return u},tL:function(){return s},u_:function(){return c}});var r=n(6252),o=n(2262);const s="el",i="is-",a=(e,t,n,r,o)=>{let s=`${e}-${t}`;return n&&(s+=`-${n}`),r&&(s+=`__${r}`),o&&(s+=`--${o}`),s},l=Symbol("namespaceContextKey"),c=e=>{const t=e||(0,r.f3)(l,(0,o.iH)(s)),n=(0,r.Fl)((()=>(0,o.SU)(t)||s));return n},u=(e,t)=>{const n=c(t),r=(t="")=>a(n.value,e,t,"",""),o=t=>t?a(n.value,e,"",t,""):"",s=t=>t?a(n.value,e,"","",t):"",l=(t,r)=>t&&r?a(n.value,e,t,r,""):"",u=(t,r)=>t&&r?a(n.value,e,"",t,r):"",d=(t,r)=>t&&r?a(n.value,e,t,"",r):"",h=(t,r,o)=>t&&r&&o?a(n.value,e,t,r,o):"",p=(e,...t)=>{const n=!(t.length>=1)||t[0];return e&&n?`${i}${e}`:""},f=e=>{const t={};for(const r in e)e[r]&&(t[`--${n.value}-${r}`]=e[r]);return t},g=t=>{const r={};for(const o in t)t[o]&&(r[`--${n.value}-${e}-${o}`]=t[o]);return r},m=e=>`--${n.value}-${e}`,y=t=>`--${n.value}-${e}-${t}`;return{namespace:n,b:r,e:o,m:s,be:l,em:u,bm:d,bem:h,is:p,cssVar:f,cssVarName:m,cssVarBlock:g,cssVarBlockName:y}}},4420:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(3577);const o=e=>{if(!e)return{onClick:r.dG,onMousedown:r.dG,onMouseup:r.dG};let t=!1,n=!1;const o=r=>{t&&n&&e(r),t=n=!1},s=e=>{t=e.target===e.currentTarget},i=e=>{n=e.target===e.currentTarget};return{onClick:o,onMousedown:s,onMouseup:i}}},2771:function(e,t,n){"use strict";n.d(t,{Pp:function(){return a},fl:function(){return c},m8:function(){return l}});var r=n(6252),o=n(2262),s=n(5027),i=n(209);const a=(0,s.l0)({type:String,values:i.k,required:!1}),l=Symbol("size"),c=()=>{const e=(0,r.f3)(l,{});return(0,r.Fl)((()=>(0,o.SU)(e.size)||""))}},4568:function(e,t,n){"use strict";n.d(t,{Cn:function(){return c},DA:function(){return a},KM:function(){return l}});var r=n(2262),o=n(6252),s=n(1218);const i=(0,r.iH)(0),a=2e3,l=Symbol("zIndexContextKey"),c=e=>{const t=e||(0,o.f3)(l,void 0),n=(0,o.Fl)((()=>{const e=(0,r.SU)(t);return(0,s.hj)(e)?e:a})),c=(0,o.Fl)((()=>n.value+i.value)),u=()=>(i.value++,c.value);return{initialZIndex:n,currentZIndex:c,nextZIndex:u}}},246:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(1218);const o=()=>r.C5&&/firefox/i.test(window.navigator.userAgent)},1276:function(e,t,n){"use strict";n.d(t,{Be:function(){return l},Zs:function(){return c},b9:function(){return s},dJ:function(){return u},qe:function(){return a}});const r='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',o=e=>{const t=getComputedStyle(e);return"fixed"!==t.position&&null!==e.offsetParent},s=e=>Array.from(e.querySelectorAll(r)).filter((e=>i(e)&&o(e))),i=e=>{if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return!("hidden"===e.type||"file"===e.type);case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},a=function(e,t,...n){let r;r=t.includes("mouse")||t.includes("click")?"MouseEvents":t.includes("key")?"KeyboardEvent":"HTMLEvents";const o=document.createEvent(r);return o.initEvent(t,...n),e.dispatchEvent(o),e},l=e=>!e.getAttribute("aria-owns"),c=(e,t,n)=>{const{parentNode:r}=e;if(!r)return null;const o=r.querySelectorAll(n),s=Array.prototype.indexOf.call(o,e);return o[s+t]||null},u=e=>{e&&(e.focus(),!l(e)&&e.click())}},7647:function(e,t,n){"use strict";n.d(t,{Iz:function(){return l},JX:function(){return i},zT:function(){return c}});var r=n(1218),o=n(7675);const s=(e,t)=>{if(!r.C5)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],s=(0,o.C2)(e,n);return["scroll","auto","overlay"].some((e=>s.includes(e)))},i=(e,t)=>{if(!r.C5)return;let n=e;while(n){if([window,document,document.documentElement].includes(n))return window;if(s(n,t))return n;n=n.parentNode}return n};let a;const l=e=>{var t;if(!r.C5)return 0;if(void 0!==a)return a;const n=document.createElement("div");n.className=`${e}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const o=n.offsetWidth;n.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",n.appendChild(s);const i=s.offsetWidth;return null==(t=n.parentNode)||t.removeChild(n),a=o-i,a};function c(e,t){if(!r.C5)return;if(!t)return void(e.scrollTop=0);const n=[];let o=t.offsetParent;while(null!==o&&e!==o&&e.contains(o))n.push(o),o=o.offsetParent;const s=t.offsetTop+n.reduce(((e,t)=>e+t.offsetTop),0),i=s+t.offsetHeight,a=e.scrollTop,l=a+e.clientHeight;s<a?e.scrollTop=s:i>l&&(e.scrollTop=i-e.clientHeight)}},7675:function(e,t,n){"use strict";n.d(t,{C2:function(){return h},IV:function(){return d},Nn:function(){return p},cn:function(){return u},pv:function(){return c}});var r=n(1218),o=n(5162),s=n(4721),i=n(3577);const a="utils/dom/style",l=(e="")=>e.split(" ").filter((e=>!!e.trim())),c=(e,t)=>{if(!e||!t)return!1;if(t.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(t)},u=(e,t)=>{e&&t.trim()&&e.classList.add(...l(t))},d=(e,t)=>{e&&t.trim()&&e.classList.remove(...l(t))},h=(e,t)=>{var n;if(!r.C5||!e||!t)return"";let o=(0,i._A)(t);"float"===o&&(o="cssFloat");try{const t=e.style[o];if(t)return t;const r=null==(n=document.defaultView)?void 0:n.getComputedStyle(e,"");return r?r[o]:""}catch(s){return e.style[o]}};function p(e,t="px"){return e?(0,r.hj)(e)||(0,o.j5)(e)?`${e}${t}`:(0,i.HD)(e)?e:void(0,s.N)(a,"binding value must be a string or number"):""}},4721:function(e,t,n){"use strict";n.d(t,{N:function(){return s},_:function(){return o}});class r extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function o(e,t){throw new r(`[${e}] ${t}`)}function s(e,t){0}},2746:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});const r=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e)},5437:function(e,t,n){"use strict";n.d(t,{vu:function(){return l},WJ:function(){return c},uc:function(){return a}});var r=n(6423),o=n(8472);function s(e,t,n){return null==e?e:(0,o.Z)(e,t,n)}var i=s;const a=e=>Object.keys(e),l=e=>Object.entries(e),c=(e,t,n)=>({get value(){return(0,r.Z)(e,t,n)},set value(n){i(e,t,n)}})},5162:function(e,t,n){"use strict";n.d(t,{Cl:function(){return l},j5:function(){return c},kK:function(){return a},o8:function(){return s},xb:function(){return i}});var r=n(3577),o=n(7601);const s=e=>void 0===e,i=e=>!e&&0!==e||(0,r.kJ)(e)&&0===e.length||(0,r.Kn)(e)&&!Object.keys(e).length,a=e=>"undefined"!==typeof Element&&e instanceof Element,l=e=>(0,o.Z)(e),c=e=>!!(0,r.HD)(e)&&!Number.isNaN(Number(e))},5450:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});const r=e=>e},9809:function(e,t,n){"use strict";n.d(t,{AA:function(){return s},NK:function(){return i},Rp:function(){return l},f5:function(){return a},rU:function(){return c}});var r=n(5781),o=n(5027);const s=(0,o.Cq)([String,Object,Function]),i={Close:r.x8P},a={Close:r.x8P,SuccessFilled:r.c5o,InfoFilled:r.cEj,WarningFilled:r.Rrw,CircleCloseFilled:r.Tw$},l={success:r.c5o,warning:r.Rrw,error:r.Tw$,info:r.cEj},c={validating:r.gbz,success:r.yGk,error:r.K41}},2123:function(e,t,n){"use strict";n.d(t,{dH:function(){return i},dp:function(){return a},nz:function(){return o},oN:function(){return s}});var r=n(3577);const o=(e,t)=>{if(e.install=n=>{for(const r of[e,...Object.values(null!=t?t:{})])n.component(r.name,r)},t)for(const[n,r]of Object.entries(t))e[n]=r;return e},s=(e,t)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[t]=e},e),i=(e,t)=>(e.install=n=>{n.directive(t,e)},e),a=e=>(e.install=r.dG,e)},5027:function(e,t,n){"use strict";n.d(t,{Cq:function(){return a},l0:function(){return c},o8:function(){return u}});var r=n(6252),o=n(5937),s=n(3577);const i="__epPropKey",a=e=>e,l=e=>(0,s.Kn)(e)&&!!e[i],c=(e,t)=>{if(!(0,s.Kn)(e)||l(e))return e;const{values:n,required:o,default:a,type:c,validator:u}=e,d=n||u?o=>{let i=!1,l=[];if(n&&(l=Array.from(n),(0,s.RI)(e,"default")&&l.push(a),i||(i=l.includes(o))),u&&(i||(i=u(o))),!i&&l.length>0){const e=[...new Set(l)].map((e=>JSON.stringify(e))).join(", ");(0,r.ZK)(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${e}], got value ${JSON.stringify(o)}.`)}return i}:void 0,h={type:c,required:!!o,validator:d,[i]:!0};return(0,s.RI)(e,"default")&&(h.default=a),h},u=e=>(0,o.Z)(Object.entries(e).map((([e,t])=>[e,c(t,e)])))},2111:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(209);const o=e=>["",...r.k].includes(e)},2813:function(e,t,n){"use strict";n.d(t,{Lg:function(){return u},M2:function(){return l},M3:function(){return p},gL:function(){return h},r5:function(){return d},y:function(){return a}});var r=n(6252),o=n(3577),s=n(4721);const i="utils/vue/vnode";var a=(e=>(e[e["TEXT"]=1]="TEXT",e[e["CLASS"]=2]="CLASS",e[e["STYLE"]=4]="STYLE",e[e["PROPS"]=8]="PROPS",e[e["FULL_PROPS"]=16]="FULL_PROPS",e[e["HYDRATE_EVENTS"]=32]="HYDRATE_EVENTS",e[e["STABLE_FRAGMENT"]=64]="STABLE_FRAGMENT",e[e["KEYED_FRAGMENT"]=128]="KEYED_FRAGMENT",e[e["UNKEYED_FRAGMENT"]=256]="UNKEYED_FRAGMENT",e[e["NEED_PATCH"]=512]="NEED_PATCH",e[e["DYNAMIC_SLOTS"]=1024]="DYNAMIC_SLOTS",e[e["HOISTED"]=-1]="HOISTED",e[e["BAIL"]=-2]="BAIL",e))(a||{});function l(e){return(0,r.lA)(e)&&e.type===r.HY}function c(e){return(0,r.lA)(e)&&e.type===r.sv}function u(e){return(0,r.lA)(e)&&!l(e)&&!c(e)}const d=e=>{if(!(0,r.lA)(e))return(0,s.N)(i,"[getNormalizedProps] must be a VNode"),{};const t=e.props||{},n=((0,r.lA)(e.type)?e.type.props:void 0)||{},a={};return Object.keys(n).forEach((e=>{(0,o.RI)(n[e],"default")&&(a[e]=n[e].default)})),Object.keys(t).forEach((e=>{a[(0,o._A)(e)]=t[e]})),a},h=e=>{if(!(0,o.kJ)(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},p=e=>{const t=(0,o.kJ)(e)?e:[e],n=[];return t.forEach((e=>{var t;(0,o.kJ)(e)?n.push(...p(e)):(0,r.lA)(e)&&(0,o.kJ)(e.children)?n.push(...p(e.children)):(n.push(e),(0,r.lA)(e)&&(null==(t=e.component)?void 0:t.subTree)&&n.push(...p(e.component.subTree)))})),n}},7454:function(e,t,n){"use strict";n.r(t),n.d(t,{create:function(){return M5},globSource:function(){return F5},urlSource:function(){return j5}});var r={};n.r(r),n.d(r,{base58btc:function(){return J},base58flickr:function(){return Q}});var o={};n.r(o),n.d(o,{base32:function(){return X},base32hex:function(){return re},base32hexpad:function(){return se},base32hexpadupper:function(){return ie},base32hexupper:function(){return oe},base32pad:function(){return te},base32padupper:function(){return ne},base32upper:function(){return ee},base32z:function(){return ae}});var s={};n.r(s),n.d(s,{base64:function(){return le},base64pad:function(){return ce},base64url:function(){return ue},base64urlpad:function(){return de}});var i={};n.r(i),n.d(i,{code:function(){return Ht},createLink:function(){return $t},createNode:function(){return zt},decode:function(){return qt},encode:function(){return Kt},name:function(){return Vt},prepare:function(){return Ft},validate:function(){return jt}});var a={};n.r(a),n.d(a,{code:function(){return Io},decode:function(){return To},encode:function(){return Ao},name:function(){return Co}});var l={};n.r(l),n.d(l,{code:function(){return Ko},decode:function(){return Wo},encode:function(){return qo},format:function(){return Yo},name:function(){return Ho},parse:function(){return Zo},stringify:function(){return Yo}});var c={};n.r(c),n.d(c,{code:function(){return ds},decode:function(){return vs},encode:function(){return ys},name:function(){return us},toGeneral:function(){return ms}});var u={};n.r(u),n.d(u,{identity:function(){return Es}});var d={};n.r(d),n.d(d,{identity:function(){return ks}});var h={};n.r(h),n.d(h,{base2:function(){return Cs}});var p={};n.r(p),n.d(p,{base8:function(){return Is}});var f={};n.r(f),n.d(f,{base10:function(){return As}});var g={};n.r(g),n.d(g,{base16:function(){return Ts},base16upper:function(){return Rs}});var m={};n.r(m),n.d(m,{base36:function(){return xs},base36upper:function(){return Os}});var y={};n.r(y),n.d(y,{base256emoji:function(){return Bs}});var v={};n.r(v),n.d(v,{sha256:function(){return Fs},sha512:function(){return js}});var w={};n.r(w),n.d(w,{code:function(){return $s},decode:function(){return Hs},encode:function(){return Vs},name:function(){return zs}});var b={};n.r(b),n.d(b,{code:function(){return Ys},decode:function(){return Zs},encode:function(){return Gs},name:function(){return Ws}});var S={};n.r(S),n.d(S,{RsaPrivateKey:function(){return qp},RsaPublicKey:function(){return Kp},fromJwk:function(){return Gp},generateKeyPair:function(){return Zp},unmarshalRsaPrivateKey:function(){return Wp},unmarshalRsaPublicKey:function(){return Yp}});var _={};n.r(_),n.d(_,{Ed25519PrivateKey:function(){return cg},Ed25519PublicKey:function(){return lg},generateKeyPair:function(){return hg},generateKeyPairFromSeed:function(){return pg},unmarshalEd25519PrivateKey:function(){return ug},unmarshalEd25519PublicKey:function(){return dg}});var E={};n.r(E),n.d(E,{Secp256k1PrivateKey:function(){return Eg},Secp256k1PublicKey:function(){return _g},generateKeyPair:function(){return Ig},unmarshalSecp256k1PrivateKey:function(){return kg},unmarshalSecp256k1PublicKey:function(){return Cg}});var k={};n.r(k),n.d(k,{InvalidValueError:function(){return oU},MissingRepoOptionsError:function(){return sU},NonReversibleMigrationError:function(){return tU},NotInitializedRepoError:function(){return nU},RequiredParameterError:function(){return rU}});var C={};n.r(C),n.d(C,{Decoder:function(){return aq},Encoder:function(){return iq},PacketType:function(){return sq},protocol:function(){return oq}});var I={};n.r(I),n.d(I,{abortedError:function(){return d5},notFoundError:function(){return u5}});var A=n(942),T=A,R=n(106),x=n(1227);function O(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var n=0,r=0,o=0,s=t.length;while(o!==s&&0===t[o])o++,n++;var i=(s-o)*u+1>>>0,c=new Uint8Array(i);while(o!==s){for(var d=t[o],h=0,p=i-1;(0!==d||h<r)&&-1!==p;p--,h++)d+=256*c[p]>>>0,c[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,o++}var f=i-r;while(f!==i&&0===c[f])f++;for(var g=l.repeat(n);f<i;++f)g+=e.charAt(c[f]);return g}function h(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var r=0,o=0;while(e[t]===l)r++,t++;var s=(e.length-t)*c+1>>>0,i=new Uint8Array(s);while(e[t]){var u=n[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<o)&&-1!==h;h--,d++)u+=a*i[h]>>>0,i[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){var p=s-o;while(p!==s&&0===i[p])p++;var f=new Uint8Array(r+(s-p)),g=r;while(p!==s)f[g++]=i[p++];return f}}}function p(e){var n=h(e);if(n)return n;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var N=O,P=N,D=P;const U=new Uint8Array(0),L=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):U},B=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},M=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},F=e=>(new TextEncoder).encode(e),j=e=>(new TextDecoder).decode(e);class z{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ${constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return H(this,e)}}class V{constructor(e){this.decoders=e}or(e){return H(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const H=(e,t)=>new V({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class K{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new z(e,t,n),this.decoder=new $(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const q=({name:e,prefix:t,encode:n,decode:r})=>new K(e,t,n,r),W=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=D(n,t);return q({prefix:e,name:t,encode:r,decode:e=>M(o(e))})},Y=(e,t,n,r)=>{const o={};for(let u=0;u<t.length;++u)o[t[u]]=u;let s=e.length;while("="===e[s-1])--s;const i=new Uint8Array(s*n/8|0);let a=0,l=0,c=0;for(let u=0;u<s;++u){const t=o[e[u]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);l=l<<n|t,a+=n,a>=8&&(a-=8,i[c++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return i},G=(e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let l=0;l<e.length;++l){a=a<<8|e[l],i+=8;while(i>n)i-=n,s+=t[o&a>>i]}if(i&&(s+=t[o&a<<n-i]),r)while(s.length*n&7)s+="=";return s},Z=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>q({prefix:t,name:e,encode(e){return G(e,r,n)},decode(t){return Y(t,r,n,e)}}),J=W({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Q=W({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),X=Z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ee=Z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),te=Z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ne=Z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),re=Z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oe=Z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),se=Z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ie=Z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ae=Z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),le=Z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ce=Z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ue=Z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),de=Z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function he(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function pe(e){let t=he(`${e}:trace`);return x.enabled(`${e}:trace`)&&null!=x.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=x(`${e}:trace`)),Object.assign(x(e),{error:x(`${e}:error`),trace:t})}x.formatters.b=e=>null==e?"undefined":J.baseEncode(e),x.formatters.t=e=>null==e?"undefined":X.baseEncode(e),x.formatters.m=e=>null==e?"undefined":le.baseEncode(e),x.formatters.p=e=>null==e?"undefined":e.toString(),x.formatters.c=e=>null==e?"undefined":e.toString(),x.formatters.k=e=>null==e?"undefined":e.toString();var fe=n(2114),ge=n(2100);const me=ge.Reader,ye=ge.Writer,ve=ge.util,we=ge.roots["ipfs-unixfs"]||(ge.roots["ipfs-unixfs"]={}),be=we.Data=(()=>{function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Type=0,e.prototype.Data=ve.newBuffer([]),e.prototype.filesize=ve.Long?ve.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=ve.emptyArray,e.prototype.hashType=ve.Long?ve.Long.fromBits(0,0,!0):0,e.prototype.fanout=ve.Long?ve.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=ye.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var n=0;n<e.blocksizes.length;++n)t.uint32(32).uint64(e.blocksizes[n]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&we.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof me||(e=me.create(e));var n=void 0===t?e.len:e.pos+t,r=new we.Data;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.Type=e.int32();break;case 2:r.Data=e.bytes();break;case 3:r.filesize=e.uint64();break;case 4:if(r.blocksizes&&r.blocksizes.length||(r.blocksizes=[]),2===(7&o)){var s=e.uint32()+e.pos;while(e.pos<s)r.blocksizes.push(e.uint64())}else r.blocksizes.push(e.uint64());break;case 5:r.hashType=e.uint64();break;case 6:r.fanout=e.uint64();break;case 7:r.mode=e.uint32();break;case 8:r.mtime=we.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&o);break}}if(!r.hasOwnProperty("Type"))throw ve.ProtocolError("missing required 'Type'",{instance:r});return r},e.fromObject=function(e){if(e instanceof we.Data)return e;var t=new we.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5;break}if(null!=e.Data&&("string"===typeof e.Data?ve.base64.decode(e.Data,t.Data=ve.newBuffer(ve.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(ve.Long?(t.filesize=ve.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new ve.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var n=0;n<e.blocksizes.length;++n)ve.Long?(t.blocksizes[n]=ve.Long.fromValue(e.blocksizes[n])).unsigned=!0:"string"===typeof e.blocksizes[n]?t.blocksizes[n]=parseInt(e.blocksizes[n],10):"number"===typeof e.blocksizes[n]?t.blocksizes[n]=e.blocksizes[n]:"object"===typeof e.blocksizes[n]&&(t.blocksizes[n]=new ve.LongBits(e.blocksizes[n].low>>>0,e.blocksizes[n].high>>>0).toNumber(!0))}if(null!=e.hashType&&(ve.Long?(t.hashType=ve.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new ve.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(ve.Long?(t.fanout=ve.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new ve.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=we.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.blocksizes=[]),t.defaults){if(n.Type=t.enums===String?"Raw":0,t.bytes===String?n.Data="":(n.Data=[],t.bytes!==Array&&(n.Data=ve.newBuffer(n.Data))),ve.Long){var r=new ve.Long(0,0,!0);n.filesize=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.filesize=t.longs===String?"0":0;if(ve.Long){r=new ve.Long(0,0,!0);n.hashType=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.hashType=t.longs===String?"0":0;if(ve.Long){r=new ve.Long(0,0,!0);n.fanout=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.fanout=t.longs===String?"0":0;n.mode=0,n.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(n.Type=t.enums===String?we.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(n.Data=t.bytes===String?ve.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?n.filesize=t.longs===String?String(e.filesize):e.filesize:n.filesize=t.longs===String?ve.Long.prototype.toString.call(e.filesize):t.longs===Number?new ve.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){n.blocksizes=[];for(var o=0;o<e.blocksizes.length;++o)"number"===typeof e.blocksizes[o]?n.blocksizes[o]=t.longs===String?String(e.blocksizes[o]):e.blocksizes[o]:n.blocksizes[o]=t.longs===String?ve.Long.prototype.toString.call(e.blocksizes[o]):t.longs===Number?new ve.LongBits(e.blocksizes[o].low>>>0,e.blocksizes[o].high>>>0).toNumber(!0):e.blocksizes[o]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?n.hashType=t.longs===String?String(e.hashType):e.hashType:n.hashType=t.longs===String?ve.Long.prototype.toString.call(e.hashType):t.longs===Number?new ve.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?n.fanout=t.longs===String?String(e.fanout):e.fanout:n.fanout=t.longs===String?ve.Long.prototype.toString.call(e.fanout):t.longs===Number?new ve.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(n.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(n.mtime=we.UnixTime.toObject(e.mtime,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e})(),Se=(we.UnixTime=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Seconds=ve.Long?ve.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=ye.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof me||(e=me.create(e));var n=void 0===t?e.len:e.pos+t,r=new we.UnixTime;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.Seconds=e.int64();break;case 2:r.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&o);break}}if(!r.hasOwnProperty("Seconds"))throw ve.ProtocolError("missing required 'Seconds'",{instance:r});return r},e.fromObject=function(e){if(e instanceof we.UnixTime)return e;var t=new we.UnixTime;return null!=e.Seconds&&(ve.Long?(t.Seconds=ve.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new ve.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(ve.Long){var r=new ve.Long(0,0,!1);n.Seconds=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.Seconds=t.longs===String?"0":0;n.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?n.Seconds=t.longs===String?String(e.Seconds):e.Seconds:n.Seconds=t.longs===String?ve.Long.prototype.toString.call(e.Seconds):t.longs===Number?new ve.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=e.FractionalNanoseconds),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e})(),we.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=ye.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof me||(e=me.create(e));var n=void 0===t?e.len:e.pos+t,r=new we.Metadata;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.MimeType=e.string();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof we.Metadata)return e;var t=new we.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(n.MimeType=e.MimeType),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e})(),be),_e=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Ee=["directory","hamt-sharded-directory"],ke=parseInt("0644",8),Ce=parseInt("0755",8);function Ie(e){if(null!=e)return"number"===typeof e?4095&e:(e=e.toString(),"0"===e.substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10))}function Ae(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const n=e.getTime(),r=Math.floor(n/1e3);t={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw fe(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}class Te{static unmarshal(e){const t=Se.decode(e),n=Se.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),r=new Te({type:_e[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return r._originalMode=n.mode||0,r}constructor(e={type:"file"}){const{type:t,data:n,blockSizes:r,hashType:o,fanout:s,mtime:i,mode:a}=e;if(t&&!_e.includes(t))throw fe(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=r||[],this._originalMode=0,this.mode=Ie(a),i&&(this.mtime=Ae(i),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?Ce:ke;const t=Ie(e);void 0!==t&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Ee.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach((t=>{e+=t})),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=Se.DataType.Raw;break;case"directory":e=Se.DataType.Directory;break;case"file":e=Se.DataType.File;break;case"metadata":e=Se.DataType.Metadata;break;case"symlink":e=Se.DataType.Symlink;break;case"hamt-sharded-directory":e=Se.DataType.HAMTShard;break;default:throw fe(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t,n,r=this.data;if(this.data&&this.data.length||(r=void 0),null!=this.mode&&(t=4294963200&this._originalMode|(Ie(this.mode)||0),t!==ke||this.isDirectory()||(t=void 0),t===Ce&&this.isDirectory()&&(t=void 0)),null!=this.mtime){const e=Ae(this.mtime);e&&(n={Seconds:e.secs,FractionalNanoseconds:e.nsecs},0===n.FractionalNanoseconds&&delete n.FractionalNanoseconds)}const o={Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:n};return Se.encode(o).finish()}}var Re=De,xe=128,Oe=127,Ne=~Oe,Pe=Math.pow(2,31);function De(e,t,n){t=t||[],n=n||0;var r=n;while(e>=Pe)t[n++]=255&e|xe,e/=128;while(e&Ne)t[n++]=255&e|xe,e>>>=7;return t[n]=0|e,De.bytes=n-r+1,t}var Ue=Me,Le=128,Be=127;function Me(e,t){var n,r=0,o=(t=t||0,0),s=t,i=e.length;do{if(s>=i)throw Me.bytes=0,new RangeError("Could not decode varint");n=e[s++],r+=o<28?(n&Be)<<o:(n&Be)*Math.pow(2,o),o+=7}while(n>=Le);return Me.bytes=s-t,r}var Fe=Math.pow(2,7),je=Math.pow(2,14),ze=Math.pow(2,21),$e=Math.pow(2,28),Ve=Math.pow(2,35),He=Math.pow(2,42),Ke=Math.pow(2,49),qe=Math.pow(2,56),We=Math.pow(2,63),Ye=function(e){return e<Fe?1:e<je?2:e<ze?3:e<$e?4:e<Ve?5:e<He?6:e<Ke?7:e<qe?8:e<We?9:10},Ge={encode:Re,decode:Ue,encodingLength:Ye},Ze=Ge,Je=Ze;const Qe=(e,t=0)=>{const n=Je.decode(e,t);return[n,Je.decode.bytes]},Xe=(e,t,n=0)=>(Je.encode(e,t,n),t),et=e=>Je.encodingLength(e),tt=(e,t)=>{const n=t.byteLength,r=et(e),o=r+et(n),s=new Uint8Array(o+n);return Xe(e,s,0),Xe(n,s,r),s.set(t,o),new ot(e,n,t,s)},nt=e=>{const t=M(e),[n,r]=Qe(t),[o,s]=Qe(t.subarray(r)),i=t.subarray(r+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new ot(n,o,i,t)},rt=(e,t)=>{if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&B(e.bytes,n.bytes)}};class ot{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const st=(e,t)=>{const{bytes:n,version:r}=e;switch(r){case 0:return ut(n,at(e),t||J.encoder);default:return dt(n,at(e),t||X.encoder)}},it=new WeakMap,at=e=>{const t=it.get(e);if(null==t){const t=new Map;return it.set(e,t),t}return t};class lt{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==ht)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==pt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return lt.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=tt(e,t);return lt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return lt.equals(this,e)}static equals(e,t){const n=t;return n&&e.code===n.code&&e.version===n.version&&rt(e.multihash,n.multihash)}toString(e){return st(this,e)}toJSON(){return{"/":st(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof lt)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:o}=t;return new lt(e,n,r,o||ft(e,n,r.bytes))}if(!0===t[gt]){const{version:e,multihash:n,code:r}=t,o=nt(n);return lt.create(e,r,o)}return null}static create(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==ht)throw new Error(`Version 0 CID must use dag-pb (code: ${ht}) block encoding`);return new lt(e,t,n,n.bytes);case 1:{const r=ft(e,t,n.bytes);return new lt(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return lt.create(0,ht,e)}static createV1(e,t){return lt.create(1,e,t)}static decode(e){const[t,n]=lt.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=lt.inspectBytes(e),n=t.size-t.multihashSize,r=M(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=r.subarray(t.multihashSize-t.digestSize),s=new ot(t.multihashCode,t.digestSize,o,r),i=0===t.version?lt.createV0(s):lt.createV1(t.codec,s);return[i,e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=Qe(e.subarray(t));return t+=r,n};let r=n(),o=ht;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const s=t,i=n(),a=n(),l=t+a,c=l-s;return{version:r,codec:o,multihashCode:i,digestSize:a,multihashSize:c,size:l}}static parse(e,t){const[n,r]=ct(e,t),o=lt.decode(r);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return at(o).set(n,e),o}}const ct=(e,t)=>{switch(e[0]){case"Q":{const n=t||J;return[J.prefix,n.decode(`${J.prefix}${e}`)]}case J.prefix:{const n=t||J;return[J.prefix,n.decode(e)]}case X.prefix:{const n=t||X;return[X.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},ut=(e,t,n)=>{const{prefix:r}=n;if(r!==J.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o},dt=(e,t,n)=>{const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o},ht=112,pt=18,ft=(e,t,n)=>{const r=et(e),o=r+et(t),s=new Uint8Array(o+n.byteLength);return Xe(e,s,0),Xe(t,s,r),s.set(n,o),s},gt=Symbol.for("@ipld/js-cid/CID"),mt=new TextDecoder;function yt(e,t){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[t++];if(n+=r<28?(127&o)<<r:(127&o)*2**r,o<128)break}return[n,t]}function vt(e,t){let n;[n,t]=yt(e,t);const r=t+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,r),r]}function wt(e,t){let n;return[n,t]=yt(e,t),[7&n,n>>3,t]}function bt(e){const t={},n=e.length;let r=0;while(r<n){let n,o;if([n,o,r]=wt(e,r),1===o){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,r]=vt(e,r)}else if(2===o){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,r]=vt(e,r),t.Name=mt.decode(o)}else{if(3!==o)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[t.Tsize,r]=yt(e,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function St(e){const t=e.length;let n,r,o=0,s=!1;while(o<t){let t,i;if([t,i,o]=wt(e,o),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===i){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,o]=vt(e,o),n&&(s=!0)}else{if(2!==i)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${i}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let t;n||(n=[]),[t,o]=vt(e,o),n.push(bt(t))}}}if(o>t)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return r&&(i.Data=r),i.Links=n||[],i}const _t=new TextEncoder,Et=2**32,kt=2**31;function Ct(e,t){let n=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");n=Rt(t,n,e.Tsize)-1,t[n]=24}if("string"===typeof e.Name){const r=_t.encode(e.Name);n-=r.length,t.set(r,n),n=Rt(t,n,r.length)-1,t[n]=18}return e.Hash&&(n-=e.Hash.length,t.set(e.Hash,n),n=Rt(t,n,e.Hash.length)-1,t[n]=10),t.length-n}function It(e){const t=Tt(e),n=new Uint8Array(t);let r=t;if(e.Data&&(r-=e.Data.length,n.set(e.Data,r),r=Rt(n,r,e.Data.length)-1,n[r]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const t=Ct(e.Links[o],n.subarray(0,r));r-=t,r=Rt(n,r,t)-1,n[r]=18}return n}function At(e){let t=0;if(e.Hash){const n=e.Hash.length;t+=1+n+xt(n)}if("string"===typeof e.Name){const n=_t.encode(e.Name).length;t+=1+n+xt(n)}return"number"===typeof e.Tsize&&(t+=1+xt(e.Tsize)),t}function Tt(e){let t=0;if(e.Data){const n=e.Data.length;t+=1+n+xt(n)}if(e.Links)for(const n of e.Links){const e=At(n);t+=1+e+xt(e)}return t}function Rt(e,t,n){t-=xt(n);const r=t;while(n>=kt)e[t++]=127&n|128,n/=128;while(n>=128)e[t++]=127&n|128,n>>>=7;return e[t]=n,r}function xt(e){return e%2===0&&e++,Math.floor((Ot(e)+6)/7)}function Ot(e){let t=0;return e>=Et&&(e=Math.floor(e/Et),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+Nt[e]}const Nt=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Pt=["Data","Links"],Dt=["Hash","Name","Tsize"],Ut=new TextEncoder;function Lt(e,t){if(e===t)return 0;const n=e.Name?Ut.encode(e.Name):[],r=t.Name?Ut.encode(t.Name):[];let o=n.length,s=r.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(n[i]!==r[i]){o=n[i],s=r[i];break}return o<s?-1:s<o?1:0}function Bt(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function Mt(e){if("object"===typeof e.asCID){const t=lt.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let r=lt.asCID(e.Hash);try{r||("string"===typeof e.Hash?r=lt.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=lt.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(t.Name=e.Name),"number"===typeof e.Tsize&&(t.Tsize=e.Tsize),t}function Ft(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=Ut.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(Mt),t.Links.sort(Lt)}else t.Links=[];return t}function jt(e){if(!e||"object"!==typeof e||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Bt(e,Pt))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){const n=e.Links[t];if(!n||"object"!==typeof n||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Bt(n,Dt))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===n.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==n.Hash||!n.Hash["/"]||n.Hash["/"]!==n.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==n.Name&&"string"!==typeof n.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==n.Tsize){if("number"!==typeof n.Tsize||n.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(n.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===Lt(n,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function zt(e,t=[]){return Ft({Data:e,Links:t})}function $t(e,t,n){return Mt({Hash:n,Name:e,Tsize:t})}const Vt="dag-pb",Ht=112;function Kt(e){jt(e);const t={};return e.Links&&(t.Links=e.Links.map((e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),It(t)}function qt(e){const t=St(e),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map((e=>{const t={};try{t.Hash=lt.decode(e.Hash)}catch(n){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),n}const Wt=["string","number","bigint","symbol"],Yt=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Gt(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(Wt.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(Zt(e))return"Buffer";const n=Jt(e);return n||"Object"}function Zt(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function Jt(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(Yt.includes(t))return t}class Qt{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Qt.uint=new Qt(0,"uint",!0),Qt.negint=new Qt(1,"negint",!0),Qt.bytes=new Qt(2,"bytes",!0),Qt.string=new Qt(3,"string",!0),Qt.array=new Qt(4,"array",!1),Qt.map=new Qt(5,"map",!1),Qt.tag=new Qt(6,"tag",!1),Qt.float=new Qt(7,"float",!0),Qt.false=new Qt(7,"false",!0),Qt.true=new Qt(7,"true",!0),Qt.null=new Qt(7,"null",!0),Qt.undefined=new Qt(7,"undefined",!0),Qt.break=new Qt(7,"break",!0);class Xt{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const en=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,tn=new TextDecoder,nn=new TextEncoder;function rn(e){return en&&globalThis.Buffer.isBuffer(e)}function on(e){return e instanceof Uint8Array?rn(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const sn=en?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):fn(e,t,n):(e,t,n)=>n-t>64?tn.decode(e.subarray(t,n)):fn(e,t,n),an=en?e=>e.length>64?globalThis.Buffer.from(e):pn(e):e=>e.length>64?nn.encode(e):pn(e),ln=e=>Uint8Array.from(e),cn=en?(e,t,n)=>rn(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),un=en?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),on(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},dn=en?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function hn(e,t){if(rn(e)&&rn(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function pn(e,t=1/0){let n;const r=e.length;let o=null;const s=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function fn(e,t,n){const r=[];while(t<n){const o=e[t];let s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=n){let n,r,a,l;switch(i){case 1:o<128&&(s=o);break;case 2:n=e[t+1],128===(192&n)&&(l=(31&o)<<6|63&n,l>127&&(s=l));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(l=(15&o)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(l=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),t+=i}return mn(r)}const gn=4096;function mn(e){const t=e.length;if(t<=gn)return String.fromCharCode.apply(String,e);let n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=gn));return n}const yn=256;class vn{constructor(e=yn){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];const n=this.cursor+e.length;if(n<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=dn(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=cn(n,0,this.cursor)}else t=un(this.chunks,this.cursor);return e&&this.reset(),t}}const wn="CBOR decode error:",bn="CBOR encode error:",Sn=[];function _n(e,t,n){if(e.length-t<n)throw new Error(`${wn} not enough data for type`)}Sn[23]=1,Sn[24]=2,Sn[25]=3,Sn[26]=5,Sn[27]=9;const En=[24,256,65536,4294967296,BigInt("18446744073709551616")];function kn(e,t,n){_n(e,t,1);const r=e[t];if(!0===n.strict&&r<En[0])throw new Error(`${wn} integer encoded in more bytes than necessary (strict decode)`);return r}function Cn(e,t,n){_n(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<En[1])throw new Error(`${wn} integer encoded in more bytes than necessary (strict decode)`);return r}function In(e,t,n){_n(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<En[2])throw new Error(`${wn} integer encoded in more bytes than necessary (strict decode)`);return r}function An(e,t,n){_n(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&s<En[3])throw new Error(`${wn} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===n.allowBigInt)return s;throw new Error(`${wn} integers outside of the safe integer range are not supported`)}function Tn(e,t,n,r){return new Xt(Qt.uint,kn(e,t+1,r),2)}function Rn(e,t,n,r){return new Xt(Qt.uint,Cn(e,t+1,r),3)}function xn(e,t,n,r){return new Xt(Qt.uint,In(e,t+1,r),5)}function On(e,t,n,r){return new Xt(Qt.uint,An(e,t+1,r),9)}function Nn(e,t){return Pn(e,0,t.value)}function Pn(e,t,n){if(n<En[0]){const r=Number(n);e.push([t|r])}else if(n<En[1]){const r=Number(n);e.push([24|t,r])}else if(n<En[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<En[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<En[4]))throw new Error(`${wn} encountered BigInt larger than allowable range`);{const n=[27|t,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&s,s>>=8,n[3]=255&s,s>>=8,n[2]=255&s,s>>=8,n[1]=255&s,e.push(n)}}}function Dn(e,t,n,r){return new Xt(Qt.negint,-1-kn(e,t+1,r),2)}function Un(e,t,n,r){return new Xt(Qt.negint,-1-Cn(e,t+1,r),3)}function Ln(e,t,n,r){return new Xt(Qt.negint,-1-In(e,t+1,r),5)}Nn.encodedSize=function(e){return Pn.encodedSize(e.value)},Pn.encodedSize=function(e){return e<En[0]?1:e<En[1]?2:e<En[2]?3:e<En[3]?5:9},Nn.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const Bn=BigInt(-1),Mn=BigInt(1);function Fn(e,t,n,r){const o=An(e,t+1,r);if("bigint"!==typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new Xt(Qt.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${wn} integers outside of the safe integer range are not supported`);return new Xt(Qt.negint,Bn-BigInt(o),9)}function jn(e,t){const n=t.value,r="bigint"===typeof n?n*Bn-Mn:-1*n-1;Pn(e,t.type.majorEncoded,r)}function zn(e,t,n,r){_n(e,t,n+r);const o=cn(e,t+n,t+n+r);return new Xt(Qt.bytes,o,n+r)}function $n(e,t,n,r){return zn(e,t,1,n)}function Vn(e,t,n,r){return zn(e,t,2,kn(e,t+1,r))}function Hn(e,t,n,r){return zn(e,t,3,Cn(e,t+1,r))}function Kn(e,t,n,r){return zn(e,t,5,In(e,t+1,r))}function qn(e,t,n,r){const o=An(e,t+1,r);if("bigint"===typeof o)throw new Error(`${wn} 64-bit integer bytes lengths not supported`);return zn(e,t,9,o)}function Wn(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Qt.string?an(e.value):e.value),e.encodedBytes}function Yn(e,t){const n=Wn(t);Pn(e,t.type.majorEncoded,n.length),e.push(n)}function Gn(e,t){return e.length<t.length?-1:e.length>t.length?1:hn(e,t)}function Zn(e,t,n,r,o){const s=n+r;_n(e,t,s);const i=new Xt(Qt.string,sn(e,t+n,t+s),s);return!0===o.retainStringBytes&&(i.byteValue=cn(e,t+n,t+s)),i}function Jn(e,t,n,r){return Zn(e,t,1,n,r)}function Qn(e,t,n,r){return Zn(e,t,2,kn(e,t+1,r),r)}function Xn(e,t,n,r){return Zn(e,t,3,Cn(e,t+1,r),r)}function er(e,t,n,r){return Zn(e,t,5,In(e,t+1,r),r)}function tr(e,t,n,r){const o=An(e,t+1,r);if("bigint"===typeof o)throw new Error(`${wn} 64-bit integer string lengths not supported`);return Zn(e,t,9,o,r)}jn.encodedSize=function(e){const t=e.value,n="bigint"===typeof t?t*Bn-Mn:-1*t-1;return n<En[0]?1:n<En[1]?2:n<En[2]?3:n<En[3]?5:9},jn.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},Yn.encodedSize=function(e){const t=Wn(e);return Pn.encodedSize(t.length)+t.length},Yn.compareTokens=function(e,t){return Gn(Wn(e),Wn(t))};const nr=Yn;function rr(e,t,n,r){return new Xt(Qt.array,r,n)}function or(e,t,n,r){return rr(e,t,1,n)}function sr(e,t,n,r){return rr(e,t,2,kn(e,t+1,r))}function ir(e,t,n,r){return rr(e,t,3,Cn(e,t+1,r))}function ar(e,t,n,r){return rr(e,t,5,In(e,t+1,r))}function lr(e,t,n,r){const o=An(e,t+1,r);if("bigint"===typeof o)throw new Error(`${wn} 64-bit integer array lengths not supported`);return rr(e,t,9,o)}function cr(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${wn} indefinite length items not allowed`);return rr(e,t,1,1/0)}function ur(e,t){Pn(e,Qt.array.majorEncoded,t.value)}function dr(e,t,n,r){return new Xt(Qt.map,r,n)}function hr(e,t,n,r){return dr(e,t,1,n)}function pr(e,t,n,r){return dr(e,t,2,kn(e,t+1,r))}function fr(e,t,n,r){return dr(e,t,3,Cn(e,t+1,r))}function gr(e,t,n,r){return dr(e,t,5,In(e,t+1,r))}function mr(e,t,n,r){const o=An(e,t+1,r);if("bigint"===typeof o)throw new Error(`${wn} 64-bit integer map lengths not supported`);return dr(e,t,9,o)}function yr(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${wn} indefinite length items not allowed`);return dr(e,t,1,1/0)}function vr(e,t){Pn(e,Qt.map.majorEncoded,t.value)}function wr(e,t,n,r){return new Xt(Qt.tag,n,1)}function br(e,t,n,r){return new Xt(Qt.tag,kn(e,t+1,r),2)}function Sr(e,t,n,r){return new Xt(Qt.tag,Cn(e,t+1,r),3)}function _r(e,t,n,r){return new Xt(Qt.tag,In(e,t+1,r),5)}function Er(e,t,n,r){return new Xt(Qt.tag,An(e,t+1,r),9)}function kr(e,t){Pn(e,Qt.tag.majorEncoded,t.value)}ur.compareTokens=Nn.compareTokens,ur.encodedSize=function(e){return Pn.encodedSize(e.value)},vr.compareTokens=Nn.compareTokens,vr.encodedSize=function(e){return Pn.encodedSize(e.value)},kr.compareTokens=Nn.compareTokens,kr.encodedSize=function(e){return Pn.encodedSize(e.value)};const Cr=20,Ir=21,Ar=22,Tr=23;function Rr(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${wn} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new Xt(Qt["null"],null,1):new Xt(Qt.undefined,void 0,1)}function xr(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${wn} indefinite length items not allowed`);return new Xt(Qt["break"],void 0,1)}function Or(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${wn} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${wn} Infinity values are not supported`)}return new Xt(Qt.float,e,t)}function Nr(e,t,n,r){return Or(jr(e,t+1),3,r)}function Pr(e,t,n,r){return Or($r(e,t+1),5,r)}function Dr(e,t,n,r){return Or(Hr(e,t+1),9,r)}function Ur(e,t,n){const r=t.value;if(!1===r)e.push([Qt.float.majorEncoded|Cr]);else if(!0===r)e.push([Qt.float.majorEncoded|Ir]);else if(null===r)e.push([Qt.float.majorEncoded|Ar]);else if(void 0===r)e.push([Qt.float.majorEncoded|Tr]);else{let t,o=!1;n&&!0===n.float64||(Fr(r),t=jr(Mr,1),r===t||Number.isNaN(r)?(Mr[0]=249,e.push(Mr.slice(0,3)),o=!0):(zr(r),t=$r(Mr,1),r===t&&(Mr[0]=250,e.push(Mr.slice(0,5)),o=!0))),o||(Vr(r),t=Hr(Mr,1),Mr[0]=251,e.push(Mr.slice(0,9)))}}Ur.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){Fr(n);let e=jr(Mr,1);if(n===e||Number.isNaN(n))return 3;if(zr(n),e=$r(Mr,1),n===e)return 5}return 9};const Lr=new ArrayBuffer(9),Br=new DataView(Lr,1),Mr=new Uint8Array(Lr,0);function Fr(e){if(e===1/0)Br.setUint16(0,31744,!1);else if(e===-1/0)Br.setUint16(0,64512,!1);else if(Number.isNaN(e))Br.setUint16(0,32256,!1);else{Br.setFloat32(0,e);const t=Br.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Br.setUint16(0,31744,!1);else if(0===n)Br.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?Br.setUint16(0,0):e<-14?Br.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Br.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function jr(e,t){if(e.length-t<2)throw new Error(`${wn} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let s;return s=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-s:s}function zr(e){Br.setFloat32(0,e,!1)}function $r(e,t){if(e.length-t<4)throw new Error(`${wn} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function Vr(e){Br.setFloat64(0,e,!1)}function Hr(e,t){if(e.length-t<8)throw new Error(`${wn} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function Kr(e,t,n){throw new Error(`${wn} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function qr(e){return()=>{throw new Error(`${wn} ${e}`)}}Ur.compareTokens=Nn.compareTokens;const Wr=[];for(let $5=0;$5<=23;$5++)Wr[$5]=Kr;Wr[24]=Tn,Wr[25]=Rn,Wr[26]=xn,Wr[27]=On,Wr[28]=Kr,Wr[29]=Kr,Wr[30]=Kr,Wr[31]=Kr;for(let $5=32;$5<=55;$5++)Wr[$5]=Kr;Wr[56]=Dn,Wr[57]=Un,Wr[58]=Ln,Wr[59]=Fn,Wr[60]=Kr,Wr[61]=Kr,Wr[62]=Kr,Wr[63]=Kr;for(let $5=64;$5<=87;$5++)Wr[$5]=$n;Wr[88]=Vn,Wr[89]=Hn,Wr[90]=Kn,Wr[91]=qn,Wr[92]=Kr,Wr[93]=Kr,Wr[94]=Kr,Wr[95]=qr("indefinite length bytes/strings are not supported");for(let $5=96;$5<=119;$5++)Wr[$5]=Jn;Wr[120]=Qn,Wr[121]=Xn,Wr[122]=er,Wr[123]=tr,Wr[124]=Kr,Wr[125]=Kr,Wr[126]=Kr,Wr[127]=qr("indefinite length bytes/strings are not supported");for(let $5=128;$5<=151;$5++)Wr[$5]=or;Wr[152]=sr,Wr[153]=ir,Wr[154]=ar,Wr[155]=lr,Wr[156]=Kr,Wr[157]=Kr,Wr[158]=Kr,Wr[159]=cr;for(let $5=160;$5<=183;$5++)Wr[$5]=hr;Wr[184]=pr,Wr[185]=fr,Wr[186]=gr,Wr[187]=mr,Wr[188]=Kr,Wr[189]=Kr,Wr[190]=Kr,Wr[191]=yr;for(let $5=192;$5<=215;$5++)Wr[$5]=wr;Wr[216]=br,Wr[217]=Sr,Wr[218]=_r,Wr[219]=Er,Wr[220]=Kr,Wr[221]=Kr,Wr[222]=Kr,Wr[223]=Kr;for(let $5=224;$5<=243;$5++)Wr[$5]=qr("simple values are not supported");Wr[244]=Kr,Wr[245]=Kr,Wr[246]=Kr,Wr[247]=Rr,Wr[248]=qr("simple values are not supported"),Wr[249]=Nr,Wr[250]=Pr,Wr[251]=Dr,Wr[252]=Kr,Wr[253]=Kr,Wr[254]=Kr,Wr[255]=xr;const Yr=[];for(let $5=0;$5<24;$5++)Yr[$5]=new Xt(Qt.uint,$5,1);for(let $5=-1;$5>=-24;$5--)Yr[31-$5]=new Xt(Qt.negint,$5,1);function Gr(e){switch(e.type){case Qt["false"]:return ln([244]);case Qt["true"]:return ln([245]);case Qt["null"]:return ln([246]);case Qt.bytes:return e.value.length?void 0:ln([64]);case Qt.string:return""===e.value?ln([96]):void 0;case Qt.array:return 0===e.value?ln([128]):void 0;case Qt.map:return 0===e.value?ln([160]):void 0;case Qt.uint:return e.value<24?ln([Number(e.value)]):void 0;case Qt.negint:if(e.value>=-24)return ln([31-Number(e.value)])}}Yr[64]=new Xt(Qt.bytes,new Uint8Array(0),1),Yr[96]=new Xt(Qt.string,"",1),Yr[128]=new Xt(Qt.array,0,1),Yr[160]=new Xt(Qt.map,0,1),Yr[244]=new Xt(Qt["false"],!1,1),Yr[245]=new Xt(Qt["true"],!0,1),Yr[246]=new Xt(Qt["null"],null,1);const Zr={float64:!1,mapSorter:so,quickEncodeToken:Gr};function Jr(){const e=[];return e[Qt.uint.major]=Nn,e[Qt.negint.major]=jn,e[Qt.bytes.major]=Yn,e[Qt.string.major]=nr,e[Qt.array.major]=ur,e[Qt.map.major]=vr,e[Qt.tag.major]=kr,e[Qt.float.major]=Ur,e}const Qr=Jr(),Xr=new vn;class eo{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${bn} object contains circular references`);return new eo(t,e)}}const to={null:new Xt(Qt["null"],null),undefined:new Xt(Qt.undefined,void 0),true:new Xt(Qt["true"],!0),false:new Xt(Qt["false"],!1),emptyArray:new Xt(Qt.array,0),emptyMap:new Xt(Qt.map,0)},no={number(e,t,n,r){return Number.isInteger(e)&&Number.isSafeInteger(e)?new Xt(e>=0?Qt.uint:Qt.negint,e):new Xt(Qt.float,e)},bigint(e,t,n,r){return e>=BigInt(0)?new Xt(Qt.uint,e):new Xt(Qt.negint,e)},Uint8Array(e,t,n,r){return new Xt(Qt.bytes,e)},string(e,t,n,r){return new Xt(Qt.string,e)},boolean(e,t,n,r){return e?to.true:to.false},null(e,t,n,r){return to.null},undefined(e,t,n,r){return to.undefined},ArrayBuffer(e,t,n,r){return new Xt(Qt.bytes,new Uint8Array(e))},DataView(e,t,n,r){return new Xt(Qt.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[to.emptyArray,new Xt(Qt["break"])]:to.emptyArray;r=eo.createCheck(r,e);const o=[];let s=0;for(const i of e)o[s++]=ro(i,n,r);return n.addBreakTokens?[new Xt(Qt.array,e.length),o,new Xt(Qt["break"])]:[new Xt(Qt.array,e.length),o]},Object(e,t,n,r){const o="Object"!==t,s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return!0===n.addBreakTokens?[to.emptyMap,new Xt(Qt["break"])]:to.emptyMap;r=eo.createCheck(r,e);const a=[];let l=0;for(const c of s)a[l++]=[ro(c,n,r),ro(o?e.get(c):e[c],n,r)];return oo(a,n),n.addBreakTokens?[new Xt(Qt.map,i),a,new Xt(Qt["break"])]:[new Xt(Qt.map,i),a]}};no.Map=no.Object,no.Buffer=no.Uint8Array;for(const $5 of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))no[`${$5}Array`]=no.DataView;function ro(e,t={},n){const r=Gt(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||no[r];if("function"===typeof o){const s=o(e,r,t,n);if(null!=s)return s}const s=no[r];if(!s)throw new Error(`${bn} unsupported type: ${r}`);return s(e,r,t,n)}function oo(e,t){t.mapSorter&&e.sort(t.mapSorter)}function so(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,s=Qr[o].compareTokens(n,r);return 0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function io(e,t,n,r){if(Array.isArray(t))for(const o of t)io(e,o,n,r);else n[t.type.major](e,t,r)}function ao(e,t,n){const r=ro(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const e=n.quickEncodeToken(r);if(e)return e;const o=t[r.type.major];if(o.encodedSize){const e=o.encodedSize(r,n),t=new vn(e);if(o(t,r,n),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return on(t.chunks[0])}}return Xr.reset(),io(Xr,r,t,n),Xr.toBytes(!0)}function lo(e,t){return t=Object.assign({},Zr,t),ao(e,Qr,t)}const co={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class uo{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=Yr[e];if(void 0===t){const n=Wr[e];if(!n)throw new Error(`${wn} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const r=31&e;t=n(this.data,this.pos,r,this.options)}return this.pos+=t.encodedLength,t}}const ho=Symbol.for("DONE"),po=Symbol.for("BREAK");function fo(e,t,n){const r=[];for(let o=0;o<e.value;o++){const s=mo(t,n);if(s===po){if(e.value===1/0)break;throw new Error(`${wn} got unexpected break to lengthed array`)}if(s===ho)throw new Error(`${wn} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=s}return r}function go(e,t,n){const r=!0===n.useMaps,o=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const a=mo(t,n);if(a===po){if(e.value===1/0)break;throw new Error(`${wn} got unexpected break to lengthed map`)}if(a===ho)throw new Error(`${wn} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(!0!==r&&"string"!==typeof a)throw new Error(`${wn} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&s.has(a)||!r&&a in o))throw new Error(`${wn} found repeat map key "${a}"`);const l=mo(t,n);if(l===ho)throw new Error(`${wn} found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(a,l):o[a]=l}return r?s:o}function mo(e,t){if(e.done())return ho;const n=e.next();if(n.type===Qt["break"])return po;if(n.type.terminal)return n.value;if(n.type===Qt.array)return fo(n,e,t);if(n.type===Qt.map)return go(n,e,t);if(n.type===Qt.tag){if(t.tags&&"function"===typeof t.tags[n.value]){const r=mo(e,t);return t.tags[n.value](r)}throw new Error(`${wn} tag not supported (${n.value})`)}throw new Error("unsupported")}function yo(e,t){if(!(e instanceof Uint8Array))throw new Error(`${wn} data to decode must be a Uint8Array`);t=Object.assign({},co,t);const n=t.tokenizer||new uo(e,t),r=mo(n,t);if(r===ho)throw new Error(`${wn} did not find any content to decode`);if(r===po)throw new Error(`${wn} got unexpected break`);if(!n.done())throw new Error(`${wn} too many terminals, data makes no sense`);return r}const vo=42;function wo(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=lt.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new Xt(Qt.tag,vo),new Xt(Qt.bytes,n)]}function bo(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function So(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const _o={float64:!0,typeEncoders:{Object:wo,undefined:bo,number:So}};function Eo(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return lt.decode(e.subarray(1))}const ko={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};ko.tags[vo]=Eo;const Co="dag-cbor",Io=113,Ao=e=>lo(e,_o),To=e=>yo(e,ko),Ro=({name:e,code:t,encode:n})=>new xo(e,t,n);class xo{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?tt(this.code,t):t.then((e=>tt(this.code,e)))}throw Error("Unknown type, must be binary type")}}class Oo extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Qt.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===Qt.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}[Qt.uint.major](e,t){this.prefix(e);const n=String(t.value),r=[];for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);e.push(r)}[Qt.negint.major](e,t){this[Qt.uint.major](e,t)}[Qt.bytes.major](e,t){throw new Error(`${bn} unsupported type: Uint8Array`)}[Qt.string.major](e,t){this.prefix(e);const n=an(JSON.stringify(t.value));e.push(n.length>32?on(n):n)}[Qt.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Qt.array,elements:0}),e.push([91])}[Qt.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Qt.map,elements:0}),e.push([123])}[Qt.tag.major](e,t){}[Qt.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===Qt.array)e.push([93]);else{if(t.type!==Qt.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${bn} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const n=String(t.value),r=[];let o=!1;for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s),o||46!==r[s]&&101!==r[s]&&69!==r[s]||(o=!0);o||(r.push(46),r.push(48)),e.push(r)}}function No(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${bn} complex map keys are not supported`);const n=e[0],r=t[0];if(n.type!==Qt.string||r.type!==Qt.string)throw new Error(`${bn} non-string map keys are not supported`);if(n<r)return-1;if(n>r)return 1;throw new Error(`${bn} unexpected duplicate map keys, this is not supported`)}const Po={addBreakTokens:!0,mapSorter:No};function Do(e,t){return t=Object.assign({},Po,t),ao(e,new Oo,t)}class Uo{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();while(32===e||9===e||13===e||10===e)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${wn} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${wn} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let t=!1,n=!1;const r=e=>{while(!this.done()){const t=this.ch();if(!e.includes(t))break;this.pos++}};if(45===this.ch()&&(t=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new Xt(Qt.uint,0,this.pos-e);this.pos++,n=!0}if(r([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${wn} unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(n)throw new Error(`${wn} unexpected token at position ${this.pos}`);n=!0,this.pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,r([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),s=parseFloat(o);return n?new Xt(Qt.float,s,this.pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new Xt(s>=0?Qt.uint:Qt.negint,s,this.pos-e):new Xt(s>=0?Qt.uint:Qt.negint,BigInt(o),this.pos-e)}parseString(){if(34!==this.ch())throw new Error(`${wn} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let o=this.pos,s=0;o<this.data.length&&s<65536;o++,s++){const e=this.data[o];if(92===e||e<32||e>=128)break;if(34===e){const e=String.fromCharCode.apply(null,this.data.subarray(this.pos,o));return this.pos=o+1,new Xt(Qt.string,e,s)}}const e=this.pos,t=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${wn} unexpected end of unicode escape sequence at position ${this.pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${wn} unexpected unicode escape character at position ${this.pos}`);t=t-65+10}e=16*e+t,this.pos++}return e},r=()=>{const e=this.ch();let n,r,o,s,i=null,a=e>239?4:e>223?3:e>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${wn} unexpected unicode sequence at position ${this.pos}`);switch(a){case 1:e<128&&(i=e);break;case 2:n=this.data[this.pos+1],128===(192&n)&&(s=(31&e)<<6|63&n,s>127&&(i=s));break;case 3:n=this.data[this.pos+1],r=this.data[this.pos+2],128===(192&n)&&128===(192&r)&&(s=(15&e)<<12|(63&n)<<6|63&r,s>2047&&(s<55296||s>57343)&&(i=s));break;case 4:n=this.data[this.pos+1],r=this.data[this.pos+2],o=this.data[this.pos+3],128===(192&n)&&128===(192&r)&&128===(192&o)&&(s=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&o,s>65535&&s<1114112&&(i=s))}null===i?(i=65533,a=1):i>65535&&(i-=65536,t.push(i>>>10&1023|55296),i=56320|1023&i),t.push(i),this.pos+=a};while(!this.done()){const o=this.ch();let s;switch(o){case 92:if(this.pos++,this.done())throw new Error(`${wn} unexpected string termination at position ${this.pos}`);switch(s=this.ch(),this.pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${wn} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Xt(Qt.string,mn(t),this.pos-e);default:if(o<32)throw new Error(`${wn} invalid control character at position ${this.pos}`);o<128?(t.push(o),this.pos++):r()}}throw new Error(`${wn} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Xt(Qt.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Xt(Qt.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Xt(Qt["null"],null,4);case 102:return this.expect([102,97,108,115,101]),new Xt(Qt["false"],!1,5);case 116:return this.expect([116,114,117,101]),new Xt(Qt["true"],!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${wn} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new Xt(Qt["break"],void 0,1);if(44!==this.ch())throw new Error(`${wn} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new Xt(Qt["break"],void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Xt(Qt["break"],void 0,1);if(44!==this.ch())throw new Error(`${wn} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new Xt(Qt["break"],void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${wn} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${wn} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function Lo(e,t){return t=Object.assign({tokenizer:new Uo(e,t)},t),yo(e,t)}function Bo(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=lt.asCID(e);if(!t)return null;const n=t.toString();return[new Xt(Qt.map,1/0,1),new Xt(Qt.string,"/",1),new Xt(Qt.string,n,n.length),new Xt(Qt["break"],void 0,1)]}function Mo(e){const t=le.encode(e).slice(1);return[new Xt(Qt.map,1/0,1),new Xt(Qt.string,"/",1),new Xt(Qt.map,1/0,1),new Xt(Qt.string,"bytes",5),new Xt(Qt.string,t,t.length),new Xt(Qt["break"],void 0,1),new Xt(Qt["break"],void 0,1)]}function Fo(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function jo(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const zo={typeEncoders:{Object:Bo,Uint8Array:Mo,Buffer:Mo,undefined:Fo,number:jo}};class $o extends Uo{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Qt.map){const e=this._next();if(e.type===Qt.string&&"/"===e.value){const e=this._next();if(e.type===Qt.string){const t=this._next();if(t.type!==Qt["break"])throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new Xt(Qt.tag,42,0)}if(e.type===Qt.map){const e=this._next();if(e.type===Qt.string&&"bytes"===e.value){const e=this._next();if(e.type===Qt.string){for(let e=0;e<2;e++){const e=this._next();if(e.type!==Qt["break"])throw new Error("Invalid encoded Bytes form")}const t=le.decode(`m${e.value}`);return new Xt(Qt.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const Vo={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Vo.tags[42]=lt.parse;const Ho="dag-json",Ko=297,qo=e=>Do(e,zo),Wo=e=>{const t=Object.assign(Vo,{tokenizer:new $o(e,Vo)});return Lo(e,t)},Yo=e=>Go.decode(qo(e)),Go=new TextDecoder,Zo=e=>Wo(Jo.encode(e)),Jo=new TextEncoder;function Qo(e){return ue.encode(e).slice(1)}function Xo(e){return ue.decode(`u${e}`)}function es(e){const[t,n,r]=e;return{payload:n,signatures:[{protected:t,signature:r}],link:lt.decode(Xo(n))}}function ts(e){const t={signature:Xo(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Xo(e.protected)),t}function ns(e){const t=Xo(e.payload);try{lt.decode(t)}catch(n){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(ts)}}function rs(e){const t={signature:Qo(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Qo(e.protected)),t}function os(e){const t={payload:Qo(e.payload),signatures:e.signatures.map(rs)};return t.link=lt.decode(new Uint8Array(e.payload)),t}function ss(e){const[t,n,r,o,s]=e,i={ciphertext:o,iv:r,protected:t,tag:s};return n&&(i.recipients=[{encrypted_key:n}]),i}function is(e){const t={};return e.encrypted_key&&(t.encrypted_key=Xo(e.encrypted_key)),e.header&&(t.header=e.header),t}function as(e){const t={ciphertext:Xo(e.ciphertext),protected:Xo(e.protected),iv:Xo(e.iv),tag:Xo(e.tag)};return e.aad&&(t.aad=Xo(e.aad)),e.recipients&&(t.recipients=e.recipients.map(is)),e.unprotected&&(t.unprotected=e.unprotected),t}function ls(e){const t={};return e.encrypted_key&&(t.encrypted_key=Qo(e.encrypted_key)),e.header&&(t.header=e.header),t}function cs(e){const t={ciphertext:Qo(e.ciphertext),protected:Qo(e.protected),iv:Qo(e.iv),tag:Qo(e.tag)};return e.aad&&(t.aad=Qo(e.aad)),e.recipients&&(t.recipients=e.recipients.map(ls)),e.unprotected&&(t.unprotected=e.unprotected),t}const us="dag-jose",ds=133;function hs(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function ps(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function fs(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function gs(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function ms(e){if("string"===typeof e){const t=e.split(".");if(3===t.length)return es(t);if(5===t.length)return ss(t);throw new Error("Not a valid JOSE string")}if(hs(e)||gs(e))return e;throw new Error("Not a valid unencoded JOSE object")}function ys(e){let t;if("string"===typeof e&&(e=ms(e)),hs(e))t=ns(e);else{if(!gs(e))throw new Error("Not a valid JOSE object");t=as(e)}return new Uint8Array(Ao(t))}function vs(e){let t;try{t=To(e)}catch(n){throw new Error("Not a valid DAG-JOSE object")}if(ps(t))return os(t);if(fs(t))return cs(t);throw new Error("Not a valid DAG-JOSE object")}const ws=0,bs="identity",Ss=M,_s=e=>tt(ws,Ss(e)),Es={code:ws,name:bs,encode:Ss,digest:_s},ks=q({prefix:"\0",name:"identity",encode:e=>j(e),decode:e=>F(e)}),Cs=Z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Is=Z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),As=W({prefix:"9",name:"base10",alphabet:"0123456789"}),Ts=Z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Rs=Z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),xs=W({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Os=W({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ns=Array.from(""),Ps=Ns.reduce(((e,t,n)=>(e[n]=t,e)),[]),Ds=Ns.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);function Us(e){return e.reduce(((e,t)=>(e+=Ps[t],e)),"")}function Ls(e){const t=[];for(const n of e){const e=Ds[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}const Bs=q({prefix:"",name:"base256emoji",encode:Us,decode:Ls}),Ms=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Fs=Ro({name:"sha2-256",code:18,encode:Ms("SHA-256")}),js=Ro({name:"sha2-512",code:19,encode:Ms("SHA-512")}),zs="raw",$s=85,Vs=e=>M(e),Hs=e=>M(e),Ks=new TextEncoder,qs=new TextDecoder,Ws="json",Ys=512,Gs=e=>Ks.encode(JSON.stringify(e)),Zs=e=>JSON.parse(qs.decode(e)),Js={...d,...h,...p,...f,...g,...o,...m,...r,...s,...y},Qs={...v,...u},Xs={raw:w,json:b};function ei(){}class ti extends Error{constructor(e="not initialized"){super(e),this.name="NotInitializedError",this.code=ti.code}}ti.code="ERR_NOT_INITIALIZED";class ni extends Error{constructor(e="cannot initialize an initializing node"){super(e),this.name="AlreadyInitializingError",this.code=ri.code}}ni.code="ERR_ALREADY_INITIALIZING";class ri extends Error{constructor(e="cannot re-initialize an initialized node"){super(e),this.name="AlreadyInitializedError",this.code=ri.code}}ri.code="ERR_ALREADY_INITIALIZED";class oi extends Error{constructor(e="not started"){super(e),this.name="NotStartedError",this.code=oi.code}}oi.code="ERR_NOT_STARTED";class si extends Error{constructor(e="cannot start, already startin"){super(e),this.name="AlreadyStartingError",this.code=si.code}}si.code="ERR_ALREADY_STARTING";class ii extends Error{constructor(e="cannot start, already started"){super(e),this.name="AlreadyStartedError",this.code=ii.code}}ii.code="ERR_ALREADY_STARTED";class ai extends Error{constructor(e="not enabled"){super(e),this.name="NotEnabledError",this.code=ai.code}}function li(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function ci(e=0){return null!=globalThis.Buffer?.alloc?li(globalThis.Buffer.alloc(e)):new Uint8Array(e)}function ui(e=0){return null!=globalThis.Buffer?.allocUnsafe?li(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function di(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}ai.code="ERR_NOT_ENABLED";const hi=di("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),pi=di("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{e=e.substring(1);const t=ui(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),fi={utf8:hi,"utf-8":hi,hex:Js.base16,latin1:pi,ascii:pi,binary:pi,...Js};var gi=fi;function mi(e,t="utf8"){const n=gi[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):li(globalThis.Buffer.from(e,"utf-8"))}var yi=n(715);class vi{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){const t=this.index,n=e();return void 0===n&&(this.index=t),n}parseWith(e){const t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically((()=>{const t=this.readChar();if(t===e)return t}))}readSeparator(e,t,n){return this.readAtomically((()=>{if(!(t>0&&void 0===this.readGivenChar(e)))return n()}))}readNumber(e,t,n,r){return this.readAtomically((()=>{let o=0,s=0;const i=this.peekChar();if(void 0===i)return;const a="0"===i,l=2**(8*r)-1;while(1){const n=this.readAtomically((()=>{const t=this.readChar();if(void 0===t)return;const n=Number.parseInt(t,e);return Number.isNaN(n)?void 0:n}));if(void 0===n)break;if(o*=e,o+=n,o>l)return;if(s+=1,void 0!==t&&s>t)return}return 0===s||!n&&a&&s>1?void 0:o}))}readIPv4Addr(){return this.readAtomically((()=>{const e=new Uint8Array(4);for(let t=0;t<e.length;t++){const n=this.readSeparator(".",t,(()=>this.readNumber(10,3,!1,1)));if(void 0===n)return;e[t]=n}return e}))}readIPv6Addr(){const e=e=>{for(let t=0;t<e.length/2;t++){const n=2*t;if(t<e.length-3){const r=this.readSeparator(":",t,(()=>this.readIPv4Addr()));if(void 0!==r)return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],[n+4,!0]}const r=this.readSeparator(":",t,(()=>this.readNumber(16,4,!0,2)));if(void 0===r)return[n,!1];e[n]=r>>8,e[n+1]=255&r}return[e.length,!1]};return this.readAtomically((()=>{const t=new Uint8Array(16),[n,r]=e(t);if(16===n)return t;if(r)return;if(void 0===this.readGivenChar(":"))return;if(void 0===this.readGivenChar(":"))return;const o=new Uint8Array(14),s=16-(n+2),[i]=e(o.subarray(0,s));return t.set(o.subarray(0,i),16-i),t}))}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const wi=45,bi=15,Si=new vi;function _i(e){if(!(e.length>bi))return Si.new(e).parseWith((()=>Si.readIPv4Addr()))}function Ei(e){if(!(e.length>wi))return Si.new(e).parseWith((()=>Si.readIPv6Addr()))}function ki(e){if(!(e.length>wi))return Si.new(e).parseWith((()=>Si.readIPAddr()))}function Ci(e){return Boolean(_i(e))}function Ii(e){return Boolean(Ei(e))}function Ai(e){return Boolean(ki(e))}function Ti(e,t="utf8"){const n=gi[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const Ri=Ci,xi=Ii,Oi=function(e){let t=0;if(e=e.toString().trim(),Ri(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if(xi(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){const e=Ri(n[r]);let t;e&&(t=Oi(n[r]),n[r]=Ti(t.slice(0,2),"base16")),null!=t&&++r<8&&n.splice(r,0,Ti(t.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);o[t++]=e>>8&255,o[t++]=255&e}return o}throw new Error("invalid ip address")},Ni=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let o=0;o<n;o++)r.push(e[t+o]);return r.join(".")}if(16===n){const e=[];for(let o=0;o<n;o+=2)e.push(r.getUint16(t+o).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Pi=-1,Di={},Ui={},Li=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Pi,"ip6zone"],[43,8,"ipcidr"],[53,Pi,"dns",!0],[54,Pi,"dns4",!0],[55,Pi,"dns6",!0],[56,Pi,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Pi,"unix",!1,!0],[421,Pi,"ipfs"],[421,Pi,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Pi,"garlic64"],[448,0,"tls"],[449,Pi,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Pi,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Pi,"memory"]];function Bi(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}function Mi(e){if("number"===typeof e){if(null!=Ui[e])return Ui[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=Di[e])return Di[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}Li.forEach((e=>{const t=Bi(...e);Ui[t.code]=t,Di[t.name]=t}));var Fi=n(4676);function ji(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const n=ui(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return li(n)}function zi(e,t){const n=Mi(e);switch(n.code){case 4:case 41:return qi(t);case 42:return Zi(t);case 6:case 273:case 33:case 132:return Yi(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Zi(t);case 421:return ea(t);case 444:return ra(t);case 445:return ra(t);case 466:return Xi(t);default:return Ti(t,"base16")}}function $i(e,t){const n=Mi(e);switch(n.code){case 4:return Ki(t);case 41:return Ki(t);case 42:return Gi(t);case 6:case 273:case 33:case 132:return Wi(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Gi(t);case 421:return Ji(t);case 444:return ta(t);case 445:return na(t);case 466:return Qi(t);default:return mi(t,"base16")}}const Vi=Object.values(Js).map((e=>e.decoder)),Hi=function(){let e=Vi[0].or(Vi[1]);return Vi.slice(2).forEach((t=>e=e.or(t))),e}();function Ki(e){if(!Ai(e))throw new Error("invalid ip address");return Oi(e)}function qi(e){const t=Ni(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ai(t))throw new Error("invalid ip address");return t}function Wi(e){const t=new ArrayBuffer(2),n=new DataView(t);return n.setUint16(0,e),new Uint8Array(t)}function Yi(e){const t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function Gi(e){const t=mi(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function Zi(e){const t=Fi.decode(e);if(e=e.slice(Fi.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Ti(e)}function Ji(e){let t;t="Q"===e[0]||"1"===e[0]?nt(J.decode(`z${e}`)).bytes:lt.parse(e).multihash.bytes;const n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function Qi(e){const t=Hi.decode(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function Xi(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return"u"+Ti(n,"base64url")}function ea(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return Ti(n,"base58btc")}function ta(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=X.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=Wi(r);return ji([n,o],n.length+o.length)}function na(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=X.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=Wi(r);return ji([n,o],n.length+o.length)}function ra(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2),r=Ti(t,"base32"),o=Yi(n);return`${r}:${o}`}function oa(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const o=n[r],s=Mi(o);if(0!==s.size){if(r++,r>=n.length)throw ya("invalid address: "+e);if(!0===s.path){t.push([o,ma(n.slice(r).join("/"))]);break}t.push([o,n[r]])}else t.push([o])}return t}function sa(e){const t=[];return e.map((e=>{const n=va(e);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),ma(t.join("/"))}function ia(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=va(e);return e.length>1?[t.code,$i(t.code,e[1])]:[t.code]}))}function aa(e){return e.map((e=>{const t=va(e);return null!=e[1]?[t.code,zi(t.code,e[1])]:[t.code]}))}function la(e){return fa(ji(e.map((e=>{const t=va(e);let n=Uint8Array.from(Fi.encode(t.code));return e.length>1&&null!=e[1]&&(n=ji([n,e[1]])),n}))))}function ca(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=Fi.decode(t);return e+(Fi.decode.bytes??0)}}function ua(e){const t=[];let n=0;while(n<e.length){const r=Fi.decode(e,n),o=Fi.decode.bytes??0,s=Mi(r),i=ca(s,e.slice(n+o));if(0===i){t.push([r]),n+=o;continue}const a=e.slice(n+o,n+o+i);if(n+=i+o,n>e.length)throw ya("Invalid address Uint8Array: "+Ti(e,"base16"));t.push([r,a])}return t}function da(e){const t=ua(e),n=aa(t);return sa(n)}function ha(e){e=ma(e);const t=oa(e),n=ia(t);return la(n)}function pa(e){return ha(e)}function fa(e){const t=ga(e);if(null!=t)throw t;return Uint8Array.from(e)}function ga(e){try{ua(e)}catch(ik){return ik}}function ma(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function ya(e){return new Error("Error parsing address: "+e)}function va(e){const t=Mi(e[0]);return t}function wa(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}var ba,Sa,_a,Ea,ka=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Ca=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};const Ia=Symbol.for("nodejs.util.inspect.custom"),Aa=[Mi("dns").code,Mi("dns4").code,Mi("dns6").code,Mi("dnsaddr").code],Ta=new Map,Ra=Symbol.for("@multiformats/js-multiaddr/multiaddr");function xa(e,t){if(null==e)throw new Error("requires node address object");if(null==t)throw new Error("requires transport protocol");let n,r=e.address;switch(e.family){case 4:n="ip4";break;case 6:if(n="ip6",r.includes("%")){const e=r.split("%");if(2!==e.length)throw Error("Multiple ip6 zones in multiaddr");r=e[0];const t=e[1];n=`/ip6zone/${t}/ip6`}break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new Pa("/"+[n,r,t,e.port].join("/"))}function Oa(e){return!!Na(e)&&e.protos().some((e=>e.resolvable))}function Na(e){return Boolean(e?.[Ra])}class Pa{constructor(e){if(ba.set(this,void 0),Sa.set(this,void 0),_a.set(this,void 0),this[Ea]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=fa(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=pa(e)}else{if(!Na(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=fa(e.bytes)}}toString(){return null==ka(this,ba,"f")&&Ca(this,ba,da(this.bytes),"f"),ka(this,ba,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";const s=Mi("tcp"),i=Mi("udp"),a=Mi("ip4"),l=Mi("ip6"),c=Mi("dns6"),u=Mi("ip6zone");for(const[h,p]of this.stringTuples())h===u.code&&(o=`%${p??""}`),Aa.includes(h)&&(t=s.name,r=443,n=`${p??""}${o}`,e=h===c.code?6:4),h!==s.code&&h!==i.code||(t=Mi(h).name,r=parseInt(p??"")),h!==a.code&&h!==l.code||(t=Mi(h).name,n=`${p??""}${o}`,e=h===l.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const d={family:e,host:n,transport:t,port:r};return d}protos(){return this.protoCodes().map((e=>Object.assign({},Mi(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;while(n<t.length){const r=Fi.decode(t,n),o=Fi.decode.bytes??0,s=Mi(r),i=ca(s,t.slice(n+o));n+=i+o,e.push(r)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==ka(this,Sa,"f")&&Ca(this,Sa,ua(this.bytes),"f"),ka(this,Sa,"f")}stringTuples(){return null==ka(this,_a,"f")&&Ca(this,_a,aa(this.tuples()),"f"),ka(this,_a,"f")}encapsulate(e){return e=new Pa(e),new Pa(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Pa(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new Pa(la(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===Di.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?Ti(J.decode(`z${e}`),"base58btc"):Ti(lt.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>{const t=Mi(e[0]);return!0===t.path}))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return wa(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=Ta.get(t.name);if(null==n)throw fe(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,e);return r.map((e=>new Pa(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(ba=new WeakMap,Sa=new WeakMap,_a=new WeakMap,Ea=Ra,Ia)](){return`Multiaddr(${da(this.bytes)})`}}function Da(e){return new Pa(e)}const Ua=Ci,La=Ii,Ba=function(e){let t=0;if(e=e.toString().trim(),Ua(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if(La(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){const e=Ua(n[r]);let t;e&&(t=Ba(n[r]),n[r]=Ti(t.slice(0,2),"base16")),null!=t&&++r<8&&n.splice(r,0,Ti(t.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);o[t++]=e>>8&255,o[t++]=255&e}return o}throw new Error("invalid ip address")},Ma=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let o=0;o<n;o++)r.push(e[t+o]);return r.join(".")}if(16===n){const e=[];for(let o=0;o<n;o+=2)e.push(r.getUint16(t+o).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Fa=-1,ja={},za={},$a=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Fa,"ip6zone"],[43,8,"ipcidr"],[53,Fa,"dns",!0],[54,Fa,"dns4",!0],[55,Fa,"dns6",!0],[56,Fa,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Fa,"unix",!1,!0],[421,Fa,"ipfs"],[421,Fa,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Fa,"garlic64"],[448,0,"tls"],[449,Fa,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Fa,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Fa,"memory"]];function Va(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}function Ha(e){if("number"===typeof e){if(null!=za[e])return za[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=ja[e])return ja[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}$a.forEach((e=>{const t=Va(...e);za[t.code]=t,ja[t.name]=t}));parseInt("0xFFFF",16),new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);Ha("ip4"),Ha("ip6"),Ha("ipcidr");function Ka(e,t){const n=Ha(e);switch(n.code){case 4:case 41:return Za(t);case 42:return el(t);case 6:case 273:case 33:case 132:return Qa(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return el(t);case 421:return ol(t);case 444:return al(t);case 445:return al(t);case 466:return rl(t);default:return Ti(t,"base16")}}function qa(e,t){const n=Ha(e);switch(n.code){case 4:return Ga(t);case 41:return Ga(t);case 42:return Xa(t);case 6:case 273:case 33:case 132:return Ja(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Xa(t);case 421:return tl(t);case 444:return sl(t);case 445:return il(t);case 466:return nl(t);default:return mi(t,"base16")}}const Wa=Object.values(Js).map((e=>e.decoder)),Ya=function(){let e=Wa[0].or(Wa[1]);return Wa.slice(2).forEach((t=>e=e.or(t))),e}();function Ga(e){if(!Ai(e))throw new Error("invalid ip address");return Ba(e)}function Za(e){const t=Ma(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ai(t))throw new Error("invalid ip address");return t}function Ja(e){const t=new ArrayBuffer(2),n=new DataView(t);return n.setUint16(0,e),new Uint8Array(t)}function Qa(e){const t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function Xa(e){const t=mi(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function el(e){const t=Fi.decode(e);if(e=e.slice(Fi.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Ti(e)}function tl(e){let t;t="Q"===e[0]||"1"===e[0]?nt(J.decode(`z${e}`)).bytes:lt.parse(e).multihash.bytes;const n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function nl(e){const t=Ya.decode(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function rl(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return"u"+Ti(n,"base64url")}function ol(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return Ti(n,"base58btc")}function sl(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=X.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=Ja(r);return ji([n,o],n.length+o.length)}function il(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=X.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=Ja(r);return ji([n,o],n.length+o.length)}function al(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2),r=Ti(t,"base32"),o=Qa(n);return`${r}:${o}`}function ll(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const o=n[r],s=Ha(o);if(0!==s.size){if(r++,r>=n.length)throw Sl("invalid address: "+e);if(!0===s.path){t.push([o,bl(n.slice(r).join("/"))]);break}t.push([o,n[r]])}else t.push([o])}return t}function cl(e){const t=[];return e.map((e=>{const n=_l(e);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),bl(t.join("/"))}function ul(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=_l(e);return e.length>1?[t.code,qa(t.code,e[1])]:[t.code]}))}function dl(e){return e.map((e=>{const t=_l(e);return null!=e[1]?[t.code,Ka(t.code,e[1])]:[t.code]}))}function hl(e){return vl(ji(e.map((e=>{const t=_l(e);let n=Uint8Array.from(Fi.encode(t.code));return e.length>1&&null!=e[1]&&(n=ji([n,e[1]])),n}))))}function pl(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=Fi.decode(t);return e+(Fi.decode.bytes??0)}}function fl(e){const t=[];let n=0;while(n<e.length){const r=Fi.decode(e,n),o=Fi.decode.bytes??0,s=Ha(r),i=pl(s,e.slice(n+o));if(0===i){t.push([r]),n+=o;continue}const a=e.slice(n+o,n+o+i);if(n+=i+o,n>e.length)throw Sl("Invalid address Uint8Array: "+Ti(e,"base16"));t.push([r,a])}return t}function gl(e){const t=fl(e),n=dl(t);return cl(n)}function ml(e){e=bl(e);const t=ll(e),n=ul(t);return hl(n)}function yl(e){return ml(e)}function vl(e){const t=wl(e);if(null!=t)throw t;return Uint8Array.from(e)}function wl(e){try{fl(e)}catch(ik){return ik}}function bl(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function Sl(e){return new Error("Error parsing address: "+e)}function _l(e){const t=Ha(e[0]);return t}var El,kl,Cl,Il,Al=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Tl=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};const Rl=Symbol.for("nodejs.util.inspect.custom"),xl=[Ha("dns").code,Ha("dns4").code,Ha("dns6").code,Ha("dnsaddr").code],Ol=new Map,Nl=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Pl(e){return Boolean(e?.[Nl])}class Dl{constructor(e){if(El.set(this,void 0),kl.set(this,void 0),Cl.set(this,void 0),this[Il]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=vl(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=yl(e)}else{if(!Pl(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=vl(e.bytes)}}toString(){return null==Al(this,El,"f")&&Tl(this,El,gl(this.bytes),"f"),Al(this,El,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";const s=Ha("tcp"),i=Ha("udp"),a=Ha("ip4"),l=Ha("ip6"),c=Ha("dns6"),u=Ha("ip6zone");for(const[h,p]of this.stringTuples())h===u.code&&(o=`%${p??""}`),xl.includes(h)&&(t=s.name,r=443,n=`${p??""}${o}`,e=h===c.code?6:4),h!==s.code&&h!==i.code||(t=Ha(h).name,r=parseInt(p??"")),h!==a.code&&h!==l.code||(t=Ha(h).name,n=`${p??""}${o}`,e=h===l.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const d={family:e,host:n,transport:t,port:r};return d}protos(){return this.protoCodes().map((e=>Object.assign({},Ha(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;while(n<t.length){const r=Fi.decode(t,n),o=Fi.decode.bytes??0,s=Ha(r),i=pl(s,t.slice(n+o));n+=i+o,e.push(r)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==Al(this,kl,"f")&&Tl(this,kl,fl(this.bytes),"f"),Al(this,kl,"f")}stringTuples(){return null==Al(this,Cl,"f")&&Tl(this,Cl,dl(this.tuples()),"f"),Al(this,Cl,"f")}encapsulate(e){return e=new Dl(e),new Dl(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Dl(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new Dl(hl(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===ja.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?Ti(J.decode(`z${e}`),"base58btc"):Ti(lt.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>{const t=Ha(e[0]);return!0===t.path}))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return wa(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=Ol.get(t.name);if(null==n)throw fe(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,e);return r.map((e=>new Dl(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(El=new WeakMap,kl=new WeakMap,Cl=new WeakMap,Il=Nl,Rl)](){return`Multiaddr(${gl(this.bytes)})`}}function Ul(e){return new Dl(e)}const Ll=cc("dns4"),Bl=cc("dns6"),Ml=cc("dnsaddr"),Fl=lc(cc("dns"),Ml,Ll,Bl),jl=lc(cc("ip4"),cc("ip6")),zl=lc(ac(jl,cc("tcp")),ac(Fl,cc("tcp"))),$l=ac(jl,cc("udp")),Vl=ac($l,cc("utp")),Hl=ac($l,cc("quic")),Kl=lc(ac(zl,cc("ws")),ac(Fl,cc("ws"))),ql=lc(ac(zl,cc("wss")),ac(Fl,cc("wss")),ac(zl,cc("tls"),cc("ws")),ac(Fl,cc("tls"),cc("ws"))),Wl=lc(ac(zl,cc("http")),ac(jl,cc("http")),ac(Fl,cc("http"))),Yl=lc(ac(zl,cc("https")),ac(jl,cc("https")),ac(Fl,cc("https"))),Gl=ac($l,cc("webrtc"),cc("certhash")),Zl=lc(ac(Gl,cc("p2p")),Gl),Jl=lc(ac(Kl,cc("p2p-webrtc-star"),cc("p2p")),ac(ql,cc("p2p-webrtc-star"),cc("p2p")),ac(Kl,cc("p2p-webrtc-star")),ac(ql,cc("p2p-webrtc-star"))),Ql=(lc(ac(Kl,cc("p2p-websocket-star"),cc("p2p")),ac(ql,cc("p2p-websocket-star"),cc("p2p")),ac(Kl,cc("p2p-websocket-star")),ac(ql,cc("p2p-websocket-star"))),lc(ac(Wl,cc("p2p-webrtc-direct"),cc("p2p")),ac(Yl,cc("p2p-webrtc-direct"),cc("p2p")),ac(Wl,cc("p2p-webrtc-direct")),ac(Yl,cc("p2p-webrtc-direct")))),Xl=lc(Kl,ql,Wl,Yl,Jl,Ql,zl,Vl,Hl,Fl,Zl),ec=(lc(ac(Xl,cc("p2p-stardust"),cc("p2p")),ac(Xl,cc("p2p-stardust"))),lc(ac(Xl,cc("p2p")),Jl,Ql,Zl,cc("p2p"))),tc=lc(ac(ec,cc("p2p-circuit"),ec),ac(ec,cc("p2p-circuit")),ac(cc("p2p-circuit"),ec),ac(Xl,cc("p2p-circuit")),ac(cc("p2p-circuit"),Xl),cc("p2p-circuit")),nc=()=>lc(ac(tc,nc),tc),rc=nc(),oc=lc(ac(rc,ec,rc),ac(ec,rc),ac(rc,ec),rc,ec),sc=oc;function ic(e){function t(t){let n;try{n=Ul(t)}catch(ik){return!1}const r=e(n.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}return t}function ac(...e){function t(t){if(t.length<e.length)return null;let n=t;return e.some((e=>(n="function"===typeof e?e().partialMatch(t):e.partialMatch(t),Array.isArray(n)&&(t=n),null===n))),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:ic(t),partialMatch:t}}function lc(...e){function t(t){let n=null;return e.some((e=>{const r="function"===typeof e?e().partialMatch(t):e.partialMatch(t);return null!=r&&(n=r,!0)})),n}const n={toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:ic(t),partialMatch:t};return n}function cc(e){const t=e;function n(e){let n;try{n=Ul(e)}catch(ik){return!1}const r=n.protoNames();return 1===r.length&&r[0]===t}function r(e){return 0===e.length?null:e[0]===t?e.slice(1):null}return{toString:function(){return t},matches:n,partialMatch:r}}var uc=n(7745);const dc=/^\/(ip[fn]s)\/([^/?#]+)/,hc=1,pc=2,fc=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,gc=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function mc(e){try{return wc(e)?Boolean(lt.parse(e)):e instanceof Uint8Array?Boolean(lt.decode(e)):Boolean(lt.asCID(e))}catch{return!1}}function yc(e,t,n=hc,r=pc){const o=bc(e);if(!1===o)return!1;const s=o.match(t);if(null==s)return!1;if("ipfs"!==s[n])return!1;let i=s[r];return null!=i&&t===fc&&(i=i.toLowerCase()),mc(i)}function vc(e,t,n=hc,r=pc){const o=bc(e);if(!1===o)return!1;const s=o.match(t);if(null==s)return!1;if("ipns"!==s[n])return!1;let i=s[r];if(null!=i&&t===fc){if(i=i.toLowerCase(),mc(i))return!0;try{!i.includes(".")&&i.includes("-")&&(i=i.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:e}=new uc.URL(`http://${i}`);return gc.test(e)}catch(a){return!1}}return!0}function wc(e){return"string"===typeof e}function bc(e){return e instanceof Uint8Array?Ti(e,"base58btc"):!!wc(e)&&e}const Sc=e=>yc(e,dc)||vc(e,dc),_c=e=>yc(e,dc),Ec=e=>vc(e,dc);let kc=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>(t&=63,e+=t<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_",e)),"");const Cc="/",Ic=(new TextEncoder).encode(Cc),Ac=Ic[0];class Tc{constructor(e,t){if("string"===typeof e)this._buf=mi(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==Ac)throw new Error("Invalid key")}toString(e="utf8"){return Ti(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Tc(e.join(Cc))}static random(){return new Tc(kc().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||"string"===typeof e?new Tc(e):"function"===typeof e.uint8Array?new Tc(e.uint8Array()):null}clean(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=Ic),this._buf[0]!==Ac){const e=new Uint8Array(this._buf.byteLength+1);e.fill(Ac,0,1),e.set(this._buf,1),this._buf=e}while(this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Ac)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),n=e.list();for(let r=0;r<t.length;r++){if(n.length<r+1)return!1;const e=t[r],o=n[r];if(e<o)return!0;if(e>o)return!1}return t.length<n.length}reverse(){return Tc.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Cc).slice(1)}type(){return Rc(this.baseNamespace())}name(){return xc(this.baseNamespace())}instance(e){return new Tc(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Cc)||(e+=Cc),e+=this.type(),new Tc(e)}parent(){const e=this.list();return 1===e.length?new Tc(Cc):new Tc(e.slice(0,-1).join(Cc))}child(e){return this.toString()===Cc?e:e.toString()===Cc?this:new Tc(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(...e){return Tc.withNamespaces([...this.namespaces(),...Oc(e.map((e=>e.namespaces())))])}}function Rc(e){const t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function xc(e){const t=e.split(":");return t[t.length-1]}function Oc(e){return[].concat(...e)}var Nc=n(2044);let Pc=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function Dc(e="",t="ms"){var n=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(Pc,(function(e,t,r){r=Uc(r),r&&(n=(n||0)+parseFloat(t,10)*r)})),n&&n/(Uc(t)||1)}function Uc(e){return Dc[e]||Dc[e.toLowerCase().replace(/s$/,"")]}Dc.nanosecond=Dc.ns=1e-6,Dc["s"]=Dc["s"]=Dc.us=Dc.microsecond=.001,Dc.millisecond=Dc.ms=Dc[""]=1,Dc.second=Dc.sec=Dc.s=1e3*Dc.ms,Dc.minute=Dc.min=Dc.m=60*Dc.s,Dc.hour=Dc.hr=Dc.h=60*Dc.m,Dc.day=Dc.d=24*Dc.h,Dc.week=Dc.wk=Dc.w=7*Dc.d,Dc.month=Dc.b=30.4375*Dc.d,Dc.year=Dc.yr=Dc.y=365.25*Dc.d;var Lc=Dc;class Bc extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=Bc.code}}function Mc(e,t){return(...n)=>{const r=n[null==t?n.length-1:t];if(!r||!r.timeout)return e(...n);const o="string"===typeof r.timeout?Lc(r.timeout):r.timeout,s=new yi.TimeoutController(o);r.signal=(0,Nc.anySignal)([r.signal,s.signal]);const i=e(...n),a=new Promise(((e,t)=>{s.signal.addEventListener("abort",(()=>{t(new Bc)}))})),l=Date.now(),c=()=>{if(s.signal.aborted)throw new Bc;const e=Date.now()-l;if(e>o)throw s.abort(),new Bc};return i[Symbol.asyncIterator]?async function*(){const e=i[Symbol.asyncIterator]();try{while(1){const{value:t,done:n}=await Promise.race([e.next(),a]);if(n)break;c(),yield t}}catch(ik){throw c(),ik}finally{s.clear(),e.return&&e.return()}}():(async()=>{try{const e=await Promise.race([i,a]);return c(),e}catch(ik){throw c(),ik}finally{s.clear()}})()}}Bc.code="ERR_TIMEOUT";const Fc="/ipfs/";function jc(e){if(e instanceof Uint8Array)try{e=lt.decode(e)}catch(ik){throw fe(ik,"ERR_INVALID_CID")}let t=lt.asCID(e);if(t)return{cid:t,path:void 0};e=e.toString(),e.startsWith(Fc)&&(e=e.substring(Fc.length));const n=e.split("/");let r;try{t=lt.parse(n.shift()||"")}catch(ik){throw fe(ik,"ERR_INVALID_CID")}return n.length&&(r=`/${n.join("/")}`),{cid:t,path:r}}const zc="ERR_BAD_PATH",$c="This command must be run in online mode. Try running 'ipfs daemon' first.",Vc=new Tc("/local/filesroot"),Hc=262144,Kc=e=>{const t=lt.asCID(e);if(t)return`/ipfs/${e}`;const n=e.toString();try{return`/ipfs/${lt.parse(n)}`}catch{}if(Sc(n))return n;throw fe(new Error(`invalid path: ${e}`),zc)},qc=e=>e instanceof Uint8Array?lt.decode(e).toString():(e=e.toString(),0===e.indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),Wc=async function(e,t,n,r={}){const{cid:o,path:s}=jc(n);s&&(r.path=s);let i=o,a=r.path||"";if(a.startsWith("/")&&(a=a.substring(1)),r.path)try{for await(const{value:n,remainderPath:s}of Zc(o,r.path,t,e,{signal:r.signal})){if(!lt.asCID(n))break;a=s,i=n}}catch(ik){throw ik.message.startsWith("Object has no property")&&(ik.message=`no link named "${a.split("/")[0]}" under ${i}`,ik.code="ERR_NO_LINK"),ik}return{cid:i,remainderPath:a||""}},Yc=e=>{if("file"!==e.type&&"directory"!==e.type&&"raw"!==e.type)throw new Error(`Unknown node type '${e.type}'`);const t={cid:e.cid,path:e.path,name:e.name,size:e.size,type:"file"};return"directory"===e.type&&(t.type="dir"),"file"===e.type&&(t.size=e.unixfs.fileSize()),"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,void 0!==e.unixfs.mtime&&(t.mtime=e.unixfs.mtime)),t},Gc=Mc((async(e,t)=>await e)),Zc=async function*(e,t,n,r,o){const s=async e=>{const t=await n.getCodec(e.code),s=await r.blocks.get(e,o);return t.decode(s)},i=t.split("/").filter(Boolean);let a=await s(e),l=e;while(i.length){const n=i.shift();if(!n)throw fe(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(e.code===Ht&&Array.isArray(a.Links)){const e=a.Links.find((e=>e.Name===n));if(e){yield{value:e.Hash,remainderPath:i.join("/")},a=await s(e.Hash),l=e.Hash;continue}}if(!Object.prototype.hasOwnProperty.call(a,n))throw fe(new Error(`no link named "${n}" under ${l}`),"ERR_NO_LINK");a=a[n],yield{value:a,remainderPath:i.join("/")},lt.asCID(a)&&(l=a,a=await s(a))}yield{value:a,remainderPath:""}};class Jc{static create({start:e,stop:t}){return new Jc(e,t)}static async start(e,t){const{state:n,activate:r}=e;switch(n.status){case"stopped":try{const n=r(t);e.state={status:"starting",ready:n};const o=await n;return e.state={status:"started",value:o},o}catch(o){throw e.state={status:"stopped"},o}case"starting":throw new si;case"started":throw new ii;case"stopping":return await n.ready,await Jc.start(e,t);default:return Jc.panic(e)}}static async stop(e){const{state:t,deactivate:n}=e;switch(t.status){case"stopped":break;case"starting":try{await t.ready}catch(r){}return await Jc.stop(e);case"stopping":return await t.ready;case"started":n&&await n(t.value),e.state={status:"stopped"};break;default:Jc.panic(t)}}static try({state:e}){switch(e.status){case"started":return e.value;default:return null}}static async use({state:e},t){switch(e.status){case"started":return e.value;case"starting":return await Gc(e.ready,t);default:throw new oi}}static panic({state:e}){const t=JSON.stringify({status:e.status});throw RangeError(`Service in invalid state ${t}, should never happen if you see this please report a bug`)}constructor(e,t){this.activate=e,this.deactivate=t,this.state={status:"stopped"}}async use(e){return await Jc.use(this,e)}try(){return Jc.try(this)}}function Qc({network:e,preload:t,peerId:n,keychain:r,repo:o,ipns:s,mfsPreload:i,print:a,hashers:l,options:c}){const u=async()=>{const{libp2p:u}=await Jc.start(e,{peerId:n,repo:o,print:a,hashers:l,options:c});await Promise.all([s.startOnline({keychain:r,libp2p:u,peerId:n,repo:o}),t.start(),i.start()])};return u}function Xc({network:e,preload:t,ipns:n,repo:r,mfsPreload:o}){const s=async()=>{await Promise.all([t.stop(),n.stop(),o.stop()]),await Jc.stop(e),await r.close()};return s}var eu=n(248);class tu{constructor(e){this.lru=eu(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,n){this.lru.set(e,{value:t,expire:Date.now()+n})}has(e){const t=this.get(e);return!!t}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}var nu=n(6729);class ru extends Error{constructor(e){super(e),this.name="TimeoutError"}}class ou extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const su=e=>void 0===globalThis.DOMException?new ou(e):new DOMException(e),iu=e=>{const t=void 0===e.reason?su("This operation was aborted."):e.reason;return t instanceof Error?t:su(t)};function au(e,t,n,r){let o;const s=new Promise(((s,i)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if(r={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...r},r.signal){const{signal:e}=r;e.aborted&&i(iu(e)),e.addEventListener("abort",(()=>{i(iu(e))}))}o=r.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof n){try{s(n())}catch(a){i(a)}return}const r="string"===typeof n?n:`Promise timed out after ${t} milliseconds`,o=n instanceof Error?n:new ru(r);"function"===typeof e.cancel&&e.cancel(),i(o)}),t),(async()=>{try{s(await e)}catch(t){i(t)}finally{r.customTimers.clearTimeout.call(void 0,o)}})()}else s(e)}));return s.clear=()=>{clearTimeout(o),o=void 0},s}function lu(e,t,n){let r=0,o=e.length;while(o>0){const s=Math.trunc(o/2);let i=r+s;n(e[i],t)<=0?(r=++i,o-=s+1):o=s}return r}var cu,uu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class du{constructor(){cu.set(this,[])}enqueue(e,t){t={priority:0,...t};const n={priority:t.priority,run:e};if(this.size&&uu(this,cu,"f")[this.size-1].priority>=t.priority)return void uu(this,cu,"f").push(n);const r=lu(uu(this,cu,"f"),n,((e,t)=>t.priority-e.priority));uu(this,cu,"f").splice(r,0,n)}dequeue(){const e=uu(this,cu,"f").shift();return null===e||void 0===e?void 0:e.run}filter(e){return uu(this,cu,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return uu(this,cu,"f").length}}cu=new WeakMap;var hu,pu,fu,gu,mu,yu,vu,wu,bu,Su,_u,Eu,ku,Cu,Iu,Au,Tu,Ru,xu,Ou,Nu,Pu,Du,Uu,Lu,Bu,Mu=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Fu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class ju extends Error{}class zu extends nu{constructor(e){var t,n,r,o;if(super(),hu.add(this),pu.set(this,void 0),fu.set(this,void 0),gu.set(this,0),mu.set(this,void 0),yu.set(this,void 0),vu.set(this,0),wu.set(this,void 0),bu.set(this,void 0),Su.set(this,void 0),_u.set(this,void 0),Eu.set(this,0),ku.set(this,void 0),Cu.set(this,void 0),Iu.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:du,...e},!("number"===typeof e.intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);Mu(this,pu,e.carryoverConcurrencyCount,"f"),Mu(this,fu,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),Mu(this,mu,e.intervalCap,"f"),Mu(this,yu,e.interval,"f"),Mu(this,Su,new e.queueClass,"f"),Mu(this,_u,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Mu(this,Iu,!0===e.throwOnTimeout,"f"),Mu(this,Cu,!1===e.autoStart,"f")}get concurrency(){return Fu(this,ku,"f")}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Mu(this,ku,e,"f"),Fu(this,hu,"m",Uu).call(this)}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:Fu(this,Iu,"f"),...t},new Promise(((n,r)=>{Fu(this,Su,"f").enqueue((async()=>{var o,s,i;Mu(this,Eu,(s=Fu(this,Eu,"f"),s++,s),"f"),Mu(this,gu,(i=Fu(this,gu,"f"),i++,i),"f");try{if(null===(o=t.signal)||void 0===o?void 0:o.aborted)throw new ju("The task was aborted.");let r=e({signal:t.signal});t.timeout&&(r=au(Promise.resolve(r),t.timeout)),t.signal&&(r=Promise.race([r,Fu(this,hu,"m",Lu).call(this,t.signal)]));const s=await r;n(s),this.emit("completed",s)}catch(a){if(a instanceof ru&&!t.throwOnTimeout)return void n();r(a),this.emit("error",a)}finally{Fu(this,hu,"m",Ru).call(this)}}),t),this.emit("add"),Fu(this,hu,"m",Nu).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return Fu(this,Cu,"f")?(Mu(this,Cu,!1,"f"),Fu(this,hu,"m",Uu).call(this),this):this}pause(){Mu(this,Cu,!0,"f")}clear(){Mu(this,Su,new(Fu(this,_u,"f")),"f")}async onEmpty(){0!==Fu(this,Su,"f").size&&await Fu(this,hu,"m",Bu).call(this,"empty")}async onSizeLessThan(e){Fu(this,Su,"f").size<e||await Fu(this,hu,"m",Bu).call(this,"next",(()=>Fu(this,Su,"f").size<e))}async onIdle(){0===Fu(this,Eu,"f")&&0===Fu(this,Su,"f").size||await Fu(this,hu,"m",Bu).call(this,"idle")}get size(){return Fu(this,Su,"f").size}sizeBy(e){return Fu(this,Su,"f").filter(e).length}get pending(){return Fu(this,Eu,"f")}get isPaused(){return Fu(this,Cu,"f")}}pu=new WeakMap,fu=new WeakMap,gu=new WeakMap,mu=new WeakMap,yu=new WeakMap,vu=new WeakMap,wu=new WeakMap,bu=new WeakMap,Su=new WeakMap,_u=new WeakMap,Eu=new WeakMap,ku=new WeakMap,Cu=new WeakMap,Iu=new WeakMap,hu=new WeakSet,Au=function(){return Fu(this,fu,"f")||Fu(this,gu,"f")<Fu(this,mu,"f")},Tu=function(){return Fu(this,Eu,"f")<Fu(this,ku,"f")},Ru=function(){var e;Mu(this,Eu,(e=Fu(this,Eu,"f"),e--,e),"f"),Fu(this,hu,"m",Nu).call(this),this.emit("next")},xu=function(){Fu(this,hu,"m",Du).call(this),Fu(this,hu,"m",Pu).call(this),Mu(this,bu,void 0,"f")},Ou=function(){const e=Date.now();if(void 0===Fu(this,wu,"f")){const t=Fu(this,vu,"f")-e;if(!(t<0))return void 0===Fu(this,bu,"f")&&Mu(this,bu,setTimeout((()=>{Fu(this,hu,"m",xu).call(this)}),t),"f"),!0;Mu(this,gu,Fu(this,pu,"f")?Fu(this,Eu,"f"):0,"f")}return!1},Nu=function(){if(0===Fu(this,Su,"f").size)return Fu(this,wu,"f")&&clearInterval(Fu(this,wu,"f")),Mu(this,wu,void 0,"f"),this.emit("empty"),0===Fu(this,Eu,"f")&&this.emit("idle"),!1;if(!Fu(this,Cu,"f")){const e=!Fu(this,hu,"a",Ou);if(Fu(this,hu,"a",Au)&&Fu(this,hu,"a",Tu)){const t=Fu(this,Su,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Fu(this,hu,"m",Pu).call(this),!0)}}return!1},Pu=function(){Fu(this,fu,"f")||void 0!==Fu(this,wu,"f")||(Mu(this,wu,setInterval((()=>{Fu(this,hu,"m",Du).call(this)}),Fu(this,yu,"f")),"f"),Mu(this,vu,Date.now()+Fu(this,yu,"f"),"f"))},Du=function(){0===Fu(this,gu,"f")&&0===Fu(this,Eu,"f")&&Fu(this,wu,"f")&&(clearInterval(Fu(this,wu,"f")),Mu(this,wu,void 0,"f")),Mu(this,gu,Fu(this,pu,"f")?Fu(this,Eu,"f"):0,"f"),Fu(this,hu,"m",Uu).call(this)},Uu=function(){while(Fu(this,hu,"m",Nu).call(this));},Lu=async function(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(new ju("The task was aborted."))}),{once:!0})}))},Bu=async function(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))};var $u=n(7137);const Vu=new tu(1e3),Hu=6e4,Ku=zu["default"]?zu["default"]:zu,qu=new Ku({concurrency:4}),Wu=e=>{if(e.Path)return e.Path;throw new Error(e.Message)};async function Yu(e,t){const n=async(e,t={})=>{const n=new URLSearchParams(t);n.set("arg",e);const r=n.toString();if(!t.nocache&&Vu.has(r)){const e=Vu.get(r);return Wu(e)}const o=await qu.add((async()=>{const e=await $u.get("https://ipfs.io/api/v0/dns",{searchParams:n}),t=new URL(e.url).search.slice(1),r=await e.json();return Vu.set(t,r,Hu),r}));return Wu(o)};return n(e,t)}function Gu(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}function Zu(){const e=async(e,t={recursive:!0})=>{if("string"!==typeof e)throw new Error("Invalid arguments, domain must be a string");return e=Gu(e),Yu(e,t)};return Mc(e)}function Ju({network:e}){return()=>{const t=e.try();return null!=t&&Boolean(t.libp2p.isStarted())}}class Qu extends Error{constructor(e="The operation was aborted"){super(e),this.code=Qu.code,this.type=Qu.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}}class Xu extends Error{constructor(e,t,n){super(e),this.code=t,this.name=n?.name??"CodeError",this.props=n??{}}}const ed=Symbol.for("@libp2p/peer-id");function td(e){return null!=e&&Boolean(e[ed])}const nd=Symbol.for("nodejs.util.inspect.custom"),rd=Object.values(Js).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),Js.identity.decoder),od=114,sd=36,id=37;class ad{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[ed](){return!0}toString(){return null==this.string&&(this.string=J.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return lt.createV1(od,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return wa(this.multihash.bytes,e);if("string"===typeof e)return hd(e).equals(this);if(null!=e?.multihash?.bytes)return wa(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[nd](){return`PeerId(${this.toString()})`}}class ld extends ad{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}}class cd extends ad{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}}class ud extends ad{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}}function dd(e){if("RSA"===e.type)return new ld(e);if("Ed25519"===e.type)return new cd(e);if("secp256k1"===e.type)return new ud(e);throw new Xu("Not a PeerId","ERR_INVALID_PARAMETERS")}function hd(e,t){if(t=t??rd,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=nt(J.decode(`z${e}`));return e.startsWith("12D")?new cd({multihash:t}):e.startsWith("16U")?new ud({multihash:t}):new ld({multihash:t})}return pd(rd.decode(e))}function pd(e){try{const t=nt(e);if(t.code===Es.code){if(t.digest.length===sd)return new cd({multihash:t});if(t.digest.length===id)return new ud({multihash:t})}if(t.code===Fs.code)return new ld({multihash:t})}catch{return fd(lt.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function fd(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&e.code!==od)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===Fs.code)return new ld({multihash:e.multihash});if(t.code===Es.code){if(t.digest.length===sd)return new cd({multihash:e.multihash});if(t.digest.length===id)return new ud({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function gd(e,t){return e.length===sd?new cd({multihash:tt(Es.code,e),privateKey:t}):e.length===id?new ud({multihash:tt(Es.code,e),privateKey:t}):new ld({multihash:await Fs.digest(e),publicKey:e,privateKey:t})}function md({repo:e,codecs:t,bases:n,name:r}){async function o(o,s={}){if(!Sc(o))throw new Error("invalid argument "+o);if(Ec(o))for await(const e of r.resolve(o,s))o=e;const[,i,a,...l]=o.split("/"),c=s.cidBase?await n.getBase(s.cidBase):void 0,u=yd(a);if(0===l.length){const e=c?c.encoder.encode(u):a;return`/${i}/${e}`}const d=lt.decode(u);o=l.join("/");const h=Zc(d,o,t,e,s);let p=d,f=o;for await(const e of h)lt.asCID(e.value)&&(p=e.value,f=e.remainderPath);return`/ipfs/${p.toString(c&&c.encoder)}${f?"/"+f:""}`}return Mc(o)}function yd(e){try{return hd(e).toBytes()}catch{return lt.parse(e).bytes}}async function vd(e){let t;for await(const n of e)t=n;return t}function wd({addAll:e}){return(t,n={})=>{let r;const o=lt.asCID(t);return r=e(o?[{cid:o,...n}]:[{path:t.toString(),...n}],n),vd(r)}}function bd(e){return Symbol.iterator in e}function Sd(e){return Symbol.asyncIterator in e}function _d(e){return null!=lt.asCID(e)}async function*Ed(e){if(null===e||void 0===e)throw fe(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");const t=lt.asCID(e);if(t)yield kd({cid:t});else{if(!(e instanceof String||"string"===typeof e)){if(null!=e.cid||null!=e.path)return yield kd(e);if(bd(e)){const t=e[Symbol.iterator](),n=t.next();if(n.done)return t;if(_d(n.value)){yield kd({cid:n.value});for(const e of t)yield kd({cid:e});return}if(n.value instanceof String||"string"===typeof n.value){yield kd({path:n.value});for(const e of t)yield kd({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield kd(n.value);for(const e of t)yield kd(e);return}throw fe(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Sd(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done)return t;if(_d(n.value)){yield kd({cid:n.value});for await(const e of t)yield kd({cid:e});return}if(n.value instanceof String||"string"===typeof n.value){yield kd({path:n.value});for await(const e of t)yield kd({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield kd(n.value);for await(const e of t)yield kd(e);return}throw fe(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw fe(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}yield kd({path:e})}}function kd(e){const t=e.cid||`${e.path}`;if(!t)throw fe(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const n={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(n.metadata=e.metadata),n}const Cd={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function Id({repo:e,codecs:t}){async function*n(n,r={}){const o=async function*(){for await(const{path:r,recursive:o,metadata:s}of Ed(n)){const{cid:n}=await Wc(e,t,r),{reason:i}=await e.pins.isPinnedWithType(n,[Cd.recursive,Cd.direct]);if("recursive"===i&&!o)throw new Error(`${n} already pinned recursively`);o?await e.pins.pinRecursively(n,{metadata:s}):await e.pins.pinDirectly(n,{metadata:s}),yield n}},s=Boolean(r.lock);if(!s)return void(yield*o());const i=await e.gcLock.readLock();try{yield*o()}finally{i()}}return Mc(n)}function Ad(e,t,n){const r={type:e,cid:t};return n&&(r.metadata=n),r}function Td({repo:e,codecs:t}){async function*n(n={}){let r=Cd.all;if(n.type&&(r=n.type,!Object.keys(Cd).includes(r)))throw fe(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(n.paths){let o=!1;for await(const{path:s}of Ed(n.paths)){const{cid:n}=await Wc(e,t,s),{reason:i,pinned:a,parent:l,metadata:c}=await e.pins.isPinnedWithType(n,r);if(!a)throw fe(new Error(`path '${s}' is not pinned`),"ERR_NOT_PINNED");switch(i){case Cd.direct:case Cd.recursive:o=!0,yield Ad(i,n,c);break;default:o=!0,yield Ad(`${Cd.indirect} through ${l}`,n,c)}}if(!o)throw new Error("No match found")}else{if(r===Cd.recursive||r===Cd.all)for await(const{cid:t,metadata:n}of e.pins.recursiveKeys())yield Ad(Cd.recursive,t,n);if(r===Cd.indirect||r===Cd.all)for await(const t of e.pins.indirectKeys(n))yield Ad(Cd.indirect,t);if(r===Cd.direct||r===Cd.all)for await(const{cid:t,metadata:n}of e.pins.directKeys())yield Ad(Cd.direct,t,n)}}return Mc(n)}function Rd({rmAll:e}){async function t(t,n={}){const r=await vd(e([{path:t,...n}],n));if(!r)throw new Error("CID expected");return r}return t}function xd({repo:e,codecs:t}){async function*n(n,r={}){const o=await e.gcLock.readLock();try{for await(const{path:r,recursive:o}of Ed(n)){const{cid:n}=await Wc(e,t,r),{pinned:s,reason:i}=await e.pins.isPinnedWithType(n,Cd.all);if(!s)throw new Error(`${n} is not pinned`);switch(i){case Cd.recursive:if(!o)throw new Error(`${n} is pinned recursively`);await e.pins.unpin(n),yield n;break;case Cd.direct:await e.pins.unpin(n),yield n;break;default:throw new Error(`${n} is pinned indirectly under ${i}`)}}}finally{o()}}return Mc(n)}class Od{constructor({codecs:e,repo:t}){const n=Id({codecs:e,repo:t});this.addAll=n,this.add=wd({addAll:n});const r=xd({codecs:e,repo:t});this.rmAll=r,this.rm=Rd({rmAll:r}),this.ls=Td({codecs:e,repo:t}),this.remote={add:(e,t={})=>Promise.reject(new Error("Not implemented")),ls:async function*(e,t={}){return Promise.reject(new Error("Not implemented"))},rm:(e,t={})=>Promise.reject(new Error("Not implemented")),rmAll:(e,t={})=>Promise.reject(new Error("Not implemented")),service:{add:(e,t)=>Promise.reject(new Error("Not implemented")),rm:(e,t={})=>Promise.reject(new Error("Not implemented")),ls:(e={})=>Promise.reject(new Error("Not implemented"))}}}}function Nd(e){return e=e||new Error("Cannot open database"),fe(e,"ERR_DB_OPEN_FAILED")}function Pd(e){return e=e||new Error("Delete failed"),fe(e,"ERR_DB_DELETE_FAILED")}function Dd(e){return e=e||new Error("Write failed"),fe(e,"ERR_DB_WRITE_FAILED")}function Ud(e){return e=e||new Error("Not Found"),fe(e,"ERR_NOT_FOUND")}var Ld=n(9297),Bd=n(1408),Md=n(593),Fd=n(9693),jd=n(1173),zd=n(3155);function $d(){Fd._configure(),Bd._configure(Md),jd._configure(zd)}$d();const Vd=["uint64","int64","sint64","fixed64","sfixed64"];function Hd(e){for(const t of Vd){if(null==e[t])continue;const n=e[t];e[t]=function(){return BigInt(n.call(this).toString())}}return e}function Kd(e){return Hd(new Bd(e))}function qd(e){for(const t of Vd){if(null==e[t])continue;const n=e[t];e[t]=function(e){return n.call(this,e.toString())}}return e}function Wd(){return qd(jd.create())}function Yd(e,t){const n=Kd(e instanceof Uint8Array?e:e.subarray());return t.decode(n)}function Gd(e,t){const n=Wd();return t.encode(e,n,{lengthDelimited:!1}),n.finish()}var Zd,Jd,Qd,Xd,eh;function th(e,t,n,r){return{name:e,type:t,encode:n,decode:r}}function nh(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}const n=function(e,n){const r=t(e);n.int32(r)},r=function(e){const n=e.int32();return t(n)};return th("enum",Zd.VARINT,n,r)}function rh(e,t){return th("message",Zd.LENGTH_DELIMITED,e,t)}(function(e){e[e["VARINT"]=0]="VARINT",e[e["BIT64"]=1]="BIT64",e[e["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",e[e["START_GROUP"]=3]="START_GROUP",e[e["END_GROUP"]=4]="END_GROUP",e[e["BIT32"]=5]="BIT32"})(Zd||(Zd={})),function(e){e["RSA"]="RSA",e["Ed25519"]="Ed25519",e["Secp256k1"]="Secp256k1"}(Jd||(Jd={})),function(e){e[e["RSA"]=0]="RSA",e[e["Ed25519"]=1]="Ed25519",e[e["Secp256k1"]=2]="Secp256k1"}(Qd||(Qd={})),function(e){e.codec=()=>nh(Qd)}(Jd||(Jd={})),function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),Jd.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.Type=Jd.codec().decode(e);break;case 2:n.Data=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())}(Xd||(Xd={})),function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),Jd.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.Type=Jd.codec().decode(e);break;case 2:n.Data=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())}(eh||(eh={}));n(3068),n(7450);var oh=n(3832),sh={get(e=globalThis){const t=e.crypto;if(null==t||null==t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};var ih=n(7116);n(5764);function ah(e,t){let n=Uint8Array.from(e.abs().toByteArray());if(n=0===n[0]?n.subarray(1):n,null!=t){if(n.length>t)throw new Error("byte array longer than desired length");n=ji([new Uint8Array(t-n.length),n])}return Ti(n,"base64url")}function lh(e){const t=ch(e);return new oh.jsbn.BigInteger(Ti(t,"base16"),16)}function ch(e,t){let n=mi(e,"base64urlpad");if(null!=t){if(n.length>t)throw new Error("byte array longer than desired length");n=ji([new Uint8Array(t-n.length),n])}return n}const uh={"P-256":256,"P-384":384,"P-521":521},dh=Object.keys(uh);dh.join(" / ");function hh(e){const t=e?.algorithm??"AES-GCM";let n=e?.keyLength??16;const r=e?.nonceLength??12,o=e?.digest??"SHA-256",s=e?.saltLength??16,i=e?.iterations??32767,a=sh.get();async function l(e,l){const c=a.getRandomValues(new Uint8Array(s)),u=a.getRandomValues(new Uint8Array(r)),d={name:t,iv:u};"string"===typeof l&&(l=mi(l));const h={name:"PBKDF2",salt:c,iterations:i,hash:{name:o}},p=await a.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),f=await a.subtle.deriveKey(h,p,{name:t,length:n},!0,["encrypt"]),g=await a.subtle.encrypt(d,f,e);return ji([c,d.iv,new Uint8Array(g)])}async function c(e,l){const c=e.subarray(0,s),u=e.subarray(s,s+r),d=e.subarray(s+r),h={name:t,iv:u};"string"===typeof l&&(l=mi(l));const p={name:"PBKDF2",salt:c,iterations:i,hash:{name:o}},f=await a.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await a.subtle.deriveKey(p,f,{name:t,length:n},!0,["decrypt"]),m=await a.subtle.decrypt(h,g,d);return new Uint8Array(m)}n*=8;const u={encrypt:l,decrypt:c};return u}async function ph(e,t){const n=le.decode(e),r=hh();return await r.decrypt(n,t)}n(3219);var fh=n(5856),gh=n.t(fh,2);
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const mh=BigInt(0),yh=BigInt(1),vh=BigInt(2),wh=BigInt(3),bh=BigInt(8),Sh=Object.freeze({a:mh,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:yh,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),_h=(e,t)=>(e+t/vh)/t,Eh={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=Sh,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-yh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,i=BigInt("0x100000000000000000000000000000000"),a=_h(s*e,t),l=_h(-r*e,t);let c=Xh(e-a*n-l*o,t),u=Xh(-a*r-l*s,t);const d=c>i,h=u>i;if(d&&(c=t-c),h&&(u=t-u),c>i||u>i)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:d,k1:c,k2neg:h,k2:u}}},kh=32,Ch=32,Ih=32,Ah=kh+1,Th=2*kh+1;function Rh(e){const{a:t,b:n}=Sh,r=Xh(e*e),o=Xh(r*e);return Xh(o+t*e+n)}const xh=Sh.a===mh;class Oh extends Error{constructor(e){super(e)}}function Nh(e){if(!(e instanceof Ph))throw new TypeError("JacobianPoint expected")}class Ph{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof Lh))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Lh.ZERO)?Ph.ZERO:new Ph(e.x,e.y,yh)}static toAffineBatch(e){const t=rp(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return Ph.toAffineBatch(e).map(Ph.fromAffine)}equals(e){Nh(e);const{x:t,y:n,z:r}=this,{x:o,y:s,z:i}=e,a=Xh(r*r),l=Xh(i*i),c=Xh(t*l),u=Xh(o*a),d=Xh(Xh(n*i)*l),h=Xh(Xh(s*r)*a);return c===u&&d===h}negate(){return new Ph(this.x,Xh(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,r=Xh(e*e),o=Xh(t*t),s=Xh(o*o),i=e+o,a=Xh(vh*(Xh(i*i)-r-s)),l=Xh(wh*r),c=Xh(l*l),u=Xh(c-vh*a),d=Xh(l*(a-u)-bh*s),h=Xh(vh*t*n);return new Ph(u,d,h)}add(e){Nh(e);const{x:t,y:n,z:r}=this,{x:o,y:s,z:i}=e;if(o===mh||s===mh)return this;if(t===mh||n===mh)return e;const a=Xh(r*r),l=Xh(i*i),c=Xh(t*l),u=Xh(o*a),d=Xh(Xh(n*i)*l),h=Xh(Xh(s*r)*a),p=Xh(u-c),f=Xh(h-d);if(p===mh)return f===mh?this.double():Ph.ZERO;const g=Xh(p*p),m=Xh(p*g),y=Xh(c*g),v=Xh(f*f-m-vh*y),w=Xh(f*(y-v)-d*m),b=Xh(r*i*p);return new Ph(v,w,b)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=Ph.ZERO;if("bigint"===typeof e&&e===mh)return t;let n=Qh(e);if(n===yh)return this;if(!xh){let e=t,r=this;while(n>mh)n&yh&&(e=e.add(r)),r=r.double(),n>>=yh;return e}let{k1neg:r,k1:o,k2neg:s,k2:i}=Eh.splitScalar(n),a=t,l=t,c=this;while(o>mh||i>mh)o&yh&&(a=a.add(c)),i&yh&&(l=l.add(c)),c=c.double(),o>>=yh,i>>=yh;return r&&(a=a.negate()),s&&(l=l.negate()),l=new Ph(Xh(l.x*Eh.beta),l.y,l.z),a.add(l)}precomputeWindow(e){const t=xh?128/e+1:256/e+1,n=[];let r=this,o=r;for(let s=0;s<t;s++){o=r,n.push(o);for(let t=1;t<2**(e-1);t++)o=o.add(r),n.push(o);r=o.double()}return n}wNAF(e,t){!t&&this.equals(Ph.BASE)&&(t=Lh.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=t&&Uh.get(t);r||(r=this.precomputeWindow(n),t&&1!==n&&(r=Ph.normalizeZ(r),Uh.set(t,r)));let o=Ph.ZERO,s=Ph.BASE;const i=1+(xh?128/n:256/n),a=2**(n-1),l=BigInt(2**n-1),c=2**n,u=BigInt(n);for(let d=0;d<i;d++){const t=d*a;let n=Number(e&l);e>>=u,n>a&&(n-=c,e+=yh);const i=t,h=t+Math.abs(n)-1,p=d%2!==0,f=n<0;0===n?s=s.add(Dh(p,r[i])):o=o.add(Dh(f,r[h]))}return{p:o,f:s}}multiply(e,t){let n,r,o=Qh(e);if(xh){const{k1neg:e,k1:s,k2neg:i,k2:a}=Eh.splitScalar(o);let{p:l,f:c}=this.wNAF(s,t),{p:u,f:d}=this.wNAF(a,t);l=Dh(e,l),u=Dh(i,u),u=new Ph(Xh(u.x*Eh.beta),u.y,u.z),n=l.add(u),r=c.add(d)}else{const{p:e,f:s}=this.wNAF(o,t);n=e,r=s}return Ph.normalizeZ([n,r])[0]}toAffine(e){const{x:t,y:n,z:r}=this,o=this.equals(Ph.ZERO);null==e&&(e=o?bh:np(r));const s=e,i=Xh(s*s),a=Xh(i*s),l=Xh(t*i),c=Xh(n*a),u=Xh(r*s);if(o)return Lh.ZERO;if(u!==yh)throw new Error("invZ was invalid");return new Lh(l,c)}}function Dh(e,t){const n=t.negate();return e?n:t}Ph.BASE=new Ph(Sh.Gx,Sh.Gy,yh),Ph.ZERO=new Ph(mh,yh,mh);const Uh=new WeakMap;class Lh{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,Uh.delete(this)}hasEvenY(){return this.y%vh===mh}static fromCompressedHex(e){const t=32===e.length,n=Zh(t?e:e.subarray(1));if(!up(n))throw new Error("Point is not on curve");const r=Rh(n);let o=tp(r);const s=(o&yh)===yh;if(t)s&&(o=Xh(-o));else{const t=1===(1&e[0]);t!==s&&(o=Xh(-o))}const i=new Lh(n,o);return i.assertValidity(),i}static fromUncompressedHex(e){const t=Zh(e.subarray(1,kh+1)),n=Zh(e.subarray(kh+1,2*kh+1)),r=new Lh(t,n);return r.assertValidity(),r}static fromHex(e){const t=Jh(e),n=t.length,r=t[0];if(n===kh)return this.fromCompressedHex(t);if(n===Ah&&(2===r||3===r))return this.fromCompressedHex(t);if(n===Th&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Ah} compressed bytes or ${Th} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return Lh.BASE.multiply(hp(e))}static fromSignature(e,t,n){const{r:r,s:o}=fp(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const s=sp(Jh(e)),{n:i}=Sh,a=2===n||3===n?r+i:r,l=np(a,i),c=Xh(-s*l,i),u=Xh(o*l,i),d=1&n?"03":"02",h=Lh.fromHex(d+Kh(a)),p=Lh.BASE.multiplyAndAddUnsafe(h,c,u);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(e=!1){return Gh(this.toHex(e))}toHex(e=!1){const t=Kh(this.x);if(e){const e=this.hasEvenY()?"02":"03";return`${e}${t}`}return`04${t}${Kh(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!up(t)||!up(n))throw new Error(e);const r=Xh(n*n),o=Rh(t);if(Xh(r-o)!==mh)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Lh(this.x,Xh(-this.y))}double(){return Ph.fromAffine(this).double().toAffine()}add(e){return Ph.fromAffine(this).add(Ph.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Ph.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const r=Ph.fromAffine(this),o=t===mh||t===yh||this!==Lh.BASE?r.multiplyUnsafe(t):r.multiply(t),s=Ph.fromAffine(e).multiplyUnsafe(n),i=o.add(s);return i.equals(Ph.ZERO)?void 0:i.toAffine()}}function Bh(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Mh(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${Vh(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Zh(n),left:e.subarray(t+2)}}function Fh(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${Vh(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=Mh(e.subarray(2)),{data:r,left:o}=Mh(n);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${Vh(o)}`);return{r:t,s:r}}Lh.BASE=new Lh(Sh.Gx,Sh.Gy),Lh.ZERO=new Lh(mh,mh);class jh{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!==typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=t?Vh(e):e;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new jh(Yh(r.slice(0,64)),Yh(r.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!==typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=Fh(t?e:Gh(e));return new jh(n,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!cp(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!cp(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=Sh.n>>yh;return this.s>e}normalizeS(){return this.hasHighS()?new jh(this.r,Xh(-this.s,Sh.n)):this}toDERRawBytes(){return Gh(this.toDERHex())}toDERHex(){const e=Bh(Wh(this.s)),t=Bh(Wh(this.r)),n=e.length/2,r=t.length/2,o=Wh(n),s=Wh(r),i=Wh(r+n+4);return`30${i}02${s}${t}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Gh(this.toCompactHex())}toCompactHex(){return Kh(this.r)+Kh(this.s)}}function zh(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const t=e[r];n.set(t,o),o+=t.length}return n}const $h=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Vh(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=$h[e[n]];return t}const Hh=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Kh(e){if("bigint"!==typeof e)throw new Error("Expected bigint");if(!(mh<=e&&e<Hh))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function qh(e){const t=Gh(Kh(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function Wh(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Yh(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Gh(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,o=e.slice(r,r+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t}function Zh(e){return Yh(Vh(e))}function Jh(e){return e instanceof Uint8Array?Uint8Array.from(e):Gh(e)}function Qh(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&cp(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Xh(e,t=Sh.P){const n=e%t;return n>=mh?n:t+n}function ep(e,t){const{P:n}=Sh;let r=e;while(t-- >mh)r*=r,r%=n;return r}function tp(e){const{P:t}=Sh,n=BigInt(6),r=BigInt(11),o=BigInt(22),s=BigInt(23),i=BigInt(44),a=BigInt(88),l=e*e*e%t,c=l*l*e%t,u=ep(c,wh)*c%t,d=ep(u,wh)*c%t,h=ep(d,vh)*l%t,p=ep(h,r)*h%t,f=ep(p,o)*p%t,g=ep(f,i)*f%t,m=ep(g,a)*g%t,y=ep(m,i)*f%t,v=ep(y,wh)*c%t,w=ep(v,s)*p%t,b=ep(w,n)*l%t,S=ep(b,vh),_=S*S%t;if(_!==e)throw new Error("Cannot find square root");return S}function np(e,t=Sh.P){if(e===mh||t<=mh)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Xh(e,t),r=t,o=mh,s=yh,i=yh,a=mh;while(n!==mh){const e=r/n,t=r%n,l=o-i*e,c=s-a*e;r=n,n=t,o=i,s=a,i=l,a=c}const l=r;if(l!==yh)throw new Error("invert: does not exist");return Xh(o,t)}function rp(e,t=Sh.P){const n=new Array(e.length),r=e.reduce(((e,r,o)=>r===mh?e:(n[o]=e,Xh(e*r,t))),yh),o=np(r,t);return e.reduceRight(((e,r,o)=>r===mh?e:(n[o]=Xh(e*n[o],t),Xh(e*r,t))),o),n}function op(e){const t=8*e.length-8*Ch,n=Zh(e);return t>0?n>>BigInt(t):n}function sp(e,t=!1){const n=op(e);if(t)return n;const{n:r}=Sh;return n>=r?n-r:n}let ip,ap;class lp{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Ip.hmacSha256(this.k,...e)}hmacSync(...e){return ap(this.k,...e)}checkSync(){if("function"!==typeof ap)throw new Oh("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];while(e<this.qByteLen){this.v=await this.hmac(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return zh(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];while(e<this.qByteLen){this.v=this.hmacSync(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return zh(...t)}}function cp(e){return mh<e&&e<Sh.n}function up(e){return mh<e&&e<Sh.P}function dp(e,t,n,r=!0){const{n:o}=Sh,s=sp(e,!0);if(!cp(s))return;const i=np(s,o),a=Lh.BASE.multiply(s),l=Xh(a.x,o);if(l===mh)return;const c=Xh(i*Xh(t+n*l,o),o);if(c===mh)return;let u=new jh(l,c),d=(a.x===u.r?0:2)|Number(a.y&yh);return r&&u.hasHighS()&&(u=u.normalizeS(),d^=1),{sig:u,recovery:d}}function hp(e){let t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(e.length!==2*Ch)throw new Error("Expected 32 bytes of private key");t=Yh(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==Ch)throw new Error("Expected 32 bytes of private key");t=Zh(e)}if(!cp(t))throw new Error("Expected private key: 0 < key < n");return t}function pp(e){return e instanceof Lh?(e.assertValidity(),e):Lh.fromHex(e)}function fp(e){if(e instanceof jh)return e.assertValidity(),e;try{return jh.fromDER(e)}catch(t){return jh.fromCompact(e)}}function gp(e,t=!1){return Lh.fromPrivateKey(e).toRawBytes(t)}function mp(e){const t=e.length>kh?e.slice(0,kh):e;return Zh(t)}function yp(e){const t=mp(e),n=Xh(t,Sh.n);return vp(n<mh?t:n)}function vp(e){return qh(e)}function wp(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const r=Jh(e),o=hp(t),s=[vp(o),yp(r)];if(null!=n){!0===n&&(n=Ip.randomBytes(kh));const e=Jh(n);if(e.length!==kh)throw new Error(`sign: Expected ${kh} bytes of extra data`);s.push(e)}const i=zh(...s),a=mp(r);return{seed:i,m:a,d:o}}function bp(e,t){const{sig:n,recovery:r}=e,{der:o,recovered:s}=Object.assign({canonical:!0,der:!0},t),i=o?n.toDERRawBytes():n.toCompactRawBytes();return s?[i,r]:i}async function Sp(e,t,n={}){const{seed:r,m:o,d:s}=wp(e,t,n.extraEntropy),i=new lp(Ih,Ch);let a;await i.reseed(r);while(!(a=dp(await i.generate(),o,s,n.canonical)))await i.reseed();return bp(a,n)}const _p={strict:!0};function Ep(e,t,n,r=_p){let o;try{o=fp(e),t=Jh(t)}catch(g){return!1}const{r:s,s:i}=o;if(r.strict&&o.hasHighS())return!1;const a=sp(t);let l;try{l=pp(n)}catch(g){return!1}const{n:c}=Sh,u=np(i,c),d=Xh(a*u,c),h=Xh(s*u,c),p=Lh.BASE.multiplyAndAddUnsafe(l,d,h);if(!p)return!1;const f=Xh(p.x,c);return f===s}Lh.BASE._setWindowSize(8);const kp={node:gh,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Cp={},Ip={bytesToHex:Vh,hexToBytes:Gh,concatBytes:zh,mod:Xh,invert:np,isValidPrivateKey(e){try{return hp(e),!0}catch(t){return!1}},_bigintTo32Bytes:qh,_normalizePrivateKey:hp,hashToPrivateKey:e=>{e=Jh(e);const t=Ch+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=Xh(Zh(e),Sh.n-yh)+yh;return qh(n)},randomBytes:(e=32)=>{if(kp.web)return kp.web.getRandomValues(new Uint8Array(e));if(kp.node){const{randomBytes:t}=kp.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ip.hashToPrivateKey(Ip.randomBytes(Ch+8)),precompute(e=8,t=Lh.BASE){const n=t===Lh.BASE?t:new Lh(t.x,t.y);return n._setWindowSize(e),n.multiply(wh),n},sha256:async(...e)=>{if(kp.web){const t=await kp.web.subtle.digest("SHA-256",zh(...e));return new Uint8Array(t)}if(kp.node){const{createHash:t}=kp.node,n=t("sha256");return e.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(kp.web){const n=await kp.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=zh(...t),o=await kp.web.subtle.sign("HMAC",n,r);return new Uint8Array(o)}if(kp.node){const{createHmac:n}=kp.node,r=n("sha256",e);return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=Cp[e];if(void 0===n){const t=await Ip.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=zh(t,t),Cp[e]=n}return Ip.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!==typeof ip)throw new Oh("sha256Sync is undefined, you need to set it");let n=Cp[e];if(void 0===n){const t=ip(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=zh(t,t),Cp[e]=n}return ip(n,...t)},_JacobianPoint:Ph};function Ap(e){if(isNaN(e)||e<=0)throw new Xu("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Ip.randomBytes(e)}Object.defineProperties(Ip,{sha256Sync:{configurable:!1,get(){return ip},set(e){ip||(ip=e)}},hmacSha256Sync:{configurable:!1,get(){return ap},set(e){ap||(ap=e)}}});n(8095);function Tp(e){const t=oh.asn1.fromDer(Ti(e,"ascii")),n=oh.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:ah(n.n),e:ah(n.e),d:ah(n.d),p:ah(n.p),q:ah(n.q),dp:ah(n.dP),dq:ah(n.dQ),qi:ah(n.qInv),alg:"RS256"}}function Rp(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new Xu("JWK was missing components","ERR_INVALID_PARAMETERS");const t=oh.pki.privateKeyToAsn1({n:lh(e.n),e:lh(e.e),d:lh(e.d),p:lh(e.p),q:lh(e.q),dP:lh(e.dp),dQ:lh(e.dq),qInv:lh(e.qi)});return mi(oh.asn1.toDer(t).getBytes(),"ascii")}function xp(e){const t=oh.asn1.fromDer(Ti(e,"ascii")),n=oh.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:ah(n.n),e:ah(n.e)}}function Op(e){if(null==e.n||null==e.e)throw new Xu("JWK was missing components","ERR_INVALID_PARAMETERS");const t=oh.pki.publicKeyToAsn1({n:lh(e.n),e:lh(e.e)});return mi(oh.asn1.toDer(t).getBytes(),"ascii")}function Np(e,t){return t.map((t=>lh(e[t])))}function Pp(e){return oh.pki.setRsaPrivateKey(...Np(e,["n","e","d","p","q","dp","dq","qi"]))}function Dp(e){return oh.pki.setRsaPublicKey(...Np(e,["n","e"]))}async function Up(e){const t=await sh.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),n=await Fp(t);return{privateKey:n[0],publicKey:n[1]}}async function Lp(e){const t=await sh.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),n=[t,await jp(e)],r=await Fp({privateKey:n[0],publicKey:n[1]});return{privateKey:r[0],publicKey:r[1]}}async function Bp(e,t){const n=await sh.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),r=await sh.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,Uint8Array.from(t));return new Uint8Array(r,0,r.byteLength)}async function Mp(e,t,n){const r=await sh.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await sh.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},r,t,n)}async function Fp(e){if(null==e.privateKey||null==e.publicKey)throw new Xu("Private and public key are required","ERR_INVALID_PARAMETERS");return await Promise.all([sh.get().subtle.exportKey("jwk",e.privateKey),sh.get().subtle.exportKey("jwk",e.publicKey)])}async function jp(e){return await sh.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function zp(e,t,n,r){const o=t?Dp(e):Pp(e),s=Ti(Uint8Array.from(n),"ascii"),i=r(s,o);return mi(i,"ascii")}function $p(e,t){return zp(e,!0,t,((e,t)=>t.encrypt(e)))}function Vp(e,t){return zp(e,!1,t,((e,t)=>t.decrypt(e)))}async function Hp(e,t){const n=hh(),r=await n.encrypt(e,t);return le.encode(r)}class Kp{constructor(e){this._key=e}async verify(e,t){return await Mp(this._key,t,e)}marshal(){return Op(this._key)}get bytes(){return Xd.encode({Type:Jd.RSA,Data:this.marshal()}).subarray()}encrypt(e){return $p(this._key,e)}equals(e){return wa(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Fs.digest(this.bytes);return e}}class qp{constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return Ap(16)}async sign(e){return await Bp(this._key,e)}get public(){if(null==this._publicKey)throw new Xu("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Kp(this._publicKey)}decrypt(e){return Vp(this._key,e)}marshal(){return Rp(this._key)}get bytes(){return eh.encode({Type:Jd.RSA,Data:this.marshal()}).subarray()}equals(e){return wa(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Fs.digest(this.bytes);return e}async id(){const e=await this.public.hash();return Ti(e,"base58btc")}async export(e,t="pkcs-8"){if("pkcs-8"===t){const t=new oh.util.ByteBuffer(this.marshal()),n=oh.asn1.fromDer(t),r=oh.pki.privateKeyFromAsn1(n),o={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return oh.pki.encryptRsaPrivateKey(r,e,o)}if("libp2p-key"===t)return await Hp(this.bytes,e);throw new Xu(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function Wp(e){const t=Tp(e),n=await Lp(t);return new qp(n.privateKey,n.publicKey)}function Yp(e){const t=xp(e);return new Kp(t)}async function Gp(e){const t=await Lp(e);return new qp(t.privateKey,t.publicKey)}async function Zp(e){const t=await Up(e);return new qp(t.privateKey,t.publicKey)}var Jp=n(7420),Qp=n.t(Jp,2);
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const Xp=BigInt(0),ef=BigInt(1),tf=BigInt(2),nf=BigInt(8),rf=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),of=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:rf,n:rf,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),sf=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),af=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),lf=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),cf=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),uf=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),df=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class hf{constructor(e,t,n,r){this.x=e,this.y=t,this.z=n,this.t=r}static fromAffine(e){if(!(e instanceof wf))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(wf.ZERO)?hf.ZERO:new hf(e.x,e.y,ef,Of(e.x*e.y))}static toAffineBatch(e){const t=Pf(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){ff(e);const{x:t,y:n,z:r}=this,{x:o,y:s,z:i}=e,a=Of(t*i),l=Of(o*r),c=Of(n*i),u=Of(s*r);return a===l&&c===u}negate(){return new hf(Of(-this.x),this.y,this.z,Of(-this.t))}double(){const{x:e,y:t,z:n}=this,{a:r}=of,o=Of(e*e),s=Of(t*t),i=Of(tf*Of(n*n)),a=Of(r*o),l=e+t,c=Of(Of(l*l)-o-s),u=a+s,d=u-i,h=a-s,p=Of(c*d),f=Of(u*h),g=Of(c*h),m=Of(d*u);return new hf(p,f,m,g)}add(e){ff(e);const{x:t,y:n,z:r,t:o}=this,{x:s,y:i,z:a,t:l}=e,c=Of((n-t)*(i+s)),u=Of((n+t)*(i-s)),d=Of(u-c);if(d===Xp)return this.double();const h=Of(r*tf*l),p=Of(o*tf*a),f=p+h,g=u+c,m=p-h,y=Of(f*d),v=Of(g*m),w=Of(f*m),b=Of(d*g);return new hf(y,v,b,w)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,n=[];let r=this,o=r;for(let s=0;s<t;s++){o=r,n.push(o);for(let t=1;t<2**(e-1);t++)o=o.add(r),n.push(o);r=o.double()}return n}wNAF(e,t){!t&&this.equals(hf.BASE)&&(t=wf.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=t&&vf.get(t);r||(r=this.precomputeWindow(n),t&&1!==n&&(r=hf.normalizeZ(r),vf.set(t,r)));let o=hf.ZERO,s=hf.BASE;const i=1+256/n,a=2**(n-1),l=BigInt(2**n-1),c=2**n,u=BigInt(n);for(let d=0;d<i;d++){const t=d*a;let n=Number(e&l);e>>=u,n>a&&(n-=c,e+=ef);const i=t,h=t+Math.abs(n)-1,p=d%2!==0,f=n<0;0===n?s=s.add(pf(p,r[i])):o=o.add(pf(f,r[h]))}return hf.normalizeZ([o,s])[0]}multiply(e,t){return this.wNAF(zf(e,of.l),t)}multiplyUnsafe(e){let t=zf(e,of.l,!1);const n=hf.BASE,r=hf.ZERO;if(t===Xp)return r;if(this.equals(r)||t===ef)return this;if(this.equals(n))return this.wNAF(t);let o=r,s=this;while(t>Xp)t&ef&&(o=o.add(s)),s=s.double(),t>>=ef;return o}isSmallOrder(){return this.multiplyUnsafe(of.h).equals(hf.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(of.l/tf).double();return of.l%tf&&(e=e.add(this)),e.equals(hf.ZERO)}toAffine(e){const{x:t,y:n,z:r}=this,o=this.equals(hf.ZERO);null==e&&(e=o?nf:Nf(r));const s=Of(t*e),i=Of(n*e),a=Of(r*e);if(o)return wf.ZERO;if(a!==ef)throw new Error("invZ was invalid");return new wf(s,i)}fromRistrettoBytes(){mf()}toRistrettoBytes(){mf()}fromRistrettoHash(){mf()}}function pf(e,t){const n=t.negate();return e?n:t}function ff(e){if(!(e instanceof hf))throw new TypeError("ExtendedPoint expected")}function gf(e){if(!(e instanceof yf))throw new TypeError("RistrettoPoint expected")}function mf(){throw new Error("Legacy method: switch to RistrettoPoint")}hf.BASE=new hf(of.Gx,of.Gy,ef,Of(of.Gx*of.Gy)),hf.ZERO=new hf(Xp,ef,ef,Xp);class yf{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=of,n=Of(af*e*e),r=Of((n+ef)*uf);let o=BigInt(-1);const s=Of((o-t*n)*Of(n+t));let{isValid:i,value:a}=Lf(r,s),l=Of(a*e);Af(l)||(l=Of(-l)),i||(a=l),i||(o=n);const c=Of(o*(n-ef)*df-s),u=a*a,d=Of((a+a)*s),h=Of(c*lf),p=Of(ef-u),f=Of(ef+u);return new hf(Of(d*f),Of(p*h),Of(h*f),Of(d*p))}static hashToCurve(e){e=jf(e,64);const t=xf(e.slice(0,32)),n=this.calcElligatorRistrettoMap(t),r=xf(e.slice(32,64)),o=this.calcElligatorRistrettoMap(r);return new yf(n.add(o))}static fromHex(e){e=jf(e,32);const{a:t,d:n}=of,r="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=xf(e);if(!Ff(If(o),e)||Af(o))throw new Error(r);const s=Of(o*o),i=Of(ef+t*s),a=Of(ef-t*s),l=Of(i*i),c=Of(a*a),u=Of(t*n*l-c),{isValid:d,value:h}=Bf(Of(u*c)),p=Of(h*a),f=Of(h*p*u);let g=Of((o+o)*p);Af(g)&&(g=Of(-g));const m=Of(i*f),y=Of(g*m);if(!d||Af(y)||m===Xp)throw new Error(r);return new yf(new hf(g,m,ef,y))}toRawBytes(){let{x:e,y:t,z:n,t:r}=this.ep;const o=Of(Of(n+t)*Of(n-t)),s=Of(e*t),i=Of(s*s),{value:a}=Bf(Of(o*i)),l=Of(a*o),c=Of(a*s),u=Of(l*c*r);let d;if(Af(r*u)){let n=Of(t*af),r=Of(e*af);e=n,t=r,d=Of(l*cf)}else d=c;Af(e*u)&&(t=Of(-t));let h=Of((n-t)*d);return Af(h)&&(h=Of(-h)),If(h)}toHex(){return Ef(this.toRawBytes())}toString(){return this.toHex()}equals(e){gf(e);const t=this.ep,n=e.ep,r=Of(t.x*n.y)===Of(t.y*n.x),o=Of(t.y*n.y)===Of(t.x*n.x);return r||o}add(e){return gf(e),new yf(this.ep.add(e.ep))}subtract(e){return gf(e),new yf(this.ep.subtract(e.ep))}multiply(e){return new yf(this.ep.multiply(e))}multiplyUnsafe(e){return new yf(this.ep.multiplyUnsafe(e))}}yf.BASE=new yf(hf.BASE),yf.ZERO=new yf(hf.ZERO);const vf=new WeakMap;class wf{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,vf.delete(this)}static fromHex(e,t=!0){const{d:n,P:r}=of;e=jf(e,32);const o=e.slice();o[31]=-129&e[31];const s=Tf(o);if(t&&s>=r)throw new Error("Expected 0 < hex < P");if(!t&&s>=sf)throw new Error("Expected 0 < hex < 2**256");const i=Of(s*s),a=Of(i-ef),l=Of(n*i+ef);let{isValid:c,value:u}=Lf(a,l);if(!c)throw new Error("Point.fromHex: invalid y coordinate");const d=(u&ef)===ef,h=0!==(128&e[31]);return h!==d&&(u=Of(-u)),new wf(u,s)}static async fromPrivateKey(e){return(await qf(e)).point}toRawBytes(){const e=If(this.y);return e[31]|=this.x&ef?128:0,e}toHex(){return Ef(this.toRawBytes())}toX25519(){const{y:e}=this,t=Of((ef+e)*Nf(ef-e));return If(t)}isTorsionFree(){return hf.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new wf(Of(-this.x),this.y)}add(e){return hf.fromAffine(this).add(hf.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return hf.fromAffine(this).multiply(e,this).toAffine()}}wf.BASE=new wf(of.Gx,of.Gy),wf.ZERO=new wf(Xp,ef);class bf{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=jf(e,64),n=wf.fromHex(t.slice(0,32),!1),r=Tf(t.slice(32,64));return new bf(n,r)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof wf))throw new Error("Expected Point instance");return zf(t,of.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(If(this.s),32),e}toHex(){return Ef(this.toRawBytes())}}function Sf(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const t=e[r];n.set(t,o),o+=t.length}return n}const _f=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ef(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=_f[e[n]];return t}function kf(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,o=e.slice(r,r+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t}function Cf(e){const t=32,n=e.toString(16).padStart(2*t,"0");return kf(n)}function If(e){return Cf(e).reverse()}function Af(e){return(Of(e)&ef)===ef}function Tf(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Ef(Uint8Array.from(e).reverse()))}const Rf=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function xf(e){return Of(Tf(e)&Rf)}function Of(e,t=of.P){const n=e%t;return n>=Xp?n:t+n}function Nf(e,t=of.P){if(e===Xp||t<=Xp)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Of(e,t),r=t,o=Xp,s=ef,i=ef,a=Xp;while(n!==Xp){const e=r/n,t=r%n,l=o-i*e,c=s-a*e;r=n,n=t,o=i,s=a,i=l,a=c}const l=r;if(l!==ef)throw new Error("invert: does not exist");return Of(o,t)}function Pf(e,t=of.P){const n=new Array(e.length),r=e.reduce(((e,r,o)=>r===Xp?e:(n[o]=e,Of(e*r,t))),ef),o=Nf(r,t);return e.reduceRight(((e,r,o)=>r===Xp?e:(n[o]=Of(e*n[o],t),Of(e*r,t))),o),n}function Df(e,t){const{P:n}=of;let r=e;while(t-- >Xp)r*=r,r%=n;return r}function Uf(e){const{P:t}=of,n=BigInt(5),r=BigInt(10),o=BigInt(20),s=BigInt(40),i=BigInt(80),a=e*e%t,l=a*e%t,c=Df(l,tf)*l%t,u=Df(c,ef)*e%t,d=Df(u,n)*u%t,h=Df(d,r)*d%t,p=Df(h,o)*h%t,f=Df(p,s)*p%t,g=Df(f,i)*f%t,m=Df(g,i)*f%t,y=Df(m,r)*d%t,v=Df(y,tf)*e%t;return{pow_p_5_8:v,b2:l}}function Lf(e,t){const n=Of(t*t*t),r=Of(n*n*t),o=Uf(e*r).pow_p_5_8;let s=Of(e*n*o);const i=Of(t*s*s),a=s,l=Of(s*af),c=i===e,u=i===Of(-e),d=i===Of(-e*af);return c&&(s=a),(u||d)&&(s=l),Af(s)&&(s=Of(-s)),{isValid:c||u,value:s}}function Bf(e){return Lf(ef,e)}function Mf(e){return Of(Tf(e),of.l)}function Ff(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function jf(e,t){const n=e instanceof Uint8Array?Uint8Array.from(e):kf(e);if("number"===typeof t&&n.length!==t)throw new Error(`Expected ${t} bytes`);return n}function zf(e,t,n=!0){if(!t)throw new TypeError("Specify max value");if("number"===typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"===typeof e&&e<t)if(n){if(Xp<e)return e}else if(Xp<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function $f(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Vf(e){if(e="bigint"===typeof e||"number"===typeof e?Cf(zf(e,sf)):jf(e),32!==e.length)throw new Error("Expected 32 bytes");return e}function Hf(e){const t=$f(e.slice(0,32)),n=e.slice(32,64),r=Mf(t),o=wf.BASE.multiply(r),s=o.toRawBytes();return{head:t,prefix:n,scalar:r,point:o,pointBytes:s}}let Kf;async function qf(e){return Hf(await Xf.sha512(Vf(e)))}async function Wf(e){return(await qf(e)).pointBytes}async function Yf(e,t){e=jf(e);const{prefix:n,scalar:r,pointBytes:o}=await qf(t),s=Mf(await Xf.sha512(n,e)),i=wf.BASE.multiply(s),a=Mf(await Xf.sha512(i.toRawBytes(),o,e)),l=Of(s+a*r,of.l);return new bf(i,l).toRawBytes()}function Gf(e,t,n){t=jf(t),n instanceof wf||(n=wf.fromHex(n,!1));const{r:r,s:o}=e instanceof bf?e.assertValidity():bf.fromHex(e),s=hf.BASE.multiplyUnsafe(o);return{r:r,s:o,SB:s,pub:n,msg:t}}function Zf(e,t,n,r){const o=Mf(r),s=hf.fromAffine(e).multiplyUnsafe(o),i=hf.fromAffine(t).add(s);return i.subtract(n).multiplyUnsafe(of.h).equals(hf.ZERO)}async function Jf(e,t,n){const{r:r,SB:o,msg:s,pub:i}=Gf(e,t,n),a=await Xf.sha512(r.toRawBytes(),i.toRawBytes(),s);return Zf(i,r,o,a)}wf.BASE._setWindowSize(8);const Qf={node:Qp,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Xf={bytesToHex:Ef,hexToBytes:kf,concatBytes:Sf,getExtendedPublicKey:qf,mod:Of,invert:Nf,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=jf(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return Of(Tf(e),of.l-ef)+ef},randomBytes:(e=32)=>{if(Qf.web)return Qf.web.getRandomValues(new Uint8Array(e));if(Qf.node){const{randomBytes:t}=Qf.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Xf.randomBytes(32),sha512:async(...e)=>{const t=Sf(...e);if(Qf.web){const e=await Qf.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(Qf.node)return Uint8Array.from(Qf.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=wf.BASE){const n=t.equals(wf.BASE)?t:new wf(t.x,t.y);return n._setWindowSize(e),n.multiply(tf),n},sha512Sync:void 0};Object.defineProperties(Xf,{sha512Sync:{configurable:!1,get(){return Kf},set(e){Kf||(Kf=e)}}});const eg=32,tg=64,ng=32;async function rg(){const e=Xf.randomPrivateKey(),t=await Wf(e),n=ag(e,t);return{privateKey:n,publicKey:t}}async function og(e){if(e.length!==ng)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,n=await Wf(t),r=ag(t,n);return{privateKey:r,publicKey:n}}async function sg(e,t){const n=e.subarray(0,ng);return await Yf(t,n)}async function ig(e,t,n){return await Jf(t,n,e)}function ag(e,t){const n=new Uint8Array(tg);for(let r=0;r<ng;r++)n[r]=e[r],n[ng+r]=t[r];return n}class lg{constructor(e){this._key=fg(e,eg)}async verify(e,t){return await ig(this._key,t,e)}marshal(){return this._key}get bytes(){return Xd.encode({Type:Jd.Ed25519,Data:this.marshal()}).subarray()}equals(e){return wa(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Fs.digest(this.bytes);return e}}class cg{constructor(e,t){this._key=fg(e,tg),this._publicKey=fg(t,eg)}async sign(e){return await sg(this._key,e)}get public(){return new lg(this._publicKey)}marshal(){return this._key}get bytes(){return eh.encode({Type:Jd.Ed25519,Data:this.marshal()}).subarray()}equals(e){return wa(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Fs.digest(this.bytes);return e}async id(){const e=Es.digest(this.public.bytes);return J.encode(e.bytes).substring(1)}async export(e,t="libp2p-key"){if("libp2p-key"===t)return await Hp(this.bytes,e);throw new Xu(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function ug(e){if(e.length>tg){e=fg(e,tg+eg);const t=e.subarray(0,tg),n=e.subarray(tg,e.length);return new cg(t,n)}e=fg(e,tg);const t=e.subarray(0,tg),n=e.subarray(eg);return new cg(t,n)}function dg(e){return e=fg(e,eg),new lg(e)}async function hg(){const{privateKey:e,publicKey:t}=await rg();return new cg(e,t)}async function pg(e){const{privateKey:t,publicKey:n}=await og(e);return new cg(t,n)}function fg(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new Xu(`Key must be a Uint8Array of length ${t}, got ${e.length}`,"ERR_INVALID_KEY_TYPE");return e}function gg(){return Ip.randomPrivateKey()}async function mg(e,t){const{digest:n}=await Fs.digest(t);try{return await Sp(n,e)}catch(ik){throw new Xu(String(ik),"ERR_INVALID_INPUT")}}async function yg(e,t,n){try{const{digest:r}=await Fs.digest(n);return Ep(t,r,e)}catch(ik){throw new Xu(String(ik),"ERR_INVALID_INPUT")}}function vg(e){const t=Lh.fromHex(e).toRawBytes(!0);return t}function wg(e){try{gp(e,!0)}catch(ik){throw new Xu(String(ik),"ERR_INVALID_PRIVATE_KEY")}}function bg(e){try{Lh.fromHex(e)}catch(ik){throw new Xu(String(ik),"ERR_INVALID_PUBLIC_KEY")}}function Sg(e){try{return gp(e,!0)}catch(ik){throw new Xu(String(ik),"ERR_INVALID_PRIVATE_KEY")}}class _g{constructor(e){bg(e),this._key=e}async verify(e,t){return await yg(this._key,t,e)}marshal(){return vg(this._key)}get bytes(){return Xd.encode({Type:Jd.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return wa(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Fs.digest(this.bytes);return e}}class Eg{constructor(e,t){this._key=e,this._publicKey=t??Sg(e),wg(this._key),bg(this._publicKey)}async sign(e){return await mg(this._key,e)}get public(){return new _g(this._publicKey)}marshal(){return this._key}get bytes(){return eh.encode({Type:Jd.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return wa(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Fs.digest(this.bytes);return e}async id(){const e=await this.public.hash();return Ti(e,"base58btc")}async export(e,t="libp2p-key"){if("libp2p-key"===t)return await Hp(this.bytes,e);throw new Xu(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function kg(e){return new Eg(e)}function Cg(e){return new _g(e)}async function Ig(){const e=gg();return new Eg(e)}const Ag={rsa:S,ed25519:_,secp256k1:E};function Tg(e){const t=Object.keys(Ag).join(" / ");return new Xu(`invalid or unsupported key type ${e}. Must be ${t}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Rg(e){if(e=e.toLowerCase(),"rsa"===e||"ed25519"===e||"secp256k1"===e)return Ag[e];throw Tg(e)}async function xg(e,t){return await Rg(e).generateKeyPair(t??2048)}function Og(e){const t=Xd.decode(e),n=t.Data??new Uint8Array;switch(t.Type){case Jd.RSA:return Ag.rsa.unmarshalRsaPublicKey(n);case Jd.Ed25519:return Ag.ed25519.unmarshalEd25519PublicKey(n);case Jd.Secp256k1:return Ag.secp256k1.unmarshalSecp256k1PublicKey(n);default:throw Tg(t.Type??"RSA")}}function Ng(e,t){return t=(t??"rsa").toLowerCase(),Rg(t),e.bytes}async function Pg(e){const t=eh.decode(e),n=t.Data??new Uint8Array;switch(t.Type){case Jd.RSA:return await Ag.rsa.unmarshalRsaPrivateKey(n);case Jd.Ed25519:return Ag.ed25519.unmarshalEd25519PrivateKey(n);case Jd.Secp256k1:return Ag.secp256k1.unmarshalSecp256k1PrivateKey(n);default:throw Tg(t.Type??"RSA")}}function Dg(e,t){return t=(t??"rsa").toLowerCase(),Rg(t),e.bytes}async function Ug(e,t){try{const n=await ph(e,t);return await Pg(n)}catch(o){}const n=oh.pki.decryptRsaPrivateKey(e,t);if(null===n)throw new Xu("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let r=oh.asn1.toDer(oh.pki.privateKeyToAsn1(n));return r=mi(r.getBytes(),"ascii"),await Ag.rsa.unmarshalRsaPrivateKey(r)}const Lg="ERR_IPNS_EXPIRED_RECORD",Bg="ERR_UNRECOGNIZED_VALIDITY",Mg="ERR_SIGNATURE_CREATION",Fg="ERR_SIGNATURE_VERIFICATION",jg="ERR_UNRECOGNIZED_FORMAT",zg="ERR_UNDEFINED_PARAMETER",$g="ERR_INVALID_RECORD_DATA",Vg="ERR_INVALID_EMBEDDED_KEY",Hg="ERR_MISSING_PRIVATE_KEY";function Kg(){Fd._configure(),Bd._configure(Md),jd._configure(zd)}Kg();const qg=["uint64","int64","sint64","fixed64","sfixed64"];function Wg(e){for(const t of qg){if(null==e[t])continue;const n=e[t];e[t]=function(){return BigInt(n.call(this).toString())}}return e}function Yg(e){return Wg(new Bd(e))}function Gg(e){for(const t of qg){if(null==e[t])continue;const n=e[t];e[t]=function(e){return n.call(this,e.toString())}}return e}function Zg(){return Gg(jd.create())}function Jg(e,t){const n=Yg(e instanceof Uint8Array?e:e.subarray());return t.decode(n)}function Qg(e,t){const n=Zg();return t.encode(e,n,{lengthDelimited:!1}),n.finish()}var Xg,em;function tm(e,t,n,r){return{name:e,type:t,encode:n,decode:r}}function nm(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}const n=function(e,n){const r=t(e);n.int32(r)},r=function(e){const n=e.int32();return t(n)};return tm("enum",Xg.VARINT,n,r)}function rm(e,t){return tm("message",Xg.LENGTH_DELIMITED,e,t)}(function(e){e[e["VARINT"]=0]="VARINT",e[e["BIT64"]=1]="BIT64",e[e["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",e[e["START_GROUP"]=3]="START_GROUP",e[e["END_GROUP"]=4]="END_GROUP",e[e["BIT32"]=5]="BIT32"})(Xg||(Xg={})),function(e){let t,n,r;(function(e){e["EOL"]="EOL"})(t=e.ValidityType||(e.ValidityType={})),function(e){e[e["EOL"]=0]="EOL"}(n||(n={})),function(e){e.codec=()=>nm(n)}(t=e.ValidityType||(e.ValidityType={})),e.codec=()=>(null==r&&(r=rm(((t,n,r={})=>{!1!==r.lengthDelimited&&n.fork(),null!=t.value&&(n.uint32(10),n.bytes(t.value)),null!=t.signature&&(n.uint32(18),n.bytes(t.signature)),null!=t.validityType&&(n.uint32(24),e.ValidityType.codec().encode(t.validityType,n)),null!=t.validity&&(n.uint32(34),n.bytes(t.validity)),null!=t.sequence&&(n.uint32(40),n.uint64(t.sequence)),null!=t.ttl&&(n.uint32(48),n.uint64(t.ttl)),null!=t.pubKey&&(n.uint32(58),n.bytes(t.pubKey)),null!=t.signatureV2&&(n.uint32(66),n.bytes(t.signatureV2)),null!=t.data&&(n.uint32(74),n.bytes(t.data)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={},o=null==n?t.len:t.pos+n;while(t.pos<o){const n=t.uint32();switch(n>>>3){case 1:r.value=t.bytes();break;case 2:r.signature=t.bytes();break;case 3:r.validityType=e.ValidityType.codec().decode(t);break;case 4:r.validity=t.bytes();break;case 5:r.sequence=t.uint64();break;case 6:r.ttl=t.uint64();break;case 7:r.pubKey=t.bytes();break;case 8:r.signatureV2=t.bytes();break;case 9:r.data=t.bytes();break;default:t.skipType(7&n);break}}return r}))),r),e.encode=t=>Qg(t,e.codec()),e.decode=t=>Jg(t,e.codec())}(em||(em={}));const om=pe("ipns:utils"),sm=mi("/ipns/");function im(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),n=String(e).trim().match(t);if(null==n)throw new Error("Invalid format");const r=parseInt(n[1],10),o=parseInt(n[2],10)-1,s=parseInt(n[3],10),i=parseInt(n[4],10),a=parseInt(n[5],10),l=parseInt(n[6],10),c=parseInt(n[7].slice(0,-6),10);return new Date(Date.UTC(r,o,s,i,a,l,c))}const am=async(e,t)=>{if(null==t||null==e){const e=new Error("one or more of the provided parameters are not defined");throw om.error(e),fe(e,zg)}let n;if(null!=t.pubKey){try{n=Og(t.pubKey)}catch(ik){throw om.error(ik),ik}const r=await gd(t.pubKey);if(!r.equals(e))throw fe(new Error("Embedded public key did not match PeerID"),Vg)}else null!=e.publicKey&&(n=Og(e.publicKey));if(null!=n)return n;throw fe(new Error("no public key is available"),zg)},lm=(e,t,n)=>{const r=mi(t);return ji([e,n,r])},cm=e=>{const t=mi("ipns-signature:");return ji([t,e])},um=e=>em.encode(e),dm=e=>{const t=em.decode(e);return null!=t.sequence&&(t.sequence=BigInt(t.sequence)),null!=t.ttl&&(t.ttl=BigInt(t.ttl)),{value:t.value??new Uint8Array(0),signature:t.signature??new Uint8Array(0),validityType:t.validityType??em.ValidityType.EOL,validity:t.validity??new Uint8Array(0),sequence:t.sequence??0n,pubKey:t.pubKey,ttl:t.ttl??void 0,signatureV2:t.signatureV2,data:t.data}},hm=e=>ji([sm,e.toBytes()]),pm=e=>pd(e.slice(sm.length)),fm=(e,t,n,r,o)=>{let s;if(n!==em.ValidityType.EOL)throw fe(new Error("Unknown validity type"),Bg);s=0;const i={Value:e,Validity:t,ValidityType:s,Sequence:r,TTL:o};return lo(i)},gm=e=>{const t=yo(e);if(0!==t.ValidityType)throw fe(new Error("Unknown validity type"),Bg);return t.ValidityType=em.ValidityType.EOL,Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t},mm=pe("ipns"),ym=Es.code,vm="/ipns/",wm=vm.length,bm=async(e,t,n,r)=>{const o=new Ld(Date.now()+Number(r)),s=em.ValidityType.EOL,[i,a]=r.toString().split("."),l=BigInt(i)*BigInt(1e5)+BigInt(a??"0");return await Sm(e,t,n,s,o,l)},Sm=async(e,t,n,r,o,s)=>{n=BigInt(n);const i=mi(o.toString());if(null==e.privateKey)throw fe(new Error("Missing private key"),Hg);const a=await Pg(e.privateKey),l=await km(a,t,r,i),c=fm(t,i,r,n,s),u=cm(c),d=await a.sign(u),h={value:t,signature:l,validityType:r,validity:i,sequence:n,ttl:s,signatureV2:d,data:c};if(null!=e.publicKey){const t=nt(e.toBytes());t.code===ym&&wa(e.publicKey,t.digest)||(h.pubKey=e.publicKey)}return mm("ipns entry for %b created",t),h},_m=e=>ee.encode(e).slice(1),Em=e=>new Tc(`/ipns/${_m(e)}`),km=async(e,t,n,r)=>{try{const o=lm(t,n,r);return await e.sign(o)}catch(o){throw mm.error("record signature creation failed",o),fe(new Error("record signature creation failed"),Mg)}},Cm=pe("ipfs:ipns:publisher"),Im=Ud().code,Am=36e5;class Tm{constructor(e,t){this._routing=e,this._datastore=t}async publishWithEOL(e,t,n,r){const o=await this._updateOrCreateRecord(e,t,n,r);return this._putRecordToRouting(o,e,r)}publish(e,t,n){return this.publishWithEOL(e,t,Am,n)}async _putRecordToRouting(e,t,n){if(!td(t)){const e="peerId received is not valid";throw Cm.error(e),fe(new Error(e),"ERR_INVALID_PEER_ID")}if(null==t.publicKey)throw fe(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");const r=hm(t);return await this._publishEntry(r,e,n),e}async _publishEntry(e,t,n){try{const r=await this._routing.put(e,t,n);return Cm(`ipns record for ${Ti(e,"base32")} was stored in the routing`),r}catch(ik){const n=`ipns record for ${Ti(e,"base32")} could not be stored in the routing - ${ik.stack}`;throw Cm.error(n),Cm.error(ik),fe(new Error(n),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,t={}){if(!td(e)){const e="peerId received is not valid";throw Cm.error(e),fe(new Error(e),"ERR_INVALID_PEER_ID")}const n=!1!==t.checkRouting;try{const t=await this._datastore.get(Em(e.toBytes()));return this._unmarshalData(t)}catch(ik){if(ik.code!==Im){const t=`unexpected error getting the ipns record ${e.toString()} from datastore`;throw Cm.error(t),fe(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!n)throw fe(ik,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{const t=hm(e),n=await this._routing.get(t);return this._unmarshalData(n)}catch(ik){throw Cm.error(ik),ik}}}_unmarshalData(e){try{return dm(e)}catch(ik){throw fe(ik,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,t,n,r){if(!td(e)){const e="peerId received is not valid";throw Cm.error(e),fe(new Error(e),"ERR_INVALID_PEER_ID")}const o={checkRouting:!0};let s;try{s=await this._getPublished(e,o)}catch(ik){if(ik.code!==Im){const n=`unexpected error when determining the last published IPNS record for ${e.toString()} ${ik.stack}`;throw Cm.error(n),fe(new Error(n),"ERR_DETERMINING_PUBLISHED_RECORD")}}let i,a=0n;s&&void 0!==s.sequence&&(a=wa(s.value,t)?s.sequence:s.sequence+BigInt(1));try{i=await bm(e,t,a,n)}catch(ik){const n=`ipns record for ${t} could not be created`;throw Cm.error(ik),fe(new Error(n),"ERR_CREATING_IPNS_RECORD")}try{const n=um(i);return await this._datastore.put(Em(e.toBytes()),n,r),Cm(`ipns record for ${Ti(t,"base32")} was stored in the datastore`),n}catch(ik){const n=`ipns record for ${t} could not be stored in the datastore`;throw Cm.error(n),fe(new Error(n),"ERR_STORING_IN_DATASTORE")}}}Tm.defaultRecordLifetime=Am;const Rm=pe("ipfs:ipns:republisher"),xm=6e4,Om=60*xm,Nm=4*Om,Pm=24*Om;class Dm{constructor(e,t,n,r,o={pass:""}){this._publisher=e,this._datastore=t,this._peerId=n,this._keychain=r,this._options=o,this._republishHandle=null}async start(){if(this._republishHandle)throw fe(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");const e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:t=>{e._timeoutId=setTimeout((async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(t)}catch(ik){Rm.error(ik)}}),t())},cancel:async()=>{null!=e._timeoutId&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{pass:t}=this._options;let n=!0;e._task=async()=>{const e=new yi.TimeoutController(3e4);try{await this._republishEntries(this._peerId,t,{signal:e.signal})}finally{e.clear()}},e.runPeriodically((()=>n?(n=!1,this._options.initialBroadcastInterval||xm):this._options.broadcastInterval||Nm)),this._republishHandle=e}async stop(){const e=this._republishHandle;if(!e)throw fe(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,t,n){try{await this._republishEntry(e,n)}catch(ik){const t="cannot republish entry for the node's private key";return void Rm.error(t)}if(t)try{const e=await this._keychain.listKeys();for(const r of e){if("self"===r.name)continue;const e=await this._keychain.exportKey(r.name,t),o=await Ug(e,t),s=await gd(o.public.bytes,o.bytes);await this._republishEntry(s,n)}}catch(ik){Rm.error(ik)}}async _republishEntry(e,t){try{const n=await this._getPreviousValue(e);await this._publisher.publishWithEOL(e,n,Pm,t)}catch(ik){if("ERR_NO_ENTRY_FOUND"===ik.code)return;throw ik}}async _getPreviousValue(e){if(!td(e))throw fe(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{const t=await this._datastore.get(Em(e.toBytes()));if(!(t instanceof Uint8Array))throw fe(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{const e=dm(t);return e.value}catch(ik){throw Rm.error(ik),fe(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(ik){if(ik&&ik.notFound)throw fe(new Error(`no previous entry for record with id: ${e.toString()}`),"ERR_NO_ENTRY_FOUND");throw ik}}}const Um=pe("ipns:validator"),Lm=async(e,t)=>{const{value:n,validityType:r,validity:o}=t;let s,i,a;if(null==t.signatureV2||null==t.data)throw fe(new Error("missing data or signatureV2"),Fg);i=t.signatureV2,s=cm(t.data),Bm(t);try{a=await e.verify(s,i)}catch(ik){a=!1}if(!a)throw Um.error("record signature verification failed"),fe(new Error("record signature verification failed"),Fg);if(null!=o&&r===em.ValidityType.EOL){let e;try{e=im(Ti(o))}catch(l){throw Um.error("unrecognized validity format (not an rfc3339 format)"),fe(new Error("unrecognized validity format (not an rfc3339 format)"),jg)}if(e.getTime()<Date.now())throw Um.error("record has expired"),fe(new Error("record has expired"),Lg)}else if(null!=r)throw Um.error("unrecognized validity type"),fe(new Error("unrecognized validity type"),Bg);Um("ipns entry for %b is valid",n)},Bm=e=>{if(null==e.data)throw fe(new Error("Record data is missing"),$g);const t=gm(e.data);if(!wa(t.Value,e.value))throw fe(new Error('Field "value" did not match between protobuf and CBOR'),Fg);if(!wa(t.Validity,e.validity))throw fe(new Error('Field "validity" did not match between protobuf and CBOR'),Fg);if(t.ValidityType!==e.validityType)throw fe(new Error('Field "validityType" did not match between protobuf and CBOR'),Fg);if(t.Sequence!==e.sequence)throw fe(new Error('Field "sequence" did not match between protobuf and CBOR'),Fg);if(t.TTL!==e.ttl)throw fe(new Error('Field "ttl" did not match between protobuf and CBOR'),Fg)},Mm=async(e,t)=>{const n=pm(e),r=dm(t),o=await am(n,r);await Lm(o,r)},Fm=pe("ipfs:ipns:resolver"),jm=Ud().code,zm=32;class $m{constructor(e){this._routing=e}async resolve(e,t={}){if("string"!==typeof e)throw fe(new Error("invalid name"),"ERR_INVALID_NAME");const n=t.recursive&&"true"===t.recursive.toString(),r=e.split("/");if(3!==r.length||""!==r[0])throw fe(new Error("invalid name"),"ERR_INVALID_NAME");const o=r[2];let s=1/0;n&&(s=zm);const i=await this.resolver(o,s,t);return Fm(`${e} was locally resolved correctly`),i}async resolver(e,t,n){if(0===t){const e=`could not resolve name (recursion limit of ${zm} exceeded)`;throw Fm.error(e),fe(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT")}const r=await this._resolveName(e,n),o=r.split("/");return"ipfs"!==o[1]&&t?this.resolver(o[2],t-1,n):r}async _resolveName(e,t){const n=hd(e),r=hm(n);let o;try{o=await this._routing.get(r,t)}catch(ik){if(Fm.error("could not get record from routing",ik),ik.code===jm)throw fe(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND");throw fe(new Error(`unexpected error getting the ipns record ${n.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}return this._validateRecord(n,o)}async _validateRecord(e,t){await Mm(ji([mi("/ipns/"),e.toBytes()]),t);const n=dm(t);return Ti(n.value)}}class Vm{constructor(e){this.lru=eu(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,n){this.lru.set(e,{value:t,expire:Date.now()+n})}has(e){const t=this.get(e);return!!t}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}const Hm=pe("ipfs:ipns"),Km=6e4;class qm{constructor(e,t,n,r,o){this.publisher=new Tm(e,t),this.republisher=new Dm(this.publisher,t,n,r,o),this.resolver=new $m(e),this.cache=new Vm(1e3),this.routing=e}async publish(e,t,n=Tm.defaultRecordLifetime,r){try{await this.publisher.publishWithEOL(e,t,n,r),Hm(`IPNS value ${Ti(t,"base32")} was published correctly`);const o=e.toString(),s=parseFloat(n),i=s<Km?s:Km;return this.cache.set(o,t,i),Hm(`IPNS value ${Ti(t,"base32")} was cached correctly`),{name:o,value:t}}catch(ik){throw Hm.error(ik),ik}}async resolve(e,t={}){if("string"!==typeof e)throw fe(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!t.nocache&&!t.recursive){const t=e.split("/")[2],n=this.cache.get(t);if(n)return n}try{const n=await this.resolver.resolve(e,t);return Hm(`IPNS record from ${e} was resolved correctly`),n}catch(ik){throw Hm.error(ik),ik}}async initializeKeyspace(e,t,n){return this.publish(e,t,Tm.defaultRecordLifetime,n)}}async function Wm(e){const t=[];for await(const n of e)t.push(n);return t}const Ym=(e,t)=>async function*(){const n=await Wm(e);yield*n.sort(t)}();async function Gm(e){for await(const t of e);}async function*Zm(e,t){for await(const n of e)await t(n)&&(yield n)}async function*Jm(e,t){let n=0;if(!(t<1))for await(const r of e)if(yield r,n++,n===t)return}class Qm{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:n,value:r}of e)await this.put(n,r,t),yield{key:n,value:r}}async*getMany(e,t={}){for await(const n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(const n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(t,n){e.push({key:t,value:n})},delete(e){t.push(e)},commit:async n=>{await Gm(this.putMany(e,n)),e=[],await Gm(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(null!=e.prefix&&(n=Zm(n,(t=>t.key.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Zm(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>Ym(e,t)),n)),null!=e.offset){let t=0;n=Zm(n,(()=>t++>=e.offset))}return null!=e.limit&&(n=Jm(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(null!=e.prefix&&(n=Zm(n,(t=>t.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Zm(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>Ym(e,t)),n)),null!=e.offset){let t=0;n=Zm(n,(()=>t++>=e.offset))}return null!=e.limit&&(n=Jm(n,e.limit)),n}}class Xm{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class ey{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Xm(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=e?.byteLength?e.byteLength:1}push(e){if(null!=e?.value&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new Xm(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return null!=e?.value&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}function ty(e={}){const t=e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}};return ry(t,e)}function ny(e={}){const t=e=>{let t;const n=[];while(!e.isEmpty()){if(t=e.shift(),null==t)break;if(null!=t.error)throw t.error;!1===t.done&&n.push(t.value)}return null==t?{done:!0}:{done:!0===t.done,value:n}};return ry(t,e)}function ry(e,t){t=t??{};let n,r,o,s=t.onEnd,i=new ey;const a=async()=>i.isEmpty()?o?{done:!0}:await new Promise(((t,o)=>{r=s=>{r=null,i.push(s);try{t(e(i))}catch(ik){o(ik)}return n}})):e(i),l=e=>null!=r?r(e):(i.push(e),n),c=e=>(i=new ey,null!=r?r({error:e}):(i.push({error:e}),n)),u=e=>{if(o)return n;if(!0!==t?.objectMode&&null==e?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return l({done:!1,value:e})},d=e=>o?n:(o=!0,null!=e?c(e):l({done:!0})),h=()=>(i=new ey,d(),{done:!0}),p=e=>(d(e),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:a,return:h,throw:p,push:u,end:d,get readableLength(){return i.size}},null==s)return n;const f=n;return n={[Symbol.asyncIterator](){return this},next(){return f.next()},throw(e){return f.throw(e),null!=s&&(s(e),s=void 0),{done:!0}},return(){return f.return(),null!=s&&(s(),s=void 0),{done:!0}},push:u,end(e){return f.end(e),null!=s&&(s(e),s=void 0),n},get readableLength(){return f.readableLength}},n}const oy=pe("datastore:core:tiered");class sy extends Qm{constructor(e){super(),this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map((e=>e.open())))}catch(ik){throw Nd(ik)}}async put(e,t,n){try{await Promise.all(this.stores.map((r=>r.put(e,t,n))))}catch(ik){throw Dd(ik)}}async get(e,t){for(const n of this.stores)try{const r=await n.get(e,t);if(r)return r}catch(ik){oy.error(ik)}throw Ud()}async has(e,t){for(const n of this.stores)if(await n.has(e,t))return!0;return!1}async delete(e,t){try{await Promise.all(this.stores.map((n=>n.delete(e,t))))}catch(ik){throw Pd(ik)}}async*putMany(e,t={}){let n;const r=this.stores.map((e=>{const r=ty({objectMode:!0});return Gm(e.putMany(r,t)).catch((e=>{n=e})),r}));try{for await(const t of e){if(n)throw n;r.forEach((e=>e.push(t))),yield t}}finally{r.forEach((e=>e.end()))}}async*deleteMany(e,t={}){let n;const r=this.stores.map((e=>{const r=ty({objectMode:!0});return Gm(e.deleteMany(r,t)).catch((e=>{n=e})),r}));try{for await(const t of e){if(n)throw n;r.forEach((e=>e.push(t))),yield t}}finally{r.forEach((e=>e.end()))}}async close(){await Promise.all(this.stores.map((e=>e.close())))}batch(){const e=this.stores.map((e=>e.batch()));return{put:(t,n)=>{e.forEach((e=>e.put(t,n)))},delete:t=>{e.forEach((e=>e.delete(t)))},commit:async t=>{for(const n of e)await n.commit(t)}}}query(e,t){return this.stores[this.stores.length-1].query(e,t)}queryKeys(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}var iy=n(6905);const ay=(e,t)=>{const n=t.map(((e,t)=>({entry:em.decode(e),index:t})));return n.sort(((e,t)=>{if(null!=e.entry.signatureV2&&null==t.entry.signatureV2)return-1;if(null==e.entry.signatureV2&&null!=t.entry.signatureV2)return 1;const n=e.entry.sequence??0n,r=t.entry.sequence??0n;if(n>r)return-1;if(n<r)return 1;const o=e.entry.validity??new Uint8Array(0),s=t.entry.validity??new Uint8Array(0),i=im(Ti(o)),a=im(Ti(s));return i.getTime()>a.getTime()?-1:i.getTime()<a.getTime()?1:0})),n[0].index},ly="SHARDING",cy="_README";class uy extends Qm{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){const t=await this.has(e);if(!t)throw Ud();return this.data[e.toString()]}async has(e){return void 0!==this.data[e.toString()]}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map((([e,t])=>({key:new Tc(e),value:t})))}async*_allKeys(){yield*Object.entries(this.data).map((([e])=>new Tc(e)))}}new Tc(ly),new Tc(cy);const dy="/record/";function hy(e){return Ti(e,"base32")}function py(e){("string"===typeof e||e instanceof String)&&(e=mi(e.toString()));const t=Ti(e,"base64url");return`${dy}${t}`}function fy(e){if(e.substring(0,dy.length)!==dy)throw new Xu("topic received is not from a record","ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=e.substring(dy.length);return mi(t,"base64url")}const gy=pe("datastore-pubsub:publisher");class my extends Qm{constructor(e,t,n,r,o,s){if(super(),!r)throw new Xu("missing validator","ERR_INVALID_PARAMETERS");if("function"!==typeof r)throw new Xu("missing validate function","ERR_INVALID_PARAMETERS");if("function"!==typeof o)throw new Xu("missing select function","ERR_INVALID_PARAMETERS");if(s&&"function"!==typeof s)throw new Xu("invalid subscriptionKeyFn received","ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=t,this._peerId=n,this._validator=r,this._selector=o,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this),this._pubsub.addEventListener("message",this._onMessage)}async put(e,t,n){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw gy.error(e),new Xu(e,"ERR_INVALID_DATASTORE_KEY")}if(!(t instanceof Uint8Array)){const e="received value is not a Uint8Array";throw gy.error(e),new Xu(e,"ERR_INVALID_VALUE_RECEIVED")}const r=py(e);gy(`publish value for topic ${r}`),await this._pubsub.publish(r,t)}async get(e,t){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw gy.error(e),new Xu(e,"ERR_INVALID_DATASTORE_KEY")}const n=py(e),r=await this._pubsub.getTopics();if(r&&Array.isArray(r)&&r.indexOf(n)>-1)return this._getLocal(e,t);try{await this._pubsub.subscribe(n)}catch(ik){const t=`cannot subscribe topic ${n}`;throw gy.error(t),new Xu(t,"ERR_SUBSCRIBING_TOPIC")}return gy(`subscribed values for key ${n}`),this._getLocal(e)}unsubscribe(e){const t=py(e);return this._pubsub.unsubscribe(t)}async _getLocal(e,t){const n=new Tc("/"+hy(e),!1);let r;try{r=await this._datastore.get(n,t)}catch(ik){if("ERR_NOT_FOUND"!==ik.code){const e=`unexpected error getting the ipns record for ${n.toString()}`;throw gy.error(e),new Xu(e,"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const t=`local record requested was not found for ${n.toString()}`;throw gy.error(t),new Xu(t,"ERR_NOT_FOUND")}if(!(r instanceof Uint8Array)){const e="found record that we couldn't convert to a value";throw gy.error(e),new Xu(e,"ERR_INVALID_RECORD_RECEIVED")}return r}async _onMessage(e){const t=e.detail;if("signed"!==t.type)return void gy.error("unsigned message received, this module can only work with signed messages");const{data:n,from:r,topic:o}=t;let s;try{s=fy(o)}catch(ik){return void gy.error(ik)}if(gy(`message received for topic ${o}`),this._peerId.equals(r))gy("message discarded as it is from the same peer");else{if(this._handleSubscriptionKeyFn){let e;try{e=await this._handleSubscriptionKeyFn(s)}catch(ik){return void gy.error("message discarded by the subscriptionKeyFn")}s=e}try{await this._storeIfSubscriptionIsBetter(s,n)}catch(ik){gy.error(ik)}}}async _storeIfSubscriptionIsBetter(e,t,n){let r=!1;try{r=await this._isBetter(e,t)}catch(ik){if("ERR_NOT_VALID_RECORD"!==ik.code)throw ik}r&&await this._storeRecord(e,t,n)}async _validateRecord(e,t){return this._validator(e,t)}async _selectRecord(e,t){const n=await this._selector(e,t);return 0===n}async _isBetter(e,t){try{await this._validateRecord(e,t)}catch(ik){const t="record received through pubsub is not valid";throw gy.error(t),new Xu(t,"ERR_NOT_VALID_RECORD")}const n=new Tc(e);let r;try{r=await this._getLocal(n.uint8Array())}catch(ik){return!0}return!wa(r,t)&&this._selectRecord(e,[r,t])}async _storeRecord(e,t,n){const r=new Tc("/"+hy(e),!1);await this._datastore.put(r,t,n),gy(`record for ${py(e)} was stored in the datastore`)}}const yy=pe("ipfs:ipns:pubsub");class vy{constructor(e,t,n){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new my(e,t,n,Mm,ay,this._handleSubscriptionKey)}async put(e,t,n){try{await this._pubsubDs.put(e,t,n)}catch(ik){throw yy.error(ik),ik}}async get(e,t){let n,r;try{n=await this._pubsubDs.get(e,t)}catch(s){r=s}const o=e.slice(0,wm);if(Ti(o)===vm){const t=J.encode(e).substring(1),n=J.encode(e.slice(wm)).substring(1);this._subscriptions[t]=n,yy(`subscribed to pubsub topic ${t}, id ${n}`)}if(r)throw r;return n}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=Ti(e,"base58btc"));const t=this._subscriptions[e];if(!t)throw fe(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");try{const e=hm(hd(t));return e}catch(ik){throw yy.error(ik),ik}}getSubscriptions(){const e=Object.values(this._subscriptions).filter(Boolean);return e.map((e=>`${vm}${e}`))}async cancel(e){if("string"!==typeof e)throw fe(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(vm)&&(e=e.substring(wm));const t=Object.keys(this._subscriptions).find((t=>this._subscriptions[t]===e));if(!t)return{canceled:!1};const n=mi(t);return this._pubsubDs.unsubscribe(n),delete this._subscriptions[t],yy(`unsubscribed pubsub ${t}: ${e}`),{canceled:!0}}}var wy;function by(e){const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),o=String(e.getUTCHours()).padStart(2,"0"),s=String(e.getUTCMinutes()).padStart(2,"0"),i=String(e.getUTCSeconds()).padStart(2,"0"),a=e.getUTCMilliseconds(),l=String(1e3*a*1e3).padStart(9,"0");return`${t}-${n}-${r}T${o}:${s}:${i}.${l}Z`}function Sy(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),n=String(e).trim().match(t);if(null==n)throw new Error("Invalid format");const r=parseInt(n[1],10),o=parseInt(n[2],10)-1,s=parseInt(n[3],10),i=parseInt(n[4],10),a=parseInt(n[5],10),l=parseInt(n[6],10),c=parseInt(n[7].slice(0,-6),10);return new Date(Date.UTC(r,o,s,i,a,l,c))}(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.key&&e.key.byteLength>0&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&e.value.byteLength>0&&(t.uint32(18),t.bytes(e.value)),null!=e.timeReceived&&""!==e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={key:new Uint8Array(0),value:new Uint8Array(0),timeReceived:""},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.key=e.bytes();break;case 2:n.value=e.bytes();break;case 5:n.timeReceived=e.string();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(wy||(wy={}));class _y{constructor(e,t,n){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(t instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=t,this.timeReceived=n}serialize(){return wy.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:by(this.timeReceived)}}static deserialize(e){const t=wy.decode(e);return new _y(t.key,t.value,new Date(t.timeReceived))}static fromDeserialized(e){const t=Sy(e.timeReceived);if(null==e.key)throw new Error("key missing from deserialized object");if(null==e.value)throw new Error("value missing from deserialized object");const n=new _y(e.key,e.value,t);return n}}const Ey=pe("ipfs:ipns:offline-datastore");class ky{constructor(e){this._datastore=e,this.stores=[]}async put(e,t,n){if(!(e instanceof Uint8Array))throw fe(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(t instanceof Uint8Array))throw fe(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let r;try{r=this._routingKey(e)}catch(ik){throw Ey.error(ik),fe(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const o=new _y(e,t,new Date);await this._datastore.put(r,o.serialize(),n)}async get(e,t){if(!(e instanceof Uint8Array))throw fe(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let n;try{n=this._routingKey(e)}catch(ik){throw Ey.error(ik),fe(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const r=await this._datastore.get(n,t);let o;try{o=_y.deserialize(r)}catch(ik){throw Ey.error(ik),ik}return o.value}_routingKey(e){return new Tc("/dht/record/"+Ti(e,"base32"),!1)}}const Cy=pe("ipfs:ipns:dht-datastore");class Iy{constructor(e){this._dht=e}async put(e,t,n){try{await Gm(this._dht.put(e,t,n))}catch(ik){throw Cy.error(ik),ik}}async get(e,t){for await(const n of this._dht.get(e,t))if("VALUE"===n.name)return n.value;throw Ud()}}function Ay({libp2p:e,repo:t,peerId:n,options:r}){const o=[];let s;if(iy(r,"EXPERIMENTAL.ipnsPubsub",!1)&&(s=new vy(e.pubsub,t.datastore,n),o.push(s)),!0!==iy(r,"offline",!1)&&["dht","dhtclient","dhtserver"].includes(iy(r,"config.Routing.Type","none"))&&o.push(new Iy(e.dht)),iy(r,"offline",!1)||0===o.length){const e=new ky(t.datastore);o.push(e)}return new sy(o)}const Ty=pe("ipfs:components:ipns");class Ry{constructor(e={pass:""}){this.options=e,this.offline=null,this.online=null}getIPNS(){const e=this.online||this.offline;if(e)return e;throw new ti}get routing(){return this.getIPNS().routing}startOffline({repo:e,peerId:t,keychain:n}){if(null!=this.offline)throw new ri;Ty("initializing IPNS keyspace (offline)");const r=new ky(e.datastore),o=new qm(r,e.datastore,t,n,this.options);this.offline=o}async startOnline({libp2p:e,repo:t,peerId:n,keychain:r}){if(null!=this.online)throw new ri;const o=Ay({libp2p:e,repo:t,peerId:n,options:this.options}),s=new qm(o,t.datastore,n,r,this.options);await s.republisher.start(),this.online=s}async stop(){const e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,t,n,r){return this.getIPNS().publish(e,t,n,r)}resolve(e,t){return this.getIPNS().resolve(e,t)}initializeKeyspace(e,t,n){return this.getIPNS().initializeKeyspace(e,t,n)}}async function xy({ipns:e,repo:t,codecs:n},r,o){if(Ec(r))return e.resolve(r);const{cid:s,path:i}=jc(r);await Gm(Zc(s,i||"",n,t,o))}const Oy=pe("ipfs:name:publish");function Ny({ipns:e,repo:t,codecs:n,peerId:r,isOnline:o,keychain:s}){const i=async e=>{let t;if("self"===e&&null!=r.privateKey)t=await Pg(r.privateKey);else try{const n=await s.exportKey(e,"temp");t=await Ug(n,"temp")}catch(ik){throw Oy.error(ik),fe(ik,"ERR_CANNOT_GET_KEY")}return gd(t.public.bytes,t.bytes)};async function a(r,s={}){const a=!(!1===s.resolve),l=s.lifetime||"24h",c=s.key||"self";if(!o())throw fe(new Error($c),"OFFLINE_ERROR");try{r=Kc(r)}catch(ik){throw Oy.error(ik),ik}let u=0;try{u=Lc(l)||0,u=parseFloat(u.toFixed(6))}catch(ik){throw Oy.error(ik),ik}const d=await Promise.all([i(c),a?xy({ipns:e,repo:t,codecs:n},r):Promise.resolve()]),h=mi(r),p=await e.publish(d[0],h,u,s);return{name:p.name,value:Ti(p.value)}}return Mc(a)}var Py=n(2734);const Dy=T.bind({ignoreUndefined:!0}),Uy=pe("ipfs:name:resolve"),Ly=(e,t)=>t.length>0?e+"/"+t.join("/"):e;function By({dns:e,ipns:t,isOnline:n,options:{offline:r}}){async function*o(o,s={}){if(s=Dy({nocache:!1,recursive:!0},s),r&&s&&s.nocache)throw fe(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!n()&&!r)throw fe(new Error($c),"OFFLINE_ERROR");let i=o.toString();i.startsWith("/ipns/")||(i=`/ipns/${i}`);let[a,l,...c]=i.slice(1).split("/");try{if("1"===l.substring(0,1)){const e=hd(l),t=nt(e.toBytes()),n=lt.createV1(114,t);l=n.toString(xs)}else{const e=lt.parse(l);1===e.version&&(l=e.toString(xs))}}catch(ik){if(Py(l))return void(yield Ly(await e(l,s),c));throw Uy.error(ik),fe(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}const u=await t.resolve(`/${a}/${l}`,s);yield Ly(u instanceof Uint8Array?Ti(u):u,c)}return Mc(o)}function My(e,t){if(!e||!t||!t.ipnsPubsub)throw fe(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(e.routing instanceof vy)return e.routing;const n=(e.routing.stores||[]).find((e=>e instanceof vy));if(!n)throw fe(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return n}function Fy({ipns:e,options:t}){const n=t.EXPERIMENTAL;async function r(t,r={}){const o=My(e,n);return o.cancel(t,r)}return Mc(r)}function jy({ipns:e,options:t}){const n=t.EXPERIMENTAL;async function r(t={}){try{return{enabled:Boolean(My(e,n))}}catch(ik){return{enabled:!1}}}return Mc(r)}function zy({ipns:e,options:t}){const n=t.EXPERIMENTAL;async function r(t={}){const r=My(e,n);return r.getSubscriptions(t)}return Mc(r)}class $y{constructor({ipns:e,options:t}){this.cancel=Fy({ipns:e,options:t}),this.state=jy({ipns:e,options:t}),this.subs=zy({ipns:e,options:t})}}class Vy{constructor({dns:e,ipns:t,repo:n,codecs:r,peerId:o,isOnline:s,keychain:i,options:a}){this.publish=Ny({ipns:t,repo:n,codecs:r,peerId:o,isOnline:s,keychain:i}),this.resolve=By({dns:e,ipns:t,isOnline:s,options:a}),this.pubsub=new $y({ipns:t,options:a})}}const Hy=Ud().code,Ky={default:"<dst>",edges:"<src> -> <dst>"};function qy({repo:e,codecs:t,resolve:n,preload:r}){async function*o(o,s={}){if(0===s.maxDepth)return;if(s.edges&&s.format&&s.format!==Ky.default)throw new Error("Cannot set edges to true and also specify format");if(s.format=s.edges?Ky.edges:s.format,"number"!==typeof s.maxDepth&&(s.maxDepth=s.recursive?1/0:1),s.timeout){const e=new yi.TimeoutController(s.timeout),t=[e.signal];s.signal&&t.push(s.signal),s.signal=(0,Nc.anySignal)(t)}const i=Array.isArray(o)?o:[o],a=i.map((e=>Wy(r,e,s)));for(const r of a)try{yield*Yy(n,e,t,r,s)}catch(ik){yield{ref:"",err:ik.message}}}return o}function Wy(e,t,n){const{cid:r,path:o}=jc(t);return!1!==n.preload&&e(r),`/ipfs/${r}${o||""}`}async function*Yy(e,t,n,r,o){const s=await e(r,o),{cid:i}=jc(s),a=null!=o.maxDepth?o.maxDepth:1/0,l=o.unique||!1;for await(const c of Zy(t,n,i,a,l,o))c.parent&&(c.isDuplicate||(yield{ref:Gy(c.parent.cid,c.node.cid,c.node.name,o.format)}))}function Gy(e,t,n="",r=Ky.default){let o=r.replace(/<src>/g,e.toString());return o=o.replace(/<dst>/g,t.toString()),o=o.replace(/<linkname>/g,n),o}async function*Zy(e,t,n,r,o,s){const i=new Set;async function*a(n,l){const c=l+1;if(!(c>r))try{for await(const r of Jy(e,t,n.cid,s))yield{parent:n,node:r,isDuplicate:o&&i.has(r.cid.toString())},o&&i.add(r.cid.toString()),yield*a(r,c)}catch(ik){throw ik.code===Hy&&(ik.message=`Could not find object with CID: ${n.cid}`),ik}}yield*a({cid:n},0)}async function*Jy(e,t,n,r){const o=await e.blocks.get(n,r),s=await t.getCodec(n.code),i=s.decode(o),a=n.code===Ht,l=[];for(const[c,u]of Qy(i,l)){if(a){const e=c.match(/^Links\/(\d+)\/Hash$/);if(e){const t=Number(e[1]);if(t<i.Links.length){yield{name:i.Links[t].Name,cid:u};continue}}}yield{name:c,cid:u}}}const Qy=function*(e,t){if(null!=e&&!(e instanceof Uint8Array)){for(const[n,r]of Object.entries(e)){const e=[...t,n];if(null!=r&&"object"===typeof r)if(Array.isArray(r))for(const[t,n]of r.entries()){const r=[...e,t],o=lt.asCID(n);o?yield[r.join("/"),o]:"object"===typeof n&&(yield*Qy(n,r))}else{const t=lt.asCID(r);t?yield[e.join("/"),t]:yield*Qy(r,e)}}return[]}};function Xy({repo:e}){async function*t(t={}){for await(const n of e.blocks.queryKeys({},{signal:t.signal}))yield{ref:n.toString()}}return Mc(t)}function ev({network:e}){async function t(t={}){const{bitswap:n}=await e.use(t),r=n.getWantlist();return Array.from(r).map((e=>e[1].cid))}return Mc(t)}function tv({network:e}){async function t(t,n={}){const{bitswap:r}=await e.use(n),o=r.wantlistForPeer(t);return Array.from(o).map((e=>e[1].cid))}return Mc(t)}function nv({network:e}){async function t(t,n={}){const{bitswap:r}=await e.use(n);return Array.isArray(t)||(t=[t]),r.unwant(t)}return Mc(t)}function rv({network:e}){async function t(t={}){const n=(await e.use(t)).bitswap,r=n.stat().snapshot;return{provideBufLen:parseInt(r.providesBufferLength.toString()),blocksReceived:BigInt(r.blocksReceived.toString()),wantlist:Array.from(n.getWantlist()).map((e=>e[1].cid)),peers:n.peers(),dupBlksReceived:BigInt(r.dupBlksReceived.toString()),dupDataReceived:BigInt(r.dupDataReceived.toString()),dataReceived:BigInt(r.dataReceived.toString()),blocksSent:BigInt(r.blocksSent.toString()),dataSent:BigInt(r.dataSent.toString())}}return Mc(t)}class ov{constructor({network:e}){this.wantlist=ev({network:e}),this.wantlistForPeer=tv({network:e}),this.unwant=nv({network:e}),this.stat=rv({network:e})}}function sv(e){try{return sc.matches(e)}catch(ik){return!1}}function iv({repo:e}){async function t(t,n={}){if(!sv(t))throw new Error(`${t} is not a valid Multiaddr`);const r=await e.config.getAll(n),o=r.Bootstrap||[];return o.push(t.toString()),r.Bootstrap=Array.from(new Set(o)).sort(((e,t)=>e.localeCompare(t))),await e.config.replace(r),{Peers:[t]}}return Mc(t)}function av({repo:e}){async function t(t={}){const n=await e.config.getAll(t),r=n.Bootstrap||[];return n.Bootstrap=[],await e.config.replace(n),{Peers:r.map((e=>Da(e)))}}return Mc(t)}function lv({repo:e}){async function t(t={}){const n=await e.config.get("Bootstrap",t);return{Peers:(n||[]).map((e=>Da(e)))}}return Mc(t)}var cv=()=>({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}});function uv({repo:e}){async function t(t={}){const n=await e.config.getAll(t);return n.Bootstrap=cv().Bootstrap,await e.config.replace(n),{Peers:cv().Bootstrap.map((e=>Da(e)))}}return Mc(t)}function dv({repo:e}){async function t(t,n={}){if(!sv(t))throw new Error(`${t} is not a valid Multiaddr`);const r=await e.config.getAll(n);return r.Bootstrap=(r.Bootstrap||[]).filter((e=>e.toString()!==t.toString())),await e.config.replace(r),{Peers:[t]}}return Mc(t)}class hv{constructor({repo:e}){this.add=iv({repo:e}),this.list=lv({repo:e}),this.rm=dv({repo:e}),this.clear=av({repo:e}),this.reset=uv({repo:e})}}function pv({preload:e,repo:t}){async function n(n,r={}){return!1!==r.preload&&e(n),t.blocks.get(n,r)}return Mc(n)}function fv({codecs:e,hashers:t,repo:n,preload:r}){async function o(o,s={}){const i=s.pin?await n.gcLock.readLock():null;try{const i=null!=s.version?s.version:0,a=s.format||(0===i?"dag-pb":"raw"),l=await t.getHasher(s.mhtype||"sha2-256"),c=await l.digest(o),u=await e.getCodec(a),d=lt.create(i,u.code,c);return await n.blocks.put(d,o,{signal:s.signal}),!1!==s.preload&&r(d),!0===s.pin&&await n.pins.pinRecursively(d,{signal:s.signal}),d}finally{i&&i()}}return Mc(o)}function gv(){const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}const mv=globalThis.CustomEvent??Event;async function*yv(e,t={}){let n=t.concurrency??1/0;n<1&&(n=1/0);const r=null!=t.ordered&&t.ordered,o=new EventTarget,s=[];let i,a=gv(),l=gv(),c=!1,u=!1;function d(){return r?s[0]?.done:Boolean(s.find((e=>e.done)))}function*h(){while(s.length>0&&s[0].done){const e=s[0];if(s.shift(),!e.ok)throw u=!0,a.resolve(),e.err;yield e.value,a.resolve()}}function*p(){while(d())for(let e=0;e<s.length;e++)if(s[e].done){const t=s[e];if(s.splice(e,1),e--,!t.ok)throw u=!0,a.resolve(),t.err;yield t.value,a.resolve()}}o.addEventListener("task-complete",(()=>{l.resolve()})),Promise.resolve().then((async()=>{try{for await(const t of e){if(s.length===n&&(a=gv(),await a.promise),u)break;const e={done:!1};s.push(e),t().then((t=>{e.done=!0,e.ok=!0,e.value=t,o.dispatchEvent(new mv("task-complete"))}),(t=>{e.done=!0,e.err=t,o.dispatchEvent(new mv("task-complete"))}))}c=!0,o.dispatchEvent(new mv("task-complete"))}catch(ik){i=ik,o.dispatchEvent(new mv("task-complete"))}}));while(1){if(d()||(l=gv(),await l.promise),null!=i)throw i;if(r?yield*h():yield*p(),c&&0===s.length)break}}async function*vv(e,t){for await(const n of e)yield t(n)}async function*wv(...e){const t=ty({objectMode:!0});Promise.resolve().then((async()=>{try{await Promise.all(e.map((async e=>{for await(const n of e)t.push(n)}))),t.end()}catch(ik){t.end(ik)}})),yield*t}const bv=(...e)=>{let t;while(e.length>0)t=e.shift()(t);return t},Sv=e=>null!=e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next),_v=e=>null!=e&&"function"===typeof e.sink&&Sv(e.source),Ev=e=>t=>{const n=e.sink(t);if(null!=n.then){const t=ty({objectMode:!0});n.then((()=>{t.end()}),(e=>{t.end(e)}));const r=async function*(){yield*e.source,t.end()};return wv(t,r())}return e.source};function kv(e,...t){if(_v(e)){const t=e;e=()=>t.source}else if(Sv(e)){const t=e;e=()=>t}const n=[e,...t];if(n.length>1&&_v(n[n.length-1])&&(n[n.length-1]=n[n.length-1].sink),n.length>2)for(let r=1;r<n.length-1;r++)_v(n[r])&&(n[r]=Ev(n[r]));return bv(...n)}function Cv(e){return e instanceof Uint8Array?lt.decode(e):lt.parse(e.toString())}const Iv=8;function Av({repo:e}){async function*t(t,n={}){Array.isArray(t)||(t=[t]);const r=await e.gcLock.writeLock();try{yield*kv(t,(t=>vv(t,(t=>async()=>{t=Cv(t);const r={cid:t};try{const n=await e.blocks.has(t);if(!n)throw fe(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await e.blocks.delete(t)}catch(ik){n.force||(ik.message=`cannot remove ${t}: ${ik.message}`,r.error=ik)}return r}))),(e=>yv(e,{concurrency:Iv})),(e=>Zm(e,(()=>!n.quiet))))}finally{r()}}return Mc(t)}function Tv({repo:e,preload:t}){async function n(n,r={}){n=Cv(n),!1!==r.preload&&t(n);const o=await e.blocks.get(n);return{cid:n,size:o.length}}return Mc(n)}class Rv{constructor({codecs:e,hashers:t,preload:n,repo:r}){this.get=pv({preload:n,repo:r}),this.put=fv({codecs:e,hashers:t,preload:n,repo:r}),this.rm=Av({repo:r}),this.stat=Tv({preload:n,repo:r})}}async function*xv(e,t={}){const n=e.getReader();try{while(1){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&await n.cancel(),n.releaseLock()}}function Ov(e){return"function"===typeof e.stream?xv(e.stream()):xv(new Response(e).body)}function Nv(e){const[t,n]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:e=>{r.push(e)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}}function Pv(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Dv(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function Uv(e){return"object"===typeof e&&(e.path||e.content)}const Lv=e=>e&&"function"===typeof e.getReader;async function*Bv(e){yield e}async function Mv(e){if(Pv(e))return Bv(Fv(e));if("string"===typeof e||e instanceof String)return Bv(Fv(e.toString()));if(Dv(e))return Ov(e);if(Lv(e)&&(e=xv(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Nv(e),{value:n,done:r}=await t.peek();if(r)return Bv(new Uint8Array(0));if(t.push(n),Number.isInteger(n))return Bv(Uint8Array.from(await Wm(t)));if(Pv(n)||"string"===typeof n||n instanceof String)return vv(t,Fv)}throw fe(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function Fv(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):mi(e.toString())}async function*jv(e,t){if(null===e||void 0===e)throw fe(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if("string"===typeof e||e instanceof String)yield zv(e.toString(),t);else if(Pv(e)||Dv(e))yield zv(e,t);else{if(Lv(e)&&(e=xv(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Nv(e),{value:r,done:o}=await n.peek();if(o)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||Pv(r)||"string"===typeof r||r instanceof String)return void(yield zv(n,t));throw fe(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!Uv(e))throw fe(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield zv(e,t)}}async function zv(e,t){const{path:n,mode:r,mtime:o,content:s}=e,i={path:n||"",mode:Ie(r),mtime:Ae(o)};return s?i.content=await t(s):n||(i.content=await t(e)),i}function $v(e){return jv(e,Mv)}function Vv({addAll:e}){async function t(t,n={}){const r=await vd(e($v(t),n));if(null==r)throw Error("Failed to add a file, if you see this please report a bug");return r}return t}async function*Hv(e,t=1){let n=[];t<1&&(t=1);for await(const r of e){n.push(r);while(n.length>=t)yield n.slice(0,t),n=n.slice(t)}while(n.length>0)yield n.slice(0,t),n=n.slice(t)}async function*Kv(e,t=1){for await(const n of Hv(e,t)){const e=n.map((async e=>await e().then((e=>({ok:!0,value:e})),(e=>({ok:!1,err:e})))));for(let t=0;t<e.length;t++){const n=await e[t];if(!n.ok)throw n.err;yield n.value}}}var qv=n(469);function Wv(e){const t=new Array(4);for(let n=0;n<4;n++)t[n]=255&e,e>>=8;return new Uint8Array(t)}Ro({name:"murmur3-32",code:35,encode:e=>Wv(qv.x86.hash32(e))});const Yv=Ro({name:"murmur3-128",code:34,encode:e=>L(qv.x64.hash128(e))});Ro({name:"murmur3-x64-64",code:34,encode:e=>L(qv.x64.hash128(e)).subarray(0,8)});async function Gv(e){return(await Yv.encode(e)).slice(0,8).reverse()}const Zv={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Fs,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:Gv,hamtHashCode:34,hamtBucketBits:8};var Jv=(e={})=>{const t=T.bind({ignoreUndefined:!0});return t(Zv,e)};const Qv=async(e,t,n)=>{n.codec||(n.codec=i),n.hasher||(n.hasher=Fs),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===i&&n.hasher!==Fs&&(n.cidVersion=1);const r=await n.hasher.digest(e),o=lt.create(n.cidVersion,n.codec.code,r);return n.onlyHash||await t.put(o,e,{signal:n.signal}),o};var Xv=Qv;const ew=async(e,t,n)=>{const r=new Te({type:"directory",mtime:e.mtime,mode:e.mode}),o=Kt(Ft({Data:r.marshal()})),s=await Xv(o,t,n),i=e.path;return{cid:s,path:i,unixfs:r,size:o.length}};var tw=ew;async function nw(e,t){return t(await Wm(e))}var rw=nw;function ow(e,t,n){return sw(e,t,n)}async function sw(e,t,n){const r=[];for await(const o of Hv(e,n.maxChildrenPerNode))r.push(await t(o));return r.length>1?sw(r,t,n):r[0]}var iw=ow;async function aw(e,t,n){const r=new uw(n.layerRepeat);let o=0,s=1,i=r;for await(const a of Hv(e,n.maxChildrenPerNode))i.isFull()&&(i!==r&&r.addChild(await i.reduce(t)),o&&o%n.layerRepeat===0&&s++,i=new cw(s,n.layerRepeat,o),o++),i.append(a);return i&&i!==r&&r.addChild(await i.reduce(t)),r.reduce(t)}var lw=aw;class cw{constructor(e,t,n=0){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let n=[];return e.children.length&&(n=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))),t((e.data||[]).concat(n))}_findParent(e,t){const n=e.parent;if(n&&0!==n.depth)return n.children.length!==n.maxChildren&&n.maxChildren?n:this._findParent(n,t)}}class uw extends cw{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}async function*dw(e,t,n){for await(let r of e.content)yield async()=>{let o;n.progress(r.length,e.path);const s={codec:i,cidVersion:n.cidVersion,hasher:n.hasher,onlyHash:n.onlyHash};return n.rawLeaves?(s.codec=w,s.cidVersion=1):(o=new Te({type:n.leafType,data:r}),r=Kt({Data:o.marshal(),Links:[]})),{cid:await Xv(r,t,s),unixfs:o,size:r.length}}}var hw=dw;const pw={flat:rw,balanced:iw,trickle:lw};async function*fw(e,t,n){let r,o,s=-1;o="function"===typeof n.bufferImporter?n.bufferImporter:hw;for await(const i of Kv(o(e,t,n),n.blockWriteConcurrency))s++,0!==s?(1===s&&r&&(yield r,r=null),yield i):r=i;r&&(r.single=!0,yield r)}const gw=(e,t,n)=>{async function r(r){if(1===r.length&&r[0].single&&n.reduceSingleLeafToSelf){const o=r[0];if(void 0!==e.mtime||void 0!==e.mode){let r=await t.get(o.cid);o.unixfs=new Te({type:"file",mtime:e.mtime,mode:e.mode,data:r}),r=Kt(Ft({Data:o.unixfs.marshal()})),o.cid=await Xv(r,t,{...n,codec:i,hasher:n.hasher,cidVersion:n.cidVersion}),o.size=r.length}return{cid:o.cid,path:e.path,unixfs:o.unixfs,size:o.size}}const o=new Te({type:"file",mtime:e.mtime,mode:e.mode}),s=r.filter((e=>!(e.cid.code!==$s||!e.size)||(!(!e.unixfs||e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)))).map((e=>e.cid.code===$s?(o.addBlockSize(e.size),{Name:"",Tsize:e.size,Hash:e.cid}):(e.unixfs&&e.unixfs.data?o.addBlockSize(e.unixfs.data.length):o.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0),{Name:"",Tsize:e.size,Hash:e.cid}))),a={Data:o.marshal(),Links:s},l=Kt(Ft(a)),c=await Xv(l,t,n);return{cid:c,path:e.path,unixfs:o,size:l.length+a.Links.reduce(((e,t)=>e+t.Tsize),0)}}return r};function mw(e,t,n){const r=pw[n.strategy];if(!r)throw fe(new Error(`Unknown importer build strategy name: ${n.strategy}`),"ERR_BAD_STRATEGY");return r(fw(e,t,n),gw(e,t,n),n)}var yw=mw;const vw=Symbol.for("@achingbrain/uint8arraylist");function ww(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");let n=0;for(const r of e){const e=n+r.byteLength;if(t<e)return{buf:r,index:t-n};n=e}throw new RangeError("index is out of bounds")}function bw(e){return Boolean(e?.[vw])}class Sw{constructor(...e){Object.defineProperty(this,vw,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(const n of e)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else{if(!bw(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");t+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(const n of e.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else{if(!bw(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");t+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=t}get(e){const t=ww(this.bufs,e);return t.buf[t.index]}set(e,t){const n=ww(this.bufs,e);n.buf[n.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(t+n,e[n]);else{if(!bw(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<e.length;n++)this.set(t+n,e.get(n))}}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength)return this.bufs=[],void(this.length=0);while(this.bufs.length>0){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(e,t){const{bufs:n,length:r}=this._subList(e,t);return ji(n,r)}subarray(e,t){const{bufs:n,length:r}=this._subList(e,t);return 1===n.length?n[0]:ji(n,r)}sublist(e,t){const{bufs:n,length:r}=this._subList(e,t),o=new Sw;return o.length=r,o.bufs=n,o}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:[...this.bufs],length:this.length};const n=[];let r=0;for(let o=0;o<this.bufs.length;o++){const s=this.bufs[o],i=r,a=i+s.byteLength;if(r=a,e>=a)continue;const l=e>=i&&e<a,c=t>i&&t<=a;if(l&&c){if(e===i&&t===a){n.push(s);break}const r=e-i;n.push(s.subarray(r,r+(t-e)));break}if(l){if(0===e){n.push(s);continue}n.push(s.subarray(e-i))}else{if(c){if(t===a){n.push(s);break}n.push(s.subarray(0,t-i));break}n.push(s)}}return{bufs:n,length:t-e}}indexOf(e,t=0){if(!bw(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=e instanceof Uint8Array?e:e.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const o=256,s=new Int32Array(o);for(let u=0;u<o;u++)s[u]=-1;for(let u=0;u<r;u++)s[n[u]]=u;const i=s,a=this.byteLength-n.byteLength,l=n.byteLength-1;let c;for(let u=t;u<=a;u+=c){c=0;for(let e=l;e>=0;e--){const t=this.get(u+e);if(n[e]!==t){c=Math.max(1,e-i[t]);break}}if(0===c)return u}return-1}getInt8(e){const t=this.subarray(e,e+1),n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getInt8(0)}setInt8(e,t){const n=ui(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setInt8(0,t),this.write(n,e)}getInt16(e,t){const n=this.subarray(e,e+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt16(0,t)}setInt16(e,t,n){const r=ci(2),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setInt16(0,t,n),this.write(r,e)}getInt32(e,t){const n=this.subarray(e,e+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt32(0,t)}setInt32(e,t,n){const r=ci(4),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setInt32(0,t,n),this.write(r,e)}getBigInt64(e,t){const n=this.subarray(e,e+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigInt64(0,t)}setBigInt64(e,t,n){const r=ci(8),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setBigInt64(0,t,n),this.write(r,e)}getUint8(e){const t=this.subarray(e,e+1),n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getUint8(0)}setUint8(e,t){const n=ui(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setUint8(0,t),this.write(n,e)}getUint16(e,t){const n=this.subarray(e,e+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint16(0,t)}setUint16(e,t,n){const r=ci(2),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setUint16(0,t,n),this.write(r,e)}getUint32(e,t){const n=this.subarray(e,e+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint32(0,t)}setUint32(e,t,n){const r=ci(4),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setUint32(0,t,n),this.write(r,e)}getBigUint64(e,t){const n=this.subarray(e,e+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigUint64(0,t)}setBigUint64(e,t,n){const r=ci(8),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setBigUint64(0,t,n),this.write(r,e)}getFloat32(e,t){const n=this.subarray(e,e+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(0,t)}setFloat32(e,t,n){const r=ci(4),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setFloat32(0,t,n),this.write(r,e)}getFloat64(e,t){const n=this.subarray(e,e+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(0,t)}setFloat64(e,t,n){const r=ci(8),o=new DataView(r.buffer,r.byteOffset,r.byteLength);o.setFloat64(0,t,n),this.write(r,e)}equals(e){if(null==e)return!1;if(!(e instanceof Sw))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!wa(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){const n=new Sw;return n.bufs=e,null==t&&(t=e.reduce(((e,t)=>e+t.byteLength),0)),n.length=t,n}}var _w=n(3060);async function*Ew(e,t){let n,r,o;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize)o=t.avgChunkSize,n=t.minChunkSize,r=t.maxChunkSize;else{if(!t.avgChunkSize)throw fe(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");o=t.avgChunkSize,n=o/3,r=o+o/2}if(n<16)throw fe(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");r<n&&(r=n),o<n&&(o=n);const s=Math.floor(Math.log2(o));for await(const i of Cw(e,{min:n,max:r,bits:s,window:t.window,polynomial:t.polynomial}))yield i}var kw=Ew;async function*Cw(e,t){const n=await(0,_w.create)(t.bits,t.min,t.max,t.window),r=new Sw;for await(const o of e){r.append(o);const e=n.fingerprint(o);for(let t=0;t<e.length;t++){const n=e[t],o=r.slice(0,n);r.consume(n),yield o}}r.length&&(yield r.subarray(0))}async function*Iw(e,t){let n=new Sw,r=0,o=!1;const s=t.maxChunkSize;for await(const i of e){n.append(i),r+=i.length;while(r>=s)if(yield n.slice(0,s),o=!0,s===n.length)n=new Sw,r=0;else{const e=new Sw;e.append(n.sublist(s)),n=e,r-=s}}o&&!r||(yield n.subarray(0,r))}var Aw=Iw;async function*Tw(e){for await(const t of e){if(void 0===t.length)throw fe(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"===typeof t||t instanceof String)yield mi(t.toString());else if(Array.isArray(t))yield Uint8Array.from(t);else{if(!(t instanceof Uint8Array))throw fe(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield t}}}var Rw=Tw;function xw(e){return Symbol.iterator in e}function Ow(e){return Symbol.asyncIterator in e}function Nw(e){try{if(e instanceof Uint8Array)return async function*(){yield e}();if(xw(e))return async function*(){yield*e}();if(Ow(e))return e}catch{throw fe(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw fe(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*Pw(e,t,n){for await(const r of e)if(r.path&&("./"===r.path.substring(0,2)&&(n.wrapWithDirectory=!0),r.path=r.path.split("/").filter((e=>e&&"."!==e)).join("/")),r.content){let e,o;e="function"===typeof n.chunker?n.chunker:"rabin"===n.chunker?kw:Aw,o="function"===typeof n.chunkValidator?n.chunkValidator:Rw;const s={path:r.path,mtime:r.mtime,mode:r.mode,content:e(o(Nw(r.content),n),n)};yield()=>yw(s,t,n)}else{if(!r.path)throw new Error("Import candidate must have content or path or both");{const e={path:r.path,mtime:r.mtime,mode:r.mode};yield()=>tw(e,t,n)}}}var Dw=Pw;class Uw{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}var Lw=Uw;class Bw extends Lw{constructor(e,t){super(e,t),this._children={}}async put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const n=e[t];yield{key:n,child:this._children[n]}}}async*flush(e){const t=Object.keys(this._children),n=[];for(let l=0;l<t.length;l++){let r=this._children[t[l]];if(r instanceof Lw)for await(const t of r.flush(e))r=t,yield r;null!=r.size&&r.cid&&n.push({Name:t[l],Tsize:r.size,Hash:r.cid})}const r=new Te({type:"directory",mtime:this.mtime,mode:this.mode}),o={Data:r.marshal(),Links:n},s=Kt(Ft(o)),i=await Xv(s,e,this.options),a=s.length+o.Links.reduce(((e,t)=>e+(null==t.Tsize?0:t.Tsize)),0);this.cid=i,this.size=a,yield{cid:i,unixfs:r,path:this.path,size:a}}}var Mw=Bw,Fw=n(544);class jw{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new Fw,this.key=null}async put(e,t){const n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){const t=await this._findChild(e);if(null!=t)return t.value}async del(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);null!=n&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){const e=this._children.compactArray();return e.reduce(((e,t)=>t instanceof jw?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)t instanceof jw?yield*t.eachLeafSeries():yield t}serialize(e,t){const n=[];return t(this._children.reduce(((n,r,o)=>(null!=r&&(r instanceof jw?n.push(r.serialize(e,t)):n.push(e(r,o))),n)),n))}async asyncTransform(e,t){return await Hw(this,e,t)}toJSON(){return this.serialize($w,Vw)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof jw))return null!=n&&n.key===e?n:void 0}async _findPlace(e){const t=this._options.hash("string"===typeof e?mi(e):e),n=await t.take(this._options.bits),r=this._children.get(n);return r instanceof jw?await r._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:r}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(null!=t.existingChild&&t.existingChild.key!==e){const e=new jw(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const n=await e._findPlace(t.existingChild.hash);return n.bucket._putAt(n,t.existingChild.key,t.existingChild.value),await e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){null==this._children.get(e)&&this._popCount++,this._children.set(e,t)}_delAt(e){if(-1===e)throw new Error("Invalid position");null!=this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(zw);if(null!=e&&!(e instanceof jw)){const t=e.hash;t.untake(this._options.bits);const n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function zw(e){return Boolean(e)}function $w(e,t){return e.key}function Vw(e){return e}async function Hw(e,t,n){const r=[];for(const o of e._children.compactArray())if(o instanceof jw)await Hw(o,t,n);else{const n=await t(o);r.push({bitField:e._children.bitField(),children:n})}return await n(r)}const Kw=[255,254,252,248,240,224,192,128],qw=[1,3,7,15,31,63,127,255];class Ww{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,n=0;while(t>0&&this._haveBits()){const e=this._value[this._currentBytePos],r=this._currentBitPos+1,o=Math.min(r,t),s=Yw(e,r-o,o);n=(n<<o)+s,t-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){this._currentBitPos+=e;while(this._currentBitPos>7)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function Yw(e,t,n){const r=Gw(t,n);return(e&r)>>>t}function Gw(e,t){return Kw[e]&qw[Math.min(t+e-1,7)]}function Zw(e){function t(t){return t instanceof Jw?t:new Jw(t,e)}return t}class Jw{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;while(this._availableBits<t)await this._produceMoreBits();let n=0;while(t>0){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.availableBits(),t),o=e.take(r);n=(n<<r)+o,t-=r,this._availableBits-=r,0===e.availableBits()&&this._currentBufferIndex++}return n}untake(e){let t=e;while(t>0){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.totalBits()-e.availableBits(),t);e.untake(n),t-=n,this._availableBits+=n,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?ji([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new Ww(t);this._buffers.push(n),this._availableBits+=n.availableBits()}}function Qw(e){if(null==e||null==e.hashFn)throw new Error("please define an options.hashFn");const t={bits:e.bits??8,hash:Zw(e.hashFn)};return new jw(t)}class Xw extends Lw{constructor(e,t){super(e,t),this._bucket=Qw({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){for await(const t of tb(this._bucket,e,this,this.options))yield{...t,path:this.path}}}var eb=Xw;async function*tb(e,t,n,r){const o=e._children,s=[];let i=0;for(let p=0;p<o.length;p++){const e=o.get(p);if(!e)continue;const n=p.toString(16).toUpperCase().padStart(2,"0");if(e instanceof jw){let o;for await(const n of await tb(e,t,null,r))o=n;if(!o)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:n,Tsize:o.size,Hash:o.cid}),i+=o.size}else if("function"===typeof e.value.flush){const r=e.value;let o;for await(const e of r.flush(t))o=e,yield o;const a=n+e.key;s.push({Name:a,Tsize:o.size,Hash:o.cid}),i+=o.size}else{const t=e.value;if(!t.cid)continue;const r=n+e.key,o=t.size;s.push({Name:r,Tsize:o,Hash:t.cid}),i+=o}}const a=Uint8Array.from(o.bitField().reverse()),l=new Te({type:"hamt-sharded-directory",data:a,fanout:e.tableSize(),hashType:r.hamtHashCode,mtime:n&&n.mtime,mode:n&&n.mode}),c={Data:l.marshal(),Links:s},u=Kt(Ft(c)),d=await Xv(u,t,r),h=u.length+i;yield{cid:d,unixfs:l,size:h}}async function nb(e,t,n,r){let o=t;t instanceof Mw&&t.directChildrenCount()>=n&&(o=await rb(t,r));const s=o.parent;if(s){if(o!==t){if(e&&(e.parent=o),!o.parentKey)throw new Error("No parent key found");await s.put(o.parentKey,o)}return nb(o,s,n,r)}return o}async function rb(e,t){const n=new eb({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1,mtime:e.mtime,mode:e.mode},t);for await(const{key:r,child:o}of e.eachChildSeries())await n.put(r,o);return n}var ob=nb;const sb=(e="")=>(e.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);var ib=sb;async function ab(e,t,n){const r=ib(e.path||""),o=r.length-1;let s=t,i="";for(let a=0;a<r.length;a++){const l=r[a];i+=`${i?"/":""}${l}`;const c=a===o;if(s.dirty=!0,s.cid=void 0,s.size=void 0,c)await s.put(l,e),t=await ob(null,s,n.shardSplitThreshold,n);else{let e=await s.get(l);e&&e instanceof Lw||(e=new Mw({root:!1,dir:!0,parent:s,parentKey:l,path:i,dirty:!0,flat:!0,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},n)),await s.put(l,e),s=e}}return t}async function*lb(e,t){e instanceof Lw?yield*e.flush(t):e&&e.unixfs&&e.unixfs.isDirectory()&&(yield e)}async function*cb(e,t,n){let r=new Mw({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n);for await(const o of e)o&&(r=await ab(o,r,n),o.unixfs&&o.unixfs.isDirectory()||(yield o));if(n.wrapWithDirectory)yield*lb(r,t);else for await(const o of r.eachChildSeries())o&&(yield*lb(o.child,t))}var ub=cb;async function*db(e,t,n={}){const r=Jv(n);let o,s,i;o="function"===typeof n.dagBuilder?n.dagBuilder:Dw,s="function"===typeof n.treeBuilder?n.treeBuilder:ub,i=Symbol.asyncIterator in e||Symbol.iterator in e?e:[e];for await(const a of s(Kv(o(i,t,r),r.fileImportConcurrency),t,r))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}async function*hb(e,t){if("string"===typeof e||e instanceof String||Pv(e)||Dv(e)||e._readableState)throw fe(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Lv(e)&&(e=xv(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Nv(e),{value:r,done:o}=await n.peek();if(o)return void(yield*[]);if(n.push(r),Number.isInteger(r))throw fe(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState)return void(yield*vv(n,(e=>pb({content:e},t))));if(Pv(r))return void(yield pb({content:n},t));if(Uv(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||Lv(r)||Dv(r))return void(yield*vv(n,(e=>pb(e,t))))}if(Uv(e))throw fe(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw fe(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function pb(e,t){const{path:n,mode:r,mtime:o,content:s}=e,i={path:n||"",mode:Ie(r),mtime:Ae(o)};return s?i.content=await t(s):n||(i.content=await t(e)),i}function fb(e){return hb(e,Mv)}const gb=e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],n=parseInt(t);if(isNaN(n))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:n}}if(e.startsWith("rabin"))return{chunker:"rabin",...mb(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},mb=e=>{const t={},n=e.split("-");switch(n.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=yb(n[1],"avg");break;case 4:t.minChunkSize=yb(n[1],"min"),t.avgChunkSize=yb(n[2],"avg"),t.maxChunkSize=yb(n[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},yb=(e,t)=>{const n=parseInt(e);if(isNaN(n))throw new Error(`Chunker parameter ${t} must be an integer`);return n},vb=T.bind({ignoreUndefined:!0});function wb({repo:e,preload:t,hashers:n,options:r}){const o=r&&r.sharding;async function*s(r,s={}){const i=vb({shardSplitThreshold:o?1e3:1/0,strategy:"balanced"},s,{...gb(s.chunker)});i.hashAlg&&"sha2-256"!==i.hashAlg&&1!==i.cidVersion&&(i.cidVersion=1),i.trickle&&(i.strategy="trickle"),"trickle"===i.strategy&&(i.leafType="raw",i.reduceSingleLeafToSelf=!1),i.cidVersion>0&&void 0===i.rawLeaves&&(i.rawLeaves=!0),void 0!==i.hashAlg&&void 0===i.rawLeaves&&(i.rawLeaves=!0),delete i.trickle;const a={};if(i.progress){const e=i.progress;i.progress=(t,n)=>{a[n]||(a[n]=0),a[n]+=t,e(a[n],n)}}let l;null!=i.hashAlg&&(l=await n.getHasher(i.hashAlg));const c=kv(fb(r),(t=>db(t,e.blocks,{...i,hasher:l,pin:!1})),bb(i),Sb(t,i),_b(e,i)),u=await e.gcLock.readLock();try{for await(const e of c){const t=e.path??e.cid.toString();delete a[t],yield{...e,path:t}}}finally{u()}}return Mc(s)}function bb(e){async function*t(t){for await(const n of t){let t=n.cid;1===e.cidVersion&&(t=t.toV1());let r=n.path?n.path:t.toString();e.wrapWithDirectory&&!n.path&&(r=""),yield{path:r,cid:t,size:n.size,mode:n.unixfs&&n.unixfs.mode,mtime:n.unixfs&&n.unixfs.mtime}}}return t}function Sb(e,t){async function*n(n){for await(const r of n){const n=!r.path||t.wrapWithDirectory?""===r.path:!r.path.includes("/"),o=n&&!t.onlyHash&&!1!==t.preload;o&&e(r.cid),yield r}}return n}function _b(e,t){async function*n(n){for await(const r of n){const n=!(r.path&&r.path.includes("/")),o=(null==t.pin||t.pin)&&n&&!t.onlyHash;o&&await e.pins.pinRecursively(r.cid),yield r}}return n}const Eb=async function(e){return(await Yv.encode(e)).slice(0,8).reverse()},kb=(e,t,n)=>Promise.all(e.map((e=>{if(null==e.Name)throw new Error("Unexpected Link without a Name");if(2===e.Name.length){const r=parseInt(e.Name,16);return t._putObjectAt(r,new jw({hash:n._options.hash,bits:n._options.bits},t,r))}return n.put(e.Name.substring(2),!0)}))),Cb=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Ib=e=>{let t=e.bucket;const n=[];while(t._parent)n.push(t),t=t._parent;return n.push(t),n.reverse()},Ab=async(e,t,n,r,o)=>{if(!r){const e=Qw({hashFn:Eb});r={rootBucket:e,hamtDepth:1,lastBucket:e}}await kb(e.Links,r.lastBucket,r.rootBucket);const s=await r.rootBucket._findNewBucketAndPos(t);let i=Cb(s.pos);const a=Ib(s);a.length>r.hamtDepth&&(r.lastBucket=a[r.hamtDepth],i=Cb(r.lastBucket._posAtParent));const l=e.Links.find((e=>{if(null==e.Name)return!1;const n=e.Name.substring(0,2),r=e.Name.substring(2);return n===i&&(!r||r===t)}));if(!l)return null;if(null!=l.Name&&l.Name.substring(2)===t)return l.Hash;r.hamtDepth++;const c=await n.get(l.Hash,o);return e=qt(c),Ab(e,t,n,r,o)};var Tb=Ab;function Rb(e,t,n,r){const o=e.length,s=t+o;return n>=s||r<t?new Uint8Array(0):(r>=t&&r<s&&(e=e.subarray(0,r-t)),n>=t&&n<s&&(e=e.subarray(n-t)),e)}var xb=Rb;const Ob=(e,t,n)=>{if(t||(t=0),t<0)throw fe(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw fe(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(n||0===n||(n=e-t),n<0)throw fe(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+n>e&&(n=e-t),{offset:t,length:n}};var Nb=Ob;async function Pb(e,t,n,r,o,s,i,a){if(t instanceof Uint8Array)return void n.push(xb(t,r,o,s));if(null==t.Data)throw fe(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let l;try{l=Te.unmarshal(t.Data)}catch(ik){throw fe(ik,"ERR_NOT_UNIXFS")}if(null!=l.data){const e=l.data,t=xb(e,r,o,s);n.push(t),r+=t.byteLength}const c=[];for(let u=0;u<t.Links.length;u++){const e=t.Links[u],n=r,i=n+l.blockSizes[u];if((o>=n&&o<i||s>=n&&s<=i||o<n&&s>i)&&c.push({link:e,blockStart:r}),r=i,r>s)break}await kv(c,(t=>vv(t,(t=>async()=>{const n=await e.get(t.link.Hash,{signal:a.signal});return{...t,block:n}}))),(e=>yv(e,{ordered:!0})),(async t=>{for await(const{link:r,block:l,blockStart:c}of t){let t;switch(r.Hash.code){case Ht:t=qt(l);break;case $s:t=l;break;default:return void n.end(fe(new Error(`Unsupported codec: ${r.Hash.code}`),"ERR_NOT_UNIXFS"))}i.add((async()=>{await Pb(e,t,n,c,o,s,i,a)}))}}))}const Db=(e,t,n,r,o,s,i)=>{async function*a(e={}){const r=n.fileSize();if(void 0===r)throw new Error("File was a directory");const{offset:o,length:s}=Nb(r,e.offset,e.length);if(0===s)return;const a=new zu({concurrency:1}),l=ty();a.add((async()=>{await Pb(i,t,l,0,o,o+s,a,e)})),a.on("error",(e=>{l.end(e)}));let c=0;for await(const t of l)null!=t&&(c+=t.byteLength,c===s&&l.end(),yield t)}return a};var Ub=Db;const Lb=(e,t,n,r,o,s,i)=>{async function*a(e={}){const n=e.offset||0,a=e.length||t.Links.length,l=t.Links.slice(n,a);for(const t of l){const n=await o(t.Hash,t.Name||"",`${r}/${t.Name||""}`,[],s+1,i,e);n.entry&&(yield n.entry)}}return a};var Bb=Lb;const Mb=(e,t,n,r,o,s,i)=>{function a(e={}){return Fb(t,r,o,s,i,e)}return a};async function*Fb(e,t,n,r,o,s){const i=e.Links;for(const a of i){const i=null!=a.Name?a.Name.substring(2):null;if(i){const e=await n(a.Hash,i,`${t}/${i}`,[],r+1,o,s);yield e.entry}else{const i=await o.get(a.Hash);e=qt(i);for await(const a of Fb(e,t,n,r,o,s))yield a}}}var jb=Mb;const zb=(e,t)=>{const n=e.Links.find((e=>e.Name===t));return n&&n.Hash},$b={raw:Ub,file:Ub,directory:Bb,"hamt-sharded-directory":jb,metadata:(e,t,n,r,o,s,i)=>()=>[],symlink:(e,t,n,r,o,s,i)=>()=>[]},Vb=async(e,t,n,r,o,s,i,a)=>{const l=await i.get(e,a),c=qt(l);let u,d;if(t||(t=e.toString()),null==c.Data)throw fe(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{u=Te.unmarshal(c.Data)}catch(ik){throw fe(ik,"ERR_NOT_UNIXFS")}if(n||(n=t),r.length){let e;if(e=u&&"hamt-sharded-directory"===u.type?await Tb(c,r[0],i):zb(c,r[0]),!e)throw fe(new Error("file does not exist"),"ERR_NOT_FOUND");const t=r.shift(),o=`${n}/${t}`;d={cid:e,toResolve:r,name:t||"",path:o}}return{entry:{type:u.isDirectory()?"directory":"file",name:t,path:n,cid:e,content:$b[u.type](e,c,u,n,o,s,i),unixfs:u,depth:s,node:c,size:u.fileSize()},next:d}};var Hb=Vb;const Kb=e=>{async function*t(t={}){const{offset:n,length:r}=Nb(e.length,t.offset,t.length);yield xb(e,0,n,n+r)}return t},qb=async(e,t,n,r,o,s,i,a)=>{if(r.length)throw fe(new Error(`No link named ${n} found in raw node ${e}`),"ERR_NOT_FOUND");const l=await i.get(e,a);return{entry:{type:"raw",name:t,path:n,cid:e,content:Kb(l),depth:s,size:l.length,node:l}}};var Wb=qb;const Yb=async(e,t,n,r,o,s,i,a)=>{const l=await i.get(e),c=To(l);let u=c,d=n;while(r.length){const o=r[0];if(!(o in u))throw fe(new Error(`No property named ${o} found in cbor node ${e}`),"ERR_NO_PROP");{r.shift(),d=`${d}/${o}`;const i=lt.asCID(u[o]);if(i)return{entry:{type:"object",name:t,path:n,cid:e,node:l,depth:s,size:l.length,content:async function*(){yield c}},next:{cid:i,name:o,path:d,toResolve:r}};u=u[o]}}return{entry:{type:"object",name:t,path:n,cid:e,node:l,depth:s,size:l.length,content:async function*(){yield c}}}};var Gb=Yb;const Zb=e=>{async function*t(t={}){const{offset:n,length:r}=Nb(e.length,t.offset,t.length);yield xb(e,0,n,n+r)}return t},Jb=async(e,t,n,r,o,s,i,a)=>{if(r.length)throw fe(new Error(`No link named ${n} found in raw node ${e}`),"ERR_NOT_FOUND");const l=await nt(e.multihash.bytes);return{entry:{type:"identity",name:t,path:n,cid:e,content:Zb(l.digest),depth:s,size:l.digest.length,node:l.digest}}};var Qb=Jb;const Xb={[Ht]:Hb,[$s]:Wb,[Io]:Gb,[Es.code]:Qb};function eS(e,t,n,r,o,s,i){const a=Xb[e.code];if(!a)throw fe(new Error(`No resolver for code ${e.code}`),"ERR_NO_RESOLVER");return a(e,t,n,r,eS,o,s,i)}var tS=eS;const nS=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),rS=e=>{if(e instanceof Uint8Array)return{cid:lt.decode(e),toResolve:[]};const t=lt.asCID(e);if(t)return{cid:t,toResolve:[]};if("string"===typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=nS(e);return{cid:lt.parse(t[0]),toResolve:t.slice(1)}}throw fe(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")};async function*oS(e,t,n={}){let{cid:r,toResolve:o}=rS(e),s=r.toString(),i=s;const a=o.length;while(1){const l=await tS(r,s,i,o,a,t,n);if(!l.entry&&!l.next)throw fe(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(l.entry&&(yield l.entry),!l.next)return;o=l.next.toResolve,r=l.next.cid,s=l.next.name,i=l.next.path}}async function sS(e,t,n={}){const r=await vd(oS(e,t,n));if(!r)throw fe(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");return r}async function*iS(e,t,n={}){const r=await sS(e,t,n);if(r&&(yield r,"directory"===r.type))for await(const s of o(r,n))yield s;async function*o(e,t){for await(const n of e.content(t))yield n,n instanceof Uint8Array||"directory"===n.type&&(yield*o(n,t))}}function aS({repo:e,preload:t}){async function*n(n,r={}){if(n=qc(n),!1!==r.preload){const e=n.split("/");t(lt.parse(e[0]))}const o=await sS(n,e.blocks,r);if("directory"===o.type)throw new Error("this dag node is a directory");if(!o.content)throw new Error("this dag node has no content");yield*o.content(r)}return Mc(n)}"0".charCodeAt(0),mi("ustar\0","binary"),mi("ustar ","binary"),mi(" \0","binary");function lS(e){const t=async function*(){let t=yield,n=new Sw;for await(const r of e)if(null!=t){n.append(r);while(n.length>=t){const e=n.sublist(0,t);if(n.consume(t),t=yield e,null==t){n.length>0&&(t=yield n,n=new Sw);break}}}else n.append(r),t=yield n,n=new Sw;if(null!=t)throw Object.assign(new Error(`stream ended before ${t} bytes became available`),{code:"ERR_UNDER_READ",buffer:n})}();return t.next(),t}var cS=n(1993);async function uS(e){let t=new Uint8Array(0);for await(const n of e)t=ji([t,n],t.length+n.length);return t}const dS="0000000000000000000",hS="7777777777777777777",pS="0".charCodeAt(0),fS=mi("ustar\0","binary"),gS=mi("00","binary"),mS=parseInt("7777",8),yS=257,vS=263,wS=function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72;default:return 0}},bS=function(e){let t=256;for(let n=0;n<148;n++)t+=e[n];for(let n=156;n<512;n++)t+=e[n];return t},SS=function(e,t){const n=e.toString(8);return n.length>t?mi(hS.slice(0,t)+" "):mi(dS.slice(0,t-n.length)+n+" ")},_S=function(e){const t=mi(e).byteLength;let n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,`${t+n}${e}`};function ES(e){let t="";null!=e.name&&(t+=_S(" path="+e.name+"\n")),null!=e.linkname&&(t+=_S(" linkpath="+e.linkname+"\n"));const n=e.pax;if(null!=n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t+=_S(" "+r+"="+n[r]+"\n"));return mi(t)}function kS(e){const t=new Uint8Array(512);let n=e.name,r="";if(5===e.typeflag&&"/"!==n[n.length-1]&&(n+="/"),mi(n).byteLength!==n.length)return null;while(mi(n).byteLength>100){const e=n.indexOf("/");if(-1===e)return null;r+=""!==r?"/"+n.slice(0,e):n.slice(0,e),n=n.slice(e+1)}return mi(n).byteLength>100||mi(r).byteLength>155||null!=e.linkname&&mi(e.linkname).byteLength>100?null:(t.set(mi(n),0),t.set(SS(e.mode&mS,6),100),t.set(SS(e.uid,6),108),t.set(SS(e.gid,6),116),t.set(SS(e.size,11),124),t.set(SS(e.mtime.getTime()/1e3|0,11),136),t[156]=pS+wS(e.type),null!=e.linkname&&t.set(mi(e.linkname),157),t.set(fS,yS),t.set(gS,vS),null!=e.uname&&t.set(mi(e.uname),265),null!=e.gname&&t.set(mi(e.gname),297),t.set(SS(e.devmajor??0,6),329),t.set(SS(e.devminor??0,6),337),null!=r&&t.set(mi(r),345),t.set(SS(bS(t),6),148),t)}const{S_IFMT:CS,S_IFBLK:IS,S_IFCHR:AS,S_IFDIR:TS,S_IFIFO:RS,S_IFLNK:xS}=cS,OS=parseInt("755",8),NS=parseInt("644",8),PS=new Uint8Array(1024);function DS(e=0){switch(e&CS){case IS:return"block-device";case AS:return"character-device";case TS:return"directory";case RS:return"fifo";case xS:return"symlink";default:return"file"}}function US(e){return e&=511,0!==e?PS.subarray(0,512-e):new Uint8Array(0)}function LS(e){if(null==e.pax){const t=kS(e);if(null!=t)return t}return BS(e)}function BS(e){const t=ES(e),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};return new Sw(kS(n)??new Uint8Array(0),t,US(t.length),kS({...n,size:e.size,type:e.type})??new Uint8Array(0)).subarray()}function MS(){return async function*(e){for await(let{header:t,body:n}of e){const e={...t,size:"symlink"===t.type?0:t.size??0,type:t.type??DS(t.mode),mode:t.mode??("directory"===t.type?OS:NS),uid:t.uid??0,gid:t.gid??0,mtime:t.mtime??new Date};if("string"===typeof n&&(n=mi(n)),n instanceof Uint8Array||bw(n)){e.size=n.length,yield LS(e),yield bw(n)?n.subarray():n,yield US(e.size);continue}if("symlink"===e.type&&null==e.linkname){if(null==n)throw new Error("type was symlink but no linkname or body specified");e.linkname=Ti(await uS(n)),yield LS(e);continue}if(yield LS(e),"file"!==e.type&&"contiguous-file"!==e.type)continue;let r=0;for await(const t of n??[])r+=t.length,yield bw(t)?t.subarray():t;if(r!==e.size)throw new Error(`size mismatch, wrote ${r} of ${e.size} bytes`);yield US(e.size)}yield PS}}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
const FS=4,jS=0,zS=1,$S=2;function VS(e){let t=e.length;while(--t>=0)e[t]=0}const HS=0,KS=1,qS=2,WS=3,YS=258,GS=29,ZS=256,JS=ZS+1+GS,QS=30,XS=19,e_=2*JS+1,t_=15,n_=16,r_=7,o_=256,s_=16,i_=17,a_=18,l_=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),c_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u_=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),d_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h_=512,p_=new Array(2*(JS+2));VS(p_);const f_=new Array(2*QS);VS(f_);const g_=new Array(h_);VS(g_);const m_=new Array(YS-WS+1);VS(m_);const y_=new Array(GS);VS(y_);const v_=new Array(QS);function w_(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}let b_,S_,__;function E_(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}VS(v_);const k_=e=>e<256?g_[e]:g_[256+(e>>>7)],C_=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},I_=(e,t,n)=>{e.bi_valid>n_-n?(e.bi_buf|=t<<e.bi_valid&65535,C_(e,e.bi_buf),e.bi_buf=t>>n_-e.bi_valid,e.bi_valid+=n-n_):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},A_=(e,t,n)=>{I_(e,n[2*t],n[2*t+1])},T_=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},R_=e=>{16===e.bi_valid?(C_(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},x_=(e,t)=>{const n=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,h,p,f,g=0;for(h=0;h<=t_;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<e_;c++)u=e.heap[c],h=n[2*n[2*u+1]+1]+1,h>l&&(h=l,g++),n[2*u+1]=h,u>r||(e.bl_count[h]++,p=0,u>=a&&(p=i[u-a]),f=n[2*u],e.opt_len+=f*(h+p),s&&(e.static_len+=f*(o[2*u+1]+p)));if(0!==g){do{h=l-1;while(0===e.bl_count[h])h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(h=l;0!==h;h--){u=e.bl_count[h];while(0!==u)d=e.heap[--c],d>r||(n[2*d+1]!==h&&(e.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}}},O_=(e,t,n)=>{const r=new Array(t_+1);let o,s,i=0;for(o=1;o<=t_;o++)i=i+n[o-1]<<1,r[o]=i;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=T_(r[t]++,t))}},N_=()=>{let e,t,n,r,o;const s=new Array(t_+1);for(n=0,r=0;r<GS-1;r++)for(y_[r]=n,e=0;e<1<<l_[r];e++)m_[n++]=r;for(m_[n-1]=r,o=0,r=0;r<16;r++)for(v_[r]=o,e=0;e<1<<c_[r];e++)g_[o++]=r;for(o>>=7;r<QS;r++)for(v_[r]=o<<7,e=0;e<1<<c_[r]-7;e++)g_[256+o++]=r;for(t=0;t<=t_;t++)s[t]=0;e=0;while(e<=143)p_[2*e+1]=8,e++,s[8]++;while(e<=255)p_[2*e+1]=9,e++,s[9]++;while(e<=279)p_[2*e+1]=7,e++,s[7]++;while(e<=287)p_[2*e+1]=8,e++,s[8]++;for(O_(p_,JS+1,s),e=0;e<QS;e++)f_[2*e+1]=5,f_[2*e]=T_(e,5);b_=new w_(p_,l_,ZS+1,JS,t_),S_=new w_(f_,c_,0,QS,t_),__=new w_(new Array(0),u_,0,XS,r_)},P_=e=>{let t;for(t=0;t<JS;t++)e.dyn_ltree[2*t]=0;for(t=0;t<QS;t++)e.dyn_dtree[2*t]=0;for(t=0;t<XS;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*o_]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},D_=e=>{e.bi_valid>8?C_(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},U_=(e,t,n,r)=>{const o=2*t,s=2*n;return e[o]<e[s]||e[o]===e[s]&&r[t]<=r[n]},L_=(e,t,n)=>{const r=e.heap[n];let o=n<<1;while(o<=e.heap_len){if(o<e.heap_len&&U_(t,e.heap[o+1],e.heap[o],e.depth)&&o++,U_(t,r,e.heap[o],e.depth))break;e.heap[n]=e.heap[o],n=o,o<<=1}e.heap[n]=r},B_=(e,t,n)=>{let r,o,s,i,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,o=e.pending_buf[e.sym_buf+a++],0===r?A_(e,o,t):(s=m_[o],A_(e,s+ZS+1,t),i=l_[s],0!==i&&(o-=y_[s],I_(e,o,i)),r--,s=k_(r),A_(e,s,n),i=c_[s],0!==i&&(r-=v_[s],I_(e,r,i)))}while(a<e.sym_next);A_(e,o_,t)},M_=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.elems;let i,a,l,c=-1;for(e.heap_len=0,e.heap_max=e_,i=0;i<s;i++)0!==n[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):n[2*i+1]=0;while(e.heap_len<2)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,o&&(e.static_len-=r[2*l+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)L_(e,n,i);l=s;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],L_(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=a,n[2*l]=n[2*i]+n[2*a],e.depth[l]=(e.depth[i]>=e.depth[a]?e.depth[i]:e.depth[a])+1,n[2*i+1]=n[2*a+1]=l,e.heap[1]=l++,L_(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],x_(e,t),O_(n,c,e.bl_count)},F_=(e,t,n)=>{let r,o,s=-1,i=t[1],a=0,l=7,c=4;for(0===i&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=i,i=t[2*(r+1)+1],++a<l&&o===i||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==s&&e.bl_tree[2*o]++,e.bl_tree[2*s_]++):a<=10?e.bl_tree[2*i_]++:e.bl_tree[2*a_]++,a=0,s=o,0===i?(l=138,c=3):o===i?(l=6,c=3):(l=7,c=4))},j_=(e,t,n)=>{let r,o,s=-1,i=t[1],a=0,l=7,c=4;for(0===i&&(l=138,c=3),r=0;r<=n;r++)if(o=i,i=t[2*(r+1)+1],!(++a<l&&o===i)){if(a<c)do{A_(e,o,e.bl_tree)}while(0!==--a);else 0!==o?(o!==s&&(A_(e,o,e.bl_tree),a--),A_(e,s_,e.bl_tree),I_(e,a-3,2)):a<=10?(A_(e,i_,e.bl_tree),I_(e,a-3,3)):(A_(e,a_,e.bl_tree),I_(e,a-11,7));a=0,s=o,0===i?(l=138,c=3):o===i?(l=6,c=3):(l=7,c=4)}},z_=e=>{let t;for(F_(e,e.dyn_ltree,e.l_desc.max_code),F_(e,e.dyn_dtree,e.d_desc.max_code),M_(e,e.bl_desc),t=XS-1;t>=3;t--)if(0!==e.bl_tree[2*d_[t]+1])break;return e.opt_len+=3*(t+1)+5+5+4,t},$_=(e,t,n,r)=>{let o;for(I_(e,t-257,5),I_(e,n-1,5),I_(e,r-4,4),o=0;o<r;o++)I_(e,e.bl_tree[2*d_[o]+1],3);j_(e,e.dyn_ltree,t-1),j_(e,e.dyn_dtree,n-1)},V_=e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return jS;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return zS;for(t=32;t<ZS;t++)if(0!==e.dyn_ltree[2*t])return zS;return jS};let H_=!1;const K_=e=>{H_||(N_(),H_=!0),e.l_desc=new E_(e.dyn_ltree,b_),e.d_desc=new E_(e.dyn_dtree,S_),e.bl_desc=new E_(e.bl_tree,__),e.bi_buf=0,e.bi_valid=0,P_(e)},q_=(e,t,n,r)=>{I_(e,(HS<<1)+(r?1:0),3),D_(e),C_(e,n),C_(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},W_=e=>{I_(e,KS<<1,3),A_(e,o_,p_),R_(e)},Y_=(e,t,n,r)=>{let o,s,i=0;e.level>0?(e.strm.data_type===$S&&(e.strm.data_type=V_(e)),M_(e,e.l_desc),M_(e,e.d_desc),i=z_(e),o=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=o&&(o=s)):o=s=n+5,n+4<=o&&-1!==t?q_(e,t,n,r):e.strategy===FS||s===o?(I_(e,(KS<<1)+(r?1:0),3),B_(e,p_,f_)):(I_(e,(qS<<1)+(r?1:0),3),$_(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),B_(e,e.dyn_ltree,e.dyn_dtree)),P_(e),r&&D_(e)},G_=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(m_[n]+ZS+1)]++,e.dyn_dtree[2*k_(t)]++),e.sym_next===e.sym_end);var Z_=K_,J_=q_,Q_=Y_,X_=G_,eE=W_,tE={_tr_init:Z_,_tr_stored_block:J_,_tr_flush_block:Q_,_tr_tally:X_,_tr_align:eE};const nE=(e,t,n,r)=>{let o=65535&e|0,s=e>>>16&65535|0,i=0;while(0!==n){i=n>2e3?2e3:n,n-=i;do{o=o+t[r++]|0,s=s+o|0}while(--i);o%=65521,s%=65521}return o|s<<16|0};var rE=nE;const oE=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t},sE=new Uint32Array(oE()),iE=(e,t,n,r)=>{const o=sE,s=r+n;e^=-1;for(let i=r;i<s;i++)e=e>>>8^o[255&(e^t[i])];return-1^e};var aE=iE,lE={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},cE={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:uE,_tr_stored_block:dE,_tr_flush_block:hE,_tr_tally:pE,_tr_align:fE}=tE,{Z_NO_FLUSH:gE,Z_PARTIAL_FLUSH:mE,Z_FULL_FLUSH:yE,Z_FINISH:vE,Z_BLOCK:wE,Z_OK:bE,Z_STREAM_END:SE,Z_STREAM_ERROR:_E,Z_DATA_ERROR:EE,Z_BUF_ERROR:kE,Z_DEFAULT_COMPRESSION:CE,Z_FILTERED:IE,Z_HUFFMAN_ONLY:AE,Z_RLE:TE,Z_FIXED:RE,Z_DEFAULT_STRATEGY:xE,Z_UNKNOWN:OE,Z_DEFLATED:NE}=cE,PE=9,DE=15,UE=8,LE=29,BE=256,ME=BE+1+LE,FE=30,jE=19,zE=2*ME+1,$E=15,VE=3,HE=258,KE=HE+VE+1,qE=32,WE=42,YE=57,GE=69,ZE=73,JE=91,QE=103,XE=113,ek=666,tk=1,nk=2,rk=3,ok=4,sk=3,ik=(e,t)=>(e.msg=lE[t],t),ak=e=>2*e-(e>4?9:0),lk=e=>{let t=e.length;while(--t>=0)e[t]=0},ck=e=>{let t,n,r,o=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=o?n-o:0}while(--t);t=o,r=t;do{n=e.prev[--r],e.prev[r]=n>=o?n-o:0}while(--t)};let uk=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,dk=uk;const hk=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},pk=(e,t)=>{hE(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,hk(e.strm)},fk=(e,t)=>{e.pending_buf[e.pending++]=t},gk=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},mk=(e,t,n,r)=>{let o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=rE(e.adler,t,o,n):2===e.state.wrap&&(e.adler=aE(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},yk=(e,t)=>{let n,r,o=e.max_chain_length,s=e.strstart,i=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-KE?e.strstart-(e.w_size-KE):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+HE;let p=c[s+i-1],f=c[s+i];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,c[n+i]===f&&c[n+i-1]===p&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<h);if(r=HE-(h-s),s=h-HE,r>i){if(e.match_start=t,i=r,r>=a)break;p=c[s+i-1],f=c[s+i]}}}while((t=d[t&u])>l&&0!==--o);return i<=e.lookahead?i:e.lookahead},vk=e=>{const t=e.w_size;let n,r,o;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-KE)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),ck(e),r+=t),0===e.strm.avail_in)break;if(n=mk(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=VE){o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=dk(e,e.ins_h,e.window[o+1]);while(e.insert)if(e.ins_h=dk(e,e.ins_h,e.window[o+VE-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,e.lookahead+e.insert<VE)break}}while(e.lookahead<KE&&0!==e.strm.avail_in)},wk=(e,t)=>{let n,r,o,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i=0,a=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>o&&(n=o),n<s&&(0===n&&t!==vE||t===gE||n!==r+e.strm.avail_in))break;i=t===vE&&n===r+e.strm.avail_in?1:0,dE(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,hk(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(mk(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===i);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?ok:t!==gE&&t!==vE&&0===e.strm.avail_in&&e.strstart===e.block_start?nk:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(mk(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,s=o>e.w_size?e.w_size:o,r=e.strstart-e.block_start,(r>=s||(r||t===vE)&&t!==gE&&0===e.strm.avail_in&&r<=o)&&(n=r>o?o:r,i=t===vE&&0===e.strm.avail_in&&n===r?1:0,dE(e,e.block_start,n,i),e.block_start+=n,hk(e.strm)),i?rk:tk)},bk=(e,t)=>{let n,r;for(;;){if(e.lookahead<KE){if(vk(e),e.lookahead<KE&&t===gE)return tk;if(0===e.lookahead)break}if(n=0,e.lookahead>=VE&&(e.ins_h=dk(e,e.ins_h,e.window[e.strstart+VE-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-KE&&(e.match_length=yk(e,n)),e.match_length>=VE)if(r=pE(e,e.strstart-e.match_start,e.match_length-VE),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=VE){e.match_length--;do{e.strstart++,e.ins_h=dk(e,e.ins_h,e.window[e.strstart+VE-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=dk(e,e.ins_h,e.window[e.strstart+1]);else r=pE(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(pk(e,!1),0===e.strm.avail_out))return tk}return e.insert=e.strstart<VE-1?e.strstart:VE-1,t===vE?(pk(e,!0),0===e.strm.avail_out?rk:ok):e.sym_next&&(pk(e,!1),0===e.strm.avail_out)?tk:nk},Sk=(e,t)=>{let n,r,o;for(;;){if(e.lookahead<KE){if(vk(e),e.lookahead<KE&&t===gE)return tk;if(0===e.lookahead)break}if(n=0,e.lookahead>=VE&&(e.ins_h=dk(e,e.ins_h,e.window[e.strstart+VE-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=VE-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-KE&&(e.match_length=yk(e,n),e.match_length<=5&&(e.strategy===IE||e.match_length===VE&&e.strstart-e.match_start>4096)&&(e.match_length=VE-1)),e.prev_length>=VE&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-VE,r=pE(e,e.strstart-1-e.prev_match,e.prev_length-VE),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=dk(e,e.ins_h,e.window[e.strstart+VE-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=VE-1,e.strstart++,r&&(pk(e,!1),0===e.strm.avail_out))return tk}else if(e.match_available){if(r=pE(e,0,e.window[e.strstart-1]),r&&pk(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return tk}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=pE(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<VE-1?e.strstart:VE-1,t===vE?(pk(e,!0),0===e.strm.avail_out?rk:ok):e.sym_next&&(pk(e,!1),0===e.strm.avail_out)?tk:nk},_k=(e,t)=>{let n,r,o,s;const i=e.window;for(;;){if(e.lookahead<=HE){if(vk(e),e.lookahead<=HE&&t===gE)return tk;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=VE&&e.strstart>0&&(o=e.strstart-1,r=i[o],r===i[++o]&&r===i[++o]&&r===i[++o])){s=e.strstart+HE;do{}while(r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&r===i[++o]&&o<s);e.match_length=HE-(s-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=VE?(n=pE(e,1,e.match_length-VE),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=pE(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(pk(e,!1),0===e.strm.avail_out))return tk}return e.insert=0,t===vE?(pk(e,!0),0===e.strm.avail_out?rk:ok):e.sym_next&&(pk(e,!1),0===e.strm.avail_out)?tk:nk},Ek=(e,t)=>{let n;for(;;){if(0===e.lookahead&&(vk(e),0===e.lookahead)){if(t===gE)return tk;break}if(e.match_length=0,n=pE(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(pk(e,!1),0===e.strm.avail_out))return tk}return e.insert=0,t===vE?(pk(e,!0),0===e.strm.avail_out?rk:ok):e.sym_next&&(pk(e,!1),0===e.strm.avail_out)?tk:nk};function kk(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}const Ck=[new kk(0,0,0,0,wk),new kk(4,4,8,4,bk),new kk(4,5,16,8,bk),new kk(4,6,32,32,bk),new kk(4,4,16,16,Sk),new kk(8,16,32,32,Sk),new kk(8,16,128,128,Sk),new kk(8,32,128,256,Sk),new kk(32,128,258,1024,Sk),new kk(32,258,258,4096,Sk)],Ik=e=>{e.window_size=2*e.w_size,lk(e.head),e.max_lazy_match=Ck[e.level].max_lazy,e.good_match=Ck[e.level].good_length,e.nice_match=Ck[e.level].nice_length,e.max_chain_length=Ck[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=VE-1,e.match_available=0,e.ins_h=0};function Ak(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=NE,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*zE),this.dyn_dtree=new Uint16Array(2*(2*FE+1)),this.bl_tree=new Uint16Array(2*(2*jE+1)),lk(this.dyn_ltree),lk(this.dyn_dtree),lk(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array($E+1),this.heap=new Uint16Array(2*ME+1),lk(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ME+1),lk(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Tk=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==WE&&t.status!==YE&&t.status!==GE&&t.status!==ZE&&t.status!==JE&&t.status!==QE&&t.status!==XE&&t.status!==ek?1:0},Rk=e=>{if(Tk(e))return ik(e,_E);e.total_in=e.total_out=0,e.data_type=OE;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?YE:t.wrap?WE:XE,e.adler=2===t.wrap?0:1,t.last_flush=-2,uE(t),bE},xk=e=>{const t=Rk(e);return t===bE&&Ik(e.state),t},Ok=(e,t)=>Tk(e)||2!==e.state.wrap?_E:(e.state.gzhead=t,bE),Nk=(e,t,n,r,o,s)=>{if(!e)return _E;let i=1;if(t===CE&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),o<1||o>PE||n!==NE||r<8||r>15||t<0||t>9||s<0||s>RE||8===r&&1!==i)return ik(e,_E);8===r&&(r=9);const a=new Ak;return e.state=a,a.strm=e,a.status=WE,a.wrap=i,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+VE-1)/VE),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,xk(e)},Pk=(e,t)=>Nk(e,t,NE,DE,UE,xE),Dk=(e,t)=>{if(Tk(e)||t>wE||t<0)return e?ik(e,_E):_E;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===ek&&t!==vE)return ik(e,0===e.avail_out?kE:_E);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(hk(e),0===e.avail_out)return n.last_flush=-1,bE}else if(0===e.avail_in&&ak(t)<=ak(r)&&t!==vE)return ik(e,kE);if(n.status===ek&&0!==e.avail_in)return ik(e,kE);if(n.status===WE&&0===n.wrap&&(n.status=XE),n.status===WE){let t=NE+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=AE||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=qE),t+=31-t%31,gk(n,t),0!==n.strstart&&(gk(n,e.adler>>>16),gk(n,65535&e.adler)),e.adler=1,n.status=XE,hk(e),0!==n.pending)return n.last_flush=-1,bE}if(n.status===YE)if(e.adler=0,fk(n,31),fk(n,139),fk(n,8),n.gzhead)fk(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),fk(n,255&n.gzhead.time),fk(n,n.gzhead.time>>8&255),fk(n,n.gzhead.time>>16&255),fk(n,n.gzhead.time>>24&255),fk(n,9===n.level?2:n.strategy>=AE||n.level<2?4:0),fk(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(fk(n,255&n.gzhead.extra.length),fk(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=aE(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=GE;else if(fk(n,0),fk(n,0),fk(n,0),fk(n,0),fk(n,0),fk(n,9===n.level?2:n.strategy>=AE||n.level<2?4:0),fk(n,sk),n.status=XE,hk(e),0!==n.pending)return n.last_flush=-1,bE;if(n.status===GE){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;while(n.pending+r>n.pending_buf_size){let o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=aE(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=o,hk(e),0!==n.pending)return n.last_flush=-1,bE;t=0,r-=o}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=aE(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=ZE}if(n.status===ZE){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=aE(e.adler,n.pending_buf,n.pending-r,r)),hk(e),0!==n.pending)return n.last_flush=-1,bE;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,fk(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=aE(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=JE}if(n.status===JE){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=aE(e.adler,n.pending_buf,n.pending-r,r)),hk(e),0!==n.pending)return n.last_flush=-1,bE;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,fk(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=aE(e.adler,n.pending_buf,n.pending-r,r))}n.status=QE}if(n.status===QE){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(hk(e),0!==n.pending))return n.last_flush=-1,bE;fk(n,255&e.adler),fk(n,e.adler>>8&255),e.adler=0}if(n.status=XE,hk(e),0!==n.pending)return n.last_flush=-1,bE}if(0!==e.avail_in||0!==n.lookahead||t!==gE&&n.status!==ek){let r=0===n.level?wk(n,t):n.strategy===AE?Ek(n,t):n.strategy===TE?_k(n,t):Ck[n.level].func(n,t);if(r!==rk&&r!==ok||(n.status=ek),r===tk||r===rk)return 0===e.avail_out&&(n.last_flush=-1),bE;if(r===nk&&(t===mE?fE(n):t!==wE&&(dE(n,0,0,!1),t===yE&&(lk(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),hk(e),0===e.avail_out))return n.last_flush=-1,bE}return t!==vE?bE:n.wrap<=0?SE:(2===n.wrap?(fk(n,255&e.adler),fk(n,e.adler>>8&255),fk(n,e.adler>>16&255),fk(n,e.adler>>24&255),fk(n,255&e.total_in),fk(n,e.total_in>>8&255),fk(n,e.total_in>>16&255),fk(n,e.total_in>>24&255)):(gk(n,e.adler>>>16),gk(n,65535&e.adler)),hk(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?bE:SE)},Uk=e=>{if(Tk(e))return _E;const t=e.state.status;return e.state=null,t===XE?ik(e,EE):bE},Lk=(e,t)=>{let n=t.length;if(Tk(e))return _E;const r=e.state,o=r.wrap;if(2===o||1===o&&r.status!==WE||r.lookahead)return _E;if(1===o&&(e.adler=rE(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===o&&(lk(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,i=e.next_in,a=e.input;e.avail_in=n,e.next_in=0,e.input=t,vk(r);while(r.lookahead>=VE){let e=r.strstart,t=r.lookahead-(VE-1);do{r.ins_h=dk(r,r.ins_h,r.window[e+VE-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=VE-1,vk(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=VE-1,r.match_available=0,e.next_in=i,e.input=a,e.avail_in=s,r.wrap=o,bE};var Bk=Pk,Mk=Nk,Fk=xk,jk=Rk,zk=Ok,$k=Dk,Vk=Uk,Hk=Lk,Kk="pako deflate (from Nodeca project)",qk={deflateInit:Bk,deflateInit2:Mk,deflateReset:Fk,deflateResetKeep:jk,deflateSetHeader:zk,deflate:$k,deflateEnd:Vk,deflateSetDictionary:Hk,deflateInfo:Kk};const Wk=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Yk=function(e){const t=Array.prototype.slice.call(arguments,1);while(t.length){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Wk(n,t)&&(e[t]=n[t])}}return e},Gk=e=>{let t=0;for(let r=0,o=e.length;r<o;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,o=0,s=e.length;r<s;r++){let t=e[r];n.set(t,o),o+=t.length}return n},Zk={assign:Yk,flattenChunks:Gk};let Jk=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(z5){Jk=!1}const Qk=new Uint8Array(256);for(let $5=0;$5<256;$5++)Qk[$5]=$5>=252?6:$5>=248?5:$5>=240?4:$5>=224?3:$5>=192?2:1;Qk[254]=Qk[254]=1;var Xk=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,o,s,i=e.length,a=0;for(o=0;o<i;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<i&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,o=0;s<a;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<i&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t};const eC=(e,t)=>{if(t<65534&&e.subarray&&Jk)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var tC=(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,o;const s=new Array(2*n);for(o=0,r=0;r<n;){let t=e[r++];if(t<128){s[o++]=t;continue}let i=Qk[t];if(i>4)s[o++]=65533,r+=i-1;else{t&=2===i?31:3===i?15:7;while(i>1&&r<n)t=t<<6|63&e[r++],i--;i>1?s[o++]=65533:t<65536?s[o++]=t:(t-=65536,s[o++]=55296|t>>10&1023,s[o++]=56320|1023&t)}}return eC(s,o)},nC=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;while(n>=0&&128===(192&e[n]))n--;return n<0||0===n?t:n+Qk[e[n]]>t?n:t},rC={string2buf:Xk,buf2string:tC,utf8border:nC};function oC(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var sC=oC;const iC=Object.prototype.toString,{Z_NO_FLUSH:aC,Z_SYNC_FLUSH:lC,Z_FULL_FLUSH:cC,Z_FINISH:uC,Z_OK:dC,Z_STREAM_END:hC,Z_DEFAULT_COMPRESSION:pC,Z_DEFAULT_STRATEGY:fC,Z_DEFLATED:gC}=cE;function mC(e){this.options=Zk.assign({level:pC,method:gC,chunkSize:16384,windowBits:15,memLevel:8,strategy:fC},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sC,this.strm.avail_out=0;let n=qk.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==dC)throw new Error(lE[n]);if(t.header&&qk.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?rC.string2buf(t.dictionary):"[object ArrayBuffer]"===iC.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=qk.deflateSetDictionary(this.strm,e),n!==dC)throw new Error(lE[n]);this._dict_set=!0}}function yC(e,t){const n=new mC(t);if(n.push(e,!0),n.err)throw n.msg||lE[n.err];return n.result}function vC(e,t){return t=t||{},t.raw=!0,yC(e,t)}function wC(e,t){return t=t||{},t.gzip=!0,yC(e,t)}mC.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let o,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?uC:aC,"string"===typeof e?n.input=rC.string2buf(e):"[object ArrayBuffer]"===iC.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===lC||s===cC)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=qk.deflate(n,s),o===hC)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=qk.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===dC;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},mC.prototype.onData=function(e){this.chunks.push(e)},mC.prototype.onEnd=function(e){e===dC&&(this.result=Zk.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var bC=mC,SC=yC,_C=vC,EC=wC,kC=cE,CC={Deflate:bC,deflate:SC,deflateRaw:_C,gzip:EC,constants:kC};const IC=16209,AC=16191;var TC=function(e,t){let n,r,o,s,i,a,l,c,u,d,h,p,f,g,m,y,v,w,b,S,_,E,k,C;const I=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),o=e.next_out,C=e.output,s=o-(t-e.avail_out),i=o+(e.avail_out-257),a=I.dmax,l=I.wsize,c=I.whave,u=I.wnext,d=I.window,h=I.hold,p=I.bits,f=I.lencode,g=I.distcode,m=(1<<I.lenbits)-1,y=(1<<I.distbits)-1;e:do{p<15&&(h+=k[n++]<<p,p+=8,h+=k[n++]<<p,p+=8),v=f[h&m];t:for(;;){if(w=v>>>24,h>>>=w,p-=w,w=v>>>16&255,0===w)C[o++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=f[(65535&v)+(h&(1<<w)-1)];continue t}if(32&w){I.mode=AC;break e}e.msg="invalid literal/length code",I.mode=IC;break e}b=65535&v,w&=15,w&&(p<w&&(h+=k[n++]<<p,p+=8),b+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=k[n++]<<p,p+=8,h+=k[n++]<<p,p+=8),v=g[h&y];n:for(;;){if(w=v>>>24,h>>>=w,p-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=g[(65535&v)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",I.mode=IC;break e}if(S=65535&v,w&=15,p<w&&(h+=k[n++]<<p,p+=8,p<w&&(h+=k[n++]<<p,p+=8)),S+=h&(1<<w)-1,S>a){e.msg="invalid distance too far back",I.mode=IC;break e}if(h>>>=w,p-=w,w=o-s,S>w){if(w=S-w,w>c&&I.sane){e.msg="invalid distance too far back",I.mode=IC;break e}if(_=0,E=d,0===u){if(_+=l-w,w<b){b-=w;do{C[o++]=d[_++]}while(--w);_=o-S,E=C}}else if(u<w){if(_+=l+u-w,w-=u,w<b){b-=w;do{C[o++]=d[_++]}while(--w);if(_=0,u<b){w=u,b-=w;do{C[o++]=d[_++]}while(--w);_=o-S,E=C}}}else if(_+=u-w,w<b){b-=w;do{C[o++]=d[_++]}while(--w);_=o-S,E=C}while(b>2)C[o++]=E[_++],C[o++]=E[_++],C[o++]=E[_++],b-=3;b&&(C[o++]=E[_++],b>1&&(C[o++]=E[_++]))}else{_=o-S;do{C[o++]=C[_++],C[o++]=C[_++],C[o++]=C[_++],b-=3}while(b>2);b&&(C[o++]=C[_++],b>1&&(C[o++]=C[_++]))}break}}break}}while(n<r&&o<i);b=p>>3,n-=b,p-=b<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=o,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=o<i?i-o+257:257-(o-i),I.hold=h,I.bits=p};const RC=15,xC=852,OC=592,NC=0,PC=1,DC=2,UC=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),LC=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),BC=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),MC=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),FC=(e,t,n,r,o,s,i,a)=>{const l=a.bits;let c,u,d,h,p,f,g=0,m=0,y=0,v=0,w=0,b=0,S=0,_=0,E=0,k=0,C=null;const I=new Uint16Array(RC+1),A=new Uint16Array(RC+1);let T,R,x,O=null;for(g=0;g<=RC;g++)I[g]=0;for(m=0;m<r;m++)I[t[n+m]]++;for(w=l,v=RC;v>=1;v--)if(0!==I[v])break;if(w>v&&(w=v),0===v)return o[s++]=20971520,o[s++]=20971520,a.bits=1,0;for(y=1;y<v;y++)if(0!==I[y])break;for(w<y&&(w=y),_=1,g=1;g<=RC;g++)if(_<<=1,_-=I[g],_<0)return-1;if(_>0&&(e===NC||1!==v))return-1;for(A[1]=0,g=1;g<RC;g++)A[g+1]=A[g]+I[g];for(m=0;m<r;m++)0!==t[n+m]&&(i[A[t[n+m]]++]=m);if(e===NC?(C=O=i,f=20):e===PC?(C=UC,O=LC,f=257):(C=BC,O=MC,f=0),k=0,m=0,g=y,p=s,b=w,S=0,d=-1,E=1<<w,h=E-1,e===PC&&E>xC||e===DC&&E>OC)return 1;for(;;){T=g-S,i[m]+1<f?(R=0,x=i[m]):i[m]>=f?(R=O[i[m]-f],x=C[i[m]-f]):(R=96,x=0),c=1<<g-S,u=1<<b,y=u;do{u-=c,o[p+(k>>S)+u]=T<<24|R<<16|x|0}while(0!==u);c=1<<g-1;while(k&c)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,m++,0===--I[g]){if(g===v)break;g=t[n+i[m]]}if(g>w&&(k&h)!==d){0===S&&(S=w),p+=y,b=g-S,_=1<<b;while(b+S<v){if(_-=I[b+S],_<=0)break;b++,_<<=1}if(E+=1<<b,e===PC&&E>xC||e===DC&&E>OC)return 1;d=k&h,o[d]=w<<24|b<<16|p-s|0}}return 0!==k&&(o[p+k]=g-S<<24|64<<16|0),a.bits=w,0};var jC=FC;const zC=0,$C=1,VC=2,{Z_FINISH:HC,Z_BLOCK:KC,Z_TREES:qC,Z_OK:WC,Z_STREAM_END:YC,Z_NEED_DICT:GC,Z_STREAM_ERROR:ZC,Z_DATA_ERROR:JC,Z_MEM_ERROR:QC,Z_BUF_ERROR:XC,Z_DEFLATED:eI}=cE,tI=16180,nI=16181,rI=16182,oI=16183,sI=16184,iI=16185,aI=16186,lI=16187,cI=16188,uI=16189,dI=16190,hI=16191,pI=16192,fI=16193,gI=16194,mI=16195,yI=16196,vI=16197,wI=16198,bI=16199,SI=16200,_I=16201,EI=16202,kI=16203,CI=16204,II=16205,AI=16206,TI=16207,RI=16208,xI=16209,OI=16210,NI=16211,PI=852,DI=592,UI=15,LI=UI,BI=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function MI(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const FI=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<tI||t.mode>NI?1:0},jI=e=>{if(FI(e))return ZC;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=tI,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(PI),t.distcode=t.distdyn=new Int32Array(DI),t.sane=1,t.back=-1,WC},zI=e=>{if(FI(e))return ZC;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,jI(e)},$I=(e,t)=>{let n;if(FI(e))return ZC;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ZC:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,zI(e))},VI=(e,t)=>{if(!e)return ZC;const n=new MI;e.state=n,n.strm=e,n.window=null,n.mode=tI;const r=$I(e,t);return r!==WC&&(e.state=null),r},HI=e=>VI(e,LI);let KI,qI,WI=!0;const YI=e=>{if(WI){KI=new Int32Array(512),qI=new Int32Array(32);let t=0;while(t<144)e.lens[t++]=8;while(t<256)e.lens[t++]=9;while(t<280)e.lens[t++]=7;while(t<288)e.lens[t++]=8;jC($C,e.lens,0,288,KI,0,e.work,{bits:9}),t=0;while(t<32)e.lens[t++]=5;jC(VC,e.lens,0,32,qI,0,e.work,{bits:5}),WI=!1}e.lencode=KI,e.lenbits=9,e.distcode=qI,e.distbits=5},GI=(e,t,n,r)=>{let o;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(o=s.wsize-s.wnext,o>r&&(o=r),s.window.set(t.subarray(n-r,n-r+o),s.wnext),r-=o,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0},ZI=(e,t)=>{let n,r,o,s,i,a,l,c,u,d,h,p,f,g,m,y,v,w,b,S,_,E,k=0;const C=new Uint8Array(4);let I,A;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(FI(e)||!e.output||!e.input&&0!==e.avail_in)return ZC;n=e.state,n.mode===hI&&(n.mode=pI),i=e.next_out,o=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,h=l,E=WC;e:for(;;)switch(n.mode){case tI:if(0===n.wrap){n.mode=pI;break}while(u<16){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=aE(n.check,C,2,0),c=0,u=0,n.mode=nI;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=xI;break}if((15&c)!==eI){e.msg="unknown compression method",n.mode=xI;break}if(c>>>=4,u-=4,_=8+(15&c),0===n.wbits&&(n.wbits=_),_>15||_>n.wbits){e.msg="invalid window size",n.mode=xI;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?uI:hI,c=0,u=0;break;case nI:while(u<16){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==eI){e.msg="unknown compression method",n.mode=xI;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=xI;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=aE(n.check,C,2,0)),c=0,u=0,n.mode=rI;case rI:while(u<32){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=aE(n.check,C,4,0)),c=0,u=0,n.mode=oI;case oI:while(u<16){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=aE(n.check,C,2,0)),c=0,u=0,n.mode=sI;case sI:if(1024&n.flags){while(u<16){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=aE(n.check,C,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=iI;case iI:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),_)),512&n.flags&&4&n.wrap&&(n.check=aE(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=aI;case aI:if(2048&n.flags){if(0===a)break e;p=0;do{_=r[s+p++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_))}while(_&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=aE(n.check,r,p,s)),a-=p,s+=p,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=lI;case lI:if(4096&n.flags){if(0===a)break e;p=0;do{_=r[s+p++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_))}while(_&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=aE(n.check,r,p,s)),a-=p,s+=p,_)break e}else n.head&&(n.head.comment=null);n.mode=cI;case cI:if(512&n.flags){while(u<16){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=xI;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=hI;break;case uI:while(u<32){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}e.adler=n.check=BI(c),c=0,u=0,n.mode=dI;case dI:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,GC;e.adler=n.check=1,n.mode=hI;case hI:if(t===KC||t===qC)break e;case pI:if(n.last){c>>>=7&u,u-=7&u,n.mode=AI;break}while(u<3){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=fI;break;case 1:if(YI(n),n.mode=bI,t===qC){c>>>=2,u-=2;break e}break;case 2:n.mode=yI;break;case 3:e.msg="invalid block type",n.mode=xI}c>>>=2,u-=2;break;case fI:c>>>=7&u,u-=7&u;while(u<32){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=xI;break}if(n.length=65535&c,c=0,u=0,n.mode=gI,t===qC)break e;case gI:n.mode=mI;case mI:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),0===p)break e;o.set(r.subarray(s,s+p),i),a-=p,s+=p,l-=p,i+=p,n.length-=p;break}n.mode=hI;break;case yI:while(u<14){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=xI;break}n.have=0,n.mode=vI;case vI:while(n.have<n.ncode){while(u<3){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.lens[T[n.have++]]=7&c,c>>>=3,u-=3}while(n.have<19)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},E=jC(zC,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,E){e.msg="invalid code lengths set",n.mode=xI;break}n.have=0,n.mode=wI;case wI:while(n.have<n.nlen+n.ndist){for(;;){if(k=n.lencode[c&(1<<n.lenbits)-1],m=k>>>24,y=k>>>16&255,v=65535&k,m<=u)break;if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(v<16)c>>>=m,u-=m,n.lens[n.have++]=v;else{if(16===v){A=m+2;while(u<A){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=xI;break}_=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===v){A=m+3;while(u<A){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,_=0,p=3+(7&c),c>>>=3,u-=3}else{A=m+7;while(u<A){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,_=0,p=11+(127&c),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=xI;break}while(p--)n.lens[n.have++]=_}}if(n.mode===xI)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=xI;break}if(n.lenbits=9,I={bits:n.lenbits},E=jC($C,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,E){e.msg="invalid literal/lengths set",n.mode=xI;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},E=jC(VC,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,E){e.msg="invalid distances set",n.mode=xI;break}if(n.mode=bI,t===qC)break e;case bI:n.mode=SI;case SI:if(a>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,TC(e,h),i=e.next_out,o=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===hI&&(n.back=-1);break}for(n.back=0;;){if(k=n.lencode[c&(1<<n.lenbits)-1],m=k>>>24,y=k>>>16&255,v=65535&k,m<=u)break;if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(y&&0===(240&y)){for(w=m,b=y,S=v;;){if(k=n.lencode[S+((c&(1<<w+b)-1)>>w)],m=k>>>24,y=k>>>16&255,v=65535&k,w+m<=u)break;if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=m,u-=m,n.back+=m,n.length=v,0===y){n.mode=II;break}if(32&y){n.back=-1,n.mode=hI;break}if(64&y){e.msg="invalid literal/length code",n.mode=xI;break}n.extra=15&y,n.mode=_I;case _I:if(n.extra){A=n.extra;while(u<A){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=EI;case EI:for(;;){if(k=n.distcode[c&(1<<n.distbits)-1],m=k>>>24,y=k>>>16&255,v=65535&k,m<=u)break;if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(0===(240&y)){for(w=m,b=y,S=v;;){if(k=n.distcode[S+((c&(1<<w+b)-1)>>w)],m=k>>>24,y=k>>>16&255,v=65535&k,w+m<=u)break;if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=m,u-=m,n.back+=m,64&y){e.msg="invalid distance code",n.mode=xI;break}n.offset=v,n.extra=15&y,n.mode=kI;case kI:if(n.extra){A=n.extra;while(u<A){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=xI;break}n.mode=CI;case CI:if(0===l)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=xI;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=o,f=i-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{o[i++]=g[f++]}while(--p);0===n.length&&(n.mode=SI);break;case II:if(0===l)break e;o[i++]=n.length,l--,n.mode=SI;break;case AI:if(n.wrap){while(u<32){if(0===a)break e;a--,c|=r[s++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?aE(n.check,o,h,i-h):rE(n.check,o,h,i-h)),h=l,4&n.wrap&&(n.flags?c:BI(c))!==n.check){e.msg="incorrect data check",n.mode=xI;break}c=0,u=0}n.mode=TI;case TI:if(n.wrap&&n.flags){while(u<32){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=xI;break}c=0,u=0}n.mode=RI;case RI:E=YC;break e;case xI:E=JC;break e;case OI:return QC;case NI:default:return ZC}return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<xI&&(n.mode<AI||t!==HC))&&GI(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?aE(n.check,o,h,e.next_out-h):rE(n.check,o,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===hI?128:0)+(n.mode===bI||n.mode===gI?256:0),(0===d&&0===h||t===HC)&&E===WC&&(E=XC),E},JI=e=>{if(FI(e))return ZC;let t=e.state;return t.window&&(t.window=null),e.state=null,WC},QI=(e,t)=>{if(FI(e))return ZC;const n=e.state;return 0===(2&n.wrap)?ZC:(n.head=t,t.done=!1,WC)},XI=(e,t)=>{const n=t.length;let r,o,s;return FI(e)?ZC:(r=e.state,0!==r.wrap&&r.mode!==dI?ZC:r.mode===dI&&(o=1,o=rE(o,t,n,0),o!==r.check)?JC:(s=GI(e,t,n,n),s?(r.mode=OI,QC):(r.havedict=1,WC)))};var eA=zI,tA=$I,nA=jI,rA=HI,oA=VI,sA=ZI,iA=JI,aA=QI,lA=XI,cA="pako inflate (from Nodeca project)",uA={inflateReset:eA,inflateReset2:tA,inflateResetKeep:nA,inflateInit:rA,inflateInit2:oA,inflate:sA,inflateEnd:iA,inflateGetHeader:aA,inflateSetDictionary:lA,inflateInfo:cA};function dA(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var hA=dA;const pA=Object.prototype.toString,{Z_NO_FLUSH:fA,Z_FINISH:gA,Z_OK:mA,Z_STREAM_END:yA,Z_NEED_DICT:vA,Z_STREAM_ERROR:wA,Z_DATA_ERROR:bA,Z_MEM_ERROR:SA}=cE;function _A(e){this.options=Zk.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sC,this.strm.avail_out=0;let n=uA.inflateInit2(this.strm,t.windowBits);if(n!==mA)throw new Error(lE[n]);if(this.header=new hA,uA.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=rC.string2buf(t.dictionary):"[object ArrayBuffer]"===pA.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=uA.inflateSetDictionary(this.strm,t.dictionary),n!==mA)))throw new Error(lE[n])}function EA(e,t){const n=new _A(t);if(n.push(e),n.err)throw n.msg||lE[n.err];return n.result}function kA(e,t){return t=t||{},t.raw=!0,EA(e,t)}_A.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let s,i,a;if(this.ended)return!1;for(i=t===~~t?t:!0===t?gA:fA,"[object ArrayBuffer]"===pA.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=uA.inflate(n,i),s===vA&&o&&(s=uA.inflateSetDictionary(n,o),s===mA?s=uA.inflate(n,i):s===bA&&(s=vA));while(n.avail_in>0&&s===yA&&n.state.wrap>0&&0!==e[n.next_in])uA.inflateReset(n),s=uA.inflate(n,i);switch(s){case wA:case bA:case vA:case SA:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===yA))if("string"===this.options.to){let e=rC.utf8border(n.output,n.next_out),t=n.next_out-e,o=rC.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==mA||0!==a){if(s===yA)return s=uA.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},_A.prototype.onData=function(e){this.chunks.push(e)},_A.prototype.onEnd=function(e){e===mA&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Zk.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var CA=_A,IA=EA,AA=kA,TA=EA,RA=cE,xA={Inflate:CA,inflate:IA,inflateRaw:AA,ungzip:TA,constants:RA};const{Deflate:OA,deflate:NA,deflateRaw:PA,gzip:DA}=CC,{Inflate:UA,inflate:LA,inflateRaw:BA,ungzip:MA}=xA;var FA=OA,jA=NA,zA=PA,$A=DA,VA=UA,HA=LA,KA=BA,qA=MA,WA=cE,YA={Deflate:FA,deflate:jA,deflateRaw:zA,gzip:$A,Inflate:VA,inflate:HA,inflateRaw:KA,ungzip:qA,constants:WA};const GA=6;function ZA({repo:e,preload:t}){async function*n(n,r={}){if(null!=r.compressionLevel&&(r.compressionLevel<-1||r.compressionLevel>9))throw fe(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(!1!==r.preload){let e;try{e=qc(n).split("/")}catch(ik){throw fe(ik,"ERR_INVALID_PATH")}t(lt.parse(e[0]))}const o=lt.asCID(n)||n,s=await sS(o,e.blocks,r);if("file"===s.type||"raw"===s.type){const e=[];return r.compress&&!0!==r.archive?e.push(s.content):e.push([{header:{name:s.path,mode:"file"===s.type&&s.unixfs.mode,mtime:"file"===s.type&&s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,size:s.size,type:"file"},body:s.content()}],MS()),r.compress&&e.push((async function*(e){const t=await uS(e);yield YA.gzip(t,{level:r.compressionLevel||GA})})),void(yield*kv(...e))}if("directory"!==s.type)throw fe(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");{const t=[iS(o,e.blocks,r),async function*(e){for await(const t of e){const e={header:{name:t.path,size:t.size}};if("file"===t.type)e.header.type="file",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0,e.body=t.content();else if("raw"===t.type)e.header.type="file",e.body=t.content();else{if("directory"!==t.type)throw fe(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");e.header.type="directory",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0}yield e}},MS()];if(r.compress){if(!r.archive)throw fe(new Error("file is not regular"),"ERR_INVALID_PATH");r.compress&&t.push((async function*(e){const t=await uS(e);yield YA.gzip(t,{level:r.compressionLevel||GA})}))}yield*kv(...t)}}return Mc(n)}function JA({repo:e,preload:t}){async function*n(n,r={}){const o=qc(n),s=o.split("/");!1!==r.preload&&t(lt.parse(s[0]));const i=lt.asCID(o)||o,a=await sS(i,e.blocks,r);if("file"!==a.type){if("directory"!==a.type)throw fe(new Error(`Unknown UnixFS type ${a.type}`),"ERR_UNKNOWN_UNIXFS_TYPE");for await(const e of a.content())yield Yc(e)}else yield Yc(a)}return Mc(n)}class QA{constructor({preload:e,repo:t,hashers:n,options:r}){const o=wb({preload:e,repo:t,options:r,hashers:n});this.addAll=o,this.add=Vv({addAll:o}),this.cat=aS({repo:t,preload:e}),this.get=ZA({repo:t,preload:e}),this.ls=JA({repo:t,preload:e})}}const XA="0.18.0",eT="",tT="^0.158.0";function nT({repo:e}){async function t(t={}){const n=await e.version.get();return{version:XA,commit:eT,repo:`${n}`,"ipfs-core":XA,"interface-ipfs-core":tT}}return Mc(t)}const rT=pe("ipfs:components:id");function oT({peerId:e,network:t}){async function n(n={}){const r=t.try();if(!r){if(n.peerId)throw new oi;if(null==e.publicKey)throw fe(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");return{id:e,publicKey:Ti(e.publicKey,"base64pad"),addresses:[],agentVersion:`js-ipfs/${XA}`,protocolVersion:"9000",protocols:[]}}const{libp2p:o}=r,s=n.peerId?n.peerId:e,i=await sT(s,o,n),a=Ti(i.metadata.get("AgentVersion")||new Uint8Array),l=Ti(i.metadata.get("ProtocolVersion")||new Uint8Array),c=i.id.toString(),u=i.publicKey?Ti(i.publicKey,"base64pad"):"";return{id:s,publicKey:u,addresses:(i.addresses||[]).map((e=>{const t=e.toString();return t.endsWith(`/p2p/${c}`)?t:`${t}/p2p/${c}`})).sort().map((e=>Da(e))),agentVersion:a,protocolVersion:l,protocols:(i.protocols||[]).sort()}}return Mc(n)}async function sT(e,t,n){let r=await t.peerStore.get(e);r||(r=await iT(e,t,n));let o=e.publicKey?e.publicKey:await t.peerStore.keyBook.get(e);if(null==o)try{o=await t.getPublicKey(e,n)}catch(ik){rT.error("Could not load public key for",e.toString(),ik)}return{...r,publicKey:o,metadata:r.metadata||new Map,addresses:r.addresses.map((e=>e.multiaddr))}}async function iT(e,t,n){if(null==t.dht)throw fe(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");for await(const o of t.dht.findPeer(e,n))if("FINAL_PEER"===o.name)break;const r=await t.peerStore.get(e);if(!r)throw fe(new Error("Could not find peer"),"ERR_NOT_FOUND");return r}var aT=lT;function lT(e,t,n){var r,o,s;if(Array.isArray(t)&&(r=t.slice(0)),"string"==typeof t&&(r=t.split(".")),"symbol"==typeof t&&(r=[t]),!Array.isArray(r))throw new Error("props arg must be an array, a string or a symbol");if(o=r.pop(),!o)return!1;cT(o);while(s=r.shift())if(cT(s),"undefined"==typeof e[s]&&(e[s]={}),e=e[s],!e||"object"!=typeof e)return!1;return e[o]=n,!0}function cT(e){if("__proto__"==e||"constructor"==e||"prototype"==e)throw new Error("setting of prototype values not supported")}const uT={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:e=>(aT(e,"Discovery.MDNS.Enabled",!1),aT(e,"Discovery.webRTCStar.Enabled",!1),e.Swarm={...e.Swarm||{},DisableNatPortMap:!0},e)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:e=>(aT(e,"Discovery.MDNS.Enabled",!0),aT(e,"Discovery.webRTCStar.Enabled",!0),aT(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:e=>{const t=cv();return aT(e,"Addresses.API",t.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),aT(e,"Addresses.Gateway",t.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),aT(e,"Addresses.Swarm",t.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),aT(e,"Addresses.Delegates",[]),aT(e,"Bootstrap",[]),aT(e,"Discovery.MDNS.Enabled",!1),aT(e,"Discovery.webRTCStar.Enabled",!1),aT(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!0}),e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:e=>{const t=cv();return aT(e,"Addresses.API",t.Addresses.API),aT(e,"Addresses.Gateway",t.Addresses.Gateway),aT(e,"Addresses.Swarm",t.Addresses.Swarm),aT(e,"Addresses.Delegates",t.Addresses.Delegates),aT(e,"Bootstrap",t.Bootstrap),aT(e,"Discovery.MDNS.Enabled",t.Discovery.MDNS.Enabled),aT(e,"Discovery.webRTCStar.Enabled",t.Discovery.webRTCStar.Enabled),aT(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:e=>{const t=e.Swarm||{},n=t.ConnMgr||{};return n.LowWater=20,n.HighWater=40,t.ConnMgr=n,e.Swarm=t,e}},"default-power":{description:'Inverse of "lowpower" profile.',transform:e=>{const t=cv();return e.Swarm=t.Swarm,e}}},dT=pe("ipfs:core:config");function hT({repo:e}){return{getAll:Mc(t),get:Mc(n),set:Mc(r),replace:Mc(o),profiles:{apply:Mc(s),list:Mc(pT)}};async function t(t={}){return e.config.getAll(t)}async function n(t,n){return t?e.config.get(t,n):Promise.reject(new Error("key argument is required"))}async function r(t,n,r){return e.config.set(t,n,r)}async function o(t,n){return e.config.replace(t,n)}async function s(t,n={dryRun:!1}){const{dryRun:r}=n,o=uT[t];if(!o)throw new Error(`No profile with name '${t}' exists`);try{const t=await e.config.getAll(n);let s=JSON.parse(JSON.stringify(t));return s=o.transform(s),r||await e.config.replace(s,n),delete t.Identity.PrivKey,delete s.Identity.PrivKey,{original:t,updated:s}}catch(ik){throw dT(ik),new Error(`Could not apply profile '${t}' to config: ${ik.message}`)}}}async function pT(e){return Object.keys(uT).map((e=>({name:e,description:uT[e].description})))}function fT({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*gT(e,t){if(null!=t&&"object"===typeof t)if(Array.isArray(t))for(const[n,r]of t.entries()){const t=[...e,n],o=lt.asCID(r);o?yield[t.join("/"),o]:"object"===typeof r&&(yield*mT(r,t))}else{const n=lt.asCID(t);n?yield[e.join("/"),n]:yield*mT(t,e)}}function*mT(e,t){if(null==e||e instanceof Uint8Array)return;const n=lt.asCID(e);n&&(yield[t.join("/"),n]);for(const[r,o]of Object.entries(e)){const e=[...t,r];yield*gT(e,o)}}function*yT(e,t){if(Array.isArray(t))for(const[n,r]of t.entries()){const t=[...e,n];yield t.join("/"),"object"!==typeof r||lt.asCID(r)||(yield*vT(r,t))}else yield*vT(t,e)}function*vT(e,t){if(null!=e&&"object"===typeof e)for(const[n,r]of Object.entries(e)){const e=[...t,n];yield e.join("/"),null==r||r instanceof Uint8Array||"object"!==typeof r||lt.asCID(r)||(yield*yT(e,r))}}function wT(e,t){let n=e;for(const[r,o]of t.entries()){if(n=n[o],null==n)throw new Error(`Object has no property at ${t.slice(0,r+1).map((e=>`[${JSON.stringify(e)}]`)).join("")}`);const e=lt.asCID(n);if(e)return{value:e,remaining:t.slice(r+1).join("/")}}return{value:n}}class bT{constructor({cid:e,bytes:t,value:n}){if(!e||!t||"undefined"===typeof n)throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:fT(),bytes:fT(),value:fT(),asBlock:fT()})}links(){return mT(this.value,[])}tree(){return vT(this.value,[])}get(e="/"){return wT(this.value,e.split("/").filter(Boolean))}}function ST({bytes:e,cid:t,value:n,codec:r}){const o=void 0!==n?n:r&&r.decode(e);if(void 0===o)throw new Error('Missing required argument, must either provide "value" or "codec"');return new bT({cid:t,bytes:e,value:o})}function _T(e){const t=Ao({version:1,roots:e}),n=Fi.encode(t.length),r=new Uint8Array(n.length+t.length);return r.set(n,0),r.set(t,n.length),r}function ET(e){return{async setRoots(t){const n=_T(t);await e.write(n)},async writeBlock(t){const{cid:n,bytes:r}=t;await e.write(new Uint8Array(Fi.encode(n.bytes.length+r.length))),await e.write(n.bytes),r.length&&await e.write(r)},async close(){await e.end()}}}function kT(){}function CT(){const e=[];let t=null,n=kT,r=!1,o=null,s=kT;const i=()=>(t||(t=new Promise((e=>{n=()=>{t=null,n=kT,e()}}))),t),a={write(t){e.push(t);const n=i();return s(),n},async end(){r=!0;const e=i();s(),await e}},l={async next(){const t=e.shift();return t?(0===e.length&&n(),{done:!1,value:t}):r?(n(),{done:!0,value:void 0}):(o||(o=new Promise((e=>{s=()=>(o=null,s=kT,e(l.next()))}))),o)}};return{writer:a,iterator:l}}const IT={Null:e=>null===e,Int:e=>Number.isInteger(e),Float:e=>"number"===typeof e&&Number.isFinite(e),String:e=>"string"===typeof e,Bool:e=>"boolean"===typeof e,Bytes:e=>e instanceof Uint8Array,Link:e=>!IT.Null(e)&&"object"===typeof e&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!IT.Null(e)&&"object"===typeof e&&e.asCID!==e&&!IT.List(e)&&!IT.Bytes(e)},AT={Int:IT.Int,"CarHeader > version":e=>AT.Int(e),"CarHeader > roots (anon) > valueType (anon)":IT.Link,"CarHeader > roots (anon)":e=>IT.List(e)&&Array.prototype.every.call(e,AT["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>AT["CarHeader > roots (anon)"](e),CarHeader:e=>{const t=e&&Object.keys(e);return IT.Map(e)&&["version"].every((e=>t.includes(e)))&&Object.entries(e).every((([e,t])=>AT["CarHeader > "+e]&&AT["CarHeader > "+e](t)))}},TT=AT.CarHeader,RT={SHA2_256:18,LENGTH:32,DAG_PB:112},xT=40;function OT(e,t){if(!e.length)throw new Error("Unexpected end of data");const n=Fi.decode(e);return t.seek(Fi.decode.bytes),n}function NT(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;const r={version:2,characteristics:[t.getBigUint64(n,!0),t.getBigUint64(n+=8,!0)],dataOffset:Number(t.getBigUint64(n+=8,!0)),dataSize:Number(t.getBigUint64(n+=8,!0)),indexOffset:Number(t.getBigUint64(n+=8,!0))};return r}function PT(e){Fi.decode(e);const t=Fi.decode.bytes,n=Fi.decode(e.subarray(Fi.decode.bytes)),r=Fi.decode.bytes,o=t+r+n;return o}async function DT(e,t){const n=OT(await e.upTo(8),e);if(0===n)throw new Error("Invalid CAR header (zero length)");const r=await e.exactly(n,!0),o=To(r);if(!TT(o))throw new Error("Invalid CAR header format");if(1!==o.version&&2!==o.version||void 0!==t&&o.version!==t)throw new Error(`Invalid CAR version: ${o.version}${void 0!==t?` (expected ${t})`:""}`);const s=Array.isArray(o.roots);if(1===o.version&&!s||2===o.version&&s)throw new Error("Invalid CAR header format");if(1===o.version)return o;const i=NT(await e.exactly(xT,!0));e.seek(i.dataOffset-e.pos);const a=await DT(e,1);return Object.assign(a,i)}async function UT(e){const t=await e.exactly(2,!1);if(t[0]===RT.SHA2_256&&t[1]===RT.LENGTH){const t=await e.exactly(34,!0),n=nt(t);return lt.create(0,RT.DAG_PB,n)}const n=OT(await e.upTo(8),e);if(1!==n)throw new Error(`Unexpected CID version (${n})`);const r=OT(await e.upTo(8),e),o=await e.exactly(PT(await e.upTo(8)),!0),s=nt(o);return lt.create(n,r,s)}async function LT(e){const t=e.pos;let n=OT(await e.upTo(8),e);if(0===n)throw new Error("Invalid CAR section (zero length)");n+=e.pos-t;const r=await UT(e),o=n-Number(e.pos-t);return{cid:r,length:n,blockLength:o}}async function BT(e){const{cid:t,blockLength:n}=await LT(e),r=await e.exactly(n,!0);return{bytes:r,cid:t}}async function MT(e){const t=e.pos,{cid:n,length:r,blockLength:o}=await LT(e),s={cid:n,length:r,blockLength:o,offset:t,blockOffset:e.pos};return e.seek(s.blockLength),s}function FT(e){const t=(async()=>{const t=await DT(e);if(2===t.version){const n=e.pos-t.dataOffset;e=VT(e,t.dataSize-n)}return t})();return{header:()=>t,async*blocks(){await t;while((await e.upTo(8)).length>0)yield await BT(e)},async*blocksIndex(){await t;while((await e.upTo(8)).length>0)yield await MT(e)}}}function jT(e){let t=0;return{async upTo(n){const r=e.subarray(t,t+Math.min(n,e.length-t));return r},async exactly(n,r=!1){if(n>e.length-t)throw new Error("Unexpected end of data");const o=e.subarray(t,t+n);return r&&(t+=n),o},seek(e){t+=e},get pos(){return t}}}function zT(e){let t=0,n=0,r=0,o=new Uint8Array(0);const s=async t=>{n=o.length-r;const s=[o.subarray(r)];while(n<t){const t=await e();if(null==t)break;n<0?t.length>n&&s.push(t.subarray(-n)):s.push(t),n+=t.length}o=new Uint8Array(s.reduce(((e,t)=>e+t.length),0));let i=0;for(const e of s)o.set(e,i),i+=e.length;r=0};return{async upTo(e){return o.length-r<e&&await s(e),o.subarray(r,r+Math.min(o.length-r,e))},async exactly(e,n=!1){if(o.length-r<e&&await s(e),o.length-r<e)throw new Error("Unexpected end of data");const i=o.subarray(r,r+e);return n&&(t+=e,r+=e),i},seek(e){t+=e,r+=e},get pos(){return t}}}function $T(e){const t=e[Symbol.asyncIterator]();async function n(){const e=await t.next();return e.done?null:e.value}return zT(n)}function VT(e,t){let n=0;return{async upTo(r){let o=await e.upTo(r);return o.length+n>t&&(o=o.subarray(0,t-n)),o},async exactly(r,o=!1){const s=await e.exactly(r,o);if(s.length+n>t)throw new Error("Unexpected end of data");return o&&(n+=r),s},seek(t){n+=t,e.seek(t)},get pos(){return e.pos}}}class HT{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const t=lt.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:t,bytes:e.bytes}))),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=WT(e);const{encoder:t,iterator:n}=qT(),r=new HT(e,t),o=new KT(n);return{writer:r,out:o}}static createAppender(){const{encoder:e,iterator:t}=qT();e.setRoots=()=>Promise.resolve();const n=new HT([],e),r=new KT(t);return{writer:n,out:r}}static async updateRootsInBytes(e,t){const n=jT(e);await DT(n);const r=_T(t);if(Number(n.pos)!==r.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${r.length} bytes)`);return e.set(r,0),e}}class KT{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function qT(){const e=CT(),{writer:t,iterator:n}=e,r=ET(t);return{encoder:r,iterator:n}}function WT(e){if(void 0===e)return[];if(!Array.isArray(e)){const t=lt.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}const t=[];for(const n of e){const e=lt.asCID(n);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");t.push(e)}return t}const YT=async({cid:e,load:t,seen:n})=>{n=n||new Set;const r=e.toString(J);if(n.has(r))return;const o=await t(e);if(n.add(r),null!==o)for(const[,s]of o.links())await YT({cid:s,load:t,seen:n})},GT=pe("ipfs:components:dag:import"),ZT=[$s,Ys];function JT({repo:e,preload:t,codecs:n}){async function*r(r,o={}){!1!==o.preload&&t(r);const s=lt.asCID(r);if(!s)throw new Error(`Unexpected error converting CID type: ${r}`);GT(`Exporting ${s} as car`);const{writer:i,out:a}=await HT.create([s]);let l=null;(async()=>{try{const t=QT(e,i,{signal:o.signal,timeout:o.timeout},n);await YT({cid:s,load:t})}catch(t){l=t}finally{i.close()}})();for await(const e of a){if(l)break;yield e}if(l)throw l}return Mc(r)}function QT(e,t,n,r){return async o=>{const s=await r.getCodec(o.code);if(!s)throw new Error(`Can't decode links in block with codec 0x${o.code.toString(16)} to form complete DAG`);const i=await e.blocks.get(o,n);return GT(`Adding block ${o} to car`),await t.put({cid:o,bytes:i}),ZT.includes(o.code)?null:ST({bytes:i,cid:o,codec:s})}}async function XT(e){for await(const t of e)return t}function eR({codecs:e,repo:t,preload:n}){const r=async function(r,o={}){if(!1!==o.preload&&n(r),o.path){const n=o.localResolve?await XT(Zc(r,o.path,e,t,o)):await vd(Zc(r,o.path,e,t,o)),s=n;if(!s)throw fe(new Error("Not found"),"ERR_NOT_FOUND");return s}const s=await e.getCodec(r.code),i=await t.blocks.get(r,o),a=s.decode(i);return{value:a,remainderPath:""}};return Mc(r)}class tR{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class nR extends tR{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:n,iterator:r}=await oR(e);return new nR(t,n,r)}static async fromIterable(e){const{version:t,roots:n,iterator:r}=await sR(e);return new nR(t,n,r)}}class rR extends(null){[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;const e=this._iterable[Symbol.asyncIterator]();return{async next(){const t=await e.next();return t.done?t:{done:!1,value:t.value.cid}}}}static async fromBytes(e){const{version:t,roots:n,iterator:r}=await oR(e);return new rR(t,n,r)}static async fromIterable(e){const{version:t,roots:n,iterator:r}=await sR(e);return new rR(t,n,r)}}async function oR(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return iR(jT(e))}async function sR(e){if(!e||"function"!==typeof e[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return iR($T(e))}async function iR(e){const t=FT(e),{version:n,roots:r}=await t.header();return{version:n,roots:r,iterator:t.blocks()}}const aR=pe("ipfs:components:dag:import");function lR({repo:e}){async function*t(t,n={}){const r=await e.gcLock.readLock();try{const r={signal:n.signal,timeout:n.timeout},o=Nv(t),{value:s,done:i}=await o.peek();if(i)return;let a;s&&o.push(s),a=s instanceof Uint8Array?[o]:o;for await(const t of a){const o=await cR(e,r,t);if(!1!==n.pinRoots)for(const t of o){let n="";try{await e.blocks.has(t)?(aR(`Pinning root ${t}`),await e.pins.pinRecursively(t)):n="blockstore: block not found"}catch(ik){n=ik.message}yield{root:{cid:t,pinErrorMsg:n}}}}}finally{r()}}return Mc(t)}async function cR(e,t,n){const r=await nR.fromIterable(n),o=await r.getRoots();return await Gm(e.blocks.putMany(vv(r,(({cid:e,bytes:t})=>(aR(`Import block ${e}`),{key:e,value:t}))),{signal:t.signal})),o}function uR({repo:e,codecs:t,hashers:n,preload:r}){async function o(o,s={}){const i=s.pin?await e.gcLock.readLock():null;try{const i=await t.getCodec(s.storeCodec||"dag-cbor");if(!i)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(o instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");const e=await t.getCodec(s.inputCodec);if(!e)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);o=e.decode(o)}const a=null!=s.version?s.version:1,l=await n.getHasher(s.hashAlg||"sha2-256");if(!l)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);const c=i.encode(o),u=await l.digest(c),d=lt.create(a,i.code,u);return await e.blocks.put(d,c,{signal:s.signal}),s.pin&&await e.pins.pinRecursively(d),!1!==s.preload&&r(d),d}finally{i&&i()}}return Mc(o)}function dR({repo:e,codecs:t,preload:n}){async function r(r,o={}){const{cid:s}=jc(r);return!1!==o.preload&&n(s),Wc(e,t,r,o)}return Mc(r)}class hR{constructor({repo:e,codecs:t,hashers:n,preload:r}){this.export=JT({repo:e,preload:r,codecs:t}),this.get=eR({codecs:t,repo:e,preload:r}),this.import=lR({repo:e}),this.resolve=dR({repo:e,codecs:t,preload:r}),this.put=uR({repo:e,codecs:t,hashers:n,preload:r})}}const pR=Ci,fR=Ii,gR=function(e){let t=0;if(e=e.toString().trim(),pR(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if(fR(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){const e=pR(n[r]);let t;e&&(t=gR(n[r]),n[r]=Ti(t.slice(0,2),"base16")),null!=t&&++r<8&&n.splice(r,0,Ti(t.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);o[t++]=e>>8&255,o[t++]=255&e}return o}throw new Error("invalid ip address")},mR=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let o=0;o<n;o++)r.push(e[t+o]);return r.join(".")}if(16===n){const e=[];for(let o=0;o<n;o+=2)e.push(r.getUint16(t+o).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},yR=-1,vR={},wR={},bR=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,yR,"ip6zone"],[43,8,"ipcidr"],[53,yR,"dns",!0],[54,yR,"dns4",!0],[55,yR,"dns6",!0],[56,yR,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,yR,"unix",!1,!0],[421,yR,"ipfs"],[421,yR,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,yR,"garlic64"],[448,0,"tls"],[449,yR,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,yR,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,yR,"memory"]];function SR(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}function _R(e){if("number"===typeof e){if(null!=wR[e])return wR[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=vR[e])return vR[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}bR.forEach((e=>{const t=SR(...e);wR[t.code]=t,vR[t.name]=t}));_R("ip4"),_R("ip6"),_R("ipcidr");function ER(e,t){const n=_R(e);switch(n.code){case 4:case 41:return TR(t);case 42:return NR(t);case 6:case 273:case 33:case 132:return xR(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return NR(t);case 421:return LR(t);case 444:return FR(t);case 445:return FR(t);case 466:return UR(t);default:return Ti(t,"base16")}}function kR(e,t){const n=_R(e);switch(n.code){case 4:return AR(t);case 41:return AR(t);case 42:return OR(t);case 6:case 273:case 33:case 132:return RR(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return OR(t);case 421:return PR(t);case 444:return BR(t);case 445:return MR(t);case 466:return DR(t);default:return mi(t,"base16")}}const CR=Object.values(Js).map((e=>e.decoder)),IR=function(){let e=CR[0].or(CR[1]);return CR.slice(2).forEach((t=>e=e.or(t))),e}();function AR(e){if(!Ai(e))throw new Error("invalid ip address");return gR(e)}function TR(e){const t=mR(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ai(t))throw new Error("invalid ip address");return t}function RR(e){const t=new ArrayBuffer(2),n=new DataView(t);return n.setUint16(0,e),new Uint8Array(t)}function xR(e){const t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function OR(e){const t=mi(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function NR(e){const t=Fi.decode(e);if(e=e.slice(Fi.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Ti(e)}function PR(e){let t;t="Q"===e[0]||"1"===e[0]?nt(J.decode(`z${e}`)).bytes:lt.parse(e).multihash.bytes;const n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function DR(e){const t=IR.decode(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function UR(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return"u"+Ti(n,"base64url")}function LR(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return Ti(n,"base58btc")}function BR(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=X.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=RR(r);return ji([n,o],n.length+o.length)}function MR(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=X.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=RR(r);return ji([n,o],n.length+o.length)}function FR(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2),r=Ti(t,"base32"),o=xR(n);return`${r}:${o}`}function jR(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const o=n[r],s=_R(o);if(0!==s.size){if(r++,r>=n.length)throw XR("invalid address: "+e);if(!0===s.path){t.push([o,QR(n.slice(r).join("/"))]);break}t.push([o,n[r]])}else t.push([o])}return t}function zR(e){const t=[];return e.map((e=>{const n=ex(e);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),QR(t.join("/"))}function $R(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=ex(e);return e.length>1?[t.code,kR(t.code,e[1])]:[t.code]}))}function VR(e){return e.map((e=>{const t=ex(e);return null!=e[1]?[t.code,ER(t.code,e[1])]:[t.code]}))}function HR(e){return ZR(ji(e.map((e=>{const t=ex(e);let n=Uint8Array.from(Fi.encode(t.code));return e.length>1&&null!=e[1]&&(n=ji([n,e[1]])),n}))))}function KR(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=Fi.decode(t);return e+(Fi.decode.bytes??0)}}function qR(e){const t=[];let n=0;while(n<e.length){const r=Fi.decode(e,n),o=Fi.decode.bytes??0,s=_R(r),i=KR(s,e.slice(n+o));if(0===i){t.push([r]),n+=o;continue}const a=e.slice(n+o,n+o+i);if(n+=i+o,n>e.length)throw XR("Invalid address Uint8Array: "+Ti(e,"base16"));t.push([r,a])}return t}function WR(e){const t=qR(e),n=VR(t);return zR(n)}function YR(e){e=QR(e);const t=jR(e),n=$R(t);return HR(n)}function GR(e){return YR(e)}function ZR(e){const t=JR(e);if(null!=t)throw t;return Uint8Array.from(e)}function JR(e){try{qR(e)}catch(ik){return ik}}function QR(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function XR(e){return new Error("Error parsing address: "+e)}function ex(e){const t=_R(e[0]);return t}var tx,nx,rx,ox,sx=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ix=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};const ax=Symbol.for("nodejs.util.inspect.custom"),lx=[_R("dns").code,_R("dns4").code,_R("dns6").code,_R("dnsaddr").code],cx=new Map,ux=Symbol.for("@multiformats/js-multiaddr/multiaddr");function dx(e){return Boolean(e?.[ux])}class hx{constructor(e){if(tx.set(this,void 0),nx.set(this,void 0),rx.set(this,void 0),this[ox]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=ZR(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=GR(e)}else{if(!dx(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=ZR(e.bytes)}}toString(){return null==sx(this,tx,"f")&&ix(this,tx,WR(this.bytes),"f"),sx(this,tx,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";const s=_R("tcp"),i=_R("udp"),a=_R("ip4"),l=_R("ip6"),c=_R("dns6"),u=_R("ip6zone");for(const[h,p]of this.stringTuples())h===u.code&&(o=`%${p??""}`),lx.includes(h)&&(t=s.name,r=443,n=`${p??""}${o}`,e=h===c.code?6:4),h!==s.code&&h!==i.code||(t=_R(h).name,r=parseInt(p??"")),h!==a.code&&h!==l.code||(t=_R(h).name,n=`${p??""}${o}`,e=h===l.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const d={family:e,host:n,transport:t,port:r};return d}protos(){return this.protoCodes().map((e=>Object.assign({},_R(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;while(n<t.length){const r=Fi.decode(t,n),o=Fi.decode.bytes??0,s=_R(r),i=KR(s,t.slice(n+o));n+=i+o,e.push(r)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==sx(this,nx,"f")&&ix(this,nx,qR(this.bytes),"f"),sx(this,nx,"f")}stringTuples(){return null==sx(this,rx,"f")&&ix(this,rx,VR(this.tuples()),"f"),sx(this,rx,"f")}encapsulate(e){return e=new hx(e),new hx(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new hx(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new hx(HR(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===vR.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?Ti(J.decode(`z${e}`),"base58btc"):Ti(lt.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>{const t=_R(e[0]);return!0===t.path}))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return wa(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=cx.get(t.name);if(null==n)throw fe(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,e);return r.map((e=>new hx(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(tx=new WeakMap,nx=new WeakMap,rx=new WeakMap,ox=ux,ax)](){return`Multiaddr(${WR(this.bytes)})`}}function px(e){return new hx(e)}const fx=(e,t)=>t,gx=(e,t,n,r)=>{if(null!=r&&!1===r.assumeHttp)return`tcp://${e}:${t}`;let o="tcp",s=`:${t}`;const i=n[n.length-1];return"tcp"===i.protocol&&(o="443"===t?"https":"http",s="443"===t||"80"===t?"":s),`${o}://${e}${s}`},mx={ip4:fx,ip6:(e,t,n,r)=>1===r.length&&"ip6"===r[0].protocol?t:`[${t}]`,tcp:(e,t,n,r,o)=>r.some((e=>["http","https","ws","wss"].includes(e.protocol)))?`${e}:${t}`:gx(e,t,r,o),udp:(e,t)=>`udp://${e}:${t}`,dnsaddr:fx,dns4:fx,dns6:fx,ipfs:(e,t)=>`${e}/ipfs/${t}`,p2p:(e,t)=>`${e}/p2p/${t}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};function yx(e,t){const n=px(e),r=n.toString().split("/").slice(1);return n.tuples().map((e=>({protocol:r.shift()??"",content:null!=e[1]?r.shift()??"":""}))).reduce(((e,n,r,o)=>{const s=mx[n.protocol];if(null==s)throw new Error(`Unsupported protocol ${n.protocol}`);return s(e,n.content,r,o,t)}),"")}function vx(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got "+typeof e);e=[...e];for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}const wx=pe("ipfs:preload"),bx=zu["default"]?zu["default"]:zu,Sx=new bx({concurrency:4});function _x(e,t={}){return wx(e),Sx.add((async()=>{const n=await $u.post(e,{signal:t.signal}),r=n.body.getReader();try{while(1){const{done:e}=await r.read();if(e)return}}finally{r.releaseLock()}}))}const Ex=pe("ipfs:preload");function kx(e={}){if(e.enabled=Boolean(e.enabled),e.addresses=e.addresses||[],e.cache=e.cache||1e3,!e.enabled||!e.addresses.length){Ex("preload disabled");const e=()=>{};return Object.assign(e,{start:()=>{},stop:()=>{}})}let t=!0,n=[];const r=e.addresses.map((e=>yx(e))),o=eu(e.cache),s=async e=>{try{if(t)throw new Error(`preload ${e} but preloader is not started`);const s=e.toString();if(o.has(s))return;o.set(s,!0);const i=vx(r);let a=!1;const l=Date.now();for(const e of i){if(t)throw new Error(`preload aborted for ${s}`);let r;try{r=new AbortController,n=n.concat(r),await _x(`${e}/api/v0/refs?r=true&arg=${encodeURIComponent(s)}`,{signal:r.signal}),a=!0}catch(ik){"aborted"!==ik.type&&Ex.error(ik)}finally{n=n.filter((e=>e!==r))}if(a)break}Ex(`${a?"":"un"}successfully preloaded ${s} in ${Date.now()-l}ms`)}catch(ik){Ex.error(ik)}};return s.start=()=>{t=!1},s.stop=()=>{t=!0,Ex(`aborting ${n.length} pending preload request(s)`),n.forEach((e=>e.abort())),n=[]},s}const Cx=pe("ipfs:mfs-preload");function Ix({preload:e,files:t,options:n={}}){if(n.interval=n.interval||3e4,!n.enabled){Cx("MFS preload disabled");const e=async()=>{};return{start:e,stop:e}}let r,o="";const s=async()=>{try{const n=await t.stat("/"),r=n.cid.toString();o!==r&&(Cx(`preloading updated MFS root ${o} -> ${n.cid}`),await e(n.cid),o=r)}catch(ik){Cx.error("failed to preload MFS root",ik)}finally{r=setTimeout(s,n.interval)}};return{async start(){const e=await t.stat("/");o=e.cid.toString(),Cx(`monitoring MFS root ${e.cid}`),r=setTimeout(s,n.interval)},stop(){clearTimeout(r)}}}class Ax extends Error{constructor(e){super(e),this.name="TimeoutError"}}class Tx extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const Rx=e=>void 0===globalThis.DOMException?new Tx(e):new DOMException(e),xx=e=>{const t=void 0===e.reason?Rx("This operation was aborted."):e.reason;return t instanceof Error?t:Rx(t)};function Ox(e,t){const{milliseconds:n,fallback:r,message:o,customTimers:s={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let i;const a=new Promise(((a,l)=>{if("number"!==typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(n===Number.POSITIVE_INFINITY)return void a(e);if(t.signal){const{signal:e}=t;e.aborted&&l(xx(e)),e.addEventListener("abort",(()=>{l(xx(e))}))}const c=new Ax;i=s.setTimeout.call(void 0,(()=>{if(r)try{a(r())}catch(t){l(t)}else"function"===typeof e.cancel&&e.cancel(),!1===o?a():o instanceof Error?l(o):(c.message=o??`Promise timed out after ${n} milliseconds`,l(c))}),n),(async()=>{try{a(await e)}catch(t){l(t)}finally{s.clearTimeout.call(void 0,i)}})()}));return a.clear=()=>{s.clearTimeout.call(void 0,i),i=void 0},a}let Nx=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>(t&=63,e+=t<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_",e)),"");const Px="lock:worker:request-read",Dx="lock:worker:release-read",Ux="lock:master:grant-read",Lx="lock:worker:request-write",Bx="lock:worker:release-write",Mx="lock:master:grant-write",Fx={},jx=e=>{e.addEventListener("message",(t=>{jx.dispatchEvent("message",e,t)})),null!=e.port&&e.port.addEventListener("message",(t=>{jx.dispatchEvent("message",e,t)}))};jx.addEventListener=(e,t)=>{null==Fx[e]&&(Fx[e]=[]),Fx[e].push(t)},jx.removeEventListener=(e,t)=>{null!=Fx[e]&&(Fx[e]=Fx[e].filter((e=>e===t)))},jx.dispatchEvent=function(e,t,n){null!=Fx[e]&&Fx[e].forEach((e=>e(t,n)))};var zx=jx;const $x=(e,t,n,r,o)=>(s,i)=>{if(i.data.type!==n)return;const a={type:i.data.type,name:i.data.name,identifier:i.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>(s.postMessage({type:o,name:a.name,identifier:a.identifier}),await new Promise((e=>{const t=n=>{if(null==n||null==n.data)return;const o={type:n.data.type,name:n.data.name,identifier:n.data.identifier};o.type===r&&o.identifier===a.identifier&&(s.removeEventListener("message",t),e())};s.addEventListener("message",t)})))}}))},Vx=(e,t,n,r)=>async()=>{const o=Nx();return globalThis.postMessage({type:t,identifier:o,name:e}),await new Promise((t=>{const s=i=>{if(null==i||null==i.data)return;const a={type:i.data.type,identifier:i.data.identifier};a.type===n&&a.identifier===o&&(globalThis.removeEventListener("message",s),t((()=>{globalThis.postMessage({type:r,identifier:o,name:e})})))};globalThis.addEventListener("message",s)}))},Hx={singleProcess:!1};var Kx=e=>{e=Object.assign({},Hx,e);const t=Boolean(globalThis.document)||e.singleProcess;if(t){const e=new EventTarget;return zx.addEventListener("message",$x(e,"requestReadLock",Px,Dx,Ux)),zx.addEventListener("message",$x(e,"requestWriteLock",Lx,Bx,Mx)),e}return{isWorker:!0,readLock:e=>Vx(e,Px,Ux,Dx),writeLock:e=>Vx(e,Lx,Mx,Bx)}};const qx={};let Wx;async function Yx(e,t){let n;const r=new Promise((e=>{n=e}));return e.add((async()=>await Ox((async()=>await new Promise((e=>{n((()=>{e()}))})))(),{milliseconds:t.timeout}))),await r}const Gx=(e,t)=>{if(!0===Wx.isWorker)return{readLock:Wx.readLock(e,t),writeLock:Wx.writeLock(e,t)};const n=new zu({concurrency:1});let r;return{async readLock(){if(null!=r)return await Yx(r,t);r=new zu({concurrency:t.concurrency,autoStart:!1});const e=r,o=Yx(r,t);return n.add((async()=>(e.start(),await e.onIdle().then((()=>{r===e&&(r=null)}))))),await o},async writeLock(){return r=null,await Yx(n,t)}}},Zx={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function Jx(e){const t=Object.assign({},Zx,e);return null==Wx&&(Wx=Kx(t),!0!==Wx.isWorker&&(Wx.addEventListener("requestReadLock",(e=>{null!=qx[e.data.name]&&qx[e.data.name].readLock().then((async t=>await e.data.handler().finally((()=>t()))))})),Wx.addEventListener("requestWriteLock",(async e=>{null!=qx[e.data.name]&&qx[e.data.name].writeLock().then((async t=>await e.data.handler().finally((()=>t()))))})))),null==qx[t.name]&&(qx[t.name]=Gx(t.name,t)),qx[t.name]}let Qx;function Xx(e=!1){if(Qx)return Qx;const t=Jx({singleProcess:e});return Qx={readLock:e=>async(...n)=>{const r=await t.readLock();try{return await e.apply(null,n)}finally{r()}},writeLock:e=>async(...n)=>{const r=await t.writeLock();try{return await e.apply(null,n)}finally{r()}}},Qx}const eO=pe("ipfs:mfs:utils:with-mfs-root");async function tO(e,t){if(t&&t.signal&&t.signal.aborted)throw fe(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});let n;await e.repo.datastore.open();try{const t=await e.repo.datastore.get(Vc);n=lt.decode(t)}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik;eO("Creating new MFS root");const o=Kt({Data:new Te({type:"directory"}).marshal(),Links:[]}),s=await Fs.digest(o);if(n=lt.createV0(s),await e.repo.blocks.put(n,o),t&&t.signal&&t.signal.aborted)throw fe(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await e.repo.datastore.put(Vc,n.bytes)}return eO(`Loaded MFS root /ipfs/${n}`),n}function nO(e=""){return(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}const rO="ipfs",oO=async(e,t,n)=>{const r=await tO(e,n);let o={entryType:"file"},s="";if(s=lt.asCID(t)?`/ipfs/${t}`:t.toString(),s=s.trim(),s=s.replace(/(\/\/+)/g,"/"),s.endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),!s)throw fe(new Error("paths must not be empty"),"ERR_NO_PATH");if("/"!==s.substring(0,1))throw fe(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");"/"===s.substring(s.length-1)&&(s=s.substring(0,s.length-1));const i=nO(s);if(i[0]===rO){let e;e=2===i.length?`/${i.join("/")}`:`/${i.slice(0,i.length-1).join("/")}`,o={type:"ipfs",depth:i.length-2,entryType:"file",mfsPath:`/${i.join("/")}`,mfsDirectory:e,parts:i,path:`/${i.join("/")}`,name:i[i.length-1]}}else{const e=`/${rO}/${r}${i.length?"/"+i.join("/"):""}`,t=`/${rO}/${r}/${i.slice(0,i.length-1).join("/")}`;o={type:"mfs",depth:i.length,entryType:"file",mfsDirectory:t,mfsPath:e,parts:i,path:`/${i.join("/")}`,name:i[i.length-1]}}const a="mfs"===o.type?o.mfsPath:o.path;try{const t=await sS(a,e.repo.blocks,n);o.cid=t.cid,o.mfsPath=`/ipfs/${t.path}`,o.entryType=t.type,o.content=t.content,"file"!==o.entryType&&"directory"!==o.entryType||"file"!==t.type&&"directory"!==t.type||(o.unixfs=t.unixfs)}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}return o.exists=Boolean(o.cid),o},sO=T.bind({ignoreUndefined:!0}),iO=pe("ipfs:mfs:stat"),aO={withLocal:!1};function lO(e){async function t(t,n={}){n=sO(aO,n),iO(`Fetching stats for ${t}`);const{type:r,cid:o,mfsPath:s}=await oO(e,t,n),i="ipfs"===r&&o?o:s;let a;try{a=await sS(i,e.repo.blocks)}catch(ik){if("ERR_NOT_FOUND"===ik.code)throw fe(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw ik}if(!cO[a.type])throw new Error(`Cannot stat codec ${a.cid.code}`);return cO[a.type](a)}return Mc(t)}const cO={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:e=>{const t={cid:e.cid,type:"file",size:e.unixfs.fileSize(),cumulativeSize:Kt(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},directory:e=>{const t={cid:e.cid,type:"directory",size:0,cumulativeSize:Kt(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},object:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})},uO=pe("ipfs:mfs:utils:to-trail");async function dO(e,t){uO(`Creating trail for path ${t}`);const n=[];for await(const r of oS(t,e.repo.blocks))n.push({name:r.name,cid:r.cid,size:r.size,type:r.type});return n}const hO=async(e,t,n)=>{n.codec||(n.codec=i),n.hasher||(n.hasher=Fs),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===i&&n.hasher!==Fs&&(n.cidVersion=1);const r=await n.hasher.digest(e),o=lt.create(n.cidVersion,n.codec.code,r);return n.onlyHash||await t.put(o,e,{signal:n.signal}),o},pO=Yv.code,fO=8;async function gO(e){return(await Yv.encode(e)).subarray(0,8).reverse()}class mO{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}class yO extends mO{constructor(e,t){super(e,t),this._bucket=Qw({hashFn:gO,bits:fO})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){yield*vO(this._bucket,e,this,this.options)}}async function*vO(e,t,n,r){const o=e._children,s=[];let i=0;for(let p=0;p<o.length;p++){const e=o.get(p);if(!e)continue;const n=p.toString(16).toUpperCase().padStart(2,"0");if(e instanceof jw){let o;for await(const n of await vO(e,t,null,r))o=n;if(!o)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:n,Tsize:o.size,Hash:o.cid}),i+=o.size}else if("function"===typeof e.value.flush){const r=e.value;let o;for await(const e of r.flush(t))o=e,yield o;const a=n+e.key;s.push({Name:a,Tsize:o.size,Hash:o.cid}),i+=o.size}else{const t=e.value;if(!t.cid)continue;const r=n+e.key,o=t.size;s.push({Name:r,Tsize:o,Hash:t.cid}),i+=o}}const a=Uint8Array.from(o.bitField().reverse()),l=new Te({type:"hamt-sharded-directory",data:a,fanout:e.tableSize(),hashType:pO,mtime:n&&n.mtime,mode:n&&n.mode}),c={Data:l.marshal(),Links:s},u=Kt(Ft(c)),d=await hO(u,t,r),h=u.length+i;yield{cid:d,node:c,size:h}}const wO=pe("ipfs:mfs:core:utils:hamt-utils"),bO=async(e,t,n,r)=>{if(!r.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");const o=Uint8Array.from(n._children.bitField().reverse()),s=Te.unmarshal(r.parent.Data),i=new Te({type:"hamt-sharded-directory",data:o,fanout:n.tableSize(),hashType:pO,mode:s.mode,mtime:s.mtime}),a=await e.hashers.getHasher(r.hashAlg),l={Data:i.marshal(),Links:t.sort(((e,t)=>(e.Name||"").localeCompare(t.Name||"")))},c=Kt(l),u=await a.digest(c),d=lt.create(r.cidVersion,Ht,u);return r.flush&&await e.repo.blocks.put(d,c),{node:l,cid:d,size:t.reduce(((e,t)=>e+(t.Tsize||0)),c.length)}},SO=async(e,t,n,r,o)=>{const s=new jw({hash:n._options.hash,bits:n._options.bits},r,o);return r._putObjectAt(o,s),await EO(e,t,s,n),s},_O=async e=>{const t=Qw({hashFn:gO,bits:fO});return await Promise.all(e.map((async e=>{const n=e.Name||"";if(2===n.length){const e=parseInt(n,16),r=new jw({hash:t._options.hash,bits:t._options.bits},t,e);return t._putObjectAt(e,r),Promise.resolve()}return t.put(n.substring(2),{size:e.Tsize,cid:e.Hash})}))),t},EO=async(e,t,n,r)=>{await Promise.all(t.map((async t=>{const o=t.Name||"";if(2===o.length){wO("Populating sub bucket",o);const s=parseInt(o,16),i=await e.repo.blocks.get(t.Hash),a=qt(i),l=new jw({hash:r._options.hash,bits:r._options.bits},n,s);return n._putObjectAt(s,l),await EO(e,a.Links,l,r),Promise.resolve()}return r.put(o.substring(2),{size:t.Tsize,cid:t.Hash})})))},kO=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),CO=async(e,t,n)=>{const r=await _O(n.Links),o=await r._findNewBucketAndPos(t),s=[{bucket:o.bucket,prefix:kO(o.pos)}];let i=o.bucket;while(i!==r)s.push({bucket:i,prefix:kO(i._posAtParent)}),i=i._parent;s.reverse(),s[0].node=n;for(let a=0;a<s.length;a++){const n=s[a];if(!n.node)throw new Error("Could not generate HAMT path");const o=n.node.Links.filter((e=>(e.Name||"").substring(0,2)===n.prefix)).pop();if(!o){wO(`Link ${n.prefix}${t} will be added`);continue}if(o.Name===`${n.prefix}${t}`){wO(`Link ${n.prefix}${t} will be replaced`);continue}wO(`Found subshard ${n.prefix}`);const i=await e.repo.blocks.get(o.Hash),l=qt(i);if(!s[a+1]){wO(`Loaded new subshard ${n.prefix}`),await SO(e,l.Links,r,n.bucket,parseInt(n.prefix,16));const o=await r._findNewBucketAndPos(t);s.push({bucket:o.bucket,prefix:kO(o.pos),node:l});continue}const c=s[a+1];await EO(e,l.Links,c.bucket,r),c.node=l}return await r.put(t,!0),s.reverse(),{rootBucket:r,path:s}},IO=async(e,t,n={})=>{const r=new yO({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:n.mtime,mode:n.mode},n);for(let s=0;s<t.length;s++)await r._bucket.put(t[s].name,{size:t[s].size,cid:t[s].cid});const o=await vd(r.flush(e.repo.blocks));if(!o)throw new Error("Flushing shard yielded no result");return o},AO=pe("ipfs:mfs:core:utils:add-link");async function TO(e,t){let n=t.parent;if(t.parentCid){const r=lt.asCID(t.parentCid);if(null===r)throw fe(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(r.code!==Ht)throw fe(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");AO(`Loading parent node ${r}`);const o=await e.repo.blocks.get(r);n=qt(o)}if(!n)throw fe(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!t.cid)throw fe(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw fe(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!t.size&&0!==t.size)throw fe(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!n.Data)throw fe(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");const r=Te.unmarshal(n.Data);return"hamt-sharded-directory"===r.type?(AO("Adding link to sharded directory"),OO(e,{...t,parent:n})):n.Links.length>=t.shardSplitThreshold?(AO("Converting directory to sharded directory"),RO(e,{...t,parent:n,mtime:r.mtime,mode:r.mode})):(AO(`Adding ${t.name} (${t.cid}) to regular directory`),xO(e,{...t,parent:n}))}const RO=async(e,t)=>{const n=await IO(e,t.parent.Links.map((e=>({name:e.Name||"",size:e.Tsize||0,cid:e.Hash}))).concat({name:t.name,size:t.size,cid:t.cid}),t);return AO(`Converted directory to sharded directory ${n.cid}`),n},xO=async(e,t)=>{const n=t.parent.Links.filter((e=>e.Name!==t.name));if(n.push({Name:t.name,Tsize:t.size,Hash:t.cid}),!t.parent.Data)throw fe(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");const r=Te.unmarshal(t.parent.Data);let o;if(r.mtime){const e=Date.now(),t=Math.floor(e/1e3);r.mtime={secs:t,nsecs:1e3*(e-1e3*t)},o=r.marshal()}else o=t.parent.Data;t.parent=Ft({Data:o,Links:n});const s=await e.hashers.getHasher(t.hashAlg),i=Kt(t.parent),a=await s.digest(i),l=lt.create(t.cidVersion,Ht,a);return t.flush&&await e.repo.blocks.put(l,i),{node:t.parent,cid:l,size:i.length}},OO=async(e,t)=>{const{shard:n,path:r}=await NO(e,t),o=await vd(n.flush(e.repo.blocks));if(!o)throw new Error("No result from flushing shard");const s=await e.repo.blocks.get(o.cid),i=qt(s),a=t.parent.Links.filter((e=>(e.Name||"").substring(0,2)!==r[0].prefix)),l=i.Links.find((e=>(e.Name||"").substring(0,2)===r[0].prefix));if(!l)throw new Error(`No link found with prefix ${r[0].prefix}`);return a.push(l),bO(e,a,r[0].bucket,t)},NO=async(e,t)=>{const n={name:t.name,cid:t.cid,size:t.size};if(!t.parent.Data)throw fe(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");const r=await _O(t.parent.Links),o=Te.unmarshal(t.parent.Data),s=new yO({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:o.mode},t);s._bucket=r,o.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)});const i=await r._findNewBucketAndPos(n.name),a=PO(i);a[0].node=t.parent;let l=0;while(l<a.length){const t=a[l];l++;const o=t.node;if(!o)throw new Error("Segment had no node");const s=o.Links.find((e=>(e.Name||"").substring(0,2)===t.prefix));if(!s){AO(`Link ${t.prefix}${n.name} will be added`),l=a.length;break}if(s.Name===`${t.prefix}${n.name}`){AO(`Link ${t.prefix}${n.name} will be replaced`),l=a.length;break}if((s.Name||"").length>2){AO(`Link ${s.Name} ${s.Hash} will be replaced with a subshard`),l=a.length;break}AO(`Found subshard ${t.prefix}`);const i=await e.repo.blocks.get(s.Hash),c=qt(i);if(!a[l]){AO(`Loaded new subshard ${t.prefix}`),await SO(e,c.Links,r,t.bucket,parseInt(t.prefix,16));const o=await r._findNewBucketAndPos(n.name);a.push({bucket:o.bucket,prefix:kO(o.pos),node:c});break}const u=a[l];await EO(e,c.Links,u.bucket,r),u.node=c}return await s._bucket.put(n.name,{size:n.size,cid:n.cid}),{shard:s,path:a}},PO=e=>{const t=[{bucket:e.bucket,prefix:kO(e.pos)}];let n=e.bucket._parent,r=e.bucket._posAtParent;while(n)t.push({bucket:n,prefix:kO(r)}),r=n._posAtParent,n=n._parent;return t.reverse(),t},DO=pe("ipfs:mfs:utils:update-tree"),UO={shardSplitThreshold:1e3};async function LO(e,t,n){n=Object.assign({},UO,n),DO("Trail",t),t=t.slice().reverse();let r,o=0;for await(const i of e.repo.blocks.getMany(t.map((e=>e.cid)))){const s=qt(i),a=t[o].cid,l=t[o].name;if(o++,!r){r={cid:a,name:l,size:i.length};continue}const c=await TO(e,{parent:s,name:r.name,cid:r.cid,size:r.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});r={cid:c.cid,name:l,size:c.size}}const{cid:s}=r;return DO(`Final CID ${s}`),s}const BO=pe("ipfs:mfs:utils:update-mfs-root");async function MO(e,t,n){if(n&&n.signal&&n.signal.aborted)throw fe(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return BO(`New MFS root will be ${t}`),await e.repo.datastore.put(Vc,t.bytes),t}async function FO(e,t,n){const r=new Te({type:t,mode:n.mode,mtime:n.mtime}),o=await e.hashers.getHasher(n.hashAlg),s={Data:r.marshal(),Links:[]},i=Kt(s),a=await o.digest(i),l=lt.create(n.cidVersion,Ht,a);return n.flush&&await e.repo.blocks.put(l,i),{cid:l,node:s}}const jO=T.bind({ignoreUndefined:!0}),zO=pe("ipfs:mfs:mkdir"),$O={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function VO(e){async function t(t,n={}){const r=jO($O,n);if(!t)throw new Error("no path given to Mkdir");if(t=t.trim(),"/"===t){if(r.parents)return;throw fe(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if("/"!==t.substring(0,1))throw fe(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");zO(`Creating ${t}`);const o=nO(t);if("ipfs"===o[0])throw fe(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");const s=await tO(e,r);let i;const a=[],l=await FO(e,"directory",r);for(let u=0;u<=o.length;u++){const n=o.slice(0,u),c=`/ipfs/${s}/${n.join("/")}`;try{if(i=await sS(c,e.repo.blocks),"file"!==i.type&&"directory"!==i.type)throw fe(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(u===o.length){if(r.parents)return;throw fe(new Error("file already exists"),"ERR_ALREADY_EXISTS")}a.push({name:i.name,cid:i.cid})}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik;if(u<o.length&&!r.parents)throw fe(new Error(`Intermediate directory path ${c} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await HO(e,n[n.length-1],l,a[a.length-1],a,r)}}const c=await LO(e,a,r);await MO(e,c,r)}return Mc(t)}const HO=async(e,t,n,r,o,s)=>{zO(`Adding empty dir called ${t} to ${r.cid}`);const i=await TO(e,{parent:r.node,parentCid:r.cid,size:0,cid:n.cid,name:t,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});o[o.length-1].cid=i.cid,o.push({name:t,cid:n.cid})},KO=T.bind({ignoreUndefined:!0}),qO=pe("ipfs:mfs:cp"),WO={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function YO(e){async function t(t,n,r={}){const o=KO(WO,r);Array.isArray(t)||(t=[t]);const s=await Promise.all(t.map((t=>oO(e,t,o))));let i=await oO(e,n,o);if(!s.length||!i)throw fe(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");const a=s.find((e=>!e.exists));if(a)throw fe(new Error(`${a.path} does not exist`),"ERR_INVALID_PARAMS");const l=GO(i);if(i.exists){if(qO("Destination exists"),1===s.length&&!l)throw fe(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(qO("Destination does not exist"),s.length>1){if(!o.parents)throw fe(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await VO(e)(i.path,o),i=await oO(e,i.path,o)}else if(i.parts.length>1){const t=`/${i.parts.slice(0,-1).join("/")}`;try{await lO(e)(t,o)}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik;if(!o.parents)throw fe(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await VO(e)(t,o),i=await oO(e,i.path,o)}}const c=GO(i)?i.mfsPath:i.mfsDirectory,u=await dO(e,c);if(1===s.length){const t=s.pop();if(!t)throw fe(new Error("could not find source"),"ERR_INVALID_PARAMS");const n=l?t.name:i.name;return qO(`Only one source, copying to destination ${l?"directory":"file"} ${n}`),ZO(e,t,n,u,o)}return qO("Multiple sources, wrapping in a directory"),JO(e,s,i,u,o)}return Mc(t)}const GO=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),ZO=async(e,t,n,r,o)=>{let s=r.pop();if(!s)throw fe(new Error("destination had no parent"),"ERR_INVALID_PARAMS");s=await QO(e,t,n,s,o),r.push(s);const i=await LO(e,r,o);await MO(e,i,o)},JO=async(e,t,n,r,o)=>{for(let i=0;i<t.length;i++){const r=t[i];n=await QO(e,r,r.name,n,o)}r[r.length-1]=n;const s=await LO(e,r,o);await MO(e,s,o)},QO=async(e,t,n,r,o)=>{const s=await e.repo.blocks.get(t.cid),{node:i,cid:a,size:l}=await TO(e,{parentCid:r.cid,size:s.length,cid:t.cid,name:n,hashAlg:o.hashAlg,cidVersion:o.cidVersion,flush:o.flush,shardSplitThreshold:o.shardSplitThreshold});return r.node=i,r.cid=a,r.size=l,r},XO=pe("ipfs:mfs:core:utils:remove-link");async function eN(e,t){let n=t.parent;if(t.parentCid){const r=lt.asCID(t.parentCid);if(null===r)throw fe(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");XO(`Loading parent node ${r}`);const o=await e.repo.blocks.get(r);n=qt(o)}if(!n)throw fe(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!t.name)throw fe(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!n.Data)throw fe(new Error("Parent node had no data"),"ERR_INVALID_NODE");const r=Te.unmarshal(n.Data);return"hamt-sharded-directory"===r.type?(XO(`Removing ${t.name} from sharded directory`),nN(e,{...t,parent:n})):(XO(`Removing link ${t.name} regular directory`),tN(e,{...t,parent:n}))}const tN=async(e,t)=>{t.parent.Links=t.parent.Links.filter((e=>e.Name!==t.name));const n=await Kt(t.parent),r=await e.hashers.getHasher(t.hashAlg),o=await r.digest(n),s=lt.create(t.cidVersion,Ht,o);return await e.repo.blocks.put(s,n),XO(`Updated regular directory ${s}`),{node:t.parent,cid:s}},nN=async(e,t)=>{const{rootBucket:n,path:r}=await CO(e,t.name,t.parent);await n.del(t.name);const{node:o}=await rN(e,r,t.name,t);return bO(e,o.Links,n,t)},rN=async(e,t,n,r)=>{const o=t.pop();if(!o)throw fe(new Error("Could not find parent"),"EINVALIDPARENT");const{bucket:s,prefix:i,node:a}=o;if(!a)throw fe(new Error("Could not find parent"),"EINVALIDPARENT");const l=a.Links.find((e=>(e.Name||"").substring(0,2)===i));if(!l)throw fe(new Error(`No link found with prefix ${i} for file ${n}`),"ERR_NOT_FOUND");if(l.Name===`${i}${n}`){XO(`Removing existing link ${l.Name}`);const t=a.Links.filter((e=>e.Name!==l.Name));return await s.del(n),bO(e,t,s,r)}XO(`Descending into sub-shard ${l.Name} for ${i}${n}`);const c=await rN(e,t,n,r);let u=c.cid,d=c.size,h=i;if(1===c.node.Links.length){XO(`Removing subshard for ${i}`);const e=c.node.Links[0];h=`${i}${(e.Name||"").substring(2)}`,u=e.Hash,d=e.Tsize||0}return XO(`Updating shard ${i} with name ${h}`),oN(e,s,a,i,h,d,u,r)},oN=(e,t,n,r,o,s,i,a)=>{const l=n.Links.filter((e=>e.Name!==r));return l.push({Name:o,Tsize:s,Hash:i}),bO(e,l,t,a)},sN=T.bind({ignoreUndefined:!0}),iN={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function aN(e){async function t(t,n={}){const r=sN(iN,n);Array.isArray(t)||(t=[t]);const o=await Promise.all(t.map((t=>oO(e,t,r))));if(!o.length)throw fe(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");o.forEach((e=>{if("/"===e.path)throw fe(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const s of o)await lN(e,s.path,r)}return Mc(t)}const lN=async(e,t,n)=>{const r=await oO(e,t,n),o=await dO(e,r.mfsPath),s=o[o.length-1];o.pop();const i=o[o.length-1];if(!i)throw fe(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===s.type&&!n.recursive)throw fe(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:a}=await eN(e,{parentCid:i.cid,name:s.name,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});i.cid=a;const l=await LO(e,o,n);await MO(e,l,n)},cN=T.bind({ignoreUndefined:!0}),uN=pe("ipfs:mfs:touch"),dN={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function hN(e,t,n){let r=0;return(e.includes("x")||e.includes("X")&&(n||1&t||8&t||64&t))&&(r+=1),e.includes("w")&&(r+=2),e.includes("r")&&(r+=4),r}function pN(e,t){let n=0;return e.includes("u")&&(n+=t<<6),e.includes("g")&&(n+=t<<3),e.includes("o")&&(n+=t),n}function fN(e,t,n){return t.includes("t")&&(n+=parseInt("1000",8)),t.includes("s")&&(e.includes("u")&&(n+=parseInt("4000",8)),e.includes("g")&&(n+=parseInt("2000",8))),n}function gN(e,t,n){t||(t=0);const r=e.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!r)throw new Error(`Invalid file mode: ${e}`);let[,o,s,i]=r;"a"!==o&&o||(o="ugo");let a=hN(i,t,n);return a=pN(o,a),a=fN(o,i,a),"="===s?(o.includes("u")&&(t&=parseInt("7077",8),t|=a),o.includes("g")&&(t&=parseInt("7707",8),t|=a),o.includes("o")&&(t&=parseInt("7770",8),t|=a),t):"+"===s?a|t:"-"===s?a^t:t}function mN(e,t){if(e instanceof String||"string"===typeof e){const n=`${e}`;e=n.match(/^\d+$/g)?parseInt(n,8):0+n.split(",").reduce(((e,n)=>gN(n,e,t.isDirectory())),t.mode||0)}return e}function yN(e){async function t(t,n,r={}){const o=cN(dN,r);uN(`Fetching stats for ${t}`);const{cid:s,mfsDirectory:i,name:a}=await oO(e,t,o);if(s.code!==Ht)throw fe(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(o.recursive){const r=await kv((async function*(){for await(const r of iS(s,e.repo.blocks)){if("file"!==r.type&&"directory"!==r.type)throw fe(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");r.unixfs.mode=mN(n,r.unixfs);const e=Ft({Data:r.unixfs.marshal(),Links:r.node.Links});yield{path:r.path,content:e}}}),(t=>db(t,e.repo.blocks,{...o,pin:!1,dagBuilder:async function*(e,t,n){for await(const r of e)yield async function(){const e=r.content,o=Kt(e),s=await hO(o,t,n);if(!e.Data)throw fe(new Error(`${s} had no data`),"ERR_INVALID_NODE");const i=Te.unmarshal(e.Data);return{cid:s,size:o.length,path:r.path,unixfs:i}}}})),(e=>vd(e)));if(!r)throw fe(new Error(`Could not chmod ${t}`),"ERR_COULD_NOT_CHMOD");return await aN(e)(t,o),void await YO(e)(`/ipfs/${r.cid}`,t,o)}const l=await e.repo.blocks.get(s),c=qt(l);if(!c.Data)throw fe(new Error(`${s} had no data`),"ERR_INVALID_NODE");const u=Te.unmarshal(c.Data);u.mode=mN(n,u);const d=Kt({Data:u.marshal(),Links:c.Links}),h=o.hashAlg||dN.hashAlg,p=await e.hashers.getHasher(h),f=await p.digest(d),g=lt.create(o.cidVersion,Ht,f);o.flush&&await e.repo.blocks.put(g,d);const m=await dO(e,i),y=m[m.length-1],v=lt.decode(y.cid.bytes),w=await e.repo.blocks.get(v),b=qt(w),S=await TO(e,{parent:b,name:a,cid:g,size:d.length,flush:o.flush,hashAlg:h,cidVersion:s.version,shardSplitThreshold:1/0});y.cid=S.cid;const _=await LO(e,m,o);await MO(e,_,o)}return Mc(t)}const vN=T.bind({ignoreUndefined:!0}),wN={};function bN(e){async function t(t,n={}){n=vN(wN,n);const{cid:r}=await lO(e)(t,n);return r}return Mc(t)}const SN=T.bind({ignoreUndefined:!0}),_N={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};function EN(e){async function t(t,n,r={}){const o=SN(_N,r);await YO(e)(t,n,o),await aN(e)(t,{...o,recursive:!0})}return Mc(t)}const kN=T.bind({ignoreUndefined:!0}),CN=pe("ipfs:mfs:touch"),IN={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};function AN(e){async function t(t,n={}){const r=kN(IN,n);r.mtime=r.mtime||new Date,CN(`Touching ${t} mtime: ${r.mtime}`);const{cid:o,mfsDirectory:s,name:i,exists:a}=await oO(e,t,r),l=n.hashAlg||IN.hashAlg,c=await e.hashers.getHasher(l);let u,d,h=r.cidVersion;if(a){if(o.code!==Ht)throw fe(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");h=o.version;const n=await e.repo.blocks.get(o),s=qt(n);if(!s.Data)throw fe(new Error(`${t} had no data`),"ERR_INVALID_NODE");const i=Te.unmarshal(s.Data);i.mtime=r.mtime,u=Kt({Data:i.marshal(),Links:s.Links});const a=await c.digest(u);d=lt.create(r.cidVersion,Ht,a),r.flush&&await e.repo.blocks.put(d,u)}else{const t=new Te({type:"file",mtime:r.mtime});u=Kt({Data:t.marshal(),Links:[]});const n=await c.digest(u);d=lt.create(r.cidVersion,Ht,n),r.flush&&await e.repo.blocks.put(d,u)}const p=await dO(e,s),f=p[p.length-1],g=f.cid,m=await e.repo.blocks.get(g),y=qt(m),v=await TO(e,{parent:y,name:i,cid:d,size:u.length,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:h});f.cid=v.cid;const w=await LO(e,p,r);await MO(e,w,r)}return Mc(t)}const TN=T.bind({ignoreUndefined:!0}),RN={offset:0,length:1/0};function xN(e){function t(t,n={}){return n=TN(RN,n),{[Symbol.asyncIterator]:async function*(){const r=await oO(e,t,n),o=await sS(r.mfsPath,e.repo.blocks);if("file"!==o.type&&"raw"!==o.type)throw fe(new Error(`${t} was not a file or raw bytes`),"ERR_NOT_FILE");if(!o.content)throw fe(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of o.content({offset:n.offset,length:n.length}))yield e}}}return Mc(t)}const ON=pe("ipfs:mfs:utils:to-async-iterator");function NN(e){if(!e)throw fe(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"===typeof e||e instanceof String)&&(ON("Content was a string"),e=mi(e.toString())),e.length)return ON("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield e}};if(e[Symbol.asyncIterator])return ON("Content was an async iterator"),e;if(e[Symbol.iterator])return ON("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob)return ON("Content was an HTML5 Blob"),xv(e.stream());throw fe(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")}const PN=T.bind({ignoreUndefined:!0}),DN=pe("ipfs:mfs:write"),UN={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(e,t)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};function LN(e){async function t(t,n,r={}){const o=PN(UN,r);let s,i,a;if(DN("Reading source, destination and parent"),await Xx().readLock((async()=>{s=await NN(n),i=await oO(e,t,o),a=await oO(e,i.mfsDirectory,o)}))(),DN("Read source, destination and parent"),!o.parents&&!a.exists)throw fe(new Error("directory does not exist"),"ERR_NO_EXIST");if(null==s)throw fe(new Error("could not create source"),"ERR_NO_SOURCE");if(null==i)throw fe(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!o.create&&!i.exists)throw fe(new Error("file does not exist"),"ERR_NO_EXIST");if("file"!==i.entryType)throw fe(new Error("not a file"),"ERR_NOT_A_FILE");return BN(e,t,s,i,o)}return Mc(t)}const BN=async(e,t,n,r,o)=>{const s=await MN(e,n,r,o);await Xx().writeLock((async()=>{const n=nO(t),r=n.pop();if(null==r)throw fe(new Error("source does not exist"),"ERR_NO_EXIST");let i=!1;try{await lO(e)(`/${n.join("/")}`,o),i=!0}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}i||await VO(e)(`/${n.join("/")}`,o);const a=await oO(e,t,o),l=await dO(e,a.mfsDirectory),c=l[l.length-1];if(!c)throw fe(new Error("directory does not exist"),"ERR_NO_EXIST");if(!c.type||!c.type.includes("directory"))throw fe(new Error(`cannot write to ${c.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const u=await e.repo.blocks.get(c.cid),d=qt(u),h=await TO(e,{parent:d,name:r,cid:s.cid,size:s.size,flush:o.flush,shardSplitThreshold:o.shardSplitThreshold,hashAlg:o.hashAlg,cidVersion:o.cidVersion});c.cid=h.cid;const p=await LO(e,l,o);await MO(e,p,o)}))()},MN=async(e,t,n,r)=>{n.exists?DN(`Overwriting file ${n.cid} offset ${r.offset} length ${r.length}`):DN(`Writing file offset ${r.offset} length ${r.length}`);const o=[];if(r.offset>0)if(n.unixfs){if(DN(`Writing first ${r.offset} bytes of original file`),o.push((()=>n.content({offset:0,length:r.offset}))),n.unixfs.fileSize()<r.offset){const e=r.offset-n.unixfs.fileSize();DN(`Writing zeros for extra ${e} bytes`),o.push(jN(e))}}else DN(`Writing zeros for first ${r.offset} bytes`),o.push(jN(r.offset));o.push(FN(t,r.length));const s=$N(zN(o),(e=>{if(n.unixfs&&!r.truncate){const t=n.unixfs.fileSize();if(t>e)return DN(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),n.content({offset:e});DN("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let i,a;void 0!==r.mode&&null!==r.mode?i=Ie(r.mode):n&&n.unixfs&&(i=n.unixfs.mode),null!=r.mtime?a=Ae(r.mtime):n&&n.unixfs&&(a=n.unixfs.mtime);const l=await e.hashers.getHasher(r.hashAlg),c=await vd(db([{content:s,mode:i,mtime:a}],e.repo.blocks,{progress:r.progress,hasher:l,cidVersion:r.cidVersion,strategy:r.strategy,rawLeaves:r.rawLeaves,reduceSingleLeafToSelf:r.reduceSingleLeafToSelf,leafType:r.leafType}));if(!c)throw fe(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return DN(`Wrote ${c.cid}`),{cid:c.cid,size:c.size}},FN=(e,t)=>async function*(){let n=0;for await(const r of e){if(n+=r.length,n>t)return void(yield r.subarray(0,t-n));yield r}},jN=(e,t=Hc)=>{const n=new Uint8Array(t);async function*r(){while(1)yield n}return FN(r(),e)},zN=async function*(e){for(let t=0;t<e.length;t++)yield*e[t]()},$N=async function*(e,t){let n=0;for await(const r of e)n+=r.length,yield r;for await(const r of t(n))n+=r.length,yield r},VN=e=>{const t={cid:e.cid,name:e.name,type:"directory"===e.type?"directory":"file",size:e.size};return"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,t.mtime=e.unixfs.mtime),t};function HN(e){async function*t(t,n={}){const r=await oO(e,t,n),o=await sS(r.mfsPath,e.repo.blocks);"directory"!==o.type?yield VN(o):yield*vv(o.content(n),VN)}return Mc(t)}const KN={stat:lO},qN={chmod:yN,cp:YO,flush:bN,mkdir:VO,mv:EN,rm:aN,touch:AN},WN={write:LN,read:xN,ls:HN},YN=({options:e,mfs:t,operations:n,lock:r})=>{Object.keys(n).forEach((o=>{t[o]=r(n[o](e))}))},GN={repoOwner:!0,repo:null};function ZN(e){const{repoOwner:t}=Object.assign({},GN||{},e),n=Xx(t),r=e=>n.readLock(e),o=e=>n.writeLock(e),s={};return YN({options:e,mfs:s,operations:KN,lock:r}),YN({options:e,mfs:s,operations:qN,lock:o}),Object.keys(WN).forEach((t=>{s[t]=WN[t](e)})),s}function JN({repo:e,preload:t,hashers:n,options:r}){const o=ZN({repo:e,repoOwner:!1!==r.repoOwner,hashers:n}),s=e=>{const n=(...n)=>{const r=n.filter((e=>_c(e)||mc(e)));if(r.length){const e=n[n.length-1];e&&!1!==e.preload&&r.forEach((e=>t(e)))}return e(...n)};return n};return{...o,chmod:o.chmod,cp:s(o.cp),mkdir:o.mkdir,stat:s(o.stat),rm:o.rm,read:s(o.read),touch:o.touch,write:o.write,mv:s(o.mv),flush:o.flush,ls:s((async function*(...e){for await(const t of o.ls(...e))yield{...t,size:t.size||0}}))}}function QN({keychain:e}){const t=(t,n)=>e.exportKey(t,n);return Mc(t)}const XN="Ed25519",eP=2048;function tP({keychain:e}){const t=(t,n={type:XN,size:eP})=>e.createKey(t,n.type||XN,n.size||eP);return Mc(t)}function nP({keychain:e}){const t=(t,n,r)=>e.importKey(t,n,r);return Mc(t)}function rP({keychain:e}){const t=t=>e.findKeyByName(t);return Mc(t)}function oP({keychain:e}){const t=()=>e.listKeys();return Mc(t)}function sP({keychain:e}){const t=async(t,n)=>{const r=await e.renameKey(t,n);return{was:t,now:r.name,id:r.id,overwrite:!1}};return Mc(t)}function iP({keychain:e}){const t=t=>e.removeKey(t);return Mc(t)}class aP{constructor({keychain:e}){this.gen=tP({keychain:e}),this.list=oP({keychain:e}),this.rm=iP({keychain:e}),this.rename=sP({keychain:e}),this.export=QN({keychain:e}),this.import=nP({keychain:e}),this.info=rP({keychain:e})}}function lP({repo:e,preload:t}){async function n(n,r={}){!1!==r.preload&&t(n);const o=await e.blocks.get(n,r);return qt(o)}return Mc(n)}function cP({repo:e,preload:t}){const n=lP({repo:e,preload:t});async function r(e,t={}){const r=await n(e,t);return r.Data||new Uint8Array(0)}return Mc(r)}function uP(e,t=[]){for(const r in e){const o=e[r];if("/"===r&&1===Object.keys(e).length)try{t.push({Name:"",Tsize:0,Hash:lt.parse(o)});continue}catch(n){}const s=lt.asCID(o);s?t.push({Name:"",Tsize:0,Hash:s}):(Array.isArray(o)&&uP(o,t),o&&"object"===typeof o&&uP(o,t))}return t}function dP({repo:e,codecs:t}){async function n(n,r={}){const o=await t.getCodec(n.code),s=await e.blocks.get(n,r),i=o.decode(s);switch(n.code){case $s:return[];case Ht:return i.Links;case Io:case Ko:return uP(i);default:throw new Error(`Cannot resolve links from codec ${n.code}`)}}return Mc(n)}function hP({repo:e,preload:t}){async function n(n={}){let r;if(n.template){if("unixfs-dir"!==n.template)throw new Error("unknown template");r=new Te({type:"directory"}).marshal()}const o=Kt({Data:r,Links:[]}),s=await Fs.digest(o),i=lt.createV0(s);return await e.blocks.put(i,o,{signal:n.signal}),!1!==n.preload&&t(i),i}return Mc(n)}function pP({repo:e,preload:t}){async function n(n,r={}){const o=await e.gcLock.readLock();try{const o=Kt(n),s=await Fs.digest(o),i=lt.createV1(Ht,s);return await e.blocks.put(i,o,{signal:r.signal}),!1!==r.preload&&t(i),r.pin&&await e.pins.pinRecursively(i,{signal:r.signal}),i}finally{o()}}return Mc(n)}function fP({repo:e,preload:t}){const n=lP({repo:e,preload:t});async function r(e,t={}){const r=await n(e,t),o=Kt(r),s=o.length,i=r.Links.reduce(((e,t)=>e+(t.Tsize||0)),0);return{Hash:e,NumLinks:r.Links.length,BlockSize:s,LinksSize:s-(r.Data||[]).length,DataSize:(r.Data||[]).length,CumulativeSize:s+i}}return Mc(r)}function gP({repo:e,preload:t}){const n=lP({repo:e,preload:t}),r=pP({repo:e,preload:t});async function o(e,t,o={}){const s=await n(e,o);return r({...s,Links:s.Links.concat([t])},o)}return Mc(o)}function mP({repo:e,preload:t}){const n=lP({repo:e,preload:t}),r=pP({repo:e,preload:t});async function o(e,t,o={}){const s=await n(e,o),i=ji([s.Data||[],t]);return r({...s,Data:i},o)}return Mc(o)}function yP({repo:e,preload:t}){const n=lP({repo:e,preload:t}),r=pP({repo:e,preload:t});async function o(e,t,o={}){const s=await n(e,o),i=("string"===typeof t?t:t.Name)||"";return s.Links=s.Links.filter((e=>e.Name!==i)),r(s,o)}return Mc(o)}function vP({repo:e,preload:t}){const n=lP({repo:e,preload:t}),r=pP({repo:e,preload:t});async function o(e,t,o={}){const s=await n(e,o);return r({...s,Data:t},o)}return Mc(o)}class wP{constructor({repo:e,preload:t}){this.addLink=gP({repo:e,preload:t}),this.appendData=mP({repo:e,preload:t}),this.rmLink=yP({repo:e,preload:t}),this.setData=vP({repo:e,preload:t})}}class bP{constructor({repo:e,codecs:t,preload:n}){this.data=cP({repo:e,preload:n}),this.get=lP({repo:e,preload:n}),this.links=dP({repo:e,codecs:t}),this.new=hP({repo:e,preload:n}),this.put=pP({repo:e,preload:n}),this.stat=fP({repo:e,preload:n}),this.patch=new wP({repo:e,preload:n})}}const SP=pe("ipfs:repo:gc");function _P({repo:e,hashers:t}){async function*n(n={}){const r=Date.now();let o;try{o=await tO({repo:e,hashers:t},n),await e.pins.pinRecursively(o),yield*e.gc()}finally{o&&await e.pins.unpin(o)}SP(`Complete (${Date.now()-r}ms)`)}return Mc(n)}function EP({repo:e}){async function t(t={}){const n=await e.stat();return{numObjects:BigInt(n.numObjects.toString()),repoSize:BigInt(n.repoSize.toString()),repoPath:n.repoPath,version:`${n.version}`,storageMax:BigInt(n.storageMax.toString())}}return Mc(t)}const kP=12;function CP({repo:e}){async function t(t={}){try{await e._checkInitialized(t)}catch(ik){const t=[/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((t=>t.test(ik.message)));if(t)return kP;throw ik}return e.version.get()}return Mc(t)}class IP{constructor({repo:e,hashers:t}){this.gc=_P({repo:e,hashers:t}),this.stat=EP({repo:e}),this.version=CP({repo:e}),this.setApiAddr=t=>e.apiAddr.set(t)}}function AP(e,t){return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0}}function TP({network:e}){const t=async function*(t={}){const{libp2p:n}=await e.use(t);if(!t.poll)return void(yield AP(n,t));const r=t.interval||1e3;let o,s=-1;try{if(s="string"===typeof r?Lc(r)||-1:r,!s||s<0)throw new Error("invalid duration")}catch(ik){throw fe(ik,"ERR_INVALID_POLL_INTERVAL")}try{while(1)yield AP(n,t),await new Promise((e=>{o=setTimeout(e,s)}))}finally{clearTimeout(o)}};return Mc(t)}class RP{constructor({repo:e,network:t}){this.repo=EP({repo:e}),this.bw=TP({network:t}),this.bitswap=rv({network:t})}}var xP=OP;function OP(e,t,n){if(!e)return n;var r,o;if(Array.isArray(t)&&(r=t.slice(0)),"string"==typeof t&&(r=t.split(".")),"symbol"==typeof t&&(r=[t]),!Array.isArray(r))throw new Error("props arg must be an array, a string or a symbol");while(r.length){if(o=r.shift(),!e)return n;if(e=e[o],void 0===e)return n}return e}async function NP(e){let t=0;for await(const n of e)t++;return t}const PP=x("ipfs:repo:migrator:migration-8");function DP(e){return e.child?DP(e.child):e}function UP(e){try{const t=X.decode(`b${e.toString().toLowerCase().slice(1)}`),n=lt.decode(t).multihash.bytes,r=X.encode(n).slice(1).toUpperCase();return new Tc(`/${r}`,!1)}catch(ik){return e}}function LP(e){try{const t=X.decode(`b${e.toString().toLowerCase().slice(1)}`),n=nt(t),r=X.encode(lt.createV1($s,n).bytes).slice(1);return new Tc(`/${r.toUpperCase()}`,!1)}catch{return e}}async function BP(e,t,n){const r=e.blocks;await r.open();const o=DP(r),s=await NP(o.queryKeys({filters:[e=>{const t=n(e);return t.toString()!==e.toString()}]}));try{let e=0;for await(const r of o.query({})){const i=n(r.key);i.toString()!==r.key.toString()&&(e+=1,PP(`Migrating Block from ${r.key} to ${i}`,await o.has(r.key)),await o.delete(r.key),await o.put(i,r.value),t(e/s*100,`Migrated Block from ${r.key} to ${i}`))}}finally{await r.close()}}const MP={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(e,t=(()=>{}))=>BP(e,t,UP),revert:(e,t=(()=>{}))=>BP(e,t,LP)},FP=ge.Reader,jP=ge.Writer,zP=(ge.util,ge.roots["default"]||(ge.roots["default"]={})),$P=zP.ipfs=(()=>{const e={};return e.pin=function(){const e={};return e.Set=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.fanout=0,e.prototype.seed=0,e.encode=function(e,t){return t||(t=jP.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(16).uint32(e.fanout),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(29).fixed32(e.seed),t},e.decode=function(e,t){e instanceof FP||(e=FP.create(e));var n=void 0===t?e.len:e.pos+t,r=new zP.ipfs.pin.Set;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.version=e.uint32();break;case 2:r.fanout=e.uint32();break;case 3:r.seed=e.fixed32();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof zP.ipfs.pin.Set)return e;var t=new zP.ipfs.pin.Set;return null!=e.version&&(t.version=e.version>>>0),null!=e.fanout&&(t.fanout=e.fanout>>>0),null!=e.seed&&(t.seed=e.seed>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.version=0,n.fanout=0,n.seed=0),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.fanout&&e.hasOwnProperty("fanout")&&(n.fanout=e.fanout),null!=e.seed&&e.hasOwnProperty("seed")&&(n.seed=e.seed),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e}(),e}(),e})();var VP=n(6132);const HP=new Tc("/local/pins"),KP=256,qP=8192,WP=lt.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),YP={direct:"direct",recursive:"recursive"};function GP(e){return new Tc(`/${X.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}function ZP(e,t){for(let n=0;n<e.byteLength;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}const JP=$P.pin.Set;function QP(e){const t=e.Data;if(!t)throw new Error("No data present");const n=Fi.decode(t),r=Fi.decode.bytes??0;if(r<=0)throw new Error("Invalid Set header length");if(r+n>t.length)throw new Error("Impossibly large set header length");const o=t.slice(r,n+r),s=JP.toObject(JP.decode(o),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==s.version)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:t.slice(n+r)}}function XP(e,t){const n=new Uint8Array(4),r=new DataView(n.buffer);r.setUint32(0,e,!0);const o=mi(t.toString()),s=ji([n,o],n.byteLength+o.byteLength);return VP(Ti(s))}async function*eD(e,t){const n=QP(t);let r=0;for(const o of t.Links){if(r<n.header.fanout){const t=o.Hash;if(!WP.equals(t)){const n=await e.get(t),r=qt(n);yield*eD(e,r)}}else yield o.Hash;r++}}async function*tD(e,t,n){const r=t.Links.find((e=>e.Name===n));if(!r)throw new Error("No link found with name "+n);const o=await e.get(r.Hash),s=qt(o);yield*eD(e,s)}function nD(e,t){return n(t,0);async function n(t,r){const o=JP.encode({version:1,fanout:KP,seed:r}).finish(),s=Fi.encode(o.length),i=ji([s,o]),a=[];for(let e=0;e<KP;e++)a.push({Name:"",Tsize:1,Hash:WP});if(t.length<=qP){const e=t.map((e=>({link:{Name:"",Tsize:1,Hash:e.key},data:e.data||new Uint8Array}))).sort(((e,t)=>ZP(e.link.Hash.bytes,t.link.Hash.bytes))),n=a.concat(e.map((e=>e.link))),r=ji([i,...e.map((e=>e.data))]);return{Data:r,Links:n}}{const e=t.reduce(((e,t)=>{const n=XP(r,t.key)%KP;return e[n]=n in e?e[n].concat([t]):[t],e}),[]);let o=0;for(const t of e){const e=await n(t,r+1);await l(e,o),o++}return{Data:i,Links:a}}async function l(t,n){const r=Kt(t),o=await Fs.digest(r),s=lt.createV0(o);await e.put(s,r);const i=t.Links.reduce(((e,t)=>e+(t.Tsize||0)),0)+r.length;a[n]={Name:"",Tsize:i,Hash:s}}}}async function rD(e,t,n){const r=await nD(e,n.map((e=>({key:e})))),o=Kt(r),s=await Fs.digest(o),i=lt.createV0(s);await e.put(i,o);const a=r.Links.reduce(((e,t)=>e+t.Tsize),0)+o.length;return{Name:t,Tsize:a,Hash:i}}async function oD(e,t,n,r){if(!await t.has(HP))return;const o=await t.get(HP),s=lt.decode(o),i=await e.get(s),a=qt(i);let l=0;const c=await NP(tD(e,a,YP.recursive))+await NP(tD(e,a,YP.direct));for await(const u of tD(e,a,YP.recursive)){l++;const e={depth:1/0};0!==u.version&&(e.version=u.version),u.code!==Ht&&(e.codec=u.code),await n.put(GP(u),lo(e)),r(l/c*100,`Migrated recursive pin ${u}`)}for await(const u of tD(e,a,YP.direct)){l++;const e={depth:0};0!==u.version&&(e.version=u.version),u.code!==Ht&&(e.codec=u.code),await n.put(GP(u),lo(e)),r(l/c*100,`Migrated direct pin ${u}`)}await e.delete(s),await t.delete(HP)}async function sD(e,t,n,r){const o=[],s=[];let i=0;const a=await NP(n.queryKeys({}));for await(const{key:h,value:p}of n.query({})){i++;const e=yo(p),t=lt.create(e.version||0,e.codec||Ht,nt(X.decode("b"+h.toString().toLowerCase().split("/").pop())));0===e.depth?(r(i/a*100,`Reverted direct pin ${t}`),s.push(t)):(r(i/a*100,`Reverted recursive pin ${t}`),o.push(t))}r(100,"Updating pin root");const l={Links:[await rD(e,YP.direct,s),await rD(e,YP.recursive,o)]},c=Kt(l),u=await Fs.digest(c),d=lt.createV0(u);await e.put(d,c),await t.put(HP,d.bytes)}async function iD(e,t,n){const r=e.blocks,o=e.datastore,s=e.pins;await r.open(),await o.open(),await s.open();try{await n(r,o,s,t)}finally{await s.close(),await o.close(),await r.close()}}const aD={version:9,description:"Migrates pins to datastore",migrate:(e,t=(()=>{}))=>iD(e,t,oD),revert:(e,t=(()=>{}))=>iD(e,t,sD)},lD=new Tc("/config"),cD=new Tc("/version");function uD(e){let t=e;while(t.db||t.child)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}async function dD(e,t,n){const r=await t(e);if(r)return r;const o=uD(n);return!!o&&new Promise(((t,n)=>{const r=o.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{t(Boolean(r.result))}}))}async function hD(e,t,n,r){if(await n(e))return t(e);const o=uD(r);if(!o)throw Ud();return new Promise(((t,n)=>{const r=o.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{if(r.result)return t(r.result);n(Ud())}}))}function pD(e){const t=e.get.bind(e),n=e.has.bind(e);return e.get=r=>hD(r,t,n,e),e.has=t=>dD(t,n,e),e}function fD(e){return{...e,root:pD(e.root),datastore:pD(e.datastore),pins:pD(e.pins),keys:pD(e.keys)}}async function gD(e,t,n=(()=>{})){const r=uD(t);if(!r)return void n(`${e} did not need an upgrade`);n(`Upgrading ${e}`);const o=(e,t)=>[{type:"del",key:e},{type:"put",key:mi(e),value:t}];await bD(r,o)}async function mD(e,t,n=(()=>{})){const r=uD(t);if(!r)return void n(`${e} did not need a downgrade`);n(`Downgrading ${e}`);const o=(e,t)=>[{type:"del",key:e},{type:"put",key:Ti(e),value:t}];await bD(r,o)}function yD(e){return e.child?yD(e.child):e}async function vD(e,t,n){const r=Object.entries(e).map((([e,t])=>({key:e,backend:yD(t)}))).filter((({key:e,backend:t})=>"LevelDatastore"===t.constructor.name)).map((({key:e,backend:t})=>({name:e,store:t})));t(0,`Migrating ${r.length} dbs`);let o=0;const s=e=>{t(Math.round(o/r.length*100),e)};for(const{name:i,store:a}of r){await a.open();try{await n(i,a,s)}finally{o++,await a.close()}}t(100,`Migrated ${r.length} dbs`)}const wD={version:10,description:"Migrates datastore-level keys to binary",migrate:(e,t=(()=>{}))=>vD(e,t,gD),revert:(e,t=(()=>{}))=>vD(e,t,mD)};function bD(e,t){function n(t,n){const r=e.store("readwrite"),o=r.transaction;let s,i=0;function a(){const e=t[i++],n=e.key;let l;try{l="del"===e.type?r.delete(n):r.put(e.value,n)}catch(ik){return s=ik,void o.abort()}i<t.length&&(l.onsuccess=a)}o.onabort=()=>n(s||o.error||new Error("aborted by user")),o.oncomplete=()=>n(),a()}return new Promise(((r,o)=>{const s=e.iterator(),i=e=>e;function a(){const e=(e,i,l)=>{if(e||void 0===i){const e=e=>{e?o(e):r()};s.end(e)}else n(t(i,l),a)};s.next(e)}s._deserializeKey=s._deserializeValue=i,a()}))}const SD=new Tc("/local/filesroot");async function _D(e,t=(()=>{})){if(t(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(SD)){const t=await e.root.get(SD);await e.datastore.put(SD,t),await e.root.delete(SD)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo datastore")}async function ED(e,t=(()=>{})){if(t(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(SD)){const t=await e.datastore.get(SD);await e.root.put(SD,t),await e.datastore.delete(SD)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo root datastore")}const kD={version:11,description:"Store mfs root in the datastore",migrate:_D,revert:ED},CD=ge.Reader,ID=ge.Writer,AD=ge.util,TD=ge.roots["default"]||(ge.roots["default"]={}),RD=TD.Protocols=(()=>{function e(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.protocols=AD.emptyArray,e.encode=function(e,t){if(t||(t=ID.create()),null!=e.protocols&&e.protocols.length)for(var n=0;n<e.protocols.length;++n)t.uint32(10).string(e.protocols[n]);return t},e.decode=function(e,t){e instanceof CD||(e=CD.create(e));var n=void 0===t?e.len:e.pos+t,r=new TD.Protocols;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(e.string());break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof TD.Protocols)return e;var t=new TD.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var n=0;n<e.protocols.length;++n)t.protocols[n]=String(e.protocols[n])}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.protocols=[]),e.protocols&&e.protocols.length){n.protocols=[];for(var r=0;r<e.protocols.length;++r)n.protocols[r]=e.protocols[r]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e})(),xD=ge.Reader,OD=ge.Writer,ND=ge.util,PD=ge.roots["default"]||(ge.roots["default"]={}),DD=PD.Addresses=(()=>{function e(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.addrs=ND.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(e,t){if(t||(t=OD.create()),null!=e.addrs&&e.addrs.length)for(var n=0;n<e.addrs.length;++n)PD.Addresses.Address.encode(e.addrs[n],t.uint32(10).fork()).ldelim();return null!=e.certifiedRecord&&Object.hasOwnProperty.call(e,"certifiedRecord")&&PD.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof xD||(e=xD.create(e));var n=void 0===t?e.len:e.pos+t,r=new PD.Addresses;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.addrs&&r.addrs.length||(r.addrs=[]),r.addrs.push(PD.Addresses.Address.decode(e,e.uint32()));break;case 2:r.certifiedRecord=PD.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof PD.Addresses)return e;var t=new PD.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var n=0;n<e.addrs.length;++n){if("object"!==typeof e.addrs[n])throw TypeError(".Addresses.addrs: object expected");t.addrs[n]=PD.Addresses.Address.fromObject(e.addrs[n])}}if(null!=e.certifiedRecord){if("object"!==typeof e.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=PD.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addrs=[]),t.defaults&&(n.certifiedRecord=null),e.addrs&&e.addrs.length){n.addrs=[];for(var r=0;r<e.addrs.length;++r)n.addrs[r]=PD.Addresses.Address.toObject(e.addrs[r],t)}return null!=e.certifiedRecord&&e.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=PD.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.Address=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.multiaddr=ND.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:ND.oneOfGetter(t=["isCertified"]),set:ND.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=OD.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof xD||(e=xD.create(e));var n=void 0===t?e.len:e.pos+t,r=new PD.Addresses.Address;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof PD.Addresses.Address)return e;var t=new PD.Addresses.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?ND.base64.decode(e.multiaddr,t.multiaddr=ND.newBuffer(ND.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.multiaddr="":(n.multiaddr=[],t.bytes!==Array&&(n.multiaddr=ND.newBuffer(n.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(n.multiaddr=t.bytes===String?ND.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(n.isCertified=e.isCertified,t.oneofs&&(n._isCertified="isCertified")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e}(),e.CertifiedRecord=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=ND.Long?ND.Long.fromBits(0,0,!0):0,e.prototype.raw=ND.newBuffer([]),e.encode=function(e,t){return t||(t=OD.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.raw&&Object.hasOwnProperty.call(e,"raw")&&t.uint32(18).bytes(e.raw),t},e.decode=function(e,t){e instanceof xD||(e=xD.create(e));var n=void 0===t?e.len:e.pos+t,r=new PD.Addresses.CertifiedRecord;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.seq=e.uint64();break;case 2:r.raw=e.bytes();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof PD.Addresses.CertifiedRecord)return e;var t=new PD.Addresses.CertifiedRecord;return null!=e.seq&&(ND.Long?(t.seq=ND.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new ND.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.raw&&("string"===typeof e.raw?ND.base64.decode(e.raw,t.raw=ND.newBuffer(ND.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(ND.Long){var r=new ND.Long(0,0,!0);n.seq=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.seq=t.longs===String?"0":0;t.bytes===String?n.raw="":(n.raw=[],t.bytes!==Array&&(n.raw=ND.newBuffer(n.raw)))}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?n.seq=t.longs===String?String(e.seq):e.seq:n.seq=t.longs===String?ND.Long.prototype.toString.call(e.seq):t.longs===Number?new ND.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.raw&&e.hasOwnProperty("raw")&&(n.raw=t.bytes===String?ND.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e}(),e})(),UD=ge.Reader,LD=ge.Writer,BD=ge.util,MD=ge.roots["default"]||(ge.roots["default"]={}),FD=MD.Peer=(()=>{function e(e){if(this.addresses=[],this.protocols=[],this.metadata=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.addresses=BD.emptyArray,e.prototype.protocols=BD.emptyArray,e.prototype.metadata=BD.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null,Object.defineProperty(e.prototype,"_pubKey",{get:BD.oneOfGetter(t=["pubKey"]),set:BD.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:BD.oneOfGetter(t=["peerRecordEnvelope"]),set:BD.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=LD.create()),null!=e.addresses&&e.addresses.length)for(var n=0;n<e.addresses.length;++n)MD.Address.encode(e.addresses[n],t.uint32(10).fork()).ldelim();if(null!=e.protocols&&e.protocols.length)for(n=0;n<e.protocols.length;++n)t.uint32(18).string(e.protocols[n]);if(null!=e.metadata&&e.metadata.length)for(n=0;n<e.metadata.length;++n)MD.Metadata.encode(e.metadata[n],t.uint32(26).fork()).ldelim();return null!=e.pubKey&&Object.hasOwnProperty.call(e,"pubKey")&&t.uint32(34).bytes(e.pubKey),null!=e.peerRecordEnvelope&&Object.hasOwnProperty.call(e,"peerRecordEnvelope")&&t.uint32(42).bytes(e.peerRecordEnvelope),t},e.decode=function(e,t){e instanceof UD||(e=UD.create(e));var n=void 0===t?e.len:e.pos+t,r=new MD.Peer;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(MD.Address.decode(e,e.uint32()));break;case 2:r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(e.string());break;case 3:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(MD.Metadata.decode(e,e.uint32()));break;case 4:r.pubKey=e.bytes();break;case 5:r.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof MD.Peer)return e;var t=new MD.Peer;if(e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".Peer.addresses: array expected");t.addresses=[];for(var n=0;n<e.addresses.length;++n){if("object"!==typeof e.addresses[n])throw TypeError(".Peer.addresses: object expected");t.addresses[n]=MD.Address.fromObject(e.addresses[n])}}if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Peer.protocols: array expected");t.protocols=[];for(n=0;n<e.protocols.length;++n)t.protocols[n]=String(e.protocols[n])}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".Peer.metadata: array expected");t.metadata=[];for(n=0;n<e.metadata.length;++n){if("object"!==typeof e.metadata[n])throw TypeError(".Peer.metadata: object expected");t.metadata[n]=MD.Metadata.fromObject(e.metadata[n])}}return null!=e.pubKey&&("string"===typeof e.pubKey?BD.base64.decode(e.pubKey,t.pubKey=BD.newBuffer(BD.base64.length(e.pubKey)),0):e.pubKey.length&&(t.pubKey=e.pubKey)),null!=e.peerRecordEnvelope&&("string"===typeof e.peerRecordEnvelope?BD.base64.decode(e.peerRecordEnvelope,t.peerRecordEnvelope=BD.newBuffer(BD.base64.length(e.peerRecordEnvelope)),0):e.peerRecordEnvelope.length&&(t.peerRecordEnvelope=e.peerRecordEnvelope)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addresses=[],n.protocols=[],n.metadata=[]),e.addresses&&e.addresses.length){n.addresses=[];for(var r=0;r<e.addresses.length;++r)n.addresses[r]=MD.Address.toObject(e.addresses[r],t)}if(e.protocols&&e.protocols.length){n.protocols=[];for(r=0;r<e.protocols.length;++r)n.protocols[r]=e.protocols[r]}if(e.metadata&&e.metadata.length){n.metadata=[];for(r=0;r<e.metadata.length;++r)n.metadata[r]=MD.Metadata.toObject(e.metadata[r],t)}return null!=e.pubKey&&e.hasOwnProperty("pubKey")&&(n.pubKey=t.bytes===String?BD.base64.encode(e.pubKey,0,e.pubKey.length):t.bytes===Array?Array.prototype.slice.call(e.pubKey):e.pubKey,t.oneofs&&(n._pubKey="pubKey")),null!=e.peerRecordEnvelope&&e.hasOwnProperty("peerRecordEnvelope")&&(n.peerRecordEnvelope=t.bytes===String?BD.base64.encode(e.peerRecordEnvelope,0,e.peerRecordEnvelope.length):t.bytes===Array?Array.prototype.slice.call(e.peerRecordEnvelope):e.peerRecordEnvelope,t.oneofs&&(n._peerRecordEnvelope="peerRecordEnvelope")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e})(),jD=(MD.Address=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.multiaddr=BD.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:BD.oneOfGetter(t=["isCertified"]),set:BD.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=LD.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof UD||(e=UD.create(e));var n=void 0===t?e.len:e.pos+t,r=new MD.Address;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof MD.Address)return e;var t=new MD.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?BD.base64.decode(e.multiaddr,t.multiaddr=BD.newBuffer(BD.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.multiaddr="":(n.multiaddr=[],t.bytes!==Array&&(n.multiaddr=BD.newBuffer(n.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(n.multiaddr=t.bytes===String?BD.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(n.isCertified=e.isCertified,t.oneofs&&(n._isCertified="isCertified")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e})(),MD.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value=BD.newBuffer([]),e.encode=function(e,t){return t||(t=LD.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.decode=function(e,t){e instanceof UD||(e=UD.create(e));var n=void 0===t?e.len:e.pos+t,r=new MD.Metadata;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.key=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof MD.Metadata)return e;var t=new MD.Metadata;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&("string"===typeof e.value?BD.base64.decode(e.value,t.value=BD.newBuffer(BD.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=BD.newBuffer(n.value)))),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.bytes===String?BD.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e})(),ge.Reader),zD=ge.Writer,$D=ge.util,VD=ge.roots["default"]||(ge.roots["default"]={}),HD=VD.Envelope=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.publicKey=$D.newBuffer([]),e.prototype.payloadType=$D.newBuffer([]),e.prototype.payload=$D.newBuffer([]),e.prototype.signature=$D.newBuffer([]),e.encode=function(e,t){return t||(t=zD.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.payloadType&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},e.decode=function(e,t){e instanceof jD||(e=jD.create(e));var n=void 0===t?e.len:e.pos+t,r=new VD.Envelope;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.payloadType=e.bytes();break;case 3:r.payload=e.bytes();break;case 5:r.signature=e.bytes();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof VD.Envelope)return e;var t=new VD.Envelope;return null!=e.publicKey&&("string"===typeof e.publicKey?$D.base64.decode(e.publicKey,t.publicKey=$D.newBuffer($D.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),null!=e.payloadType&&("string"===typeof e.payloadType?$D.base64.decode(e.payloadType,t.payloadType=$D.newBuffer($D.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),null!=e.payload&&("string"===typeof e.payload?$D.base64.decode(e.payload,t.payload=$D.newBuffer($D.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),null!=e.signature&&("string"===typeof e.signature?$D.base64.decode(e.signature,t.signature=$D.newBuffer($D.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.publicKey="":(n.publicKey=[],t.bytes!==Array&&(n.publicKey=$D.newBuffer(n.publicKey))),t.bytes===String?n.payloadType="":(n.payloadType=[],t.bytes!==Array&&(n.payloadType=$D.newBuffer(n.payloadType))),t.bytes===String?n.payload="":(n.payload=[],t.bytes!==Array&&(n.payload=$D.newBuffer(n.payload))),t.bytes===String?n.signature="":(n.signature=[],t.bytes!==Array&&(n.signature=$D.newBuffer(n.signature)))),null!=e.publicKey&&e.hasOwnProperty("publicKey")&&(n.publicKey=t.bytes===String?$D.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),null!=e.payloadType&&e.hasOwnProperty("payloadType")&&(n.payloadType=t.bytes===String?$D.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),null!=e.payload&&e.hasOwnProperty("payload")&&(n.payload=t.bytes===String?$D.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),null!=e.signature&&e.hasOwnProperty("signature")&&(n.signature=t.bytes===String?$D.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e})(),KD=ge.Reader,qD=ge.Writer,WD=ge.util,YD=ge.roots["default"]||(ge.roots["default"]={}),GD=YD.PeerRecord=(()=>{function e(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.peerId=WD.newBuffer([]),e.prototype.seq=WD.Long?WD.Long.fromBits(0,0,!0):0,e.prototype.addresses=WD.emptyArray,e.encode=function(e,t){if(t||(t=qD.create()),null!=e.peerId&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.addresses&&e.addresses.length)for(var n=0;n<e.addresses.length;++n)YD.PeerRecord.AddressInfo.encode(e.addresses[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof KD||(e=KD.create(e));var n=void 0===t?e.len:e.pos+t,r=new YD.PeerRecord;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.peerId=e.bytes();break;case 2:r.seq=e.uint64();break;case 3:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(YD.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof YD.PeerRecord)return e;var t=new YD.PeerRecord;if(null!=e.peerId&&("string"===typeof e.peerId?WD.base64.decode(e.peerId,t.peerId=WD.newBuffer(WD.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),null!=e.seq&&(WD.Long?(t.seq=WD.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new WD.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var n=0;n<e.addresses.length;++n){if("object"!==typeof e.addresses[n])throw TypeError(".PeerRecord.addresses: object expected");t.addresses[n]=YD.PeerRecord.AddressInfo.fromObject(e.addresses[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addresses=[]),t.defaults)if(t.bytes===String?n.peerId="":(n.peerId=[],t.bytes!==Array&&(n.peerId=WD.newBuffer(n.peerId))),WD.Long){var r=new WD.Long(0,0,!0);n.seq=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.seq=t.longs===String?"0":0;if(null!=e.peerId&&e.hasOwnProperty("peerId")&&(n.peerId=t.bytes===String?WD.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?n.seq=t.longs===String?String(e.seq):e.seq:n.seq=t.longs===String?WD.Long.prototype.toString.call(e.seq):t.longs===Number?new WD.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){n.addresses=[];for(var o=0;o<e.addresses.length;++o)n.addresses[o]=YD.PeerRecord.AddressInfo.toObject(e.addresses[o],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.AddressInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.multiaddr=WD.newBuffer([]),e.encode=function(e,t){return t||(t=qD.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),t},e.decode=function(e,t){e instanceof KD||(e=KD.create(e));var n=void 0===t?e.len:e.pos+t,r=new YD.PeerRecord.AddressInfo;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.multiaddr=e.bytes();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof YD.PeerRecord.AddressInfo)return e;var t=new YD.PeerRecord.AddressInfo;return null!=e.multiaddr&&("string"===typeof e.multiaddr?WD.base64.decode(e.multiaddr,t.multiaddr=WD.newBuffer(WD.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.multiaddr="":(n.multiaddr=[],t.bytes!==Array&&(n.multiaddr=WD.newBuffer(n.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(n.multiaddr=t.bytes===String?WD.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e}(),e})();async function ZD(e,t=(()=>{})){t(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();const n={},r=[];for await(const{key:o,value:s}of e.datastore.query({prefix:"/peers"})){r.push(o);const e=o.toString(),[,t,i,a,l]=e.split("/");if("peers"===t&&(["protos","addrs","metadata","keys"].includes(i)&&a))if(n[a]=n[a]||{addresses:[],protocols:[],metadata:[]},"protos"===i){const e=RD.decode(s);n[a].protocols=e.protocols.sort()}else if("addrs"===i){const e=DD.decode(s);n[a].addresses=e.addrs.sort(((e,t)=>Da(e.multiaddr).toString().localeCompare(Da(t.multiaddr).toString()))),e.certifiedRecord&&e.certifiedRecord.raw&&(n[a].peerRecordEnvelope=e.certifiedRecord.raw)}else"metadata"===i?n[a].metadata.push({key:l,value:s}):"keys"===i&&(n[a].pubKey=s)}t(33,"Read peer data from store");for(const o of r)await e.datastore.delete(o);t(66,"Removed existing peer data from store");for(const o of Object.keys(n)){const t=n[o];t.metadata=t.metadata.sort(((e,t)=>e.key.localeCompare(t.key)));const r=FD.encode(t).finish();await e.datastore.put(new Tc(`/peers/${o}`),r)}await e.datastore.close(),t(100,"Stored each peerstore key under a single datastore key")}async function JD(e,t=(()=>{})){t(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();const n={},r=[];for await(const{key:o,value:s}of e.datastore.query({prefix:"/peers"})){r.push(o);const e=o.toString(),[,,t]=e.split("/");n[t]=FD.decode(s)}t(33,"Read peer data from store");for(const o of r)await e.datastore.delete(o);t(66,"Removed existing peer data from store");for(const[o,s]of Object.entries(n)){if(s.protocols&&s.protocols.length>0&&await e.datastore.put(new Tc(`/peers/protos/${o}`),RD.encode({protocols:s.protocols}).finish()),s.addresses&&s.addresses.length>0){const t=s.peerRecordEnvelope;let n;if(t){const e=HD.decode(t),r=GD.decode(e.payload);n={raw:t,seq:r.seq}}await e.datastore.put(new Tc(`/peers/addrs/${o}`),DD.encode({addrs:s.addresses,certifiedRecord:n}).finish())}if(s.metadata&&s.metadata.length>0)for(const{key:t,value:n}of s.metadata)await e.datastore.put(new Tc(`/peers/metadata/${o}/${t}`),n);s.pubKey&&await e.datastore.put(new Tc(`/peers/keys/${o}`),s.pubKey)}await e.datastore.close(),t(100,"Stored each peerstore key under multiple datastore keys")}ge.util.Long=void 0,ge.configure();const QD={version:12,description:"Store each peerstore peer under a single datastore key",migrate:ZD,revert:JD},XD={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0};var eU=[Object.assign({version:1},XD),Object.assign({version:2},XD),Object.assign({version:3},XD),Object.assign({version:4},XD),Object.assign({version:5},XD),Object.assign({version:6},XD),Object.assign({version:7},XD),MP,aD,wD,kD,QD];class tU extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=tU.code,this.message=e}}tU.code="ERR_NON_REVERSIBLE_MIGRATION";class nU extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=nU.code,this.message=e}}nU.code="ERR_NOT_INITIALIZED_REPO";class rU extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=rU.code,this.message=e}}rU.code="ERR_REQUIRED_PARAMETER";class oU extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=oU.code,this.message=e}}oU.code="ERR_INVALID_VALUE";class sU extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=sU.code,this.message=e}}sU.code="ERR_MISSING_REPO_OPTIONS";const iU=x("ipfs:repo:migrator:repo:init");async function aU(e){if(!e)throw new sU("Please pass repo options when trying to open a repo");const t=e.root;try{await t.open();const e=await t.has(cD),n=await t.has(lD);return!(!e||!n)||(iU(`Version entry present: ${e}`),iU(`Config entry present: ${n}`),!1)}catch(n){return iU("While checking if repo is initialized error was thrown: "+n.message),!1}finally{if(void 0!==t)try{await t.close()}catch{}}}async function lU(e){if(!await aU(e))throw new nU("Repo is not initialized!");const t=e.root;await t.open();try{return parseInt(Ti(await t.get(cD)))}finally{await t.close()}}async function cU(e,t){if(!t)throw new sU("Please pass repo options when trying to open a repo");const n=t.root;await n.open(),await n.put(cD,mi(String(e))),await n.close()}const uU=x("ipfs:repo:migrator");function dU(e){return e=e||eU,Array.isArray(e)&&0!==e.length?e[e.length-1].version:0}async function hU(e,t,n,r,o={}){const s=o.ignoreLock??!1,i=o.onProgress,a=o.isDryRun??!1,l=o.migrations??eU;if(!e)throw new gU.RequiredParameterError("Path argument is required!");if(!n)throw new gU.RequiredParameterError("repoOptions argument is required!");if(!r)throw new gU.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(r)||r<=0)throw new gU.InvalidValueError("Version has to be positive integer!");t=fD(t);const c=await lU(t);if(c===r)return void uU("Nothing to migrate.");if(c>r)throw new gU.InvalidValueError(`Current repo's version (${c}) is higher then toVersion (${r}), you probably wanted to revert it?`);let u;fU(l,c,r),a||s||(u=await n.repoLock.lock(e));try{for(const e of l){if(void 0!==r&&e.version>r)break;if(!(e.version<=c)){uU(`Migrating version ${e.version}`);try{if(!a){let n=()=>{};i&&(n=(t,n)=>i(e.version,t.toFixed(2),n)),await e.migrate(t,n)}}catch(d){const n=e.version-1;throw uU(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${n}`),await cU(n,t),new Error(`During migration to version ${e.version} exception was raised: ${d.stack||d.message||d}`)}uU(`Migrating to version ${e.version} finished`)}}a||await cU(r||dU(l),t),uU("Repo successfully migrated",void 0!==r?`to version ${r}!`:"to latest version!")}finally{a||s||!u||await u.close()}}async function pU(e,t,n,r,o={}){const s=o.ignoreLock??!1,i=o.onProgress,a=o.isDryRun??!1,l=o.migrations??eU;if(!e)throw new gU.RequiredParameterError("Path argument is required!");if(!n)throw new gU.RequiredParameterError("repoOptions argument is required!");if(!r)throw new gU.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(r)||r<=0)throw new gU.InvalidValueError("Version has to be positive integer!");t=fD(t);const c=await lU(t);if(c===r)return void uU("Nothing to revert.");if(c<r)throw new gU.InvalidValueError(`Current repo's version (${c}) is lower then toVersion (${r}), you probably wanted to migrate it?`);let u;fU(l,r,c,!0),a||s||(u=await n.repoLock.lock(e)),uU(`Reverting from version ${c} to ${r}`);try{const e=l.slice().reverse();for(const n of e){if(n.version<=r)break;if(!(n.version>c)){uU(`Reverting migration version ${n.version}`);try{if(!a){let e=()=>{};i&&(e=(e,t)=>i(n.version,e.toFixed(2),t)),await n.revert(t,e)}}catch(d){const e=n.version;throw uU(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${e}`),await cU(e,t),d.message=`During reversion to version ${n.version} exception was raised: ${d.message}`,d}uU(`Reverting to version ${n.version} finished`)}}a||await cU(r,t),uU(`All migrations successfully reverted to version ${r}!`)}finally{a||s||!u||await u.close()}}function fU(e,t,n,r=!1){let o=0;for(const s of e){if(s.version>n)break;if(s.version>t){if(r&&!s.revert)throw new gU.NonReversibleMigrationError(`It is not possible to revert to version ${t} because migration version ${s.version} is not reversible. Cancelling reversion.`);o++}}if(o!==n-t)throw new gU.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${t} to ${n}`)}const gU=k;var mU=n(4137);class yU extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=yU.code}}yU.code="ERR_LOCK_EXISTS";class vU extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=vU.code}}vU.code="ERR_NOT_FOUND";class wU extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=wU.code}}wU.code="ERR_INVALID_REPO_VERSION";const bU="ERR_REPO_NOT_INITIALIZED",SU="ERR_REPO_ALREADY_OPEN",_U="ERR_REPO_ALREADY_CLOSED";async function EU(e,t,n){const r=await t(e);if(r)return r;const o=CU(n);return!!o&&new Promise(((t,n)=>{const r=o.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{t(Boolean(r.result))}}))}async function kU(e,t,n,r){if(await n(e))return t(e);const o=CU(r);if(!o)throw new vU;return new Promise(((t,n)=>{const r=o.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{if(r.result)return t(r.result);n(new vU)}}))}function CU(e){let t=e;while(t.db||t.child)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}const IU=x("ipfs:repo:version"),AU=new Tc("version");function TU(e){return{async exists(){return EU(AU,e.has.bind(e),e)},async get(){const t=await kU(AU,e.get.bind(e),e.has.bind(e),e);return parseInt(Ti(t),10)},set(t){return e.put(AU,mi(String(t)))},async check(e){const t=await this.get();IU("comparing version: %s and %s",t,e);const n=6===t&&7===e||6===e&&7===t;return t===e||n}}}const RU=zu["default"]?zu["default"]:zu,xU=new Tc("config");function OU(e){const t=new RU({concurrency:1}),n={async getAll(t={}){const n=await kU(xU,e.get.bind(e),e.has.bind(e),e);return JSON.parse(Ti(n))},async get(e,t={}){if(null==e)throw new vU(`Key ${e} does not exist in config`);const n=await this.getAll(t),r=xP(n,e);if(void 0===r)throw new vU(`Key ${e} does not exist in config`);return r},set(e,n,o={}){if("string"!==typeof e&&!(e instanceof String))throw fe(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===n||n instanceof Uint8Array)throw fe(new Error("Invalid value type: "+typeof n),"ERR_INVALID_VALUE");return t.add((()=>r({key:e,value:n},o.signal)))},replace(e,n={}){if(!e||e instanceof Uint8Array)throw fe(new Error("Invalid value type: "+typeof e),"ERR_INVALID_VALUE");return t.add((()=>r({key:void 0,value:e},n.signal)))},async exists(){return EU(xU,e.has.bind(e),e)}};return n;async function r(e,t){if(t&&t.aborted)return;const r=e.key,s=e.value;if(r){const e=await n.getAll();return"object"===typeof e&&null!==e&&aT(e,r,s),o(e)}return o(s)}function o(t){const n=mi(JSON.stringify(t,null,2));return e.put(xU,n)}}function NU(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function PU(e,t={}){if(!NU(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");const{deep:n,compare:r}=t,o=[],s=[],i=e=>{const t=o.indexOf(e);if(-1!==t)return s[t];const n=[];return o.push(e),s.push(n),n.push(...e.map((e=>Array.isArray(e)?i(e):NU(e)?a(e):e))),n},a=e=>{const t=o.indexOf(e);if(-1!==t)return s[t];const l={},c=Object.keys(e).sort(r);o.push(e),s.push(l);for(const r of c){const t=e[r];let o;o=n&&Array.isArray(t)?i(t):n&&NU(t)?a(t):t,Object.defineProperty(l,r,{...Object.getOwnPropertyDescriptor(e,r),value:o})}return l};return Array.isArray(e)?n?i(e):e.slice():a(e)}const DU=new Tc("datastore_spec");function UU(e){return{exists(){return e.has(DU)},async get(){const t=await e.get(DU);return JSON.parse(Ti(t))},async set(t){return e.put(DU,mi(JSON.stringify(PU(t,{deep:!0}))))}}}const LU=new Tc("api");function BU(e){return{async get(){const t=await e.get(LU);return t&&t.toString()},set(t){return e.put(LU,mi(t.toString()))},delete(){return e.delete(LU)}}}function MU(e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){const r=FU(t);return r.isIdentity?Promise.resolve(r.digest):e.get(t,n)},async*getMany(e,t){for await(const n of e)yield this.get(n,t)},async put(t,n,r){const{isIdentity:o}=FU(t);o||await e.put(t,n,r)},async*putMany(t,n){const r=ty({objectMode:!0}),o=globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout;o((async()=>{try{await Gm(e.putMany(async function*(){for await(const{key:e,value:n}of t)FU(e).isIdentity||(yield{key:e,value:n}),r.push({key:e,value:n})}())),r.end()}catch(ik){r.end(ik)}})),yield*r},has(t,n){const{isIdentity:r}=FU(t);return r?Promise.resolve(!0):e.has(t,n)},delete(t,n){const{isIdentity:r}=FU(t);return r?Promise.resolve():e.delete(t,n)},deleteMany(t,n){return e.deleteMany(Zm(t,(e=>!FU(e).isIdentity)),n)},batch(){const t=e.batch();return{put(e,n){const{isIdentity:r}=FU(e);r||t.put(e,n)},delete(e){const{isIdentity:n}=FU(e);n||t.delete(e)},commit:e=>t.commit(e)}}}}function FU(e){const t=lt.asCID(e);if(null==t)throw fe(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==Es.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}const jU=x("ipfs:repo:lock:memory"),zU="repo.lock",$U={};async function VU(e){const t=e+"/"+zU;if(jU("locking %s",t),!0===$U[t])throw new yU(`Lock already being held for file: ${t}`);$U[t]=!0;const n={async close(){$U[t]&&delete $U[t]}};return n}async function HU(e){const t=e+"/"+zU;return jU(`checking lock: ${t}`),Boolean($U[t])}const KU={lock:VU,locked:HU};var qU={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:KU},WU={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};function YU(e){const t=lt.asCID(e);if(null==t)throw fe(new Error("Not a valid cid"),"ERR_INVALID_CID");const n=X.encode(t.multihash.bytes);return new Tc("/"+n.slice(1).toUpperCase(),!1)}function GU(e){return nt(X.decode(`b${e.toString().toLowerCase().substring(1)}`))}const ZU=x("ipfs:repo:utils:walk-dag");async function*JU(e,t,n,r){try{const o=await t.get(e,r),s=await n(e.code),i=ST({bytes:o,cid:e,codec:s});for(const[,e]of i.links())yield e,yield*JU(e,t,n,r)}catch(ik){throw ZU("Could not walk DAG for CID",e.toString(),ik),ik}}class QU extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"===typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"===typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"===typeof t.expiry&&t.expiry<=Date.now()&&("function"===typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){const n=this._deleteIfExpired(e,t);if(!1===n)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){const r=this._deleteIfExpired(t,n);!1===r&&(yield e)}}for(const e of this.cache){const[t,n]=e,r=this._deleteIfExpired(t,n);!1===r&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const r="number"===typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:r}):this._set(e,{value:t,expiry:r})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e,r=this._deleteIfExpired(t,n);!1===r&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){const e=this._deleteIfExpired(t,n);!1===e&&(yield[t,n.value])}}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,o]=n,s=this._deleteIfExpired(r,o);!1===s&&(yield[r,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,o]=n;if(!this.cache.has(r)){const e=this._deleteIfExpired(r,o);!1===e&&(yield[r,o.value])}}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,r]of this.entriesAscending())e.call(t,r,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}const XU=2048;function eL(e){const t=`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`;return fe(new Error(t),"ERR_INVALID_PIN_TYPE")}class tL{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=x("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);const n={depth:0};return 0!==e.version&&(n.version=e.version),e.code!==Ht&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(YU(e),lo(n))}unpin(e,t){return this.pinstore.delete(YU(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);const n={depth:1/0};0!==e.version&&(n.version=e.version),e.code!==Ht&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(YU(e),lo(n))}async*directKeys(e){for await(const t of this.pinstore.query({filters:[e=>{const t=yo(e.value);return 0===t.depth}]})){const e=yo(t.value),n=e.version||0,r=null!=e.codec?e.codec:Ht,o=GU(t.key);yield{cid:lt.create(n,r,o),metadata:e.metadata}}}async*recursiveKeys(e){for await(const t of this.pinstore.query({filters:[e=>{const t=yo(e.value);return t.depth===1/0}]})){const e=yo(t.value),n=e.version||0,r=null!=e.codec?e.codec:Ht,o=GU(t.key);yield{cid:lt.create(n,r,o),metadata:e.metadata}}}async*indirectKeys(e){for await(const{cid:t}of this.recursiveKeys())for await(const n of JU(t,this.blockstore,this.loadCodec,e)){const e=[Cd.recursive],t=await this.isPinnedWithType(n,e);t.pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);const r=t.includes(Cd.all),o=t.includes(Cd.direct),s=t.includes(Cd.recursive),i=t.includes(Cd.indirect);if(s||o||r){const n=await XT(this.pinstore.query({prefix:YU(e).toString(),filters:[e=>{if(r)return!0;const n=yo(e.value);return t.includes(0===n.depth?Cd.direct:Cd.recursive)}],limit:1}));if(n){const t=yo(n.value);return{cid:e,pinned:!0,reason:0===t.depth?Cd.direct:Cd.recursive,metadata:t.metadata}}}const a=this;async function*l(e,t){for await(const{cid:n}of t)for await(const t of JU(n,a.blockstore,a.loadCodec))if(t.equals(e))return void(yield n)}if(r||i){const t=await XT(l(e,this.recursiveKeys()));if(t)return{cid:e,pinned:!0,reason:Cd.indirect,parent:t}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){const n=new QU({maxSize:t.cidCacheMaxSize??XU}),r=async(e,t)=>{if(n.has(e.toString()))return;n.set(e.toString(),!0);const o=await this.blockstore.get(e,t),s=await this.loadCodec(e.code),i=ST({bytes:o,cid:e,codec:s});await Promise.all([...i.links()].map((([,e])=>r(e,t))))};await r(e,t)}static checkPinType(e){if("string"!==typeof e||!Object.keys(Cd).includes(e))throw eL(e);return!0}}function nL(e,t){return{open(){return t.open()},close(){return t.close()},query(e,n){return t.query(e,n)},queryKeys(e,n){return t.queryKeys(e,n)},async get(e,n){return t.get(e,n)},async*getMany(e,n){yield*t.getMany(e,n)},async put(e,n,r){await t.put(e,n,r)},async*putMany(e,n){yield*t.putMany(e,n)},has(e,n){return t.has(e,n)},async delete(n,r){return await rL(n,e),t.delete(n,r)},deleteMany(n,r){return t.deleteMany(vv(n,(async t=>(await rL(t,e),t))),r)},batch(){return t.batch()}}}async function rL(e,t){const{pinned:n,reason:r}=await t.isPinnedWithType(e,Cd.all);if(n)throw fe(new Error(`pinned: ${r}`),"ERR_BLOCK_PINNED")}async function*oL(e,t=1){for await(const n of Hv(e,t)){const e=n.map((async e=>await e().then((e=>({ok:!0,value:e})),(e=>({ok:!1,err:e})))));for(let t=0;t<e.length;t++){const n=await e[t];if(!n.ok)throw n.err;yield n.value}}}const sL=x("ipfs:repo:gc"),iL=Ud().code,aL=256,lL=new Tc("/local/filesroot");function cL({gcLock:e,pins:t,blockstore:n,root:r,loadCodec:o}){async function*s(){const s=Date.now();sL("Creating set of marked blocks");const i=await e.writeLock();try{const e=await uL({pins:t,blockstore:n,root:r,loadCodec:o}),i=n.queryKeys({});yield*dL({blockstore:n},e,i),sL(`Complete (${Date.now()-s}ms)`)}finally{i()}}return s}async function uL({pins:e,blockstore:t,loadCodec:n,root:r}){const o=async function*(){let e;try{e=await r.get(lL)}catch(ik){if(ik.code===iL)return void sL("No blocks in MFS");throw ik}const o=lt.decode(e);yield o,yield*JU(o,t,n)}(),s=wv(vv(e.recursiveKeys(),(({cid:e})=>e)),e.indirectKeys(),vv(e.directKeys(),(({cid:e})=>e)),o),i=new Set;for await(const a of wv(s,o))i.add(X.encode(a.multihash.bytes));return i}async function*dL({blockstore:e},t,n){let r=0,o=0;const s=async n=>async function(){r++;try{const r=X.encode(n.multihash.bytes);if(t.has(r))return null;try{await e.delete(n),o++}catch(ik){return{err:new Error(`Could not delete block with CID ${n}: ${ik.message}`)}}return{cid:n}}catch(ik){const t=`Could delete block with CID ${n}`;return sL(t,ik),{err:new Error(t+`: ${ik.message}`)}}};yield*kv(oL(vv(n,s),aL),(e=>Zm(e,Boolean))),sL(`Marked set has ${t.size} unique blocks. Blockstore has ${r} blocks. Deleted ${o} blocks.`)}const hL=x("ipfs:repo"),pL=Number.MAX_SAFE_INTEGER,fL="repoAutoMigrate";class gL{constructor(e,t,n,r){if("string"!==typeof e)throw new Error("missing repo path");if("function"!==typeof t)throw new Error("missing codec loader");this.options=T(qU,r),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;const o=n.blocks,s=n.pins;this.pins=new tL({pinstore:s,blockstore:o,loadCodec:t});const i=nL(this.pins,o);this.blocks=MU(i),this.version=TU(this.root),this.config=OU(this.root),this.spec=UU(this.root),this.apiAddr=BU(this.root),this.gcLock=Jx({name:e,singleProcess:!1!==this.options.repoOwner}),this.gc=cL({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){hL("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(vL(e)),await this.spec.set(wL(e)),await this.version.set(kP)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(ik){return!1}}async open(){if(!this.closed)throw fe(new Error("repo is already open"),SU);hL("opening at: %s",this.path);try{await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),hL("acquired repo.lock");const e=await this.version.check(kP);if(!e){if(!await this._isAutoMigrationEnabled())throw new wU("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");await this._migrate(kP,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys})}hL("creating datastore"),await this.datastore.open(),hL("creating blocks"),await this.blocks.open(),hL("creating keystore"),await this.keys.open(),hL("creating pins"),await this.pins.pinstore.open(),this.closed=!1,hL("all opened")}catch(ik){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(e){hL("error removing lock",e)}throw ik}}async _openRoot(){try{await this.root.open()}catch(ik){if("Already open"!==ik.message)throw ik}}async _openLock(){const e=await this.options.repoLock.lock(this.path);if("function"!==typeof e.close)throw fe(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){let e;hL("init check");try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(ik){if("ERR_NOT_FOUND"===ik.code)throw fe(new Error("repo is not initialized yet"),bU,{path:this.path});throw ik}if(!e)throw fe(new Error("repo is not initialized yet"),bU,{path:this.path})}async close(){if(this.closed)throw fe(new Error("repo is already closed"),_U);hL("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(ik){if(ik.code!==bU&&!ik.message.startsWith("ENOENT"))throw ik}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((e=>e&&e.close()))),hL("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){const[e,t,n,r,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),mL(this.datastore),mL(this.keys)]),s=t.size+r+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:s}}throw fe(new Error("repo is not initialized yet"),bU,{path:this.path})}async _isAutoMigrationEnabled(){if(void 0!==this.options.autoMigrate)return this.options.autoMigrate;let e;try{e=await this.config.get(fL)}catch(t){if(t.code!==vU.code)throw t;e=!0}return e}async _migrate(e,t){const n=await this.version.get();return n>e?(hL(`reverting to version ${e}`),pU(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(hL(`migrating to version ${e}`),hU(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{const e=await this.config.get("Datastore.StorageMax");return BigInt(mU(e))}catch(ik){return BigInt(pL)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(const{key:n,value:r}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(r.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}}async function mL(e){let t=BigInt(0);for await(const n of e.query({}))t+=BigInt(n.value.byteLength),t+=BigInt(n.key.uint8Array().byteLength);return t}function yL(e,t,n,r){return new gL(e,t,n,r)}function vL(e){return e.Datastore=Object.assign({},WU,xP(e,"datastore")),e}function wL(e){const t={...WU.Spec,...xP(e,"Datastore.Spec")};return{type:t.type,mounts:t.mounts.map((e=>({mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc})))}}async function*bL(e,t){const n=await Wm(e);yield*n.sort(t)}var SL=n(1301);class _L extends Qm{constructor(e,t={}){super(),this.db="string"===typeof e?new SL.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(ik){throw Nd(ik)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(ik){throw Dd(ik)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(ik){if(ik.notFound)throw Ud(ik);throw Dd(ik)}return t}async has(e){try{await this.db.get(e.toString())}catch(ik){if(ik.notFound)return!1;throw ik}return!0}async delete(e){try{await this.db.del(e.toString())}catch(ik){throw Pd(ik)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>Zm(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>bL(e,t)),t));const{offset:n,limit:r}=e;if(n){let e=0;t=Zm(t,(()=>e++>=n))}return r&&(t=Jm(t,r)),t}queryKeys(e){let t=vv(this._query({values:!1,prefix:e.prefix}),(({key:e})=>e));Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>Zm(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>bL(e,t)),t));const{offset:n,limit:r}=e;if(n){let e=0;t=Zm(t,(()=>e++>=n))}return r&&(t=Jm(t,r)),t}_query(e){const t={keys:!0,keyEncoding:"buffer",values:e.values};if(null!=e.prefix){const n=e.prefix.toString();t.gte=n,t.lt=n+""}const n=this.db.iterator(t);if(n[Symbol.asyncIterator])return EL(n);if(null!=n.next&&null!=n.end)return kL(n);throw new Error("Level returned incompatible iterator")}}async function*EL(e){for await(const[t,n]of e)yield{key:new Tc(t,!1),value:n};await e.close()}function kL(e){return{[Symbol.asyncIterator](){return{next:()=>new Promise(((t,n)=>{e.next(((r,o,s)=>r?n(r):null==o?e.end((e=>{if(e)return n(e);t({done:!0,value:void 0})})):void t({done:!1,value:{key:new Tc(o,!1),value:s}})))})),return:()=>new Promise(((t,n)=>{e.end((e=>{if(e)return n(e);t({done:!0,value:void 0})}))}))}}}}const CL=(e,t)=>async function*(){const n=await Wm(e);yield*n.sort(t)}();class IL{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:n,value:r}of e)await this.put(n,r,t),yield{key:n,value:r}}async*getMany(e,t={}){for await(const n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(const n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(t,n){e.push({key:t,value:n})},delete(e){t.push(e)},commit:async n=>{await Gm(this.putMany(e,n)),e=[],await Gm(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(null!=e.prefix&&(n=Zm(n,(t=>t.key.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Zm(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>CL(e,t)),n)),null!=e.offset){let t=0;n=Zm(n,(()=>t++>=(e.offset||0)))}return null!=e.limit&&(n=Jm(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(null!=e.prefix&&(n=Zm(n,(t=>t.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Zm(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>CL(e,t)),n)),null!=e.offset){let t=0;n=Zm(n,(()=>t++>=e.offset))}return null!=e.limit&&(n=Jm(n,e.limit)),n}}function AL(e){const t=lt.asCID(e);if(!t)throw fe(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Tc("/"+X.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function TL(e){return lt.createV1($s,nt(X.decode("b"+e.toString().slice(1).toLowerCase())))}function RL(e){const t=e.substring(0,1);if("/"===t)return RL(e.substring(1));let n,r;n="b"===t.toLowerCase()?e=>X.decode(e.toLowerCase()).subarray(2):"c"===t.toLowerCase()?e=>te.decode(e.toLowerCase()).subarray(2):"z"===t?e=>J.decode(e).subarray(2):"Q"===t?e=>J.decode("z"+e):e=>X.decode("b"+e.toLowerCase()).subarray(2);for(let s=1;s<e.length;s++)try{r=n(e.substring(0,s))}catch(ik){if("Unexpected end of data"!==ik.message)throw ik}let o="/C";return r&&(o=`/${X.encode(r).slice(1,-1).toUpperCase()||"C"}`),o}function xL(e){return{...e,prefix:e.prefix?RL(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e({key:TL(t.key),value:t.value}))):void 0,orders:e.orders?e.orders.map((e=>(t,n)=>e({key:TL(t.key),value:t.value},{key:TL(n.key),value:n.value}))):void 0}}function OL(e){return{...e,prefix:e.prefix?RL(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e(TL(t)))):void 0,orders:e.orders?e.orders.map((e=>(t,n)=>e(TL(t),TL(n)))):void 0}}class NL extends IL{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(const{key:n,value:r}of this.child.query(xL(e),t))yield{key:TL(n),value:r}}async*queryKeys(e,t){for await(const n of this.child.queryKeys(OL(e),t))yield TL(n)}async get(e,t){return this.child.get(AL(e),t)}async*getMany(e,t){for await(const n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(AL(e),t,n)}async*putMany(e,t){const n=ty({objectMode:!0}),r=globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout;r((async()=>{try{const r=this.child;await Gm(this.child.putMany(async function*(){for await(const o of e){const e=AL(o.key),s=await r.has(e,t);s||(yield{key:e,value:o.value}),n.push(o)}}())),n.end()}catch(ik){n.end(ik)}})),yield*n}has(e,t){return this.child.has(AL(e),t)}delete(e,t){return this.child.delete(AL(e),t)}deleteMany(e,t){const n=ty({objectMode:!0});return Gm(this.child.deleteMany(async function*(){for await(const t of e)yield AL(t),n.push(t);n.end()}(),t)).catch((e=>{n.end(e)})),n}}function PL(e,t,n){const r=n.path||"ipfs";return yL(r,(e=>t.getCodec(e)),{root:new _L(r,{prefix:"",version:2}),blocks:new NL(new _L(`${r}/blocks`,{prefix:"",version:2})),datastore:new _L(`${r}/datastore`,{prefix:"",version:2}),keys:new _L(`${r}/keys`,{prefix:"",version:2}),pins:new _L(`${r}/pins`,{prefix:"",version:2})},{autoMigrate:n.autoMigrate,onMigrationProgress:n.onMigrationProgress||e,repoLock:KU})}const DL={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var UL;function LL(e){return e instanceof Uint8Array?{get(t){return e[t]},set(t,n){e[t]=n}}:{get(t){return e.get(t)},set(t,n){e.set(t,n)}}}(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.publicKey&&e.publicKey.byteLength>0&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.payloadType&&e.payloadType.byteLength>0&&(t.uint32(18),t.bytes(e.payloadType)),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(26),t.bytes(e.payload)),null!=e.signature&&e.signature.byteLength>0&&(t.uint32(42),t.bytes(e.signature)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=e.bytes();break;case 5:n.signature=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(UL||(UL={}));const BL=4294967296;class ML{constructor(e=0,t=0){this.hi=e,this.lo=t}toBigInt(e){if(!0===e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(e){return Number(this.toBigInt(e))}zzDecode(){const e=-(1&this.lo),t=((this.lo>>>1|this.hi<<31)^e)>>>0,n=(this.hi>>>1^e)>>>0;return new ML(n,t)}zzEncode(){const e=this.hi>>31,t=((this.hi<<1|this.lo>>>31)^e)>>>0,n=(this.lo<<1^e)>>>0;return new ML(t,n)}toBytes(e,t=0){const n=LL(e);while(this.hi>0)n.set(t++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;while(this.lo>127)n.set(t++,127&this.lo|128),this.lo=this.lo>>>7;n.set(t++,this.lo)}static fromBigInt(e){if(0n===e)return new ML;const t=e<0;t&&(e=-e);let n=0|Number(e>>32n),r=0|Number(e-(BigInt(n)<<32n));return t&&(n=~n>>>0,r=~r>>>0,++r>BL&&(r=0,++n>BL&&(n=0))),new ML(n,r)}static fromNumber(e){if(0===e)return new ML;const t=e<0;t&&(e=-e);let n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new ML(r,n)}static fromBytes(e,t=0){const n=LL(e),r=new ML;let o=0;if(e.length-t>4){for(;o<4;++o)if(r.lo=(r.lo|(127&n.get(t))<<7*o)>>>0,n.get(t++)<128)return r;if(r.lo=(r.lo|(127&n.get(t))<<28)>>>0,r.hi=(r.hi|(127&n.get(t))>>4)>>>0,n.get(t++)<128)return r;o=0}else for(;o<4;++o){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(r.lo=(r.lo|(127&n.get(t))<<7*o)>>>0,n.get(t++)<128)return r}if(e.length-t>4){for(;o<5;++o)if(r.hi=(r.hi|(127&n.get(t))<<7*o+3)>>>0,n.get(t++)<128)return r}else if(t<e.byteLength)for(;o<5;++o){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(r.hi=(r.hi|(127&n.get(t))<<7*o+3)>>>0,n.get(t++)<128)return r}throw RangeError("invalid varint encoding")}}const FL=Math.pow(2,7),jL=Math.pow(2,14),zL=Math.pow(2,21),$L=Math.pow(2,28),VL=Math.pow(2,35),HL=Math.pow(2,42),KL=Math.pow(2,49),qL=Math.pow(2,56),WL=Math.pow(2,63),YL={encodingLength(e){return e<FL?1:e<jL?2:e<zL?3:e<$L?4:e<VL?5:e<HL?6:e<KL?7:e<qL?8:e<WL?9:10},encode(e,t,n=0){if(null!=Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return null==t&&(t=ui(YL.encodingLength(e))),ML.fromNumber(e).toBytes(t,n),t},decode(e,t=0){return ML.fromBytes(e,t).toNumber(!0)}};class GL{constructor(e){const{peerId:t,payloadType:n,payload:r,signature:o}=e;this.peerId=t,this.payloadType=n,this.payload=r,this.signature=o}marshal(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=UL.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return wa(this.marshal(),e.marshal())}async validate(e){const t=ZL(e,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw new Error("Missing public key");const n=Og(this.peerId.publicKey);return await n.verify(t.subarray(),this.signature)}}GL.createFromProtobuf=async e=>{const t=UL.decode(e),n=await gd(t.publicKey);return new GL({peerId:n,payloadType:t.payloadType,payload:t.payload,signature:t.signature})},GL.seal=async(e,t)=>{if(null==t.privateKey)throw new Error("Missing private key");const n=e.domain,r=e.codec,o=e.marshal(),s=ZL(n,r,o),i=await Pg(t.privateKey),a=await i.sign(s.subarray());return new GL({peerId:t,payloadType:r,payload:o,signature:a})},GL.openAndCertify=async(e,t)=>{const n=await GL.createFromProtobuf(e),r=await n.validate(t);if(!r)throw new Xu("envelope signature is not valid for the given domain",DL.ERR_SIGNATURE_NOT_VALID);return n};const ZL=(e,t,n)=>{const r=mi(e),o=YL.encode(r.byteLength),s=YL.encode(t.length),i=YL.encode(n.length);return new Sw(o,r,s,t,i,n)},JL=Ci,QL=Ii,XL=function(e){let t=0;if(e=e.toString().trim(),JL(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if(QL(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){const e=JL(n[r]);let t;e&&(t=XL(n[r]),n[r]=Ti(t.slice(0,2),"base16")),null!=t&&++r<8&&n.splice(r,0,Ti(t.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);o[t++]=e>>8&255,o[t++]=255&e}return o}throw new Error("invalid ip address")},eB=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let o=0;o<n;o++)r.push(e[t+o]);return r.join(".")}if(16===n){const e=[];for(let o=0;o<n;o+=2)e.push(r.getUint16(t+o).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},tB=-1,nB={},rB={},oB=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,tB,"ip6zone"],[43,8,"ipcidr"],[53,tB,"dns",!0],[54,tB,"dns4",!0],[55,tB,"dns6",!0],[56,tB,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,tB,"unix",!1,!0],[421,tB,"ipfs"],[421,tB,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,tB,"garlic64"],[448,0,"tls"],[449,tB,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,tB,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,tB,"memory"]];function sB(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}function iB(e){if("number"===typeof e){if(null!=rB[e])return rB[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=nB[e])return nB[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}oB.forEach((e=>{const t=sB(...e);rB[t.code]=t,nB[t.name]=t}));iB("ip4"),iB("ip6"),iB("ipcidr");function aB(e,t){const n=iB(e);switch(n.code){case 4:case 41:return hB(t);case 42:return mB(t);case 6:case 273:case 33:case 132:return fB(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return mB(t);case 421:return bB(t);case 444:return EB(t);case 445:return EB(t);case 466:return wB(t);default:return Ti(t,"base16")}}function lB(e,t){const n=iB(e);switch(n.code){case 4:return dB(t);case 41:return dB(t);case 42:return gB(t);case 6:case 273:case 33:case 132:return pB(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return gB(t);case 421:return yB(t);case 444:return SB(t);case 445:return _B(t);case 466:return vB(t);default:return mi(t,"base16")}}const cB=Object.values(Js).map((e=>e.decoder)),uB=function(){let e=cB[0].or(cB[1]);return cB.slice(2).forEach((t=>e=e.or(t))),e}();function dB(e){if(!Ai(e))throw new Error("invalid ip address");return XL(e)}function hB(e){const t=eB(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ai(t))throw new Error("invalid ip address");return t}function pB(e){const t=new ArrayBuffer(2),n=new DataView(t);return n.setUint16(0,e),new Uint8Array(t)}function fB(e){const t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function gB(e){const t=mi(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function mB(e){const t=Fi.decode(e);if(e=e.slice(Fi.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Ti(e)}function yB(e){let t;t="Q"===e[0]||"1"===e[0]?nt(J.decode(`z${e}`)).bytes:lt.parse(e).multihash.bytes;const n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function vB(e){const t=uB.decode(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function wB(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return"u"+Ti(n,"base64url")}function bB(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return Ti(n,"base58btc")}function SB(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=X.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=pB(r);return ji([n,o],n.length+o.length)}function _B(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=X.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=pB(r);return ji([n,o],n.length+o.length)}function EB(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2),r=Ti(t,"base32"),o=fB(n);return`${r}:${o}`}function kB(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const o=n[r],s=iB(o);if(0!==s.size){if(r++,r>=n.length)throw BB("invalid address: "+e);if(!0===s.path){t.push([o,LB(n.slice(r).join("/"))]);break}t.push([o,n[r]])}else t.push([o])}return t}function CB(e){const t=[];return e.map((e=>{const n=MB(e);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),LB(t.join("/"))}function IB(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=MB(e);return e.length>1?[t.code,lB(t.code,e[1])]:[t.code]}))}function AB(e){return e.map((e=>{const t=MB(e);return null!=e[1]?[t.code,aB(t.code,e[1])]:[t.code]}))}function TB(e){return DB(ji(e.map((e=>{const t=MB(e);let n=Uint8Array.from(Fi.encode(t.code));return e.length>1&&null!=e[1]&&(n=ji([n,e[1]])),n}))))}function RB(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=Fi.decode(t);return e+(Fi.decode.bytes??0)}}function xB(e){const t=[];let n=0;while(n<e.length){const r=Fi.decode(e,n),o=Fi.decode.bytes??0,s=iB(r),i=RB(s,e.slice(n+o));if(0===i){t.push([r]),n+=o;continue}const a=e.slice(n+o,n+o+i);if(n+=i+o,n>e.length)throw BB("Invalid address Uint8Array: "+Ti(e,"base16"));t.push([r,a])}return t}function OB(e){const t=xB(e),n=AB(t);return CB(n)}function NB(e){e=LB(e);const t=kB(e),n=IB(t);return TB(n)}function PB(e){return NB(e)}function DB(e){const t=UB(e);if(null!=t)throw t;return Uint8Array.from(e)}function UB(e){try{xB(e)}catch(ik){return ik}}function LB(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function BB(e){return new Error("Error parsing address: "+e)}function MB(e){const t=iB(e[0]);return t}var FB,jB,zB,$B,VB=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},HB=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};const KB=Symbol.for("nodejs.util.inspect.custom"),qB=[iB("dns").code,iB("dns4").code,iB("dns6").code,iB("dnsaddr").code],WB=new Map,YB=Symbol.for("@multiformats/js-multiaddr/multiaddr");function GB(e){return Boolean(e?.[YB])}class ZB{constructor(e){if(FB.set(this,void 0),jB.set(this,void 0),zB.set(this,void 0),this[$B]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=DB(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=PB(e)}else{if(!GB(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=DB(e.bytes)}}toString(){return null==VB(this,FB,"f")&&HB(this,FB,OB(this.bytes),"f"),VB(this,FB,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";const s=iB("tcp"),i=iB("udp"),a=iB("ip4"),l=iB("ip6"),c=iB("dns6"),u=iB("ip6zone");for(const[h,p]of this.stringTuples())h===u.code&&(o=`%${p??""}`),qB.includes(h)&&(t=s.name,r=443,n=`${p??""}${o}`,e=h===c.code?6:4),h!==s.code&&h!==i.code||(t=iB(h).name,r=parseInt(p??"")),h!==a.code&&h!==l.code||(t=iB(h).name,n=`${p??""}${o}`,e=h===l.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const d={family:e,host:n,transport:t,port:r};return d}protos(){return this.protoCodes().map((e=>Object.assign({},iB(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;while(n<t.length){const r=Fi.decode(t,n),o=Fi.decode.bytes??0,s=iB(r),i=RB(s,t.slice(n+o));n+=i+o,e.push(r)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==VB(this,jB,"f")&&HB(this,jB,xB(this.bytes),"f"),VB(this,jB,"f")}stringTuples(){return null==VB(this,zB,"f")&&HB(this,zB,AB(this.tuples()),"f"),VB(this,zB,"f")}encapsulate(e){return e=new ZB(e),new ZB(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new ZB(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new ZB(TB(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===nB.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?Ti(J.decode(`z${e}`),"base58btc"):Ti(lt.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>{const t=iB(e[0]);return!0===t.path}))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return wa(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=WB.get(t.name);if(null==n)throw fe(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,e);return r.map((e=>new ZB(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(FB=new WeakMap,jB=new WeakMap,zB=new WeakMap,$B=YB,KB)](){return`Multiaddr(${OB(this.bytes)})`}}function JB(e){return new ZB(e)}function QB(e,t){const n=(e,t)=>e.toString().localeCompare(t.toString());return e.length===t.length&&(t.sort(n),e.sort(n).every(((e,n)=>t[n].equals(e))))}var XB;(function(e){let t,n;(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.multiaddr&&e.multiaddr.byteLength>0&&(t.uint32(10),t.bytes(e.multiaddr)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={multiaddr:new Uint8Array(0)},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.multiaddr=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(t=e.AddressInfo||(e.AddressInfo={})),e.codec=()=>(null==n&&(n=rh(((t,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=t.peerId&&t.peerId.byteLength>0&&(n.uint32(10),n.bytes(t.peerId)),null!=t.seq&&0n!==t.seq&&(n.uint32(16),n.uint64(t.seq)),null!=t.addresses)for(const o of t.addresses)n.uint32(26),e.AddressInfo.codec().encode(o,n);!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={peerId:new Uint8Array(0),seq:0n,addresses:[]},o=null==n?t.len:t.pos+n;while(t.pos<o){const n=t.uint32();switch(n>>>3){case 1:r.peerId=t.bytes();break;case 2:r.seq=t.uint64();break;case 3:r.addresses.push(e.AddressInfo.codec().decode(t,t.uint32()));break;default:t.skipType(7&n);break}}return r}))),n),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(XB||(XB={}));const eM="libp2p-peer-record",tM=Uint8Array.from([3,1]);class nM{constructor(e){this.domain=nM.DOMAIN,this.codec=nM.CODEC;const{peerId:t,multiaddrs:n,seqNumber:r}=e;this.peerId=t,this.multiaddrs=n??[],this.seqNumber=r??BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=XB.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((e=>({multiaddr:e.bytes})))})),this.marshaled}equals(e){return e instanceof nM&&(!!this.peerId.equals(e.peerId)&&(this.seqNumber===e.seqNumber&&!!QB(this.multiaddrs,e.multiaddrs)))}}nM.createFromProtobuf=e=>{const t=XB.decode(e),n=pd(t.peerId),r=(t.addresses??[]).map((e=>JB(e.multiaddr))),o=t.seq;return new nM({peerId:n,multiaddrs:r,seqNumber:o})},nM.DOMAIN=eM,nM.CODEC=tM;const rM=Symbol.for("@libp2p/topology");function oM(e){return null!=e&&Boolean(e[rM])}const sM=()=>{};class iM{constructor(e){this.min=e.min??0,this.max=e.max??1/0,this.peers=new Set,this.onConnect=e.onConnect??sM,this.onDisconnect=e.onDisconnect??sM}get[Symbol.toStringTag](){return rM.toString()}get[rM](){return!0}async setRegistrar(e){this.registrar=e}disconnect(e){this.onDisconnect(e)}}function aM(e){return new iM(e)}var lM,cM=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class uM extends EventTarget{constructor(){super(...arguments),lM.set(this,new Map)}listenerCount(e){const t=cM(this,lM,"f").get(e);return null==t?0:t.length}addEventListener(e,t,n){super.addEventListener(e,t,n);let r=cM(this,lM,"f").get(e);null==r&&(r=[],cM(this,lM,"f").set(e,r)),r.push({callback:t,once:(!0!==n&&!1!==n&&n?.once)??!1})}removeEventListener(e,t,n){super.removeEventListener(e.toString(),t??null,n);let r=cM(this,lM,"f").get(e);null!=r&&(r=r.filter((({callback:e})=>e!==t)),cM(this,lM,"f").set(e,r))}dispatchEvent(e){const t=super.dispatchEvent(e);let n=cM(this,lM,"f").get(e.type);return null==n||(n=n.filter((({once:e})=>!e)),cM(this,lM,"f").set(e.type,n)),t}safeDispatchEvent(e,t){return this.dispatchEvent(new hM(e,t))}}lM=new WeakMap;class dM extends Event{constructor(e,t){super(e,t),this.detail=t?.detail}}const hM=globalThis.CustomEvent??dM;class pM{constructor(e,t,n){this.gossip=e,this.msgs=new Map,this.history=[],this.notValidatedCount=0,this.msgIdToStrFn=n;for(let r=0;r<t;r++)this.history[r]=[]}get size(){return this.msgs.size}put(e,t,n=!1){const{msgIdStr:r}=e;return!this.msgs.has(r)&&(this.msgs.set(r,{message:t,validated:n,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),n||this.notValidatedCount++,!0)}observeDuplicate(e,t){const n=this.msgs.get(e);n&&!n.validated&&n.originatingPeers.add(t)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,t){const n=this.msgs.get(e);if(!n)return null;const r=(n.iwantCounts.get(t)??0)+1;return n.iwantCounts.set(t,r),{msg:n.message,count:r}}getGossipIDs(e){const t=new Map;for(let n=0;n<this.gossip;n++)this.history[n].forEach((n=>{const r=this.msgs.get(n.msgIdStr);if(r&&r.validated&&e.has(n.topic)){let e=t.get(n.topic);e||(e=[],t.set(n.topic,e)),e.push(n.msgId)}}));return t}validate(e){const t=this.msgs.get(e);if(!t)return null;t.validated||this.notValidatedCount--;const{message:n,originatingPeers:r}=t;return t.validated=!0,t.originatingPeers=new Set,{message:n,originatingPeers:r}}shift(){const e=this.history[this.history.length-1];e.forEach((e=>{const t=this.msgs.get(e.msgIdStr);t&&(this.msgs.delete(e.msgIdStr),t.validated||this.notValidatedCount--)})),this.history.pop(),this.history.unshift([])}remove(e){const t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}var fM=n(4482);const{RPC:gM}=fM,mM=1e3,yM=60*mM,vM="/floodsub/1.0.0",wM="/meshsub/1.0.0",bM="/meshsub/1.1.0",SM=6,_M=4,EM=12,kM=4,CM=2,IM=5,AM=3,TM=6,RM=.25,xM=3,OM=100,NM=mM,PM=yM,DM=16,UM=yM,LM=15,BM=300,MM=mM,FM=60,jM=2,zM=10*mM,$M=5e3,VM=10,HM=3*mM,KM=2*yM,qM=12e4,WM="ERR_TOPIC_VALIDATOR_REJECT",YM="ERR_TOPIC_VALIDATOR_IGNORE",GM=0,ZM=128,JM=1e3,QM=1e3;function XM(e){if(e.length<=1)return e;const t=()=>Math.floor(Math.random()*Math.floor(e.length));for(let n=0;n<e.length;n++){const r=t(),o=e[n];e[n]=e[r],e[r]=o}return e}function eF(e){return Ti(e,"base64")}const tF="StrictSign",nF="StrictNoSign";var rF,oF,sF,iF,aF,lF;function cF(e){switch(e){case rF.Ignore:return iF.Ignore;case rF.Reject:return iF.Reject}}async function uF(e,t){switch(e){case tF:{if(!t)throw Error("Must provide PeerId");if(null==t.privateKey)throw Error("Cannot sign message, no private key present");if(null==t.publicKey)throw Error("Cannot sign message, no public key present");const e=await Pg(t.privateKey);return{type:sF.Signing,author:t,key:t.publicKey,privateKey:e}}case nF:return{type:sF.Anonymous};default:throw new Error(`Unknown signature policy "${e}"`)}}(function(e){e["Accept"]="accept",e["Ignore"]="ignore",e["Reject"]="reject"})(rF||(rF={})),function(e){e["StrictSign"]="StrictSign",e["StrictNoSign"]="StrictNoSign"}(oF||(oF={})),function(e){e[e["Signing"]=0]="Signing",e[e["Anonymous"]=1]="Anonymous"}(sF||(sF={})),function(e){e["Error"]="error",e["Ignore"]="ignore",e["Reject"]="reject",e["Blacklisted"]="blacklisted"}(iF||(iF={})),function(e){e["InvalidSignature"]="invalid_signature",e["InvalidSeqno"]="invalid_seqno",e["InvalidPeerId"]="invalid_peerid",e["SignaturePresent"]="signature_present",e["SeqnoPresent"]="seqno_present",e["FromPresent"]="from_present",e["TransformFailed"]="transform_failed"}(aF||(aF={})),function(e){e["duplicate"]="duplicate",e["invalid"]="invalid",e["valid"]="valid"}(lF||(lF={}));const dF="ERR_INVALID_PEER_SCORE_PARAMS",hF={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},pF={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function fF(e={}){return{...hF,...e,topics:e.topics?Object.entries(e.topics).reduce(((e,[t,n])=>(e[t]=gF(n),e)),{}):{}}}function gF(e={}){return{...pF,...e}}function mF(e){for(const[n,r]of Object.entries(e.topics))try{yF(r)}catch(t){throw new Xu(`invalid score parameters for topic ${n}: ${t.message}`,dF)}if(e.topicScoreCap<0)throw new Xu("invalid topic score cap; must be positive (or 0 for no cap)",dF);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw new Xu("missing application specific score function",dF);if(e.IPColocationFactorWeight>0)throw new Xu("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",dF);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw new Xu("invalid IPColocationFactorThreshold; must be at least 1",dF);if(e.behaviourPenaltyWeight>0)throw new Xu("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",dF);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw new Xu("invalid BehaviourPenaltyDecay; must be between 0 and 1",dF);if(e.decayInterval<1e3)throw new Xu("invalid DecayInterval; must be at least 1s",dF);if(e.decayToZero<=0||e.decayToZero>=1)throw new Xu("invalid DecayToZero; must be between 0 and 1",dF)}function yF(e){if(e.topicWeight<0)throw new Xu("invalid topic weight; must be >= 0",dF);if(0===e.timeInMeshQuantum)throw new Xu("invalid TimeInMeshQuantum; must be non zero",dF);if(e.timeInMeshWeight<0)throw new Xu("invalid TimeInMeshWeight; must be positive (or 0 to disable)",dF);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw new Xu("invalid TimeInMeshQuantum; must be positive",dF);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw new Xu("invalid TimeInMeshCap; must be positive",dF);if(e.firstMessageDeliveriesWeight<0)throw new Xu("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",dF);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw new Xu("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",dF);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw new Xu("invalid FirstMessageDeliveriesCap; must be positive",dF);if(e.meshMessageDeliveriesWeight>0)throw new Xu("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",dF);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw new Xu("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",dF);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw new Xu("invalid MeshMessageDeliveriesCap; must be positive",dF);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw new Xu("invalid MeshMessageDeliveriesThreshold; must be positive",dF);if(e.meshMessageDeliveriesWindow<0)throw new Xu("invalid MeshMessageDeliveriesWindow; must be non-negative",dF);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw new Xu("invalid MeshMessageDeliveriesActivation; must be at least 1s",dF);if(e.meshFailurePenaltyWeight>0)throw new Xu("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",dF);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw new Xu("invalid MeshFailurePenaltyDecay; must be between 0 and 1",dF);if(e.invalidMessageDeliveriesWeight>0)throw new Xu("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",dF);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw new Xu("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",dF)}const vF={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function wF(e={}){return{...vF,...e}}function bF(e,t,n,r){let o=0;Object.entries(t.topics).forEach((([e,t])=>{const r=n.topics[e];if(void 0===r)return;let s=0;if(t.inMesh){let e=t.meshTime/r.timeInMeshQuantum;e>r.timeInMeshCap&&(e=r.timeInMeshCap),s+=e*r.timeInMeshWeight}let i=t.firstMessageDeliveries;if(i>r.firstMessageDeliveriesCap&&(i=r.firstMessageDeliveriesCap),s+=i*r.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<r.meshMessageDeliveriesThreshold){const e=r.meshMessageDeliveriesThreshold-t.meshMessageDeliveries,n=e*e;s+=n*r.meshMessageDeliveriesWeight}const a=t.meshFailurePenalty;s+=a*r.meshFailurePenaltyWeight;const l=t.invalidMessageDeliveries*t.invalidMessageDeliveries;s+=l*r.invalidMessageDeliveriesWeight,o+=s*r.topicWeight})),n.topicScoreCap>0&&o>n.topicScoreCap&&(o=n.topicScoreCap);const s=n.appSpecificScore(e);if(o+=s*n.appSpecificWeight,t.knownIPs.forEach((e=>{if(n.IPColocationFactorWhitelist.has(e))return;const t=r.get(e),s=t?t.size:0;if(s>n.IPColocationFactorThreshold){const e=s-n.IPColocationFactorThreshold,t=e*e;o+=t*n.IPColocationFactorWeight}})),t.behaviourPenalty>n.behaviourPenaltyThreshold){const e=t.behaviourPenalty-n.behaviourPenaltyThreshold,r=e*e;o+=r*n.behaviourPenaltyWeight}return o}var SF,_F=n(5001);(function(e){e[e["unknown"]=0]="unknown",e[e["valid"]=1]="valid",e[e["invalid"]=2]="invalid",e[e["ignored"]=3]="ignored"})(SF||(SF={}));class EF{constructor(){this.records=new Map,this.queue=new _F}ensureRecord(e){let t=this.records.get(e);if(t)return t;t={status:SF.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);const n={msgId:e,expire:Date.now()+qM};return this.queue.push(n),t}gc(){const e=Date.now();let t=this.queue.peekFront();while(t&&t.expire<e)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}function kF(e,t,n=(()=>!0)){const r=new Set;if(t<=0)return r;for(const o of e){if(r.size>=t)break;n(o)&&(r.add(o),e.delete(o))}return r}function CF(e,t){return kF(e,t,(()=>!0))}class IF extends Map{constructor(e){super(),this.getDefault=e}getOrDefault(e){let t=super.get(e);return void 0===t&&(t=this.getDefault(),this.set(e,t)),t}}const AF=pe("libp2p:gossipsub:score");class TF{constructor(e,t,n){this.params=e,this.metrics=t,this.peerStats=new Map,this.peerIPs=new IF((()=>new Set)),this.scoreCache=new Map,this.deliveryRecords=new EF,mF(e),this.scoreCacheValidityMs=n.scoreCacheValidityMs,this.computeScore=n.computeScore??bF}get size(){return this.peerStats.size}start(){this._backgroundInterval?AF("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),AF("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),AF("stopped")):AF("Peer score already stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((([e,t])=>[e,t])))}refreshScores(){const e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach(((n,r)=>{n.connected?(Object.entries(n.topics).forEach((([n,r])=>{const o=this.params.topics[n];void 0!==o&&(r.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,r.firstMessageDeliveries<t&&(r.firstMessageDeliveries=0),r.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,r.meshMessageDeliveries<t&&(r.meshMessageDeliveries=0),r.meshFailurePenalty*=o.meshFailurePenaltyDecay,r.meshFailurePenalty<t&&(r.meshFailurePenalty=0),r.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,r.invalidMessageDeliveries<t&&(r.invalidMessageDeliveries=0),r.inMesh&&(r.meshTime=e-r.graftTime,r.meshTime>o.meshMessageDeliveriesActivation&&(r.meshMessageDeliveriesActive=!0)))})),n.behaviourPenalty*=this.params.behaviourPenaltyDecay,n.behaviourPenalty<t&&(n.behaviourPenalty=0)):e>n.expire&&(this.removeIPsForPeer(r,n.knownIPs),this.peerStats.delete(r),this.scoreCache.delete(r))}))}score(e){this.metrics?.scoreFnCalls.inc();const t=this.peerStats.get(e);if(!t)return 0;const n=Date.now(),r=this.scoreCache.get(e);if(r&&r.cacheUntil>n)return r.score;this.metrics?.scoreFnRuns.inc();const o=this.computeScore(e,t,this.params,this.peerIPs),s=n+this.scoreCacheValidityMs;return r?(this.metrics?.scoreCachedDelta.observe(Math.abs(o-r.score)),r.score=o,r.cacheUntil=s):this.scoreCache.set(e,{score:o,cacheUntil:s}),o}addPenalty(e,t,n){const r=this.peerStats.get(e);r&&(r.behaviourPenalty+=t,this.metrics?.onScorePenalty(n))}addPeer(e){const t={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,t)}addIP(e,t){const n=this.peerStats.get(e);n&&n.knownIPs.add(t),this.peerIPs.getOrDefault(t).add(e)}removeIP(e,t){const n=this.peerStats.get(e);n&&n.knownIPs.delete(t);const r=this.peerIPs.get(t);r&&(r.delete(e),0===r.size&&this.peerIPs.delete(t))}removePeer(e){const t=this.peerStats.get(e);if(t){if(this.score(e)>0)return this.removeIPsForPeer(e,t.knownIPs),void this.peerStats.delete(e);Object.entries(t.topics).forEach((([e,t])=>{t.firstMessageDeliveries=0;const n=this.params.topics[e].meshMessageDeliveriesThreshold;if(t.inMesh&&t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<n){const e=n-t.meshMessageDeliveries;t.meshFailurePenalty+=e*e}t.inMesh=!1,t.meshMessageDeliveriesActive=!1})),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);e&&(e.inMesh=!0,e.graftTime=Date.now(),e.meshTime=0,e.meshMessageDeliveriesActive=!1)}}prune(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);if(e){const n=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<n){const t=n-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.meshMessageDeliveriesActive=!1,e.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,n){this.markFirstMessageDelivery(e,n);const r=this.deliveryRecords.ensureRecord(t),o=Date.now();r.status===SF.unknown?(r.status=SF.valid,r.validated=o,r.peers.forEach((t=>{t!==e.toString()&&this.markDuplicateMessageDelivery(t,n)}))):AF("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,o-r.firstSeen,SF[r.status])}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,n,r){switch(r){case iF.Error:return void this.markInvalidMessageDelivery(e,n);case iF.Blacklisted:return}const o=this.deliveryRecords.ensureRecord(t);if(o.status===SF.unknown){if(r===iF.Ignore)return o.status=SF.ignored,void o.peers.clear();o.status=SF.invalid,this.markInvalidMessageDelivery(e,n),o.peers.forEach((e=>{this.markInvalidMessageDelivery(e,n)})),o.peers.clear()}else AF("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-o.firstSeen,SF[o.status])}duplicateMessage(e,t,n){const r=this.deliveryRecords.ensureRecord(t);if(!r.peers.has(e))switch(r.status){case SF.unknown:r.peers.add(e);break;case SF.valid:r.peers.add(e),this.markDuplicateMessageDelivery(e,n,r.validated);break;case SF.invalid:this.markInvalidMessageDelivery(e,n);break;case SF.ignored:break}}markInvalidMessageDelivery(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);e&&(e.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);if(e){let n=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries=Math.min(n,e.firstMessageDeliveries+1),e.inMesh&&(n=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries=Math.min(n,e.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,n){const r=this.peerStats.get(e);if(r){const e=void 0!==n?Date.now():0,o=this.getPtopicStats(r,t);if(o&&o.inMesh){const r=this.params.topics[t];if(void 0!==n){const o=e-n,s=o>r.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(t,o,s),s)return}const s=r.meshMessageDeliveriesCap;o.meshMessageDeliveries=Math.min(s,o.meshMessageDeliveries+1)}}}removeIPsForPeer(e,t){for(const n of t){const t=this.peerIPs.get(n);t&&(t.delete(e),0===t.size&&this.peerIPs.delete(n))}}getPtopicStats(e,t){let n=e.topics[t];return void 0!==n?n:void 0!==this.params.topics[t]?(n={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=n,n):null}}class RF{constructor(e,t,n){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=n,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){const n=Math.floor(Math.random()*t.length),r=t[n],o=this.msgIdToStrFn(r);let s=this.promises.get(o);s||(s=new Map,this.promises.set(o,s));const i=Date.now();s.has(e)||(s.set(e,i+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(o)||this.requestMsByMsg.set(o,i)))}getBrokenPromises(){const e=Date.now(),t=new Map;let n=0;return this.promises.forEach(((r,o)=>{r.forEach(((o,s)=>{o<e&&(t.set(s,(t.get(s)??0)+1),r.delete(s),n++)})),r.size||this.promises.delete(o)})),this.metrics?.iwantPromiseBroken.inc(n),t}deliverMessage(e,t=!1){this.trackMessage(e);const n=this.promises.get(e);n&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),t&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(n.size)))}rejectMessage(e,t){switch(this.trackMessage(e),t){case iF.Error:return}this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;let t=0;for(const[n,r]of this.requestMsByMsg.entries()){if(!(r<e))break;this.requestMsByMsg.delete(n),t++}this.metrics?.iwantMessagePruned.inc(t)}trackMessage(e){if(this.metrics){const t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}class xF{constructor(e){this.entries=new Map,this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){return!!this.entries.has(e)||(this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const e=Date.now();for(const[t,n]of this.entries.entries()){if(!(n.validUntilMs<e))break;this.entries.delete(t)}}has(e){return this.entries.has(e)}get(e){const t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}var OF,NF,PF,DF,UF,LF;function BF(e,t,n){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:e.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:e.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:e.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:e.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*n.maxMeshMessageDeliveriesWindowSec,.5*n.maxMeshMessageDeliveriesWindowSec,1*n.maxMeshMessageDeliveriesWindowSec,2*n.maxMeshMessageDeliveriesWindowSec,4*n.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:e.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*n.behaviourPenaltyThreshold,.5*n.behaviourPenaltyThreshold,1*n.behaviourPenaltyThreshold,2*n.behaviourPenaltyThreshold,4*n.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:e.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:e.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*n.gossipPromiseExpireSec,1*n.gossipPromiseExpireSec,2*n.gossipPromiseExpireSec,4*n.gossipPromiseExpireSec]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:e.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:e.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:e.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:t,toTopic(e){return this.topicStrToLabel.get(e)??e},onJoin(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh(e,t,n){const r=this.toTopic(e);this.meshPeerInclusionEvents.inc({topic:r,reason:t},n)},onRemoveFromMesh(e,t,n){const r=this.toTopic(e);this.meshPeerChurnEvents.inc({topic:r,reason:t},n)},onReportValidationMcacheHit(e){this.asyncValidationMcacheHit.inc({hit:e?"hit":"miss"})},onReportValidation(e,t){const n=this.toTopic(e);this.asyncValidationResult.inc({topic:n,acceptance:t})},onScorePenalty(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv(e,t,n){const r=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:r},t),this.ihaveRcvNotSeenMsgids.inc({topic:r},n)},onIwantRcv(e,t){for(const[n,r]of e){const e=this.toTopic(n);this.iwantRcvMsgids.inc({topic:e},r)}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg(e,t){const n=this.toTopic(e);this.msgForwardCount.inc({topic:n},1),this.msgForwardPeers.inc({topic:n},t)},onPublishMsg(e,t,n,r){const o=this.toTopic(e);this.msgPublishCount.inc({topic:o},1),this.msgPublishBytes.inc({topic:o},n*r),this.msgPublishPeers.inc({topic:o},n),this.msgPublishPeersByGroup.inc({topic:o,peerGroup:"direct"},t.direct),this.msgPublishPeersByGroup.inc({topic:o,peerGroup:"floodsub"},t.floodsub),this.msgPublishPeersByGroup.inc({topic:o,peerGroup:"mesh"},t.mesh),this.msgPublishPeersByGroup.inc({topic:o,peerGroup:"fanout"},t.fanout)},onMsgRecvPreValidation(e){const t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvResult(e,t){const n=this.toTopic(e);this.msgReceivedStatus.inc({topic:n,status:t})},onMsgRecvInvalid(e,t){const n=this.toTopic(e),r=t.reason===iF.Error?t.error:t.reason;this.msgReceivedInvalid.inc({topic:n,error:r},1)},onDuplicateMsgDelivery(e,t,n){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),n){const t=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:t},1)}},onPublishDuplicateMsg(e){const t=this.toTopic(e);this.duplicateMsgIgnored.inc({topic:t},1)},onRpcRecv(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),e.messages&&this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),e.messages&&this.rpcSentMessage.inc(e.messages.length),e.control){const t=e.control.ihave?.length??0,n=e.control.iwant?.length??0,r=e.control.graft?.length??0,o=e.control.prune?.length??0;t>0&&this.rpcSentIHave.inc(t),n>0&&this.rpcSentIWant.inc(n),r>0&&this.rpcSentGraft.inc(r),o>0&&this.rpcSentPrune.inc(o),(t>0||n>0||r>0||o>0)&&this.rpcSentControl.inc(1)}},registerScores(e,t){let n=0,r=0,o=0,s=0;for(const i of e)i>=t.graylistThreshold&&n++,i>=t.publishThreshold&&r++,i>=t.gossipThreshold&&o++,i>=0&&s++;this.peersByScoreThreshold.set({threshold:LF.graylist},n),this.peersByScoreThreshold.set({threshold:LF.publish},r),this.peersByScoreThreshold.set({threshold:LF.gossip},o),this.peersByScoreThreshold.set({threshold:LF.mesh},s),this.score.set(e)},registerScoreWeights(e){for(const[t,n]of e.byTopic)this.scoreWeights.set({topic:t,p:"p1"},n.p1w),this.scoreWeights.set({topic:t,p:"p2"},n.p2w),this.scoreWeights.set({topic:t,p:"p3"},n.p3w),this.scoreWeights.set({topic:t,p:"p3b"},n.p3bw),this.scoreWeights.set({topic:t,p:"p4"},n.p4w);this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh(e,t){const n=new Map;e.forEach(((e,t)=>{const r=this.topicStrToLabel.get(t)??"unknown";let o=n.get(r);o||(o=new Set,n.set(r,o)),e.forEach((e=>o?.add(e)))}));for(const[r,o]of n){const e=[];o.forEach((n=>{e.push(t.get(n)??0)})),this.scorePerMesh.set({topic:r},e)}}}}(function(e){e["forward"]="forward",e["publish"]="publish"})(OF||(OF={})),function(e){e["Fanout"]="fanout",e["Random"]="random",e["Subscribed"]="subscribed",e["Outbound"]="outbound",e["NotEnough"]="not_enough",e["Opportunistic"]="opportunistic"}(NF||(NF={})),function(e){e["Dc"]="disconnected",e["BadScore"]="bad_score",e["Prune"]="prune",e["Unsub"]="unsubscribed",e["Excess"]="excess"}(PF||(PF={})),function(e){e["GraftBackoff"]="graft_backoff",e["BrokenPromise"]="broken_promise",e["MessageDeficit"]="message_deficit",e["IPColocation"]="IP_colocation"}(DF||(DF={})),function(e){e["LowScore"]="low_score",e["MaxIhave"]="max_ihave",e["MaxIasked"]="max_iasked"}(UF||(UF={})),function(e){e["graylist"]="graylist",e["publish"]="publish",e["gossip"]="gossip",e["mesh"]="mesh"}(LF||(LF={}));n(8925);var MF=n(8960);const FF={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function jF(e,t,n,r,o){if("sha1"!==o&&"sha2-256"!==o&&"sha2-512"!==o){const e=Object.keys(FF).join(" / ");throw new Xu(`Hash '${o}' is unknown or not supported. Must be ${e}`,"ERR_UNSUPPORTED_HASH_TYPE")}const s=FF[o],i=MF(e,t,n,r,s);return ih.encode64(i,null)}const zF=mi("libp2p-pubsub:");async function $F(e,t,n,r){switch(e.type){case sF.Signing:{const o={from:e.author.toBytes(),data:r,seqno:Ap(8),topic:t,signature:void 0,key:void 0},s=ji([zF,gM.Message.encode(o).finish()]);o.signature=await e.privateKey.sign(s),o.key=e.key;const i={type:"signed",from:e.author,data:n,sequenceNumber:BigInt(`0x${Ti(o.seqno,"base16")}`),topic:t,signature:o.signature,key:o.key};return{raw:o,msg:i}}case sF.Anonymous:return{raw:{from:void 0,data:r,seqno:void 0,topic:t,signature:void 0,key:void 0},msg:{type:"unsigned",data:n,topic:t}}}}async function VF(e,t){switch(e){case nF:return null!=t.signature?{valid:!1,error:aF.SignaturePresent}:null!=t.seqno?{valid:!1,error:aF.SeqnoPresent}:null!=t.key?{valid:!1,error:aF.FromPresent}:{valid:!0,message:{type:"unsigned",topic:t.topic,data:t.data??new Uint8Array(0)}};case tF:{if(null==t.seqno)return{valid:!1,error:aF.InvalidSeqno};if(8!==t.seqno.length)return{valid:!1,error:aF.InvalidSeqno};if(null==t.signature)return{valid:!1,error:aF.InvalidSignature};if(null==t.from)return{valid:!1,error:aF.InvalidPeerId};let e,r;try{e=pd(t.from)}catch(n){return{valid:!1,error:aF.InvalidPeerId}}if(t.key){if(r=Og(t.key),void 0!==e.publicKey&&!wa(r.bytes,e.publicKey))return{valid:!1,error:aF.InvalidPeerId}}else{if(null==e.publicKey)return{valid:!1,error:aF.InvalidPeerId};r=Og(e.publicKey)}const o={from:t.from,data:t.data,seqno:t.seqno,topic:t.topic,signature:void 0,key:void 0},s=ji([zF,gM.Message.encode(o).finish()]);return await r.verify(s,t.signature)?{valid:!0,message:{type:"signed",from:e,data:t.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${Ti(t.seqno,"base16")}`),topic:t.topic,signature:t.signature,key:t.key??Ng(r)}}:{valid:!1,error:aF.InvalidSignature}}}}const HF=(e,t)=>{const n=mi(t.toString(16).padStart(16,"0"),"base16"),r=new Uint8Array(e.length+n.length);return r.set(e,0),r.set(n,e.length),r};function KF(e){if("signed"!==e.type)throw new Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return HF(e.from.toBytes(),e.sequenceNumber)}async function qF(e){return await Fs.encode(e.data)}function WF(e,t,n,r,o){let s=0;const i=new Map;if(Object.entries(t.topics).forEach((([e,t])=>{const r=o.get(e)??"unknown",a=n.topics[e];if(void 0===a)return;let l=i.get(r);l||(l={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},i.set(r,l));let c=0,u=0,d=0,h=0,p=0;if(t.inMesh){const e=Math.max(t.meshTime/a.timeInMeshQuantum,a.timeInMeshCap);c+=e*a.timeInMeshWeight}let f=t.firstMessageDeliveries;if(f>a.firstMessageDeliveriesCap&&(f=a.firstMessageDeliveriesCap),u+=f*a.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<a.meshMessageDeliveriesThreshold){const e=a.meshMessageDeliveriesThreshold-t.meshMessageDeliveries,n=e*e;d+=n*a.meshMessageDeliveriesWeight}const g=t.meshFailurePenalty;h+=g*a.meshFailurePenaltyWeight;const m=t.invalidMessageDeliveries*t.invalidMessageDeliveries;p+=m*a.invalidMessageDeliveriesWeight,s+=(c+u+d+h+p)*a.topicWeight,l.p1w+=c,l.p2w+=u,l.p3w+=d,l.p3bw+=h,l.p4w+=p})),n.topicScoreCap>0&&s>n.topicScoreCap){s=n.topicScoreCap;const e=n.topicScoreCap/s;for(const t of i.values())t.p1w*=e,t.p2w*=e,t.p3w*=e,t.p3bw*=e,t.p4w*=e}let a=0,l=0,c=0;const u=n.appSpecificScore(e);a+=u*n.appSpecificWeight,t.knownIPs.forEach((e=>{if(n.IPColocationFactorWhitelist.has(e))return;const t=r.get(e),o=t?t.size:0;if(o>n.IPColocationFactorThreshold){const e=o-n.IPColocationFactorThreshold,t=e*e;l+=t*n.IPColocationFactorWeight}}));const d=t.behaviourPenalty*t.behaviourPenalty;return c+=d*n.behaviourPenaltyWeight,s+=a+l+c,{byTopic:i,p5w:a,p6w:l,p7w:c,score:s}}function YF(e,t,n,r,o){const s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const i of e){const e=t.get(i);if(e){const t=WF(i,e,n,r,o);for(const[e,n]of t.byTopic){let t=s.byTopic.get(e);t||(t={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(e,t)),t.p1w.push(n.p1w),t.p2w.push(n.p2w),t.p3w.push(n.p3w),t.p3bw.push(n.p3bw),t.p4w.push(n.p4w)}s.p5w.push(t.p5w),s.p6w.push(t.p6w),s.p7w.push(t.p7w),s.score.push(t.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}return s}class GF extends Error{constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function ZF(e){if(null!=e){if("function"===typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"===typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"===typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}function JF(e,t,n){const r=n??{},o=ZF(e);async function*s(){let n;const s=()=>{null!=n&&n()};t.addEventListener("abort",s);while(1){let i;try{if(t.aborted){const{abortMessage:e,abortCode:t}=r;throw new GF(e,t)}const e=new Promise(((e,t)=>{n=()=>{const{abortMessage:e,abortCode:n}=r;t(new GF(e,n))}}));i=await Promise.race([e,o.next()]),n=null}catch(ik){t.removeEventListener("abort",s);const i="aborted"===ik.type&&t.aborted;if(i&&null!=r.onAbort&&await r.onAbort(e),"function"===typeof o.return)try{const e=o.return();e instanceof Promise&&e.catch((e=>{null!=r.onReturnError&&r.onReturnError(e)}))}catch(ik){null!=r.onReturnError&&r.onReturnError(ik)}if(i&&!0===r.returnOnAbort)return;throw ik}if(!0===i.done)break;yield i.value}t.removeEventListener("abort",s)}return s()}function QF(e,t,n){return r=>e(JF(r,t,n))}function XF(e,t,n){return{sink:QF(e.sink,t,{...n,onAbort:void 0}),source:JF(e.source,t,n)}}function ej(e){return null!=globalThis?.Buffer?.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}const tj=e=>{const t=YL.encodingLength(e),n=ej(t);return YL.encode(e,n),tj.bytes=t,n};function nj(e){e=e??{};const t=e.lengthEncoder??tj,n=async function*(e){for await(const n of e){const e=t(n.byteLength);e instanceof Uint8Array?yield e:yield*e,n instanceof Uint8Array?yield n:yield*n}};return n}tj.bytes=0,nj.single=(e,t)=>{t=t??{};const n=t.lengthEncoder??tj;return new Sw(n(e.byteLength),e)};const rj=8,oj=4194304;var sj;(function(e){e[e["LENGTH"]=0]="LENGTH",e[e["DATA"]=1]="DATA"})(sj||(sj={}));const ij=e=>{const t=YL.decode(e);return ij.bytes=YL.encodingLength(t),t};function aj(e){const t=async function*(t){const n=new Sw;let r=sj.LENGTH,o=-1;const s=e?.lengthDecoder??ij,i=e?.maxLengthLength??rj,a=e?.maxDataLength??oj;for await(const l of t){n.append(l);while(n.byteLength>0){if(r===sj.LENGTH)try{if(o=s(n),o<0)throw fe(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(o>a)throw fe(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const t=s.bytes;n.consume(t),null!=e?.onLength&&e.onLength(o),r=sj.DATA}catch(ik){if(ik instanceof RangeError){if(n.byteLength>i)throw fe(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw ik}if(r===sj.DATA){if(n.byteLength<o)break;const t=n.sublist(0,o);n.consume(o),null!=e?.onData&&e.onData(t),yield t,r=sj.LENGTH}}}if(n.byteLength>0)throw fe(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")};return t}ij.bytes=0,aj.fromReader=(e,t)=>{let n=1;const r=async function*(){while(1)try{const{done:t,value:r}=await e.next(n);if(!0===t)return;null!=r&&(yield r)}catch(ik){if("ERR_UNDER_READ"===ik.code)return{done:!0,value:null};throw ik}finally{n=1}}(),o=e=>{n=e};return aj({...t??{},onLength:o})(r)};class lj{constructor(e,t,n){this.rawStream=e,this.pushable=ty({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=n.maxBufferSize??1/0,kv(JF(this.pushable,this.closeController.signal,{returnOnAbort:!0}),nj(),this.rawStream).catch(t)}get protocol(){return this.rawStream.stat.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}close(){this.closeController.abort(),this.pushable.return(),this.rawStream.close()}}class cj{constructor(e,t={}){this.rawStream=e,this.closeController=new AbortController,this.source=JF(kv(this.rawStream,aj(t)),this.closeController.signal,{returnOnAbort:!0})}close(){this.closeController.abort(),this.rawStream.close()}}var uj=n(2450);const dj={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};function hj(e,t){t={...t};const n=uj.Reader.create(e),r=e.length,o=void 0===r?n.len:n.pos+r,s={};while(n.pos<o){const e=n.uint32();switch(e>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.length<t.maxSubscriptions?s.subscriptions.push(pj(n,n.uint32())):n.skipType(7&e);break;case 2:s.messages&&s.messages.length||(s.messages=[]),s.messages.length<t.maxMessages?s.messages.push(fj(n,n.uint32())):n.skipType(7&e);break;case 3:s.control=gj(n,n.uint32(),t);break;default:n.skipType(7&e);break}}return s}function pj(e,t){const n=void 0===t?e.len:e.pos+t,r={};while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.subscribe=e.bool();break;case 2:r.topic=e.string();break;default:e.skipType(7&t);break}}return r}function fj(e,t){const n=void 0===t?e.len:e.pos+t,r={};while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.from=e.bytes();break;case 2:r.data=e.bytes();break;case 3:r.seqno=e.bytes();break;case 4:r.topic=e.string();break;case 5:r.signature=e.bytes();break;case 6:r.key=e.bytes();break;default:e.skipType(7&t);break}}if(!r.topic)throw Error("missing required 'topic'");return r}function gj(e,t,n){const r=void 0===t?e.len:e.pos+t,o={};while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:o.ihave&&o.ihave.length||(o.ihave=[]),o.ihave.length<n.maxControlMessages?o.ihave.push(mj(e,e.uint32(),n)):e.skipType(7&t);break;case 2:o.iwant&&o.iwant.length||(o.iwant=[]),o.iwant.length<n.maxControlMessages?o.iwant.push(yj(e,e.uint32(),n)):e.skipType(7&t);break;case 3:o.graft&&o.graft.length||(o.graft=[]),o.graft.length<n.maxControlMessages?o.graft.push(vj(e,e.uint32())):e.skipType(7&t);break;case 4:o.prune&&o.prune.length||(o.prune=[]),o.prune.length<n.maxControlMessages?o.prune.push(wj(e,e.uint32(),n)):e.skipType(7&t);break;default:e.skipType(7&t);break}}return o}function mj(e,t,n){const r=void 0===t?e.len:e.pos+t,o={};while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:o.topicID=e.string();break;case 2:o.messageIDs&&o.messageIDs.length||(o.messageIDs=[]),n.maxIhaveMessageIDs-- >0?o.messageIDs.push(e.bytes()):e.skipType(7&t);break;default:e.skipType(7&t);break}}return o}function yj(e,t,n){const r=void 0===t?e.len:e.pos+t,o={};while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:o.messageIDs&&o.messageIDs.length||(o.messageIDs=[]),n.maxIwantMessageIDs-- >0?o.messageIDs.push(e.bytes()):e.skipType(7&t);break;default:e.skipType(7&t);break}}return o}function vj(e,t){const n=void 0===t?e.len:e.pos+t,r={};while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.topicID=e.string();break;default:e.skipType(7&t);break}}return r}function wj(e,t,n){const r=void 0===t?e.len:e.pos+t,o={};while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:o.topicID=e.string();break;case 2:o.peers&&o.peers.length||(o.peers=[]),n.maxPeerInfos-- >0?o.peers.push(bj(e,e.uint32())):e.skipType(7&t);break;case 3:o.backoff=e.uint64();break;default:e.skipType(7&t);break}}return o}function bj(e,t){const n=void 0===t?e.len:e.pos+t,r={};while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.peerID=e.bytes();break;case 2:r.signedPeerRecord=e.bytes();break;default:e.skipType(7&t);break}}return r}var Sj;function _j(e){for(const t of e.tuples())switch(t[0]){case Sj.ip4:case Sj.ip6:return zi(t[0],t[1])}return null}(function(e){e[e["ip4"]=4]="ip4",e[e["ip6"]=41]="ip6"})(Sj||(Sj={}));var Ej;(function(e){e[e["started"]=0]="started",e[e["stopped"]=1]="stopped"})(Ej||(Ej={}));class kj extends uM{constructor(e,t={}){super(),this.multicodecs=[bM,wM],this.peers=new Set,this.streamsInbound=new Map,this.streamsOutbound=new Map,this.outboundInflightQueue=ty({objectMode:!0}),this.direct=new Set,this.floodsubPeers=new Set,this.acceptFromWhitelist=new Map,this.topics=new Map,this.subscriptions=new Set,this.mesh=new Map,this.fanout=new Map,this.fanoutLastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.topicValidators=new Map,this.heartbeatTicks=0,this.directPeerInitial=null,this.status={code:Ej.stopped},this.heartbeatTimer=null,this.runHeartbeat=()=>{const e=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch((e=>{this.log("Error running heartbeat",e)})).finally((()=>{if(null!=e&&e(),this.status.code===Ej.started){clearTimeout(this.status.heartbeatTimeout);let e=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;e<.25*this.opts.heartbeatInterval&&(e+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,e)}}))};const n={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:SM,Dlo:_M,Dhi:EM,Dscore:kM,Dout:CM,Dlazy:TM,heartbeatInterval:NM,fanoutTTL:PM,mcacheLength:IM,mcacheGossip:AM,seenTTL:KM,gossipsubIWantFollowupMs:HM,prunePeers:DM,pruneBackoff:UM,graftFloodThreshold:zM,opportunisticGraftPeers:jM,opportunisticGraftTicks:FM,directConnectTicks:BM,...t,scoreParams:fF(t.scoreParams),scoreThresholds:wF(t.scoreThresholds)};if(this.components=e,this.decodeRpcLimits=n.decodeRpcLimits??dj,this.globalSignaturePolicy=n.globalSignaturePolicy??tF,n.fallbackToFloodsub&&this.multicodecs.push(vM),this.log=pe(n.debugName??"libp2p:gossipsub"),this.opts=n,this.direct=new Set(n.directPeers.map((e=>e.id.toString()))),this.seenCache=new xF({validityMs:n.seenTTL}),this.publishedMessageIds=new xF({validityMs:n.seenTTL}),t.msgIdFn)this.msgIdFn=t.msgIdFn;else switch(this.globalSignaturePolicy){case tF:this.msgIdFn=KF;break;case nF:this.msgIdFn=qF;break}if(t.fastMsgIdFn&&(this.fastMsgIdFn=t.fastMsgIdFn,this.fastMsgIdCache=new xF({validityMs:n.seenTTL})),this.msgIdToStrFn=t.msgIdToStrFn??eF,this.mcache=t.messageCache||new pM(n.mcacheGossip,n.mcacheLength,this.msgIdToStrFn),t.dataTransform&&(this.dataTransform=t.dataTransform),t.metricsRegister){if(!t.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");const e=Math.max(...Object.values(n.scoreParams.topics).map((e=>e.meshMessageDeliveriesWindow)),QM),r=BF(t.metricsRegister,t.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:n.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:e/1e3});r.mcacheSize.addCollect((()=>this.onScrapeMetrics(r)));for(const t of this.multicodecs)r.protocolsEnabled.set({protocol:t},1);this.metrics=r}else this.metrics=null;this.gossipTracer=new RF(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new TF(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:n.heartbeatInterval}),this.maxInboundStreams=t.maxInboundStreams,this.maxOutboundStreams=t.maxOutboundStreams,this.allowedTopics=n.allowedTopics?new Set(n.allowedTopics):null}getPeers(){return[...this.peers.keys()].map((e=>hd(e)))}isStarted(){return this.status.code===Ej.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await uF(this.globalSignaturePolicy,this.components.peerId),this.outboundInflightQueue=ty({objectMode:!0}),kv(this.outboundInflightQueue,(async e=>{for await(const{peerId:t,connection:n}of e)await this.createOutboundStream(t,n)})).catch((e=>this.log.error("outbound inflight queue error",e))),await Promise.all(this.opts.directPeers.map((async e=>{await this.components.peerStore.addressBook.add(e.id,e.addrs)})));const e=this.components.registrar;await Promise.all(this.multicodecs.map((t=>e.handle(t,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))));const t=aM({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),n=await Promise.all(this.multicodecs.map((n=>e.register(n,t)))),r=setTimeout(this.runHeartbeat,OM);this.status={code:Ej.started,registrarTopologyIds:n,heartbeatTimeout:r,hearbeatStartMs:Date.now()+OM},this.score.start(),this.directPeerInitial=setTimeout((()=>{Promise.resolve().then((async()=>{await Promise.all(Array.from(this.direct).map((async e=>await this.connect(e))))})).catch((e=>{this.log(e)}))}),MM),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==Ej.started)return;const{registrarTopologyIds:e}=this.status;this.status={code:Ej.stopped};const t=this.components.registrar;e.forEach((e=>t.unregister(e))),this.outboundInflightQueue.end();for(const n of this.streamsOutbound.values())n.close();this.streamsOutbound.clear();for(const n of this.streamsInbound.values())n.close();this.streamsInbound.clear(),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:t}){if(!this.isStarted())return;const n=t.remotePeer;this.addPeer(n,t.stat.direction,t.remoteAddr),this.createInboundStream(n,e),this.outboundInflightQueue.push({peerId:n,connection:t})}onPeerConnected(e,t){this.metrics?.newConnectionCount.inc({status:t.stat.status}),this.isStarted()&&"OPEN"===t.stat.status&&(this.addPeer(e,t.stat.direction,t.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:t}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,t){if(!this.isStarted())return;const n=e.toString();if(this.peers.has(n)&&!this.streamsOutbound.has(n))try{const r=new lj(await t.newStream(this.multicodecs),(e=>this.log.error("outbound pipe error",e)),{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(n,r);const o=r.protocol;o===vM&&this.floodsubPeers.add(n),this.metrics?.peersPerProtocol.inc({protocol:o},1),this.subscriptions.size>0&&(this.log("send subscriptions to",n),this.sendSubscriptions(n,Array.from(this.subscriptions),!0))}catch(r){this.log.error("createOutboundStream error",r)}}async createInboundStream(e,t){if(!this.isStarted())return;const n=e.toString();if(!this.peers.has(n))return;const r=this.streamsInbound.get(n);void 0!==r&&(this.log("replacing existing inbound steam %s",n),r.close()),this.log("create inbound stream %s",n);const o=new cj(t,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(n,o),this.pipePeerReadStream(e,o.source).catch((e=>this.log(e)))}addPeer(e,t,n){const r=e.toString();if(!this.peers.has(r)){this.log("new peer %p",e),this.peers.add(r),this.score.addPeer(r);const o=_j(n);null!==o?this.score.addIP(r,o):this.log("Added peer has no IP in current address %s %s",r,n.toString()),this.outbound.has(r)||this.outbound.set(r,"outbound"===t)}}removePeer(e){const t=e.toString();if(!this.peers.has(t))return;this.log("delete peer %p",e),this.peers.delete(t);const n=this.streamsOutbound.get(t),r=this.streamsInbound.get(t);n&&this.metrics?.peersPerProtocol.inc({protocol:n.protocol},-1),n?.close(),r?.close(),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);for(const o of this.topics.values())o.delete(t);for(const[o,s]of this.mesh)!0===s.delete(t)&&this.metrics?.onRemoveFromMesh(o,PF.Dc,1);for(const o of this.fanout.values())o.delete(t);this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}get started(){return this.status.code===Ej.started}getMeshPeers(e){const t=this.mesh.get(e);return t?Array.from(t):[]}getSubscribers(e){const t=this.topics.get(e);return(t?Array.from(t):[]).map((e=>hd(e)))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){try{await kv(t,(async t=>{for await(const r of t)try{const t=r.subarray(),n=hj(t,this.decodeRpcLimits);this.metrics?.onRpcRecv(n,t.length),this.opts.awaitRpcHandler?await this.handleReceivedRpc(e,n):this.handleReceivedRpc(e,n).catch((e=>this.log(e)))}catch(n){this.log(n)}}))}catch(ik){this.handlePeerReadStreamError(ik,e)}}handlePeerReadStreamError(e,t){this.log.error(e),this.onPeerDisconnected(t)}async handleReceivedRpc(e,t){if(!this.acceptFrom(e.toString()))return this.log("received message from unacceptable peer %p",e),void this.metrics?.rpcRecvNotAccepted.inc();if(this.log("rpc from %p",e),t.subscriptions&&t.subscriptions.length>0){const n=[];t.subscriptions.forEach((t=>{const r=t.topic,o=!0===t.subscribe;if(null!=r){if(this.allowedTopics&&!this.allowedTopics.has(r))return;this.handleReceivedSubscription(e,r,o),n.push({topic:r,subscribe:o})}})),this.dispatchEvent(new hM("subscription-change",{detail:{peerId:e,subscriptions:n}}))}if(t.messages)for(const n of t.messages){if(this.allowedTopics&&!this.allowedTopics.has(n.topic))continue;const t=this.handleReceivedMessage(e,n).catch((e=>this.log(e)));this.opts.awaitRpcMessageHandler&&await t}t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t,n){this.log("subscription update from %p topic %s",e,t);let r=this.topics.get(t);null==r&&(r=new Set,this.topics.set(t,r)),n?r.add(e.toString()):r.delete(e.toString())}async handleReceivedMessage(e,t){this.metrics?.onMsgRecvPreValidation(t.topic);const n=await this.validateReceivedMessage(e,t);switch(this.metrics?.onMsgRecvResult(t.topic,n.code),n.code){case lF.duplicate:return this.score.duplicateMessage(e.toString(),n.msgIdStr,t.topic),this.gossipTracer.deliverMessage(n.msgIdStr,!0),void this.mcache.observeDuplicate(n.msgIdStr,e.toString());case lF.invalid:if(n.msgIdStr){const r=n.msgIdStr;this.score.rejectMessage(e.toString(),r,t.topic,n.reason),this.gossipTracer.rejectMessage(r,n.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);return void this.metrics?.onMsgRecvInvalid(t.topic,n);case lF.valid:if(this.score.validateMessage(n.messageId.msgIdStr),this.gossipTracer.deliverMessage(n.messageId.msgIdStr),this.mcache.put(n.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)){const t=this.components.peerId.equals(e);t&&!this.opts.emitSelf||(super.dispatchEvent(new hM("gossipsub:message",{detail:{propagationSource:e,msgId:n.messageId.msgIdStr,msg:n.msg}})),super.dispatchEvent(new hM("message",{detail:n.msg})))}this.opts.asyncValidation||this.forwardMessage(n.messageId.msgIdStr,t,e.toString())}}async validateReceivedMessage(e,t){const n=this.fastMsgIdFn?.(t),r=void 0!==n?this.fastMsgIdCache?.get(n):void 0;if(r)return{code:lF.duplicate,msgIdStr:r};const o=await VF(this.globalSignaturePolicy,t);if(!o.valid)return{code:lF.invalid,reason:iF.Error,error:o.error};const s=o.message;try{this.dataTransform&&(s.data=this.dataTransform.inboundTransform(t.topic,s.data))}catch(u){return this.log("Invalid message, transform failed",u),{code:lF.invalid,reason:iF.Error,error:aF.TransformFailed}}const i=await this.msgIdFn(s),a=this.msgIdToStrFn(i),l={msgId:i,msgIdStr:a};if(void 0!==n&&this.fastMsgIdCache){const e=this.fastMsgIdCache.put(n,a);e&&this.metrics?.fastMsgIdCacheCollision.inc()}if(this.seenCache.has(a))return{code:lF.duplicate,msgIdStr:a};this.seenCache.put(a);const c=this.topicValidators.get(t.topic);if(null!=c){let t;try{t=await c(e,s)}catch(u){const e=u.code;e===YM&&(t=rF.Ignore),t=e===WM?rF.Reject:rF.Ignore}if(t!==rF.Accept)return{code:lF.invalid,reason:cF(t),msgIdStr:a}}return{code:lF.valid,messageId:l,msg:s}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,n){this.sendRpc(e,{subscriptions:t.map((e=>({topic:e,subscribe:n})))})}async handleControlMessage(e,t){if(void 0===t)return;const n=t.ihave?this.handleIHave(e,t.ihave):[],r=t.iwant?this.handleIWant(e,t.iwant):[],o=t.graft?await this.handleGraft(e,t.graft):[];t.prune&&await this.handlePrune(e,t.prune),(n.length||r.length||o.length)&&this.sendRpc(e,{messages:r,control:{iwant:n,prune:o}})}acceptFrom(e){if(this.direct.has(e))return!0;const t=Date.now(),n=this.acceptFromWhitelist.get(e);if(n&&n.messagesAccepted<ZM&&n.acceptUntil>=t)return n.messagesAccepted+=1,!0;const r=this.score.score(e);return r>=GM?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+JM}):this.acceptFromWhitelist.delete(e),r>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){if(!t.length)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,n),this.metrics?.ihaveRcvIgnored.inc({reason:UF.LowScore}),[];const r=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,r),r>VM)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,r),this.metrics?.ihaveRcvIgnored.inc({reason:UF.MaxIhave}),[];const o=this.iasked.get(e)??0;if(o>=$M)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,o),this.metrics?.ihaveRcvIgnored.inc({reason:UF.MaxIasked}),[];const s=new Map;if(t.forEach((({topicID:e,messageIDs:t})=>{if(!e||!t||!this.mesh.has(e))return;let n=0;t.forEach((e=>{const t=this.msgIdToStrFn(e);this.seenCache.has(t)||(s.set(t,e),n++)})),this.metrics?.onIhaveRcv(e,t.length,n)})),!s.size)return[];let i=s.size;i+o>$M&&(i=$M-o),this.log("IHAVE: Asking for %d out of %d messages from %s",i,s.size,e);let a=Array.from(s.values());return XM(a),a=a.slice(0,i),this.iasked.set(e,o+i),this.gossipTracer.addPromise(e,a),[{messageIDs:a}]}handleIWant(e,t){if(!t.length)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,n),[];const r=new Map,o=new Map;let s=0;return t.forEach((({messageIDs:t})=>{t&&t.forEach((t=>{const n=this.msgIdToStrFn(t),i=this.mcache.getWithIWantCount(n,e);null!=i?(o.set(i.msg.topic,1+(o.get(i.msg.topic)??0)),i.count>xM?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):r.set(n,i.msg)):s++}))})),this.metrics?.onIwantRcv(o,s),r.size?(this.log("IWANT: Sending %d messages to %s",r.size,e),Array.from(r.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}async handleGraft(e,t){const n=[],r=this.score.score(e),o=Date.now();let s=this.opts.doPX;return t.forEach((({topicID:t})=>{if(!t)return;const i=this.mesh.get(t);if(!i)return void(s=!1);if(i.has(e))return;if(this.direct.has(e))return this.log("GRAFT: ignoring request from direct peer %s",e),n.push(t),void(s=!1);const a=this.backoff.get(t)?.get(e);if("number"===typeof a&&o<a){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,DF.GraftBackoff),s=!1;const r=a+this.opts.graftFloodThreshold-this.opts.pruneBackoff;return o<r&&this.score.addPenalty(e,1,DF.GraftBackoff),this.addBackoff(e,t),void n.push(t)}return r<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,r,t),n.push(t),s=!1,void this.addBackoff(e,t)):i.size>=this.opts.Dhi&&!this.outbound.get(e)?(n.push(t),void this.addBackoff(e,t)):(this.log("GRAFT: Add mesh link from %s in %s",e,t),this.score.graft(e,t),i.add(e),void this.metrics?.onAddToMesh(t,NF.Subscribed,1))})),n.length?await Promise.all(n.map((t=>this.makePrune(e,t,s)))):[]}async handlePrune(e,t){const n=this.score.score(e);for(const{topicID:r,backoff:o,peers:s}of t){if(null==r)continue;const t=this.mesh.get(r);if(!t)return;if(this.log("PRUNE: Remove mesh link to %s in %s",e,r),this.score.prune(e,r),t.has(e)&&(t.delete(e),this.metrics?.onRemoveFromMesh(r,PF.Unsub,1)),"number"===typeof o&&o>0?this.doAddBackoff(e,r,1e3*o):this.addBackoff(e,r),s&&s.length){if(n<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,n,r);continue}await this.pxConnect(s)}}}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,n){let r=this.backoff.get(t);r||(r=new Map,this.backoff.set(t,r));const o=Date.now()+n,s=r.get(e)??0;s<o&&r.set(e,o)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,DF.BrokenPromise)}))}clearBackoff(){if(this.heartbeatTicks%LM!==0)return;const e=Date.now();this.backoff.forEach(((t,n)=>{t.forEach(((n,r)=>{n<e&&t.delete(r)})),0===t.size&&this.backoff.delete(n)}))}async directConnect(){const e=[];this.direct.forEach((t=>{this.streamsOutbound.has(t)||e.push(t)})),await Promise.all(e.map((async e=>await this.connect(e))))}async pxConnect(e){e.length>this.opts.prunePeers&&(XM(e),e=e.slice(0,this.opts.prunePeers));const t=[];await Promise.all(e.map((async e=>{if(!e.peerID)return;const n=pd(e.peerID).toString();if(!this.peers.has(n))if(e.signedPeerRecord)try{const r=await GL.openAndCertify(e.signedPeerRecord,"libp2p-peer-record"),o=r.peerId;if(!r.peerId.equals(n))return void this.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",o,n);if(!await this.components.peerStore.addressBook.consumePeerRecord(r))return void this.log("bogus peer record obtained through px: could not add peer record to address book");t.push(n)}catch(r){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else t.push(n)}))),t.length&&await Promise.all(t.map((async e=>await this.connect(e))))}async connect(e){this.log("Initiating connection with %s",e);const t=hd(e),n=await this.components.connectionManager.openConnection(t);for(const r of this.multicodecs)for(const e of this.components.registrar.getTopologies(r))e.onConnect(t,n)}subscribe(e){if(this.status.code!==Ej.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==Ej.started)throw new Error("Pubsub is not started");const t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(const n of this.peers.keys())this.sendSubscriptions(n,[e],!1);this.leave(e)}join(e){if(this.status.code!==Ej.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),this.metrics?.onJoin(e);const t=new Set,n=this.fanout.get(e);if(n&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),n.forEach((e=>{!this.direct.has(e)&&this.score.score(e)>=0&&t.add(e)})),this.metrics?.onAddToMesh(e,NF.Fanout,t.size)),t.size<this.opts.D){const n=t.size,r=this.getRandomGossipPeers(e,this.opts.D,(e=>!t.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0));r.forEach((e=>{t.add(e)})),this.metrics?.onAddToMesh(e,NF.Random,t.size-n)}this.mesh.set(e,t),t.forEach((t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this.sendGraft(t,e)}))}leave(e){if(this.status.code!==Ej.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),this.metrics?.onLeave(e);const t=this.mesh.get(e);t&&(Promise.all(Array.from(t).map((async t=>(this.log("LEAVE: Remove mesh link to %s in %s",t,e),await this.sendPrune(t,e))))).catch((e=>{this.log("Error sending prunes to mesh peers",e)})),this.mesh.delete(e))}selectPeersToForward(e,t,n){const r=new Set,o=this.topics.get(e);o&&(this.direct.forEach((e=>{o.has(e)&&t!==e&&!n?.has(e)&&r.add(e)})),this.floodsubPeers.forEach((e=>{o.has(e)&&t!==e&&!n?.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&r.add(e)})));const s=this.mesh.get(e);return s&&s.size>0&&s.forEach((e=>{t===e||n?.has(e)||r.add(e)})),r}selectPeersToPublish(e){const t=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},r=this.topics.get(e);if(r)if(this.opts.floodPublish)r.forEach((e=>{this.direct.has(e)?(t.add(e),n.direct++):this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),n.floodsub++)}));else{this.direct.forEach((e=>{r.has(e)&&(t.add(e),n.direct++)})),this.floodsubPeers.forEach((e=>{r.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),n.floodsub++)}));const o=this.mesh.get(e);if(o&&o.size>0)o.forEach((e=>{t.add(e),n.mesh++}));else{const r=this.fanout.get(e);if(r&&r.size>0)r.forEach((e=>{t.add(e),n.fanout++}));else{const r=this.getRandomGossipPeers(e,this.opts.D,(e=>this.score.score(e)>=this.opts.scoreThresholds.publishThreshold));r.size>0&&(this.fanout.set(e,r),r.forEach((e=>{t.add(e),n.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:t,tosendCount:n}}forwardMessage(e,t,n,r){n&&this.score.deliverMessage(n,e,t.topic);const o=this.selectPeersToForward(t.topic,n,r);o.forEach((e=>{this.sendRpc(e,{messages:[t]})})),this.metrics?.onForwardMsg(t.topic,o.size)}async publish(e,t,n){const r=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");const{raw:o,msg:s}=await $F(this.publishConfig,e,t,r),i=await this.msgIdFn(s),a=this.msgIdToStrFn(i),l=n?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(a)){if(l)return this.metrics?.onPublishDuplicateMsg(e),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:c,tosendCount:u}=this.selectPeersToPublish(e),d=!0===this.opts.emitSelf&&this.subscriptions.has(e),h=n?.allowPublishToZeroPeers??this.opts.allowPublishToZeroPeers;if(0===c.size&&!h&&!d)throw Error("PublishError.InsufficientPeers");this.seenCache.put(a),this.mcache.put({msgId:i,msgIdStr:a},o,!0),this.publishedMessageIds.put(a);for(const p of c){const e=this.sendRpc(p,{messages:[o]});e||c.delete(p)}return this.metrics?.onPublishMsg(e,u,c.size,null!=o.data?o.data.length:0),d&&(c.add(this.components.peerId.toString()),super.dispatchEvent(new hM("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:a,msg:s}})),super.dispatchEvent(new hM("message",{detail:s}))),{recipients:Array.from(c.values()).map((e=>hd(e)))}}reportMessageValidationResult(e,t,n){if(n===rF.Accept){const r=this.mcache.validate(e);if(this.metrics?.onReportValidationMcacheHit(null!==r),null!=r){const{message:o,originatingPeers:s}=r;this.score.deliverMessage(t.toString(),e,o.topic),this.forwardMessage(e,r.message,t.toString(),s),this.metrics?.onReportValidation(o.topic,n)}}else{const r=this.mcache.remove(e);if(this.metrics?.onReportValidationMcacheHit(null!==r),r){const o=cF(n),{message:s,originatingPeers:i}=r;this.score.rejectMessage(t.toString(),e,s.topic,o);for(const t of i)this.score.rejectMessage(t,e,s.topic,o);this.metrics?.onReportValidation(s.topic,n)}}}sendGraft(e,t){const n=[{topicID:t}];this.sendRpc(e,{control:{graft:n}})}async sendPrune(e,t){const n=[await this.makePrune(e,t,this.opts.doPX)];this.sendRpc(e,{control:{prune:n}})}sendRpc(e,t){const n=this.streamsOutbound.get(e);if(!n)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;const r=this.control.get(e);r&&(this.piggybackControl(e,t,r),this.control.delete(e));const o=this.gossip.get(e);o&&(this.piggybackGossip(e,t,o),this.gossip.delete(e));const s=gM.encode(t).finish();try{n.push(s)}catch(i){return this.log.error(`Cannot send rpc to ${e}`,i),r&&this.control.set(e,r),o&&this.gossip.set(e,o),!1}return this.metrics?.onRpcSent(t,s.length),!0}piggybackControl(e,t,n){if(n.graft){t.control||(t.control={}),t.control.graft||(t.control.graft=[]);for(const r of n.graft)r.topicID&&this.mesh.get(r.topicID)?.has(e)&&t.control.graft.push(r)}if(n.prune){t.control||(t.control={}),t.control.prune||(t.control.prune=[]);for(const r of n.prune)r.topicID&&!this.mesh.get(r.topicID)?.has(e)&&t.control.prune.push(r)}}piggybackGossip(e,t,n){t.control||(t.control={}),t.control.ihave=n}async sendGraftPrune(e,t,n){const r=this.opts.doPX;for(const[o,s]of e){const e=s.map((e=>({topicID:e})));let i=[];const a=t.get(o);a&&(i=await Promise.all(a.map((async e=>await this.makePrune(o,e,r&&!n.get(o))))),t.delete(o)),this.sendRpc(o,{control:{graft:e,prune:i}})}for(const[o,s]of t){const e=await Promise.all(s.map((async e=>await this.makePrune(o,e,r&&!n.get(o)))));this.sendRpc(o,{control:{prune:e}})}}emitGossip(e){const t=this.mcache.getGossipIDs(new Set(e.keys()));for(const[n,r]of e)this.doEmitGossip(n,r,t.get(n)??[])}doEmitGossip(e,t,n){if(!n.length)return;if(XM(n),n.length>$M&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",n.length),!t.size)return;let r=this.opts.Dlazy;const o=RM*t.size;let s=t;o>r&&(r=o),r>s.size?r=s.size:s=XM(Array.from(s)).slice(0,r),s.forEach((t=>{let r=n;n.length>$M&&(r=XM(r.slice()).slice(0,$M)),this.pushGossip(t,{topicID:e,messageIDs:r})}))}flush(){for(const[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,{control:{ihave:t}});for(const[e,t]of this.control.entries())this.control.delete(e),this.sendRpc(e,{control:{graft:t.graft,prune:t.prune}})}pushGossip(e,t){this.log("Add gossip to %s",e);const n=this.gossip.get(e)||[];this.gossip.set(e,n.concat(t))}async makePrune(e,t,n){if(this.score.prune(e,t),this.streamsOutbound.get(e).protocol===wM)return{topicID:t,peers:[]};const r=this.opts.pruneBackoff/1e3;if(!n)return{topicID:t,peers:[],backoff:r};const o=this.getRandomGossipPeers(t,this.opts.prunePeers,(t=>t!==e&&this.score.score(t)>=0)),s=await Promise.all(Array.from(o).map((async e=>{const t=hd(e);return{peerID:t.toBytes(),signedPeerRecord:await this.components.peerStore.addressBook.getRawEnvelope(t)}})));return{topicID:t,peers:s,backoff:r}}async heartbeat(){const{D:e,Dlo:t,Dhi:n,Dscore:r,Dout:o,fanoutTTL:s}=this.opts;this.heartbeatTicks++;const i=new Map,a=e=>{let t=i.get(e);return void 0===t&&(t=this.score.score(e),i.set(e,t)),t},l=new Map,c=new Map,u=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const d=new Map;this.mesh.forEach(((s,i)=>{const h=this.topics.get(i),p=new Set,f=new Set;if(d.set(i,f),h){const e=XM(Array.from(h)),t=this.backoff.get(i);for(const n of e){const e=this.streamsOutbound.get(n);if(e&&this.multicodecs.includes(e.protocol)&&!s.has(n)&&!this.direct.has(n)){const e=a(n);t&&t.has(n)||!(e>=0)||p.add(n),e>=this.opts.scoreThresholds.gossipThreshold&&f.add(n)}}}const g=(e,t)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",e,i),this.addBackoff(e,i),s.delete(e),a(e)>=this.opts.scoreThresholds.gossipThreshold&&f.add(e),this.metrics?.onRemoveFromMesh(i,t,1);const n=c.get(e);n?n.push(i):c.set(e,[i])},m=(e,t)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",e,i),this.score.graft(e,i),s.add(e),f.delete(e),this.metrics?.onAddToMesh(i,t,1);const n=l.get(e);n?n.push(i):l.set(e,[i])};if(s.forEach((e=>{const t=a(e);t<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,t,i),g(e,PF.BadScore),u.set(e,!0))})),s.size<t){const t=e-s.size,n=CF(p,t);n.forEach((e=>{m(e,NF.NotEnough)}))}if(s.size>n){let t=Array.from(s);t.sort(((e,t)=>a(t)-a(e))),t=t.slice(0,r).concat(XM(t.slice(r)));let n=0;if(t.slice(0,e).forEach((e=>{this.outbound.get(e)&&n++})),n<o){const r=e=>{const n=t[e];for(let r=e;r>0;r--)t[r]=t[r-1];t[0]=n};if(n>0){let o=n;for(let n=1;n<e&&o>0;n++)this.outbound.get(t[n])&&(r(n),o--)}let o=e-n;for(let n=e;n<t.length&&o>0;n++)this.outbound.get(t[n])&&(r(n),o--)}t.slice(e).forEach((e=>{g(e,PF.Excess)}))}if(s.size>=t){let e=0;if(s.forEach((t=>{this.outbound.get(t)&&e++})),e<o){const t=o-e,n=kF(p,t,(e=>!0===this.outbound.get(e)));n.forEach((e=>{m(e,NF.Outbound)}))}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&s.size>1){const e=Array.from(s).sort(((e,t)=>a(e)-a(t))),t=Math.floor(s.size/2),n=a(e[t]);if(n<this.opts.scoreThresholds.opportunisticGraftThreshold){const e=this.opts.opportunisticGraftPeers,t=kF(p,e,(e=>a(e)>n));for(const n of t)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",n,i),m(n,NF.Opportunistic)}}}));const h=Date.now();this.fanoutLastpub.forEach(((e,t)=>{e+s<h&&(this.fanout.delete(t),this.fanoutLastpub.delete(t))})),this.fanout.forEach(((t,n)=>{const r=this.topics.get(n);t.forEach((e=>{(!r.has(e)||a(e)<this.opts.scoreThresholds.publishThreshold)&&t.delete(e)}));const o=this.topics.get(n),s=[],i=new Set;if(d.set(n,i),o){const e=XM(Array.from(o));for(const n of e){const e=this.streamsOutbound.get(n);if(e&&this.multicodecs.includes(e.protocol)&&!t.has(n)&&!this.direct.has(n)){const e=a(n);e>=this.opts.scoreThresholds.publishThreshold&&s.push(n),e>=this.opts.scoreThresholds.gossipThreshold&&i.add(n)}}}if(t.size<e){const n=e-t.size;s.slice(0,n).forEach((e=>{t.add(e),i?.delete(e)}))}})),this.emitGossip(d),await this.sendGraftPrune(l,c,u),this.flush(),this.mcache.shift(),this.dispatchEvent(new hM("gossipsub:heartbeat"))}getRandomGossipPeers(e,t,n=(()=>!0)){const r=this.topics.get(e);if(!r)return new Set;let o=[];return r.forEach((e=>{const t=this.streamsOutbound.get(e);t&&this.multicodecs.includes(t.protocol)&&n(e)&&o.push(e)})),o=XM(o),t>0&&o.length>t&&(o=o.slice(0,t)),new Set(o)}onScrapeMetrics(e){e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let t=0;for(const s of this.backoff.values())t+=s.size;e.cacheSize.set({cache:"backoff"},t);for(const[s,i]of this.topics)e.topicPeersCount.set({topicStr:s},i.size);for(const[s,i]of this.mesh)e.meshPeerCounts.set({topicStr:s},i.size);const n=[],r=new Map;e.behaviourPenalty.reset();for(const s of this.peers.keys()){const t=this.score.score(s);n.push(t),r.set(s,t),e.behaviourPenalty.observe(this.score.peerStats.get(s)?.behaviourPenalty??0)}e.registerScores(n,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,r);const o=YF(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(o)}}function Cj(e={}){return t=>new kj(t,e)}kj.multicodec=bM;const Ij=()=>({gossipsub:Cj({fallbackToFloodsub:!0,emitSelf:!0,maxInboundStreams:64,maxOutboundStreams:128})}),Aj=pe("libp2p:delegated-peer-routing"),Tj=3e4,Rj=4;var xj,Oj;(function(e){e[e["SENDING_QUERY"]=0]="SENDING_QUERY",e[e["PEER_RESPONSE"]=1]="PEER_RESPONSE",e[e["FINAL_PEER"]=2]="FINAL_PEER",e[e["QUERY_ERROR"]=3]="QUERY_ERROR",e[e["PROVIDER"]=4]="PROVIDER",e[e["VALUE"]=5]="VALUE",e[e["ADDING_PEER"]=6]="ADDING_PEER",e[e["DIALING_PEER"]=7]="DIALING_PEER"})(xj||(xj={})),function(e){e[e["PUT_VALUE"]=0]="PUT_VALUE",e[e["GET_VALUE"]=1]="GET_VALUE",e[e["ADD_PROVIDER"]=2]="ADD_PROVIDER",e[e["GET_PROVIDERS"]=3]="GET_PROVIDERS",e[e["FIND_NODE"]=4]="FIND_NODE",e[e["PING"]=5]="PING"}(Oj||(Oj={}));class Nj{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new zu({concurrency:Rj});const{protocol:t,host:n,port:r}=e.getEndpointConfig();Aj(`enabled DelegatedPeerRouting via ${t}://${n}:${r}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async findPeer(e,t={}){Aj("findPeer starts: %p",e),t.timeout=t.timeout??Tj,t.signal=Nc([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const n=gv(),r=gv();this.httpQueue.add((async()=>(n.resolve(),await r.promise)));try{await n.promise;for await(const n of this.client.dht.findPeer(e,t))if("FINAL_PEER"===n.name){const e={id:n.peer.id,multiaddrs:n.peer.multiaddrs,protocols:[]};return e}}catch(ik){throw Aj.error("findPeer errored: %o",ik),ik}finally{r.resolve(),Aj("findPeer finished: %p",e)}throw new Xu("Not found","ERR_NOT_FOUND")}async*getClosestPeers(e,t={}){let n;const r=lt.asCID(e);n=null!=r?r:pd(e),Aj("getClosestPeers starts: %s",n),t.timeout=t.timeout??Tj,t.signal=Nc([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const o=gv(),s=gv();this.httpQueue.add((async()=>(o.resolve(),await s.promise)));try{await o.promise;for await(const e of this.client.dht.query(n,t))"PEER_RESPONSE"===e.name&&(yield*e.closer.map((e=>({id:e.id,multiaddrs:e.multiaddrs,protocols:[]}))))}catch(ik){throw Aj.error("getClosestPeers errored:",ik),ik}finally{s.resolve(),Aj("getClosestPeers finished: %b",e)}}}function Pj(e){return()=>new Nj(e)}const Dj=pe("libp2p:delegated-content-routing"),Uj=3e4,Lj=4,Bj=2;var Mj,Fj;(function(e){e[e["SENDING_QUERY"]=0]="SENDING_QUERY",e[e["PEER_RESPONSE"]=1]="PEER_RESPONSE",e[e["FINAL_PEER"]=2]="FINAL_PEER",e[e["QUERY_ERROR"]=3]="QUERY_ERROR",e[e["PROVIDER"]=4]="PROVIDER",e[e["VALUE"]=5]="VALUE",e[e["ADDING_PEER"]=6]="ADDING_PEER",e[e["DIALING_PEER"]=7]="DIALING_PEER"})(Mj||(Mj={})),function(e){e[e["PUT_VALUE"]=0]="PUT_VALUE",e[e["GET_VALUE"]=1]="GET_VALUE",e[e["ADD_PROVIDER"]=2]="ADD_PROVIDER",e[e["GET_PROVIDERS"]=3]="GET_PROVIDERS",e[e["FIND_NODE"]=4]="FIND_NODE",e[e["PING"]=5]="PING"}(Fj||(Fj={}));class jj{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new zu({concurrency:Lj}),this.httpQueueRefs=new zu({concurrency:Bj});const{protocol:t,host:n,port:r}=e.getEndpointConfig();Dj(`enabled DelegatedContentRouting via ${t}://${n}:${r}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async*findProviders(e,t={}){Dj("findProviders starts: %c",e),t.timeout=t.timeout??Uj,t.signal=Nc([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const n=gv(),r=gv();this.httpQueue.add((async()=>(n.resolve(),await r.promise)));try{await n.promise;for await(const n of this.client.dht.findProvs(e,t))"PROVIDER"===n.name&&(yield*n.providers.map((e=>{const t={id:e.id,protocols:[],multiaddrs:e.multiaddrs};return t})))}catch(ik){throw Dj.error("findProviders errored:",ik),ik}finally{r.resolve(),Dj("findProviders finished: %c",e)}}async provide(e,t={}){Dj("provide starts: %c",e),t.timeout=t.timeout??Uj,t.signal=Nc([this.abortController.signal].concat(null!=t.signal?[t.signal]:[])),await this.httpQueueRefs.add((async()=>{await this.client.block.stat(e,t),await Gm(this.client.dht.provide(e,t))})),Dj("provide finished: %c",e)}async put(e,t,n={}){Dj("put value start: %b",e),n.timeout=n.timeout??Uj,n.signal=Nc([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),await this.httpQueue.add((async()=>{await Gm(this.client.dht.put(e,t,n))})),Dj("put value finished: %b",e)}async get(e,t={}){Dj("get value start: %b",e),t.timeout=t.timeout??Uj,t.signal=Nc([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const n=await this.httpQueue.add((async()=>{for await(const n of this.client.dht.get(e,t))if("VALUE"===n.name)return Dj("get value finished: %b",e),n.value;throw fe(new Error("Not found"),"ERR_NOT_FOUND")}));if(void 0===n)throw fe(new Error("Not found"),"ERR_NOT_FOUND");return n}}function zj(e){return()=>new jj(e)}const $j=e=>Promise.reject(new Error(`No base found for "${e}"`));class Vj{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||$j;for(const t of e.bases)this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const Hj=e=>Promise.reject(new Error(`No codec found for "${e}"`));class Kj{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||Hj;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t="string"===typeof e?this._codecsByName:this._codecsByCode;if(t[e])return t[e];const n=await this._loadCodec(e);return null==t[e]&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const qj=e=>Promise.reject(new Error(`No hasher found for "${e}"`));class Wj{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||qj;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t="string"===typeof e?this._hashersByName:this._hashersByCode;if(t[e])return t[e];const n=await this._loadHasher(e);return null==t[e]&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function Yj(e){try{e=yx(Da(e))}catch(ik){}return e=e.toString(),e}var Gj=()=>{};const Zj=pe("ipfs-http-client:lib:error-handler"),Jj=T.bind({ignoreUndefined:!0}),Qj=R.isBrowser||R.isWebWorker?location.protocol:"http",Xj=R.isBrowser||R.isWebWorker?location.hostname:"localhost",ez=R.isBrowser||R.isWebWorker?location.port:"5001",tz=(e={})=>{let t,n,r={};if("string"===typeof e||Na(e))t=new URL(Yj(e));else if(e instanceof URL)t=e;else if("string"===typeof e.url||Na(e.url))t=new URL(Yj(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e||{};const n=(r.protocol||Qj).replace(":",""),o=(r.host||Xj).split(":")[0],s=r.port||ez;t=new URL(`${n}://${o}:${s}`)}if(r.apiPath?t.pathname=r.apiPath:"/"!==t.pathname&&void 0!==t.pathname||(t.pathname="api/v0"),R.isNode){const e=Gj(t);n=r.agent||new e({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}},nz=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){const n=await e.json();Zj(n),t=n.Message||n.message}else t=await e.text()}catch(ik){Zj("Failed to parse error response",ik),t=ik.message}let n=new $u.HTTPError(e);throw t&&(t.includes("deadline has elapsed")&&(n=new $u.TimeoutError),t&&t.includes("context deadline exceeded")&&(n=new $u.TimeoutError)),t&&t.includes("request timed out")&&(n=new $u.TimeoutError),t&&(n.message=t),n},rz=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,oz=e=>e.replace(rz,(function(e){return"-"+e.toLowerCase()})),sz=e=>"string"===typeof e?Lc(e):e;class iz extends $u{constructor(e={}){const t=tz(e);super({timeout:sz(t.timeout||0)||void 0,headers:t.headers,base:`${t.url}`,handleError:nz,transformSearchParams:e=>{const t=new URLSearchParams;for(const[n,r]of e)"undefined"!==r&&"null"!==r&&"signal"!==n&&t.append(oz(n),r),"timeout"!==n||isNaN(r)||t.append(oz(n),r);return t},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=(e,r={})=>("string"!==typeof e||e.startsWith("/")||(e=`${t.url}/${e}`),n.call(this,e,Jj(r,{method:"POST"})))}}$u.HTTPError;const az=e=>t=>e(new iz(t),t);function lz(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function cz(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const n=e.getTime(),r=Math.floor(n/1e3);t={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw fe(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}function uz({arg:e,searchParams:t,hashAlg:n,mtime:r,mode:o,...s}={}){t&&(s={...s,...t}),n&&(s.hash=n),null!=r&&(r=cz(r),s.mtime=r.secs,s.mtimeNsecs=r.nsecs),null!=o&&(s.mode=lz(o)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),void 0===e||null===e?e=[]:Array.isArray(e)||(e=[e]);const i=new URLSearchParams(s);return e.forEach((e=>i.append("arg",e))),i}const dz=az((e=>{async function t(t={}){const n=await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:uz(t),headers:t.headers})).json();return(n.Keys||[]).map((e=>lt.parse(e["/"])))}return t})),hz=az((e=>{async function t(t,n={}){const r=await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:uz({...n,peer:t.toString()}),headers:n.headers})).json();return(r.Keys||[]).map((e=>lt.parse(e["/"])))}return t})),pz=az((e=>{async function t(t={}){const n=await e.post("bitswap/stat",{searchParams:uz(t),signal:t.signal,headers:t.headers});return fz(await n.json())}return t}));function fz(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((e=>lt.parse(e["/"]))),peers:(e.Peers||[]).map((e=>hd(e))),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}const gz=az((e=>{async function t(t,n={}){const r=await e.post("bitswap/unwant",{signal:n.signal,searchParams:uz({arg:t.toString(),...n}),headers:n.headers});return r.json()}return t}));function mz(e){return{wantlist:dz(e),wantlistForPeer:hz(e),unwant:gz(e),stat:pz(e)}}const yz=az((e=>{async function t(t,n={}){const r=await e.post("block/get",{signal:n.signal,searchParams:uz({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await r.arrayBuffer())}return t}));async function vz(e){if(Pv(e))return new Blob([e]);if("string"===typeof e||e instanceof String)return new Blob([e.toString()]);if(Dv(e))return e;if(Lv(e)&&(e=xv(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Nv(e),{value:n,done:r}=await t.peek();if(r)return wz(t);if(t.push(n),Number.isInteger(n))return new Blob([Uint8Array.from(await Wm(t))]);if(Pv(n)||"string"===typeof n||n instanceof String)return wz(t)}throw fe(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function wz(e){const t=[];for await(const n of e)t.push(n);return new Blob(t)}function bz(e){return hb(e,vz,!0)}function Sz(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}async function _z(e,t,n={}){const r=[],o=new FormData;let s=0,i=0;for await(const{content:a,path:l,mode:c,mtime:u}of bz(e)){let e="";const t=a?"file":"dir";s>0&&(e=`-${s}`);let n=t+e;const d=[];if(null!==c&&void 0!==c&&d.push(`mode=${Sz(c)}`),null!=u){const{secs:e,nsecs:t}=u;d.push(`mtime=${e}`),null!=t&&d.push(`mtime-nsecs=${t}`)}if(d.length&&(n=`${n}?${d.join("&")}`),a){o.set(n,a,null!=l?encodeURIComponent(l):void 0);const e=i+a.size;r.push({name:l,start:i,end:e}),i=e}else{if(null==l)throw new Error("path or content or both must be set");o.set(n,new File([""],encodeURIComponent(l),{type:"application/x-directory"}))}s++}return{total:i,parts:r,headers:n,body:o}}function Ez(e){return e.filter(Boolean)}function kz(...e){return(0,Nc.anySignal)(Ez(e))}const Cz=az((e=>{async function t(n,r={}){const o=new AbortController,s=kz(o.signal,r.signal);let i;try{const t=await e.post("block/put",{signal:s,searchParams:uz(r),...await _z([n],o,r.headers)});i=await t.json()}catch(ik){if("dag-pb"===r.format)return t(n,{...r,format:"protobuf"});if("dag-cbor"===r.format)return t(n,{...r,format:"cbor"});throw ik}return lt.parse(i.Key)}return t})),Iz=az((e=>{async function*t(t,n={}){Array.isArray(t)||(t=[t]);const r=await e.post("block/rm",{signal:n.signal,searchParams:uz({arg:t.map((e=>e.toString())),"stream-channels":!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield Az(e)}return t}));function Az(e){const t={cid:lt.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}const Tz=az((e=>{async function t(t,n={}){const r=await e.post("block/stat",{signal:n.signal,searchParams:uz({arg:t.toString(),...n}),headers:n.headers}),o=await r.json();return{cid:lt.parse(o.Key),size:o.Size}}return t}));function Rz(e){return{get:yz(e),put:Cz(e),rm:Iz(e),stat:Tz(e)}}const xz=az((e=>{async function t(t,n={}){const r=await e.post("bootstrap/add",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),{Peers:o}=await r.json();return{Peers:o.map((e=>Da(e)))}}return t})),Oz=az((e=>{async function t(t={}){const n=await e.post("bootstrap/rm",{signal:t.signal,searchParams:uz({...t,all:!0}),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>Da(e)))}}return t})),Nz=az((e=>{async function t(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:uz(t),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>Da(e)))}}return t})),Pz=az((e=>{async function t(t={}){const n=await e.post("bootstrap/add",{signal:t.signal,searchParams:uz({...t,default:!0}),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>Da(e)))}}return t})),Dz=az((e=>{async function t(t,n={}){const r=await e.post("bootstrap/rm",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),{Peers:o}=await r.json();return{Peers:o.map((e=>Da(e)))}}return t}));function Uz(e){return{add:xz(e),clear:Oz(e),list:Nz(e),reset:Pz(e),rm:Dz(e)}}const Lz=az((e=>{async function t(t,n={}){const r=await e.post("config/profile/apply",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),o=await r.json();return{original:o.OldCfg,updated:o.NewCfg}}return t}));function Bz(e){if(null==e)return e;const t=/^[A-Z]+$/,n={};return Object.keys(e).reduce(((n,r)=>(t.test(r)?n[r.toLowerCase()]=e[r]:t.test(r[0])?n[r[0].toLowerCase()+r.slice(1)]=e[r]:n[r]=e[r],n)),n)}const Mz=az((e=>{async function t(t={}){const n=await e.post("config/profile/list",{signal:t.signal,searchParams:uz(t),headers:t.headers}),r=await n.json();return r.map((e=>Bz(e)))}return t}));function Fz(e){return{apply:Lz(e),list:Mz(e)}}const jz=az((e=>{const t=async(t,n={})=>{if(!t)throw new Error("key argument is required");const r=await e.post("config",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),o=await r.json();return o.Value};return t})),zz=az((e=>{const t=async(t={})=>{const n=await e.post("config/show",{signal:t.signal,searchParams:uz({...t}),headers:t.headers}),r=await n.json();return r};return t})),$z=az((e=>{const t=async(t,n={})=>{const r=new AbortController,o=kz(r.signal,n.signal),s=await e.post("config/replace",{signal:o,searchParams:uz(n),...await _z([mi(JSON.stringify(t))],r,n.headers)});await s.text()};return t})),Vz=az((e=>{const t=async(t,n,r={})=>{if("string"!==typeof t)throw new Error("Invalid key type");const o={...r,...Hz(t,n)},s=await e.post("config",{signal:r.signal,searchParams:uz(o),headers:r.headers});await s.text()};return t})),Hz=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function Kz(e){return{getAll:zz(e),get:jz(e),set:Vz(e),replace:$z(e),profiles:Fz(e)}}const qz=az((e=>{async function*t(t,n={}){const r=await e.post("dag/export",{signal:n.signal,searchParams:uz({arg:t.toString()}),headers:n.headers});yield*r.iterator()}return t}));async function*Wz(e,t,n,r,o){const s=async e=>{const t=await n.getCodec(e.code),s=await r(e,o);return t.decode(s)},i=t.split("/").filter(Boolean);let a=await s(e),l=e;while(i.length){const e=i.shift();if(!e)throw fe(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(a,e))throw fe(new Error(`no link named "${e}" under ${l}`),"ERR_NO_LINK");a=a[e],yield{value:a,remainderPath:i.join("/")};const n=lt.asCID(a);n&&(l=n,a=await s(a))}yield{value:a,remainderPath:""}}const Yz=(e,t)=>{const n=az(((t,n)=>{const r=yz(n),o=async(t,n={})=>{if(n.path){const o=n.localResolve?await XT(Wz(t,n.path,e,r,n)):await vd(Wz(t,n.path,e,r,n)),s=o;if(!s)throw fe(new Error("Not found"),"ERR_NOT_FOUND");return s}const o=await e.getCodec(t.code),s=await r(t,n),i=o.decode(s);return{value:i,remainderPath:""}};return o}));return n(t)},Gz=az((e=>{async function*t(t,n={}){const r=new AbortController,o=kz(r.signal,n.signal),{headers:s,body:i}=await _z(t,r,n.headers),a=await e.post("dag/import",{signal:o,headers:s,body:i,searchParams:uz({"pin-roots":n.pinRoots})});for await(const{Root:e}of a.ndjson())if(void 0!==e){const{Cid:{"/":t},PinErrorMsg:n}=e;yield{root:{cid:lt.parse(t),pinErrorMsg:n}}}}return t})),Zz=(e,t)=>{const n=az((t=>{const n=async(n,r={})=>{const o={storeCodec:"dag-cbor",hashAlg:"sha2-256",...r};let s;if(o.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");s=n}else{const t=await e.getCodec(o.storeCodec);s=t.encode(n),o.inputCodec=o.storeCodec}const i=new AbortController,a=kz(i.signal,o.signal),l=await t.post("dag/put",{timeout:o.timeout,signal:a,searchParams:uz(o),...await _z([s],i,o.headers)}),c=await l.json();return lt.parse(c.Cid["/"])};return n}));return n(t)},Jz=az((e=>{const t=async(t,n={})=>{const r=await e.post("dag/resolve",{signal:n.signal,searchParams:uz({arg:`${t}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers}),o=await r.json();return{cid:lt.parse(o.Cid["/"]),remainderPath:o.RemPath}};return t}));function Qz(e,t){return{export:qz(t),get:Yz(e,t),import:Gz(t),put:Zz(e,t),resolve:Jz(t)}}const Xz=0,e$=1,t$=2,n$=3,r$=4,o$=5,s$=6,i$=7,a$=e=>{if(e.Type===Xz)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===e$)return{from:hd(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((({ID:e,Addrs:t})=>({id:hd(e),multiaddrs:t.map((e=>Da(e))),protocols:[]}))),providers:(e.Responses||[]).map((({ID:e,Addrs:t})=>({id:hd(e),multiaddrs:t.map((e=>Da(e))),protocols:[]})))};if(e.Type===t$){let t={id:e.ID??hd(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(t={id:hd(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((e=>Da(e))),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===n$)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===r$)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((({ID:e,Addrs:t})=>({id:hd(e),multiaddrs:t.map((e=>Da(e))),protocols:[]})))};if(e.Type===o$)return{name:"VALUE",type:e.Type,value:mi(e.Extra,"base64pad")};if(e.Type===s$){const t=e.Responses.map((({ID:e})=>hd(e)));if(!t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===i$)return{name:"DIALING_PEER",type:e.Type,peer:hd(e.ID)};throw new Error("Unknown DHT event type")},l$=az((e=>{async function*t(t,n={}){const r=await e.post("dht/findpeer",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers});for await(const e of r.ndjson())yield a$(e)}return t})),c$=az((e=>{async function*t(t,n={}){const r=await e.post("dht/findprovs",{signal:n.signal,searchParams:uz({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield a$(e)}return t})),u$=az((e=>{async function*t(t,n={}){const r=await e.post("dht/get",{signal:n.signal,searchParams:uz({arg:t instanceof Uint8Array?Ti(t):t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield a$(e)}return t})),d$=az((e=>{async function*t(t,n={recursive:!1}){const r=Array.isArray(t)?t:[t],o=await e.post("dht/provide",{signal:n.signal,searchParams:uz({arg:r.map((e=>e.toString())),...n}),headers:n.headers});for await(const e of o.ndjson())yield a$(e)}return t})),h$=az((e=>{async function*t(t,n,r={}){const o=new AbortController,s=kz(o.signal,r.signal),i=await e.post("dht/put",{signal:s,searchParams:uz({arg:t instanceof Uint8Array?Ti(t):t.toString(),...r}),...await _z([n],o,r.headers)});for await(const e of i.ndjson())yield a$(e)}return t})),p$=az((e=>{async function*t(t,n={}){const r=await e.post("dht/query",{signal:n.signal,searchParams:uz({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield a$(e)}return t}));function f$(e){return{findPeer:l$(e),findProvs:c$(e),get:u$(e),provide:d$(e),put:h$(e),query:p$(e)}}const g$=az((e=>{async function t(t={}){const n=await e.post("diag/cmds",{signal:t.signal,searchParams:uz(t),headers:t.headers});return n.json()}return t})),m$=az((e=>{async function t(t={}){const n=await e.post("diag/net",{signal:t.signal,searchParams:uz(t),headers:t.headers});return n.json()}return t})),y$=az((e=>{async function t(t={}){const n=await e.post("diag/sys",{signal:t.signal,searchParams:uz(t),headers:t.headers});return n.json()}return t}));function v$(e){return{cmds:g$(e),net:m$(e),sys:y$(e)}}const w$=az((e=>{async function t(t,n,r={}){const o=await e.post("files/chmod",{signal:r.signal,searchParams:uz({arg:t,mode:n,...r}),headers:r.headers});await o.text()}return t})),b$=az((e=>{async function t(t,n,r={}){const o=Array.isArray(t)?t:[t],s=await e.post("files/cp",{signal:r.signal,searchParams:uz({arg:o.concat(n).map((e=>lt.asCID(e)?`/ipfs/${e}`:e)),...r}),headers:r.headers});await s.text()}return t})),S$=az((e=>{async function t(t,n={}){if(!t||"string"!==typeof t)throw new Error("ipfs.files.flush requires a path");const r=await e.post("files/flush",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),o=await r.json();return lt.parse(o.Cid)}return t}));function _$(e){const t=Bz(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}const E$=az((e=>{async function*t(t,n={}){if(!t)throw new Error("ipfs.files.ls requires a path");const r=await e.post("files/ls",{signal:n.signal,searchParams:uz({arg:lt.asCID(t)?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const e of r.ndjson())if("Entries"in e)for(const t of e.Entries||[])yield k$(_$(t));else yield k$(_$(e))}return t}));function k$(e){return e.hash&&(e.cid=lt.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}const C$=az((e=>{async function t(t,n={}){const r=await e.post("files/mkdir",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers});await r.text()}return t})),I$=az((e=>{async function t(t,n,r={}){Array.isArray(t)||(t=[t]);const o=await e.post("files/mv",{signal:r.signal,searchParams:uz({arg:t.concat(n),...r}),headers:r.headers});await o.text()}return t}));var A$=n(590);const T$=az((e=>{async function*t(t,n={}){const r=await e.post("files/read",{signal:n.signal,searchParams:uz({arg:t,count:n.length,...n}),headers:n.headers});yield*A$(r.body)}return t})),R$=az((e=>{async function t(t,n={}){const r=await e.post("files/rm",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),o=await r.text();if(""!==o){const e=new $u.HTTPError(r);throw e.message=o,e}}return t})),x$=az((e=>{async function t(t,n={}){const r=await e.post("files/stat",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),o=await r.json();return o.WithLocality=o.WithLocality||!1,O$(_$(o))}return t}));function O$(e){return e.cid=lt.parse(e.hash),delete e.hash,e}const N$=az((e=>{async function t(t,n={}){const r=await e.post("files/touch",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers});await r.text()}return t})),P$=az((e=>{async function t(t,n,r={}){const o=new AbortController,s=kz(o.signal,r.signal),i=await e.post("files/write",{signal:s,searchParams:uz({arg:t,streamChannels:!0,count:r.length,...r}),...await _z([{content:n,path:"arg",mode:lz(r.mode),mtime:cz(r.mtime)}],o,r.headers)});await i.text()}return t}));function D$(e){return{chmod:w$(e),cp:b$(e),flush:S$(e),ls:E$(e),mkdir:C$(e),mv:I$(e),read:T$(e),rm:R$(e),stat:x$(e),touch:N$(e),write:P$(e)}}const U$=az((e=>{const t=async(e,t,n={})=>{throw fe(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t})),L$=az((e=>{async function t(t,n){const r=n??{type:"Ed25519"},o=await e.post("key/gen",{signal:r.signal,searchParams:uz({arg:t,...r}),headers:r.headers}),s=await o.json();return Bz(s)}return t})),B$=az((e=>{async function t(t,n,r,o={}){const s=await e.post("key/import",{signal:o.signal,searchParams:uz({arg:t,pem:n,password:r,...o}),headers:o.headers}),i=await s.json();return Bz(i)}return t})),M$=az((e=>{const t=async(e,t={})=>{throw fe(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t})),F$=az((e=>{async function t(t={}){const n=await e.post("key/list",{signal:t.signal,searchParams:uz(t),headers:t.headers}),r=await n.json();return(r.Keys||[]).map((e=>Bz(e)))}return t})),j$=az((e=>{async function t(t,n,r={}){const o=await e.post("key/rename",{signal:r.signal,searchParams:uz({arg:[t,n],...r}),headers:r.headers});return Bz(await o.json())}return t})),z$=az((e=>{async function t(t,n={}){const r=await e.post("key/rm",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),o=await r.json();return Bz(o.Keys[0])}return t}));function $$(e){return{export:U$(e),gen:L$(e),import:B$(e),info:M$(e),list:F$(e),rename:j$(e),rm:z$(e)}}const V$=az((e=>{async function t(t,n,r={}){const o=await e.post("log/level",{signal:r.signal,searchParams:uz({arg:[t,n],...r}),headers:r.headers});return Bz(await o.json())}return t})),H$=az((e=>{async function t(t={}){const n=await e.post("log/ls",{signal:t.signal,searchParams:uz(t),headers:t.headers}),r=await n.json();return r.Strings}return t})),K$=az((e=>{async function*t(t={}){const n=await e.post("log/tail",{signal:t.signal,searchParams:uz(t),headers:t.headers});yield*n.ndjson()}return t}));function q$(e){return{level:V$(e),ls:H$(e),tail:K$(e)}}const W$=az((e=>{async function t(t,n={}){const r=await e.post("name/publish",{signal:n.signal,searchParams:uz({arg:`${t}`,...n}),headers:n.headers});return Bz(await r.json())}return t})),Y$=az((e=>{async function*t(t,n={}){const r=await e.post("name/resolve",{signal:n.signal,searchParams:uz({arg:t,stream:!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield e.Path}return t})),G$=az((e=>{async function t(t,n={}){const r=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers});return Bz(await r.json())}return t})),Z$=az((e=>{async function t(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:uz(t),headers:t.headers});return Bz(await n.json())}return t})),J$=az((e=>{async function t(t={}){const n=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:uz(t),headers:t.headers}),r=await n.json();return r.Strings||[]}return t}));function Q$(e){return{cancel:G$(e),state:Z$(e),subs:J$(e)}}function X$(e){return{publish:W$(e),resolve:Y$(e),pubsub:Q$(e)}}const eV=az((e=>{async function t(t,n={}){const r=await e.post("object/data",{signal:n.signal,searchParams:uz({arg:`${t instanceof Uint8Array?lt.decode(t):t}`,...n}),headers:n.headers}),o=await r.arrayBuffer();return new Uint8Array(o,0,o.byteLength)}return t})),tV=az((e=>{async function t(t,n={}){const r=await e.post("object/get",{signal:n.signal,searchParams:uz({arg:`${t instanceof Uint8Array?lt.decode(t):t}`,dataEncoding:"base64",...n}),headers:n.headers}),o=await r.json();return{Data:mi(o.Data,"base64pad"),Links:(o.Links||[]).map((e=>({Name:e.Name,Hash:lt.parse(e.Hash),Tsize:e.Size})))}}return t})),nV=az((e=>{async function t(t,n={}){const r=await e.post("object/links",{signal:n.signal,searchParams:uz({arg:`${t instanceof Uint8Array?lt.decode(t):t}`,...n}),headers:n.headers}),o=await r.json();return(o.Links||[]).map((e=>({Name:e.Name,Tsize:e.Size,Hash:lt.parse(e.Hash)})))}return t})),rV=az((e=>{async function t(t={}){const n=await e.post("object/new",{signal:t.signal,searchParams:uz({arg:t.template,...t}),headers:t.headers}),{Hash:r}=await n.json();return lt.parse(r)}return t})),oV=(e,t)=>{const n=az((n=>{const r=Zz(e,t);async function o(e,t={}){return r(e,{...t,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return o}));return n(t)},sV=az((e=>{async function t(t,n={}){const r=await e.post("object/stat",{signal:n.signal,searchParams:uz({arg:`${t}`,...n}),headers:n.headers}),o=await r.json();return{...o,Hash:lt.parse(o.Hash)}}return t})),iV=az((e=>{async function t(t,n,r={}){const o=await e.post("object/patch/add-link",{signal:r.signal,searchParams:uz({arg:[`${t}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...r}),headers:r.headers}),{Hash:s}=await o.json();return lt.parse(s)}return t})),aV=az((e=>{async function t(t,n,r={}){const o=new AbortController,s=kz(o.signal,r.signal),i=await e.post("object/patch/append-data",{signal:s,searchParams:uz({arg:`${t}`,...r}),...await _z([n],o,r.headers)}),{Hash:a}=await i.json();return lt.parse(a)}return t})),lV=az((e=>{async function t(t,n,r={}){const o=await e.post("object/patch/rm-link",{signal:r.signal,searchParams:uz({arg:[`${t}`,n.Name||n.name||null],...r}),headers:r.headers}),{Hash:s}=await o.json();return lt.parse(s)}return t})),cV=az((e=>{async function t(t,n,r={}){const o=new AbortController,s=kz(o.signal,r.signal),i=await e.post("object/patch/set-data",{signal:s,searchParams:uz({arg:[`${t}`],...r}),...await _z([n],o,r.headers)}),{Hash:a}=await i.json();return lt.parse(a)}return t}));function uV(e){return{addLink:iV(e),appendData:aV(e),rmLink:lV(e),setData:cV(e)}}function dV(e,t){return{data:eV(t),get:tV(t),links:nV(t),new:rV(t),put:oV(e,t),stat:sV(t),patch:uV(t)}}const hV=az((e=>{async function*t(t,n={}){for await(const{path:r,recursive:o,metadata:s}of Ed(t)){const t=await e.post("pin/add",{signal:n.signal,searchParams:uz({...n,arg:r,recursive:o,metadata:s?JSON.stringify(s):void 0,stream:!0}),headers:n.headers});for await(const e of t.ndjson())if(e.Pins)for(const t of e.Pins)yield lt.parse(t);else yield lt.parse(e)}}return t}));function pV(e){const t=hV(e);return az((()=>{async function e(e,n={}){return vd(t([{path:e,...n}],n))}return e}))(e)}function fV(e,t,n){const r={type:e,cid:lt.parse(t)};return n&&(r.metadata=n),r}const gV=az((e=>{async function*t(t={}){let n=[];t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const r=await e.post("pin/ls",{signal:t.signal,searchParams:uz({...t,arg:n.map((e=>`${e}`)),stream:!0}),headers:t.headers});for await(const e of r.ndjson()){if(e.Keys){for(const t of Object.keys(e.Keys))yield fV(e.Keys[t].Type,t,e.Keys[t].Metadata);return}yield fV(e.Type,e.Cid,e.Metadata)}}return t})),mV=az((e=>{async function*t(t,n={}){for await(const{path:r,recursive:o}of Ed(t)){const t=new URLSearchParams(n.searchParams);t.append("arg",`${r}`),null!=o&&t.set("recursive",String(o));const s=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:uz({...n,arg:`${r}`,recursive:o})});for await(const e of s.ndjson())e.Pins?yield*e.Pins.map((e=>lt.parse(e))):yield lt.parse(e)}}return t})),yV=e=>{const t=mV(e);return az((()=>{async function e(e,n={}){return vd(t([{path:e,...n}],n))}return e}))(e)},vV=({Name:e,Status:t,Cid:n})=>({cid:lt.parse(n),name:e,status:t}),wV=e=>{if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},bV=e=>{if(lt.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of "+typeof e)},SV=({service:e,cid:t,name:n,status:r,all:o})=>{const s=uz({service:wV(e),name:n,force:!!o||void 0});if(t)for(const i of t)s.append("cid",bV(i));if(r)for(const i of r)s.append("status",i);return s},_V=({cid:e,service:t,background:n,name:r,origins:o})=>{const s=uz({arg:bV(e),service:wV(t),name:r,background:!!n||void 0});if(o)for(const i of o)s.append("origin",i.toString());return s};function EV(e){async function t(t,{timeout:n,signal:r,headers:o,...s}){const i=await e.post("pin/remote/add",{timeout:n,signal:r,headers:o,searchParams:_V({cid:t,...s})});return vV(await i.json())}return t}function kV(e){async function*t({timeout:t,signal:n,headers:r,...o}){const s=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:r,searchParams:SV(o)});for await(const e of s.ndjson())yield vV(e)}return t}function CV(e){async function t({timeout:t,signal:n,headers:r,...o}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:r,searchParams:SV({...o,all:!1})})}return t}function IV(e){async function t({timeout:t,signal:n,headers:r,...o}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:r,searchParams:SV({...o,all:!0})})}return t}function AV(e){const t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function TV(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:RV(e.Stat)}}}function RV(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:n,Queued:r,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:r,pinning:t,pinned:n,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function xV(e){async function t(t,n){const{endpoint:r,key:o,headers:s,timeout:i,signal:a}=n;await e.post("pin/remote/service/add",{timeout:i,signal:a,searchParams:uz({arg:[t,AV(r),o]}),headers:s})}return t}function OV(e){async function t(t={}){const{stat:n,headers:r,timeout:o,signal:s}=t,i=await e.post("pin/remote/service/ls",{timeout:o,signal:s,headers:r,searchParams:!0===n?uz({stat:n}):void 0}),{RemoteServices:a}=await i.json();return a.map(TV)}return t}function NV(e){async function t(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:uz({arg:t})})}return t}function PV(e){const t=new iz(e);return{add:xV(t),ls:OV(t),rm:NV(t)}}function DV(e){const t=new iz(e);return{add:EV(t),ls:kV(t),rm:CV(t),rmAll:IV(t),service:PV(e)}}function UV(e){return{addAll:hV(e),add:pV(e),ls:gV(e),rmAll:mV(e),rm:yV(e),remote:DV(e)}}const LV=e=>Array.isArray(e)?e.map(BV):e,BV=e=>Ti(MV(e)),MV=e=>ue.decode(e),FV=e=>BigInt(`0x${Ti(ue.decode(e),"base16")}`),jV=e=>ue.encode(mi(e)),zV=az((e=>{async function t(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:uz(t),headers:t.headers})).json();return LV(n)||[]}return t})),$V=az((e=>{async function t(t,n={}){const r=await e.post("pubsub/peers",{signal:n.signal,searchParams:uz({arg:jV(t),...n}),headers:n.headers}),{Strings:o}=await r.json();return o||[]}return t})),VV=az((e=>{async function t(t,n,r={}){const o=uz({arg:jV(t),...r}),s=new AbortController,i=kz(s.signal,r.signal),a=await e.post("pubsub/pub",{signal:i,searchParams:o,...await _z([n],s,r.headers)});await a.text()}return t})),HV=pe("ipfs-http-client:pubsub:subscribe"),KV=(e,t)=>az((e=>{async function n(n,r,o={}){let s,i;o.signal=t.subscribe(n,r,o.signal);const a=new Promise(((e,t)=>{s=e,i=t})),l=setTimeout((()=>s()),1e3);return e.post("pubsub/sub",{signal:o.signal,searchParams:uz({arg:jV(n),...o}),headers:o.headers}).catch((e=>{t.unsubscribe(n,r),i(e)})).then((e=>{clearTimeout(l),e&&(qV(e,{onMessage:e=>{r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(e):r(e))},onEnd:()=>t.unsubscribe(n,r),onError:o.onError}),s())})),a}return n}))(e);async function qV(e,{onMessage:t,onEnd:n,onError:r}){r=r||HV;try{for await(const n of e.ndjson())try{if(!n.from)continue;null!=n.from&&null!=n.seqno?t({type:"signed",from:hd(n.from),data:MV(n.data),sequenceNumber:FV(n.seqno),topic:BV(n.topicIDs[0]),key:MV(n.key??"u"),signature:MV(n.signature??"u")}):t({type:"unsigned",data:MV(n.data),topic:BV(n.topicIDs[0])})}catch(ik){ik.message=`Failed to parse pubsub message: ${ik.message}`,r(ik,!1,n)}}catch(ik){WV(ik)||r(ik,!0)}finally{n()}}const WV=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return"AbortError"===e.name}},YV=(e,t)=>{async function n(e,n){t.unsubscribe(e,n)}return n};class GV{constructor(){this._subs=new Map}subscribe(e,t,n){const r=this._subs.get(e)||[];if(r.find((e=>e.handler===t)))throw new Error(`Already subscribed to ${e} with this handler`);const o=new AbortController;return this._subs.set(e,[{handler:t,controller:o}].concat(r)),n&&n.addEventListener("abort",(()=>this.unsubscribe(e,t))),o.signal}unsubscribe(e,t){const n=this._subs.get(e)||[];let r;t?(this._subs.set(e,n.filter((e=>e.handler!==t))),r=n.filter((e=>e.handler===t))):(this._subs.set(e,[]),r=n),(this._subs.get(e)||[]).length||this._subs.delete(e),r.forEach((e=>e.controller.abort()))}}function ZV(e){const t=new GV;return{ls:zV(e),peers:$V(e),publish:VV(e),subscribe:KV(e,t),unsubscribe:YV(e,t)}}const JV=az((e=>{async function*t(t={}){const n=await e.post("refs/local",{signal:t.signal,transform:Bz,searchParams:uz(t),headers:t.headers});yield*n.ndjson()}return t})),QV=az(((e,t)=>{const n=async function*(t,n={}){const r=Array.isArray(t)?t:[t],o=await e.post("refs",{signal:n.signal,searchParams:uz({arg:r.map((e=>`${e instanceof Uint8Array?lt.decode(e):e}`)),...n}),headers:n.headers,transform:Bz});yield*o.ndjson()};return Object.assign(n,{local:JV(t)})})),XV=az((e=>{async function*t(t={}){const n=await e.post("repo/gc",{signal:t.signal,searchParams:uz(t),headers:t.headers,transform:e=>({err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?lt.parse(e.Key["/"]):null})});yield*n.ndjson()}return t})),eH=az((e=>{async function t(t={}){const n=await e.post("repo/stat",{signal:t.signal,searchParams:uz(t),headers:t.headers}),r=await n.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}}return t})),tH=az((e=>{async function t(t={}){const n=await(await e.post("repo/version",{signal:t.signal,searchParams:uz(t),headers:t.headers})).json();return n.Version}return t}));function nH(e){return{gc:XV(e),stat:eH(e),version:tH(e)}}const rH=az((e=>{async function*t(t={}){const n=await e.post("stats/bw",{signal:t.signal,searchParams:uz(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*n.ndjson()}return t}));function oH(e){return{bitswap:pz(e),repo:eH(e),bw:rH(e)}}const sH=az((e=>{async function t(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:uz(t),headers:t.headers}),{Addrs:r}=await n.json();return Object.keys(r).map((e=>({id:hd(e),addrs:(r[e]||[]).map((e=>Da(e)))})))}return t})),iH=az((e=>{async function t(t,n={}){const r=await e.post("swarm/connect",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),{Strings:o}=await r.json();return o||[]}return t})),aH=az((e=>{async function t(t,n={}){const r=await e.post("swarm/disconnect",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),{Strings:o}=await r.json();return o||[]}return t})),lH=az((e=>{async function t(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:uz(t),headers:t.headers}),{Strings:r}=await n.json();return(r||[]).map((e=>Da(e)))}return t})),cH=az((e=>{async function t(t={}){const n=await e.post("swarm/peers",{signal:t.signal,searchParams:uz(t),headers:t.headers}),{Peers:r}=await n.json();return(r||[]).map((e=>({addr:Da(e.Addr),peer:hd(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"})))}return t}));function uH(e){return{addrs:sH(e),connect:iH(e),disconnect:aH(e),localAddrs:lH(e),peers:cH(e)}}const dH=az((e=>{async function*t(t,n={}){const r=new AbortController,o=kz(r.signal,n.signal),{headers:s,body:i,total:a,parts:l}=await _z(t,r,n.headers),[c,u]="function"===typeof n.progress?hH(a,l,n.progress):[void 0,void 0],d=await e.post("add",{searchParams:uz({"stream-channels":!0,...n,progress:Boolean(c)}),onUploadProgress:u,signal:o,headers:s,body:i});for await(let e of d.ndjson())e=Bz(e),void 0!==e.hash?yield fH(e):c&&c(e.bytes||0,e.name)}return t})),hH=(e,t,n)=>t?[void 0,pH(e,t,n)]:[n,void 0],pH=(e,t,n)=>{let r=0;const o=t.length;return({loaded:s,total:i})=>{const a=Math.floor(s/i*e);while(r<o){const{start:e,end:o,name:s}=t[r];if(a<o){n(a-e,s);break}n(o-e,s),r+=1}}};function fH({name:e,hash:t,size:n,mode:r,mtime:o,mtimeNsecs:s}){const i={path:e,cid:lt.parse(t),size:parseInt(n)};return null!=r&&(i.mode=parseInt(r,8)),null!=o&&(i.mtime={secs:o,nsecs:s||0}),i}function gH(e){const t=dH(e);return az((()=>{async function e(e,n={}){return await vd(t($v(e),n))}return e}))(e)}const mH=az((e=>{async function*t(t,n={}){const r=await e.post("cat",{signal:n.signal,searchParams:uz({arg:t.toString(),...n}),headers:n.headers});yield*r.iterator()}return t})),yH=az((e=>{const t=async(t={})=>{const n=await e.post("commands",{signal:t.signal,searchParams:uz(t),headers:t.headers});return n.json()};return t})),vH=az((e=>{const t=async(t,n={})=>{const r=await e.post("dns",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),o=await r.json();return o.Path};return t})),wH=az((e=>()=>{const t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}})),bH=az((e=>{async function*t(t,n={}){const r={arg:`${t instanceof Uint8Array?lt.decode(t):t}`,...n};r.compressionLevel&&(r["compression-level"]=r.compressionLevel,delete r.compressionLevel);const o=await e.post("get",{signal:n.signal,searchParams:uz(r),headers:n.headers});yield*o.iterator()}return t})),SH=az((e=>{async function t(t={}){const n=await e.post("id",{signal:t.signal,searchParams:uz({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),r=await n.json(),o={...Bz(r)};return o.id=hd(o.id),o.addresses&&(o.addresses=o.addresses.map((e=>Da(e)))),o}return t})),_H=e=>{const t=SH(e);async function n(e={}){const n=await t(e);return Boolean(n&&n.addresses&&n.addresses.length)}return n},EH=az(((e,t)=>{async function*n(n,r={}){const o=`${n instanceof Uint8Array?lt.decode(n):n}`;async function s(e){let n=e.Hash;if(n.includes("/")){const e=n.startsWith("/ipfs/")?n:`/ipfs/${n}`,r=await x$(t)(e);n=r.cid}else n=lt.parse(n);const r={name:e.Name,path:o+(e.Name?`/${e.Name}`:""),size:e.Size,cid:n,type:kH(e)};return e.Mode&&(r.mode=parseInt(e.Mode,8)),void 0!==e.Mtime&&null!==e.Mtime&&(r.mtime={secs:e.Mtime},void 0!==e.MtimeNsecs&&null!==e.MtimeNsecs&&(r.mtime.nsecs=e.MtimeNsecs)),r}const i=await e.post("ls",{signal:r.signal,searchParams:uz({arg:o,...r}),headers:r.headers});for await(let e of i.ndjson()){if(e=e.Objects,!e)throw new Error("expected .Objects in results");if(e=e[0],!e)throw new Error("expected one array in results.Objects");const t=e.Links;if(!Array.isArray(t))throw new Error("expected one array in results.Objects[0].Links");if(!t.length)return void(yield s(e));yield*t.map(s)}}return n}));function kH(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}const CH=az((e=>{async function t(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:uz(t),headers:t.headers});return Bz(await n.json())}return t})),IH=az((e=>{async function*t(t,n={}){const r=await e.post("ping",{signal:n.signal,searchParams:uz({arg:`${t}`,...n}),headers:n.headers,transform:Bz});yield*r.ndjson()}return t})),AH=az((e=>{async function t(t,n={}){const r=await e.post("resolve",{signal:n.signal,searchParams:uz({arg:t,...n}),headers:n.headers}),{Path:o}=await r.json();return o}return t})),TH=az((e=>{const t=async(e={})=>{throw fe(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t})),RH=az((e=>{async function t(t={}){const n=await e.post("shutdown",{signal:t.signal,searchParams:uz(t),headers:t.headers});await n.text()}return t})),xH=az((e=>{async function t(t={}){const n=await e.post("version",{signal:t.signal,searchParams:uz(t),headers:t.headers});return{...Bz(await n.json()),"ipfs-http-client":"1.0.0"}}return t}));n(3897);var OH=n(749);function NH(e={}){const t={name:Es.name,code:Es.code,encode:e=>e,decode:e=>e},n=Object.values(Js);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach((e=>n.push(e)));const r=new Vj({bases:n,loadBase:e.ipld&&e.ipld.loadBase}),o=Object.values(Xs);[i,a,l,c,t].concat(e.ipld&&e.ipld.codecs||[]).forEach((e=>o.push(e)));const s=new Kj({codecs:o,loadCodec:e.ipld&&e.ipld.loadCodec}),u=Object.values(Qs);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach((e=>u.push(e)));const d=new Wj({hashers:u,loadHasher:e.ipld&&e.ipld.loadHasher}),h={add:gH(e),addAll:dH(e),bitswap:mz(e),block:Rz(e),bootstrap:Uz(e),cat:mH(e),commands:yH(e),config:Kz(e),dag:Qz(s,e),dht:f$(e),diag:v$(e),dns:vH(e),files:D$(e),get:bH(e),getEndpointConfig:wH(e),id:SH(e),isOnline:_H(e),key:$$(e),log:q$(e),ls:EH(e),mount:CH(e),name:X$(e),object:dV(s,e),pin:UV(e),ping:IH(e),pubsub:ZV(e),refs:QV(e),repo:nH(e),resolve:AH(e),start:TH(e),stats:oH(e),stop:RH(e),swarm:uH(e),version:xH(e),bases:r,codecs:s,hashers:d};return h}const PH=421,DH=290,UH=2e3,LH=Object.create(null);LH["open"]="0",LH["close"]="1",LH["ping"]="2",LH["pong"]="3",LH["message"]="4",LH["upgrade"]="5",LH["noop"]="6";const BH=Object.create(null);Object.keys(LH).forEach((e=>{BH[LH[e]]=e}));const MH={type:"error",data:"parser error"},FH="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),jH="function"===typeof ArrayBuffer,zH=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,$H=({type:e,data:t},n,r)=>FH&&t instanceof Blob?n?r(t):VH(t,r):jH&&(t instanceof ArrayBuffer||zH(t))?n?r(t):VH(new Blob([t]),r):r(LH[e]+(t||"")),VH=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};var HH=$H;const KH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qH="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let $5=0;$5<KH.length;$5++)qH[KH.charCodeAt($5)]=$5;const WH=e=>{let t,n,r,o,s,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=qH[e.charCodeAt(t)],r=qH[e.charCodeAt(t+1)],o=qH[e.charCodeAt(t+2)],s=qH[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|o>>2,u[l++]=(3&o)<<6|63&s;return c},YH="function"===typeof ArrayBuffer,GH=(e,t)=>{if("string"!==typeof e)return{type:"message",data:JH(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:ZH(e.substring(1),t)};const r=BH[n];return r?e.length>1?{type:BH[n],data:e.substring(1)}:{type:BH[n]}:MH},ZH=(e,t)=>{if(YH){const n=WH(e);return JH(n,t)}return{base64:!0,data:e}},JH=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};var QH=GH;const XH=String.fromCharCode(30),eK=(e,t)=>{const n=e.length,r=new Array(n);let o=0;e.forEach(((e,s)=>{HH(e,!1,(e=>{r[s]=e,++o===n&&t(r.join(XH))}))}))},tK=(e,t)=>{const n=e.split(XH),r=[];for(let o=0;o<n.length;o++){const e=QH(n[o],t);if(r.push(e),"error"===e.type)break}return r},nK=4;function rK(e){if(e)return oK(e)}function oK(e){for(var t in rK.prototype)e[t]=rK.prototype[t];return e}rK.prototype.on=rK.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},rK.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},rK.prototype.off=rK.prototype.removeListener=rK.prototype.removeAllListeners=rK.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},rK.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);r=0;for(var o=n.length;r<o;++r)n[r].apply(this,t)}return this},rK.prototype.emitReserved=rK.prototype.emit,rK.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},rK.prototype.hasListeners=function(e){return!!this.listeners(e).length};const sK=(()=>"undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")())();function iK(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const aK=sK.setTimeout,lK=sK.clearTimeout;function cK(e,t){t.useNativeTimers?(e.setTimeoutFn=aK.bind(sK),e.clearTimeoutFn=lK.bind(sK)):(e.setTimeoutFn=sK.setTimeout.bind(sK),e.clearTimeoutFn=sK.clearTimeout.bind(sK))}const uK=1.33;function dK(e){return"string"===typeof e?hK(e):Math.ceil((e.byteLength||e.size)*uK)}function hK(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}class pK extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class fK extends rK{constructor(e){super(),this.writable=!1,cK(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new pK(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=QH(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const gK="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),mK=64,yK={};let vK,wK=0,bK=0;function SK(e){let t="";do{t=gK[e%mK]+t,e=Math.floor(e/mK)}while(e>0);return t}function _K(){const e=SK(+new Date);return e!==vK?(wK=0,vK=e):e+"."+SK(wK++)}for(;bK<mK;bK++)yK[gK[bK]]=bK;function EK(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function kK(e){let t={},n=e.split("&");for(let r=0,o=n.length;r<o;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}let CK=!1;try{CK="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(ik){}const IK=CK;function AK(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||IK))return new XMLHttpRequest}catch(n){}if(!t)try{return new(sK[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function TK(){}const RK=function(){const e=new AK({xdomain:!1});return null!=e.responseType}();class xK extends fK{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=RK&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};tK(e,this.socket.binaryType).forEach(t),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,eK(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=_K()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const r=EK(e),o=-1!==this.opts.hostname.indexOf(":");return t+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new OK(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class OK extends rK{constructor(e,t){super(),cK(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=iK(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new AK(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(n){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{t.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(n){return void this.setTimeoutFn((()=>{this.onError(n)}),0)}"undefined"!==typeof document&&(this.index=OK.requestsCount++,OK.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=TK,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete OK.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(OK.requestsCount=0,OK.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",NK);else if("function"===typeof addEventListener){const e="onpagehide"in sK?"pagehide":"unload";addEventListener(e,NK,!1)}function NK(){for(let e in OK.requests)OK.requests.hasOwnProperty(e)&&OK.requests[e].abort()}const PK=(()=>{const e="function"===typeof Promise&&"function"===typeof Promise.resolve;return e?e=>Promise.resolve().then(e):(e,t)=>t(e,0)})(),DK=sK.WebSocket||sK.MozWebSocket,UK=!0,LK="arraybuffer",BK="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class MK extends fK{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=BK?{}:iK(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=UK&&!BK?t?new DK(e,t):new DK(e):new DK(e,t,n)}catch(ik){return this.emitReserved("error",ik)}this.ws.binaryType=this.socket.binaryType||LK,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;HH(n,this.supportsBinary,(e=>{const t={};if(!UK&&(n.options&&(t.compress=n.options.compress),this.opts.perMessageDeflate)){const n="string"===typeof e?Buffer.byteLength(e):e.length;n<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{UK?this.ws.send(e):this.ws.send(e,t)}catch(o){}r&&PK((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=_K()),this.supportsBinary||(e.b64=1);const r=EK(e),o=-1!==this.opts.hostname.indexOf(":");return t+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}check(){return!!DK}}const FK={websocket:MK,polling:xK},jK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,zK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function $K(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=jK.exec(e||""),s={},i=14;while(i--)s[zK[i]]=o[i]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=VK(s,s["path"]),s.queryKey=HK(s,s["query"]),s}function VK(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}function HK(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}class KK extends rK{constructor(e,t={}){super(),this.writeBuffer=[],e&&"object"===typeof e&&(t=e,e=null),e?(e=$K(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=$K(t.host).host),cK(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=kK(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=nK,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new FK[e](n)}open(){let e;if(this.opts.rememberUpgrade&&KK.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(t){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),n=!1;KK.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;KK.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function o(){n||(n=!0,c(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,o(),this.emitReserved("upgradeError",n)};function i(){s("transport closed")}function a(){s("socket closed")}function l(e){t&&e.name!==t.name&&o()}const c=()=>{t.removeListener("open",r),t.removeListener("error",s),t.removeListener("close",i),this.off("close",a),this.off("upgrading",l)};t.once("open",r),t.once("error",s),t.once("close",i),this.once("close",a),this.once("upgrading",l),t.open()}onOpen(){if(this.readyState="open",KK.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){const e=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!e)return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const e=this.writeBuffer[n].data;if(e&&(t+=dK(e)),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;n=n||{},n.compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){KK.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}KK.protocol=nK;KK.protocol;function qK(e,t="",n){let r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=$K(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":"),s=o?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const WK="function"===typeof ArrayBuffer,YK=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,GK=Object.prototype.toString,ZK="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===GK.call(Blob),JK="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===GK.call(File);function QK(e){return WK&&(e instanceof ArrayBuffer||YK(e))||ZK&&e instanceof Blob||JK&&e instanceof File}function XK(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(XK(e[t]))return!0;return!1}if(QK(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return XK(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&XK(e[n]))return!0;return!1}function eq(e){const t=[],n=e.data,r=e;return r.data=tq(n,t),r.attachments=t.length,{packet:r,buffers:t}}function tq(e,t){if(!e)return e;if(QK(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=tq(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=tq(e[r],t));return n}return e}function nq(e,t){return e.data=rq(e.data,t),delete e.attachments,e}function rq(e,t){if(!e)return e;if(e&&!0===e._placeholder){const n="number"===typeof e.num&&e.num>=0&&e.num<t.length;if(n)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=rq(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=rq(e[n],t));return e}const oq=5;var sq;(function(e){e[e["CONNECT"]=0]="CONNECT",e[e["DISCONNECT"]=1]="DISCONNECT",e[e["EVENT"]=2]="EVENT",e[e["ACK"]=3]="ACK",e[e["CONNECT_ERROR"]=4]="CONNECT_ERROR",e[e["BINARY_EVENT"]=5]="BINARY_EVENT",e[e["BINARY_ACK"]=6]="BINARY_ACK"})(sq||(sq={}));class iq{constructor(e){this.replacer=e}encode(e){return e.type!==sq.EVENT&&e.type!==sq.ACK||!XK(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===sq.EVENT?sq.BINARY_EVENT:sq.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==sq.BINARY_EVENT&&e.type!==sq.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=eq(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}class aq extends rK{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===sq.BINARY_EVENT;n||t.type===sq.BINARY_ACK?(t.type=n?sq.EVENT:sq.ACK,this.reconstructor=new lq(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!QK(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===sq[n.type])throw new Error("unknown packet type "+n.type);if(n.type===sq.BINARY_EVENT||n.type===sq.BINARY_ACK){const r=t+1;while("-"!==e.charAt(++t)&&t!=e.length);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;while(++t){const n=e.charAt(t);if(","===n)break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;while(++t){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!aq.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case sq.CONNECT:return"object"===typeof t;case sq.DISCONNECT:return void 0===t;case sq.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case sq.EVENT:case sq.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case sq.ACK:case sq.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class lq{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=nq(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function cq(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const uq=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class dq extends rK{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[cq(e,"open",this.onopen.bind(this)),cq(e,"packet",this.onpacket.bind(this)),cq(e,"error",this.onerror.bind(this)),cq(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io["_reconnecting"]||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(uq.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const n={type:sq.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"===typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),n.id=e}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,o=this.flags.volatile&&(!r||!this.connected);return o||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,[null,...e])}}emitWithAck(e,...t){const n=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((r,o)=>{t.push(((e,t)=>n?e?o(e):r(t):r(e))),this.emit(e,...t)}))}_addToQueue(e){let t;"function"===typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n!==this._queue[0])return;const o=null!==e;return o?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:sq.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){const t=e.nsp===this.nsp;if(t)switch(e.type){case sq.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case sq.EVENT:case sq.BINARY_EVENT:this.onevent(e);break;case sq.ACK:case sq.BINARY_ACK:this.onack(e);break;case sq.DISCONNECT:this.ondisconnect();break;case sq.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t);break}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:sq.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io["_destroy"](this)}disconnect(){return this.connected&&this.packet({type:sq.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function hq(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}hq.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},hq.prototype.reset=function(){this.attempts=0},hq.prototype.setMin=function(e){this.ms=e},hq.prototype.setMax=function(e){this.max=e},hq.prototype.setJitter=function(e){this.jitter=e};class pq extends rK{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,cK(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new hq({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||C;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new KK(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=cq(t,"open",(function(){n.onopen(),e&&e()})),o=cq(t,"error",(t=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;0===e&&r();const n=this.setTimeoutFn((()=>{r(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(cq(e,"ping",this.onping.bind(this)),cq(e,"data",this.ondata.bind(this)),cq(e,"error",this.onerror.bind(this)),cq(e,"close",this.onclose.bind(this)),cq(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){PK((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new dq(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){const e=this.nsps[n];if(e.active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const fq={};function gq(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};const n=qK(e,t.path||"/socket.io"),r=n.source,o=n.id,s=n.path,i=fq[o]&&s in fq[o]["nsps"],a=t.forceNew||t["force new connection"]||!1===t.multiplex||i;let l;return a?l=new pq(r,t):(fq[o]||(fq[o]=new pq(r,t)),l=fq[o]),n.query&&!t.query&&(t.query=n.queryKey),l.socket(n.path,t)}Object.assign(gq,{Manager:pq,Socket:dq,io:gq,connect:gq});var mq=n(1914);const yq=65536,vq=5e3;class wq{constructor(e,t){this.label=e.label,this.open=gv(),this.channel=e,this.channel.binaryType="arraybuffer",this.log=t.log,"number"===typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=yq),e.addEventListener("message",(e=>{t.onMessage(e)})),e.addEventListener("bufferedamountlow",(()=>{this.log("stop backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open.resolve()})),e.addEventListener("open",(()=>{this.open.resolve(),t.onOpen()})),e.addEventListener("close",(()=>{t.onClose()})),e.addEventListener("error",(n=>{if("Transport channel closed"===n.error?.message)return this.close();t.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',e.readyState,n.error?.message,n.error?.errorDetail);const r=n.error instanceof Error?n.error:new Error(`datachannel error: ${n.error?.message} ${n.error?.errorDetail}`);t.onError(fe(r,"ERR_DATA_CHANNEL"))}));let n=!1;this.closingInterval=setInterval((()=>{"closing"===e.readyState?(n&&t.onClose(),n=!0):n=!1}),vq)}async send(e){await this.open.promise,this.channel.send(e),this.channel.bufferedAmount>yq&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=gv())}close(){clearInterval(this.closingInterval),this.channel.close()}get bufferedAmount(){return this.channel.bufferedAmount}}var bq=n(5780);const Sq={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};function _q(){if("undefined"===typeof globalThis)throw fe(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");const e={RTCPeerConnection:globalThis.RTCPeerConnection??globalThis.mozRTCPeerConnection??globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription??globalThis.mozRTCSessionDescription??globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate??globalThis.mozRTCIceCandidate??globalThis.webkitRTCIceCandidate};if(null==e.RTCPeerConnection)throw fe(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return e}class Eq extends uM{constructor(e){super(),this.id=e.id??Ti(mq(4),"hex").slice(0,7),this.log=pe(`libp2p:webrtc-peer:${e.logPrefix}:${this.id}`),this.wrtc=e.wrtc??_q(),this.peerConnection=new this.wrtc.RTCPeerConnection(Object.assign({},Sq,e.peerConnectionConfig)),this.closed=!1,this.connected=gv(),this.source=ty(),this.sink=async e=>{if(await this.connected.promise,null==this.channel)throw fe(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");for await(const t of e)await this.channel.send(t);await this.close()}}handleDataChannelEvent(e){const t=e.channel;null!=t?this.channel=new wq(t,{log:this.log,onMessage:e=>{this.source.push(new Uint8Array(e.data))},onOpen:()=>{this.connected.resolve(),this.dispatchEvent(new hM("ready"))},onClose:()=>{this.close().catch((e=>{this.log("error closing connection after channel close",e)}))},onError:e=>{this.close(e).catch((e=>{this.log("error closing connection after channel error",e)}))}}):this.close(fe(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((e=>{this.log("Error closing after event channel was found to be null",e)}))}async close(e){if(this.closed=!0,null==e&&null!=this.channel)while(this.channel.bufferedAmount>0)await bq(100);this.channel?.close(),this.peerConnection.close(),this.source.end(e),this.dispatchEvent(new hM("close"))}}class kq extends uM{constructor(e){super(),this.log=e.log,this.peerConnection=e.peerConnection,this.wrtc=e.wrtc,this.status="idle",this.peerConnection.addEventListener("negotiationneeded",(()=>{this.log("peer connection negotiation needed"),this.handleRenegotiate({type:"renegotiate"}).catch((e=>{this.log.error("could not renegotiate %o",e)}))}))}async handleSignal(e){return this.log('incoming signal "%s"',e.type),"offer"===e.type?await this.handleOffer(e):"answer"===e.type?await this.handleAnswer(e):"candidate"===e.type?await this.handleCandidate(e):"renegotiate"===e.type?await this.handleRenegotiate(e):"goodbye"===e.type?await this.handleGoodye(e):void this.log(`Unknown signal type ${e.type}`)}async handleOffer(e){}async handleAnswer(e){}async handleRenegotiate(e){}async handleGoodye(e){this.peerConnection.close()}async handleCandidate(e){const t=new this.wrtc.RTCIceCandidate(e.candidate);try{await this.peerConnection.addIceCandidate(t)}catch(ik){if(null!=t.address&&!t.address.endsWith(".local"))throw fe(ik,"ERR_ADD_ICE_CANDIDATE");this.log("ignoring unsupported ICE candidate.")}}}const Cq=pe("libp2p:webrtc-peer:receiver");class Iq extends Eq{constructor(e={}){super({...e,logPrefix:"receiver"}),this.handshake=new Aq({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,answerOptions:e.answerOptions}),this.handshake.addEventListener("signal",(e=>this.dispatchEvent(new hM("signal",{detail:e.detail})))),this.peerConnection.addEventListener("datachannel",(e=>{this.handleDataChannelEvent(e)}))}handleSignal(e){this.handshake.handleSignal(e).catch((t=>{this.log("error handling signal %o %o",e,t)}))}}class Aq extends kq{constructor(e){super(e),this.options=e,this.status="idle",this.iceCandidates=[]}async handleRenegotiate(){Cq.trace("renegotiate"),this.dispatchEvent(new hM("signal",{detail:{type:"renegotiate"}}))}async handleOffer(e){await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(e));for(const n of this.iceCandidates)await this.handleCandidate(n);this.iceCandidates=[];const t=await this.peerConnection.createAnswer(this.options.answerOptions);await this.peerConnection.setLocalDescription(t),Cq.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new hM("signal",{detail:this.peerConnection.localDescription??t}))}async handleCandidate(e){null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type?await super.handleCandidate(e):this.iceCandidates.push(e)}}class Tq extends Error{constructor(e){super(e),this.name="TimeoutError"}}class Rq extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const xq=e=>void 0===globalThis.DOMException?new Rq(e):new DOMException(e),Oq=e=>{const t=void 0===e.reason?xq("This operation was aborted."):e.reason;return t instanceof Error?t:xq(t)};function Nq(e,t,n,r){let o;const s=new Promise(((s,i)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if(r={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...r},r.signal){const{signal:e}=r;e.aborted&&i(Oq(e)),e.addEventListener("abort",(()=>{i(Oq(e))}))}o=r.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof n){try{s(n())}catch(a){i(a)}return}const r="string"===typeof n?n:`Promise timed out after ${t} milliseconds`,o=n instanceof Error?n:new Tq(r);"function"===typeof e.cancel&&e.cancel(),i(o)}),t),(async()=>{try{s(await e)}catch(t){i(t)}finally{r.customTimers.clearTimeout.call(void 0,o)}})()}else s(e)}));return s.clear=()=>{clearTimeout(o),o=void 0},s}const Pq=e=>{const t=e.on||e.addListener||e.addEventListener,n=e.off||e.removeListener||e.removeEventListener;if(!t||!n)throw new TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:n.bind(e)}};function Dq(e,t,n){let r;const o=new Promise(((o,s)=>{if(n={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...n},!(n.count>=0)||n.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(n.count))throw new TypeError("The `count` option should be at least 0 or more");const i=[t].flat(),a=[],{addListener:l,removeListener:c}=Pq(e),u=(...e)=>{const t=n.multiArgs?e:e[0];n.filter&&!n.filter(t)||(a.push(t),n.count===a.length&&(r(),o(a)))},d=e=>{r(),s(e)};r=()=>{for(const e of i)c(e,u);for(const e of n.rejectionEvents)c(e,d)};for(const e of i)l(e,u);for(const e of n.rejectionEvents)l(e,d);n.resolveImmediately&&o(a)}));if(o.cancel=r,"number"===typeof n.timeout){const e=Nq(o,n.timeout);return e.cancel=r,e}return o}function Uq(e,t,n){"function"===typeof n&&(n={filter:n}),n={...n,count:1,resolveImmediately:!1};const r=Dq(e,t,n),o=r.then((e=>e[0]));return o.cancel=r.cancel,o}const Lq=pe("libp2p:webrtc-peer:initator"),Bq=1e3;class Mq extends Eq{constructor(e={}){super({...e,logPrefix:"initiator"}),this.handleDataChannelEvent({channel:this.peerConnection.createDataChannel(e.dataChannelLabel??Ti(mq(20),"hex").slice(0,7),e.dataChannelInit)}),this.handshake=new Fq({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,offerOptions:e.offerOptions}),this.handshake.addEventListener("signal",(e=>{this.dispatchEvent(new hM("signal",{detail:e.detail}))}))}handleSignal(e){this.handshake.handleSignal(e).catch((t=>{this.log("error handling signal %o %o",e,t)}))}}class Fq extends kq{constructor(e){super(e),this.options=e,this.status="idle",this.peerConnection.addEventListener("icecandidate",(e=>{if(null==e.candidate)return;const t={type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}};Lq.trace("create candidate",t),this.dispatchEvent(new hM("signal",{detail:t})),this.dispatchEvent(new hM("ice-candidate"))}))}async handleRenegotiate(){if("negotiating"===this.status)return void this.log("already negotiating, queueing");this.status="negotiating";const e=await this.peerConnection.createOffer(this.options.offerOptions);await this.peerConnection.setLocalDescription(e),await Uq(this,"ice-candidate"),await bq(Bq),Lq.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new hM("signal",{detail:this.peerConnection.localDescription??e}))}async handleAnswer(e){Lq.trace("handle answer",e),await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(e)),this.status="idle"}}const jq=pe("libp2p:webrtc-star:socket");function zq(e,t){const{sink:n,source:r}=e,o={remoteAddr:t.remoteAddr,async sink(e){null!=t.signal&&(e=JF(e,t.signal));try{await n(e)}catch(ik){"aborted"!==ik.type&&jq.error(ik)}},source:null!=t.signal?JF(r,t.signal):r,timeline:{open:Date.now()},async close(){if(e.closed)return;const t=Date.now(),n=setTimeout((()=>{if(null!=o.remoteAddr){const{host:e,port:n}=o.remoteAddr.toOptions();jq("timeout closing socket to %s:%s after %dms, destroying it manually",e,n,Date.now()-t)}e.closed||e.close().catch((e=>{jq.error("could not close socket",e)}))}),UH);try{await e.close()}finally{clearTimeout(n)}}};return e.addEventListener("close",(()=>{null==o.timeline.close&&(o.timeline.close=Date.now())}),{once:!0}),o}function $q(e){const t=e.toString().split("/"),n=e.protos()[1].name,r=e.protos()[2].name,o=e.stringTuples()[1][1];if("tcp"!==n||"ws"!==r&&"wss"!==r)throw new Error(`invalid multiaddr: ${e.toString()}`);if(!Oa(e))return`http://${t[2]}:${t[4]}`;if("ws"===r)return`http://${t[2]}${null==o||"80"===o?"":`:${o}`}`;if("wss"===r)return`https://${t[2]}${null==o||"443"===o?"":`:${o}`}`;throw new Error("invalid multiaddr: "+e.toString())}function Vq(e){const t="/libp2p-webrtc-star";if(e.startsWith(t)){e=e.substring(t.length,e.length);let n=Da(e);const r=n.stringTuples().filter((e=>421===e[0]))[0];if(null==r[1])throw new Error("invalid multiaddr: "+e);n=n.decapsulate("p2p"),n=n.encapsulate("/p2p-webrtc-star"),n=n.encapsulate(`/p2p/${r[1]}`),e=n.toString()}return e}const Hq=pe("libp2p:webrtc-star:listener"),Kq={transports:["websocket"],path:"/socket.io-next/"};class qq extends uM{constructor(e,t,n,r,o){super(),this.signallingAddr=t,this.socket=gq(e,Kq),this.connections=[],this.channels=new Map,this.pendingSignals=new Map,this.upgrader=n,this.handler=r,this.channelOptions=o,this.handleWsHandshake=this.handleWsHandshake.bind(this);let s=!1;this.socket.on("connect_error",(e=>{s&&"TransportError"===e.type||this.dispatchEvent(new hM("error",{detail:e}))})),this.socket.on("error",(e=>{this.dispatchEvent(new hM("error",{detail:e}))})),this.socket.on("ws-handshake",this.handleWsHandshake),this.socket.on("ws-peer",(e=>{this.dispatchEvent(new hM("peer",{detail:e}))})),this.socket.on("connect",(()=>{this.socket.emit("ss-join",this.signallingAddr.toString()),s&&this.dispatchEvent(new hM("reconnect"))})),this.socket.once("connect",(()=>{s=!0,this.dispatchEvent(new hM("listening"))})),this.socket.on("disconnect",(()=>{this.dispatchEvent(new hM("disconnect"))}))}_createChannel(e,t,n){const r={...this.channelOptions},o=new Iq(r),s=e=>{const t=e.detail;Hq.error("incoming connection errored",t)};return o.addEventListener("error",s),o.addEventListener("close",(()=>{o.removeEventListener("error",s)}),{once:!0}),o.addEventListener("signal",(r=>{const o=r.detail;this.socket.emit("ss-handshake",{intentId:e,srcMultiaddr:t,dstMultiaddr:n,answer:!0,signal:o})})),o.addEventListener("ready",(()=>{const t=zq(o,{remoteAddr:this.signallingAddr});Hq("new inbound connection %s",t.remoteAddr);try{this.upgrader.upgradeInbound(t).then((n=>{Hq("inbound connection %s upgraded",t.remoteAddr),this.connections.push(t);const r=()=>{this.connections=this.connections.filter((e=>e!==t)),this.channels.delete(e),this.pendingSignals.delete(e)};o.addEventListener("close",r,{once:!0}),this.dispatchEvent(new hM("connection",{detail:n})),this.handler(n)})).catch((e=>{Hq.error("inbound connection failed to upgrade",e),t.close().catch((e=>{Hq.error("inbound connection failed to close after failing to upgrade",e)}))}))}catch(ik){Hq.error("inbound connection failed to upgrade",ik),t.close().catch((e=>{Hq.error("inbound connection failed to close after failing to upgrade",e)}))}}),{once:!0}),o}handleWsHandshake(e){if(Hq('incoming handshake. signal type "%s" is answer %s',e.signal.type,e.answer),!0===e.answer||null!=e.err||null==e.intentId)return;const t=e.intentId;let n=this.pendingSignals.get(t);null==n&&(n=[],this.pendingSignals.set(t,n)),n.push(e);let r=this.channels.get(t);if(null==r){if("offer"!==e.signal.type)return void Hq("handshake is not an offer and channel does not exist, buffering until we receive an offer");Hq("creating new channel to handle offer handshake"),r=this._createChannel(e.intentId,e.srcMultiaddr,e.dstMultiaddr),this.channels.set(t,r)}else Hq("channel already exists, using it to handle handshake");while(n.length>0){const e=n.shift();null!=e?.signal&&r.handleSignal(e.signal)}}async close(){this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),await Promise.all([...this.connections.map((async e=>await e.close())),...Array.from(this.channels.values()).map((async e=>await e.close()))]),this.dispatchEvent(new hM("close"))}}class Wq extends uM{constructor(e,t,n,r,o){super(),this.upgrader=e,this.handler=t,this.peerId=n,this.transport=r,this.options=o}async listen(e){if(null!=this.listeningAddr)throw fe(new Error("listener already in use"),"ERR_ALREADY_LISTENING");const t=gv();let n;this.listeningAddr=e,n=e.protoCodes().includes(PH)?e:e.encapsulate(`/p2p/${this.peerId.toString()}`);const r=this.signallingUrl=$q(e);Hq("connecting to signalling server on: %s",this.signallingUrl);const o=new qq(this.signallingUrl,n,this.upgrader,this.handler,this.options.channelOptions);return o.addEventListener("error",(e=>{const n=e.detail;Hq("error connecting to signalling server %o",n),o.close().catch((e=>{Hq.error("error closing server after error",e)})),t.reject(n)})),o.addEventListener("listening",(()=>{Hq("connected to signalling server"),this.dispatchEvent(new hM("listening")),t.resolve()})),o.addEventListener("peer",(e=>{this.transport.peerDiscovered(e.detail)})),o.addEventListener("connection",(t=>{const n=t.detail;if(null==n.remoteAddr)try{n.remoteAddr=e.decapsulateCode(PH).encapsulate(`/p2p/${n.remotePeer.toString()}`)}catch(ik){Hq.error("could not determine remote address",ik)}this.dispatchEvent(new hM("connection",{detail:n}))})),o.addEventListener("disconnect",(()=>{this.transport.sigServers.delete(r)})),o.addEventListener("reconnect",(()=>{this.transport.sigServers.set(r,o)})),this.transport.sigServers.set(this.signallingUrl,o),await t.promise}async close(){if(null!=this.signallingUrl){const e=this.transport.sigServers.get(this.signallingUrl);null!=e&&(await e.close(),this.transport.sigServers.delete(this.signallingUrl))}this.dispatchEvent(new hM("close")),this.listeningAddr=void 0}getAddrs(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}function Yq(e,t,n,r,o){return new Wq(e,t,n,r,o)}const Gq=Symbol.for("@libp2p/transport");var Zq;(function(e){e[e["FATAL_ALL"]=0]="FATAL_ALL",e[e["NO_FATAL"]=1]="NO_FATAL"})(Zq||(Zq={}));const Jq=Symbol.for("@libp2p/peer-discovery");const Qq="RTCPeerConnection"in globalThis,Xq=pe("libp2p:webrtc-star"),eW=()=>{};class tW extends uM{constructor(){super(...arguments),this.started=!1}get[Jq](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star-discovery"}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}dispatchEvent(e){return!!this.isStarted()&&super.dispatchEvent(e)}}class nW{constructor(e){null!=e?.wrtc&&(this.wrtc=e.wrtc),this.sigServers=new Map,this._discovery=new tW,this.discovery=()=>this._discovery,this.peerDiscovered=this.peerDiscovered.bind(this)}get[Gq](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star"}async dial(e,t){const n=await this._connect(e,t),r=zq(n,{remoteAddr:e,signal:t.signal});Xq("new outbound connection %s",r.remoteAddr);const o=await t.upgrader.upgradeOutbound(r);return Xq("outbound connection %s upgraded",r.remoteAddr),o}async _connect(e,t){if(!0===t.signal?.aborted)throw new GF;const n={...t.channelOptions??{}};null!=this.wrtc&&(n.wrtc=this.wrtc);const r=e.toOptions(),o=Ti(mq(36),"hex");return await new Promise(((s,i)=>{const a=this.sigServers.get($q(e));if(null==a?.socket)return i(fe(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let l=!1;Xq("dialing %s:%s",r.host,r.port);const c=new Mq(n),u=e=>{const t=e.detail;if(!l){const e=`connection error ${r.host}:${r.port}: ${t.message}`;Xq.error(e),p(t)}},d=()=>{l=!0,Xq("connection opened %s:%s",r.host,r.port),p()},h=()=>{Xq.error("connection aborted %s:%s",r.host,r.port),c.close().finally((()=>{p(new GF)}))},p=e=>{c.removeEventListener("ready",d),t.signal?.removeEventListener("abort",h),null==e?s(c):i(e)};c.addEventListener("ready",d,{once:!0}),c.addEventListener("close",(()=>{c.removeEventListener("error",u)})),t.signal?.addEventListener("abort",h),c.addEventListener("signal",(t=>{const n=t.detail;a.socket.emit("ss-handshake",{intentId:o,srcMultiaddr:a.signallingAddr.toString(),dstMultiaddr:e.toString(),signal:n})})),a.socket.on("ws-handshake",(e=>{e.intentId===o&&null!=e.err&&c.close().finally((()=>{i(fe(new Error(e.err),"ERR_SIGNALLING_FAILED"))})),e.intentId!==o||null==e.answer||c.closed||c.handleSignal(e.signal)}))}))}createListener(e){if(!Qq&&null==this.wrtc)throw fe(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");if(e.channelOptions=e.channelOptions??{},null!=this.wrtc&&(e.channelOptions.wrtc=this.wrtc),null==this.peerId)throw fe(new Error("PeerId not set"),"ERR_MISSING_PEER_ID");return Yq(e.upgrader,e.handler??eW,this.peerId,this,e)}filter(e){return e=Array.isArray(e)?e:[e],e.filter((e=>!e.protoCodes().includes(DH)&&Jl.matches(e)))}peerDiscovered(e){Xq("peer discovered: %s",e),e=Vq(e);const t=Da(e),n=t.getPeerId();if(null==n)return;const r=hd(n);this._discovery.dispatchEvent(new hM("peer",{detail:{id:r,multiaddrs:[t],protocols:[]}}))}}function rW(e={}){const t=new nW(e);return{transport:e=>(t.peerId=e.peerId,t),discovery:t.discovery}}function oW(){const e=rW(),t={transports:[e.transport],peerDiscovery:[e.discovery],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!1}};return t}function sW(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}var iW,aW;async function*lW(e,t){yield*vv(e,(async e=>(await t.addressBook.add(e.id,e.multiaddrs),e)))}function cW(e){const t=new Set;return Zm(e,(e=>!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)))}async function*uW(e,t=1){let n=0;for await(const r of e)n++,yield r;if(n<t)throw fe(new Error("not found"),"NOT_FOUND")}(function(e){e["NOT_STARTED_YET"]="The libp2p node is not started yet",e["DHT_DISABLED"]="DHT is not available",e["PUBSUB_DISABLED"]="PubSub is not available",e["CONN_ENCRYPTION_REQUIRED"]="At least one connection encryption module is required",e["ERR_TRANSPORTS_REQUIRED"]="At least one transport module is required",e["ERR_PROTECTOR_REQUIRED"]="Private network is enforced, but no protector was provided",e["NOT_FOUND"]="Not found"})(iW||(iW={})),function(e){e["DHT_DISABLED"]="ERR_DHT_DISABLED",e["ERR_PUBSUB_DISABLED"]="ERR_PUBSUB_DISABLED",e["PUBSUB_NOT_STARTED"]="ERR_PUBSUB_NOT_STARTED",e["DHT_NOT_STARTED"]="ERR_DHT_NOT_STARTED",e["CONN_ENCRYPTION_REQUIRED"]="ERR_CONN_ENCRYPTION_REQUIRED",e["ERR_TRANSPORTS_REQUIRED"]="ERR_TRANSPORTS_REQUIRED",e["ERR_PROTECTOR_REQUIRED"]="ERR_PROTECTOR_REQUIRED",e["ERR_PEER_DIAL_INTERCEPTED"]="ERR_PEER_DIAL_INTERCEPTED",e["ERR_CONNECTION_INTERCEPTED"]="ERR_CONNECTION_INTERCEPTED",e["ERR_INVALID_PROTOCOLS_FOR_STREAM"]="ERR_INVALID_PROTOCOLS_FOR_STREAM",e["ERR_CONNECTION_ENDED"]="ERR_CONNECTION_ENDED",e["ERR_CONNECTION_FAILED"]="ERR_CONNECTION_FAILED",e["ERR_NODE_NOT_STARTED"]="ERR_NODE_NOT_STARTED",e["ERR_ALREADY_ABORTED"]="ERR_ALREADY_ABORTED",e["ERR_TOO_MANY_ADDRESSES"]="ERR_TOO_MANY_ADDRESSES",e["ERR_NO_VALID_ADDRESSES"]="ERR_NO_VALID_ADDRESSES",e["ERR_RELAYED_DIAL"]="ERR_RELAYED_DIAL",e["ERR_DIALED_SELF"]="ERR_DIALED_SELF",e["ERR_DISCOVERED_SELF"]="ERR_DISCOVERED_SELF",e["ERR_DUPLICATE_TRANSPORT"]="ERR_DUPLICATE_TRANSPORT",e["ERR_ENCRYPTION_FAILED"]="ERR_ENCRYPTION_FAILED",e["ERR_HOP_REQUEST_FAILED"]="ERR_HOP_REQUEST_FAILED",e["ERR_INVALID_KEY"]="ERR_INVALID_KEY",e["ERR_INVALID_MESSAGE"]="ERR_INVALID_MESSAGE",e["ERR_INVALID_PARAMETERS"]="ERR_INVALID_PARAMETERS",e["ERR_INVALID_PEER"]="ERR_INVALID_PEER",e["ERR_MUXER_UNAVAILABLE"]="ERR_MUXER_UNAVAILABLE",e["ERR_NOT_FOUND"]="ERR_NOT_FOUND",e["ERR_TIMEOUT"]="ERR_TIMEOUT",e["ERR_TRANSPORT_UNAVAILABLE"]="ERR_TRANSPORT_UNAVAILABLE",e["ERR_TRANSPORT_DIAL_FAILED"]="ERR_TRANSPORT_DIAL_FAILED",e["ERR_UNSUPPORTED_PROTOCOL"]="ERR_UNSUPPORTED_PROTOCOL",e["ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED"]="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",e["ERR_INVALID_MULTIADDR"]="ERR_INVALID_MULTIADDR",e["ERR_SIGNATURE_NOT_VALID"]="ERR_SIGNATURE_NOT_VALID",e["ERR_FIND_SELF"]="ERR_FIND_SELF",e["ERR_NO_ROUTERS_AVAILABLE"]="ERR_NO_ROUTERS_AVAILABLE",e["ERR_CONNECTION_NOT_MULTIPLEXED"]="ERR_CONNECTION_NOT_MULTIPLEXED",e["ERR_NO_DIAL_TOKENS"]="ERR_NO_DIAL_TOKENS",e["ERR_KEYCHAIN_REQUIRED"]="ERR_KEYCHAIN_REQUIRED",e["ERR_INVALID_CMS"]="ERR_INVALID_CMS",e["ERR_MISSING_KEYS"]="ERR_MISSING_KEYS",e["ERR_NO_KEY"]="ERR_NO_KEY",e["ERR_INVALID_KEY_NAME"]="ERR_INVALID_KEY_NAME",e["ERR_INVALID_KEY_TYPE"]="ERR_INVALID_KEY_TYPE",e["ERR_KEY_ALREADY_EXISTS"]="ERR_KEY_ALREADY_EXISTS",e["ERR_INVALID_KEY_SIZE"]="ERR_INVALID_KEY_SIZE",e["ERR_KEY_NOT_FOUND"]="ERR_KEY_NOT_FOUND",e["ERR_OLD_KEY_NAME_INVALID"]="ERR_OLD_KEY_NAME_INVALID",e["ERR_NEW_KEY_NAME_INVALID"]="ERR_NEW_KEY_NAME_INVALID",e["ERR_PASSWORD_REQUIRED"]="ERR_PASSWORD_REQUIRED",e["ERR_PEM_REQUIRED"]="ERR_PEM_REQUIRED",e["ERR_CANNOT_READ_KEY"]="ERR_CANNOT_READ_KEY",e["ERR_MISSING_PRIVATE_KEY"]="ERR_MISSING_PRIVATE_KEY",e["ERR_MISSING_PUBLIC_KEY"]="ERR_MISSING_PUBLIC_KEY",e["ERR_INVALID_OLD_PASS_TYPE"]="ERR_INVALID_OLD_PASS_TYPE",e["ERR_INVALID_NEW_PASS_TYPE"]="ERR_INVALID_NEW_PASS_TYPE",e["ERR_INVALID_PASS_LENGTH"]="ERR_INVALID_PASS_LENGTH",e["ERR_NOT_IMPLEMENTED"]="ERR_NOT_IMPLEMENTED",e["ERR_WRONG_PING_ACK"]="ERR_WRONG_PING_ACK",e["ERR_INVALID_RECORD"]="ERR_INVALID_RECORD",e["ERR_ALREADY_SUCCEEDED"]="ERR_ALREADY_SUCCEEDED",e["ERR_NO_HANDLER_FOR_PROTOCOL"]="ERR_NO_HANDLER_FOR_PROTOCOL",e["ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"]="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",e["ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS"]="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",e["ERR_CONNECTION_DENIED"]="ERR_CONNECTION_DENIED"}(aW||(aW={}));var dW=n(7695),hW=n(7187);const pW=pe("libp2p:peer-routing");class fW{constructor(e,t){this.components=e,this.routers=t.routers??[],this.refreshManagerInit=t.refreshManager??{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}isStarted(){return this.started}async start(){this.started||0===this.routers.length||null!=this.timeoutId||!1===this.refreshManagerInit.enabled||(this.timeoutId=(0,dW.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0)}async _findClosestPeersTask(){if(null==this.abortController)try{this.abortController=new yi.TimeoutController(this.refreshManagerInit.timeout??1e4);try{(0,hW.setMaxListeners)?.(1/0,this.abortController.signal)}catch{}await Gm(this.getClosestPeers(this.components.peerId.toBytes(),{signal:this.abortController.signal}))}catch(ik){pW.error(ik)}finally{this.abortController?.clear(),this.abortController=void 0}}async stop(){(0,dW.clearDelayedInterval)(this.timeoutId),this.abortController?.abort(),this.started=!1}async findPeer(e,t){if(0===this.routers.length)throw fe(new Error("No peer routers available"),aW.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.components.peerId.toString())throw fe(new Error("Should not try to find self"),aW.ERR_FIND_SELF);const n=await kv(wv(...this.routers.map((n=>async function*(){try{yield await n.findPeer(e,t)}catch(ik){pW.error(ik)}}()))),(e=>Zm(e,Boolean)),(e=>lW(e,this.components.peerStore)),(async e=>await XT(e)));if(null!=n)return n;throw fe(new Error(iW.NOT_FOUND),aW.ERR_NOT_FOUND)}async*getClosestPeers(e,t){if(0===this.routers.length)throw fe(new Error("No peer routers available"),aW.ERR_NO_ROUTERS_AVAILABLE);yield*kv(wv(...this.routers.map((n=>n.getClosestPeers(e,t)))),(e=>lW(e,this.components.peerStore)),(e=>cW(e)),(e=>uW(e)))}}class gW{constructor(e,t){this.routers=t.routers??[],this.started=!1,this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e,t={}){if(0===this.routers.length)throw fe(new Error("No content this.routers available"),aW.ERR_NO_ROUTERS_AVAILABLE);yield*kv(wv(...this.routers.map((n=>n.findProviders(e,t)))),(e=>lW(e,this.components.peerStore)),(e=>cW(e)),(e=>uW(e)))}async provide(e,t={}){if(0===this.routers.length)throw fe(new Error("No content routers available"),aW.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async n=>await n.provide(e,t))))}async put(e,t,n){if(!this.isStarted())throw fe(new Error(iW.NOT_STARTED_YET),aW.DHT_NOT_STARTED);const r=this.components.dht;null!=r&&await Gm(r.put(e,t,n))}async get(e,t){if(!this.isStarted())throw fe(new Error(iW.NOT_STARTED_YET),aW.DHT_NOT_STARTED);const n=this.components.dht;if(null!=n)for await(const r of n.get(e,t))if("VALUE"===r.name)return r.value;throw fe(new Error(iW.NOT_FOUND),aW.ERR_NOT_FOUND)}async*getMany(e,t,n){if(!this.isStarted())throw fe(new Error(iW.NOT_STARTED_YET),aW.DHT_NOT_STARTED);if(null==t||0===t)return;let r=0;const o=this.components.dht;if(null!=o)for await(const s of o.get(e,n))if("VALUE"===s.name&&(yield{from:s.from,val:s.value},r++,r===t))break;if(0===r)throw fe(new Error(iW.NOT_FOUND),aW.ERR_NOT_FOUND)}}const mW=e=>e;class yW extends uM{constructor(e,t){super();const{listen:n=[],announce:r=[]}=t;this.components=e,this.listen=n.map((e=>e.toString())),this.announce=new Set(r.map((e=>e.toString()))),this.observed=new Set,this.announceFilter=t.announceFilter??mW}getListenAddrs(){return Array.from(this.listen).map((e=>Da(e)))}getAnnounceAddrs(){return Array.from(this.announce).map((e=>Da(e)))}getObservedAddrs(){return Array.from(this.observed).map((e=>Da(e)))}confirmObservedAddr(e){}removeObservedAddr(e){}addObservedAddr(e){let t=Da(e);const n=t.getPeerId();if(null!=n){const e=hd(n);e.equals(this.components.peerId)&&(t=t.decapsulate(Da(`/p2p/${this.components.peerId.toString()}`)))}const r=t.toString();this.observed.has(r)||(this.observed.add(r),this.dispatchEvent(new hM("change:addresses")))}getAddresses(){let e=this.getAnnounceAddrs().map((e=>e.toString()));0===e.length&&(e=this.components.transportManager.getAddrs().map((e=>e.toString()))),e=e.concat(this.getObservedAddrs().map((e=>e.toString())));const t=new Set(e);return this.announceFilter(Array.from(t).map((e=>Da(e)))).map((e=>!0===e.protos().pop()?.path||e.getPeerId()===this.components.peerId.toString()?e:e.encapsulate(`/p2p/${this.components.peerId.toString()}`)))}}const vW=pe("libp2p:connection-manager:latency-monitor:visibility-change-emitter");class wW extends uM{constructor(){super(),this.hidden="hidden",this.visibilityChange="visibilityChange",null!=globalThis.document&&(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener())}_initializeVisibilityVarNames(){let e="hidden",t="visibilitychange";"undefined"!==typeof globalThis.document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof globalThis.document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!==typeof globalThis.document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof globalThis.document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}_addVisibilityChangeListener(){"undefined"===typeof globalThis.document.addEventListener||"undefined"===typeof document[this.hidden]?vW("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}_handleVisibilityChange(){const e=!1===globalThis.document[this.hidden];vW(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new hM("visibilityChange",{detail:e}))}}const bW=pe("libp2p:connection-manager:latency-monitor");class SW extends uM{constructor(e={}){super();const{latencyCheckIntervalMs:t,dataEmitIntervalMs:n,asyncTestFn:r,latencyRandomPercentage:o}=e;this.latencyCheckIntervalMs=t??500,this.latencyRandomPercentage=o??10,this.latencyCheckMultiply=this.latencyRandomPercentage/100*2*this.latencyCheckIntervalMs,this.latencyCheckSubtract=this.latencyCheckMultiply/2,this.dataEmitIntervalMs=null===n||0===n?void 0:n??5e3,bW("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",this.latencyCheckIntervalMs,this.dataEmitIntervalMs),null!=this.dataEmitIntervalMs?bW("Expecting ~%s events per summary",this.latencyCheckIntervalMs/this.dataEmitIntervalMs):bW("Not emitting summaries"),this.asyncTestFn=r,null!=globalThis.process?.hrtime?(bW("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{const t=this.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!==typeof window&&null!=window.performance?.now?(bW("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):(bW("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this.latencyData=this.initLatencyData()}start(){_W()&&(this.visibilityChangeEmitter=new wW,this.visibilityChangeEmitter.addEventListener("visibilityChange",(e=>{const{detail:t}=e;t?this._startTimers():(this._emitSummary(),this._stopTimers())}))),!0===this.visibilityChangeEmitter?.isVisible()&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"===typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}_stopTimers(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}_emitSummary(){const e=this.getSummary();e.events>0&&this.dispatchEvent(new hM("data",{detail:e}))}getSummary(){const e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),bW.trace("Summary: %O",e),e}checkLatency(){const e=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,t={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+e),startTime:this.now()},n=()=>{if(null==this.checkLatencyID)return;const e=this.getDeltaMS(t.startTime)-t.deltaOffset;this.checkLatency(),this.latencyData.events++,this.latencyData.minMs=Math.min(this.latencyData.minMs,e),this.latencyData.maxMs=Math.max(this.latencyData.maxMs,e),this.latencyData.totalMs+=e,bW.trace("MS: %s Data: %O",e,this.latencyData)};bW.trace("localData: %O",t),this.checkLatencyID=setTimeout((()=>{null!=this.asyncTestFn?(t.deltaOffset=0,t.startTime=this.now(),this.asyncTestFn(n)):(t.deltaOffset-=1,n())}),t.deltaOffset),"function"===typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}function _W(){return"undefined"!==typeof globalThis.window}const EW="OPEN",kW="CLOSING",CW="CLOSED";function IW(e,t){const n={[Symbol.iterator]:()=>n,next:()=>{const n=e.next(),r=n.value;if(!0===n.done||null==r){const e={done:!0,value:void 0};return e}return{done:!1,value:t(r)}}};return n}class AW{constructor(e){if(this.map=new Map,null!=e)for(const[t,n]of e.entries())this.map.set(t.toString(),n)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){this.map.delete(e.toString())}entries(){return IW(this.map.entries(),(e=>[hd(e[0]),e[1]]))}forEach(e){this.map.forEach(((t,n)=>{e(t,hd(n),this)}))}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,t){this.map.set(e.toString(),t)}keys(){return IW(this.map.keys(),(e=>hd(e)))}values(){return this.map.values()}get size(){return this.map.size}}class TW{constructor(e){if(this.set=new Set,null!=e)for(const t of e)this.set.add(t.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return IW(this.set.entries(),(e=>{const t=hd(e[0]);return[t,t]}))}forEach(e){this.set.forEach((t=>{const n=hd(t);e(n,n,this)}))}has(e){return this.set.has(e.toString())}values(){return IW(this.set.values(),(e=>hd(e)))}intersection(e){const t=new TW;for(const n of e)this.has(n)&&t.add(n);return t}difference(e){const t=new TW;for(const n of this)e.has(n)||t.add(n);return t}union(e){const t=new TW;for(const n of e)t.add(n);for(const n of this)t.add(n);return t}}class RW{constructor(e){if(this.list=[],null!=e)for(const t of e)this.list.push(t.toString())}[Symbol.iterator](){return mapIterable(this.list.entries(),(e=>peerIdFromString(e[1])))}concat(e){const t=new RW(this);for(const n of e)t.push(n);return t}entries(){return mapIterable(this.list.entries(),(e=>[e[0],peerIdFromString(e[1])]))}every(e){return this.list.every(((t,n)=>e(peerIdFromString(t),n,this)))}filter(e){const t=new RW;return this.list.forEach(((n,r)=>{const o=peerIdFromString(n);e(o,r,this)&&t.push(o)})),t}find(e){const t=this.list.find(((t,n)=>e(peerIdFromString(t),n,this)));if(null!=t)return peerIdFromString(t)}findIndex(e){return this.list.findIndex(((t,n)=>e(peerIdFromString(t),n,this)))}forEach(e){this.list.forEach(((t,n)=>{e(peerIdFromString(t),n,this)}))}includes(e){return this.list.includes(e.toString())}indexOf(e){return this.list.indexOf(e.toString())}pop(){const e=this.list.pop();if(null!=e)return peerIdFromString(e)}push(...e){for(const t of e)this.list.push(t.toString())}shift(){const e=this.list.shift();if(null!=e)return peerIdFromString(e)}unshift(...e){let t=this.list.length;for(let n=e.length-1;n>-1;n--)this.list.unshift(e[n].toString());return t}get length(){return this.list.length}}const xW="keep-alive";var OW=n(8558);function NW(e){if(td(e))return{peerId:e};if(Na(e)){const t=e.getPeerId();return{multiaddr:e,peerId:null==t?void 0:hd(t)}}throw fe(new Error(`${e} is not a PeerId or a Multiaddr`),aW.ERR_INVALID_MULTIADDR)}const PW=pe("libp2p:connection-manager"),DW={maxConnections:1/0,minConnections:0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,inboundConnectionThreshold:5,maxIncomingPendingConnections:10},UW=6e4;class LW extends uM{constructor(e,t){if(super(),this.opts=T.call({ignoreUndefined:!0},DW,t),this.opts.maxConnections<this.opts.minConnections)throw fe(new Error("Connection Manager maxConnections must be greater than minConnections"),aW.ERR_INVALID_PARAMETERS);PW("options: %o",this.opts),this.components=e,this.connections=new Map,this.started=!1,null!=t.maxEventLoopDelay&&t.maxEventLoopDelay>0&&t.maxEventLoopDelay!==1/0&&(this.latencyMonitor=new SW({latencyCheckIntervalMs:t.pollInterval,dataEmitIntervalMs:t.pollInterval}));try{(0,hW.setMaxListeners)?.(1/0,this)}catch{}this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.startupReconnectTimeout=t.startupReconnectTimeout??UW,this.dialTimeout=t.dialTimeout??3e4,this.allow=(t.allow??[]).map((e=>Da(e))),this.deny=(t.deny??[]).map((e=>Da(e))),this.inboundConnectionRateLimiter=new OW.RateLimiterMemory({points:this.opts.inboundConnectionThreshold,duration:1}),this.incomingPendingConnections=0}isStarted(){return this.started}async start(){this.components.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const e={inbound:0,outbound:0};for(const t of this.connections.values())for(const n of t)"inbound"===n.stat.direction?e.inbound++:e.outbound++;return e}}),this.components.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const e={};for(const t of this.connections.values())for(const n of t)for(const t of n.streams){const n=`${t.stat.direction} ${t.stat.protocol??"unnegotiated"}`;e[n]=(e[n]??0)+1}return e}}),this.components.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const e={};for(const n of this.connections.values())for(const t of n){const n={};for(const e of t.streams){const t=`${e.stat.direction} ${e.stat.protocol??"unnegotiated"}`;n[t]=(n[t]??0)+1}for(const[t,r]of Object.entries(n))e[t]=e[t]??[],e[t].push(r)}const t={};for(let[n,r]of Object.entries(e)){r=r.sort(((e,t)=>e-t));const e=Math.floor(.9*r.length);t[n]=r[e]}return t}}),this.latencyMonitor?.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor?.addEventListener("data",this._onLatencyMeasure),this.started=!0,PW("started")}async afterStart(){this.components.upgrader.addEventListener("connection",this.onConnect),this.components.upgrader.addEventListener("connectionEnd",this.onDisconnect),Promise.resolve().then((async()=>{const e=[];for(const t of await this.components.peerStore.all()){const n=await this.components.peerStore.getTags(t.id),r=n.filter((e=>e.name===xW)).length>0;r&&e.push(t.id)}this.connectOnStartupController?.clear(),this.connectOnStartupController=new yi.TimeoutController(this.startupReconnectTimeout);try{(0,hW.setMaxListeners)?.(1/0,this.connectOnStartupController.signal)}catch{}await Promise.all(e.map((async e=>{await this.openConnection(e,{signal:this.connectOnStartupController?.signal}).catch((e=>{PW.error(e)}))})))})).catch((e=>{PW.error(e)})).finally((()=>{this.connectOnStartupController?.clear()}))}async beforeStop(){this.connectOnStartupController?.abort(),this.components.upgrader.removeEventListener("connection",this.onConnect),this.components.upgrader.removeEventListener("connectionEnd",this.onDisconnect)}async stop(){this.latencyMonitor?.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor?.stop(),this.started=!1,await this._close(),PW("stopped")}async _close(){const e=[];for(const t of this.connections.values())for(const n of t)e.push((async()=>{try{await n.close()}catch(ik){PW.error(ik)}})());PW("closing %d connections",e.length),await Promise.all(e),this.connections.clear()}onConnect(e){this._onConnect(e).catch((e=>{PW.error(e)}))}async _onConnect(e){const{detail:t}=e;if(!this.started)return void await t.close();const n=t.remotePeer,r=n.toString(),o=this.connections.get(r);null!=o?o.push(t):this.connections.set(r,[t]),null!=n.publicKey&&await this.components.peerStore.keyBook.set(n,n.publicKey);const s=this.getConnections().length,i=s-this.opts.maxConnections;await this._checkMaxLimit("maxConnections",s,i),this.dispatchEvent(new hM("peer:connect",{detail:t}))}onDisconnect(e){const{detail:t}=e;if(!this.started)return;const n=t.remotePeer.toString();let r=this.connections.get(n);null!=r&&r.length>1?(r=r.filter((e=>e.id!==t.id)),this.connections.set(n,r)):null!=r&&(this.connections.delete(n),this.dispatchEvent(new hM("peer:disconnect",{detail:t})))}getConnections(e){if(null!=e)return this.connections.get(e.toString())??[];let t=[];for(const n of this.connections.values())t=t.concat(n);return t}async openConnection(e,t={}){const{peerId:n,multiaddr:r}=NW(e);if(null==n&&null==r)throw fe(new TypeError("Can only open connections to PeerIds or Multiaddrs"),aW.ERR_INVALID_PARAMETERS);if(null!=n){PW("dial to",n);const e=this.getConnections(n);if(e.length>0)return PW("had an existing connection to %p",n),e[0]}let o;if(null==t?.signal){o=new yi.TimeoutController(this.dialTimeout),t.signal=o.signal;try{(0,hW.setMaxListeners)?.(1/0,o.signal)}catch{}}try{const n=await this.components.dialer.dial(e,t);let r=this.connections.get(n.remotePeer.toString());null==r&&(r=[],this.connections.set(n.remotePeer.toString(),r));let o=!1;for(const e of r)e.id===n.id&&(o=!0);return o||r.push(n),n}finally{null!=o&&o.clear()}}async closeConnections(e){const t=this.connections.get(e.toString())??[];await Promise.all(t.map((async e=>await e.close())))}getAll(e){if(!td(e))throw fe(new Error("peerId must be an instance of peer-id"),aW.ERR_INVALID_PARAMETERS);const t=e.toString(),n=this.connections.get(t);return null!=n?n.filter((e=>e.stat.status===EW)):[]}_onLatencyMeasure(e){const{detail:t}=e;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch((e=>{PW.error(e)}))}async _checkMaxLimit(e,t,n=1){const r=this.opts[e];null!=r?(PW.trace("checking limit of %s. current value: %d of %d",e,t,r),t>r&&(PW("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)",this.components.peerId,e,t,r,n),await this._pruneConnections(n))):PW.trace("limit %s was not set so it cannot be applied",e)}async _pruneConnections(e){const t=this.getConnections(),n=new AW;for(const s of t){const e=s.remotePeer;if(n.has(e))continue;const t=await this.components.peerStore.getTags(e);n.set(e,t.reduce(((e,t)=>e+t.value),0))}const r=t.sort(((e,t)=>{const r=n.get(e.remotePeer)??0,o=n.get(t.remotePeer)??0;if(r>o)return 1;if(r<o)return-1;const s=e.stat.timeline.open,i=t.stat.timeline.open;return s<i?1:s>i?-1:0})),o=[];for(const s of r)if(PW("too many connections open - closing a connection to %p",s.remotePeer),o.push(s),o.length===e)break;await Promise.all(o.map((async e=>{try{await e.close()}catch(ik){PW.error(ik)}this.onDisconnect(new hM("connectionEnd",{detail:e}))})))}async acceptIncomingConnection(e){const t=this.deny.some((t=>e.remoteAddr.toString().startsWith(t.toString())));if(t)return PW("connection from %s refused - connection remote address was in deny list",e.remoteAddr),!1;const n=this.allow.some((t=>e.remoteAddr.toString().startsWith(t.toString())));if(n)return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.opts.maxIncomingPendingConnections)return PW("connection from %s refused - incomingPendingConnections exceeded by peer %s",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){const t=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(t,1)}catch{return PW("connection from %s refused - inboundConnectionThreshold exceeded by host %s",t,e.remoteAddr),!1}}return this.getConnections().length<this.opts.maxConnections?(this.incomingPendingConnections++,!0):(PW("connection from %s refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}}var BW=n(2916);const MW=pe("libp2p:connection-manager:auto-dialler"),FW={enabled:!0,minConnections:0,autoDialInterval:1e4};class jW{constructor(e,t){this.components=e,this.options=T.call({ignoreUndefined:!0},FW,t),this.running=!1,this._autoDial=this._autoDial.bind(this),MW("options: %j",this.options)}isStarted(){return this.running}async start(){this.options.enabled?(this.running=!0,this._autoDial().catch((e=>{MW.error("could start autodial",e)})),MW("started")):MW("not enabled")}async stop(){this.options.enabled?(this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),MW("stopped")):MW("not enabled")}async _autoDial(){null!=this.autoDialTimeout&&this.autoDialTimeout.clear();const e=this.options.minConnections;if(this.components.connectionManager.getConnections().length>=e)return void(this.autoDialTimeout=BW(this._autoDial,this.options.autoDialInterval));const t=await this.components.peerStore.all(),n=await kv(t.sort((()=>Math.random()>.5?1:-1)),(e=>Zm(e,(e=>!e.id.equals(this.components.peerId)))),(e=>bL(e,((e,t)=>t.protocols.length>e.protocols.length||null!=t.id.publicKey&&null==e.id.publicKey?1:-1))),(async e=>await Wm(e)));for(let r=0;this.running&&r<n.length&&this.components.connectionManager.getConnections().length<e;r++){if(!this.running)return;const e=n[r];if(0===this.components.connectionManager.getConnections(e.id).length){MW("connecting to a peerStore stored peer %p",e.id);try{await this.components.connectionManager.openConnection(e.id)}catch(ik){MW.error("could not connect to peerStore stored peer",ik)}}}this.running&&(this.autoDialTimeout=BW(this._autoDial,this.options.autoDialInterval))}}function zW(){Fd._configure(),Bd._configure(Md),jd._configure(zd)}zW();const $W=["uint64","int64","sint64","fixed64","sfixed64"];function VW(e){for(const t of $W){if(null==e[t])continue;const n=e[t];e[t]=function(){return BigInt(n.call(this).toString())}}return e}function HW(e){return VW(new Bd(e))}function KW(e){for(const t of $W){if(null==e[t])continue;const n=e[t];e[t]=function(e){return n.call(this,e.toString())}}return e}function qW(){return KW(jd.create())}function WW(e,t){const n=HW(e instanceof Uint8Array?e:e.subarray());return t.decode(n)}function YW(e,t){const n=qW();return t.encode(e,n,{lengthDelimited:!1}),n.finish()}var GW,ZW;function JW(e,t,n,r){return{name:e,type:t,encode:n,decode:r}}function QW(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}const n=function(e,n){const r=t(e);n.int32(r)},r=function(e){const n=e.int32();return t(n)};return JW("enum",GW.VARINT,n,r)}function XW(e,t){return JW("message",GW.LENGTH_DELIMITED,e,t)}(function(e){e[e["VARINT"]=0]="VARINT",e[e["BIT64"]=1]="BIT64",e[e["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",e[e["START_GROUP"]=3]="START_GROUP",e[e["END_GROUP"]=4]="END_GROUP",e[e["BIT32"]=5]="BIT32"})(GW||(GW={})),function(e){let t,n,r,o,s,i;(function(e){e["SUCCESS"]="SUCCESS",e["HOP_SRC_ADDR_TOO_LONG"]="HOP_SRC_ADDR_TOO_LONG",e["HOP_DST_ADDR_TOO_LONG"]="HOP_DST_ADDR_TOO_LONG",e["HOP_SRC_MULTIADDR_INVALID"]="HOP_SRC_MULTIADDR_INVALID",e["HOP_DST_MULTIADDR_INVALID"]="HOP_DST_MULTIADDR_INVALID",e["HOP_NO_CONN_TO_DST"]="HOP_NO_CONN_TO_DST",e["HOP_CANT_DIAL_DST"]="HOP_CANT_DIAL_DST",e["HOP_CANT_OPEN_DST_STREAM"]="HOP_CANT_OPEN_DST_STREAM",e["HOP_CANT_SPEAK_RELAY"]="HOP_CANT_SPEAK_RELAY",e["HOP_CANT_RELAY_TO_SELF"]="HOP_CANT_RELAY_TO_SELF",e["STOP_SRC_ADDR_TOO_LONG"]="STOP_SRC_ADDR_TOO_LONG",e["STOP_DST_ADDR_TOO_LONG"]="STOP_DST_ADDR_TOO_LONG",e["STOP_SRC_MULTIADDR_INVALID"]="STOP_SRC_MULTIADDR_INVALID",e["STOP_DST_MULTIADDR_INVALID"]="STOP_DST_MULTIADDR_INVALID",e["STOP_RELAY_REFUSED"]="STOP_RELAY_REFUSED",e["MALFORMED_MESSAGE"]="MALFORMED_MESSAGE"})(t=e.Status||(e.Status={})),function(e){e[e["SUCCESS"]=100]="SUCCESS",e[e["HOP_SRC_ADDR_TOO_LONG"]=220]="HOP_SRC_ADDR_TOO_LONG",e[e["HOP_DST_ADDR_TOO_LONG"]=221]="HOP_DST_ADDR_TOO_LONG",e[e["HOP_SRC_MULTIADDR_INVALID"]=250]="HOP_SRC_MULTIADDR_INVALID",e[e["HOP_DST_MULTIADDR_INVALID"]=251]="HOP_DST_MULTIADDR_INVALID",e[e["HOP_NO_CONN_TO_DST"]=260]="HOP_NO_CONN_TO_DST",e[e["HOP_CANT_DIAL_DST"]=261]="HOP_CANT_DIAL_DST",e[e["HOP_CANT_OPEN_DST_STREAM"]=262]="HOP_CANT_OPEN_DST_STREAM",e[e["HOP_CANT_SPEAK_RELAY"]=270]="HOP_CANT_SPEAK_RELAY",e[e["HOP_CANT_RELAY_TO_SELF"]=280]="HOP_CANT_RELAY_TO_SELF",e[e["STOP_SRC_ADDR_TOO_LONG"]=320]="STOP_SRC_ADDR_TOO_LONG",e[e["STOP_DST_ADDR_TOO_LONG"]=321]="STOP_DST_ADDR_TOO_LONG",e[e["STOP_SRC_MULTIADDR_INVALID"]=350]="STOP_SRC_MULTIADDR_INVALID",e[e["STOP_DST_MULTIADDR_INVALID"]=351]="STOP_DST_MULTIADDR_INVALID",e[e["STOP_RELAY_REFUSED"]=390]="STOP_RELAY_REFUSED",e[e["MALFORMED_MESSAGE"]=400]="MALFORMED_MESSAGE"}(n||(n={})),function(e){e.codec=()=>QW(n)}(t=e.Status||(e.Status={})),function(e){e["HOP"]="HOP",e["STOP"]="STOP",e["STATUS"]="STATUS",e["CAN_HOP"]="CAN_HOP"}(r=e.Type||(e.Type={})),function(e){e[e["HOP"]=1]="HOP",e[e["STOP"]=2]="STOP",e[e["STATUS"]=3]="STATUS",e[e["CAN_HOP"]=4]="CAN_HOP"}(o||(o={})),function(e){e.codec=()=>QW(o)}(r=e.Type||(e.Type={})),function(e){let t;e.codec=()=>(null==t&&(t=XW(((e,t,n={})=>{if(!1!==n.lengthDelimited&&t.fork(),(!0===n.writeDefaults||null!=e.id&&e.id.byteLength>0)&&(t.uint32(10),t.bytes(e.id)),null!=e.addrs)for(const r of e.addrs)t.uint32(18),t.bytes(r);!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={id:new Uint8Array(0),addrs:[]},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.id=e.bytes();break;case 2:n.addrs.push(e.bytes());break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>YW(t,e.codec()),e.decode=t=>WW(t,e.codec())}(s=e.Peer||(e.Peer={})),e.codec=()=>(null==i&&(i=XW(((t,n,r={})=>{!1!==r.lengthDelimited&&n.fork(),null!=t.type&&(n.uint32(8),e.Type.codec().encode(t.type,n)),null!=t.srcPeer&&(n.uint32(18),e.Peer.codec().encode(t.srcPeer,n,{writeDefaults:!1})),null!=t.dstPeer&&(n.uint32(26),e.Peer.codec().encode(t.dstPeer,n,{writeDefaults:!1})),null!=t.code&&(n.uint32(32),e.Status.codec().encode(t.code,n)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={},o=null==n?t.len:t.pos+n;while(t.pos<o){const n=t.uint32();switch(n>>>3){case 1:r.type=e.Type.codec().decode(t);break;case 2:r.srcPeer=e.Peer.codec().decode(t,t.uint32());break;case 3:r.dstPeer=e.Peer.codec().decode(t,t.uint32());break;case 4:r.code=e.Status.codec().decode(t);break;default:t.skipType(7&n);break}}return r}))),i),e.encode=t=>YW(t,e.codec()),e.decode=t=>WW(t,e.codec())}(ZW||(ZW={}));const eY=pe("libp2p:stream:converter");function tY(e,t={}){const{stream:n,remoteAddr:r}=e,{sink:o,source:s}=n,i=async function*(){for await(const e of s)yield*e}(),a={async sink(e){null!=t.signal&&(e=JF(e,t.signal));try{await o(e),await l()}catch(ik){"aborted"!==ik.type&&eY(ik)}},source:null!=t.signal?JF(i,t.signal):i,remoteAddr:r,timeline:{open:Date.now(),close:void 0},async close(){await o(async function*(){yield new Uint8Array(0)}()),await l()}};async function l(){null==a.timeline.close&&(a.timeline.close=Date.now()),await Promise.resolve()}return a}const nY="/libp2p/circuit/relay/0.1.0";function rY(e){const t=new Map;async function n(n){const r=n.toString().split("/p2p-circuit").find((e=>""!==e)),s=Da(r),i=s.getPeerId();if(null==i)throw new Error("Could not determine relay peer from multiaddr");const a=hd(i);await e.peerStore.addressBook.add(a,[s]);const l=await e.connectionManager.openConnection(a),c=l.remoteAddr.encapsulate("/p2p-circuit");t.set(l.remotePeer.toString(),c),o.dispatchEvent(new hM("listening"))}function r(){const e=[];for(const n of t.values())e.push(n);return e}const o=Object.assign(new uM,{close:async()=>await Promise.resolve(),listen:n,getAddrs:r});return e.connectionManager.addEventListener("peer:disconnect",(e=>{const{detail:n}=e,r=t.delete(n.remotePeer.toString());r&&o.dispatchEvent(new hM("close"))})),o}function oY(e,t){e.write({type:ZW.Type.STATUS,code:t})}function sY(e,t){try{null!=e.dstPeer?.addrs&&e.dstPeer.addrs.forEach((e=>Da(e)))}catch(ik){throw oY(t,e.type===ZW.Type.HOP?ZW.Status.HOP_DST_MULTIADDR_INVALID:ZW.Status.STOP_DST_MULTIADDR_INVALID),ik}try{null!=e.srcPeer?.addrs&&e.srcPeer.addrs.forEach((e=>Da(e)))}catch(ik){throw oY(t,e.type===ZW.Type.HOP?ZW.Status.HOP_SRC_MULTIADDR_INVALID:ZW.Status.STOP_SRC_MULTIADDR_INVALID),ik}}function iY(e){const t=ty(),n=lS(e.source),r=gv();let o;const s=e.sink(async function*(){yield*t;const e=await r.promise;yield*e}());s.catch((e=>{o=e}));const i={sink:async e=>null!=o?await Promise.reject(o):(r.resolve(e),await s),source:n};return{reader:n,writer:t,stream:i,rest:()=>t.end(),write:t.push,read:async()=>{const e=await n.next();if(null!=e.value)return e.value}}}const aY=pe("libp2p:circuit:stream-handler");class lY{constructor(e){const{stream:t,maxLength:n=4096}=e;this.stream=t,this.shake=iY(this.stream),this.decoder=aj.fromReader(this.shake.reader,{maxDataLength:n})}async read(){const e=await this.decoder.next();if(null!=e.value){const t=ZW.decode(e.value);return aY("read message type",t.type),t}aY("read received no value, closing stream"),this.close()}write(e){aY("write message type %s",e.type),this.shake.write(nj.single(ZW.encode(e)))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){aY("closing the stream"),this.rest().sink([]).catch((e=>{aY.error(e)}))}}const cY=pe("libp2p:circuit:stop");function uY(e){const{connection:t,request:n,streamHandler:r}=e;try{sY(n,r)}catch(ik){return void cY.error("invalid stop request via peer %p %o",t.remotePeer,ik)}return cY("stop request is valid"),r.write({type:ZW.Type.STATUS,code:ZW.Status.SUCCESS}),r.rest()}async function dY(e){const{connection:t,request:n,signal:r}=e,o=await t.newStream(nY,{signal:r});cY("starting stop request to %p",t.remotePeer);const s=new lY({stream:o});s.write(n);const i=await s.read();if(null!=i){if(i.code===ZW.Status.SUCCESS)return cY("stop request to %p was successful",t.remotePeer),s.rest();cY("stop request failed with code %d",i.code),s.close()}else s.close()}const hY=pe("libp2p:circuit:hop");async function pY(e){const{connection:t,request:n,streamHandler:r,circuit:o,connectionManager:s}=e;if(!o.hopEnabled())return hY("HOP request received but we are not acting as a relay"),r.end({type:ZW.Type.STATUS,code:ZW.Status.HOP_CANT_SPEAK_RELAY});try{sY(n,r)}catch(ik){return void hY.error("invalid hop request via peer %p %o",t.remotePeer,ik)}if(null==n.dstPeer)return void hY("HOP request received but we do not receive a dstPeer");const i=pd(n.dstPeer.id),a=s.getConnections(i);if(0===a.length&&!o.hopActive())return hY("HOP request received but we are not connected to the destination peer"),r.end({type:ZW.Type.STATUS,code:ZW.Status.HOP_NO_CONN_TO_DST});if(0===a.length)return hY("did not have connection to remote peer"),r.end({type:ZW.Type.STATUS,code:ZW.Status.HOP_NO_CONN_TO_DST});const l={type:ZW.Type.STOP,dstPeer:n.dstPeer,srcPeer:n.srcPeer};let c;try{hY("performing STOP request");const e=await dY({connection:a[0],request:l});if(null==e)throw new Error("Could not stop");c=e}catch(ik){return void hY.error(ik)}hY("hop request from %p is valid",t.remotePeer),r.write({type:ZW.Type.STATUS,code:ZW.Status.SUCCESS});const u=r.rest();return hY("creating related connections"),await kv(u,c,u)}async function fY(e){const{connection:t,request:n,signal:r}=e,o=await t.newStream(nY,{signal:r}),s=new lY({stream:o});s.write(n);const i=await s.read();if(null==i)throw fe(new Error("HOP request had no response"),aW.ERR_HOP_REQUEST_FAILED);if(i.code===ZW.Status.SUCCESS)return hY("hop request was successful"),s.rest();throw hY("hop request failed with code %d, closing stream",i.code),s.close(),fe(new Error(`HOP request failed with code "${i.code??"unknown"}"`),aW.ERR_HOP_REQUEST_FAILED)}async function gY(e){const{connection:t,signal:n}=e,r=await t.newStream(nY,{signal:n}),o=new lY({stream:r});o.write({type:ZW.Type.CAN_HOP});const s=await o.read();return await o.close(),null!=s&&s.code===ZW.Status.SUCCESS}function mY(e){const{connection:t,streamHandler:n,circuit:r}=e,o=r.hopEnabled();hY("can hop (%s) request from %p",o,t.remotePeer),n.end({type:ZW.Type.STATUS,code:o?ZW.Status.SUCCESS:ZW.Status.HOP_CANT_SPEAK_RELAY})}const yY=pe("libp2p:circuit");class vY{constructor(e,t){this._init=t,this.components=e,this._started=!1}isStarted(){return this._started}async start(){this._started||(this._started=!0,await this.components.registrar.handle(nY,(e=>{this._onProtocol(e).catch((e=>{yY.error(e)}))}),{...this._init}).catch((e=>{yY.error(e)})))}async stop(){await this.components.registrar.unhandle(nY)}hopEnabled(){return!0}hopActive(){return!0}get[Gq](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(e){const{connection:t,stream:n}=e,r=new yi.TimeoutController(this._init.hop.timeout);try{(0,hW.setMaxListeners)?.(1/0,r.signal)}catch{}try{const e=XF(n,r.signal),o=new lY({stream:{...n,...e}}),s=await o.read();if(null==s)return yY("request was invalid, could not read from stream"),o.write({type:ZW.Type.STATUS,code:ZW.Status.MALFORMED_MESSAGE}),void o.close();let i;switch(s.type){case ZW.Type.CAN_HOP:yY("received CAN_HOP request from %p",t.remotePeer),await mY({circuit:this,connection:t,streamHandler:o});break;case ZW.Type.HOP:yY("received HOP request from %p",t.remotePeer),await pY({connection:t,request:s,streamHandler:o,circuit:this,connectionManager:this.components.connectionManager});break;case ZW.Type.STOP:yY("received STOP request from %p",t.remotePeer),i=await uY({connection:t,request:s,streamHandler:o});break;default:return yY("Request of type %s not supported",s.type),o.write({type:ZW.Type.STATUS,code:ZW.Status.MALFORMED_MESSAGE}),void o.close()}if(null!=i){const e=t.remoteAddr.encapsulate("/p2p-circuit").encapsulate(Da(s.dstPeer?.addrs[0])),n=Da(s.srcPeer?.addrs[0]),r=tY({stream:i,remoteAddr:e,localAddr:n}),o=s.type===ZW.Type.HOP?"relay":"inbound";yY("new %s connection %s",o,r.remoteAddr);const a=await this.components.upgrader.upgradeInbound(r);yY("%s connection %s upgraded",o,r.remoteAddr),null!=this.handler&&this.handler(a)}}finally{r.clear()}}async dial(e,t={}){const n=e.toString().split("/p2p-circuit"),r=Da(n[0]),o=Da(n[n.length-1]),s=r.getPeerId(),i=o.getPeerId();if(null==s||null==i){const e="Circuit relay dial failed as addresses did not have peer id";throw yY.error(e),fe(new Error(e),aW.ERR_RELAYED_DIAL)}const a=hd(s),l=hd(i);let c=!1;const u=this.components.connectionManager.getConnections(a);let d=u[0];null==d&&(await this.components.peerStore.addressBook.add(a,[r]),d=await this.components.connectionManager.openConnection(a,t),c=!0);try{const n=await fY({...t,connection:d,request:{type:ZW.Type.HOP,srcPeer:{id:this.components.peerId.toBytes(),addrs:this.components.addressManager.getAddresses().map((e=>e.bytes))},dstPeer:{id:l.toBytes(),addrs:[Da(o).bytes]}}}),s=r.encapsulate(`/p2p-circuit/p2p/${this.components.peerId.toString()}`),i=tY({stream:n,remoteAddr:e,localAddr:s});return yY("new outbound connection %s",i.remoteAddr),await this.components.upgrader.upgradeOutbound(i)}catch(ik){throw yY.error("Circuit relay dial failed",ik),c&&await d.close(),ik}}createListener(e){return this.handler=e.handler,rY({connectionManager:this.components.connectionManager,peerStore:this.components.peerStore})}filter(e){return e=Array.isArray(e)?e:[e],e.filter((e=>rc.matches(e)))}}async function wY(e){const t=(new TextEncoder).encode(e),n=await Fs.digest(t);return lt.createV0(n)}const bY=6e4,SY=15*bY,_Y=30*bY,EY=290,kY="hop_relay",CY="true",IY="/libp2p/relay";var AY=n(8951);const TY="[a-fA-F\\d:]",RY=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${TY})|(?<=${TY})(?=\\s|$))`:"",xY="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",OY="[a-fA-F\\d]{1,4}",NY=`\n(?:\n(?:${OY}:){7}(?:${OY}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${OY}:){6}(?:${xY}|:${OY}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${OY}:){5}(?::${xY}|(?::${OY}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${OY}:){4}(?:(?::${OY}){0,1}:${xY}|(?::${OY}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${OY}:){3}(?:(?::${OY}){0,2}:${xY}|(?::${OY}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${OY}:){2}(?:(?::${OY}){0,3}:${xY}|(?::${OY}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${OY}:){1}(?:(?::${OY}){0,4}:${xY}|(?::${OY}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${OY}){0,5}:${xY}|(?::${OY}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),PY=new RegExp(`(?:^${xY}$)|(?:^${NY}$)`),DY=new RegExp(`^${xY}$`),UY=new RegExp(`^${NY}$`),LY=e=>e&&e.exact?PY:new RegExp(`(?:${RY(e)}${xY}${RY(e)})|(?:${RY(e)}${NY}${RY(e)})`,"g");LY.v4=e=>e&&e.exact?DY:new RegExp(`${RY(e)}${xY}${RY(e)}`,"g"),LY.v6=e=>e&&e.exact?UY:new RegExp(`${RY(e)}${NY}${RY(e)}`,"g");var BY=LY,MY=n(6512);const{isValid:FY,parse:jY}=MY,zY=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],$Y=zY.map((e=>new AY.Netmask(e)));function VY(e){for(let t of $Y)if(t.contains(e))return!0;return!1}function HY(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}var KY=e=>{if(FY(e)){const t=jY(e);if("ipv4"===t.kind())return VY(t.toNormalizedString());if("ipv6"===t.kind())return HY(e)}else if(Ai(e)&&BY.v6().test(e))return HY(e)},qY=KY;function WY(e){try{const{address:t}=e.nodeAddress();return Boolean(qY(t))}catch{return!0}}function YY(e,t){const n=WY(e.multiaddr),r=WY(t.multiaddr);return n&&!r?1:!n&&r||e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}const GY=pe("libp2p:auto-relay"),ZY=()=>{};class JY{constructor(e,t){this.components=e,this.addressSorter=t.addressSorter??YY,this.maxListeners=t.maxListeners??1,this.listenRelays=new Set,this.onError=t.onError??ZY,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.peerStore.addEventListener("change:protocols",(e=>{this._onProtocolChange(e).catch((e=>{GY.error(e)}))})),this.components.connectionManager.addEventListener("peer:disconnect",this._onPeerDisconnected)}async _onProtocolChange(e){const{peerId:t,protocols:n}=e.detail,r=t.toString(),o=n.find((e=>e===nY));if(null!=o){if(!this.listenRelays.has(r))try{const e=this.components.connectionManager.getConnections(t);if(0===e.length)return;const n=e[0];if(n.remoteAddr.protoCodes().includes(EY))return void GY(`relayed connection to ${r} will not be used to hop on`);const o=await gY({connection:n});o&&(await this.components.peerStore.metadataBook.setValue(t,kY,mi(CY)),await this._addListenRelay(n,r))}catch(ik){this.onError(ik)}}else this.listenRelays.has(r)&&await this._removeListenRelay(r)}_onPeerDisconnected(e){const t=e.detail,n=t.remotePeer,r=n.toString();this.listenRelays.has(r)&&this._removeListenRelay(r).catch((e=>{GY.error(e)}))}async _addListenRelay(e,t){try{if(this.listenRelays.size>=this.maxListeners)return;const n=await kv(await this.components.peerStore.addressBook.get(e.remotePeer),(e=>bL(e,this.addressSorter)),(async e=>await Wm(e))),r=await Promise.all(n.map((async t=>{try{let n=t.multiaddr;return null==n.getPeerId()&&(n=n.encapsulate(`/p2p/${e.remotePeer.toString()}`)),n=n.encapsulate("/p2p-circuit"),await this.components.transportManager.listen([n]),!0}catch(ik){GY.error("error listening on circuit address",ik),this.onError(ik)}return!1})));r.includes(!0)&&this.listenRelays.add(t)}catch(ik){this.onError(ik),this.listenRelays.delete(t)}}async _removeListenRelay(e){this.listenRelays.delete(e)&&await this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this.listenRelays.size>=this.maxListeners)return;const t=[],n=await this.components.peerStore.all();for(const{id:r,metadata:o}of n){const n=r.toString();if(this.listenRelays.has(n))continue;if(e.includes(n))continue;const s=o.get(kY);if(null==s||Ti(s)!==CY)continue;const i=this.components.connectionManager.getConnections(r);if(0!==i.length){if(await this._addListenRelay(i[0],n),this.listenRelays.size>=this.maxListeners)return}else t.push(r)}for(const r of t)if(await this._tryToListenOnRelay(r),this.listenRelays.size>=this.maxListeners)return;try{const e=await wY(IY);for await(const t of this.components.contentRouting.findProviders(e)){if(0===t.multiaddrs.length)continue;const e=t.id;if(!e.equals(this.components.peerId)&&(await this.components.peerStore.addressBook.add(e,t.multiaddrs),await this._tryToListenOnRelay(e),this.listenRelays.size>=this.maxListeners))return}}catch(ik){this.onError(ik)}}async _tryToListenOnRelay(e){try{const t=await this.components.connectionManager.openConnection(e);await this._addListenRelay(t,e.toString())}catch(ik){GY.error("Could not use %p as relay",e,ik),this.onError(ik,`could not connect and listen on known hop relay ${e.toString()}`)}}}const QY=pe("libp2p:relay");class XY{constructor(e,t){this.components=e,this.autoRelay=!1!==t.autoRelay?.enabled?new JY(e,{addressSorter:t.addressSorter,...t.autoRelay}):void 0,this.started=!1,this.init=t,this._advertiseService=this._advertiseService.bind(this)}isStarted(){return this.started}async start(){!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,dW.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0}async stop(){null!=this.timeout&&(0,dW.clearDelayedInterval)(this.timeout),this.started=!1}async _advertiseService(){try{const e=await wY(IY);await this.components.contentRouting.provide(e)}catch(ik){ik.code===aW.ERR_NO_ROUTERS_AVAILABLE?(QY.error("a content router, such as a DHT, must be provided in order to advertise the relay service",ik),await this.stop()):QY.error(ik)}}}var eG=n(202);n(9437),n(5414);const tG=oh.pki,nG=(e,t)=>{const n=tG.rsa.setPublicKey(t.n,t.e),r=tG.createCertificate();r.publicKey=n,r.serialNumber="01",r.validity.notBefore=new Date,r.validity.notAfter=new Date,r.validity.notAfter.setFullYear(r.validity.notBefore.getFullYear()+10);const o=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return r.setSubject(o),r.setIssuer(o),r.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),r.sign(t),r};async function rG(e,t){const n=e.map(t),r=await Promise.all(n),o=r.findIndex((e=>e));return e[o]}const oG=pe("libp2p:keychain:cms"),sG=new WeakMap;class iG{constructor(e,t){if(null==e)throw fe(new Error("keychain is required"),aW.ERR_KEYCHAIN_REQUIRED);this.keychain=e,sG.set(this,{dek:t})}async encrypt(e,t){if(!(t instanceof Uint8Array))throw fe(new Error("Plain data must be a Uint8Array"),aW.ERR_INVALID_PARAMETERS);const n=await this.keychain.findKeyByName(e),r=await this.keychain.getPrivateKey(e),o=sG.get(this);if(null==o)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const s=o.dek,i=oh.pki.decryptRsaPrivateKey(r,s),a=await nG(n,i),l=oh.pkcs7.createEnvelopedData();l.addRecipient(a),l.content=oh.util.createBuffer(t),l.encrypt();const c=oh.asn1.toDer(l.toAsn1()).getBytes();return mi(c,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw fe(new Error("CMS data is required"),aW.ERR_INVALID_PARAMETERS);let t;try{const n=oh.util.createBuffer(Ti(e,"ascii")),r=oh.asn1.fromDer(n);t=oh.pkcs7.messageFromAsn1(r)}catch(ik){throw oG.error(ik),fe(new Error("Invalid CMS"),aW.ERR_INVALID_CMS)}const n=t.recipients.filter((e=>e.issuer.find((e=>"O"===e.shortName&&"ipfs"===e.value)))).filter((e=>e.issuer.find((e=>"CN"===e.shortName)))).map((e=>({recipient:e,keyId:e.issuer.find((e=>"CN"===e.shortName)).value}))),r=await rG(n,(async e=>{try{const t=await this.keychain.findKeyById(e.keyId);if(null!=t)return!0}catch(ik){return!1}return!1}));if(null==r){const e=n.map((e=>e.keyId));throw fe(new Error(`Decryption needs one of the key(s): ${e.join(", ")}`),aW.ERR_MISSING_KEYS,{missingKeys:e})}const o=await this.keychain.findKeyById(r.keyId);if(null==o)throw fe(new Error("No key available to decrypto"),aW.ERR_NO_KEY);const s=await this.keychain.getPrivateKey(o.name),i=sG.get(this);if(null==i)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const a=i.dek,l=oh.pki.decryptRsaPrivateKey(s,a);return t.decrypt(r.recipient,l),mi(t.content.getBytes(),"ascii")}}const aG=pe("libp2p:keychain"),lG="/pkcs8/",cG="/info/",uG=new WeakMap,dG={minKeyLength:14,minSaltLength:16,minIterationCount:1e3},hG={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function pG(e){return null!=e&&("string"===typeof e&&(e===eG(e.trim())&&e.length>0))}async function fG(){const e=200,t=1e3,n=Math.random()*(t-e)+e;await new Promise((e=>setTimeout(e,n)))}function gG(e){return new Tc(lG+e)}function mG(e){return new Tc(cG+e)}class yG{constructor(e,t){if(this.components=e,this.init=T(hG,t),null!=this.init.pass&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(null!=this.init.dek?.keyLength&&this.init.dek.keyLength<dG.minKeyLength)throw new Error(`dek.keyLength must be least ${dG.minKeyLength} bytes`);if(null!=this.init.dek?.salt?.length&&this.init.dek.salt.length<dG.minSaltLength)throw new Error(`dek.saltLength must be least ${dG.minSaltLength} bytes`);if(null!=this.init.dek?.iterationCount&&this.init.dek.iterationCount<dG.minIterationCount)throw new Error(`dek.iterationCount must be least ${dG.minIterationCount}`);const n=null!=this.init.pass&&null!=this.init.dek?.salt?jF(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";uG.set(this,{dek:n}),this.started=!1}isStarted(){return this.started}async start(){const e=mG("self");await this.components.datastore.has(e)||await this.importPeer("self",this.components.peerId),this.started=!0}stop(){this.started=!1}get cms(){const e=uG.get(this);if(null==e)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const t=e.dek;return new iG(this,t)}static generateOptions(){const e=Object.assign({},hG),t=3*Math.ceil(dG.minSaltLength/3);return e.dek.salt=Ti(Ap(t),"base64"),e}static get options(){return hG}async createKey(e,t,n=2048){if(!pG(e)||"self"===e)throw await fG(),fe(new Error("Invalid key name"),aW.ERR_INVALID_KEY_NAME);if("string"!==typeof t)throw await fG(),fe(new Error("Invalid key type"),aW.ERR_INVALID_KEY_TYPE);const r=gG(e),o=await this.components.datastore.has(r);if(o)throw await fG(),fe(new Error("Key name already exists"),aW.ERR_KEY_ALREADY_EXISTS);switch(t.toLowerCase()){case"rsa":if(!Number.isSafeInteger(n)||n<2048)throw await fG(),fe(new Error("Invalid RSA key size"),aW.ERR_INVALID_KEY_SIZE);break;default:break}let s;try{const o=await xg(t,n),i=await o.id(),a=uG.get(this);if(null==a)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const l=a.dek,c=await o.export(l);s={name:e,id:i};const u=this.components.datastore.batch();u.put(r,mi(c)),u.put(mG(e),mi(JSON.stringify(s))),await u.commit()}catch(ik){throw await fG(),ik}return s}async listKeys(){const e={prefix:cG},t=[];for await(const n of this.components.datastore.query(e))t.push(JSON.parse(Ti(n.value)));return t}async findKeyById(e){try{const t=await this.listKeys();return t.find((t=>t.id===e))}catch(ik){throw await fG(),ik}}async findKeyByName(e){if(!pG(e))throw await fG(),fe(new Error(`Invalid key name '${e}'`),aW.ERR_INVALID_KEY_NAME);const t=mG(e);try{const e=await this.components.datastore.get(t);return JSON.parse(Ti(e))}catch(ik){throw await fG(),aG.error(ik),fe(new Error(`Key '${e}' does not exist.`),aW.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!pG(e)||"self"===e)throw await fG(),fe(new Error(`Invalid key name '${e}'`),aW.ERR_INVALID_KEY_NAME);const t=gG(e),n=await this.findKeyByName(e),r=this.components.datastore.batch();return r.delete(t),r.delete(mG(e)),await r.commit(),n}async renameKey(e,t){if(!pG(e)||"self"===e)throw await fG(),fe(new Error(`Invalid old key name '${e}'`),aW.ERR_OLD_KEY_NAME_INVALID);if(!pG(t)||"self"===t)throw await fG(),fe(new Error(`Invalid new key name '${t}'`),aW.ERR_NEW_KEY_NAME_INVALID);const n=gG(e),r=gG(t),o=mG(e),s=mG(t),i=await this.components.datastore.has(r);if(i)throw await fG(),fe(new Error(`Key '${t}' already exists`),aW.ERR_KEY_ALREADY_EXISTS);try{const e=await this.components.datastore.get(n),i=await this.components.datastore.get(o),a=JSON.parse(Ti(i));a.name=t;const l=this.components.datastore.batch();return l.put(r,e),l.put(s,mi(JSON.stringify(a))),l.delete(n),l.delete(o),await l.commit(),a}catch(ik){throw await fG(),ik}}async exportKey(e,t){if(!pG(e))throw await fG(),fe(new Error(`Invalid key name '${e}'`),aW.ERR_INVALID_KEY_NAME);if(null==t)throw await fG(),fe(new Error("Password is required"),aW.ERR_PASSWORD_REQUIRED);const n=gG(e);try{const e=await this.components.datastore.get(n),r=Ti(e),o=uG.get(this);if(null==o)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const s=o.dek,i=await Ug(r,s);return await i.export(t)}catch(ik){throw await fG(),ik}}async exportPeerId(e){const t="temporary-password",n=await this.exportKey(e,t),r=await Ug(n,t);return await gd(r.public.bytes,r.bytes)}async importKey(e,t,n){if(!pG(e)||"self"===e)throw await fG(),fe(new Error(`Invalid key name '${e}'`),aW.ERR_INVALID_KEY_NAME);if(null==t)throw await fG(),fe(new Error("PEM encoded key is required"),aW.ERR_PEM_REQUIRED);const r=gG(e),o=await this.components.datastore.has(r);if(o)throw await fG(),fe(new Error(`Key '${e}' already exists`),aW.ERR_KEY_ALREADY_EXISTS);let s,i;try{s=await Ug(t,n)}catch(ik){throw await fG(),fe(new Error("Cannot read the key, most likely the password is wrong"),aW.ERR_CANNOT_READ_KEY)}try{i=await s.id();const e=uG.get(this);if(null==e)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const n=e.dek;t=await s.export(n)}catch(ik){throw await fG(),ik}const a={name:e,id:i},l=this.components.datastore.batch();return l.put(r,mi(t)),l.put(mG(e),mi(JSON.stringify(a))),await l.commit(),a}async importPeer(e,t){try{if(!pG(e))throw fe(new Error(`Invalid key name '${e}'`),aW.ERR_INVALID_KEY_NAME);if(null==t)throw fe(new Error("PeerId is required"),aW.ERR_MISSING_PRIVATE_KEY);if(null==t.privateKey)throw fe(new Error("PeerId.privKey is required"),aW.ERR_MISSING_PRIVATE_KEY);const n=await Pg(t.privateKey),r=gG(e),o=await this.components.datastore.has(r);if(o)throw await fG(),fe(new Error(`Key '${e}' already exists`),aW.ERR_KEY_ALREADY_EXISTS);const s=uG.get(this);if(null==s)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const i=s.dek,a=await n.export(i),l={name:e,id:t.toString()},c=this.components.datastore.batch();return c.put(r,mi(a)),c.put(mG(e),mi(JSON.stringify(l))),await c.commit(),l}catch(ik){throw await fG(),ik}}async getPrivateKey(e){if(!pG(e))throw await fG(),fe(new Error(`Invalid key name '${e}'`),aW.ERR_INVALID_KEY_NAME);try{const t=gG(e),n=await this.components.datastore.get(t);return Ti(n)}catch(ik){throw await fG(),aG.error(ik),fe(new Error(`Key '${e}' does not exist.`),aW.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,t){if("string"!==typeof e)throw await fG(),fe(new Error(`Invalid old pass type '${typeof e}'`),aW.ERR_INVALID_OLD_PASS_TYPE);if("string"!==typeof t)throw await fG(),fe(new Error(`Invalid new pass type '${typeof t}'`),aW.ERR_INVALID_NEW_PASS_TYPE);if(t.length<20)throw await fG(),fe(new Error(`Invalid pass length ${t.length}`),aW.ERR_INVALID_PASS_LENGTH);aG("recreating keychain");const n=uG.get(this);if(null==n)throw fe(new Error("dek missing"),aW.ERR_INVALID_PARAMETERS);const r=n.dek;this.init.pass=t;const o=null!=t&&null!=this.init.dek?.salt?jF(t,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";uG.set(this,{dek:o});const s=await this.listKeys();for(const i of s){const e=await this.components.datastore.get(gG(i.name)),t=Ti(e),n=await Ug(t,r),s=o.toString(),a=await n.export(s),l=this.components.datastore.batch(),c={name:i.name,id:i.id};l.put(gG(i.name),mi(a)),l.put(mG(i.name),mi(JSON.stringify(c))),await l.commit()}aG("keychain reconstructed")}}async function vG(e){try{const t=await e;return{status:"fulfilled",value:t,isFulfilled:!0,isRejected:!1}}catch(t){return{status:"rejected",reason:t,isFulfilled:!1,isRejected:!0}}}class wG{value;next;constructor(e){this.value=e}}class bG{#e;#t;#n;constructor(){this.clear()}enqueue(e){const t=new wG(e);this.#e?(this.#t.next=t,this.#t=t):(this.#e=t,this.#t=t),this.#n++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#n--,e.value}clear(){this.#e=void 0,this.#t=void 0,this.#n=0}get size(){return this.#n}*[Symbol.iterator](){let e=this.#e;while(e)yield e.value,e=e.next}}function SG(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const t=new bG;let n=0;const r=()=>{n--,t.size>0&&t.dequeue()()},o=async(e,t,o)=>{n++;const s=(async()=>e(...o))();t(s);try{await s}catch{}r()},s=(r,s,i)=>{t.enqueue(o.bind(void 0,r,s,i)),(async()=>{await Promise.resolve(),n<e&&t.size>0&&t.dequeue()()})()},i=(e,...t)=>new Promise((n=>{s(e,n,t)}));return Object.defineProperties(i,{activeCount:{get:()=>n},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),i}async function _G(e,t={}){const{concurrency:n=Number.POSITIVE_INFINITY}=t,r=SG(n);return Promise.all(e.map((e=>e&&"function"===typeof e.then?vG(e):vG("function"===typeof e?r((()=>e())):Promise.resolve(e)))))}class EG extends Map{constructor(e){super();const{name:t,metrics:n}=e;this.metric=n.registerMetric(t),this.updateComponentMetric()}set(e,t){return super.set(e,t),this.updateComponentMetric(),this}delete(e){const t=super.delete(e);return this.updateComponentMetric(),t}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function kG(e){const{name:t,metrics:n}=e;let r;return r=null!=n?new EG({name:t,metrics:n}):new Map,r}const CG=pe("libp2p:transports");class IG extends uM{constructor(e,t={}){super(),this.components=e,this.started=!1,this.transports=new Map,this.listeners=kG({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=t.faultTolerance??Zq.FATAL_ALL}add(e){const t=e[Symbol.toStringTag];if(null==t)throw fe(new Error("Transport must have a valid tag"),aW.ERR_INVALID_KEY);if(this.transports.has(t))throw fe(new Error("There is already a transport with this tag"),aW.ERR_DUPLICATE_TRANSPORT);CG("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}async start(){const e=this.components.addressManager.getListenAddrs();await this.listen(e),this.started=!0}async stop(){const e=[];for(const[t,n]of this.listeners){CG("closing listeners for %s",t);while(n.length>0){const t=n.pop();null!=t&&e.push(t.close())}}await Promise.all(e),CG("all listeners closed");for(const t of this.listeners.keys())this.listeners.set(t,[]);this.started=!1}async dial(e,t){const n=this.transportForMultiaddr(e);if(null==n)throw fe(new Error(`No transport available for address ${String(e)}`),aW.ERR_TRANSPORT_UNAVAILABLE);try{return await n.dial(e,{...t,upgrader:this.components.upgrader})}catch(ik){throw null==ik.code&&(ik.code=aW.ERR_TRANSPORT_DIAL_FAILED),ik}}getAddrs(){let e=[];for(const t of this.listeners.values())for(const n of t)e=[...e,...n.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}transportForMultiaddr(e){for(const t of this.transports.values()){const n=t.filter([e]);if(n.length>0)return t}}async listen(e){if(null==e||0===e.length)return void CG("no addresses were provided for listening, this node is dial only");const t=[];for(const[n,r]of this.transports.entries()){const o=r.filter(e),s=[];for(const e of o){CG("creating listener for %s on %s",n,e);const t=r.createListener({upgrader:this.components.upgrader});let o=this.listeners.get(n);null==o&&(o=[],this.listeners.set(n,o)),o.push(t),t.addEventListener("listening",(()=>{this.dispatchEvent(new hM("listener:listening",{detail:t}))})),t.addEventListener("close",(()=>{this.dispatchEvent(new hM("listener:close",{detail:t}))})),s.push(t.listen(e))}if(0===s.length){t.push(n);continue}const i=await _G(s),a=i.find((e=>e.isFulfilled));if(null==a&&this.faultTolerance!==Zq.NO_FATAL)throw fe(new Error(`Transport (${n}) could not listen on any available address`),aW.ERR_NO_VALID_ADDRESSES)}if(t.length===this.transports.size){const e=`no valid addresses were provided for transports [${t.join(", ")}]`;if(this.faultTolerance===Zq.FATAL_ALL)throw fe(new Error(e),aW.ERR_NO_VALID_ADDRESSES);CG(`libp2p in dial mode only: ${e}`)}}async remove(e){CG("removing %s",e);for(const t of this.listeners.get(e)??[])await t.close();this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}}const AG="/multistream/1.0.0",TG=1024,RG=pe("libp2p:mss"),xG=mi("\n");function OG(e){const t=new Sw(e,xG);return nj.single(t)}function NG(e,t,n={}){const r=OG(t);!0===n.writeBytes?e.push(r.subarray()):e.push(r)}function PG(e,t,n={}){const r=new Sw;for(const o of t)r.append(OG(o));!0===n.writeBytes?e.push(r.subarray()):e.push(r)}async function DG(e,t){let n=1;const r={[Symbol.asyncIterator]:()=>r,next:async()=>await e.next(n)};let o=r;null!=t?.signal&&(o=JF(r,t.signal));const s=e=>{n=e},i=await kv(o,aj({onLength:s,maxDataLength:TG}),(async e=>await XT(e)));if(null==i||0===i.length)throw fe(new Error("no buffer returned"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(i.get(i.byteLength-1)!==xG[0])throw RG.error("Invalid mss message - missing newline - %s",i.subarray()),fe(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return i.sublist(0,-1)}async function UG(e,t){const n=await DG(e,t);return Ti(n.subarray())}const LG=pe("libp2p:mss:select");async function BG(e,t,n={}){t=Array.isArray(t)?[...t]:[t];const{reader:r,writer:o,rest:s,stream:i}=iY(e),a=t.shift();if(null==a)throw new Error("At least one protocol must be specified");LG('select: write ["%s", "%s"]',AG,a);const l=mi(AG),c=mi(a);PG(o,[l,c],n);let u=await UG(r,n);if(LG('select: read "%s"',u),u===AG&&(u=await UG(r,n),LG('select: read "%s"',u)),u===a)return s(),{stream:i,protocol:a};for(const d of t){LG('select: write "%s"',d),NG(o,mi(d),n);const e=await UG(r,n);if(LG('select: read "%s" for "%s"',e,d),e===d)return s(),{stream:i,protocol:d}}throw s(),fe(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}const MG=pe("libp2p:mss:handle");async function FG(e,t,n){t=Array.isArray(t)?t:[t];const{writer:r,reader:o,rest:s,stream:i}=iY(e);while(1){const e=await UG(o,n);if(MG('read "%s"',e),e!==AG){if(t.includes(e))return NG(r,mi(e),n),MG('respond with "%s" for "%s"',e,e),s(),{stream:i,protocol:e};"ls"!==e?(NG(r,mi("na"),n),MG('respond with "na" for "%s"',e)):(NG(r,new Sw(...t.map((e=>OG(mi(e))))),n),MG('respond with "%s" for %s',t,e))}else MG('respond with "%s" for "%s"',AG,e),NG(r,mi(AG),n)}}const jG=Symbol.for("@libp2p/connection");const zG=pe("libp2p:connection");class $G{constructor(e){const{remoteAddr:t,remotePeer:n,newStream:r,close:o,getStreams:s,stat:i}=e;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=t,this.remotePeer=n,this.stat={...i,status:EW},this._newStream=r,this._close=o,this._getStreams=s,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[jG](){return!0}get streams(){return this._getStreams()}async newStream(e,t){if(this.stat.status===kW)throw fe(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===CW)throw fe(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);const n=await this._newStream(e,t);return n.stat.direction="outbound",n}addStream(e){e.stat.direction="inbound"}removeStream(e){}async close(){if(this.stat.status!==CW&&!this._closing){this.stat.status=kW;try{this.streams.forEach((e=>e.close()))}catch(ik){zG.error(ik)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=CW}}}function VG(e){return new $G(e)}const HG=pe("libp2p:registrar"),KG=32,qG=64;class WG{constructor(e){this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this._onConnect=this._onConnect.bind(this),this.components.connectionManager.addEventListener("peer:disconnect",this._onDisconnect),this.components.connectionManager.addEventListener("peer:connect",this._onConnect),this.components.peerStore.addEventListener("change:protocols",this._onProtocolChange)}getProtocols(){return Array.from(new Set([...this.topologies.keys(),...this.handlers.keys()])).sort()}getHandler(e){const t=this.handlers.get(e);if(null==t)throw fe(new Error(`No handler registered for protocol ${e}`),aW.ERR_NO_HANDLER_FOR_PROTOCOL);return t}getTopologies(e){const t=this.topologies.get(e);return null==t?[]:[...t.values()]}async handle(e,t,n){if(this.handlers.has(e))throw fe(new Error(`Handler already registered for protocol ${e}`),aW.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const r=T.bind({ignoreUndefined:!0})({maxInboundStreams:KG,maxOutboundStreams:qG},n);this.handlers.set(e,{handler:t,options:r}),await this.components.peerStore.protoBook.add(this.components.peerId,[e])}async unhandle(e){const t=Array.isArray(e)?e:[e];t.forEach((e=>{this.handlers.delete(e)})),await this.components.peerStore.protoBook.remove(this.components.peerId,t)}async register(e,t){if(!oM(t))throw HG.error("topology must be an instance of interfaces/topology"),fe(new Error("topology must be an instance of interfaces/topology"),aW.ERR_INVALID_PARAMETERS);const n=`${(1e9*Math.random()).toString(36)}${Date.now()}`;let r=this.topologies.get(e);return null==r&&(r=new Map,this.topologies.set(e,r)),r.set(n,t),await t.setRegistrar(this),n}unregister(e){for(const[t,n]of this.topologies.entries())n.has(e)&&(n.delete(e),0===n.size&&this.topologies.delete(t))}_onDisconnect(e){const t=e.detail;this.components.peerStore.protoBook.get(t.remotePeer).then((e=>{for(const n of e){const e=this.topologies.get(n);if(null!=e)for(const n of e.values())n.onDisconnect(t.remotePeer)}})).catch((e=>{HG.error(e)}))}_onConnect(e){const t=e.detail;this.components.peerStore.protoBook.get(t.remotePeer).then((e=>{for(const n of e){const e=this.topologies.get(n);if(null!=e)for(const n of e.values())n.onConnect(t.remotePeer,t)}})).catch((e=>{HG.error(e)}))}_onProtocolChange(e){const{peerId:t,protocols:n,oldProtocols:r}=e.detail,o=r.filter((e=>!n.includes(e))),s=n.filter((e=>!r.includes(e)));for(const i of o){const e=this.topologies.get(i);if(null!=e)for(const n of e.values())n.onDisconnect(t)}for(const i of s){const e=this.topologies.get(i);if(null!=e)for(const n of e.values()){const e=this.components.connectionManager.getConnections(t)[0];null!=e&&n.onConnect(t,e)}}}}const YG=pe("libp2p:upgrader");function GG(e,t){try{const{options:n}=t.getHandler(e);return n.maxInboundStreams}catch(ik){if(ik.code!==aW.ERR_NO_HANDLER_FOR_PROTOCOL)throw ik}return KG}function ZG(e,t){try{const{options:n}=t.getHandler(e);return n.maxOutboundStreams}catch(ik){if(ik.code!==aW.ERR_NO_HANDLER_FOR_PROTOCOL)throw ik}return qG}function JG(e,t,n){let r=0;return n.streams.forEach((n=>{n.stat.direction===t&&n.stat.protocol===e&&r++})),r}class QG extends uM{constructor(e,t){super(),this.components=e,this.connectionEncryption=new Map,t.connectionEncryption.forEach((e=>{this.connectionEncryption.set(e.protocol,e)})),this.muxers=new Map,t.muxers.forEach((e=>{this.muxers.set(e.protocol,e)})),this.inboundUpgradeTimeout=t.inboundUpgradeTimeout}async upgradeInbound(e,t){const n=await this.components.connectionManager.acceptIncomingConnection(e);if(!n)throw fe(new Error("connection denied"),aW.ERR_CONNECTION_DENIED);let r,o,s,i,a;const l=new yi.TimeoutController(this.inboundUpgradeTimeout);try{(0,hW.setMaxListeners)?.(1/0,l.signal)}catch{}try{const n=XF(e,l.signal);if(e.source=n.source,e.sink=n.sink,await this.components.connectionGater.denyInboundConnection(e))throw fe(new Error("The multiaddr connection is blocked by gater.acceptConnection"),aW.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(e),YG("starting the inbound connection upgrade");let c=e;if(!0!==t?.skipProtection){const t=this.components.connectionProtector;null!=t&&(YG("protecting the inbound connection"),c=await t.protect(e))}try{if(r=c,!0!==t?.skipEncryption){if(({conn:r,remotePeer:o,protocol:a}=await this._encryptInbound(c)),await this.components.connectionGater.denyInboundEncryptedConnection(o,{...c,...r}))throw fe(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),aW.ERR_CONNECTION_INTERCEPTED)}else{const t=e.remoteAddr.getPeerId();if(null==t)throw fe(new Error("inbound connection that skipped encryption must have a peer id"),aW.ERR_INVALID_MULTIADDR);const n=hd(t);a="native",o=n}if(s=r,null!=t?.muxerFactory)i=t.muxerFactory;else if(this.muxers.size>0){const e=await this._multiplexInbound({...c,...r},this.muxers);i=e.muxerFactory,s=e.stream}}catch(ik){throw YG.error("Failed to upgrade inbound connection",ik),ik}if(await this.components.connectionGater.denyInboundUpgradedConnection(o,{...c,...r}))throw fe(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),aW.ERR_CONNECTION_INTERCEPTED);return YG("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:a,direction:"inbound",maConn:e,upgradedConn:s,muxerFactory:i,remotePeer:o})}finally{this.components.connectionManager.afterUpgradeInbound(),l.clear()}}async upgradeOutbound(e,t){const n=e.remoteAddr.getPeerId();let r,o,s,i,a,l;if(null!=n&&(r=hd(n),await this.components.connectionGater.denyOutboundConnection(r,e)))throw fe(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),aW.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(e),YG("Starting the outbound connection upgrade");let c=e;if(!0!==t?.skipProtection){const t=this.components.connectionProtector;null!=t&&(c=await t.protect(e))}try{if(o=c,!0!==t?.skipEncryption){if(({conn:o,remotePeer:s,protocol:a}=await this._encryptOutbound(c,r)),await this.components.connectionGater.denyOutboundEncryptedConnection(s,{...c,...o}))throw fe(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),aW.ERR_CONNECTION_INTERCEPTED)}else{if(null==r)throw fe(new Error("Encryption was skipped but no peer id was passed"),aW.ERR_INVALID_PEER);a="native",s=r}if(i=o,null!=t?.muxerFactory)l=t.muxerFactory;else if(this.muxers.size>0){const e=await this._multiplexOutbound({...c,...o},this.muxers);l=e.muxerFactory,i=e.stream}}catch(ik){throw YG.error("Failed to upgrade outbound connection",ik),await e.close(ik),ik}if(await this.components.connectionGater.denyOutboundUpgradedConnection(s,{...c,...o}))throw fe(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),aW.ERR_CONNECTION_INTERCEPTED);return YG("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:a,direction:"outbound",maConn:e,upgradedConn:i,muxerFactory:l,remotePeer:s})}_createConnection(e){const{cryptoProtocol:t,direction:n,maConn:r,upgradedConn:o,remotePeer:s,muxerFactory:i}=e;let a,l,c;null!=i&&(a=i.createStreamMuxer({direction:n,onIncomingStream:e=>{null!=c&&Promise.resolve().then((async()=>{const t=this.components.registrar.getProtocols(),{stream:r,protocol:o}=await FG(e,t);if(YG("%s: incoming stream opened on %s",n,o),null==c)return;const i=GG(o,this.components.registrar),a=JG(o,"inbound",c);a!==i?(e.source=r.source,e.sink=r.sink,e.stat.protocol=o,this.components.peerStore.protoBook.add(s,[o]).catch((e=>YG.error(e))),c.addStream(e),this.components.metrics?.trackProtocolStream(e,c),this._onStream({connection:c,stream:e,protocol:o})):e.abort(fe(new Error(`Too many inbound protocol streams for protocol "${o}" - limit ${i}`),aW.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS))})).catch((t=>{YG.error(t),null==e.stat.timeline.close&&e.close()}))},onStreamEnd:e=>{c?.removeStream(e.id)}}),l=async(e,t={})=>{if(null==a)throw fe(new Error("Stream is not multiplexed"),aW.ERR_MUXER_UNAVAILABLE);YG("%s: starting new stream on %s",n,e);const r=await a.newStream();let o;try{if(null==t.signal){YG("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",e),o=new yi.TimeoutController(3e4),t.signal=o.signal;try{(0,hW.setMaxListeners)?.(1/0,o.signal)}catch{}}const{stream:n,protocol:i}=await BG(r,e,t),a=ZG(i,this.components.registrar),l=JG(i,"outbound",c);if(l===a){const e=fe(new Error(`Too many outbound protocol streams for protocol "${i}" - limit ${a}`),aW.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw r.abort(e),e}return this.components.peerStore.protoBook.add(s,[i]).catch((e=>YG.error(e))),r.source=n.source,r.sink=n.sink,r.stat.protocol=i,this.components.metrics?.trackProtocolStream(r,c),r}catch(ik){if(YG.error("could not create new stream",ik),null==r.stat.timeline.close&&r.close(),null!=ik.code)throw ik;throw fe(ik,aW.ERR_UNSUPPORTED_PROTOCOL)}finally{null!=o&&o.clear()}},Promise.all([a.sink(o.source),o.sink(a.source)]).catch((e=>{YG.error(e)})));const u=r.timeline;r.timeline=new Proxy(u,{set:(...e)=>(null!=c&&"close"===e[1]&&null!=e[2]&&null==u.close&&(async()=>{try{"OPEN"===c.stat.status&&await c.close()}catch(ik){YG.error(ik)}finally{this.dispatchEvent(new hM("connectionEnd",{detail:c}))}})().catch((e=>{YG.error(e)})),Reflect.set(...e))}),r.timeline.upgraded=Date.now();const d=()=>{throw fe(new Error("connection is not multiplexed"),aW.ERR_CONNECTION_NOT_MULTIPLEXED)};return c=VG({remoteAddr:r.remoteAddr,remotePeer:s,stat:{status:"OPEN",direction:n,timeline:r.timeline,multiplexer:a?.protocol,encryption:t},newStream:l??d,getStreams:()=>null!=a?a.streams:d(),close:async()=>{await r.close(),null!=a&&a.close()}}),this.dispatchEvent(new hM("connection",{detail:c})),c}_onStream(e){const{connection:t,stream:n,protocol:r}=e,{handler:o}=this.components.registrar.getHandler(r);o({connection:t,stream:n})}async _encryptInbound(e){const t=Array.from(this.connectionEncryption.keys());YG("handling inbound crypto protocol selection",t);try{const{stream:n,protocol:r}=await FG(e,t,{writeBytes:!0}),o=this.connectionEncryption.get(r);if(null==o)throw new Error(`no crypto module found for ${r}`);return YG("encrypting inbound connection..."),{...await o.secureInbound(this.components.peerId,n),protocol:r}}catch(ik){throw fe(ik,aW.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,t){const n=Array.from(this.connectionEncryption.keys());YG("selecting outbound crypto protocol",n);try{const{stream:r,protocol:o}=await BG(e,n,{writeBytes:!0}),s=this.connectionEncryption.get(o);if(null==s)throw new Error(`no crypto module found for ${o}`);return YG("encrypting outbound connection to %p",t),{...await s.secureOutbound(this.components.peerId,r,t),protocol:o}}catch(ik){throw fe(ik,aW.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,t){const n=Array.from(t.keys());YG("outbound selecting muxer %s",n);try{const{stream:r,protocol:o}=await BG(e,n,{writeBytes:!0});YG("%s selected as muxer protocol",o);const s=t.get(o);return{stream:r,muxerFactory:s}}catch(ik){throw YG.error("error multiplexing outbound stream",ik),fe(ik,aW.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,t){const n=Array.from(t.keys());YG("inbound handling muxers %s",n);try{const{stream:r,protocol:o}=await FG(e,n,{writeBytes:!0}),s=t.get(o);return{stream:r,muxerFactory:s}}catch(ik){throw YG.error("error multiplexing inbound stream",ik),fe(ik,aW.ERR_MUXER_UNAVAILABLE)}}}var XG;(function(e){let t;e.codec=()=>(null==t&&(t=XW(((e,t,n={})=>{if(!1!==n.lengthDelimited&&t.fork(),null!=e.protocolVersion&&(t.uint32(42),t.string(e.protocolVersion)),null!=e.agentVersion&&(t.uint32(50),t.string(e.agentVersion)),null!=e.publicKey&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.listenAddrs)for(const r of e.listenAddrs)t.uint32(18),t.bytes(r);if(null!=e.observedAddr&&(t.uint32(34),t.bytes(e.observedAddr)),null!=e.protocols)for(const r of e.protocols)t.uint32(26),t.string(r);null!=e.signedPeerRecord&&(t.uint32(66),t.bytes(e.signedPeerRecord)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={listenAddrs:[],protocols:[]},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 5:n.protocolVersion=e.string();break;case 6:n.agentVersion=e.string();break;case 1:n.publicKey=e.bytes();break;case 2:n.listenAddrs.push(e.bytes());break;case 4:n.observedAddr=e.bytes();break;case 3:n.protocols.push(e.string());break;case 8:n.signedPeerRecord=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>YW(t,e.codec()),e.decode=t=>WW(t,e.codec())})(XG||(XG={}));const eZ="0.0.0",tZ="libp2p",nZ=`js-libp2p/${eZ}`,rZ="0.1.0",oZ="id",sZ="id/push",iZ="1.0.0",aZ="1.0.0",lZ=pe("libp2p:identify"),cZ=8192;class uZ{constructor(e,t){this.components=e,this.started=!1,this.init=t,this.identifyProtocolStr=`/${t.protocolPrefix}/${oZ}/${iZ}`,this.identifyPushProtocolStr=`/${t.protocolPrefix}/${sZ}/${aZ}`,this.host={protocolVersion:`${t.protocolPrefix}/${rZ}`,...t.host},this.components.connectionManager.addEventListener("peer:connect",(e=>{const t=e.detail;this.identify(t).catch(lZ.error)})),this.components.peerStore.addEventListener("change:multiaddrs",(e=>{const{peerId:t}=e.detail;this.components.peerId.equals(t)&&this.pushToPeerStore().catch((e=>lZ.error(e)))})),this.components.peerStore.addEventListener("change:protocols",(e=>{const{peerId:t}=e.detail;this.components.peerId.equals(t)&&this.pushToPeerStore().catch((e=>lZ.error(e)))}))}isStarted(){return this.started}async start(){this.started||(await this.components.peerStore.metadataBook.setValue(this.components.peerId,"AgentVersion",mi(this.host.agentVersion)),await this.components.peerStore.metadataBook.setValue(this.components.peerId,"ProtocolVersion",mi(this.host.protocolVersion)),await this.components.registrar.handle(this.identifyProtocolStr,(e=>{this._handleIdentify(e).catch((e=>{lZ.error(e)}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),await this.components.registrar.handle(this.identifyPushProtocolStr,(e=>{this._handlePush(e).catch((e=>{lZ.error(e)}))}),{maxInboundStreams:this.init.maxPushIncomingStreams,maxOutboundStreams:this.init.maxPushOutgoingStreams}),this.started=!0)}async stop(){await this.components.registrar.unhandle(this.identifyProtocolStr),await this.components.registrar.unhandle(this.identifyPushProtocolStr),this.started=!1}async push(e){const t=await this.components.peerStore.addressBook.getRawEnvelope(this.components.peerId),n=this.components.addressManager.getAddresses().map((e=>e.bytes)),r=await this.components.peerStore.protoBook.get(this.components.peerId),o=e.map((async e=>{let o;const s=new yi.TimeoutController(this.init.timeout);try{(0,hW.setMaxListeners)?.(1/0,s.signal)}catch{}try{o=await e.newStream([this.identifyPushProtocolStr],{signal:s.signal});const i=XF(o,s.signal);await i.sink(kv([XG.encode({listenAddrs:n,signedPeerRecord:t,protocols:r})],nj()))}catch(ik){lZ.error("could not push identify update to peer",ik)}finally{null!=o&&o.close(),s.clear()}}));await Promise.all(o)}async pushToPeerStore(){if(!this.isStarted())return;const e=[];for(const t of this.components.connectionManager.getConnections()){const n=t.remotePeer,r=await this.components.peerStore.get(n);r.protocols.includes(this.identifyPushProtocolStr)&&e.push(t)}await this.push(e)}async _identify(e,t={}){let n,r,o=t.signal;if(null==o){n=new yi.TimeoutController(this.init.timeout),o=n.signal;try{(0,hW.setMaxListeners)?.(1/0,n.signal)}catch{}}try{r=await e.newStream([this.identifyProtocolStr],{signal:o});const t=XF(r,o),n=await kv([],t,aj({maxDataLength:this.init.maxIdentifyMessageSize??cZ}),(async e=>await XT(e)));if(null==n)throw fe(new Error("No data could be retrieved"),aW.ERR_CONNECTION_ENDED);try{return XG.decode(n)}catch(ik){throw fe(ik,aW.ERR_INVALID_MESSAGE)}}finally{null!=n&&n.clear(),null!=r&&r.close()}}async identify(e,t={}){const n=await this._identify(e,t),{publicKey:r,listenAddrs:o,protocols:s,observedAddr:i,signedPeerRecord:a,agentVersion:l,protocolVersion:c}=n;if(null==r)throw fe(new Error("public key was missing from identify message"),aW.ERR_MISSING_PUBLIC_KEY);const u=await gd(r);if(!e.remotePeer.equals(u))throw fe(new Error("identified peer does not match the expected peer"),aW.ERR_INVALID_PEER);if(this.components.peerId.equals(u))throw fe(new Error("identified peer is our own peer id?"),aW.ERR_INVALID_PEER);const d=uZ.getCleanMultiaddr(i);if(null!=a){lZ("received signed peer record from %p",u);try{const e=await GL.openAndCertify(a,nM.DOMAIN);if(!e.peerId.equals(u))throw fe(new Error("identified peer does not match the expected peer"),aW.ERR_INVALID_PEER);if(await this.components.peerStore.addressBook.consumePeerRecord(e))return await this.components.peerStore.protoBook.set(u,s),null!=l&&await this.components.peerStore.metadataBook.setValue(u,"AgentVersion",mi(l)),null!=c&&await this.components.peerStore.metadataBook.setValue(u,"ProtocolVersion",mi(c)),void lZ("identify completed for peer %p and protocols %o",u,s)}catch(ik){lZ("received invalid envelope, discard it and fallback to listenAddrs is available",ik)}}else lZ("no signed peer record received from %p",u);lZ("falling back to legacy addresses from %p",u);try{await this.components.peerStore.addressBook.set(u,o.map((e=>Da(e))))}catch(ik){lZ.error("received invalid addrs",ik)}await this.components.peerStore.protoBook.set(u,s),null!=l&&await this.components.peerStore.metadataBook.setValue(u,"AgentVersion",mi(l)),null!=c&&await this.components.peerStore.metadataBook.setValue(u,"ProtocolVersion",mi(c)),lZ("identify completed for peer %p and protocols %o",u,s),lZ("received observed address of %s",d?.toString())}async _handleIdentify(e){const{connection:t,stream:n}=e,r=new yi.TimeoutController(this.init.timeout);try{(0,hW.setMaxListeners)?.(1/0,r.signal)}catch{}try{const e=this.components.peerId.publicKey??new Uint8Array(0),o=await this.components.peerStore.get(this.components.peerId),s=this.components.addressManager.getAddresses().map((e=>e.decapsulateCode(Mi("p2p").code)));let i=o.peerRecordEnvelope;if(s.length>0&&null==i){const e=new nM({peerId:this.components.peerId,multiaddrs:s}),t=await GL.seal(e,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(t),i=t.marshal().subarray()}const a=XG.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:e,listenAddrs:s.map((e=>e.bytes)),signedPeerRecord:i,observedAddr:t.remoteAddr.bytes,protocols:o.protocols}),l=XF(n,r.signal),c=kv([a],nj());await l.sink(c)}catch(ik){lZ.error("could not respond to identify request",ik)}finally{n.close(),r.clear()}}async _handlePush(e){const{connection:t,stream:n}=e,r=new yi.TimeoutController(this.init.timeout);try{(0,hW.setMaxListeners)?.(1/0,r.signal)}catch{}let o;try{const e=XF(n,r.signal),t=await kv([],e,aj({maxDataLength:this.init.maxIdentifyMessageSize??cZ}),(async e=>await XT(e)));null!=t&&(o=XG.decode(t))}catch(ik){return lZ.error("received invalid message",ik)}finally{n.close(),r.clear()}if(null==o)return lZ.error("received invalid message");const s=t.remotePeer;if(this.components.peerId.equals(s))lZ("received push from ourselves?");else{if(lZ("received push from %p",s),null!=o.signedPeerRecord){lZ("received signedPeerRecord in push");try{const e=await GL.openAndCertify(o.signedPeerRecord,nM.DOMAIN);if(await this.components.peerStore.addressBook.consumePeerRecord(e))return lZ("consumed signedPeerRecord sent in push"),void await this.components.peerStore.protoBook.set(s,o.protocols);lZ("failed to consume signedPeerRecord sent in push")}catch(ik){lZ("received invalid envelope, discard it and fallback to listenAddrs is available",ik)}}else lZ("did not receive signedPeerRecord in push");try{await this.components.peerStore.addressBook.set(s,o.listenAddrs.map((e=>Da(e))))}catch(ik){lZ.error("received invalid addrs",ik)}try{await this.components.peerStore.protoBook.set(s,o.protocols)}catch(ik){lZ.error("received invalid protocols",ik)}lZ("handled push from %p",s)}}static getCleanMultiaddr(e){if(null!=e&&e.length>0)try{return Da(e)}catch{}}}var dZ,hZ;(function(e){let t;e.codec=()=>(null==t&&(t=XW(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),!0!==n.writeDefaults&&""===e.identifier||(t.uint32(10),t.string(e.identifier)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={identifier:""},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.identifier=e.string();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>YW(t,e.codec()),e.decode=t=>WW(t,e.codec())})(dZ||(dZ={})),function(e){let t,n,r;(function(e){e["OK"]="OK",e["NOT_FOUND"]="NOT_FOUND",e["ERROR"]="ERROR"})(t=e.StatusCode||(e.StatusCode={})),function(e){e[e["OK"]=0]="OK",e[e["NOT_FOUND"]=1]="NOT_FOUND",e[e["ERROR"]=2]="ERROR"}(n||(n={})),function(e){e.codec=()=>QW(n)}(t=e.StatusCode||(e.StatusCode={})),e.codec=()=>(null==r&&(r=XW(((t,r,o={})=>{!1!==o.lengthDelimited&&r.fork(),(!0===o.writeDefaults||null!=t.status&&0!==n[t.status])&&(r.uint32(8),e.StatusCode.codec().encode(t.status,r)),(!0===o.writeDefaults||null!=t.data&&t.data.byteLength>0)&&(r.uint32(18),r.bytes(t.data)),!1!==o.lengthDelimited&&r.ldelim()}),((n,r)=>{const o={status:t.OK,data:new Uint8Array(0)},s=null==r?n.len:n.pos+r;while(n.pos<s){const t=n.uint32();switch(t>>>3){case 1:o.status=e.StatusCode.codec().decode(n);break;case 2:o.data=n.bytes();break;default:n.skipType(7&t);break}}return o}))),r),e.encode=t=>YW(t,e.codec()),e.decode=t=>WW(t,e.codec())}(hZ||(hZ={}));const pZ="0.0.1",fZ="fetch",gZ=pe("libp2p:fetch");class mZ{constructor(e,t){this.started=!1,this.components=e,this.protocol=`/${t.protocolPrefix??"libp2p"}/${fZ}/${pZ}`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=t}async start(){await this.components.registrar.handle(this.protocol,(e=>{this.handleMessage(e).catch((e=>{gZ.error(e)})).finally((()=>{e.stream.close()}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(e,t,n={}){gZ("dialing %s to %p",this.protocol,e);const r=await this.components.connectionManager.openConnection(e,n);let o,s,i=n.signal;if(null==i){gZ("using default timeout of %d ms",this.init.timeout),o=new yi.TimeoutController(this.init.timeout),i=o.signal;try{(0,hW.setMaxListeners)?.(1/0,o.signal)}catch{}}try{s=await r.newStream(this.protocol,{signal:i});const e=XF(s,i);gZ("fetch %s",t);const n=await kv([dZ.encode({identifier:t})],nj(),e,aj(),(async function(e){const n=await XT(e);if(null==n)throw fe(new Error("No data received"),aW.ERR_INVALID_MESSAGE);const r=hZ.decode(n);switch(r.status){case hZ.StatusCode.OK:return gZ("received status for %s ok",t),r.data;case hZ.StatusCode.NOT_FOUND:return gZ("received status for %s not found",t),null;case hZ.StatusCode.ERROR:{gZ("received status for %s error",t);const e=Ti(r.data);throw fe(new Error("Error in fetch protocol response: "+e),aW.ERR_INVALID_PARAMETERS)}default:throw gZ("received status for %s unknown",t),fe(new Error("Unknown response status"),aW.ERR_INVALID_MESSAGE)}}));return n??null}finally{null!=o&&o.clear(),null!=s&&s.close()}}async handleMessage(e){const{stream:t}=e,n=this;await kv(t,aj(),(async function*(e){const t=await XT(e);if(null==t)throw fe(new Error("No data received"),aW.ERR_INVALID_MESSAGE);const r=dZ.decode(t);let o;const s=n._getLookupFunction(r.identifier);if(null!=s){gZ("look up data with identifier %s",r.identifier);const e=await s(r.identifier);null!=e?(gZ("sending status for %s ok",r.identifier),o={status:hZ.StatusCode.OK,data:e}):(gZ("sending status for %s not found",r.identifier),o={status:hZ.StatusCode.NOT_FOUND,data:new Uint8Array(0)})}else{gZ("sending status for %s error",r.identifier);const e=mi(`No lookup function registered for key: ${r.identifier}`);o={status:hZ.StatusCode.ERROR,data:e}}yield hZ.encode(o)}),nj(),t)}_getLookupFunction(e){for(const t of this.lookupFunctions.keys())if(e.startsWith(t))return this.lookupFunctions.get(t)}registerLookupFunction(e,t){if(this.lookupFunctions.has(e))throw fe(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),aW.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}unregisterLookupFunction(e,t){if(null!=t){const n=this.lookupFunctions.get(e);if(n!==t)return}this.lookupFunctions.delete(e)}}const yZ=32,vZ="1.0.0",wZ="ping",bZ=pe("libp2p:ping");class SZ{constructor(e,t){this.components=e,this.started=!1,this.protocol=`/${t.protocolPrefix}/${wZ}/${vZ}`,this.init=t}async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){const{stream:t}=e;kv(t,t).catch((e=>{bZ.error(e)}))}async ping(e,t={}){bZ("dialing %s to %p",this.protocol,e);const n=Date.now(),r=Ap(yZ),o=await this.components.connectionManager.openConnection(e,t);let s,i,a=t.signal;if(null==a){s=new yi.TimeoutController(this.init.timeout),a=s.signal;try{(0,hW.setMaxListeners)?.(1/0,s.signal)}catch{}}try{i=await o.newStream([this.protocol],{signal:a});const e=XF(i,a),t=await kv([r],e,(async e=>await XT(e))),s=Date.now();if(null==t||!wa(r,t.subarray()))throw fe(new Error("Received wrong ping ack"),aW.ERR_WRONG_PING_ACK);return s-n}finally{null!=s&&s.clear(),null!=i&&i.close()}}}async function _Z(){throw new Error("Not supported in browsers")}var EZ=n(9134);const kZ="object"===typeof window&&"object"===typeof document&&9===document.nodeType,CZ=EZ(),IZ=kZ&&!CZ,AZ=CZ&&!kZ,TZ=CZ&&kZ,RZ="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!CZ,xZ="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,OZ=("undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"],"undefined"!==typeof navigator&&"ReactNative"===navigator.product);function NZ(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^::1$/.test(e)}function PZ(e){const{address:t}=e.nodeAddress();return NZ(t)}const DZ=pe("libp2p:nat"),UZ=7200;function LZ(e=1024,t=65535){return Math.floor(Math.random()*(t-e+1)+e)}class BZ{constructor(e,t){if(this.components=e,this.started=!1,this.enabled=t.enabled,this.externalAddress=t.externalAddress,this.localAddress=t.localAddress,this.description=t.description??`${tZ}@${eZ} ${this.components.peerId.toString()}`,this.ttl=t.ttl??UZ,this.keepAlive=t.keepAlive??!0,this.gateway=t.gateway,this.ttl<UZ)throw fe(new Error(`NatManager ttl should be at least ${UZ} seconds`),aW.ERR_INVALID_PARAMETERS)}isStarted(){return this.started}start(){}afterStart(){IZ||!this.enabled||this.started||(this.started=!0,this._start().catch((e=>{DZ.error(e)})))}async _start(){const e=this.components.transportManager.getAddrs();for(const t of e){const{family:e,host:n,port:r,transport:o}=t.toOptions();if(!t.isThinWaistAddress()||"tcp"!==o)continue;if(PZ(t))continue;if(4!==e)continue;const s=await this._getClient(),i=this.externalAddress??await s.externalIp(),a=qY(i);if(!0===a)throw new Error(`${i} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);if(null==a)throw new Error(`${i} is not an IP address`);const l=LZ();DZ(`opening uPnP connection from ${i}:${l} to ${n}:${r}`),await s.map({publicPort:l,localPort:r,localAddress:this.localAddress,protocol:"TCP"===o.toUpperCase()?"TCP":"UDP"}),this.components.addressManager.addObservedAddr(xa({family:4,address:i,port:l},o))}}async _getClient(){return null!=this.client||(this.client=await _Z({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway})),this.client}async stop(){if(!IZ&&null!=this.client)try{await this.client.close(),this.client=void 0}catch(ik){DZ.error(ik)}}}const MZ=pe("libp2p:peer-record-updater");class FZ{constructor(e){this.components=e,this.started=!1,this.update=this.update.bind(this)}isStarted(){return this.started}async start(){this.started=!0,this.components.transportManager.addEventListener("listener:listening",this.update),this.components.transportManager.addEventListener("listener:close",this.update),this.components.addressManager.addEventListener("change:addresses",this.update)}async stop(){this.started=!1,this.components.transportManager.removeEventListener("listener:listening",this.update),this.components.transportManager.removeEventListener("listener:close",this.update),this.components.addressManager.removeEventListener("change:addresses",this.update)}update(){Promise.resolve().then((async()=>{const e=new nM({peerId:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map((e=>e.decapsulateCode(Mi("p2p").code)))}),t=await GL.seal(e,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(t)})).catch((e=>{MZ.error("Could not update self peer record: %o",e)}))}}class jZ{constructor(e){this.dht=e}async findPeer(e,t={}){for await(const n of this.dht.findPeer(e,t))if("FINAL_PEER"===n.name)return n.peer;throw fe(new Error(iW.NOT_FOUND),aW.ERR_NOT_FOUND)}async*getClosestPeers(e,t={}){for await(const n of this.dht.getClosestPeers(e,t))"FINAL_PEER"===n.name&&(yield n.peer)}}const zZ={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_NOT_FOUND:"ERR_NOT_FOUND"},$Z=pe("libp2p:peer-store:address-book"),VZ="change:multiaddrs";async function HZ(){return!0}class KZ{constructor(e,t,n){this.dispatchEvent=e,this.store=t,this.addressFilter=n??HZ}async consumePeerRecord(e){$Z.trace("consumePeerRecord await write lock");const t=await this.store.lock.writeLock();let n,r,o;$Z.trace("consumePeerRecord got write lock");try{let t;try{t=nM.createFromProtobuf(e.payload)}catch(ik){return $Z.error("invalid peer record received"),!1}n=t.peerId;const s=t.multiaddrs;if(!n.equals(e.peerId))return $Z("signing key does not match PeerId in the PeerRecord"),!1;if(null==s||0===s.length)return!1;if(await this.store.has(n)&&(r=await this.store.load(n),null!=r.peerRecordEnvelope)){const e=await GL.createFromProtobuf(r.peerRecordEnvelope),n=nM.createFromProtobuf(e.payload);if(n.seqNumber>=t.seqNumber)return $Z("sequence number was lower or equal to existing sequence number - stored: %d received: %d",n.seqNumber,t.seqNumber),!1}const i=await qZ(n,s,this.addressFilter,!0);o=await this.store.patchOrCreate(n,{addresses:i,peerRecordEnvelope:e.marshal().subarray()}),$Z("stored provided peer record for %p",t.peerId)}finally{$Z.trace("consumePeerRecord release write lock"),t()}return this.dispatchEvent(new hM(VZ,{detail:{peerId:n,multiaddrs:o.addresses.map((({multiaddr:e})=>e)),oldMultiaddrs:null==r?[]:r.addresses.map((({multiaddr:e})=>e))}})),!0}async getRawEnvelope(e){$Z.trace("getRawEnvelope await read lock");const t=await this.store.lock.readLock();$Z.trace("getRawEnvelope got read lock");try{const t=await this.store.load(e);return t.peerRecordEnvelope}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{$Z.trace("getRawEnvelope release read lock"),t()}}async getPeerRecord(e){const t=await this.getRawEnvelope(e);if(null!=t)return await GL.createFromProtobuf(t)}async get(e){e=dd(e),$Z.trace("get wait for read lock");const t=await this.store.lock.readLock();$Z.trace("get got read lock");try{const t=await this.store.load(e);return t.addresses}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{$Z.trace("get release read lock"),t()}return[]}async set(e,t){if(e=dd(e),!Array.isArray(t))throw $Z.error("multiaddrs must be an array of Multiaddrs"),new Xu("multiaddrs must be an array of Multiaddrs",zZ.ERR_INVALID_PARAMETERS);$Z.trace("set await write lock");const n=await this.store.lock.writeLock();$Z.trace("set got write lock");let r,o,s=!1;try{const n=await qZ(e,t,this.addressFilter);if(0===n.length)return;try{if(r=await this.store.load(e),s=!0,new Set([...n.map((({multiaddr:e})=>e.toString())),...r.addresses.map((({multiaddr:e})=>e.toString()))]).size===r.addresses.length&&n.length===r.addresses.length)return}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}o=await this.store.patchOrCreate(e,{addresses:n}),$Z("set multiaddrs for %p",e)}finally{$Z.trace("set multiaddrs for %p",e),$Z("set release write lock"),n()}this.dispatchEvent(new hM(VZ,{detail:{peerId:e,multiaddrs:o.addresses.map((e=>e.multiaddr)),oldMultiaddrs:null==r?[]:r.addresses.map((({multiaddr:e})=>e))}})),s||this.dispatchEvent(new hM("peer",{detail:{id:e,multiaddrs:o.addresses.map((e=>e.multiaddr)),protocols:o.protocols}}))}async add(e,t){if(e=dd(e),!Array.isArray(t))throw $Z.error("multiaddrs must be an array of Multiaddrs"),new Xu("multiaddrs must be an array of Multiaddrs",zZ.ERR_INVALID_PARAMETERS);$Z.trace("add await write lock");const n=await this.store.lock.writeLock();let r,o,s;$Z.trace("add got write lock");try{const n=await qZ(e,t,this.addressFilter);if(0===n.length)return;try{if(o=await this.store.load(e),r=!0,new Set([...n.map((({multiaddr:e})=>e.toString())),...o.addresses.map((({multiaddr:e})=>e.toString()))]).size===o.addresses.length)return}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}s=await this.store.mergeOrCreate(e,{addresses:n}),$Z("added multiaddrs for %p",e)}finally{$Z.trace("set release write lock"),n()}this.dispatchEvent(new hM(VZ,{detail:{peerId:e,multiaddrs:s.addresses.map((e=>e.multiaddr)),oldMultiaddrs:null==o?[]:o.addresses.map((({multiaddr:e})=>e))}})),!0===r&&this.dispatchEvent(new hM("peer",{detail:{id:e,multiaddrs:s.addresses.map((e=>e.multiaddr)),protocols:s.protocols}}))}async delete(e){e=dd(e),$Z.trace("delete await write lock");const t=await this.store.lock.writeLock();let n;$Z.trace("delete got write lock");try{try{n=await this.store.load(e)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}await this.store.patchOrCreate(e,{addresses:[]})}finally{$Z.trace("delete release write lock"),t()}null!=n&&this.dispatchEvent(new hM(VZ,{detail:{peerId:e,multiaddrs:[],oldMultiaddrs:null==n?[]:n.addresses.map((({multiaddr:e})=>e))}}))}}async function qZ(e,t,n,r=!1){const o=[];return await Promise.all(t.map((async t=>{if(!Na(t))throw $Z.error("multiaddr must be an instance of Multiaddr"),new Xu("multiaddr must be an instance of Multiaddr",zZ.ERR_INVALID_PARAMETERS);const s=await n(e,t);s&&o.push({multiaddr:t,isCertified:r})}))),o}const WZ=pe("libp2p:peer-store:key-book"),YZ="change:pubkey";class GZ{constructor(e,t){this.dispatchEvent=e,this.store=t}async set(e,t){if(e=dd(e),!(t instanceof Uint8Array))throw WZ.error("publicKey must be an instance of Uint8Array to store data"),new Xu("publicKey must be an instance of PublicKey",zZ.ERR_INVALID_PARAMETERS);WZ.trace("set await write lock");const n=await this.store.lock.writeLock();WZ.trace("set got write lock");let r,o=!1;try{try{if(r=await this.store.load(e),null!=r.pubKey&&wa(r.pubKey,t))return}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}await this.store.patchOrCreate(e,{pubKey:t}),o=!0}finally{WZ.trace("set release write lock"),n()}o&&this.dispatchEvent(new hM(YZ,{detail:{peerId:e,publicKey:t,oldPublicKey:null==r?void 0:r.pubKey}}))}async get(e){e=dd(e),WZ.trace("get await write lock");const t=await this.store.lock.readLock();WZ.trace("get got write lock");try{const t=await this.store.load(e);return t.pubKey}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{WZ("get release write lock"),t()}}async delete(e){e=dd(e),WZ.trace("delete await write lock");const t=await this.store.lock.writeLock();let n;WZ.trace("delete got write lock");try{try{n=await this.store.load(e)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}await this.store.patchOrCreate(e,{pubKey:void 0})}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{WZ.trace("delete release write lock"),t()}this.dispatchEvent(new hM(YZ,{detail:{peerId:e,publicKey:void 0,oldPublicKey:null==n?void 0:n.pubKey}}))}}const ZZ=pe("libp2p:peer-store:metadata-book"),JZ="change:metadata";class QZ{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){e=dd(e),ZZ.trace("get await read lock");const t=await this.store.lock.readLock();ZZ.trace("get got read lock");try{const t=await this.store.load(e);return t.metadata}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{ZZ.trace("get release read lock"),t()}return new Map}async getValue(e,t){e=dd(e),ZZ.trace("getValue await read lock");const n=await this.store.lock.readLock();ZZ.trace("getValue got read lock");try{const n=await this.store.load(e);return n.metadata.get(t)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{ZZ.trace("getValue release write lock"),n()}}async set(e,t){if(e=dd(e),!(t instanceof Map))throw ZZ.error("valid metadata must be provided to store data"),new Xu("valid metadata must be provided",zZ.ERR_INVALID_PARAMETERS);ZZ.trace("set await write lock");const n=await this.store.lock.writeLock();let r;ZZ.trace("set got write lock");try{try{r=await this.store.load(e)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}await this.store.mergeOrCreate(e,{metadata:t})}finally{ZZ.trace("set release write lock"),n()}this.dispatchEvent(new hM(JZ,{detail:{peerId:e,metadata:t,oldMetadata:null==r?new Map:r.metadata}}))}async setValue(e,t,n){if(e=dd(e),"string"!==typeof t||!(n instanceof Uint8Array))throw ZZ.error("valid key and value must be provided to store data"),new Xu("valid key and value must be provided",zZ.ERR_INVALID_PARAMETERS);ZZ.trace("setValue await write lock");const r=await this.store.lock.writeLock();let o,s;ZZ.trace("setValue got write lock");try{try{o=await this.store.load(e);const r=o.metadata.get(t);if(null!=r&&wa(n,r))return}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}s=await this.store.mergeOrCreate(e,{metadata:new Map([[t,n]])})}finally{ZZ.trace("setValue release write lock"),r()}this.dispatchEvent(new hM(JZ,{detail:{peerId:e,metadata:s.metadata,oldMetadata:null==o?new Map:o.metadata}}))}async delete(e){e=dd(e),ZZ.trace("delete await write lock");const t=await this.store.lock.writeLock();let n;ZZ.trace("delete got write lock");try{try{n=await this.store.load(e)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}null!=n&&await this.store.patch(e,{metadata:new Map})}finally{ZZ.trace("delete release write lock"),t()}null!=n&&this.dispatchEvent(new hM(JZ,{detail:{peerId:e,metadata:new Map,oldMetadata:n.metadata}}))}async deleteValue(e,t){e=dd(e),ZZ.trace("deleteValue await write lock");const n=await this.store.lock.writeLock();let r,o;ZZ.trace("deleteValue got write lock");try{o=await this.store.load(e),r=o.metadata,r.delete(t),await this.store.patch(e,{metadata:r})}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{ZZ.trace("deleteValue release write lock"),n()}null!=r&&this.dispatchEvent(new hM(JZ,{detail:{peerId:e,metadata:r,oldMetadata:null==o?new Map:o.metadata}}))}}const XZ=pe("libp2p:peer-store:proto-book"),eJ="change:protocols";class tJ{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){XZ.trace("get wait for read lock");const t=await this.store.lock.readLock();XZ.trace("get got read lock");try{const t=await this.store.load(e);return t.protocols}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}finally{XZ.trace("get release read lock"),t()}return[]}async set(e,t){if(e=dd(e),!Array.isArray(t))throw XZ.error("protocols must be provided to store data"),new Xu("protocols must be provided",zZ.ERR_INVALID_PARAMETERS);XZ.trace("set await write lock");const n=await this.store.lock.writeLock();let r,o;XZ.trace("set got write lock");try{try{if(r=await this.store.load(e),new Set([...t]).size===r.protocols.length)return}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}o=await this.store.patchOrCreate(e,{protocols:t}),XZ("stored provided protocols for %p",e)}finally{XZ.trace("set release write lock"),n()}this.dispatchEvent(new hM(eJ,{detail:{peerId:e,protocols:o.protocols,oldProtocols:null==r?[]:r.protocols}}))}async add(e,t){if(e=dd(e),!Array.isArray(t))throw XZ.error("protocols must be provided to store data"),new Xu("protocols must be provided",zZ.ERR_INVALID_PARAMETERS);XZ.trace("add await write lock");const n=await this.store.lock.writeLock();let r,o;XZ.trace("add got write lock");try{try{if(r=await this.store.load(e),new Set([...r.protocols,...t]).size===r.protocols.length)return}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}o=await this.store.mergeOrCreate(e,{protocols:t}),XZ("added provided protocols for %p",e)}finally{XZ.trace("add release write lock"),n()}this.dispatchEvent(new hM(eJ,{detail:{peerId:e,protocols:o.protocols,oldProtocols:null==r?[]:r.protocols}}))}async remove(e,t){if(e=dd(e),!Array.isArray(t))throw XZ.error("protocols must be provided to store data"),new Xu("protocols must be provided",zZ.ERR_INVALID_PARAMETERS);XZ.trace("remove await write lock");const n=await this.store.lock.writeLock();let r,o;XZ.trace("remove got write lock");try{try{r=await this.store.load(e);const n=new Set(r.protocols);for(const e of t)n.delete(e);if(r.protocols.length===n.size)return;t=Array.from(n)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}o=await this.store.patchOrCreate(e,{protocols:t})}finally{XZ.trace("remove release write lock"),n()}this.dispatchEvent(new hM(eJ,{detail:{peerId:e,protocols:o.protocols,oldProtocols:null==r?[]:r.protocols}}))}async delete(e){e=dd(e),XZ.trace("delete await write lock");const t=await this.store.lock.writeLock();let n;XZ.trace("delete got write lock");try{try{n=await this.store.load(e)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik}await this.store.patchOrCreate(e,{protocols:[]})}finally{XZ.trace("delete release write lock"),t()}null!=n&&this.dispatchEvent(new hM(eJ,{detail:{peerId:e,protocols:[],oldProtocols:n.protocols}}))}}var nJ,rJ,oJ;(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{if(!1!==n.lengthDelimited&&t.fork(),null!=e.addresses)for(const r of e.addresses)t.uint32(10),rJ.codec().encode(r,t);if(null!=e.protocols)for(const r of e.protocols)t.uint32(18),t.string(r);if(null!=e.metadata)for(const r of e.metadata)t.uint32(26),oJ.codec().encode(r,t);null!=e.pubKey&&(t.uint32(34),t.bytes(e.pubKey)),null!=e.peerRecordEnvelope&&(t.uint32(42),t.bytes(e.peerRecordEnvelope)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={addresses:[],protocols:[],metadata:[]},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.addresses.push(rJ.codec().decode(e,e.uint32()));break;case 2:n.protocols.push(e.string());break;case 3:n.metadata.push(oJ.codec().decode(e,e.uint32()));break;case 4:n.pubKey=e.bytes();break;case 5:n.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(nJ||(nJ={})),function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.multiaddr&&e.multiaddr.byteLength>0&&(t.uint32(10),t.bytes(e.multiaddr)),null!=e.isCertified&&(t.uint32(16),t.bool(e.isCertified)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={multiaddr:new Uint8Array(0)},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())}(rJ||(rJ={})),function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.key&&""!==e.key&&(t.uint32(10),t.string(e.key)),null!=e.value&&e.value.byteLength>0&&(t.uint32(18),t.bytes(e.value)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={key:"",value:new Uint8Array(0)},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.key=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())}(oJ||(oJ={}));const sJ=pe("libp2p:peer-store:store"),iJ="/peers/";class aJ{constructor(e){this.components=e,this.lock=Jx({name:"peer-store",singleProcess:!0})}_peerIdToDatastoreKey(e){if(null==e.type)throw sJ.error("peerId must be an instance of peer-id to store data"),new Xu("peerId must be an instance of peer-id",zZ.ERR_INVALID_PARAMETERS);const t=e.toCID().toString();return new Tc(`${iJ}${t}`)}async has(e){return await this.components.datastore.has(this._peerIdToDatastoreKey(e))}async delete(e){await this.components.datastore.delete(this._peerIdToDatastoreKey(e))}async load(e){const t=await this.components.datastore.get(this._peerIdToDatastoreKey(e)),n=nJ.decode(t),r=new Map;for(const o of n.metadata)r.set(o.key,o.value);return{...n,id:e,addresses:n.addresses.map((({multiaddr:e,isCertified:t})=>({multiaddr:Da(e),isCertified:t??!1}))),metadata:r,pubKey:n.pubKey??void 0,peerRecordEnvelope:n.peerRecordEnvelope??void 0}}async save(e){if(null!=e.pubKey&&null!=e.id.publicKey&&!wa(e.pubKey,e.id.publicKey))throw sJ.error("peer publicKey bytes do not match peer id publicKey bytes"),new Xu("publicKey bytes do not match peer id publicKey bytes",zZ.ERR_INVALID_PARAMETERS);const t=new Set,n=e.addresses.filter((e=>!t.has(e.multiaddr.toString())&&(t.add(e.multiaddr.toString()),!0))).sort(((e,t)=>e.multiaddr.toString().localeCompare(t.multiaddr.toString()))).map((({multiaddr:e,isCertified:t})=>({multiaddr:e.bytes,isCertified:t}))),r=[];[...e.metadata.keys()].sort().forEach((t=>{const n=e.metadata.get(t);null!=n&&r.push({key:t,value:n})}));const o=nJ.encode({addresses:n,protocols:e.protocols.sort(),pubKey:e.pubKey,metadata:r,peerRecordEnvelope:e.peerRecordEnvelope});return await this.components.datastore.put(this._peerIdToDatastoreKey(e.id),o.subarray()),await this.load(e.id)}async patch(e,t){const n=await this.load(e);return await this._patch(e,t,n)}async patchOrCreate(e,t){let n;try{n=await this.load(e)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik;n={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._patch(e,t,n)}async _patch(e,t,n){return await this.save({...n,...t,id:e})}async merge(e,t){const n=await this.load(e);return await this._merge(e,t,n)}async mergeOrCreate(e,t){let n;try{n=await this.load(e)}catch(ik){if(ik.code!==zZ.ERR_NOT_FOUND)throw ik;n={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._merge(e,t,n)}async _merge(e,t,n){const r=new Map;return n.addresses.forEach((e=>{r.set(e.multiaddr.toString(),e.isCertified)})),(t.addresses??[]).forEach((e=>{const t=e.multiaddr.toString(),n=Boolean(r.get(t)),o=n||e.isCertified;r.set(t,o)})),await this.save({id:e,addresses:Array.from(r.entries()).map((([e,t])=>({multiaddr:Da(e),isCertified:t}))),protocols:Array.from(new Set([...n.protocols??[],...t.protocols??[]])),metadata:new Map([...n.metadata?.entries()??[],...t.metadata?.entries()??[]]),pubKey:t.pubKey??(null!=n?n.pubKey:void 0),peerRecordEnvelope:t.peerRecordEnvelope??(null!=n?n.peerRecordEnvelope:void 0)})}async*all(){for await(const e of this.components.datastore.queryKeys({prefix:iJ})){const t=e.toString().split("/")[2],n=X.decode(t);yield this.load(pd(n))}}}var lJ,cJ;(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{if(!1!==n.lengthDelimited&&t.fork(),null!=e.tags)for(const r of e.tags)t.uint32(10),cJ.codec().encode(r,t);!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={tags:[]},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.tags.push(cJ.codec().decode(e,e.uint32()));break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(lJ||(lJ={})),function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.name&&""!==e.name&&(t.uint32(10),t.string(e.name)),null!=e.value&&(t.uint32(16),t.uint32(e.value)),null!=e.expiry&&(t.uint32(24),t.uint64(e.expiry)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={name:""},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.name=e.string();break;case 2:n.value=e.uint32();break;case 3:n.expiry=e.uint64();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())}(cJ||(cJ={}));const uJ=pe("libp2p:peer-store");class dJ extends uM{constructor(e,t={}){super(),this.components=e,this.store=new aJ(e),this.addressBook=new KZ(this.dispatchEvent.bind(this),this.store,t.addressFilter),this.keyBook=new GZ(this.dispatchEvent.bind(this),this.store),this.metadataBook=new QZ(this.dispatchEvent.bind(this),this.store),this.protoBook=new tJ(this.dispatchEvent.bind(this),this.store)}async forEach(e){uJ.trace("getPeers await read lock");const t=await this.store.lock.readLock();uJ.trace("getPeers got read lock");try{for await(const t of this.store.all())t.id.equals(this.components.peerId)||e(t)}finally{uJ.trace("getPeers release read lock"),t()}}async all(){const e=[];return await this.forEach((t=>{e.push(t)})),e}async delete(e){uJ.trace("delete await write lock");const t=await this.store.lock.writeLock();uJ.trace("delete got write lock");try{await this.store.delete(e)}finally{uJ.trace("delete release write lock"),t()}}async get(e){uJ.trace("get await read lock");const t=await this.store.lock.readLock();uJ.trace("get got read lock");try{return await this.store.load(e)}finally{uJ.trace("get release read lock"),t()}}async has(e){uJ.trace("has await read lock");const t=await this.store.lock.readLock();uJ.trace("has got read lock");try{return await this.store.has(e)}finally{uJ.trace("has release read lock"),t()}}async tagPeer(e,t,n={}){const r=n.value??0,o=Math.round(r),s=n.ttl??void 0;if(o!==r||o<0||o>100)throw new Xu("Tag value must be between 0-100","ERR_TAG_VALUE_OUT_OF_BOUNDS");const i=await this.metadataBook.getValue(e,"tags");let a=[];null!=i&&(a=lJ.decode(i).tags),a=a.filter((e=>e.name!==t)),a.push({name:t,value:o,expiry:null==s?void 0:BigInt(Date.now()+s)}),await this.metadataBook.setValue(e,"tags",lJ.encode({tags:a}).subarray())}async unTagPeer(e,t){const n=await this.metadataBook.getValue(e,"tags");let r=[];null!=n&&(r=lJ.decode(n).tags),r=r.filter((e=>e.name!==t)),await this.metadataBook.setValue(e,"tags",lJ.encode({tags:r}).subarray())}async getTags(e){const t=await this.metadataBook.getValue(e,"tags");let n=[];null!=t&&(n=lJ.decode(t).tags);const r=BigInt(Date.now()),o=n.filter((e=>null==e.expiry||e.expiry>r));return o.length!==n.length&&await this.metadataBook.setValue(e,"tags",lJ.encode({tags:o}).subarray()),o.map((e=>({name:e.name,value:e.value??0})))}}class hJ{constructor(e){this.dht=e}async provide(e){await Gm(this.dht.provide(e))}async*findProviders(e,t={}){for await(const n of this.dht.findProviders(e,t))"PROVIDER"===n.name&&(yield*n.providers)}async put(e,t,n){await Gm(this.dht.put(e,t,n))}async get(e,t){for await(const n of this.dht.get(e,t))if("VALUE"===n.name)return n.value;throw fe(new Error("Not found"),"ERR_NOT_FOUND")}}class pJ{constructor(e={}){this._started=!1,this._peerId=e.peerId,this._addressManager=e.addressManager,this._peerStore=e.peerStore,this._upgrader=e.upgrader,this._metrics=e.metrics,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._connectionGater=e.connectionGater,this._contentRouting=e.contentRouting,this._peerRouting=e.peerRouting,this._datastore=e.datastore,this._connectionProtector=e.connectionProtector,this._dht=e.dht,this._pubsub=e.pubsub,this._dialer=e.dialer}isStarted(){return this._started}async beforeStart(){await Promise.all(Object.values(this).filter((e=>sW(e))).map((async e=>{null!=e.beforeStart&&await e.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((e=>sW(e))).map((async e=>{await e.start()}))),this._started=!0}async afterStart(){await Promise.all(Object.values(this).filter((e=>sW(e))).map((async e=>{null!=e.afterStart&&await e.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((e=>sW(e))).map((async e=>{null!=e.beforeStop&&await e.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((e=>sW(e))).map((async e=>{await e.stop()}))),this._started=!1}async afterStop(){await Promise.all(Object.values(this).filter((e=>sW(e))).map((async e=>{null!=e.afterStop&&await e.afterStop()})))}get peerId(){if(null==this._peerId)throw fe(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this._peerId}set peerId(e){this._peerId=e}get addressManager(){if(null==this._addressManager)throw fe(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this._addressManager}set addressManager(e){this._addressManager=e}get peerStore(){if(null==this._peerStore)throw fe(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this._peerStore}set peerStore(e){this._peerStore=e}get upgrader(){if(null==this._upgrader)throw fe(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this._upgrader}set upgrader(e){this._upgrader=e}get registrar(){if(null==this._registrar)throw fe(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this._registrar}set registrar(e){this._registrar=e}get connectionManager(){if(null==this._connectionManager)throw fe(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this._connectionManager}set connectionManager(e){this._connectionManager=e}get transportManager(){if(null==this._transportManager)throw fe(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this._transportManager}set transportManager(e){this._transportManager=e}get connectionGater(){if(null==this._connectionGater)throw fe(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this._connectionGater}set connectionGater(e){this._connectionGater=e}get contentRouting(){if(null==this._contentRouting)throw fe(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this._contentRouting}set contentRouting(e){this._contentRouting=e}get peerRouting(){if(null==this._peerRouting)throw fe(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this._peerRouting}set peerRouting(e){this._peerRouting=e}get datastore(){if(null==this._datastore)throw fe(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this._datastore}set datastore(e){this._datastore=e}get connectionProtector(){return this._connectionProtector}set connectionProtector(e){this._connectionProtector=e}get dialer(){if(null==this._dialer)throw fe(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this._dialer}set dialer(e){this._dialer=e}get metrics(){return this._metrics}set metrics(e){this._metrics=e}get dht(){return this._dht}set dht(e){this._dht=e}get pubsub(){return this._pubsub}set pubsub(e){this._pubsub=e}}var fJ=n(3692);const gJ=globalThis.fetch,mJ=globalThis.Headers;globalThis.Request,globalThis.Response;function yJ(e,t,n){return`${e}?name=${t}&type=${n}`}async function vJ(e,t){const n=await gJ(e,{headers:new mJ({accept:"application/dns-json"}),signal:t}),r=await n.json();return r}function wJ(e,t){return`${t}_${e}`}const bJ=Object.assign(x("dns-over-http-resolver"),{error:x("dns-over-http-resolver:error")});class SJ{constructor(e={}){this._cache=new fJ({max:e?.maxCache??100}),this._TXTcache=new fJ({max:e?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=e.request??vJ,this._abortControllers=[]}cancel(){this._abortControllers.forEach((e=>e.abort()))}getServers(){return this._servers}_getShuffledServers(){const e=[...this._servers];for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*t),r=e[t];e[t]=e[n],e[n]=r}return e}setServers(e){this._servers=e}async resolve(e,t="A"){switch(t){case"A":return await this.resolve4(e);case"AAAA":return await this.resolve6(e);case"TXT":return await this.resolveTxt(e);default:throw new Error(`${t} is not supported`)}}async resolve4(e){const t="A",n=this._cache.get(wJ(e,t));if(null!=n)return n;let r=!1;for(const o of this._getShuffledServers()){const n=new AbortController;this._abortControllers.push(n);try{const r=await this._request(yJ(o,e,t),n.signal),s=r.Answer.map((e=>e.data)),i=Math.min(...r.Answer.map((e=>e.TTL)));return this._cache.set(wJ(e,t),s,{ttl:i}),s}catch(ik){n.signal.aborted&&(r=!0),bJ.error(`${o} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==n))}}if(r)throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}async resolve6(e){const t="AAAA",n=this._cache.get(wJ(e,t));if(null!=n)return n;let r=!1;for(const o of this._getShuffledServers()){const n=new AbortController;this._abortControllers.push(n);try{const r=await this._request(yJ(o,e,t),n.signal),s=r.Answer.map((e=>e.data)),i=Math.min(...r.Answer.map((e=>e.TTL)));return this._cache.set(wJ(e,t),s,{ttl:i}),s}catch(ik){n.signal.aborted&&(r=!0),bJ.error(`${o} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==n))}}if(r)throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}async resolveTxt(e){const t="TXT",n=this._TXTcache.get(wJ(e,t));if(null!=n)return n;let r=!1;for(const o of this._getShuffledServers()){const n=new AbortController;this._abortControllers.push(n);try{const r=await this._request(yJ(o,e,t),n.signal),s=r.Answer.map((e=>[e.data.replace(/['"]+/g,"")])),i=Math.min(...r.Answer.map((e=>e.TTL)));return this._TXTcache.set(wJ(e,t),s,{ttl:i}),s}catch(ik){n.signal.aborted&&(r=!0),bJ.error(`${o} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==n))}}if(r)throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}}var _J=SJ,EJ=_J;const{code:kJ}=Mi("dnsaddr");async function CJ(e,t={}){const n=new EJ;null!=t.signal&&t.signal.addEventListener("abort",(()=>{n.cancel()}));const r=e.getPeerId(),[,o]=e.stringTuples().find((([e])=>e===kJ))??[];if(null==o)throw new Error("No hostname found in multiaddr");const s=await n.resolveTxt(`_dnsaddr.${o}`);let i=s.flat().map((e=>e.split("=")[1])).filter(Boolean);return null!=r&&(i=i.filter((e=>e.includes(r)))),i}const IJ=3e4,AJ=3e4,TJ=100,RJ=4,xJ=25,OJ={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:e=>e},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:TJ,maxDialsPerPeer:RJ,dialTimeout:IJ,inboundUpgradeTimeout:AJ,resolvers:{dnsaddr:CJ},addressSorter:YY},connectionGater:{},transportManager:{faultTolerance:Zq.FATAL_ALL},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:SY,enabled:!1,ttl:_Y},hop:{enabled:!1,active:!1,timeout:3e4},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:nZ},timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1},ping:{protocolPrefix:"ipfs",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4},fetch:{protocolPrefix:"libp2p",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4}};function NJ(e){const t=T(OJ,e);if(null==t.transports||t.transports.length<1)throw fe(new Error(iW.ERR_TRANSPORTS_REQUIRED),aW.ERR_TRANSPORTS_REQUIRED);if(null==t.connectionEncryption||0===t.connectionEncryption.length)throw fe(new Error(iW.CONN_ENCRYPTION_REQUIRED),aW.CONN_ENCRYPTION_REQUIRED);if(null===t.connectionProtector&&null!=globalThis.process?.env?.LIBP2P_FORCE_PNET)throw fe(new Error(iW.ERR_PROTECTOR_REQUIRED),aW.ERR_PROTECTOR_REQUIRED);return t.identify.host.agentVersion===nZ&&(RZ||AZ?t.identify.host.agentVersion+=` UserAgent=${globalThis.process.version}`:(IZ||xZ||TZ||OZ)&&(t.identify.host.agentVersion+=` UserAgent=${globalThis.navigator.userAgent}`)),t}var PJ;(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.id&&(t.uint32(10),t.bytes(e.id)),null!=e.pubKey&&(t.uint32(18),t.bytes(e.pubKey)),null!=e.privKey&&(t.uint32(26),t.bytes(e.privKey)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.id=e.bytes();break;case 2:n.pubKey=e.bytes();break;case 3:n.privKey=e.bytes();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(PJ||(PJ={}));const DJ=async()=>{const e=await xg("Ed25519"),t=await LJ(e);if("Ed25519"===t.type)return t;throw new Error(`Generated unexpected PeerId type "${t.type}"`)},UJ=async e=>{const t=await xg("RSA",e?.bits??2048),n=await LJ(t);if("RSA"===n.type)return n;throw new Error(`Generated unexpected PeerId type "${n.type}"`)};async function LJ(e){return await gd(Ng(e.public),Dg(e))}class BJ extends uM{get[Jq](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}get lan(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}get(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}findProviders(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}findPeer(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}getClosestPeers(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}provide(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}put(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}async getMode(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}async setMode(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}async refreshRoutingTable(){throw fe(new Error(iW.DHT_DISABLED),aW.DHT_DISABLED)}}class MJ extends uM{constructor(){super(...arguments),this.topicValidators=new Map}isStarted(){return!1}start(){}stop(){}get globalSignaturePolicy(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}get multicodecs(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}getPeers(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}getTopics(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}subscribe(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}unsubscribe(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}getSubscribers(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}async publish(){throw fe(new Error(iW.PUBSUB_DISABLED),aW.ERR_PUBSUB_DISABLED)}}var FJ=n(5103);const jJ=pe("libp2p:dialer:dial-request");class zJ{constructor(e){const{addrs:t,dialAction:n,dialer:r}=e;this.addrs=t,this.dialer=r,this.dialAction=n}async run(e={}){const t=this.dialer.getTokens(this.addrs.length);if(t.length<1)throw fe(new Error("No dial tokens available"),aW.ERR_NO_DIAL_TOKENS);const n=new FJ;for(const i of t)n.push(i).catch((e=>{jJ.error(e)}));const r=this.addrs.map((()=>{const e=new AbortController;try{(0,hW.setMaxListeners)?.(1/0,e.signal)}catch{}return e}));if(null!=e.signal)try{(0,hW.setMaxListeners)?.(1/0,e.signal)}catch{}let o=0,s=!1;try{return await Promise.any(this.addrs.map((async(i,a)=>{const l=await n.shift();if(s)throw this.dialer.releaseToken(t.splice(t.indexOf(l),1)[0]),fe(new Error("dialAction already succeeded"),aW.ERR_ALREADY_SUCCEEDED);const c=r[a];if(null==c)throw fe(new Error("dialAction did not come with an AbortController"),aW.ERR_INVALID_PARAMETERS);let u;try{const t=c.signal;u=await this.dialAction(i,{...e,signal:null!=e.signal?(0,Nc.anySignal)([t,e.signal]):t}),r[a]=void 0}finally{o++,this.addrs.length-o>=t.length?n.push(l).catch((e=>{jJ.error(e)})):this.dialer.releaseToken(t.splice(t.indexOf(l),1)[0])}if(null==u)throw fe(new Error("dialAction led to empty object"),aW.ERR_TRANSPORT_DIAL_FAILED);return s=!0,u})))}finally{r.forEach((e=>{void 0!==e&&e.abort()})),t.forEach((e=>this.dialer.releaseToken(e)))}}}const $J=pe("libp2p:dialer");class VJ{constructor(e,t={}){this.started=!1,this.addressSorter=t.addressSorter??YY,this.maxAddrsToDial=t.maxAddrsToDial??xJ,this.timeout=t.dialTimeout??IJ,this.maxDialsPerPeer=t.maxDialsPerPeer??RJ,this.tokens=[...new Array(t.maxParallelDials??TJ)].map(((e,t)=>t)),this.components=e,this.pendingDials=kG({name:"libp2p_dialler_pending_dials",metrics:e.metrics}),this.pendingDialTargets=kG({name:"libp2p_dialler_pending_dial_targets",metrics:e.metrics});for(const[n,r]of Object.entries(t.resolvers??{}))Ta.set(n,r)}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1;for(const e of this.pendingDials.values())try{e.controller.abort()}catch(ik){$J.error(ik)}this.pendingDials.clear();for(const e of this.pendingDialTargets.values())e.abort();this.pendingDialTargets.clear()}async dial(e,t={}){const{peerId:n,multiaddr:r}=NW(e);if(null!=n){if(this.components.peerId.equals(n))throw fe(new Error("Tried to dial self"),aW.ERR_DIALED_SELF);if(null!=r&&($J("storing multiaddrs %p",n,r),await this.components.peerStore.addressBook.add(n,[r])),await this.components.connectionGater.denyDialPeer(n))throw fe(new Error("The dial request is blocked by gater.allowDialPeer"),aW.ERR_PEER_DIAL_INTERCEPTED)}$J("creating dial target for %p",n);const o=new AbortController,s=KJ();this.pendingDialTargets.set(s,o);let i,a=o.signal;null!=t.signal&&(a=(0,Nc.anySignal)([a,t.signal]));try{i=await this._createDialTarget({peerId:n,multiaddr:r},{...t,signal:a})}finally{this.pendingDialTargets.delete(s)}if(0===i.addrs.length)throw fe(new Error("The dial request has no valid addresses"),aW.ERR_NO_VALID_ADDRESSES);const l=this.pendingDials.get(i.id)??this._createPendingDial(i,t);try{const e=await l.promise;return $J("dial succeeded to %s",i.id),e}catch(ik){throw $J("dial failed to %s",i.id,ik),l.controller.signal.aborted&&(ik.code=aW.ERR_TIMEOUT),$J.error(ik),ik}finally{l.destroy()}}async _createDialTarget(e,t){let n=[];if(Na(e.multiaddr)&&n.push(e.multiaddr),!Na(e.multiaddr)&&td(e.peerId)&&n.push(...await this._loadAddresses(e.peerId)),n=(await Promise.all(n.map((async e=>await this._resolve(e,t))))).flat().filter((e=>Boolean(this.components.transportManager.transportForMultiaddr(e)))),n=[...new Set(n.map((e=>e.toString())))].map((e=>Da(e))),n.length>this.maxAddrsToDial)throw fe(new Error("dial with more addresses than allowed"),aW.ERR_TOO_MANY_ADDRESSES);const r=td(e.peerId)?e.peerId:void 0;if(null!=r){const e=`/p2p/${r.toString()}`;n=n.map((t=>{const n=t.getPeerId();return null!=n&&r.equals(n)?t:t.encapsulate(e)}))}return{id:null==r?KJ():r.toString(),addrs:n}}async _loadAddresses(e){const t=await this.components.peerStore.addressBook.get(e);return(await Promise.all(t.map((async t=>{const n=await this.components.connectionGater.denyDialMultiaddr(e,t.multiaddr);return!n&&t})))).filter(HJ).sort(this.addressSorter).map((e=>e.multiaddr))}_createPendingDial(e,t={}){const n=async(e,t={})=>{if(!0===t.signal?.aborted)throw fe(new Error("already aborted"),aW.ERR_ALREADY_ABORTED);return await this.components.transportManager.dial(e,t).catch((t=>{throw $J.error("dial to %s failed",e,t),t}))},r=new zJ({addrs:e.addrs,dialAction:n,dialer:this}),o=new yi.TimeoutController(this.timeout),s=[o.signal];null!=t.signal&&s.push(t.signal);const i=(0,Nc.anySignal)(s);try{(0,hW.setMaxListeners)?.(1/0,i)}catch{}const a={dialRequest:r,controller:o,promise:r.run({...t,signal:i}),destroy:()=>{o.clear(),this.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,a),a}getTokens(e){const t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),n=this.tokens.splice(0,t);return $J("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),n}releaseToken(e){this.tokens.includes(e)||($J("token %d released",e),this.tokens.push(e))}async _resolve(e,t){const n=e.protoNames().includes("dnsaddr");if(!n)return[e];const r=await this._resolveRecord(e,t),o=await Promise.all(r.map((async e=>await this._resolve(e,t)))),s=o.flat();return s.reduce(((e,t)=>(null==e.find((e=>e.equals(t)))&&e.push(t),e)),[])}async _resolveRecord(e,t){try{e=Da(e.toString());const n=await e.resolve(t);return n}catch(ik){return $J.error(`multiaddr ${e.toString()} could not be resolved`,ik),[]}}}function HJ(e){return Boolean(e)}function KJ(){return`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`}const qJ=pe("libp2p");class WJ extends uM{constructor(e){super(),this.started=!1,this.peerId=e.peerId;const t=this.components=new pJ({peerId:e.peerId,datastore:e.datastore??new uy,connectionGater:{denyDialPeer:async()=>await Promise.resolve(!1),denyDialMultiaddr:async()=>await Promise.resolve(!1),denyInboundConnection:async()=>await Promise.resolve(!1),denyOutboundConnection:async()=>await Promise.resolve(!1),denyInboundEncryptedConnection:async()=>await Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>await Promise.resolve(!1),denyInboundUpgradedConnection:async()=>await Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>await Promise.resolve(!1),filterMultiaddrForPeer:async()=>await Promise.resolve(!0),...e.connectionGater}});t.peerStore=new dJ(t,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...e.peerStore}),this.services=[t],null!=e.metrics&&(this.metrics=this.components.metrics=this.configureComponent(e.metrics(this.components))),this.peerStore=this.components.peerStore,this.peerStore.addEventListener("peer",(e=>{const{detail:t}=e;this.dispatchEvent(new hM("peer:discovery",{detail:t}))})),null!=e.connectionProtector&&(this.components.connectionProtector=e.connectionProtector(t)),this.components.upgrader=new QG(this.components,{connectionEncryption:(e.connectionEncryption??[]).map((e=>this.configureComponent(e(this.components)))),muxers:(e.streamMuxers??[]).map((e=>this.configureComponent(e(this.components)))),inboundUpgradeTimeout:e.connectionManager.inboundUpgradeTimeout}),this.components.dialer=new VJ(this.components,e.connectionManager),this.connectionManager=this.components.connectionManager=new LW(this.components,e.connectionManager),this.components.connectionManager.addEventListener("peer:disconnect",(e=>{this.dispatchEvent(new hM("peer:disconnect",{detail:e.detail}))})),this.components.connectionManager.addEventListener("peer:connect",(e=>{this.dispatchEvent(new hM("peer:connect",{detail:e.detail}))})),this.registrar=this.components.registrar=new WG(this.components),this.components.transportManager=new IG(this.components,e.transportManager),this.components.addressManager=new yW(this.components,e.addresses),this.configureComponent(new FZ(this.components)),this.configureComponent(new jW(this.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));const n=yG.generateOptions();this.keychain=this.configureComponent(new yG(this.components,{...n,...e.keychain})),this.services.push(new BZ(this.components,e.nat)),e.transports.forEach((e=>{this.components.transportManager.add(this.configureComponent(e(this.components)))})),this.identifyService=new uZ(this.components,{...e.identify}),this.configureComponent(this.identifyService),null!=e.dht?this.dht=this.components.dht=e.dht(this.components):this.dht=new BJ,null!=e.pubsub?this.pubsub=this.components.pubsub=e.pubsub(this.components):this.pubsub=new MJ;const r=(e.peerRouters??[]).map((e=>this.configureComponent(e(this.components))));null!=e.dht&&(r.push(this.configureComponent(new jZ(this.dht))),this.dht.addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))),this.peerRouting=this.components.peerRouting=this.configureComponent(new fW(this.components,{...e.peerRouting,routers:r}));const o=(e.contentRouters??[]).map((e=>this.configureComponent(e(this.components))));null!=e.dht&&o.push(this.configureComponent(new hJ(this.dht))),this.contentRouting=this.components.contentRouting=this.configureComponent(new gW(this.components,{routers:o})),e.relay.enabled&&(this.components.transportManager.add(this.configureComponent(new vY(this.components,e.relay))),this.configureComponent(new XY(this.components,{addressSorter:e.connectionManager.addressSorter,...e.relay}))),this.fetchService=this.configureComponent(new mZ(this.components,{...e.fetch})),this.pingService=this.configureComponent(new SZ(this.components,{...e.ping}));for(const s of e.peerDiscovery??[]){const e=this.configureComponent(s(this.components));e.addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))}}configureComponent(e){return sW(e)&&this.services.push(e),e}async start(){if(!this.started){this.started=!0,qJ("libp2p is starting");try{await Promise.all(this.services.map((async e=>{null!=e.beforeStart&&await e.beforeStart()}))),await Promise.all(this.services.map((e=>e.start()))),await Promise.all(this.services.map((async e=>{null!=e.afterStart&&await e.afterStart()}))),qJ("libp2p has started")}catch(ik){throw qJ.error("An error occurred starting libp2p",ik),await this.stop(),ik}}}async stop(){this.started&&(qJ("libp2p is stopping"),this.started=!1,await Promise.all(this.services.map((async e=>{null!=e.beforeStop&&await e.beforeStop()}))),await Promise.all(this.services.map((e=>e.stop()))),await Promise.all(this.services.map((async e=>{null!=e.afterStop&&await e.afterStop()}))),qJ("libp2p has stopped"))}isStarted(){return this.started}getConnections(e){return this.components.connectionManager.getConnections(e)}getPeers(){const e=new TW;for(const t of this.components.connectionManager.getConnections())e.add(t.remotePeer);return Array.from(e)}async dial(e,t={}){return await this.components.connectionManager.openConnection(e,t)}async dialProtocol(e,t,n={}){if(null==t)throw fe(new Error("no protocols were provided to open a stream"),aW.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(t=Array.isArray(t)?t:[t],0===t.length)throw fe(new Error("no protocols were provided to open a stream"),aW.ERR_INVALID_PROTOCOLS_FOR_STREAM);const r=await this.dial(e,n);return await r.newStream(t,n)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(e){Na(e)&&(e=hd(e.getPeerId()??"")),await this.components.connectionManager.closeConnections(e)}async getPublicKey(e,t={}){if(qJ("getPublicKey %p",e),null!=e.publicKey)return e.publicKey;const n=await this.peerStore.get(e);if(null!=n.pubKey)return n.pubKey;if(null==this.dht)throw fe(new Error("Public key was not in the peer store and the DHT is not enabled"),aW.ERR_NO_ROUTERS_AVAILABLE);const r=ji([mi("/pk/"),e.multihash.digest]);for await(const o of this.dht.get(r,t))if("VALUE"===o.name){const t=Og(o.value);return await this.peerStore.keyBook.set(e,o.value),t.bytes}throw fe(new Error(`Node not responding with its public key: ${e.toString()}`),aW.ERR_INVALID_RECORD)}async fetch(e,t,n={}){if(Na(e)){const t=hd(e.getPeerId()??"");await this.components.peerStore.addressBook.add(t,[e]),e=t}return await this.fetchService.fetch(e,t,n)}async ping(e,t={}){if(Na(e)){const t=hd(e.getPeerId()??"");await this.components.peerStore.addressBook.add(t,[e]),e=t}return await this.pingService.ping(e,t)}async handle(e,t,n){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.registrar.handle(e,t,n)})))}async unhandle(e){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.registrar.unhandle(e)})))}async register(e,t){return await this.registrar.register(e,t)}unregister(e){this.registrar.unregister(e)}onDiscoveryPeer(e){const{detail:t}=e;t.id.toString()!==this.peerId.toString()?(t.multiaddrs.length>0&&this.components.peerStore.addressBook.add(t.id,t.multiaddrs).catch((e=>qJ.error(e))),t.protocols.length>0&&this.components.peerStore.protoBook.set(t.id,t.protocols).catch((e=>qJ.error(e))),this.dispatchEvent(new hM("peer:discovery",{detail:t}))):qJ.error(new Error(aW.ERR_DISCOVERED_SELF))}}async function YJ(e){if(null==e.peerId){const t=e.datastore;if(null!=t)try{const n=new yG({datastore:t},{...yG.generateOptions(),...e.keychain??{}});e.peerId=await n.exportPeerId("self")}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}}return null==e.peerId&&(e.peerId=await DJ()),new WJ(NJ(e))}async function GJ(e){const t=await YJ(e);return!1!==e.start&&await t.start(),t}var ZJ=n(9507);const JJ=1e3,QJ=60*JJ,XJ=60*QJ,eQ=36*XJ,tQ="/lan",nQ="/ipfs",rQ="/kad/1.0.0",oQ="/dht/record",sQ="/dht/provider",iQ=256,aQ=24*XJ,lQ=XJ,cQ=20,uQ=3,dQ=Number(5*QJ),hQ=Number(30*JJ),pQ=Number(5*QJ),fQ=Number(30*JJ),gQ=Number(30*JJ),mQ=mi("/pk/");function yQ(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,n]]=e.stringTuples();if(53===t||54===t||55===t)return"localhost"!==n;if(4!==t&&6!==t)return!1;if(null==n)return!1;const r=qY(n);return null==r||!r}))}}function vQ(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,n]]=e.stringTuples();if("localhost"===n)return!0;if(4!==t&&6!==t)return!1;if(null==n)return!1;const r=qY(n);return null!=r&&r}))}}async function wQ(e){const t=await Fs.digest(e);return t.digest}async function bQ(e){return await wQ(e.toBytes())}function SQ(e){return new Tc(`${oQ}/${Ti(e,"base32")}`,!1)}function _Q(e){return ji([mQ,e.toBytes()])}function EQ(e){return"/pk/"===Ti(e.subarray(0,4))}function kQ(e){return pd(e.subarray(4))}function CQ(e,t){const n=new Date,r=new _y(e,t,n);return r.serialize()}function IQ(e,t=100){let n;return()=>{clearTimeout(n),n=setTimeout((()=>{e()}),t)}}const AQ="kad-close",TQ=50,RQ=20,xQ=1e4,OQ=10;class NQ{constructor(e,t){const{kBucketSize:n,pingTimeout:r,lan:o,pingConcurrency:s,protocol:i,tagName:a,tagValue:l}=t;this.components=e,this.log=pe(`libp2p:kad-dht:${o?"lan":"wan"}:routing-table`),this.kBucketSize=n??RQ,this.pingTimeout=r??xQ,this.pingConcurrency=s??OQ,this.lan=o,this.running=!1,this.protocol=i,this.tagName=a??AQ,this.tagValue=l??TQ;const c=()=>{this.metrics?.pingQueueSize.update(this.pingQueue.size),this.metrics?.pingRunning.update(this.pingQueue.pending)};this.pingQueue=new zu({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",c),this.pingQueue.addListener("next",c),this._onPing=this._onPing.bind(this)}isStarted(){return this.running}async start(){this.running=!0,null!=this.components.metrics&&(this.metrics={routingTableSize:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_routing_table_size`),pingQueueSize:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_ping_queue_size`),pingRunning:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_ping_running`)});const e=new ZJ({localNodeId:await bQ(this.components.peerId),numberOfNodesPerKBucket:this.kBucketSize,numberOfNodesToPing:1});this.kb=e,e.on("ping",this._onPing),this._tagPeers(e)}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_tagPeers(e){let t=new TW;const n=IQ((()=>{const n=new TW(e.closest(e.localNodeId,RQ).map((e=>e.peer))),r=n.difference(t),o=t.difference(n);Promise.resolve().then((async()=>{for(const e of r)await this.components.peerStore.tagPeer(e,this.tagName,{value:this.tagValue});for(const e of o)await this.components.peerStore.unTagPeer(e,this.tagName)})).catch((e=>{this.log.error("Could not update peer tags",e)})),t=n}));e.on("added",(()=>{n()})),e.on("removed",(()=>{n()}))}_onPing(e,t){this.pingQueue.add((async()=>{if(!this.running)return;let n=0;try{await Promise.all(e.map((async e=>{let t;try{t=new yi.TimeoutController(this.pingTimeout);const r={signal:t.signal};this.log("pinging old contact %p",e.peer);const o=await this.components.connectionManager.openConnection(e.peer,r),s=await o.newStream(this.protocol,r);s.close(),n++}catch(ik){this.running&&null!=this.kb&&(this.log.error("could not ping peer %p",e.peer,ik),this.log("evicting old contact after ping failed %p",e),this.kb.remove(e.id))}finally{null!=t&&t.clear(),this.metrics?.routingTableSize.update(this.size)}}))),this.running&&n<e.length&&null!=this.kb&&(this.log("adding new contact %p",t.peer),this.kb.add(t))}catch(ik){this.log.error("could not process k-bucket ping event",ik)}})).catch((e=>{this.log.error("could not process k-bucket ping event",e)}))}get size(){return null==this.kb?0:this.kb.count()}async find(e){const t=await bQ(e),n=this.closestPeer(t);if(null!=n&&e.equals(n))return n}closestPeer(e){const t=this.closestPeers(e,1);if(t.length>0)return t[0]}closestPeers(e,t=this.kBucketSize){if(null==this.kb)return[];const n=this.kb.closest(e,t);return n.map((e=>e.peer))}async add(e){if(null==this.kb)throw new Error("RoutingTable is not started");const t=await bQ(e);this.kb.add({id:t,peer:e}),this.log("added %p with kad id %b",e,t),this.metrics?.routingTableSize.update(this.size)}async remove(e){if(null==this.kb)throw new Error("RoutingTable is not started");const t=await bQ(e);this.kb.remove(t),this.metrics?.routingTableSize.update(this.size)}}function PQ(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");const n=ui(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return li(n)}var DQ=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782];const UQ=15;class LQ{constructor(e){const{peerRouting:t,routingTable:n,refreshInterval:r,refreshQueryTimeout:o,lan:s}=e;this.log=pe(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table:refresh`),this.peerRouting=t,this.routingTable=n,this.refreshInterval=r??pQ,this.refreshQueryTimeout=o??fQ,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async start(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}refreshTable(e=!1){this.log("refreshing routing table");const t=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(t);this.log(`max common prefix length ${t}`),this.log(`tracked CPLs [ ${n.map((e=>e.toISOString())).join(", ")} ]`),Promise.all(n.map((async(r,o)=>{try{if(await this._refreshCommonPrefixLength(o,r,e),0===this._numPeersForCpl(t)){const t=Math.min(2*(o+1),n.length-1);for(let n=o+1;n<t+1;n++)try{await this._refreshCommonPrefixLength(n,r,e)}catch(ik){this.log.error(ik)}}}catch(ik){this.log.error(ik)}}))).catch((e=>{this.log.error(e)})).then((()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),null!=this.refreshTimeoutId.unref&&this.refreshTimeoutId.unref()})).catch((e=>{this.log.error(e)}))}async _refreshCommonPrefixLength(e,t,n){if(!n&&t.getTime()>Date.now()-this.refreshInterval)return void this.log("not running refresh for cpl %s as time since last refresh not above interval",e);const r=await this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,r,this.routingTable.size);const o=new yi.TimeoutController(this.refreshQueryTimeout);try{const t=await NP(this.peerRouting.getClosestPeers(r.toBytes(),{signal:o.signal}));this.log(`found ${t} peers that were close to imaginary peer %p`,r),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,r,this.routingTable.size)}finally{o.clear()}}_getTrackedCommonPrefixLengthsForRefresh(e){e>UQ&&(e=UQ);const t=[];for(let n=0;n<=e;n++)t[n]=this.commonPrefixLengthRefreshedAt[n]??new Date;return t}async _generateRandomPeerId(e){if(null==this.routingTable.kb)throw new Error("Routing table not started");const t=Ap(2),n=(t[1]<<8)+t[0],r=await this._makePeerId(this.routingTable.kb.localNodeId,n,e);return pd(r)}async _makePeerId(e,t,n){if(n>UQ)throw new Error(`Cannot generate peer ID for common prefix length greater than ${UQ}`);const r=new DataView(e.buffer,e.byteOffset,e.byteLength),o=r.getUint16(0,!1),s=o^32768>>n,i=65535<<16-(n+1),a=s&i|t&~i,l=DQ[a],c=new ArrayBuffer(34),u=new DataView(c,0,c.byteLength);return u.setUint8(0,Fs.code),u.setUint8(1,32),u.setUint32(2,l,!1),new Uint8Array(u.buffer,u.byteOffset,u.byteLength)}_maxCommonPrefix(){let e=0;for(const t of this._prefixLengths())t>e&&(e=t);return e}_numPeersForCpl(e){let t=0;for(const n of this._prefixLengths())n===e&&t++;return t}*_prefixLengths(){if(null!=this.routingTable.kb)for(const{id:e}of this.routingTable.kb.toIterable()){const t=PQ(this.routingTable.kb.localNodeId,e);let n=0;for(const e of t){if(0!==e)break;n++}yield n}}}var BQ,MQ;(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.key&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&(t.uint32(18),t.bytes(e.value)),null!=e.author&&(t.uint32(26),t.bytes(e.author)),null!=e.signature&&(t.uint32(34),t.bytes(e.signature)),null!=e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.key=e.bytes();break;case 2:n.value=e.bytes();break;case 3:n.author=e.bytes();break;case 4:n.signature=e.bytes();break;case 5:n.timeReceived=e.string();break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(BQ||(BQ={})),function(e){let t,n,r,o,s,i;(function(e){e["PUT_VALUE"]="PUT_VALUE",e["GET_VALUE"]="GET_VALUE",e["ADD_PROVIDER"]="ADD_PROVIDER",e["GET_PROVIDERS"]="GET_PROVIDERS",e["FIND_NODE"]="FIND_NODE",e["PING"]="PING"})(t=e.MessageType||(e.MessageType={})),function(e){e[e["PUT_VALUE"]=0]="PUT_VALUE",e[e["GET_VALUE"]=1]="GET_VALUE",e[e["ADD_PROVIDER"]=2]="ADD_PROVIDER",e[e["GET_PROVIDERS"]=3]="GET_PROVIDERS",e[e["FIND_NODE"]=4]="FIND_NODE",e[e["PING"]=5]="PING"}(n||(n={})),function(e){e.codec=()=>nh(n)}(t=e.MessageType||(e.MessageType={})),function(e){e["NOT_CONNECTED"]="NOT_CONNECTED",e["CONNECTED"]="CONNECTED",e["CAN_CONNECT"]="CAN_CONNECT",e["CANNOT_CONNECT"]="CANNOT_CONNECT"}(r=e.ConnectionType||(e.ConnectionType={})),function(e){e[e["NOT_CONNECTED"]=0]="NOT_CONNECTED",e[e["CONNECTED"]=1]="CONNECTED",e[e["CAN_CONNECT"]=2]="CAN_CONNECT",e[e["CANNOT_CONNECT"]=3]="CANNOT_CONNECT"}(o||(o={})),function(e){e.codec=()=>nh(o)}(r=e.ConnectionType||(e.ConnectionType={})),function(t){let n;t.codec=()=>(null==n&&(n=rh(((t,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=t.id&&(n.uint32(10),n.bytes(t.id)),null!=t.addrs)for(const e of t.addrs)n.uint32(18),n.bytes(e);null!=t.connection&&(n.uint32(24),e.ConnectionType.codec().encode(t.connection,n)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={addrs:[]},o=null==n?t.len:t.pos+n;while(t.pos<o){const n=t.uint32();switch(n>>>3){case 1:r.id=t.bytes();break;case 2:r.addrs.push(t.bytes());break;case 3:r.connection=e.ConnectionType.codec().decode(t);break;default:t.skipType(7&n);break}}return r}))),n),t.encode=e=>Gd(e,t.codec()),t.decode=e=>Yd(e,t.codec())}(s=e.Peer||(e.Peer={})),e.codec=()=>(null==i&&(i=rh(((t,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=t.type&&(n.uint32(8),e.MessageType.codec().encode(t.type,n)),null!=t.clusterLevelRaw&&(n.uint32(80),n.int32(t.clusterLevelRaw)),null!=t.key&&(n.uint32(18),n.bytes(t.key)),null!=t.record&&(n.uint32(26),n.bytes(t.record)),null!=t.closerPeers)for(const o of t.closerPeers)n.uint32(66),e.Peer.codec().encode(o,n);if(null!=t.providerPeers)for(const o of t.providerPeers)n.uint32(74),e.Peer.codec().encode(o,n);!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={closerPeers:[],providerPeers:[]},o=null==n?t.len:t.pos+n;while(t.pos<o){const n=t.uint32();switch(n>>>3){case 1:r.type=e.MessageType.codec().decode(t);break;case 10:r.clusterLevelRaw=t.int32();break;case 2:r.key=t.bytes();break;case 3:r.record=t.bytes();break;case 8:r.closerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;case 9:r.providerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;default:t.skipType(7&n);break}}return r}))),i),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())}(MQ||(MQ={}));const FQ=MQ.MessageType,jQ=MQ.ConnectionType,zQ=Object.keys(FQ);class $Q{constructor(e,t,n){if(!(t instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=t,this.clusterLevelRaw=n,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const e=this.clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this.clusterLevelRaw=e}serialize(){return MQ.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(VQ),providerPeers:this.providerPeers.map(VQ),record:null==this.record?void 0:this.record.serialize().subarray()})}static deserialize(e){const t=MQ.decode(e),n=new $Q(t.type??MQ.MessageType.PUT_VALUE,t.key??Uint8Array.from([]),t.clusterLevelRaw??0);return n.closerPeers=t.closerPeers.map(HQ),n.providerPeers=t.providerPeers.map(HQ),null!=t.record?.length&&(n.record=_y.deserialize(t.record)),n}}function VQ(e){const t={id:e.id.toBytes(),addrs:(e.multiaddrs??[]).map((e=>e.bytes)),connection:jQ.CONNECTED};return t}function HQ(e){if(null==e.id)throw new Error("Invalid peer in message");return{id:pd(e.id),multiaddrs:(e.addrs??[]).map((e=>Da(e))),protocols:[]}}function KQ(e){return{...e,name:"SENDING_QUERY",type:0,messageName:e.type,messageType:zQ.indexOf(e.type.toString())}}function qQ(e){return{...e,name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:null!=e.closer?e.closer:[],providers:null!=e.providers?e.providers:[]}}function WQ(e){return{...e,name:"FINAL_PEER",type:2}}function YQ(e){return{...e,name:"QUERY_ERROR",type:3}}function GQ(e){return{...e,name:"PROVIDER",type:4}}function ZQ(e){return{...e,name:"VALUE",type:5}}function JQ(e){return{...e,name:"DIALING_PEER",type:7}}class QQ extends uM{constructor(e,t){super();const{protocol:n,lan:r}=t;this.components=e,this.log=pe(`libp2p:kad-dht:${r?"lan":"wan"}:network`),this.running=!1,this.protocol=n}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(e,t,n={}){if(!this.running)return;let r;this.log("sending %s to %p",t.type,e),yield JQ({peer:e}),yield KQ({to:e,type:t.type});try{const r=await this.components.connectionManager.openConnection(e,n),o=await r.newStream(this.protocol,n),s=await this._writeReadMessage(o,t.serialize(),n);yield qQ({from:e,messageType:s.type,closer:s.closerPeers,providers:s.providerPeers,record:s.record})}catch(ik){yield YQ({from:e,error:ik})}finally{null!=r&&r.close()}}async*sendMessage(e,t,n={}){if(!this.running)return;let r;this.log("sending %s to %p",t.type,e),yield JQ({peer:e}),yield KQ({to:e,type:t.type});try{const r=await this.components.connectionManager.openConnection(e,n),o=await r.newStream(this.protocol,n);await this._writeMessage(o,t.serialize(),n),yield qQ({from:e,messageType:t.type})}catch(ik){yield YQ({from:e,error:ik})}finally{null!=r&&r.close()}}async _writeMessage(e,t,n){null!=n.signal&&(e=XF(e,n.signal)),await kv([t],nj(),e,Gm)}async _writeReadMessage(e,t,n){null!=n.signal&&(e=XF(e,n.signal));const r=await kv([t],nj(),e,aj(),(async e=>{const t=await XT(e);if(null!=t)return t;throw new Xu("No message received","ERR_NO_MESSAGE_RECEIVED")})),o=$Q.deserialize(r);return o.closerPeers.forEach((e=>{this.dispatchEvent(new hM("peer",{detail:e}))})),o.providerPeers.forEach((e=>{this.dispatchEvent(new hM("peer",{detail:e}))})),o}}async function XQ(e,t){const n=t.key,r=Ti(n),o=r.split("/");if(o.length<3)return;const s=e[o[1].toString()];if(null==s){const e="Invalid record keytype";throw new Xu(e,"ERR_INVALID_RECORD_KEY_TYPE")}await s(n,t.value)}const eX=async(e,t)=>{if(!(e instanceof Uint8Array))throw new Xu('"key" must be a Uint8Array',"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(e.byteLength<5)throw new Xu("invalid public key record","ERR_INVALID_RECORD_KEY_TOO_SHORT");const n=Ti(e.subarray(0,4));if("/pk/"!==n)throw new Xu("key was not prefixed with /pk/","ERR_INVALID_RECORD_KEY_BAD_PREFIX");const r=e.slice(4),o=await Fs.digest(t);if(!wa(r,o.bytes))throw new Xu("public key does not match passed in key","ERR_INVALID_RECORD_HASH_MISMATCH")},tX={pk:eX};function nX(e,t,n){if(0===n.length){const e="No records given";throw new Xu(e,"ERR_NO_RECORDS_RECEIVED")}const r=Ti(t),o=r.split("/");if(o.length<3){const e="Record key does not have a selector function";throw new Xu(e,"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const s=e[o[1].toString()];if(null==s){const e=`Unrecognized key prefix: ${o[1]}`;throw new Xu(e,"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===n.length?0:s(t,n)}function rX(e,t){return 0}const oX={pk:rX};class sX{constructor(e,t){const{validators:n,selectors:r,peerRouting:o,queryManager:s,routingTable:i,network:a,lan:l}=t;this.components=e,this.log=pe(`libp2p:kad-dht:${l?"lan":"wan"}:content-fetching`),this.validators=n,this.selectors=r,this.peerRouting=o,this.queryManager=s,this.routingTable=i,this.network=a}async putLocal(e,t){const n=SQ(e);await this.components.datastore.put(n,t)}async getLocal(e){this.log("getLocal %b",e);const t=SQ(e);this.log("fetching record for key %k",t);const n=await this.components.datastore.get(t);this.log("found %k in local datastore",t);const r=_y.deserialize(n);return await XQ(this.validators,r),r}async*sendCorrectionRecord(e,t,n,r={}){this.log("sendCorrection for %b",e);const o=CQ(e,n);for(const{value:s,from:i}of t){if(wa(s,n)){this.log("record was ok");continue}if(this.components.peerId.equals(i)){try{const t=SQ(e);this.log(`Storing corrected record for key ${t.toString()}`),await this.components.datastore.put(t,o.subarray())}catch(ik){this.log.error("Failed error correcting self",ik)}continue}let t=!1;const a=new $Q(FQ.PUT_VALUE,e,0);a.record=_y.deserialize(o);for await(const e of this.network.sendRequest(i,a,r))"PEER_RESPONSE"===e.name&&null!=e.record&&wa(e.record.value,_y.deserialize(o).value)&&(t=!0),yield e;t||(yield YQ({from:i,error:new Xu("value not put correctly","ERR_PUT_VALUE_INVALID")})),this.log.error("Failed error correcting entry")}}async*put(e,t,n={}){this.log("put key %b value %b",e,t);const r=CQ(e,t),o=SQ(e);this.log(`storing record for key ${o.toString()}`),await this.components.datastore.put(o,r.subarray()),yield*kv(this.peerRouting.getClosestPeers(e,{signal:n.signal}),(t=>vv(t,(t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const o=[],s=new $Q(FQ.PUT_VALUE,e,0);s.record=_y.deserialize(r),this.log("send put to %p",t.peer.id);for await(const e of this.network.sendRequest(t.peer.id,s,n))o.push(e),"PEER_RESPONSE"===e.name&&(null!=e.record&&wa(e.record.value,_y.deserialize(r).value)||o.push(YQ({from:t.peer.id,error:new Xu("value not put correctly","ERR_PUT_VALUE_INVALID")})));return o}))),(e=>yv(e,{ordered:!1,concurrency:uQ})),(async function*(e){for await(const t of e)yield*t}))}async*get(e,t={}){this.log("get %b",e);const n=[];for await(const i of this.getMany(e,t))"VALUE"===i.name&&n.push(i),yield i;if(0===n.length)return;const r=n.map((e=>e.value));let o=0;try{o=nX(this.selectors,e,r)}catch(ik){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==ik.code)throw ik}const s=r[o];if(this.log("GetValue %b %b",e,s),null==s)throw new Xu("best value was not found","ERR_NOT_FOUND");yield*this.sendCorrectionRecord(e,n,s,t),yield n[o]}async*getMany(e,t={}){this.log("getMany values for %b",e);try{const t=await this.getLocal(e);yield ZQ({value:t.value,from:this.components.peerId})}catch(ik){this.log("error getting local value for %b",e,ik)}const n=await wQ(e),r=this.routingTable.closestPeers(n);this.log("found %d peers in routing table",r.length);const o=this,s=async function*({peer:t,signal:n}){for await(const r of o.peerRouting.getValueOrPeers(t,e,{signal:n}))yield r,"PEER_RESPONSE"===r.name&&null!=r.record&&(yield ZQ({from:t,value:r.record.value}))};yield*this.queryManager.run(e,r,s,t)}}class iX{constructor(e,t){const{network:n,peerRouting:r,queryManager:o,routingTable:s,providers:i,lan:a}=t;this.components=e,this.log=pe(`libp2p:kad-dht:${a?"lan":"wan"}:content-routing`),this.network=n,this.peerRouting=r,this.queryManager=o,this.routingTable=s,this.providers=i}async*provide(e,t,n={}){this.log("provide %s",e),await this.providers.addProvider(e,this.components.peerId);const r=new $Q(FQ.ADD_PROVIDER,e.multihash.bytes,0);r.providerPeers=[{id:this.components.peerId,multiaddrs:t,protocols:[]}];let o=0;const s=t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const s=[];this.log("putProvider %s to %p",e,t.peer.id);try{this.log("sending provider record for %s to %p",e,t.peer.id);for await(const i of this.network.sendMessage(t.peer.id,r,n))"PEER_RESPONSE"===i.name&&(this.log("sent provider record for %s to %p",e,t.peer.id),o++),s.push(i)}catch(ik){this.log.error("error sending provide record to peer %p",t.peer.id,ik),s.push(YQ({from:t.peer.id,error:ik}))}return s};yield*kv(this.peerRouting.getClosestPeers(e.multihash.bytes,n),(e=>vv(e,(e=>s(e)))),(e=>yv(e,{ordered:!1,concurrency:uQ})),(async function*(e){for await(const t of e)yield*t})),this.log("sent provider records to %d peers",o)}async*findProviders(e,t){const n=this.routingTable.kBucketSize,r=e.multihash.bytes,o=await wQ(r),s=this;this.log("findProviders %c",e);const i=await this.providers.getProviders(e);if(i.length>0){const e=[];for(const t of i.slice(0,n))e.push({id:t,multiaddrs:(await this.components.peerStore.addressBook.get(t)??[]).map((e=>e.multiaddr)),protocols:[]});yield qQ({from:this.components.peerId,messageType:FQ.GET_PROVIDERS,providers:e}),yield GQ({from:this.components.peerId,providers:e})}if(i.length>=n)return;const a=async function*({peer:e,signal:t}){const n=new $Q(FQ.GET_PROVIDERS,r,0);yield*s.network.sendRequest(e,n,{signal:t})},l=new Set(i.map((e=>e.toString())));for await(const c of this.queryManager.run(r,this.routingTable.closestPeers(o),a,t))if(yield c,"PEER_RESPONSE"===c.name){this.log("Found %d provider entries for %c and %d closer peers",c.providers.length,e,c.closer.length);const t=[];for(const e of c.providers)l.has(e.id.toString())||(l.add(e.id.toString()),t.push(e));if(t.length>0&&(yield GQ({from:c.from,providers:t})),l.size===n)return}}}class aX{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((e=>e.peerId))}async add(e){if(null!=this.peerDistances.find((t=>t.peerId.equals(e))))return;const t=await bQ(e),n={peerId:e,distance:PQ(this.originDhtKey,t)};this.peerDistances.push(n),this.peerDistances.sort(((e,t)=>ZP(e.distance,t.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(0===e.length)return!1;if(0===this.length)return!0;const t=await Promise.all(e.map(bQ)),n=this.peerDistances[this.peerDistances.length-1].distance;for(const r of t){const e=PQ(this.originDhtKey,r);if(ZP(e,n)<0)return!0}return!1}}class lX{constructor(e,t){const{routingTable:n,network:r,validators:o,queryManager:s,lan:i}=t;this.components=e,this.routingTable=n,this.network=r,this.validators=o,this.queryManager=s,this.log=pe(`libp2p:kad-dht:${i?"lan":"wan"}:peer-routing`)}async findPeerLocal(e){let t;const n=await this.routingTable.find(e);if(null!=n){this.log("findPeerLocal found %p in routing table",e);try{t=await this.components.peerStore.get(n)}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}}if(null==t)try{t=await this.components.peerStore.get(e)}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}if(null!=t)return this.log("findPeerLocal found %p in peer store",e),{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}async*_getValueSingle(e,t,n={}){const r=new $Q(FQ.GET_VALUE,t,0);yield*this.network.sendRequest(e,r,n)}async*getPublicKeyFromNode(e,t={}){const n=_Q(e);for await(const r of this._getValueSingle(e,n,t))if(yield r,"PEER_RESPONSE"===r.name&&null!=r.record){const t=await gd(Ng({bytes:r.record.value}));if(!t.equals(e))throw new Xu("public key does not match id","ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(null==t.publicKey)throw new Xu("public key missing","ERR_PUBLIC_KEY_MISSING");yield ZQ({from:e,value:t.publicKey})}throw new Xu(`Node not responding with its public key: ${e.toString()}`,"ERR_INVALID_RECORD")}async*findPeer(e,t={}){this.log("findPeer %p",e);const n=await this.findPeerLocal(e);if(null!=n)return this.log("found local"),void(yield WQ({from:this.components.peerId,peer:n}));const r=await bQ(e),o=this.routingTable.closestPeers(r),s=o.find((t=>t.equals(e)));if(null!=s)try{const t=await this.components.peerStore.get(e);return this.log("found in peerStore"),void(yield WQ({from:this.components.peerId,peer:{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}))}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}const i=this,a=async function*({peer:t,signal:n}){const r=new $Q(FQ.FIND_NODE,e.toBytes(),0);for await(const o of i.network.sendRequest(t,r,{signal:n}))if(yield o,"PEER_RESPONSE"===o.name){const t=o.closer.find((t=>t.id.equals(e)));null!=t&&(yield WQ({from:o.from,peer:t}))}};let l=!1;for await(const c of this.queryManager.run(e.toBytes(),o,a,t))"FINAL_PEER"===c.name&&(l=!0),yield c;l||(yield YQ({from:this.components.peerId,error:new Xu("Not found","ERR_NOT_FOUND")}))}async*getClosestPeers(e,t={}){this.log("getClosestPeers to %b",e);const n=await wQ(e),r=this.routingTable.closestPeers(n),o=this,s=new aX(n,this.routingTable.kBucketSize);await Promise.all(r.map((async e=>{await s.add(e)})));const i=async function*({peer:t,signal:n}){o.log("closerPeersSingle %s from %p",Ti(e,"base32"),t);const r=new $Q(FQ.FIND_NODE,e,0);yield*o.network.sendRequest(t,r,{signal:n})};for await(const a of this.queryManager.run(e,r,i,t))yield a,"PEER_RESPONSE"===a.name&&await Promise.all(a.closer.map((async e=>{await s.add(e.id)})));this.log("found %d peers close to %b",s.length,e);for(const a of s.peers)yield WQ({from:this.components.peerId,peer:{id:a,multiaddrs:(await this.components.peerStore.addressBook.get(a)??[]).map((e=>e.multiaddr)),protocols:[]}})}async*getValueOrPeers(e,t,n={}){for await(const r of this._getValueSingle(e,t,n)){if("PEER_RESPONSE"===r.name&&null!=r.record)try{await this._verifyRecordOnline(r.record)}catch(ik){const t="invalid record received, discarded";this.log(t),yield YQ({from:r.from,error:new Xu(t,"ERR_INVALID_RECORD")});continue}yield r}}async _verifyRecordOnline(e){if(null==e.timeReceived)throw new Xu("invalid record received","ERR_INVALID_RECORD");await XQ(this.validators,new _y(e.key,e.value,e.timeReceived))}async getCloserPeersOffline(e,t){const n=await wQ(e),r=this.routingTable.closestPeers(n),o=[];for(const s of r)if(!s.equals(t))try{const e=await this.components.peerStore.addressBook.get(s),t=await this.components.peerStore.protoBook.get(s);o.push({id:s,multiaddrs:e.map((e=>e.multiaddr)),protocols:t})}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}return o.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",o.length,e,t):this.log("getCloserPeersOffline could not find peer closer to %b than %p",e,t),o}}const cX=pe("libp2p:kad-dht:providers");class uX{constructor(e,t={}){const{cacheSize:n,cleanupInterval:r,provideValidity:o}=t;this.components=e,this.cleanupInterval=r??lQ,this.provideValidity=o??aQ,this.cache=eu(n??iQ),this.syncQueue=new zu({concurrency:1}),this.started=!1}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval((()=>{this._cleanup().catch((e=>{cX.error(e)}))}),this.cleanupInterval))}async stop(){this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){await this.syncQueue.add((async()=>{const e=Date.now();let t=0,n=0;const r=new Map,o=this.components.datastore.batch(),s=this.components.datastore.query({prefix:sQ});for await(const i of s)try{const{cid:e,peerId:s}=pX(i.key),a=gX(i.value).getTime(),l=Date.now(),c=l-a,u=c>this.provideValidity;if(cX("comparing: %d - %d = %d > %d %s",l,a,c,this.provideValidity,u?"(expired)":""),u){n++,o.delete(i.key);const t=r.get(e)??new Set;t.add(s),r.set(e,t)}t++}catch(ik){cX.error(ik.message)}r.size>0?(cX("deleting %d / %d entries",n,t),await o.commit()):cX("nothing to delete");for(const[i,a]of r){const e=dX(i),t=this.cache.get(e);if(null!=t){for(const e of a)t.delete(e);0===t.size?this.cache.remove(e):this.cache.set(e,t)}}cX("Cleanup successful (%dms)",Date.now()-e)}))}async _getProvidersMap(e){const t=dX(e);let n=this.cache.get(t);return null==n&&(n=await fX(this.components.datastore,e),this.cache.set(t,n)),n}async addProvider(e,t){await this.syncQueue.add((async()=>{cX("%p provides %s",t,e);const n=await this._getProvidersMap(e);cX("loaded %s provs",n.size);const r=new Date;n.set(t.toString(),r);const o=dX(e);this.cache.set(o,n),await hX(this.components.datastore,e,t,r)}))}async getProviders(e){return await this.syncQueue.add((async()=>{cX("get providers for %s",e);const t=await this._getProvidersMap(e);return[...t.keys()].map((e=>hd(e)))}),{throwOnTimeout:!0})}}function dX(e){const t="string"===typeof e?e:Ti(e.multihash.bytes,"base32");return`${sQ}/${t}`}async function hX(e,t,n,r){const o=[dX(t),"/",n.toString()].join(""),s=new Tc(o),i=Uint8Array.from(Fi.encode(r.getTime()));await e.put(s,i)}function pX(e){const t=e.toString().split("/");if(5!==t.length)throw new Error(`incorrectly formatted provider entry key in datastore: ${e.toString()}`);return{cid:t[3],peerId:t[4]}}async function fX(e,t){const n=new Map,r=e.query({prefix:dX(t)});for await(const o of r){const{peerId:e}=pX(o.key);n.set(e,gX(o.value))}return n}function gX(e){return new Date(Fi.decode(e))}const mX=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");async function*yX(e){const{key:t,startingPeer:n,ourPeerId:r,signal:o,query:s,alpha:i,pathIndex:a,numPaths:l,cleanUp:c,queryFuncTimeout:u,log:d,peersSeen:h}=e,p=new zu({concurrency:i}),f=await wQ(t);function g(e,n){if(null==e)return;h.add(e);const i=BigInt("0x"+Ti(PQ(n,f),"base16"));p.add((async()=>{let n;const c=[o];null!=u&&(n=new yi.TimeoutController(u),c.push(n.signal));const m=(0,Nc.anySignal)(c);try{for await(const n of s({key:t,peer:e,signal:m,pathIndex:a,numPaths:l})){if(m.aborted)return;if("PEER_RESPONSE"===n.name)for(const o of n.closer){if(h.has(o.id)){d("already seen %p in query",o.id);continue}if(r.equals(o.id)){d("not querying ourselves");continue}const n=await bQ(o.id),s=BigInt("0x"+Ti(PQ(n,f),"base16"));s>i?d("skipping %p as they are not closer to %b than %p",o.id,t,e):(d("querying closer peer %p",o.id),g(o.id,n))}p.emit("completed",n)}n?.clear()}catch(ik){o.aborted?p.emit("error",ik):p.emit("completed",YQ({from:e,error:ik}))}finally{n?.clear()}}),{priority:mX-i}).catch((e=>{d.error(e)}))}g(n,await bQ(n)),yield*vX(p,o,c,d)}async function*vX(e,t,n,r){let o=gv(),s=!0;const i=[],a=()=>{s&&(r("clean up queue, results %d, queue size %d, pending tasks %d",i.length,e.size,e.pending),s=!1,e.clear(),i.splice(0,i.length))};e.on("completed",(e=>{i.push(e),o.resolve()})),e.on("error",(e=>{r("queue error",e),a(),o.reject(e)})),e.on("idle",(()=>{r("queue idle"),s=!1,o.resolve()})),t.addEventListener("abort",(()=>{r("abort queue");const e=s;a(),e&&o.reject(new Xu("Query aborted","ERR_QUERY_ABORTED"))})),n.addEventListener("cleanup",(()=>{a(),o.resolve()}));while(s){await o.promise,o=gv();while(i.length>0){const e=i.shift();null!=e&&(yield e)}}yield*i}class wX{constructor(e,t){const{lan:n=!1,disjointPaths:r=cQ,alpha:o=uQ}=t;this.components=e,this.disjointPaths=r??cQ,this.controllers=new Set,this.running=!1,this.alpha=o??uQ,this.lan=n,this.queries=0}isStarted(){return this.running}async start(){this.running=!0,null!=this.components.metrics&&null==this.metrics&&(this.metrics={runningQueries:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_running_queries`),queryTime:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_query_time_seconds`)})}async stop(){this.running=!1;for(const e of this.controllers)e.abort();this.controllers.clear()}async*run(e,t,n,r={}){if(!this.running)throw new Error("QueryManager not started");const o=this.metrics?.queryTime.timer();let s;if(null==r.signal){s=new yi.TimeoutController(gQ),r.signal=s.signal;try{null!=hW.setMaxListeners&&(0,hW.setMaxListeners)(1/0,s.signal)}catch{}}const i=new AbortController;this.controllers.add(i);const a=[i.signal];null!=r.signal&&a.push(r.signal);const l=(0,Nc.anySignal)(a);try{null!=hW.setMaxListeners&&(0,hW.setMaxListeners)(1/0,l)}catch{}const c=pe(`libp2p:kad-dht:${this.lan?"lan":"wan"}:query:`+Ti(e,"base58btc")),u=t.slice(0,Math.min(this.disjointPaths,t.length)),d=Date.now(),h=new uM;try{if(c("query:start"),this.queries++,this.metrics?.runningQueries.update(this.queries),0===t.length)return void c.error("Running query with no peers");const o=new TW,s=u.map(((t,s)=>yX({key:e,startingPeer:t,ourPeerId:this.components.peerId,signal:l,query:n,pathIndex:s,numPaths:u.length,alpha:this.alpha,cleanUp:h,queryFuncTimeout:r.queryFuncTimeout,log:c,peersSeen:o})));for await(const e of wv(...s))yield e,"QUERY_ERROR"===e.name&&c("error",e.error)}catch(ik){if(this.running||"ERR_QUERY_ABORTED"!==ik.code)throw ik}finally{this.controllers.delete(i),null!=s&&s.clear(),this.queries--,this.metrics?.runningQueries.update(this.queries),null!=o&&o(),h.dispatchEvent(new hM("cleanup")),c("query:done in %dms",Date.now()-d)}}}const bX=pe("libp2p:kad-dht:rpc:handlers:add-provider");class SX{constructor(e){const{providers:t}=e;this.providers=t}async handle(e,t){if(bX("start"),null==t.key||0===t.key.length)throw new Xu("Missing key","ERR_MISSING_KEY");let n;try{n=lt.decode(t.key)}catch(ik){throw new Xu("Invalid CID","ERR_INVALID_CID")}null!=t.providerPeers&&0!==t.providerPeers.length||bX.error("no providers found in message"),await Promise.all(t.providerPeers.map((async t=>{t.id.equals(e)?t.multiaddrs.length<1?bX("no valid addresses for provider %p. Ignore",e):(bX("received provider %p for %s (addrs %s)",e,n,t.multiaddrs.map((e=>e.toString()))),await this.providers.addProvider(n,t.id)):bX("invalid provider peer %p from %p",t.id,e)})))}}const _X=pe("libp2p:kad-dht:rpc:handlers:find-node");class EX{constructor(e,t){const{peerRouting:n,lan:r}=t;this.components=e,this.peerRouting=n,this.lan=Boolean(r)}async handle(e,t){_X("incoming request from %p for peers closer to %b",e,t.key);let n=[];n=wa(this.components.peerId.toBytes(),t.key)?[{id:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map((e=>e.decapsulateCode(Mi("p2p").code))),protocols:[]}]:await this.peerRouting.getCloserPeersOffline(t.key,e),n=n.map(this.lan?vQ:yQ).filter((({multiaddrs:e})=>e.length));const r=new $Q(t.type,new Uint8Array(0),t.clusterLevel);return n.length>0?r.closerPeers=n:_X("could not find any peers closer to %b than %p",t.key,e),r}}const kX=pe("libp2p:kad-dht:rpc:handlers:get-providers");class CX{constructor(e,t){const{peerRouting:n,providers:r,lan:o}=t;this.components=e,this.peerRouting=n,this.providers=r,this.lan=Boolean(o)}async handle(e,t){let n;try{n=lt.decode(t.key)}catch(ik){throw new Xu("Invalid CID","ERR_INVALID_CID")}kX("%p asking for providers for %s",e,n);const[r,o]=await Promise.all([this.providers.getProviders(n),this.peerRouting.getCloserPeersOffline(t.key,e)]),s=await this._getPeers(r),i=await this._getPeers(o.map((({id:e})=>e))),a=new $Q(t.type,t.key,t.clusterLevel);return s.length>0&&(a.providerPeers=s),i.length>0&&(a.closerPeers=i),kX("got %s providers %s closerPeers",s.length,i.length),a}async _getAddresses(e){const t=await this.components.peerStore.addressBook.get(e);return t.map((e=>e.multiaddr))}async _getPeers(e){const t=[],n=this.lan?vQ:yQ;for(const r of e){const e=n({id:r,multiaddrs:await this._getAddresses(r),protocols:[]});e.multiaddrs.length>0&&t.push(e)}return t}}const IX=pe("libp2p:kad-dht:rpc:handlers:get-value");class AX{constructor(e,t){const{peerRouting:n}=t;this.components=e,this.peerRouting=n}async handle(e,t){const n=t.key;if(IX("%p asked for key %b",e,n),null==n||0===n.length)throw new Xu("Invalid key","ERR_INVALID_KEY");const r=new $Q(FQ.GET_VALUE,n,t.clusterLevel);if(EQ(n)){IX("is public key");const e=kQ(n);let t;try{const n=await this.components.peerStore.keyBook.get(e);if(null==n)throw new Xu("No public key found in key book","ERR_NOT_FOUND");t=n}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}if(null!=t)return IX("returning found public key"),r.record=new _y(n,t,new Date),r}const[o,s]=await Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(t.key,e)]);return null!=o&&(IX("had record for %b in local datastore",n),r.record=o),s.length>0&&(IX("had %s closer peers in routing table",s.length),r.closerPeers=s),r}async _checkLocalDatastore(e){IX("checkLocalDatastore looking for %b",e);const t=SQ(e);let n;try{n=await this.components.datastore.get(t)}catch(ik){if("ERR_NOT_FOUND"===ik.code)return;throw ik}const r=_y.deserialize(n);if(null==r)throw new Xu("Invalid record","ERR_INVALID_RECORD");if(!(null==r.timeReceived||Date.now()-r.timeReceived.getTime()>eQ))return r;await this.components.datastore.delete(t)}}const TX=pe("libp2p:kad-dht:rpc:handlers:ping");class RX{async handle(e,t){return TX("ping from %p",e),t}}class xX{constructor(e,t){const{validators:n}=t;this.components=e,this.log=pe("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=n}async handle(e,t){const n=t.key;this.log("%p asked us to store value for key %b",e,n);const r=t.record;if(null==r){const t=`Empty record from: ${e.toString()}`;throw this.log.error(t),new Xu(t,"ERR_EMPTY_RECORD")}try{await XQ(this.validators,r),r.timeReceived=new Date;const e=SQ(r.key);await this.components.datastore.put(e,r.serialize().subarray()),this.log("put record for %b into datastore under key %k",n,e)}catch(ik){this.log("did not put record for key %b into datastore %o",n,ik)}return t}}class OX{constructor(e,t){const{providers:n,peerRouting:r,validators:o,lan:s}=t;this.log=pe("libp2p:kad-dht:rpc"),this.routingTable=t.routingTable,this.handlers={[FQ.GET_VALUE]:new AX(e,{peerRouting:r}),[FQ.PUT_VALUE]:new xX(e,{validators:o}),[FQ.FIND_NODE]:new EX(e,{peerRouting:r,lan:s}),[FQ.ADD_PROVIDER]:new SX({providers:n}),[FQ.GET_PROVIDERS]:new CX(e,{peerRouting:r,providers:n,lan:s}),[FQ.PING]:new RX}}async handleMessage(e,t){try{await this.routingTable.add(e)}catch(ik){this.log.error("Failed to update the kbucket store",ik)}const n=this.handlers[t.type];if(null!=n)return await n.handle(e,t);this.log.error(`no handler found for message type: ${t.type}`)}onIncomingStream(e){Promise.resolve().then((async()=>{const{stream:t,connection:n}=e,r=n.remotePeer;try{await this.routingTable.add(r)}catch(ik){this.log.error(ik)}const o=this;await kv(t,aj(),(async function*(e){for await(const t of e){const e=$Q.deserialize(t);o.log("incoming %s from %p",e.type,r);const n=await o.handleMessage(r,e);null!=n&&(yield n.serialize())}}),nj(),t)})).catch((e=>{this.log.error(e)}))}}class NX extends uM{constructor(e,t){super();const{protocol:n,lan:r}=t;this.components=e,this.log=pe("libp2p:kad-dht:topology-listener:"+(r?"lan":"wan")),this.running=!1,this.protocol=n}isStarted(){return this.running}async start(){if(this.running)return;this.running=!0;const e=aM({onConnect:e=>{this.log("observed peer %p with protocol %s",e,this.protocol),this.dispatchEvent(new hM("peer",{detail:e}))}});this.registrarId=await this.components.registrar.register(this.protocol,e)}async stop(){this.running=!1,null!=this.registrarId&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}class PX{constructor(e,t){const{peerRouting:n,lan:r,count:o,interval:s,queryTimeout:i}=t;this.components=e,this.log=pe(`libp2p:kad-dht:${r?"lan":"wan"}:query-self`),this.running=!1,this.peerRouting=n,this.count=o??cQ,this.interval=s??dQ,this.queryTimeout=i??hQ}isStarted(){return this.running}async start(){this.running||(this.running=!0,this._querySelf())}async stop(){this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort()}_querySelf(){Promise.resolve().then((async()=>{const e=new yi.TimeoutController(this.queryTimeout);try{this.controller=new AbortController;const t=(0,Nc.anySignal)([this.controller.signal,e.signal]);try{null!=hW.setMaxListeners&&(0,hW.setMaxListeners)(1/0,t)}catch{}const n=await kv(this.peerRouting.getClosestPeers(this.components.peerId.toBytes(),{signal:t}),(e=>Jm(e,this.count)),(async e=>await NP(e)));this.log("query ran successfully - found %d peers",n)}catch(ik){this.log("query error",ik)}finally{this.timeoutId=setTimeout(this._querySelf.bind(this),this.interval),e.clear()}})).catch((e=>{this.log("query error",e)}))}}const DX=32,UX=64;class LX extends uM{constructor(e,t){super();const{kBucketSize:n,clientMode:r,validators:o,selectors:s,querySelfInterval:i,lan:a,protocolPrefix:l,pingTimeout:c,pingConcurrency:u,maxInboundStreams:d,maxOutboundStreams:h,providers:p}=t;this.running=!1,this.components=e,this.lan=Boolean(a),this.log=pe("libp2p:kad-dht:"+(!0===a?"lan":"wan")),this.protocol=`${l??nQ}${!0===a?tQ:""}${rQ}`,this.kBucketSize=n??20,this.clientMode=r??!0,this.maxInboundStreams=d??DX,this.maxOutboundStreams=h??UX,this.routingTable=new NQ(e,{kBucketSize:n,lan:this.lan,pingTimeout:c,pingConcurrency:u,protocol:this.protocol}),this.providers=new uX(e,p??{}),this.validators={...tX,...o},this.selectors={...oX,...s},this.network=new QQ(e,{protocol:this.protocol,lan:this.lan}),this.queryManager=new wX(e,{disjointPaths:Math.ceil(this.kBucketSize/2),lan:a}),this.peerRouting=new lX(e,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new sX(e,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new iX(e,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new LQ({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new OX(e,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new NX(e,{protocol:this.protocol,lan:this.lan}),this.querySelf=new PX(e,{peerRouting:this.peerRouting,interval:i,lan:this.lan}),this.network.addEventListener("peer",(e=>{const t=e.detail;this.onPeerConnect(t).catch((e=>{this.log.error("could not add %p to routing table",t.id,e)})),this.dispatchEvent(new hM("peer",{detail:t}))})),this.topologyListener.addEventListener("peer",(e=>{const t=e.detail;Promise.resolve().then((async()=>{const e=await this.components.peerStore.addressBook.get(t),n={id:t,multiaddrs:e.map((e=>e.multiaddr)),protocols:[]};await this.onPeerConnect(n)})).catch((e=>{this.log.error("could not add %p to routing table",t,e)}))}))}get[Jq](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}async onPeerConnect(e){if(this.log("peer %p connected with protocols %s",e.id,e.protocols),e=this.lan?vQ(e):yQ(e),0!==e.multiaddrs.length)try{await this.routingTable.add(e.id)}catch(ik){this.log.error("could not add %p to routing table",e.id,ik)}else this.log("ignoring %p as they do not have any %s addresses in %s",e.id,this.lan?"private":"public",e.multiaddrs.map((e=>e.toString())))}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(e){await this.components.registrar.unhandle(this.protocol),"client"===e?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async*put(e,t,n={}){yield*this.contentFetching.put(e,t,n)}async*get(e,t={}){yield*this.contentFetching.get(e,t)}async*provide(e,t={}){yield*this.contentRouting.provide(e,this.components.addressManager.getAddresses(),t)}async*findProviders(e,t={}){yield*this.contentRouting.findProviders(e,t)}async*findPeer(e,t={}){yield*this.peerRouting.findPeer(e,t)}async*getClosestPeers(e,t={}){yield*this.peerRouting.getClosestPeers(e,t)}async refreshRoutingTable(){this.routingTableRefresh.refreshTable(!0)}}const BX=pe("libp2p:kad-dht");class MX extends uM{constructor(e,t,n){super(),this.components=e,this.wan=t,this.lan=n,this.wan.addEventListener("peer",(e=>{this.dispatchEvent(new hM("peer",{detail:e.detail}))})),this.lan.addEventListener("peer",(e=>{this.dispatchEvent(new hM("peer",{detail:e.detail}))}))}get[Jq](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(e){await this.wan.setMode(e)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async*put(e,t,n={}){for await(const r of wv(this.lan.put(e,t,n),this.wan.put(e,t,n)))yield r}async*get(e,t={}){let n=!1,r=!1;for await(const o of wv(this.lan.get(e,t),this.wan.get(e,t)))yield o,"DIALING_PEER"===o.name&&(n=!0),"VALUE"===o.name&&(n=!0,null!=o.value&&(r=!0)),"SENDING_QUERY"===o.name&&(n=!0);if(!n)throw new Xu("No peers found in routing table!","ERR_NO_PEERS_IN_ROUTING_TABLE");r||(yield YQ({from:this.components.peerId,error:new Xu("Not found","ERR_NOT_FOUND")}))}async*provide(e,t={}){let n=0,r=0;const o=[],s=[this.lan];"server"===await this.wan.getMode()&&s.push(this.wan);for await(const i of wv(...s.map((n=>n.provide(e,t)))))yield i,"SENDING_QUERY"===i.name&&n++,"QUERY_ERROR"===i.name&&o.push(i.error),"PEER_RESPONSE"===i.name&&"ADD_PROVIDER"===i.messageName&&(BX("sent provider record for %s to %p",e,i.from),r++);if(0===r){if(o.length>0)throw new Xu(`Failed to provide to ${o.length} of ${n} peers`,"ERR_PROVIDES_FAILED",{errors:o});throw new Xu("Failed to provide - no peers found","ERR_PROVIDES_FAILED")}}async*findProviders(e,t={}){yield*wv(this.lan.findProviders(e,t),this.wan.findProviders(e,t))}async*findPeer(e,t={}){let n=!1;for await(const r of wv(this.lan.findPeer(e,t),this.wan.findPeer(e,t)))yield r,"SENDING_QUERY"!==r.name&&"FINAL_PEER"!==r.name||(n=!0);if(!n)throw new Xu("Peer lookup failed","ERR_LOOKUP_FAILED")}async*getClosestPeers(e,t={}){yield*wv(this.lan.getClosestPeers(e,t),this.wan.getClosestPeers(e,t))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}}class FX extends MX{constructor(e,t){super(e,new LX(e,{protocolPrefix:"/ipfs",...t,lan:!1}),new LX(e,{protocolPrefix:"/ipfs",...t,clientMode:!1,lan:!0}))}}function jX(e){return t=>new FX(t,e)}const zX=Ci,$X=Ii,VX=function(e){let t=0;if(e=e.toString().trim(),zX(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if($X(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){const e=zX(n[r]);let t;e&&(t=VX(n[r]),n[r]=Ti(t.slice(0,2),"base16")),null!=t&&++r<8&&n.splice(r,0,Ti(t.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);o[t++]=e>>8&255,o[t++]=255&e}return o}throw new Error("invalid ip address")},HX=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let o=0;o<n;o++)r.push(e[t+o]);return r.join(".")}if(16===n){const e=[];for(let o=0;o<n;o+=2)e.push(r.getUint16(t+o).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},KX=-1,qX={},WX={},YX=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,KX,"ip6zone"],[43,8,"ipcidr"],[53,KX,"dns",!0],[54,KX,"dns4",!0],[55,KX,"dns6",!0],[56,KX,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,KX,"unix",!1,!0],[421,KX,"ipfs"],[421,KX,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,KX,"garlic64"],[448,0,"tls"],[449,KX,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,KX,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,KX,"memory"]];function GX(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}function ZX(e){if("number"===typeof e){if(null!=WX[e])return WX[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=qX[e])return qX[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}YX.forEach((e=>{const t=GX(...e);WX[t.code]=t,qX[t.name]=t}));ZX("ip4"),ZX("ip6"),ZX("ipcidr");function JX(e,t){const n=ZX(e);switch(n.code){case 4:case 41:return n0(t);case 42:return i0(t);case 6:case 273:case 33:case 132:return o0(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return i0(t);case 421:return u0(t);case 444:return p0(t);case 445:return p0(t);case 466:return c0(t);default:return Ti(t,"base16")}}function QX(e,t){const n=ZX(e);switch(n.code){case 4:return t0(t);case 41:return t0(t);case 42:return s0(t);case 6:case 273:case 33:case 132:return r0(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return s0(t);case 421:return a0(t);case 444:return d0(t);case 445:return h0(t);case 466:return l0(t);default:return mi(t,"base16")}}const XX=Object.values(Js).map((e=>e.decoder)),e0=function(){let e=XX[0].or(XX[1]);return XX.slice(2).forEach((t=>e=e.or(t))),e}();function t0(e){if(!Ai(e))throw new Error("invalid ip address");return VX(e)}function n0(e){const t=HX(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ai(t))throw new Error("invalid ip address");return t}function r0(e){const t=new ArrayBuffer(2),n=new DataView(t);return n.setUint16(0,e),new Uint8Array(t)}function o0(e){const t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function s0(e){const t=mi(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function i0(e){const t=Fi.decode(e);if(e=e.slice(Fi.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Ti(e)}function a0(e){let t;t="Q"===e[0]||"1"===e[0]?nt(J.decode(`z${e}`)).bytes:lt.parse(e).multihash.bytes;const n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function l0(e){const t=e0.decode(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function c0(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return"u"+Ti(n,"base64url")}function u0(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return Ti(n,"base58btc")}function d0(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=X.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=r0(r);return ji([n,o],n.length+o.length)}function h0(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=X.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=r0(r);return ji([n,o],n.length+o.length)}function p0(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2),r=Ti(t,"base32"),o=o0(n);return`${r}:${o}`}function f0(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const o=n[r],s=ZX(o);if(0!==s.size){if(r++,r>=n.length)throw A0("invalid address: "+e);if(!0===s.path){t.push([o,I0(n.slice(r).join("/"))]);break}t.push([o,n[r]])}else t.push([o])}return t}function g0(e){const t=[];return e.map((e=>{const n=T0(e);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),I0(t.join("/"))}function m0(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=T0(e);return e.length>1?[t.code,QX(t.code,e[1])]:[t.code]}))}function y0(e){return e.map((e=>{const t=T0(e);return null!=e[1]?[t.code,JX(t.code,e[1])]:[t.code]}))}function v0(e){return k0(ji(e.map((e=>{const t=T0(e);let n=Uint8Array.from(Fi.encode(t.code));return e.length>1&&null!=e[1]&&(n=ji([n,e[1]])),n}))))}function w0(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=Fi.decode(t);return e+(Fi.decode.bytes??0)}}function b0(e){const t=[];let n=0;while(n<e.length){const r=Fi.decode(e,n),o=Fi.decode.bytes??0,s=ZX(r),i=w0(s,e.slice(n+o));if(0===i){t.push([r]),n+=o;continue}const a=e.slice(n+o,n+o+i);if(n+=i+o,n>e.length)throw A0("Invalid address Uint8Array: "+Ti(e,"base16"));t.push([r,a])}return t}function S0(e){const t=b0(e),n=y0(t);return g0(n)}function _0(e){e=I0(e);const t=f0(e),n=m0(t);return v0(n)}function E0(e){return _0(e)}function k0(e){const t=C0(e);if(null!=t)throw t;return Uint8Array.from(e)}function C0(e){try{b0(e)}catch(ik){return ik}}function I0(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function A0(e){return new Error("Error parsing address: "+e)}function T0(e){const t=ZX(e[0]);return t}var R0,x0,O0,N0,P0=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},D0=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};const U0=Symbol.for("nodejs.util.inspect.custom"),L0=[ZX("dns").code,ZX("dns4").code,ZX("dns6").code,ZX("dnsaddr").code],B0=new Map,M0=Symbol.for("@multiformats/js-multiaddr/multiaddr");function F0(e){return Boolean(e?.[M0])}class j0{constructor(e){if(R0.set(this,void 0),x0.set(this,void 0),O0.set(this,void 0),this[N0]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=k0(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=E0(e)}else{if(!F0(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=k0(e.bytes)}}toString(){return null==P0(this,R0,"f")&&D0(this,R0,S0(this.bytes),"f"),P0(this,R0,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";const s=ZX("tcp"),i=ZX("udp"),a=ZX("ip4"),l=ZX("ip6"),c=ZX("dns6"),u=ZX("ip6zone");for(const[h,p]of this.stringTuples())h===u.code&&(o=`%${p??""}`),L0.includes(h)&&(t=s.name,r=443,n=`${p??""}${o}`,e=h===c.code?6:4),h!==s.code&&h!==i.code||(t=ZX(h).name,r=parseInt(p??"")),h!==a.code&&h!==l.code||(t=ZX(h).name,n=`${p??""}${o}`,e=h===l.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const d={family:e,host:n,transport:t,port:r};return d}protos(){return this.protoCodes().map((e=>Object.assign({},ZX(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;while(n<t.length){const r=Fi.decode(t,n),o=Fi.decode.bytes??0,s=ZX(r),i=w0(s,t.slice(n+o));n+=i+o,e.push(r)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==P0(this,x0,"f")&&D0(this,x0,b0(this.bytes),"f"),P0(this,x0,"f")}stringTuples(){return null==P0(this,O0,"f")&&D0(this,O0,y0(this.tuples()),"f"),P0(this,O0,"f")}encapsulate(e){return e=new j0(e),new j0(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new j0(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new j0(v0(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===qX.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?Ti(J.decode(`z${e}`),"base58btc"):Ti(lt.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>{const t=ZX(e[0]);return!0===t.path}))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return wa(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=B0.get(t.name);if(null==n)throw fe(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,e);return r.map((e=>new j0(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(R0=new WeakMap,x0=new WeakMap,O0=new WeakMap,N0=M0,U0)](){return`Multiaddr(${S0(this.bytes)})`}}function z0(e){return new j0(e)}const $0=f1("dns4"),V0=f1("dns6"),H0=f1("dnsaddr"),K0=p1(f1("dns"),H0,$0,V0),q0=p1(f1("ip4"),f1("ip6")),W0=p1(h1(q0,f1("tcp")),h1(K0,f1("tcp"))),Y0=h1(q0,f1("udp")),G0=h1(Y0,f1("utp")),Z0=h1(Y0,f1("quic")),J0=p1(h1(W0,f1("ws")),h1(K0,f1("ws"))),Q0=p1(h1(W0,f1("wss")),h1(K0,f1("wss")),h1(W0,f1("tls"),f1("ws")),h1(K0,f1("tls"),f1("ws"))),X0=p1(h1(W0,f1("http")),h1(q0,f1("http")),h1(K0,f1("http"))),e1=p1(h1(W0,f1("https")),h1(q0,f1("https")),h1(K0,f1("https"))),t1=h1(Y0,f1("webrtc-direct"),f1("certhash")),n1=p1(h1(t1,f1("p2p")),t1),r1=p1(h1(J0,f1("p2p-webrtc-star"),f1("p2p")),h1(Q0,f1("p2p-webrtc-star"),f1("p2p")),h1(J0,f1("p2p-webrtc-star")),h1(Q0,f1("p2p-webrtc-star"))),o1=(p1(h1(J0,f1("p2p-websocket-star"),f1("p2p")),h1(Q0,f1("p2p-websocket-star"),f1("p2p")),h1(J0,f1("p2p-websocket-star")),h1(Q0,f1("p2p-websocket-star"))),p1(h1(X0,f1("p2p-webrtc-direct"),f1("p2p")),h1(e1,f1("p2p-webrtc-direct"),f1("p2p")),h1(X0,f1("p2p-webrtc-direct")),h1(e1,f1("p2p-webrtc-direct")))),s1=p1(J0,Q0,X0,e1,r1,o1,W0,G0,Z0,K0,n1),i1=(p1(h1(s1,f1("p2p-stardust"),f1("p2p")),h1(s1,f1("p2p-stardust"))),p1(h1(s1,f1("p2p")),r1,o1,n1,f1("p2p"))),a1=p1(h1(i1,f1("p2p-circuit"),i1),h1(i1,f1("p2p-circuit")),h1(f1("p2p-circuit"),i1),h1(s1,f1("p2p-circuit")),h1(f1("p2p-circuit"),s1),f1("p2p-circuit")),l1=()=>p1(h1(a1,l1),a1),c1=l1(),u1=p1(h1(c1,i1,c1),h1(i1,c1),h1(c1,i1),c1,i1);p1(h1(c1,f1("webrtc")),h1(s1,f1("webrtc")),f1("webrtc"));function d1(e){function t(t){let n;try{n=z0(t)}catch(ik){return!1}const r=e(n.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}return t}function h1(...e){function t(t){if(t.length<e.length)return null;let n=t;return e.some((e=>(n="function"===typeof e?e().partialMatch(t):e.partialMatch(t),Array.isArray(n)&&(t=n),null===n))),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:d1(t),partialMatch:t}}function p1(...e){function t(t){let n=null;return e.some((e=>{const r="function"===typeof e?e().partialMatch(t):e.partialMatch(t);return null!=r&&(n=r,!0)})),n}const n={toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:d1(t),partialMatch:t};return n}function f1(e){const t=e;function n(e){let n;try{n=z0(e)}catch(ik){return!1}const r=n.protoNames();return 1===r.length&&r[0]===t}function r(e){return 0===e.length?null:e[0]===t?e.slice(1):null}return{toString:function(){return t},matches:n,partialMatch:r}}const g1=pe("libp2p:bootstrap"),m1="bootstrap",y1=50,v1=12e4,w1=1e3;class b1 extends uM{constructor(e,t={list:[]}){if(null==t.list||0===t.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this.components=e,this.timeout=t.timeout??w1,this.list=[];for(const n of t.list){if(!u1.matches(n)){g1.error("Invalid multiaddr");continue}const e=z0(n),t=e.getPeerId();if(null==t){g1.error("Invalid bootstrap multiaddr without peer id");continue}const r={id:hd(t),multiaddrs:[e],protocols:[]};this.list.push(r)}this._init=t}get[Jq](){return!0}get[Symbol.toStringTag](){return"@libp2p/bootstrap"}isStarted(){return Boolean(this.timer)}start(){this.isStarted()||(g1("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout((()=>{this._discoverBootstrapPeers().catch((e=>{g1.error(e)}))}),this.timeout))}async _discoverBootstrapPeers(){if(null!=this.timer)for(const e of this.list){if(await this.components.peerStore.tagPeer(e.id,this._init.tagName??m1,{value:this._init.tagValue??y1,ttl:this._init.tagTTL??v1}),null==this.timer)return;this.dispatchEvent(new hM("peer",{detail:e}))}}stop(){null!=this.timer&&clearTimeout(this.timer),this.timer=void 0}}function S1(e){return t=>new b1(t,e)}b1.tag="bootstrap";var _1=WebSocket,E1=n(507);function k1(e){return e instanceof ArrayBuffer||"ArrayBuffer"===e?.constructor?.name&&"number"===typeof e?.byteLength}var C1=e=>{e.binaryType="arraybuffer";const t=async()=>await new Promise(((t,n)=>{if(o)return t();if(null!=r)return n(r);const s=t=>{e.removeEventListener("open",i),e.removeEventListener("error",a),t()},i=()=>s(t),a=t=>{s((()=>n(t.error??new Error(`connect ECONNREFUSED ${e.url}`))))};e.addEventListener("open",i),e.addEventListener("error",a)})),n=async function*(){const n=new E1.zN((({push:t,stop:n,fail:r})=>{const o=e=>{let n=null;"string"===typeof e.data&&(n=mi(e.data)),k1(e.data)&&(n=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(n=e.data),null!=n&&t(n)},s=e=>r(e.error??new Error("Socket error"));return e.addEventListener("message",o),e.addEventListener("error",s),e.addEventListener("close",n),()=>{e.removeEventListener("message",o),e.removeEventListener("error",s),e.removeEventListener("close",n)}}),{highWaterMark:1/0});await t();for await(const e of n)yield k1(e)?new Uint8Array(e):e}();let r,o=1===e.readyState;return e.addEventListener("open",(()=>{o=!0,r=null})),e.addEventListener("close",(()=>{o=!1,r=null})),e.addEventListener("error",(t=>{o||(r=t.error??new Error(`connect ECONNREFUSED ${e.url}`))})),Object.assign(n,{connected:t})},I1=e=>{if(e.readyState>=2)throw new Error("socket closed");if(1!==e.readyState)return new Promise(((t,n)=>{function r(){e.removeEventListener("open",o),e.removeEventListener("error",s)}function o(){r(),t()}function s(t){r(),n(t.error??new Error(`connect ECONNREFUSED ${e.url}`))}e.addEventListener("open",o),e.addEventListener("error",s)}))},A1=(e,t)=>{t=t??{},t.closeOnEnd=!1!==t.closeOnEnd;const n=async n=>{for await(const t of n){try{await I1(e)}catch(ik){if("socket closed"===ik.message)break;throw ik}e.send(t)}if(null!=t.closeOnEnd&&e.readyState<=1)return await new Promise(((t,n)=>{e.addEventListener("close",(e=>{if(e.wasClean||1006===e.code)t();else{const t=Object.assign(new Error("ws error"),{event:e});n(t)}})),setTimeout((()=>e.close()))}))};return n},T1=(e,t)=>{t=t??{};const n=C1(e);let r=t.remoteAddress,o=t.remotePort;if(null!=e.url)try{const t=new URL(e.url);r=t.hostname,o=parseInt(t.port,10)}catch{}if(null==r||null==o)throw new Error("Remote connection did not have address and/or port");const s={sink:A1(e,t),source:n,connected:async()=>await n.connected(),close:async()=>{e.readyState!==e.CONNECTING&&e.readyState!==e.OPEN||await new Promise((t=>{e.addEventListener("close",(()=>{t()})),e.close()}))},destroy:()=>{null!=e.terminate?e.terminate():e.close()},remoteAddress:r,remotePort:o,socket:e};return s};const R1={http:"ws",https:"wss"},x1="ws";var O1=(e,t)=>(0,uc.relative)(e,t,R1,x1);function N1(e,t){const n="undefined"===typeof window?"":window.location;t=t??{};const r=O1(e,n.toString()),o=new _1(r,t.websocket);return T1(o,t)}function P1(){throw new Error("WebSocket Servers can not be created in the browser!")}const D1=421,U1=290,L1=2e3,B1=pe("libp2p:websockets:socket");function M1(e,t,n){n=n??{};const r={async sink(t){null!=n?.signal&&(t=JF(t,n.signal));try{await e.sink(t)}catch(ik){"aborted"!==ik.type&&B1.error(ik)}},source:null!=n.signal?JF(e.source,n.signal):e.source,remoteAddr:t,timeline:{open:Date.now()},async close(){const t=Date.now();try{await Ox(e.close(),{milliseconds:L1})}catch(ik){const{host:o,port:s}=r.remoteAddr.toOptions();B1("timeout closing stream to %s:%s after %dms, destroying it manually",o,s,Date.now()-t),e.destroy()}finally{r.timeline.close=Date.now()}}};return e.socket.addEventListener("close",(()=>{null==r.timeline.close&&(r.timeline.close=Date.now())}),{once:!0}),r}const F1=Ci,j1=Ii,z1=function(e){let t=0;if(e=e.toString().trim(),F1(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if(j1(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){const e=F1(n[r]);let t;e&&(t=z1(n[r]),n[r]=Ti(t.slice(0,2),"base16")),null!=t&&++r<8&&n.splice(r,0,Ti(t.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);o[t++]=e>>8&255,o[t++]=255&e}return o}throw new Error("invalid ip address")},$1=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let o=0;o<n;o++)r.push(e[t+o]);return r.join(".")}if(16===n){const e=[];for(let o=0;o<n;o+=2)e.push(r.getUint16(t+o).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V1=-1,H1={},K1={},q1=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V1,"ip6zone"],[43,8,"ipcidr"],[53,V1,"dns",!0],[54,V1,"dns4",!0],[55,V1,"dns6",!0],[56,V1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V1,"unix",!1,!0],[421,V1,"ipfs"],[421,V1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V1,"garlic64"],[448,0,"tls"],[449,V1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,V1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V1,"memory"]];function W1(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}function Y1(e){if("number"===typeof e){if(null!=K1[e])return K1[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=H1[e])return H1[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}q1.forEach((e=>{const t=W1(...e);K1[t.code]=t,H1[t.name]=t}));Y1("ip4"),Y1("ip6"),Y1("ipcidr");function G1(e,t){const n=Y1(e);switch(n.code){case 4:case 41:return e2(t);case 42:return o2(t);case 6:case 273:case 33:case 132:return n2(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return o2(t);case 421:return l2(t);case 444:return d2(t);case 445:return d2(t);case 466:return a2(t);default:return Ti(t,"base16")}}function Z1(e,t){const n=Y1(e);switch(n.code){case 4:return X1(t);case 41:return X1(t);case 42:return r2(t);case 6:case 273:case 33:case 132:return t2(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return r2(t);case 421:return s2(t);case 444:return c2(t);case 445:return u2(t);case 466:return i2(t);default:return mi(t,"base16")}}const J1=Object.values(Js).map((e=>e.decoder)),Q1=function(){let e=J1[0].or(J1[1]);return J1.slice(2).forEach((t=>e=e.or(t))),e}();function X1(e){if(!Ai(e))throw new Error("invalid ip address");return z1(e)}function e2(e){const t=$1(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ai(t))throw new Error("invalid ip address");return t}function t2(e){const t=new ArrayBuffer(2),n=new DataView(t);return n.setUint16(0,e),new Uint8Array(t)}function n2(e){const t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function r2(e){const t=mi(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function o2(e){const t=Fi.decode(e);if(e=e.slice(Fi.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Ti(e)}function s2(e){let t;t="Q"===e[0]||"1"===e[0]?nt(J.decode(`z${e}`)).bytes:lt.parse(e).multihash.bytes;const n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function i2(e){const t=Q1.decode(e),n=Uint8Array.from(Fi.encode(t.length));return ji([n,t],n.length+t.length)}function a2(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return"u"+Ti(n,"base64url")}function l2(e){const t=Fi.decode(e),n=e.slice(Fi.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return Ti(n,"base58btc")}function c2(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=X.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=t2(r);return ji([n,o],n.length+o.length)}function u2(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=X.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=t2(r);return ji([n,o],n.length+o.length)}function d2(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2),r=Ti(t,"base32"),o=n2(n);return`${r}:${o}`}function h2(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const o=n[r],s=Y1(o);if(0!==s.size){if(r++,r>=n.length)throw C2("invalid address: "+e);if(!0===s.path){t.push([o,k2(n.slice(r).join("/"))]);break}t.push([o,n[r]])}else t.push([o])}return t}function p2(e){const t=[];return e.map((e=>{const n=I2(e);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),k2(t.join("/"))}function f2(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=I2(e);return e.length>1?[t.code,Z1(t.code,e[1])]:[t.code]}))}function g2(e){return e.map((e=>{const t=I2(e);return null!=e[1]?[t.code,G1(t.code,e[1])]:[t.code]}))}function m2(e){return _2(ji(e.map((e=>{const t=I2(e);let n=Uint8Array.from(Fi.encode(t.code));return e.length>1&&null!=e[1]&&(n=ji([n,e[1]])),n}))))}function y2(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=Fi.decode(t);return e+(Fi.decode.bytes??0)}}function v2(e){const t=[];let n=0;while(n<e.length){const r=Fi.decode(e,n),o=Fi.decode.bytes??0,s=Y1(r),i=y2(s,e.slice(n+o));if(0===i){t.push([r]),n+=o;continue}const a=e.slice(n+o,n+o+i);if(n+=i+o,n>e.length)throw C2("Invalid address Uint8Array: "+Ti(e,"base16"));t.push([r,a])}return t}function w2(e){const t=v2(e),n=g2(t);return p2(n)}function b2(e){e=k2(e);const t=h2(e),n=f2(t);return m2(n)}function S2(e){return b2(e)}function _2(e){const t=E2(e);if(null!=t)throw t;return Uint8Array.from(e)}function E2(e){try{v2(e)}catch(ik){return ik}}function k2(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function C2(e){return new Error("Error parsing address: "+e)}function I2(e){const t=Y1(e[0]);return t}var A2,T2,R2,x2,O2=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},N2=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};const P2=Symbol.for("nodejs.util.inspect.custom"),D2=[Y1("dns").code,Y1("dns4").code,Y1("dns6").code,Y1("dnsaddr").code],U2=new Map,L2=Symbol.for("@multiformats/js-multiaddr/multiaddr");function B2(e){return Boolean(e?.[L2])}class M2{constructor(e){if(A2.set(this,void 0),T2.set(this,void 0),R2.set(this,void 0),this[x2]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=_2(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=S2(e)}else{if(!B2(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=_2(e.bytes)}}toString(){return null==O2(this,A2,"f")&&N2(this,A2,w2(this.bytes),"f"),O2(this,A2,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";const s=Y1("tcp"),i=Y1("udp"),a=Y1("ip4"),l=Y1("ip6"),c=Y1("dns6"),u=Y1("ip6zone");for(const[h,p]of this.stringTuples())h===u.code&&(o=`%${p??""}`),D2.includes(h)&&(t=s.name,r=443,n=`${p??""}${o}`,e=h===c.code?6:4),h!==s.code&&h!==i.code||(t=Y1(h).name,r=parseInt(p??"")),h!==a.code&&h!==l.code||(t=Y1(h).name,n=`${p??""}${o}`,e=h===l.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const d={family:e,host:n,transport:t,port:r};return d}protos(){return this.protoCodes().map((e=>Object.assign({},Y1(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;while(n<t.length){const r=Fi.decode(t,n),o=Fi.decode.bytes??0,s=Y1(r),i=y2(s,t.slice(n+o));n+=i+o,e.push(r)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==O2(this,T2,"f")&&N2(this,T2,v2(this.bytes),"f"),O2(this,T2,"f")}stringTuples(){return null==O2(this,R2,"f")&&N2(this,R2,g2(this.tuples()),"f"),O2(this,R2,"f")}encapsulate(e){return e=new M2(e),new M2(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new M2(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new M2(m2(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===H1.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?Ti(J.decode(`z${e}`),"base58btc"):Ti(lt.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>{const t=Y1(e[0]);return!0===t.path}))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return wa(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=U2.get(t.name);if(null==n)throw fe(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,e);return r.map((e=>new M2(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(A2=new WeakMap,T2=new WeakMap,R2=new WeakMap,x2=L2,P2)](){return`Multiaddr(${w2(this.bytes)})`}}function F2(e){return new M2(e)}const j2=d3("dns4"),z2=d3("dns6"),$2=d3("dnsaddr"),V2=u3(d3("dns"),$2,j2,z2),H2=u3(d3("ip4"),d3("ip6")),K2=u3(c3(H2,d3("tcp")),c3(V2,d3("tcp"))),q2=c3(H2,d3("udp")),W2=c3(q2,d3("utp")),Y2=c3(q2,d3("quic")),G2=u3(c3(K2,d3("ws")),c3(V2,d3("ws"))),Z2=u3(c3(K2,d3("wss")),c3(V2,d3("wss")),c3(K2,d3("tls"),d3("ws")),c3(V2,d3("tls"),d3("ws"))),J2=u3(c3(K2,d3("http")),c3(H2,d3("http")),c3(V2,d3("http"))),Q2=u3(c3(K2,d3("https")),c3(H2,d3("https")),c3(V2,d3("https"))),X2=c3(q2,d3("webrtc-direct"),d3("certhash")),e3=u3(c3(X2,d3("p2p")),X2),t3=u3(c3(G2,d3("p2p-webrtc-star"),d3("p2p")),c3(Z2,d3("p2p-webrtc-star"),d3("p2p")),c3(G2,d3("p2p-webrtc-star")),c3(Z2,d3("p2p-webrtc-star"))),n3=(u3(c3(G2,d3("p2p-websocket-star"),d3("p2p")),c3(Z2,d3("p2p-websocket-star"),d3("p2p")),c3(G2,d3("p2p-websocket-star")),c3(Z2,d3("p2p-websocket-star"))),u3(c3(J2,d3("p2p-webrtc-direct"),d3("p2p")),c3(Q2,d3("p2p-webrtc-direct"),d3("p2p")),c3(J2,d3("p2p-webrtc-direct")),c3(Q2,d3("p2p-webrtc-direct")))),r3=u3(G2,Z2,J2,Q2,t3,n3,K2,W2,Y2,V2,e3),o3=(u3(c3(r3,d3("p2p-stardust"),d3("p2p")),c3(r3,d3("p2p-stardust"))),u3(c3(r3,d3("p2p")),t3,n3,e3,d3("p2p"))),s3=u3(c3(o3,d3("p2p-circuit"),o3),c3(o3,d3("p2p-circuit")),c3(d3("p2p-circuit"),o3),c3(r3,d3("p2p-circuit")),c3(d3("p2p-circuit"),r3),d3("p2p-circuit")),i3=()=>u3(c3(s3,i3),s3),a3=i3();u3(c3(a3,o3,a3),c3(o3,a3),c3(a3,o3),a3,o3),u3(c3(a3,d3("webrtc")),c3(r3,d3("webrtc")),d3("webrtc"));function l3(e){function t(t){let n;try{n=F2(t)}catch(ik){return!1}const r=e(n.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}return t}function c3(...e){function t(t){if(t.length<e.length)return null;let n=t;return e.some((e=>(n="function"===typeof e?e().partialMatch(t):e.partialMatch(t),Array.isArray(n)&&(t=n),null===n))),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:l3(t),partialMatch:t}}function u3(...e){function t(t){let n=null;return e.some((e=>{const r="function"===typeof e?e().partialMatch(t):e.partialMatch(t);return null!=r&&(n=r,!0)})),n}const n={toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:l3(t),partialMatch:t};return n}function d3(e){const t=e;function n(e){let n;try{n=F2(e)}catch(ik){return!1}const r=n.protoNames();return 1===r.length&&r[0]===t}function r(e){return 0===e.length?null:e[0]===t?e.slice(1):null}return{toString:function(){return t},matches:n,partialMatch:r}}function h3(e){return e.filter((e=>{if(e.protoCodes().includes(U1))return!1;const t=e.decapsulateCode(D1);return G2.matches(t)||Z2.matches(t)}))}function p3(e){return e.filter((e=>{if(e.protoCodes().includes(U1))return!1;const t=e.decapsulateCode(D1);return Z2.matches(t)}))}const f3=pe("libp2p:websockets");class g3{constructor(e){this.init=e}get[Symbol.toStringTag](){return"@libp2p/websockets"}get[Gq](){return!0}async dial(e,t){f3("dialing %s",e),t=t??{};const n=await this._connect(e,t),r=M1(n,e);f3("new outbound connection %s",r.remoteAddr);const o=await t.upgrader.upgradeOutbound(r);return f3("outbound connection %s upgraded",r.remoteAddr),o}async _connect(e,t){if(!0===t?.signal?.aborted)throw new Qu;const n=e.toOptions();f3("dialing %s:%s",n.host,n.port);const r=gv(),o=e=>{f3.error("connection error:",e),r.reject(e)},s=N1(yx(e),this.init);if(null!=s.socket.on?s.socket.on("error",o):s.socket.onerror=o,null==t.signal)return await Promise.race([s.connected(),r.promise]),f3("connected %s",e),s;let i;const a=new Promise(((e,n)=>{i=()=>{n(new Qu),s.close().catch((e=>{f3.error("error closing raw socket",e)}))},!0!==t?.signal?.aborted?t?.signal?.addEventListener("abort",i):i()}));try{await Promise.race([a,r.promise,s.connected()])}finally{null!=i&&t?.signal?.removeEventListener("abort",i)}return f3("connected %s",e),s}createListener(e){return P1({...this.init,...e})}filter(e){return e=Array.isArray(e)?e:[e],null!=this.init?.filter?this.init?.filter(e):IZ||xZ?p3(e):h3(e)}}function m3(e={}){return()=>new g3(e)}function y3(e){return new Uint8Array(e)}var v3;(function(e){e[e["NEW_STREAM"]=0]="NEW_STREAM",e[e["MESSAGE_RECEIVER"]=1]="MESSAGE_RECEIVER",e[e["MESSAGE_INITIATOR"]=2]="MESSAGE_INITIATOR",e[e["CLOSE_RECEIVER"]=3]="CLOSE_RECEIVER",e[e["CLOSE_INITIATOR"]=4]="CLOSE_INITIATOR",e[e["RESET_RECEIVER"]=5]="RESET_RECEIVER",e[e["RESET_INITIATOR"]=6]="RESET_INITIATOR"})(v3||(v3={}));const w3=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),b3=Object.freeze({NEW_STREAM:v3.NEW_STREAM,MESSAGE:v3.MESSAGE_INITIATOR,CLOSE:v3.CLOSE_INITIATOR,RESET:v3.RESET_INITIATOR}),S3=Object.freeze({MESSAGE:v3.MESSAGE_RECEIVER,CLOSE:v3.CLOSE_RECEIVER,RESET:v3.RESET_RECEIVER}),_3=1048576,E3=(e,t)=>{t.append(e)};async function*k3(e,t={}){let n=new Sw,r=!1,o=gv(),s=Number(t.size??_3);(isNaN(s)||0===s||s<0)&&(s=_3);const i=t.yieldAfter??0,a=t.serialize??E3;Promise.resolve().then((async()=>{try{let t;for await(const r of e)a(r,n),n.byteLength>=s?(clearTimeout(t),o.resolve()):t=setTimeout((()=>{o.resolve()}),i);clearTimeout(t),o.resolve()}catch(ik){o.reject(ik)}finally{r=!0}}));while(!r)if(await o.promise,o=gv(),n.byteLength>0){const e=n;n=new Sw,yield e.subarray()}}var C3=k3;const I3=10240;class A3{constructor(){this._pool=y3(I3),this._poolOffset=0}write(e,t){const n=this._pool;let r=this._poolOffset;Fi.encode(e.id<<3|e.type,n,r),r+=Fi.encode.bytes??0,e.type!==v3.NEW_STREAM&&e.type!==v3.MESSAGE_INITIATOR&&e.type!==v3.MESSAGE_RECEIVER||null==e.data?Fi.encode(0,n,r):Fi.encode(e.data.length,n,r),r+=Fi.encode.bytes??0;const o=n.subarray(this._poolOffset,r);I3-r<100?(this._pool=y3(I3),this._poolOffset=0):this._poolOffset=r,t.append(o),e.type!==v3.NEW_STREAM&&e.type!==v3.MESSAGE_INITIATOR&&e.type!==v3.MESSAGE_RECEIVER||null==e.data||t.append(e.data)}}const T3=new A3;async function*R3(e,t=0){if(null!=t&&0!==t)yield*C3(e,{size:t,serialize:(e,t)=>{for(const n of e)T3.write(n,t)}});else for await(const n of e){const e=new Sw;for(const t of n)T3.write(t,e);yield e.subarray()}}const x3=1<<20,O3=4<<20;class N3{constructor(e=x3,t=O3){this._buffer=new Sw,this._headerInfo=null,this._maxMessageSize=e,this._maxUnprocessedMessageQueueSize=t}write(e){if(null==e||0===e.length)return[];if(this._buffer.append(e),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});const t=[];while(0!==this._buffer.length){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(ik){if("ERR_MSG_TOO_BIG"===ik.code)throw ik;break}const{id:e,type:n,length:r,offset:o}=this._headerInfo,s=this._buffer.length-o;if(s<r)break;const i={id:e,type:n};n!==v3.NEW_STREAM&&n!==v3.MESSAGE_INITIATOR&&n!==v3.MESSAGE_RECEIVER||(i.data=this._buffer.sublist(o,o+r)),t.push(i),this._buffer.consume(o+r),this._headerInfo=null}return t}_decodeHeader(e){const{value:t,offset:n}=U3(e),{value:r,offset:o}=U3(e,n),s=7&t;if(null==w3[s])throw new Error(`Invalid type received: ${s}`);if(r>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:t>>3,type:s,offset:n+o,length:r}}}const P3=128,D3=127;function U3(e,t=0){let n,r=0,o=0,s=t;const i=e.length;do{if(s>=i||o>49)throw t=0,new RangeError("Could not decode varint");n=e.get(s++),r+=o<28?(n&D3)<<o:(n&D3)*Math.pow(2,o),o+=7}while(n>=P3);return t=s-t,{value:r,offset:t}}const L3=pe("libp2p:mplex:stream"),B3="ERR_STREAM_RESET",M3="ERR_STREAM_ABORT",F3="ERR_SINK_ENDED",j3="ERR_DOUBLE_SINK";function z3(e){const{id:t,name:n,send:r,onEnd:o,type:s="initiator",maxMsgSize:i=x3}=e,a=new AbortController,l=new AbortController,c=new AbortController,u="initiator"===s?b3:S3,d="initiator"===s?`i${t}`:`r${t}`,h=`${null==n?t:n}`;let p,f=!1,g=!1,m=!1;const y={open:Date.now()},v=e=>{f||(f=!0,L3.trace("%s stream %s source end - err: %o",s,h,e),null!=e&&null==p&&(p=e),g&&(S.stat.timeline.close=Date.now(),null!=o&&o(p)))},w=e=>{g||(g=!0,L3.trace("%s stream %s sink end - err: %o",s,h,e),null!=e&&null==p&&(p=e),f&&(y.close=Date.now(),null!=o&&o(p)))},b=ty({onEnd:v}),S={close:()=>{L3.trace("%s stream %s close",s,h),S.closeRead(),S.closeWrite()},closeRead:()=>{L3.trace("%s stream %s closeRead",s,h),f||b.end()},closeWrite:()=>{if(L3.trace("%s stream %s closeWrite",s,h),!g){c.abort();try{r({id:t,type:u.CLOSE})}catch(ik){L3.trace("%s stream %s error sending close",s,n,ik)}w()}},abort:e=>{L3.trace("%s stream %s abort",s,h,e),b.end(e),a.abort(),w(e)},reset:()=>{const e=new Xu("stream reset",B3);l.abort(),b.end(e),w(e)},sink:async e=>{if(m)throw new Xu("sink already called on stream",j3);if(m=!0,g)throw new Xu("stream closed for writing",F3);e=JF(e,(0,Nc.anySignal)([a.signal,l.signal,c.signal]));try{"initiator"===s&&r({id:t,type:b3.NEW_STREAM,data:new Sw(mi(h))});for await(let n of e)while(n.length>0){if(n.length<=i){r({id:t,type:u.MESSAGE,data:n instanceof Uint8Array?new Sw(n):n});break}n=n instanceof Uint8Array?new Sw(n):n,r({id:t,type:u.MESSAGE,data:n.sublist(0,i)}),n.consume(i)}}catch(ik){if("aborted"===ik.type&&"The operation was aborted"===ik.message){if(c.signal.aborted)return;l.signal.aborted&&(ik.message="stream reset",ik.code=B3),a.signal.aborted&&(ik.message="stream aborted",ik.code=M3)}if(ik.code===B3)L3.trace("%s stream %s reset",s,n);else{L3.trace("%s stream %s error",s,n,ik);try{r({id:t,type:u.RESET})}catch(ik){L3.trace("%s stream %s error sending reset",s,n,ik)}}return b.end(ik),void w(ik)}try{r({id:t,type:u.CLOSE})}catch(ik){L3.trace("%s stream %s error sending close",s,n,ik)}w()},source:b,sourcePush:e=>{b.push(e)},sourceReadableLength(){return b.readableLength},stat:{direction:"initiator"===s?"outbound":"inbound",timeline:y},metadata:{},id:d};return S}const $3=pe("libp2p:mplex"),V3=1024,H3=1024,K3=4194304,q3=5;function W3(e){const t={...e,type:`${w3[e.type]} (${e.type})`};return e.type===v3.NEW_STREAM&&(t.data=Ti(e.data instanceof Uint8Array?e.data:e.data.subarray())),e.type!==v3.MESSAGE_INITIATOR&&e.type!==v3.MESSAGE_RECEIVER||(t.data=Ti(e.data instanceof Uint8Array?e.data:e.data.subarray(),"base16")),t}class Y3{constructor(e){this.protocol="/mplex/6.7.0",e=e??{},this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=e,this.sink=this._createSink();const t=this._createSource();this._source=t,this.source=t,this.closeController=new AbortController,this.rateLimiter=new OW.RateLimiterMemory({points:e.disconnectThreshold??q3,duration:1})}get streams(){const e=[];for(const t of this._streams.initiators.values())e.push(t);for(const t of this._streams.receivers.values())e.push(t);return e}newStream(e){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");const t=this._streamId++;e=null==e?t.toString():e.toString();const n=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:n})}close(e){this.closeController.signal.aborted||(null!=e?this.streams.forEach((t=>{t.abort(e)})):this.streams.forEach((e=>{e.close()})),this.closeController.abort())}_newReceiverStream(e){const{id:t,name:n}=e,r=this._streams.receivers;return this._newStream({id:t,name:n,type:"receiver",registry:r})}_newStream(e){const{id:t,name:n,type:r,registry:o}=e;if($3("new %s stream %s",r,t),"initiator"===r&&this._streams.initiators.size===(this._init.maxOutboundStreams??H3))throw new Xu("Too many outbound streams open","ERR_TOO_MANY_OUTBOUND_STREAMS");if(o.has(t))throw new Error(`${r} stream ${t} already exists!`);const s=e=>{$3.enabled&&$3.trace("%s stream %s send",r,t,W3(e)),this._source.push(e)},i=()=>{$3("%s stream with id %s and protocol %s ended",r,t,a.stat.protocol),o.delete(t),null!=this._init.onStreamEnd&&this._init.onStreamEnd(a)},a=z3({id:t,name:n,send:s,type:r,onEnd:i,maxMsgSize:this._init.maxMsgSize});return o.set(t,a),a}_createSink(){const e=async e=>{const t=[this.closeController.signal];null!=this._init.signal&&t.push(this._init.signal),e=JF(e,Nc(t));try{const t=new N3(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const n of e)for(const e of t.write(n))await this._handleIncoming(e);this._source.end()}catch(ik){$3("error in sink",ik),this._source.end(ik)}};return e}_createSource(){const e=e=>{this.close(e)},t=ny({objectMode:!0,onEnd:e});return Object.assign(R3(t,this._init.minSendBytes),{push:t.push,end:t.end,return:t.return})}async _handleIncoming(e){const{id:t,type:n}=e;if($3.enabled&&$3.trace("incoming message",W3(e)),e.type===v3.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??V3)){$3("too many inbound streams open"),this._source.push({id:t,type:v3.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{return $3("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),void this._source.end(new Error("Too many open streams"))}return}const n=this._newReceiverStream({id:t,name:Ti(e.data instanceof Uint8Array?e.data:e.data.subarray())});return void(null!=this._init.onIncomingStream&&this._init.onIncomingStream(n))}const r=1===(1&n)?this._streams.initiators:this._streams.receivers,o=r.get(t);if(null==o)return void $3("missing stream %s for message type %s",t,w3[n]);const s=this._init.maxStreamBufferSize??K3;switch(n){case v3.MESSAGE_INITIATOR:case v3.MESSAGE_RECEIVER:if(o.sourceReadableLength()>s){this._source.push({id:e.id,type:n===v3.MESSAGE_INITIATOR?v3.RESET_RECEIVER:v3.RESET_INITIATOR});const t=new Xu("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers","ERR_STREAM_INPUT_BUFFER_FULL");return void o.abort(t)}o.sourcePush(e.data);break;case v3.CLOSE_INITIATOR:case v3.CLOSE_RECEIVER:o.closeRead();break;case v3.RESET_INITIATOR:case v3.RESET_RECEIVER:o.reset();break;default:$3("unknown message type %s",n)}}}class G3{constructor(e={}){this.protocol="/mplex/6.7.0",this._init=e}createStreamMuxer(e={}){return new Y3({...e,...this._init})}}function Z3(e={}){return()=>new G3(e)}function J3(e,t={}){const n=iY(e),r=aj.fromReader(n.reader,t),o={read:async e=>{const{value:t}=await n.reader.next(e);if(null==t)throw new Error("Value is null");return t},readLP:async()=>{const{value:e}=await r.next();if(null==e)throw new Error("Value is null");return e},readPB:async e=>{const t=await o.readLP();if(null==t)throw new Error("Value is null");const n=t instanceof Uint8Array?t:t.subarray();return e.decode(n)},write:e=>{e instanceof Uint8Array?n.writer.push(e):n.writer.push(e.subarray())},writeLP:e=>{o.write(nj.single(e,t))},writePB:(e,t)=>{o.writeLP(t.encode(e))},pb:e=>({read:async()=>await o.readPB(e),write:t=>{o.writePB(t,e)},unwrap:()=>o}),unwrap:()=>(n.rest(),e.source=n.stream.source,e.sink=n.stream.sink,e)};return o}function Q3(){const e=gv();let t=!1;return{sink:async n=>{if(t)throw new Error("already piped");t=!0,e.resolve(n)},source:async function*(){const t=await e.promise;yield*t}()}}function X3(){const e=Q3(),t=Q3();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}const e4=65535,t4=e4-16,n4=Boolean(globalThis.process?.env?.DUMP_SESSION_KEYS);var r4=n(512),o4=n(7664),s4=n(3294),i4=n(5501);const a4={hashSHA256(e){return(0,s4.vp)(e)},getHKDF(e,t){const n=new r4.t(s4.mE,t,e),r=n.expand(96),o=r,s=o.subarray(0,32),i=o.subarray(32,64),a=o.subarray(64,96);return[s,i,a]},generateX25519KeyPair(){const e=o4.Au();return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519KeyPairFromSeed(e){const t=o4._w(e);return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519SharedKey(e,t){return o4.gi(e,t)},chaCha20Poly1305Encrypt(e,t,n,r){const o=new i4.OK(r);return o.seal(t,e,n)},chaCha20Poly1305Decrypt(e,t,n,r,o){const s=new i4.OK(r);return s.open(t,e,n,o)}},l4=e=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e),c4=e=>{const t=l4(2);return new DataView(t.buffer,t.byteOffset,t.byteLength).setUint16(0,e,!1),t};c4.bytes=2;const u4=e=>{if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};function d4(e){return ji([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}function h4(e){return ji([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}function p4(e){return ji([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}function f4(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.subarray(0,32),ciphertext:e.subarray(32,e.length),ns:new Uint8Array(0)}}function g4(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.subarray(0,32),ns:e.subarray(32,80),ciphertext:e.subarray(80,e.length)}}function m4(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.subarray(0,48),ciphertext:e.subarray(48,e.length)}}function y4(e,t){return async function*(n){for await(const r of n)for(let n=0;n<r.length;n+=t4){let o=n+t4;o>r.length&&(o=r.length);const s=e.encrypt(r.subarray(n,o),e.session);t?.encryptedPackets.increment(),yield c4(s.byteLength),yield s}}}function v4(e,t){return async function*(n){for await(const r of n)for(let n=0;n<r.length;n+=e4){let o=n+e4;if(o>r.length&&(o=r.length),o-i4.pg<n)throw new Error("Invalid chunk");const s=r.subarray(n,o),i=r.subarray(n,o-i4.pg),{plaintext:a,valid:l}=e.decrypt(s,e.session,i);if(!l)throw t?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");t?.decryptedPackets.increment(),yield a}}}u4.bytes=2;class w4 extends Error{constructor(e="Unexpected Peer"){super(e),this.code=w4.code}static get code(){return"ERR_UNEXPECTED_PEER"}}class b4 extends Error{constructor(e="Invalid crypto exchange"){super(e),this.code=b4.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}class S4 extends Error{constructor(e="Invalid crypto transmission"){super(e),this.code=S4.code}static get code(){return"ERR_INVALID_CRYPTO_TRANSMISSION"}}var _4,E4;async function k4(e,t,n){const r=await I4(e,R4(t));if(null==e.publicKey)throw new Error("PublicKey was missing from local PeerId");return C4(e.publicKey,r,n)}function C4(e,t,n){return E4.encode({identityKey:e,identitySig:t,extensions:n??{webtransportCerthashes:[]}}).subarray()}async function I4(e,t){if(null==e.privateKey)throw new Error("PrivateKey was missing from PeerId");const n=await Pg(e.privateKey);return await n.sign(t)}async function A4(e){return await gd(e.identityKey)}function T4(e){return E4.decode(e)}function R4(e){const t=mi("noise-libp2p-static-key:");return ji([t,e],t.length+e.length)}async function x4(e,t,n){const r=await gd(t.identityKey);if(!r.equals(n))throw new Error(`Payload identity key ${r.toString()} does not match expected remote peer ${n.toString()}`);const o=R4(e);if(null==r.publicKey)throw new Error("PublicKey was missing from PeerId");if(null==t.identitySig)throw new Error("Signature was missing from message");const s=Og(r.publicKey),i=await s.verify(o,t.identitySig);if(!i)throw new Error("Static key doesn't match to peer that signed payload!");return r}function O4(e){return e instanceof Uint8Array&&32===e.length}(function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{if(!1!==n.lengthDelimited&&t.fork(),null!=e.webtransportCerthashes)for(const r of e.webtransportCerthashes)t.uint32(10),t.bytes(r);!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={webtransportCerthashes:[]},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.webtransportCerthashes.push(e.bytes());break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())})(_4||(_4={})),function(e){let t;e.codec=()=>(null==t&&(t=rh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),(!0===n.writeDefaults||null!=e.identityKey&&e.identityKey.byteLength>0)&&(t.uint32(10),t.bytes(e.identityKey??new Uint8Array(0))),(!0===n.writeDefaults||null!=e.identitySig&&e.identitySig.byteLength>0)&&(t.uint32(18),t.bytes(e.identitySig??new Uint8Array(0))),null!=e.extensions&&(t.uint32(34),_4.codec().encode(e.extensions,t,{writeDefaults:!1})),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},r=null==t?e.len:e.pos+t;while(e.pos<r){const t=e.uint32();switch(t>>>3){case 1:n.identityKey=e.bytes();break;case 2:n.identitySig=e.bytes();break;case 4:n.extensions=_4.codec().decode(e,e.uint32());break;default:e.skipType(7&t);break}}return n}))),t),e.encode=t=>Gd(t,e.codec()),e.decode=t=>Yd(t,e.codec())}(E4||(E4={}));const N4=pe("libp2p:noise");let P4;function D4(e){P4(`LOCAL_STATIC_PUBLIC_KEY ${Ti(e.publicKey,"hex")}`),P4(`LOCAL_STATIC_PRIVATE_KEY ${Ti(e.privateKey,"hex")}`)}function U4(e){e?(P4(`LOCAL_PUBLIC_EPHEMERAL_KEY ${Ti(e.publicKey,"hex")}`),P4(`LOCAL_PRIVATE_EPHEMERAL_KEY ${Ti(e.privateKey,"hex")}`)):P4("Missing local ephemeral keys.")}function L4(e){P4(`REMOTE_STATIC_PUBLIC_KEY ${Ti(e,"hex")}`)}function B4(e){P4(`REMOTE_EPHEMERAL_PUBLIC_KEY ${Ti(e,"hex")}`)}function M4(e){e.cs1&&e.cs2?(P4(`CIPHER_STATE_1 ${e.cs1.n.getUint64()} ${Ti(e.cs1.k,"hex")}`),P4(`CIPHER_STATE_2 ${e.cs2.n.getUint64()} ${Ti(e.cs2.k,"hex")}`)):P4("Missing cipher state.")}P4=n4?N4:Object.assign((()=>{}),{enabled:!1,trace:()=>{},error:()=>{}});const F4=0,j4=4294967295,z4="Cipherstate has reached maximum n, a new handshake must be performed";class $4{constructor(e=F4){this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>j4)throw new Error(z4)}}class V4{constructor(e){this.crypto=e}encryptWithAd(e,t,n){const r=this.encrypt(e.k,e.n,t,n);return e.n.increment(),r}decryptWithAd(e,t,n,r){const{plaintext:o,valid:s}=this.decrypt(e.k,e.n,t,n,r);return s&&e.n.increment(),{plaintext:o,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){const t=this.createEmptyKey();return wa(t,e)}encrypt(e,t,n,r){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(r,t.getBytes(),n,e)}encryptAndHash(e,t){let n;return n=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,n),n}decrypt(e,t,n,r,o){t.assertValue();const s=this.crypto.chaCha20Poly1305Decrypt(r,t.getBytes(),n,e,o);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,t){let n,r=!0;return this.hasKey(e.cs)?({plaintext:n,valid:r}=this.decryptWithAd(e.cs,e.h,t)):n=t,this.mixHash(e,t),{plaintext:n,valid:r}}dh(e,t){try{const n=this.crypto.generateX25519SharedKey(e,t);return 32===n.length?n:n.subarray(0,32)}catch(n){const e=n;return N4(e.message),new Uint8Array(32)}}mixHash(e,t){e.h=this.getHash(e.h,t)}getHash(e,t){const n=this.crypto.hashSHA256(ji([e,t],e.length+t.length));return n}mixKey(e,t){const[n,r]=this.crypto.getHKDF(e.ck,t);e.cs=this.initializeKey(r),e.ck=n}initializeKey(e){return{k:e,n:new $4}}initializeSymmetric(e){const t=mi(e,"utf-8"),n=this.hashProtocolName(t),r=n,o=this.createEmptyKey(),s=this.initializeKey(o);return{cs:s,ck:r,h:n}}hashProtocolName(e){if(e.length<=32){const t=new Uint8Array(32);return t.set(e),t}return this.getHash(e,new Uint8Array(0))}split(e){const[t,n]=this.crypto.getHKDF(e.ck,new Uint8Array(0)),r=this.initializeKey(t),o=this.initializeKey(n);return{cs1:r,cs2:o}}writeMessageRegular(e,t){const n=this.encryptWithAd(e,new Uint8Array(0),t),r=this.createEmptyKey(),o=new Uint8Array(0);return{ne:r,ns:o,ciphertext:n}}readMessageRegular(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}class H4 extends V4{initializeInitiator(e,t,n,r){const o="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(o);this.mixHash(s,e);const i=new Uint8Array(32);return{ss:s,s:t,rs:n,psk:r,re:i}}initializeResponder(e,t,n,r){const o="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(o);this.mixHash(s,e);const i=new Uint8Array(32);return{ss:s,s:t,rs:n,psk:r,re:i}}writeMessageA(e,t,n){const r=new Uint8Array(0);e.e=void 0!==n?n:this.crypto.generateX25519KeyPair();const o=e.e.publicKey;this.mixHash(e.ss,o);const s=this.encryptAndHash(e.ss,t);return{ne:o,ns:r,ciphertext:s}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();const n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const r=e.s.publicKey,o=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const s=this.encryptAndHash(e.ss,t);return{ne:n,ns:o,ciphertext:s}}writeMessageC(e,t){const n=e.s.publicKey,r=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const o=this.encryptAndHash(e.ss,t),s=this.createEmptyKey(),i={ne:s,ns:r,ciphertext:o},{cs1:a,cs2:l}=this.split(e.ss);return{h:e.ss.h,messageBuffer:i,cs1:a,cs2:l}}readMessageA(e,t){return O4(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}readMessageB(e,t){if(O4(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const{plaintext:n,valid:r}=this.decryptAndHash(e.ss,t.ns);r&&O4(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:o,valid:s}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:o,valid:r&&s}}readMessageC(e,t){const{plaintext:n,valid:r}=this.decryptAndHash(e.ss,t.ns);if(r&&O4(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:o,valid:s}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:i,cs2:a}=this.split(e.ss);return{h:e.ss.h,plaintext:o,valid:r&&s,cs1:i,cs2:a}}initSession(e,t,n){const r=this.createEmptyKey(),o=new Uint8Array(32);let s;return s=e?this.initializeInitiator(t,n,o,r):this.initializeResponder(t,n,o,r),{hs:s,i:e,mc:0}}sendMessage(e,t,n){let r;if(0===e.mc)r=this.writeMessageA(e.hs,t,n);else if(1===e.mc)r=this.writeMessageB(e.hs,t);else if(2===e.mc){const{h:n,messageBuffer:o,cs1:s,cs2:i}=this.writeMessageC(e.hs,t);r=o,e.h=n,e.cs1=s,e.cs2=i}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");r=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");r=this.writeMessageRegular(e.cs2,t)}}return e.mc++,r}recvMessage(e,t){let n=new Uint8Array(0),r=!1;if(0===e.mc)({plaintext:n,valid:r}=this.readMessageA(e.hs,t));else if(1===e.mc)({plaintext:n,valid:r}=this.readMessageB(e.hs,t));else if(2===e.mc){const{h:o,plaintext:s,valid:i,cs1:a,cs2:l}=this.readMessageC(e.hs,t);n=s,r=i,e.h=o,e.cs1=a,e.cs2=l}return e.mc++,{plaintext:n,valid:r}}}class K4{constructor(e,t,n,r,o,s,i,a){this.remoteExtensions={webtransportCerthashes:[]},this.isInitiator=e,this.payload=t,this.prologue=n,this.staticKeypair=o,this.connection=s,i&&(this.remotePeer=i),this.xx=a??new H4(r),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(D4(this.session.hs.s),this.isInitiator){N4("Stage 0 - Initiator starting to send first message.");const e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(d4(e)),N4("Stage 0 - Initiator finished sending first message."),U4(this.session.hs.e)}else{N4("Stage 0 - Responder waiting to receive first message...");const e=f4((await this.connection.readLP()).subarray()),{valid:t}=this.xx.recvMessage(this.session,e);if(!t)throw new b4("xx handshake stage 0 validation fail");N4("Stage 0 - Responder received first message."),B4(this.session.hs.re)}}async exchange(){if(this.isInitiator){N4("Stage 1 - Initiator waiting to receive first message from responder...");const t=g4((await this.connection.readLP()).subarray()),{plaintext:n,valid:r}=this.xx.recvMessage(this.session,t);if(!r)throw new b4("xx handshake stage 1 validation fail");N4("Stage 1 - Initiator received the message."),B4(this.session.hs.re),L4(this.session.hs.rs),N4("Initiator going to check remote's signature...");try{const e=T4(n);this.remotePeer=this.remotePeer||await A4(e),await x4(this.session.hs.rs,e,this.remotePeer),this.setRemoteNoiseExtension(e.extensions)}catch(e){const t=e;throw new w4(`Error occurred while verifying signed payload: ${t.message}`)}N4("All good with the signature!")}else{N4("Stage 1 - Responder sending out first message with signed payload and static key.");const e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(h4(e)),N4("Stage 1 - Responder sent the second handshake message with signed payload."),U4(this.session.hs.e)}}async finish(){if(this.isInitiator){N4("Stage 2 - Initiator sending third handshake message.");const e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(p4(e)),N4("Stage 2 - Initiator sent message with signed payload.")}else{N4("Stage 2 - Responder waiting for third handshake message...");const t=m4((await this.connection.readLP()).subarray()),{plaintext:n,valid:r}=this.xx.recvMessage(this.session,t);if(!r)throw new b4("xx handshake stage 2 validation fail");N4("Stage 2 - Responder received the message, finished handshake.");try{const e=T4(n);this.remotePeer=this.remotePeer||await A4(e),await x4(this.session.hs.rs,e,this.remotePeer),this.setRemoteNoiseExtension(e.extensions)}catch(e){const t=e;throw new w4(`Error occurred while verifying signed payload: ${t.message}`)}}M4(this.session)}encrypt(e,t){const n=this.getCS(t);return this.xx.encryptWithAd(n,new Uint8Array(0),e)}decrypt(e,t,n){const r=this.getCS(t,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),e,n)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,t=!0){if(!e.cs1||!e.cs2)throw new b4("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}}function q4(e){return{xxHandshakeSuccesses:e.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:e.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:e.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:e.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:e.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}class W4{constructor(e={}){this.protocol="/noise";const{staticNoiseKey:t,extensions:n,crypto:r,prologueBytes:o,metrics:s}=e;this.crypto=r??a4,this.extensions=n,this.metrics=s?q4(s):void 0,this.staticKeys=t?this.crypto.generateX25519KeyPairFromSeed(t):this.crypto.generateX25519KeyPair(),this.prologue=o??new Uint8Array(0)}async secureOutbound(e,t,n){const r=J3(t,{lengthEncoder:c4,lengthDecoder:u4,maxDataLength:e4}),o=await this.performHandshake({connection:r,isInitiator:!0,localPeer:e,remotePeer:n}),s=await this.createSecureConnection(r,o);return{conn:s,remoteExtensions:o.remoteExtensions,remotePeer:o.remotePeer}}async secureInbound(e,t,n){const r=J3(t,{lengthEncoder:c4,lengthDecoder:u4,maxDataLength:e4}),o=await this.performHandshake({connection:r,isInitiator:!1,localPeer:e,remotePeer:n}),s=await this.createSecureConnection(r,o);return{conn:s,remotePeer:o.remotePeer,remoteExtensions:o.remoteExtensions}}async performHandshake(e){const t=await k4(e.localPeer,this.staticKeys.publicKey,this.extensions);return await this.performXXHandshake(e,t)}async performXXHandshake(e,t){const{isInitiator:n,remotePeer:r,connection:o}=e,s=new K4(n,t,this.prologue,this.crypto,this.staticKeys,o,r);try{await s.propose(),await s.exchange(),await s.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(i){if(this.metrics?.xxHandshakeErrors.increment(),i instanceof Error)throw i.message=`Error occurred during XX handshake: ${i.message}`,i}return s}async createSecureConnection(e,t){const[n,r]=X3(),o=e.unwrap();return await kv(n,y4(t,this.metrics),o,aj({lengthDecoder:u4}),v4(t,this.metrics),n),r}}function Y4(e={}){return()=>new W4(e)}const G4=T.bind({ignoreUndefined:!0,concatArrays:!0});function Z4({options:e={},peerId:t,multiaddrs:n=[],repo:r,keychainConfig:o={},config:s={}}){const{datastore:i}=r,a=J4({options:e,config:s,datastore:i,keychainConfig:o,peerId:t,multiaddrs:n});return"function"===typeof e.libp2p?e.libp2p({libp2pOptions:a,options:e,config:s,datastore:i,peerId:t}):(a.start=!1,GJ(a))}function J4({options:e,config:t,datastore:n,keychainConfig:r,peerId:o,multiaddrs:s}){const i=()=>{const e=iy(t,"Pubsub.Router")||"gossipsub",n=Ij();if(!n[e])throw fe(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${e} router.`),"ERR_NOT_SUPPORTED");return n[e]},a={datastore:n,peerId:o},l={addresses:{listen:s.map((e=>e.toString())),announce:iy(e,"addresses.announce",iy(t,"Addresses.Announce",[])),noAnnounce:iy(e,"addresses.noAnnounce",iy(t,"Addresses.NoAnnounce",[]))},connectionManager:iy(e,"connectionManager",{maxConnections:iy(e,"config.Swarm.ConnMgr.HighWater",iy(t,"Swarm.ConnMgr.HighWater")),minConnections:iy(e,"config.Swarm.ConnMgr.LowWater",iy(t,"Swarm.ConnMgr.LowWater"))}),keychain:r,identify:{host:{agentVersion:`js-ipfs/${XA}`}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[Z3({maxInboundStreams:256,maxOutboundStreams:1024})],connectionEncryption:[Y4()],relay:{enabled:iy(e,"relay.enabled",iy(t,"relay.enabled",!0)),hop:{enabled:iy(e,"relay.hop.enabled",iy(t,"relay.hop.enabled",!1)),active:iy(e,"relay.hop.active",iy(t,"relay.hop.active",!1))}},nat:{enabled:!iy(t,"Swarm.DisableNatPortMap",!1)}};iy(e,"config.Pubsub.Enabled",iy(t,"Pubsub.Enabled",!0))&&(l.pubsub=i()),"none"!==iy(t,"Routing.Type","dhtclient")&&(l.dht=jX({clientMode:"dhtserver"!==iy(t,"Routing.Type","dht"),kBucketSize:iy(e,"dht.kBucketSize",20),validators:{ipns:Mm},selectors:{ipns:ay}}));const c=iy(e,"config.Bootstrap",iy(t,"Bootstrap",[]));c.length>0&&l.peerDiscovery?.push(S1({list:c}));let u=iy(e,"libp2p",void 0);"function"===typeof u&&(u=void 0);const d=G4(a,oW(),l,u),h=iy(e,"config.Addresses.Delegates",iy(t,"Addresses.Delegates",[]));if(h.length>0){const e=h[Math.floor(Math.random()*h.length)],t=Da(e).toOptions(),n={host:t.host,protocol:443===parseInt(t.port)?"https":"http",port:t.port},r=NH(n);d.contentRouters?.push(zj(r)),d.peerRouters?.push(Pj(r))}return iy(e,"config.Discovery.MDNS.Enabled",iy(t,"Discovery.MDNS.Enabled",!0))||(d.peerDiscovery=d.peerDiscovery?.filter((e=>{try{if("function"===typeof e)return"@libp2p/mdns"!==e({})[Symbol.toStringTag]}catch{}return!0}))),null==d.transports&&(d.transports=[]),null==d.transports.find((e=>{try{if("function"===typeof e)return"@libp2p/websockets"===e({})[Symbol.toStringTag]}catch{}return!1}))&&d.transports.push(m3()),d}const Q4=T.bind({ignoreUndefined:!0}),X4=pe("ipfs:components:peer:storage");class e6{constructor(e,t,n,r,o){this.print=r,this.peerId=e,this.keychain=t,this.repo=n,this.print=r,this.isNew=o}static async start(e,t,n){const{repoAutoMigrate:r,repo:o,onMigrationProgress:s}=n,i="string"===typeof o||null==o?PL(e,t,{path:o,autoMigrate:r,onMigrationProgress:s}):o,{peerId:a,keychain:l,isNew:c}=await t6(e,i,n);return new e6(a,l,i,e,c)}}const t6=async(e,t,n)=>{if(!t.closed)return{...await i6(t,n),isNew:!1};try{return await t.open(),{...await i6(t,n),isNew:!1}}catch(ik){if(ik.code!==bU)throw ik;if(n.init&&!1===n.init.allowNew)throw new ai("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await n6(e,t,n),isNew:!0}}},n6=async(e,t,n)=>{const r=n.init||{},o=await t.exists();if(X4("repo exists?",o),!0===o)throw new Error("repo already exists");const s=r.privateKey?await r6(r.privateKey):await o6(e,r),i=s6(s);X4("peer identity: %s",i.PeerID);const a={...Q4(l6(cv(),r.profiles),n.config),Identity:i};await t.init(a),await t.open(),X4("repo opened");const l={pass:n.pass};try{l.dek=await t.config.get("Keychain.DEK")}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik}const c=await Z4({options:void 0,multiaddrs:void 0,peerId:s,repo:t,config:a,keychainConfig:l});return await t.datastore.has(new Tc("/info/self"))||await c.keychain.importPeer("self",s),await t.config.set("Keychain",{DEK:c.keychain.init.dek}),{peerId:s,keychain:c.keychain}},r6=async e=>{if(X4("using user-supplied private-key"),td(e))return e;const t=mi(e,"base64pad"),n=await Pg(t);return await gd(n.public.bytes,n.bytes)},o6=(e,{algorithm:t="Ed25519",bits:n=2048})=>{if(e("generating %s keypair...",t),"Ed25519"===t)return DJ();if("RSA"===t)return UJ({bits:n});throw fe(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},s6=e=>{if(null==e.privateKey)throw fe(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:e.toString(),PrivKey:Ti(e.privateKey,"base64pad")}},i6=async(e,t)=>{const n=t.config,r=t.init&&t.init.profiles||[],o=t.pass,s=await e.config.getAll(),i=a6(l6(s,r),n);if(s!==i&&await e.config.replace(i),!i.Identity||!i.Identity.PrivKey)throw new ti("No private key was found in the config, please intialize the repo");const a=mi(i.Identity.PrivKey,"base64pad"),l=await Pg(a),c=await gd(l.public.bytes,l.bytes),u=await Z4({options:void 0,multiaddrs:void 0,peerId:c,repo:e,config:i,keychainConfig:{pass:o,...i.Keychain}});return{peerId:c,keychain:u.keychain}},a6=(e,t)=>t?Q4(e,t):e,l6=(e,t)=>(t||[]).reduce(((e,t)=>{const n=uT[t];if(!n)throw new Error(`Could not find profile with name '${t}'`);return X4("applying profile %s",t),n.transform(e)}),e);var c6=n(2838);function u6(e){let t=new Uint8Array(e.reduce(((e,t)=>e+Fi.encodingLength(t)),0)),n=0;for(const r of e)t=Fi.encode(r,t,n),n+=Fi.encodingLength(r);return t}var d6=u6;class h6{constructor(e,t,n){this._refCounter=1,this.cid=e,this.priority=t||1,this.wantType=n}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){const e=this.cid.toString(J);return`WantlistEntry <key: ${e}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}const p6=ge.Reader,f6=ge.Writer,g6=ge.util,m6=ge.roots["ipfs-bitswap"]||(ge.roots["ipfs-bitswap"]={}),y6=m6.Message=(()=>{function e(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.wantlist=null,e.prototype.blocks=g6.emptyArray,e.prototype.payload=g6.emptyArray,e.prototype.blockPresences=g6.emptyArray,e.prototype.pendingBytes=0,e.encode=function(e,t){if(t||(t=f6.create()),null!=e.wantlist&&Object.hasOwnProperty.call(e,"wantlist")&&m6.Message.Wantlist.encode(e.wantlist,t.uint32(10).fork()).ldelim(),null!=e.blocks&&e.blocks.length)for(var n=0;n<e.blocks.length;++n)t.uint32(18).bytes(e.blocks[n]);if(null!=e.payload&&e.payload.length)for(n=0;n<e.payload.length;++n)m6.Message.Block.encode(e.payload[n],t.uint32(26).fork()).ldelim();if(null!=e.blockPresences&&e.blockPresences.length)for(n=0;n<e.blockPresences.length;++n)m6.Message.BlockPresence.encode(e.blockPresences[n],t.uint32(34).fork()).ldelim();return null!=e.pendingBytes&&Object.hasOwnProperty.call(e,"pendingBytes")&&t.uint32(40).int32(e.pendingBytes),t},e.decode=function(e,t){e instanceof p6||(e=p6.create(e));var n=void 0===t?e.len:e.pos+t,r=new m6.Message;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.wantlist=m6.Message.Wantlist.decode(e,e.uint32());break;case 2:r.blocks&&r.blocks.length||(r.blocks=[]),r.blocks.push(e.bytes());break;case 3:r.payload&&r.payload.length||(r.payload=[]),r.payload.push(m6.Message.Block.decode(e,e.uint32()));break;case 4:r.blockPresences&&r.blockPresences.length||(r.blockPresences=[]),r.blockPresences.push(m6.Message.BlockPresence.decode(e,e.uint32()));break;case 5:r.pendingBytes=e.int32();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof m6.Message)return e;var t=new m6.Message;if(null!=e.wantlist){if("object"!==typeof e.wantlist)throw TypeError(".Message.wantlist: object expected");t.wantlist=m6.Message.Wantlist.fromObject(e.wantlist)}if(e.blocks){if(!Array.isArray(e.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var n=0;n<e.blocks.length;++n)"string"===typeof e.blocks[n]?g6.base64.decode(e.blocks[n],t.blocks[n]=g6.newBuffer(g6.base64.length(e.blocks[n])),0):e.blocks[n].length>=0&&(t.blocks[n]=e.blocks[n])}if(e.payload){if(!Array.isArray(e.payload))throw TypeError(".Message.payload: array expected");t.payload=[];for(n=0;n<e.payload.length;++n){if("object"!==typeof e.payload[n])throw TypeError(".Message.payload: object expected");t.payload[n]=m6.Message.Block.fromObject(e.payload[n])}}if(e.blockPresences){if(!Array.isArray(e.blockPresences))throw TypeError(".Message.blockPresences: array expected");t.blockPresences=[];for(n=0;n<e.blockPresences.length;++n){if("object"!==typeof e.blockPresences[n])throw TypeError(".Message.blockPresences: object expected");t.blockPresences[n]=m6.Message.BlockPresence.fromObject(e.blockPresences[n])}}return null!=e.pendingBytes&&(t.pendingBytes=0|e.pendingBytes),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.blocks=[],n.payload=[],n.blockPresences=[]),t.defaults&&(n.wantlist=null,n.pendingBytes=0),null!=e.wantlist&&e.hasOwnProperty("wantlist")&&(n.wantlist=m6.Message.Wantlist.toObject(e.wantlist,t)),e.blocks&&e.blocks.length){n.blocks=[];for(var r=0;r<e.blocks.length;++r)n.blocks[r]=t.bytes===String?g6.base64.encode(e.blocks[r],0,e.blocks[r].length):t.bytes===Array?Array.prototype.slice.call(e.blocks[r]):e.blocks[r]}if(e.payload&&e.payload.length){n.payload=[];for(r=0;r<e.payload.length;++r)n.payload[r]=m6.Message.Block.toObject(e.payload[r],t)}if(e.blockPresences&&e.blockPresences.length){n.blockPresences=[];for(r=0;r<e.blockPresences.length;++r)n.blockPresences[r]=m6.Message.BlockPresence.toObject(e.blockPresences[r],t)}return null!=e.pendingBytes&&e.hasOwnProperty("pendingBytes")&&(n.pendingBytes=e.pendingBytes),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message"},e.Wantlist=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.entries=g6.emptyArray,e.prototype.full=!1,e.encode=function(e,t){if(t||(t=f6.create()),null!=e.entries&&e.entries.length)for(var n=0;n<e.entries.length;++n)m6.Message.Wantlist.Entry.encode(e.entries[n],t.uint32(10).fork()).ldelim();return null!=e.full&&Object.hasOwnProperty.call(e,"full")&&t.uint32(16).bool(e.full),t},e.decode=function(e,t){e instanceof p6||(e=p6.create(e));var n=void 0===t?e.len:e.pos+t,r=new m6.Message.Wantlist;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.entries&&r.entries.length||(r.entries=[]),r.entries.push(m6.Message.Wantlist.Entry.decode(e,e.uint32()));break;case 2:r.full=e.bool();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof m6.Message.Wantlist)return e;var t=new m6.Message.Wantlist;if(e.entries){if(!Array.isArray(e.entries))throw TypeError(".Message.Wantlist.entries: array expected");t.entries=[];for(var n=0;n<e.entries.length;++n){if("object"!==typeof e.entries[n])throw TypeError(".Message.Wantlist.entries: object expected");t.entries[n]=m6.Message.Wantlist.Entry.fromObject(e.entries[n])}}return null!=e.full&&(t.full=Boolean(e.full)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.entries=[]),t.defaults&&(n.full=!1),e.entries&&e.entries.length){n.entries=[];for(var r=0;r<e.entries.length;++r)n.entries[r]=m6.Message.Wantlist.Entry.toObject(e.entries[r],t)}return null!=e.full&&e.hasOwnProperty("full")&&(n.full=e.full),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist"},e.WantType=function(){const e={},t=Object.create(e);return t[e[0]="Block"]=0,t[e[1]="Have"]=1,t}(),e.Entry=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.block=g6.newBuffer([]),e.prototype.priority=0,e.prototype.cancel=!1,e.prototype.wantType=0,e.prototype.sendDontHave=!1,e.encode=function(e,t){return t||(t=f6.create()),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(10).bytes(e.block),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&t.uint32(24).bool(e.cancel),null!=e.wantType&&Object.hasOwnProperty.call(e,"wantType")&&t.uint32(32).int32(e.wantType),null!=e.sendDontHave&&Object.hasOwnProperty.call(e,"sendDontHave")&&t.uint32(40).bool(e.sendDontHave),t},e.decode=function(e,t){e instanceof p6||(e=p6.create(e));var n=void 0===t?e.len:e.pos+t,r=new m6.Message.Wantlist.Entry;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.block=e.bytes();break;case 2:r.priority=e.int32();break;case 3:r.cancel=e.bool();break;case 4:r.wantType=e.int32();break;case 5:r.sendDontHave=e.bool();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof m6.Message.Wantlist.Entry)return e;var t=new m6.Message.Wantlist.Entry;switch(null!=e.block&&("string"===typeof e.block?g6.base64.decode(e.block,t.block=g6.newBuffer(g6.base64.length(e.block)),0):e.block.length>=0&&(t.block=e.block)),null!=e.priority&&(t.priority=0|e.priority),null!=e.cancel&&(t.cancel=Boolean(e.cancel)),e.wantType){case"Block":case 0:t.wantType=0;break;case"Have":case 1:t.wantType=1;break}return null!=e.sendDontHave&&(t.sendDontHave=Boolean(e.sendDontHave)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.block="":(n.block=[],t.bytes!==Array&&(n.block=g6.newBuffer(n.block))),n.priority=0,n.cancel=!1,n.wantType=t.enums===String?"Block":0,n.sendDontHave=!1),null!=e.block&&e.hasOwnProperty("block")&&(n.block=t.bytes===String?g6.base64.encode(e.block,0,e.block.length):t.bytes===Array?Array.prototype.slice.call(e.block):e.block),null!=e.priority&&e.hasOwnProperty("priority")&&(n.priority=e.priority),null!=e.cancel&&e.hasOwnProperty("cancel")&&(n.cancel=e.cancel),null!=e.wantType&&e.hasOwnProperty("wantType")&&(n.wantType=t.enums===String?m6.Message.Wantlist.WantType[e.wantType]:e.wantType),null!=e.sendDontHave&&e.hasOwnProperty("sendDontHave")&&(n.sendDontHave=e.sendDontHave),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist.Entry"},e}(),e}(),e.Block=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.prefix=g6.newBuffer([]),e.prototype.data=g6.newBuffer([]),e.encode=function(e,t){return t||(t=f6.create()),null!=e.prefix&&Object.hasOwnProperty.call(e,"prefix")&&t.uint32(10).bytes(e.prefix),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof p6||(e=p6.create(e));var n=void 0===t?e.len:e.pos+t,r=new m6.Message.Block;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.prefix=e.bytes();break;case 2:r.data=e.bytes();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof m6.Message.Block)return e;var t=new m6.Message.Block;return null!=e.prefix&&("string"===typeof e.prefix?g6.base64.decode(e.prefix,t.prefix=g6.newBuffer(g6.base64.length(e.prefix)),0):e.prefix.length>=0&&(t.prefix=e.prefix)),null!=e.data&&("string"===typeof e.data?g6.base64.decode(e.data,t.data=g6.newBuffer(g6.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.prefix="":(n.prefix=[],t.bytes!==Array&&(n.prefix=g6.newBuffer(n.prefix))),t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=g6.newBuffer(n.data)))),null!=e.prefix&&e.hasOwnProperty("prefix")&&(n.prefix=t.bytes===String?g6.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?g6.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Block"},e}(),e.BlockPresenceType=function(){const e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),e.BlockPresence=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cid=g6.newBuffer([]),e.prototype.type=0,e.encode=function(e,t){return t||(t=f6.create()),null!=e.cid&&Object.hasOwnProperty.call(e,"cid")&&t.uint32(10).bytes(e.cid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),t},e.decode=function(e,t){e instanceof p6||(e=p6.create(e));var n=void 0===t?e.len:e.pos+t,r=new m6.Message.BlockPresence;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:r.cid=e.bytes();break;case 2:r.type=e.int32();break;default:e.skipType(7&o);break}}return r},e.fromObject=function(e){if(e instanceof m6.Message.BlockPresence)return e;var t=new m6.Message.BlockPresence;switch(null!=e.cid&&("string"===typeof e.cid?g6.base64.decode(e.cid,t.cid=g6.newBuffer(g6.base64.length(e.cid)),0):e.cid.length>=0&&(t.cid=e.cid)),e.type){case"Have":case 0:t.type=0;break;case"DontHave":case 1:t.type=1;break}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.cid="":(n.cid=[],t.bytes!==Array&&(n.cid=g6.newBuffer(n.cid))),n.type=t.enums===String?"Have":0),null!=e.cid&&e.hasOwnProperty("cid")&&(n.cid=t.bytes===String?g6.base64.encode(e.cid,0,e.cid.length):t.bytes===Array?Array.prototype.slice.call(e.cid):e.cid),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?m6.Message.BlockPresenceType[e.type]:e.type),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.BlockPresence"},e}(),e})(),v6={Block:y6.Wantlist.WantType.Block,Have:y6.Wantlist.WantType.Have},w6=(e,t)=>Array.prototype.slice.call(t,0).sort(((t,n)=>{const r=e(t),o=e(n);return r<o?-1:r>o?1:0}));class b6{constructor(e,t){this.set=t?kG({name:"ipfs_bitswap_wantlist",metrics:t.metrics}):new Map,this._stats=e}get length(){return this.set.size}add(e,t,n){const r=e.toString(J),o=this.set.get(r);o?(o.inc(),o.priority=t,o.wantType===v6.Have&&n===v6.Block&&(o.wantType=n)):(this.set.set(r,new h6(e,t,n)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.toString(J),n=this.set.get(t);n&&(n.dec(),n.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(w6((e=>e[1].key),Array.from(this.set.entries())))}contains(e){const t=e.toString(J);return this.set.has(t)}get(e){const t=e.toString(J);return this.set.get(t)}}b6.Entry=h6;const S6=b6.Entry;class _6{constructor(e,t,n,r,o){this.entry=new S6(e,t,n),this.cancel=Boolean(r),this.sendDontHave=Boolean(o)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){const e=this.cid.toString(J);return`BitswapMessageEntry ${e} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}const E6=(e,t)=>{const n=["bitswap"];return t&&n.push(t),e&&n.push(`${e.toString().slice(0,8)}`),pe(n.join(":"))},k6=(e,t)=>{if(e.size!==t.size)return!1;for(const[n,r]of e){const e=t.get(n);if(void 0===e)return!1;if(r instanceof Uint8Array&&e instanceof Uint8Array&&!wa(r,e))return!1;if(r instanceof _6&&e instanceof _6&&!r.equals(e))return!1}return!0};class C6{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}addEntry(e,t,n,r,o){null==n&&(n=C6.WantType.Block);const s=e.toString(J),i=this.wantlist.get(s);i?(i.wantType===n&&(i.priority=t),r&&(i.cancel=Boolean(r)),o&&(i.sendDontHave=Boolean(o)),n===C6.WantType.Block&&i.wantType===C6.WantType.Have&&(i.wantType=n)):this.wantlist.set(s,new _6(e,t,n,r,o))}addBlock(e,t){const n=e.toString(J);this.blocks.set(n,t)}addHave(e){const t=e.toString(J);this.blockPresences.has(t)||this.blockPresences.set(t,C6.BlockPresenceType.Have)}addDontHave(e){const t=e.toString(J);this.blockPresences.has(t)||this.blockPresences.set(t,C6.BlockPresenceType.DontHave)}cancel(e){const t=e.toString(J);this.wantlist.delete(t),this.addEntry(e,0,C6.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),cancel:Boolean(e.cancel)}))),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return y6.encode(e).finish()}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),wantType:e.wantType,cancel:Boolean(e.cancel),sendDontHave:Boolean(e.sendDontHave)}))),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(const[t,n]of this.blocks.entries()){const r=lt.parse(t),o=r.version,s=r.code,i=r.multihash.code,a=r.multihash.digest.length,l=d6([o,s,i,a]);e.payload.push(new y6.Block({prefix:l,data:n}))}for(const[t,n]of this.blockPresences)e.blockPresences.push(new y6.BlockPresence({cid:lt.parse(t).bytes,type:n}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),y6.encode(e).finish()}equals(e){return!!(this.full===e.full&&this.pendingBytes===e.pendingBytes&&k6(this.wantlist,e.wantlist)&&k6(this.blocks,e.blocks)&&k6(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}C6.deserialize=async(e,t)=>{const n=y6.decode(e),r=n.wantlist&&n.wantlist.full||!1,o=new C6(r);return n.wantlist&&n.wantlist.entries&&n.wantlist.entries.forEach((e=>{if(!e.block)return;const t=lt.decode(e.block);o.addEntry(t,e.priority||0,e.wantType,Boolean(e.cancel),Boolean(e.sendDontHave))})),n.blockPresences&&n.blockPresences.forEach((e=>{if(!e.cid)return;const t=lt.decode(e.cid);e.type===C6.BlockPresenceType.Have?o.addHave(t):o.addDontHave(t)})),n.blocks.length>0?(await Promise.all(n.blocks.map((async e=>{const t=await Fs.digest(e),n=lt.createV0(t);o.addBlock(n,e)}))),o):n.payload.length>0?(await Promise.all(n.payload.map((async e=>{if(!e.prefix||!e.data)return;const n=c6(e.prefix),r=n[0],s=n[1],i=n[2],a=i===Fs.code?Fs:t&&await t.getHasher(i);if(!a)throw new Xu("Unknown hash algorithm","ERR_UNKNOWN_HASH_ALG");const l=await a.digest(e.data),c=lt.create(r,s,l);o.addBlock(c,e.data)}))),o.setPendingBytes(n.pendingBytes),o):o},C6.blockPresenceSize=e=>e.bytes.length+1,C6.Entry=_6,C6.WantType={Block:y6.Wantlist.WantType.Block,Have:y6.Wantlist.WantType.Have},C6.BlockPresenceType={Have:y6.BlockPresenceType.Have,DontHave:y6.BlockPresenceType.DontHave};const I6=3,A6=Math.pow(2,31)-1,T6=1e3,R6=1;var x6=O6;function O6(e,t,n){var r=null,o=null,s=function(){r&&(clearTimeout(r),o=null,r=null)},i=function(){var e=o;s(),e&&e()},a=function(){if(!t)return e.apply(this,arguments);var i=this,a=arguments,l=n&&!r;return s(),o=function(){e.apply(i,a)},r=setTimeout((function(){if(r=null,!l){var e=o;return o=null,e()}}),t),l?o():void 0};return a.cancel=s,a.flush=i,a}class N6{constructor(e,t,n){this.peerId=t,this.network=n,this.refcnt=1,this._entries=[],this._log=E6(e,"msgqueue"),this.sendEntries=x6(this._sendEntries.bind(this),R6)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new C6(!1);this._entries.forEach((t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(ik){return void this._log.error("cant connect to peer %s: %s",this.peerId.toString(),ik.message)}this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,e).catch((e=>{this._log.error("send error: %s",e.message)}))}}class P6{constructor(e,t,n,r){this.peers=kG({name:"ipfs_bitswap_want_manager_peers",metrics:r.metrics}),this.wantlist=new b6(n,r),this.network=t,this._stats=n,this._peerId=e,this._log=E6(e,"want")}_addEntries(e,t,n){const r=e.map(((e,n)=>new C6.Entry(e,A6-n,C6.WantType.Block,t)));r.forEach((e=>{e.cancel?n?this.wantlist.removeForce(e.cid.toString(J)):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))}));for(const o of this.peers.values())o.addEntries(r)}_startPeerHandler(e){let t=this.peers.get(e.toString());if(t)return void t.refcnt++;t=new N6(this._peerId,e,this.network);const n=new C6(!0);for(const r of this.wantlist.entries())n.addEntry(r[1].cid,r[1].priority);return t.addMessage(n),this.peers.set(e.toString(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toString());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toString()))}wantBlocks(e,t={}){this._addEntries(e,!1),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.cancelWants(e)}))}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach((e=>this.disconnected(e.peerId)))}}const D6="/ipfs/bitswap/1.0.0",U6="/ipfs/bitswap/1.1.0",L6="/ipfs/bitswap/1.2.0",B6=32,M6=128,F6=3e4;class j6{constructor(e,t,n,r={}){this._log=E6(e.peerId,"network"),this._libp2p=e,this._bitswap=t,this._protocols=[D6],r.b100Only||(this._protocols.unshift(U6),this._protocols.unshift(L6)),this._stats=n,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=r.hashLoader,this._maxInboundStreams=r.maxInboundStreams??B6,this._maxOutboundStreams=r.maxOutboundStreams??M6,this._incomingStreamTimeout=r.incomingStreamTimeout??F6}async start(){this._running=!0,await this._libp2p.handle(this._protocols,this._onConnection,{maxInboundStreams:this._maxInboundStreams,maxOutboundStreams:this._maxOutboundStreams});const e=aM({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect});this._registrarIds=[];for(const t of this._protocols)this._registrarIds.push(await this._libp2p.register(t,e));this._libp2p.getConnections().forEach((e=>{this._onPeerConnect(e.remotePeer)}))}async stop(){if(this._running=!1,await this._libp2p.unhandle(this._protocols),null!=this._registrarIds){for(const e of this._registrarIds)this._libp2p.unregister(e);this._registrarIds=[]}}_onConnection({stream:e,connection:t}){if(!this._running)return;const n=new yi.TimeoutController(this._incomingStreamTimeout);Promise.resolve().then((async()=>{this._log("incoming new bitswap %s connection from %p",e.stat.protocol,t.remotePeer),await kv(JF(e.source,n.signal),aj(),(async e=>{for await(const r of e){try{const e=await C6.deserialize(r.subarray(),this._hashLoader);await this._bitswap._receiveMessage(t.remotePeer,e)}catch(ik){this._bitswap._receiveError(ik);break}n.reset()}}))})).catch((t=>{this._log(t),e.abort(t)})).finally((()=>{n.clear(),e.close()}))}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,t={}){return this._libp2p.contentRouting.findProviders(e,t)}async findAndConnect(e,t){const n=[];let r=0;for await(const o of this.findProviders(e,t))if(this._log(`connecting to provider ${o.id}`),n.push(this.connectTo(o.id,t).catch((e=>{this._log.error(e)}))),r++,r===I6)break;await Promise.all(n)}async provide(e,t){await this._libp2p.contentRouting.provide(e,t)}async sendMessage(e,t){if(!this._running)throw new Error("network isn't running");const n=e.toString();this._log("sendMessage to %s",n,t);const r=await this._libp2p.dial(e),o=await r.newStream([L6,U6,D6]);await z6(o,t,this._log),this._updateSentStats(e,t.blocks)}async connectTo(e,t){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,t)}_updateSentStats(e,t){const n=e.toString();if(this._stats){for(const e of t.values())this._stats.push(n,"dataSent",e.length);this._stats.push(n,"blocksSent",t.size)}}}async function z6(e,t,n){try{let n;switch(e.stat.protocol){case D6:n=t.serializeToBitswap100();break;case U6:case L6:n=t.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+e.stat.protocol)}await kv([n],nj(),e)}catch(ik){n(ik)}finally{e.close()}}class $6{constructor(e){this.partner=e,this.wantlist=new b6,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t,n){this.wantlist.add(e,t,n)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}class V6 extends Map{constructor(e,t){super(),this._cmp=t||this._defaultSort,this._keys=[];for(const[n,r]of e||[])this.set(n,r)}update(e){if(e<0||e>=this._keys.length)return;const t=this._keys[e];this._keys.splice(e,1);const n=this._find(t);this._keys.splice(n,0,t)}set(e,t){if(this.has(e)){const t=this.indexOf(e);this._keys.splice(t,1)}super.set(e,t);const n=this._find(e);return this._keys.splice(n,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;const t=this.indexOf(e);return this._keys.splice(t,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;const t=this._find(e);if(this._keys[t]===e)return t;for(let n=1;n<this._keys.length;n++){if(this._keys[t+n]===e)return t+n;if(this._keys[t-n]===e)return t-n}return-1}_find(e){let t=0,n=this._keys.length;while(t<n){const r=t+n>>>1,o=this._kCmp(this._keys[r],e);if(o<0)t=r+1;else{if(!(o>0))return r;n=r}}return t}*keys(){for(const e of this._keys)yield e}*values(){for(const e of this._keys)yield this.get(e)}*entries(){for(const e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,t){if(e)for(const n of this._keys)e.apply(t,[[n,this.get(n)]])}_defaultSort(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}_kCmp(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}}const H6={hasNewInfo(){return!1},merge(){}};class K6{constructor(e=H6){this._taskMerger=e,this._byPeer=new V6([],q6.compare)}pushTasks(e,t){let n=this._byPeer.get(e.toString());n||(n=new q6(e,this._taskMerger)),n.pushTasks(t),this._byPeer.set(e.toString(),n)}popTasks(e){const t=this._head();if(void 0===t)return{tasks:[],pendingSize:0};const{tasks:n,pendingSize:r}=t.popTasks(e);if(0===n.length)return{tasks:n,pendingSize:r};const o=t.peerId;return t.isIdle()?this._byPeer.delete(o.toString()):this._byPeer.update(0),{peerId:o,tasks:n,pendingSize:r}}_head(){if(0!==this._byPeer.size)for(const[,e]of this._byPeer)return e}remove(e,t){const n=this._byPeer.get(t.toString());n&&n.remove(e)}tasksDone(e,t){const n=this._byPeer.get(e.toString());if(!n)return;const r=this._byPeer.indexOf(e.toString());for(const o of t)n.taskDone(o);this._byPeer.update(r)}}class q6{constructor(e,t){this.peerId=e,this._taskMerger=t,this._activeTotalSize=0,this._pending=new W6,this._active=new Set}pushTasks(e){for(const t of e)this._pushTask(t)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;const t=this._pending.get(e.topic);if(t)return e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),void this._taskMerger.merge(e,t);this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){const t=[];for(const n of this._active)n.topic===e.topic&&t.push(n);return 0===t.length||this._taskMerger.hasNewInfo(e,t)}popTasks(e){let t=0;const n=[],r=this._pending.tasks();for(let o=0;o<r.length&&t<e;o++){const e=r[o];n.push(e),t+=e.size,this._pending.delete(e.topic),this._activeTotalSize+=e.size,this._active.add(e)}return{tasks:n,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return 0===this._pending.length&&0===this._active.size}static compare(e,t){return 0===e[1]._pending.length?1:0===t[1]._pending.length?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}}class W6{constructor(){this._tasks=new V6([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce(((e,t)=>e+t.task.size),0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map((e=>e.task))}updatePriority(e,t){const n=this._tasks.get(e);if(!n)return;const r=this._tasks.indexOf(e);n.task.priority=t,this._tasks.update(r)}_compare(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}}const Y6={hasNewInfo(e,t){let n=!1,r=!1;for(const o of t)o.data.haveBlock&&(n=!0),o.data.isWantBlock&&(r=!0);return!(r||!e.data.isWantBlock)||!(n||!e.data.haveBlock)},merge(e,t){const n=e.data,r=t.data;!r.haveBlock&&n.haveBlock&&(r.haveBlock=n.haveBlock,r.blockSize=n.blockSize),!r.isWantBlock&&n.isWantBlock&&(r.isWantBlock=!0,r.haveBlock&&!n.haveBlock||(r.haveBlock=n.haveBlock,t.size=e.size)),r.isWantBlock&&r.haveBlock&&(t.size=r.blockSize)}},G6=C6.WantType,Z6=16384,J6=1024;class Q6{constructor(e,t,n,r,o,s={}){this._log=E6(e,"engine"),this.blockstore=t,this.network=n,this._stats=r,this._opts=this._processOpts(s),this.ledgerMap=kG({name:"ipfs_bitswap_ledger_map",metrics:o.metrics}),this._running=!1,this._requestQueue=new K6(Y6)}_processOpts(e){return{maxSizeReplaceHasWithBlock:J6,targetMessageSize:Z6,...e}}_scheduleProcessTasks(){setTimeout((()=>{this._processTasks()}))}async _processTasks(){if(!this._running)return;const{peerId:e,tasks:t,pendingSize:n}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(0===t.length)return;const r=new C6(!1);r.setPendingBytes(n);const o=[],s=new Map;for(const a of t){const e=lt.parse(a.topic);a.data.haveBlock?a.data.isWantBlock?(o.push(e),s.set(a.topic,a.data)):r.addHave(e):r.addDontHave(e)}const i=await this._getBlocks(o);for(const[a,l]of s){const e=lt.parse(a),t=i.get(a);t?r.addBlock(e,t):l.sendDontHave&&r.addDontHave(e)}if(r.empty)return e&&this._requestQueue.tasksDone(e,t),void this._scheduleProcessTasks();try{e&&await this.network.sendMessage(e,r);for(const[t,n]of i.entries())e&&this.messageSent(e,lt.parse(t),n)}catch(ik){this._log.error(ik)}e&&this._requestQueue.tasksDone(e,t),this._scheduleProcessTasks()}wantlistForPeer(e){const t=e.toString(),n=this.ledgerMap.get(t);return n?n.wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toString(),n=this.ledgerMap.get(t);return n?{peer:n.partner,value:n.debtRatio(),sent:n.accounting.bytesSent,recv:n.accounting.bytesRecv,exchanged:n.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map((e=>e.partner))}receivedBlocks(e){if(e.length){for(const t of this.ledgerMap.values())for(const n of e){const e=t.wantlistContains(n.cid);if(!e)continue;const r=n.data.length,o=this._sendAsBlock(e.wantType,r);let s=r;o||(s=C6.blockPresenceSize(e.cid)),this._requestQueue.pushTasks(t.partner,[{topic:e.cid.toString(J),priority:e.priority,size:s,data:{blockSize:r,isWantBlock:o,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,t){const n=this._findOrCreate(e);if(t.empty)return;if(t.full&&(n.wantlist=new b6),this._updateBlockAccounting(t.blocks,n),0===t.wantlist.size)return void this._scheduleProcessTasks();const r=[],o=[];t.wantlist.forEach((e=>{e.cancel?(n.cancelWant(e.cid),r.push(e.cid)):(n.wants(e.cid,e.priority,e.wantType),o.push(e))})),this._cancelWants(e,r),await this._addWants(e,o),this._scheduleProcessTasks()}_cancelWants(e,t){for(const n of t)this._requestQueue.remove(n.toString(J),e)}async _addWants(e,t){const n=await this._getBlockSizes(t.map((e=>e.cid))),r=[];for(const o of t){const t=o.cid.toString(J),s=n.get(t);if(null==s)o.sendDontHave&&r.push({topic:t,priority:o.priority,size:C6.blockPresenceSize(o.cid),data:{isWantBlock:o.wantType===G6.Block,blockSize:0,haveBlock:!1,sendDontHave:o.sendDontHave}});else{const e=this._sendAsBlock(o.wantType,s);let n=s;e||(n=C6.blockPresenceSize(o.cid)),r.push({topic:t,priority:o.priority,size:n,data:{isWantBlock:e,blockSize:s,haveBlock:!0,sendDontHave:o.sendDontHave}})}this._requestQueue.pushTasks(e,r)}}_sendAsBlock(e,t){return e===G6.Block||t<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){const t=await this._getBlocks(e);return new Map([...t].map((([e,t])=>[e,t.length])))}async _getBlocks(e){const t=new Map;return await Promise.all(e.map((async e=>{try{const n=await this.blockstore.get(e);t.set(e.toString(J),n)}catch(n){"ERR_NOT_FOUND"!==n.code&&this._log.error("failed to query blockstore for %s: %s",e,n)}}))),t}_updateBlockAccounting(e,t){for(const n of e.values())this._log("got block (%s bytes)",n.length),t.receivedBytes(n.length)}messageSent(e,t,n){const r=this._findOrCreate(e);r.sentBytes(n.length),r.wantlist.remove(t)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){this.ledgerMap.delete(e.toString())}_findOrCreate(e){const t=e.toString(),n=this.ledgerMap.get(t);if(n)return n;const r=new $6(e);return this.ledgerMap.set(t,r),this._stats&&this._stats.push(t,"peerCount",1),r}start(){this._running=!0}stop(){this._running=!1}}const X6=e=>`unwant:${Ti(e.multihash.bytes,"base64")}`,e5=e=>`block:${Ti(e.multihash.bytes,"base64")}`;class t5 extends hW.EventEmitter{constructor(e){super(),this.setMaxListeners(T6),this._log=E6(e,"notif")}hasBlock(e,t){const n=e5(e);this._log(n),this.emit(n,t)}wantBlock(e,t={}){if(!e)throw new Error("Not a valid cid");const n=e5(e),r=X6(e);return this._log(`wantBlock:${e}`),new Promise(((o,s)=>{const i=()=>{this.removeListener(n,a),s(new Error(`Block for ${e} unwanted`))},a=e=>{this.removeListener(r,i),o(e)};this.once(r,i),this.once(n,a),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.removeListener(n,a),this.removeListener(r,i),s(new Error(`Want for ${e} aborted`))}))}))}unwantBlock(e){const t=X6(e);this._log(t),this.emit(t)}}var n5=n(3573);class r5 extends hW.EventEmitter{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach((e=>{this._stats[e]=BigInt(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach((t=>{const n=this._movingAverages[e][t]=n5(t);n.push(this._frequencyLastTime,0)}))})),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;while(this._queue.length){const t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;t&&Object.keys(this._stats).forEach((n=>{this._updateFrequencyFor(n,t,e)})),this._frequencyLastTime=e}_updateFrequencyFor(e,t,n){const r=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const o=r/t*1e3;let s=this._movingAverages[e];s||(s=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((e=>{let t=s[e];t||(t=s[e]=n5(e)),t.push(n,o)}))}_applyOp(e){const t=e[0],n=e[1];if("number"!==typeof n)throw new Error(`invalid increment number: ${n}`);Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(n),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=n}}const o5={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]};class s5 extends hW.EventEmitter{constructor(e,t=[],n=o5){super();const r=Object.assign({},o5,n);if("number"!==typeof r.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!==typeof r.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=t,this._options=r,this._enabled=this._options.enabled,this._global=new r5(t,r),this._global.on("update",(e=>this.emit("update",e))),this._peers=kG({name:"ipfs_bitswap_stats_peers",metrics:e.metrics})}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){const t="string"!==typeof e&&e.toString?e.toString():`${e}`;return this._peers.get(t)}push(e,t,n){if(this._enabled&&(this._global.push(t,n),e)){let r=this._peers.get(e);r||(r=new r5(this._initialCounters,this._options),this._peers.set(e,r)),r.push(t,n)}}disconnected(e){const t=e.toString(),n=this._peers.get(t);n&&(n.stop(),this._peers.delete(t))}}const i5={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},a5=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];class l5 extends IL{constructor(e,t,n={}){super(),this._libp2p=e,this._log=E6(this.peerId),this._options=Object.assign({},i5,n),this._stats=new s5(e,a5,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new j6(e,this,this._stats,{hashLoader:n.hashLoader,maxInboundStreams:n.maxInboundStreams,maxOutboundStreams:n.maxOutboundStreams,incomingStreamTimeout:n.incomingStreamTimeout}),this.blockstore=t,this.engine=new Q6(this.peerId,t,this.network,this._stats,e),this.wm=new P6(this.peerId,this.network,this._stats,e),this.notifications=new t5(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,t){try{await this.engine.messageReceived(e,t)}catch(ik){this._log("failed to receive message",t)}if(0===t.blocks.size)return;const n=[];for(const[r,o]of t.blocks.entries()){const e=lt.parse(r);n.push({wasWanted:this.wm.wantlist.contains(e),cid:e,data:o})}this.wm.cancelWants(n.filter((({wasWanted:e})=>e)).map((({cid:e})=>e))),await Promise.all(n.map((({cid:t,wasWanted:n,data:r})=>this._handleReceivedBlock(e,t,r,n))))}async _handleReceivedBlock(e,t,n,r){this._log("received block");const o=await this.blockstore.has(t);this._updateReceiveCounters(e.toString(),t,n,o),r&&await this.put(t,n)}_updateReceiveCounters(e,t,n,r){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",n.length),r&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",n.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,t){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,t={}){const n=(e,t)=>(this.wm.wantBlocks([e],t),this.notifications.wantBlock(e,t));let r=!1;const o=async(e,t)=>{try{const n=await this.blockstore.get(e,t);return n}catch(ik){if("ERR_NOT_FOUND"!==ik.code)throw ik;return r||(r=!0,this.network.findAndConnect(e,t).catch((e=>this._log.error(e)))),n(e,t)}},s=new AbortController,i=t.signal?(0,Nc.anySignal)([t.signal,s.signal]):s.signal;try{const t=await Promise.race([this.notifications.wantBlock(e,{signal:i}),o(e,{signal:i})]);return t}finally{s.abort()}}async*getMany(e,t={}){for await(const n of e)yield this.get(n,t)}unwant(e){const t=Array.isArray(e)?e:[e];this.wm.unwantBlocks(t),t.forEach((e=>this.notifications.unwantBlock(e)))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,t,n){await this.blockstore.put(e,t),this._sendHaveBlockNotifications(e,t)}async*putMany(e,t){for await(const{key:n,value:r}of this.blockstore.putMany(e,t))this._sendHaveBlockNotifications(n,r),yield{key:n,value:r}}_sendHaveBlockNotifications(e,t){this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch((e=>{this._log.error("Failed to provide: %s",e.message)}))}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}async start(){this.wm.start(),await this.network.start(),this.engine.start(),this.started=!0}async stop(){this._stats.stop(),this.wm.stop(),await this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}has(e){return this.blockstore.has(e)}}const c5=(e,t,n={})=>new l5(e,t,n);function u5(e){return e=e||new Error("Not Found"),fe(e,"ERR_NOT_FOUND")}function d5(e){return e=e||new Error("Aborted"),fe(e,"ERR_ABORTED")}class h5 extends IL{constructor(e,t){super(),this.child=e,this.bitswap=t}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,t,n={}){await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,t,n):await this.child.put(e,t,n))}async*putMany(e,t={}){const n=Zm(e,(async({key:e})=>!await this.has(e)));this.bitswap.isStarted()?yield*this.bitswap.putMany(n,t):yield*this.child.putMany(n,t)}async get(e,t={}){return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,t):this.child.get(e,t)}async*getMany(e,t={}){const n=ty({objectMode:!0}),r=ty({objectMode:!0});Promise.resolve().then((async()=>{for await(const t of e)!await this.has(t)&&this.bitswap.isStarted()?n.push(t):r.push(t);n.end(),r.end()})),yield*wv(this.bitswap.getMany(n,t),this.child.getMany(r,t))}async delete(e,t){await this.child.delete(e,t)}async*deleteMany(e,t){yield*this.child.deleteMany(e,t)}async has(e,t={}){return this.child.has(e,t)}async*query(e,t={}){yield*this.child.query(e,t)}async*queryKeys(e,t={}){yield*this.child.queryKeys(e,t)}}class p5{constructor(e,t,n,r,o){this.peerId=e,this.libp2p=t,this.bitswap=n,this.repo=r,this.blockstore=o}static async start({peerId:e,repo:t,print:n,hashers:r,options:o}){t.closed&&await t.open();const s=await t.config.getAll(),i=await Z4({options:o,repo:t,peerId:e,multiaddrs:f5(e,s),config:s,keychainConfig:void 0});await i.start();for(const c of i.getMultiaddrs())n(`Swarm listening on ${c.toString()}`);const a=c5(i,t.blocks,{statsEnabled:!0,hashLoader:r,maxInboundStreams:1024,maxOutboundStreams:1024});await a.start();const l=new h5(t.blocks,a);return t.blocks=l,t.pins.blockstore=l,new p5(e,i,a,t,l)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await e.bitswap.stop(),await e.libp2p.stop()}}const f5=(e,t)=>{const n=e.toString(),r=[],o=t.Addresses&&t.Addresses.Swarm||[];for(const s of o){let e=Da(s);if(e.protoCodes().includes(g5))throw fe(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");const t=e.getPeerId();t&&t!==n&&(e=e.encapsulate(`/p2p/${n}`)),r.push(e)}return r},g5=479;function m5({network:e}){async function t(t={}){const n=[],{libp2p:r}=await e.use(t);return await r.peerStore.forEach((e=>{n.push({id:e.id,addrs:e.addresses.map((e=>e.multiaddr))})})),n}return Mc(t)}function y5({network:e}){async function t(t,n={}){const{libp2p:r}=await e.use(n);await r.dial(t,n)}return Mc(t)}function v5({network:e}){async function t(t,n={}){const{libp2p:r}=await e.use(n);await r.hangUp(t)}return Mc(t)}function w5({network:e}){async function t(t={}){const{libp2p:n}=await e.use(t);return n.getMultiaddrs()}return Mc(t)}function b5({network:e}){async function t(t={}){const{libp2p:n}=await e.use(t);if(t.verbose){const e=[];for(const r of n.getConnections()){const n={addr:r.remoteAddr,peer:r.remotePeer};(t.verbose||t.direction)&&(n.direction=r.stat.direction),t.verbose&&(n.muxer=r.stat.multiplexer,n.latency="n/a",n.streams=[]),e.push(n)}return e}const r=new Map;for(const e of n.getConnections()){const t={addr:e.remoteAddr,peer:e.remotePeer};r.set(e.remotePeer.toString(),t)}return Array.from(r.values())}return Mc(t)}class S5{constructor({network:e}){this.addrs=m5({network:e}),this.connect=y5({network:e}),this.disconnect=v5({network:e}),this.localAddrs=w5({network:e}),this.peers=b5({network:e})}}const _5={success:!0,time:0,text:""};function E5({network:e}){async function*t(t,n={}){const{libp2p:r}=await e.use();n.count=n.count||10;const o=await r.peerStore.get(t);let s=o&&o.id;if(!s){yield{..._5,text:`Looking up peer ${t}`};const e=await r.peerRouting.findPeer(t);s=e&&e.id}if(!s)throw new Error("Peer was not found");yield{..._5,text:`PING ${s.toString()}`};let i=0,a=0;for(let e=0;e<n.count;e++)try{const e=await r.ping(s);a+=e,i++,yield{..._5,time:e}}catch(ik){yield{..._5,success:!1,text:ik.toString()}}if(i){const e=a/i;yield{..._5,text:`Average latency: ${e}ms`}}}return Mc(t)}const k5="/ipns/";function C5(e){let t;if(e.startsWith(k5)&&(e=e.substring(k5.length)),"1"!==e[0]&&"Q"!==e[0]||(e=`z${e}`),"z"===e[0]&&(t=J.decode(e)),"k"===e[0]&&(t=xs.decode(e)),!t)throw new Error("Could not parse string");if(1!==t[0]&&114!==t[1]&&(t=ji([[1,114],t])),40!==t.length)throw new Error("Incorrect length "+t.length);return ji([mi(k5),t.subarray(2)])}function I5({network:e,repo:t,peerId:n}){const{get:r,put:o,findProvs:s,findPeer:i,provide:a,query:l}={async*get(t,r={}){const{libp2p:o}=await A5(e,n,r),s=t instanceof Uint8Array?t:C5(t);if(null==o.dht)throw fe(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*o.dht.get(s,r)},async*put(t,r,o){const{libp2p:s}=await A5(e,n,o),i=t instanceof Uint8Array?t:C5(t);if(null==s.dht)throw fe(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.put(i,r,o)},async*findProvs(t,r={}){const{libp2p:o}=await A5(e,n,r);if(null==o.dht)throw fe(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*o.dht.findProviders(t,{signal:r.signal})},async*findPeer(t,r={}){const{libp2p:o}=await A5(e,n,r);if(null==o.dht)throw fe(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*o.dht.findPeer(t,{signal:r.signal})},async*provide(r,o={recursive:!1}){const{libp2p:s}=await A5(e,n,o),i=await t.blocks.has(r);if(!i)throw fe(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(o.recursive)throw fe(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");if(null==s.dht)throw fe(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.provide(r)},async*query(t,r={}){const{libp2p:o}=await A5(e,n,r);let s;const i=lt.asCID(t);if(s=null!=i?i.multihash.bytes:hd(t.toString()).toBytes(),null==o.dht)throw fe(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*o.dht.getClosestPeers(s,r)}};return{get:Mc(r),put:Mc(o),findProvs:Mc(s),findPeer:Mc(i),provide:Mc(a),query:Mc(l)}}const A5=async(e,t,n)=>{const r=await e.use(n);if(null!=r.libp2p.dht)return r;{const e=async function*(){yield{from:t,name:"QUERY_ERROR",type:3,error:new ai("dht not enabled")}};return{libp2p:{dht:{get:e,put:e,findProviders:e,findPeer:e,provide:e,getClosestPeers:e}}}}};function T5({network:e,config:t}){const n=iy(t||{},"Pubsub.Enabled",!0),r={};let o;return{subscribe:n?Mc(s):R5,unsubscribe:n?Mc(i):R5,publish:n?Mc(a):R5,ls:n?Mc(l):R5,peers:n?Mc(c):R5};async function s(t,n,s={}){const{libp2p:i}=await e.use(s);i.pubsub.subscribe(t),null==o&&(o=e=>{const t=e.detail;r[t.topic]&&r[t.topic].forEach((e=>{"function"!==typeof e?null!=e&&null!=e.handleEvent&&e.handleEvent(t):e(t)}))},i.pubsub.addEventListener("message",o)),null!=n&&(null==r[t]&&(r[t]=[]),r[t].push(n))}async function i(t,n,s={}){const{libp2p:i}=await e.use(s);null!=n&&null!=r[t]&&(r[t]=r[t].filter((e=>e!==n)),0===r[t].length&&delete r[t]),"function"!==typeof n&&delete r[t],null==r[t]&&i.pubsub.unsubscribe(t),0===Object.keys(r).length&&(i.pubsub.removeEventListener("message",o),o=void 0)}async function a(t,n,r={}){const{libp2p:o}=await e.use(r);if(!n)throw fe(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await o.pubsub.publish(t,n)}async function l(t={}){const{libp2p:n}=await e.use(t);return n.pubsub.getTopics()}async function c(t,n={}){const{libp2p:r}=await e.use(n);return r.pubsub.getSubscribers(t)}}const R5=async()=>{throw new ai("pubsub not enabled")},x5=T.bind({ignoreUndefined:!0}),O5=pe("ipfs"),N5=3e4;class P5{constructor({print:e,storage:t,codecs:n,options:r}){const{peerId:o,repo:s,keychain:i}=t,a=Jc.create(p5),l=kx(r.preload),c=Zu(),u=Ju({network:a}),d=new Ry(r),h=Object.values(Qs);(r.ipld&&r.ipld.hashers?r.ipld.hashers:[]).forEach((e=>h.push(e))),this.hashers=new Wj({hashers:h,loadHasher:r.ipld&&r.ipld.loadHasher});const p=Object.values(Js);(r.ipld&&r.ipld.bases?r.ipld.bases:[]).forEach((e=>p.push(e))),this.bases=new Vj({bases:p,loadBase:r.ipld&&r.ipld.loadBase});const f=new Od({repo:s,codecs:n}),g=new Rv({codecs:n,hashers:this.hashers,preload:l,repo:s}),m=new Vy({dns:c,ipns:d,repo:s,codecs:n,peerId:o,isOnline:u,keychain:i,options:r}),y=md({repo:s,codecs:n,bases:this.bases,name:m}),v=new hR({repo:s,codecs:n,hashers:this.hashers,preload:l}),w=Object.assign(qy({repo:s,codecs:n,resolve:y,preload:l}),{local:Xy({repo:t.repo})}),{add:b,addAll:S,cat:_,get:E,ls:k}=new QA({preload:l,repo:s,options:r.EXPERIMENTAL,hashers:this.hashers}),C=JN({repo:s,preload:l,hashers:this.hashers,options:r}),I=Ix({files:C,preload:l,options:r.preload});this.preload=l,this.name=m,this.ipns=d,this.pin=f,this.resolve=y,this.block=g,this.refs=w,this.start=Qc({network:a,peerId:o,repo:s,preload:l,ipns:d,mfsPreload:I,print:e,keychain:i,hashers:this.hashers,options:r}),this.stop=Xc({network:a,preload:l,mfsPreload:I,ipns:d,repo:s}),this.dht=I5({network:a,repo:s,peerId:o}),this.pubsub=T5({network:a,config:r.config}),this.dns=c,this.isOnline=u,this.id=oT({network:a,peerId:o}),this.version=nT({repo:s}),this.bitswap=new ov({network:a}),this.bootstrap=new hv({repo:s}),this.config=hT({repo:s}),this.ping=E5({network:a}),this.add=b,this.addAll=S,this.cat=_,this.get=E,this.ls=k,this.dag=v,this.files=C,this.key=new aP({keychain:i}),this.object=new bP({preload:l,codecs:n,repo:s}),this.repo=new IP({repo:s,hashers:this.hashers}),this.stats=new RP({repo:s,network:a}),this.swarm=new S5({network:a}),Object.defineProperty(this,"libp2p",{get(){const e=a.try();return e?e.libp2p:void 0}});const A=()=>Promise.reject(fe(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")),T=async function*(){throw fe(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};this.commands=A,this.diag={cmds:A,net:A,sys:A},this.log={level:A,ls:A,tail:T},this.mount=A,this.codecs=n}async init(){throw new ri}}const D5=async e=>{const t=Kt({Data:new Te({type:"directory"}).marshal(),Links:[]}),n=await e.block.put(t,{mhtype:"sha2-256",format:"dag-pb"});return await e.pin.add(n),n},U5=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!R.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}});async function L5(e={}){e=x5(U5(),e);const t=e.init||{},n={name:Es.name,code:Es.code,encode:e=>e,decode:e=>e},r=Object.values(Xs);[i,a,l,c,n].concat(e.ipld&&e.ipld.codecs||[]).forEach((e=>r.push(e)));const o=new Kj({codecs:r,loadCodec:e.ipld&&e.ipld.loadCodec}),s=e.silent?O5:console.log;O5("creating repo");const u=await e6.start(s,o,e);O5("getting repo config");const d=await u.repo.config.getAll(),h=new P5({storage:u,print:s,codecs:o,options:{...e,config:d}});if(O5("starting preload"),await h.preload.start(),O5("starting storage"),h.ipns.startOffline(u),u.isNew&&!t.emptyRepo){const e=await D5(h);if(O5("adding default assets"),await ei({addAll:h.addAll,print:s}),O5("initializing IPNS keyspace"),null==u.peerId.publicKey)throw fe(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");const t=new yi.TimeoutController(N5);try{await h.ipns.initializeKeyspace(u.peerId,mi(`/ipfs/${e}`),{signal:t.signal})}finally{t.clear()}}return!1!==e.start&&(O5("starting node"),await h.start()),h}var B5=n(2596);const M5=L5,F5=B5,j5=OH},7308:function(e,t,n){"use strict";function r(){this.__data__=[],this.size=0}n.d(t,{Z:function(){return w}});var o=r,s=n(9651);function i(e,t){var n=e.length;while(n--)if((0,s.Z)(e[n][0],t))return n;return-1}var a=i,l=Array.prototype,c=l.splice;function u(e){var t=this.__data__,n=a(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():c.call(t,n,1),--this.size,!0}var d=u;function h(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var p=h;function f(e){return a(this.__data__,e)>-1}var g=f;function m(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var y=m;function v(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}v.prototype.clear=o,v.prototype["delete"]=d,v.prototype.get=p,v.prototype.has=g,v.prototype.set=y;var w=v},6183:function(e,t,n){"use strict";var r=n(2508),o=n(6092),s=(0,r.Z)(o.Z,"Map");t["Z"]=s},7834:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var r=n(2508),o=(0,r.Z)(Object,"create"),s=o;function i(){this.__data__=s?s(null):{},this.size=0}var a=i;function l(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var c=l,u="__lodash_hash_undefined__",d=Object.prototype,h=d.hasOwnProperty;function p(e){var t=this.__data__;if(s){var n=t[e];return n===u?void 0:n}return h.call(t,e)?t[e]:void 0}var f=p,g=Object.prototype,m=g.hasOwnProperty;function y(e){var t=this.__data__;return s?void 0!==t[e]:m.call(t,e)}var v=y,w="__lodash_hash_undefined__";function b(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=s&&void 0===t?w:t,this}var S=b;function _(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}_.prototype.clear=a,_.prototype["delete"]=c,_.prototype.get=f,_.prototype.has=v,_.prototype.set=S;var E=_,k=n(7308),C=n(6183);function I(){this.size=0,this.__data__={hash:new E,map:new(C.Z||k.Z),string:new E}}var A=I;function T(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var R=T;function x(e,t){var n=e.__data__;return R(t)?n["string"==typeof t?"string":"hash"]:n.map}var O=x;function N(e){var t=O(this,e)["delete"](e);return this.size-=t?1:0,t}var P=N;function D(e){return O(this,e).get(e)}var U=D;function L(e){return O(this,e).has(e)}var B=L;function M(e,t){var n=O(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var F=M;function j(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}j.prototype.clear=A,j.prototype["delete"]=P,j.prototype.get=U,j.prototype.has=B,j.prototype.set=F;var z=j},7685:function(e,t,n){"use strict";var r=n(6092),o=r.Z.Symbol;t["Z"]=o},4073:function(e,t){"use strict";function n(e,t){var n=-1,r=null==e?0:e.length,o=Array(r);while(++n<r)o[n]=t(e[n],n,e);return o}t["Z"]=n},2954:function(e,t,n){"use strict";var r=n(4752),o=n(9651),s=Object.prototype,i=s.hasOwnProperty;function a(e,t,n){var s=e[t];i.call(e,t)&&(0,o.Z)(s,n)&&(void 0!==n||t in e)||(0,r.Z)(e,t,n)}t["Z"]=a},4752:function(e,t,n){"use strict";var r=n(7904);function o(e,t,n){"__proto__"==t&&r.Z?(0,r.Z)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}t["Z"]=o},3317:function(e,t,n){"use strict";var r=n(2064),o=n(2281);function s(e,t){t=(0,r.Z)(t,e);var n=0,s=t.length;while(null!=e&&n<s)e=e[(0,o.Z)(t[n++])];return n&&n==s?e:void 0}t["Z"]=s},3589:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(7685),o=Object.prototype,s=o.hasOwnProperty,i=o.toString,a=r.Z?r.Z.toStringTag:void 0;function l(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var o=i.call(e);return r&&(t?e[a]=n:delete e[a]),o}var c=l,u=Object.prototype,d=u.toString;function h(e){return d.call(e)}var p=h,f="[object Null]",g="[object Undefined]",m=r.Z?r.Z.toStringTag:void 0;function y(e){return null==e?void 0===e?g:f:m&&m in Object(e)?c(e):p(e)}var v=y},8472:function(e,t,n){"use strict";var r=n(2954),o=n(2064),s=n(6009),i=n(7226),a=n(2281);function l(e,t,n,l){if(!(0,i.Z)(e))return e;t=(0,o.Z)(t,e);var c=-1,u=t.length,d=u-1,h=e;while(null!=h&&++c<u){var p=(0,a.Z)(t[c]),f=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=d){var g=h[p];f=l?l(g,p,h):void 0,void 0===f&&(f=(0,i.Z)(g)?g:(0,s.Z)(t[c+1])?[]:{})}(0,r.Z)(h,p,f),h=h[p]}return e}t["Z"]=l},2064:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(7771),o=n(9365),s=n(2454),i=500;function a(e){var t=(0,s.Z)(e,(function(e){return n.size===i&&n.clear(),e})),n=t.cache;return t}var l=a,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,d=l((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(c,(function(e,n,r,o){t.push(r?o.replace(u,"$1"):n||e)})),t})),h=d,p=n(7685),f=n(4073),g=n(2714),m=1/0,y=p.Z?p.Z.prototype:void 0,v=y?y.toString:void 0;function w(e){if("string"==typeof e)return e;if((0,r.Z)(e))return(0,f.Z)(e,w)+"";if((0,g.Z)(e))return v?v.call(e):"";var t=e+"";return"0"==t&&1/e==-m?"-0":t}var b=w;function S(e){return null==e?"":b(e)}var _=S;function E(e,t){return(0,r.Z)(e)?e:(0,o.Z)(e,t)?[e]:h(_(e))}var k=E},7904:function(e,t,n){"use strict";var r=n(2508),o=function(){try{var e=(0,r.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();t["Z"]=o},3413:function(e,t){"use strict";var n="object"==typeof global&&global&&global.Object===Object&&global;t["Z"]=n},2508:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(3234),o=n(6092),s=o.Z["__core-js_shared__"],i=s,a=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function l(e){return!!a&&a in e}var c=l,u=n(7226),d=n(19),h=/[\\^$.*+?()[\]{}|]/g,p=/^\[object .+?Constructor\]$/,f=Function.prototype,g=Object.prototype,m=f.toString,y=g.hasOwnProperty,v=RegExp("^"+m.call(y).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function w(e){if(!(0,u.Z)(e)||c(e))return!1;var t=(0,r.Z)(e)?v:p;return t.test((0,d.Z)(e))}var b=w;function S(e,t){return null==e?void 0:e[t]}var _=S;function E(e,t){var n=_(e,t);return b(n)?n:void 0}var k=E},6009:function(e,t){"use strict";var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function o(e,t){var o=typeof e;return t=null==t?n:t,!!t&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}t["Z"]=o},9365:function(e,t,n){"use strict";var r=n(7771),o=n(2714),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(e,t){if((0,r.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,o.Z)(e))||(i.test(e)||!s.test(e)||null!=t&&e in Object(t))}t["Z"]=a},6092:function(e,t,n){"use strict";var r=n(3413),o="object"==typeof self&&self&&self.Object===Object&&self,s=r.Z||o||Function("return this")();t["Z"]=s},2281:function(e,t,n){"use strict";var r=n(2714),o=1/0;function s(e){if("string"==typeof e||(0,r.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}t["Z"]=s},19:function(e,t){"use strict";var n=Function.prototype,r=n.toString;function o(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}t["Z"]=o},9651:function(e,t){"use strict";function n(e,t){return e===t||e!==e&&t!==t}t["Z"]=n},5937:function(e,t){"use strict";function n(e){var t=-1,n=null==e?0:e.length,r={};while(++t<n){var o=e[t];r[o[0]]=o[1]}return r}t["Z"]=n},6423:function(e,t,n){"use strict";var r=n(3317);function o(e,t,n){var o=null==e?void 0:(0,r.Z)(e,t);return void 0===o?n:o}t["Z"]=o},7771:function(e,t){"use strict";var n=Array.isArray;t["Z"]=n},3234:function(e,t,n){"use strict";var r=n(3589),o=n(7226),s="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",l="[object Proxy]";function c(e){if(!(0,o.Z)(e))return!1;var t=(0,r.Z)(e);return t==i||t==a||t==s||t==l}t["Z"]=c},7601:function(e,t){"use strict";function n(e){return null==e}t["Z"]=n},7226:function(e,t){"use strict";function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t["Z"]=n},8533:function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t["Z"]=n},2714:function(e,t,n){"use strict";var r=n(3589),o=n(8533),s="[object Symbol]";function i(e){return"symbol"==typeof e||(0,o.Z)(e)&&(0,r.Z)(e)==s}t["Z"]=i},2454:function(e,t,n){"use strict";var r=n(7834),o="Expected a function";function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],s=n.cache;if(s.has(o))return s.get(o);var i=e.apply(this,r);return n.cache=s.set(o,i)||s,i};return n.cache=new(s.Cache||r.Z),n}s.Cache=r.Z,t["Z"]=s},2201:function(e,t,n){"use strict";n.d(t,{p7:function(){return nt},r5:function(){return j},tv:function(){return st}});var r=n(6252),o=n(2262);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const s="undefined"!==typeof window;function i(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const a=Object.assign;function l(e,t){const n={};for(const r in t){const o=t[r];n[r]=u(o)?o.map(e):e(o)}return n}const c=()=>{},u=Array.isArray;const d=/\/$/,h=e=>e.replace(d,"");function p(e,t,n="/"){let r,o={},s="",i="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),o=e(s)),a>-1&&(r=r||t.slice(0,a),i=t.slice(a,t.length)),r=S(null!=r?r:t,n),{fullPath:r+(s&&"?")+s+i,path:r,query:o,hash:i}}function f(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function g(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function m(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&y(t.matched[r],n.matched[o])&&v(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function y(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function v(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!w(e[n],t[n]))return!1;return!0}function w(e,t){return u(e)?b(e,t):u(t)?b(t,e):e===t}function b(e,t){return u(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function S(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let o,s,i=n.length-1;for(o=0;o<r.length;o++)if(s=r[o],"."!==s){if(".."!==s)break;i>1&&i--}return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var _,E;(function(e){e["pop"]="pop",e["push"]="push"})(_||(_={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(E||(E={}));function k(e){if(!e)if(s){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),h(e)}const C=/^[^#]+#/;function I(e,t){return e.replace(C,"#")+t}function A(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const T=()=>({left:window.pageXOffset,top:window.pageYOffset});function R(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const o="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=A(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function x(e,t){const n=history.state?history.state.position-t:-1;return n+e}const O=new Map;function N(e,t){O.set(e,t)}function P(e){const t=O.get(e);return O.delete(e),t}let D=()=>location.protocol+"//"+location.host;function U(e,t){const{pathname:n,search:r,hash:o}=t,s=e.indexOf("#");if(s>-1){let t=o.includes(e.slice(s))?e.slice(s).length:1,n=o.slice(t);return"/"!==n[0]&&(n="/"+n),g(n,"")}const i=g(n,e);return i+r+o}function L(e,t,n,r){let o=[],s=[],i=null;const l=({state:s})=>{const a=U(e,location),l=n.value,c=t.value;let u=0;if(s){if(n.value=a,t.value=s,i&&i===l)return void(i=null);u=c?s.position-c.position:0}else r(a);o.forEach((e=>{e(n.value,l,{delta:u,type:_.pop,direction:u?u>0?E.forward:E.back:E.unknown})}))};function c(){i=n.value}function u(e){o.push(e);const t=()=>{const t=o.indexOf(e);t>-1&&o.splice(t,1)};return s.push(t),t}function d(){const{history:e}=window;e.state&&e.replaceState(a({},e.state,{scroll:T()}),"")}function h(){for(const e of s)e();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d),{pauseListeners:c,listen:u,destroy:h}}function B(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?T():null}}function M(e){const{history:t,location:n}=window,r={value:U(e,n)},o={value:t.state};function s(r,s,i){const a=e.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+r:D()+e+r;try{t[i?"replaceState":"pushState"](s,"",l),o.value=s}catch(c){console.error(c),n[i?"replace":"assign"](l)}}function i(e,n){const i=a({},t.state,B(o.value.back,e,o.value.forward,!0),n,{position:o.value.position});s(e,i,!0),r.value=e}function l(e,n){const i=a({},o.value,t.state,{forward:e,scroll:T()});s(i.current,i,!0);const l=a({},B(r.value,e,null),{position:i.position+1},n);s(e,l,!1),r.value=e}return o.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:o,push:l,replace:i}}function F(e){e=k(e);const t=M(e),n=L(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const o=a({location:"",base:e,go:r,createHref:I.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function j(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),F(e)}function z(e){return"string"===typeof e||e&&"object"===typeof e}function $(e){return"string"===typeof e||"symbol"===typeof e}const V={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},H=Symbol("");var K;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(K||(K={}));function q(e,t){return a(new Error,{type:e,[H]:!0},t)}function W(e,t){return e instanceof Error&&H in e&&(null==t||!!(e.type&t))}const Y="[^/]+?",G={sensitive:!1,strict:!1,start:!0,end:!0},Z=/[.+*?^${}()[\]/\\]/g;function J(e,t){const n=a({},G,t),r=[];let o=n.start?"^":"";const s=[];for(const a of e){const e=a.length?[]:[90];n.strict&&!a.length&&(o+="/");for(let t=0;t<a.length;t++){const r=a[t];let i=40+(n.sensitive?.25:0);if(0===r.type)t||(o+="/"),o+=r.value.replace(Z,"\\$&"),i+=40;else if(1===r.type){const{value:e,repeatable:n,optional:l,regexp:c}=r;s.push({name:e,repeatable:n,optional:l});const u=c||Y;if(u!==Y){i+=10;try{new RegExp(`(${u})`)}catch(d){throw new Error(`Invalid custom RegExp for param "${e}" (${u}): `+d.message)}}let h=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;t||(h=l&&a.length<2?`(?:/${h})`:"/"+h),l&&(h+="?"),o+=h,i+=20,l&&(i+=-8),n&&(i+=-20),".*"===u&&(i+=-50)}e.push(i)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function l(e){const t=e.match(i),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",o=s[r-1];n[o.name]=e&&o.repeatable?e.split("/"):e}return n}function c(t){let n="",r=!1;for(const o of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of o)if(0===e.type)n+=e.value;else if(1===e.type){const{value:s,repeatable:i,optional:a}=e,l=s in t?t[s]:"";if(u(l)&&!i)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const c=u(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${s}"`);o.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}return{re:i,score:r,keys:s,parse:l,stringify:c}}function Q(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function X(e,t){let n=0;const r=e.score,o=t.score;while(n<r.length&&n<o.length){const e=Q(r[n],o[n]);if(e)return e;n++}if(1===Math.abs(o.length-r.length)){if(ee(r))return 1;if(ee(o))return-1}return o.length-r.length}function ee(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const te={type:0,value:""},ne=/[a-zA-Z0-9_]/;function re(e){if(!e)return[[]];if("/"===e)return[[te]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,r=n;const o=[];let s;function i(){s&&o.push(s),s=[]}let a,l=0,c="",u="";function d(){c&&(0===n?s.push({type:0,value:c}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),c="")}function h(){c+=a}while(l<e.length)if(a=e[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&d(),i()):":"===a?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:"("===a?n=2:ne.test(a)?h():(d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,u="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),d(),i(),o}function oe(e,t,n){const r=J(re(e.path),n);const o=a(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf===!t.record.aliasOf&&t.children.push(o),o}function se(e,t){const n=[],r=new Map;function o(e){return r.get(e)}function s(e,n,r){const o=!r,l=ae(e);l.aliasOf=r&&r.record;const d=de(t,e),h=[l];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)h.push(a({},l,{components:r?r.record.components:l.components,path:e,aliasOf:r?r.record:l}))}let p,f;for(const t of h){const{path:a}=t;if(n&&"/"!==a[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(a&&r+a)}if(p=oe(t,n,d),r?r.alias.push(p):(f=f||p,f!==p&&f.alias.push(p),o&&e.name&&!ce(p)&&i(e.name)),l.children){const e=l.children;for(let t=0;t<e.length;t++)s(e[t],p,r&&r.children[t])}r=r||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&u(p)}return f?()=>{i(f)}:c}function i(e){if($(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(i),t.alias.forEach(i))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(i),e.alias.forEach(i))}}function l(){return n}function u(e){let t=0;while(t<n.length&&X(e,n[t])>=0&&(e.record.path!==n[t].record.path||!he(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!ce(e)&&r.set(e.record.name,e)}function d(e,t){let o,s,i,l={};if("name"in e&&e.name){if(o=r.get(e.name),!o)throw q(1,{location:e});0,i=o.record.name,l=a(ie(t.params,o.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&ie(e.params,o.keys.map((e=>e.name)))),s=o.stringify(l)}else if("path"in e)s=e.path,o=n.find((e=>e.re.test(s))),o&&(l=o.parse(s),i=o.record.name);else{if(o=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!o)throw q(1,{location:e,currentLocation:t});i=o.record.name,l=a({},t.params,e.params),s=o.stringify(l)}const c=[];let u=o;while(u)c.unshift(u.record),u=u.parent;return{name:i,path:s,params:l,matched:c,meta:ue(c)}}return t=de({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>s(e))),{addRoute:s,resolve:d,removeRoute:i,getRoutes:l,getRecordMatcher:o}}function ie(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function ae(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:le(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function le(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function ce(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ue(e){return e.reduce(((e,t)=>a(e,t.meta)),{})}function de(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function he(e,t){return t.children.some((t=>t===e||he(e,t)))}const pe=/#/g,fe=/&/g,ge=/\//g,me=/=/g,ye=/\?/g,ve=/\+/g,we=/%5B/g,be=/%5D/g,Se=/%5E/g,_e=/%60/g,Ee=/%7B/g,ke=/%7C/g,Ce=/%7D/g,Ie=/%20/g;function Ae(e){return encodeURI(""+e).replace(ke,"|").replace(we,"[").replace(be,"]")}function Te(e){return Ae(e).replace(Ee,"{").replace(Ce,"}").replace(Se,"^")}function Re(e){return Ae(e).replace(ve,"%2B").replace(Ie,"+").replace(pe,"%23").replace(fe,"%26").replace(_e,"`").replace(Ee,"{").replace(Ce,"}").replace(Se,"^")}function xe(e){return Re(e).replace(me,"%3D")}function Oe(e){return Ae(e).replace(pe,"%23").replace(ye,"%3F")}function Ne(e){return null==e?"":Oe(e).replace(ge,"%2F")}function Pe(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function De(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const e=r[o].replace(ve," "),n=e.indexOf("="),s=Pe(n<0?e:e.slice(0,n)),i=n<0?null:Pe(e.slice(n+1));if(s in t){let e=t[s];u(e)||(e=t[s]=[e]),e.push(i)}else t[s]=i}return t}function Ue(e){let t="";for(let n in e){const r=e[n];if(n=xe(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const o=u(r)?r.map((e=>e&&Re(e))):[r&&Re(r)];o.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function Le(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=u(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}const Be=Symbol(""),Me=Symbol(""),Fe=Symbol(""),je=Symbol(""),ze=Symbol("");function $e(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Ve(e,t,n,r,o){const s=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise(((i,a)=>{const l=e=>{!1===e?a(q(4,{from:n,to:t})):e instanceof Error?a(e):z(e)?a(q(2,{from:t,to:e})):(s&&r.enterCallbacks[o]===s&&"function"===typeof e&&s.push(e),i())},c=e.call(r&&r.instances[o],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch((e=>a(e)))}))}function He(e,t,n,r){const o=[];for(const s of e){0;for(const e in s.components){let a=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if(Ke(a)){const i=a.__vccOpts||a,l=i[t];l&&o.push(Ve(l,n,r,s,e))}else{let l=a();0,o.push((()=>l.then((o=>{if(!o)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${s.path}"`));const a=i(o)?o.default:o;s.components[e]=a;const l=a.__vccOpts||a,c=l[t];return c&&Ve(c,n,r,s,e)()}))))}}}return o}function Ke(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function qe(e){const t=(0,r.f3)(Fe),n=(0,r.f3)(je),s=(0,r.Fl)((()=>t.resolve((0,o.SU)(e.to)))),i=(0,r.Fl)((()=>{const{matched:e}=s.value,{length:t}=e,r=e[t-1],o=n.matched;if(!r||!o.length)return-1;const i=o.findIndex(y.bind(null,r));if(i>-1)return i;const a=Je(e[t-2]);return t>1&&Je(r)===a&&o[o.length-1].path!==a?o.findIndex(y.bind(null,e[t-2])):i})),a=(0,r.Fl)((()=>i.value>-1&&Ze(n.params,s.value.params))),l=(0,r.Fl)((()=>i.value>-1&&i.value===n.matched.length-1&&v(n.params,s.value.params)));function u(n={}){return Ge(n)?t[(0,o.SU)(e.replace)?"replace":"push"]((0,o.SU)(e.to)).catch(c):Promise.resolve()}return{route:s,href:(0,r.Fl)((()=>s.value.href)),isActive:a,isExactActive:l,navigate:u}}const We=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qe,setup(e,{slots:t}){const n=(0,o.qj)(qe(e)),{options:s}=(0,r.f3)(Fe),i=(0,r.Fl)((()=>({[Qe(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Qe(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const o=t.default&&t.default(n);return e.custom?o:(0,r.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Ye=We;function Ge(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ze(e,t){for(const n in t){const r=t[n],o=e[n];if("string"===typeof r){if(r!==o)return!1}else if(!u(o)||o.length!==r.length||r.some(((e,t)=>e!==o[t])))return!1}return!0}function Je(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qe=(e,t,n)=>null!=e?e:null!=t?t:n,Xe=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=(0,r.f3)(ze),i=(0,r.Fl)((()=>e.route||s.value)),l=(0,r.f3)(Me,0),c=(0,r.Fl)((()=>{let e=(0,o.SU)(l);const{matched:t}=i.value;let n;while((n=t[e])&&!n.components)e++;return e})),u=(0,r.Fl)((()=>i.value.matched[c.value]));(0,r.JJ)(Me,(0,r.Fl)((()=>c.value+1))),(0,r.JJ)(Be,u),(0,r.JJ)(ze,i);const d=(0,o.iH)();return(0,r.YP)((()=>[d.value,u.value,e.name]),(([e,t,n],[r,o,s])=>{t&&(t.instances[n]=e,o&&o!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=o.leaveGuards),t.updateGuards.size||(t.updateGuards=o.updateGuards))),!e||!t||o&&y(t,o)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const o=i.value,s=e.name,l=u.value,c=l&&l.components[s];if(!c)return et(n.default,{Component:c,route:o});const h=l.props[s],p=h?!0===h?o.params:"function"===typeof h?h(o):h:null,f=e=>{e.component.isUnmounted&&(l.instances[s]=null)},g=(0,r.h)(c,a({},p,t,{onVnodeUnmounted:f,ref:d}));return et(n.default,{Component:g,route:o})||g}}});function et(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const tt=Xe;function nt(e){const t=se(e.routes,e),n=e.parseQuery||De,i=e.stringifyQuery||Ue,d=e.history;const h=$e(),g=$e(),y=$e(),v=(0,o.XI)(V);let w=V;s&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=l.bind(null,(e=>""+e)),S=l.bind(null,Ne),E=l.bind(null,Pe);function k(e,n){let r,o;return $(e)?(r=t.getRecordMatcher(e),o=n):o=e,t.addRoute(o,r)}function C(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function I(){return t.getRoutes().map((e=>e.record))}function A(e){return!!t.getRecordMatcher(e)}function O(e,r){if(r=a({},r||v.value),"string"===typeof e){const o=p(n,e,r.path),s=t.resolve({path:o.path},r),i=d.createHref(o.fullPath);return a(o,s,{params:E(s.params),hash:Pe(o.hash),redirectedFrom:void 0,href:i})}let o;if("path"in e)o=a({},e,{path:p(n,e.path,r.path).path});else{const t=a({},e.params);for(const e in t)null==t[e]&&delete t[e];o=a({},e,{params:S(e.params)}),r.params=S(r.params)}const s=t.resolve(o,r),l=e.hash||"";s.params=b(E(s.params));const c=f(i,a({},e,{hash:Te(l),path:s.path})),u=d.createHref(c);return a({fullPath:c,hash:l,query:i===Ue?Le(e.query):e.query||{}},s,{redirectedFrom:void 0,href:u})}function D(e){return"string"===typeof e?p(n,e,v.value.path):a({},e)}function U(e,t){if(w!==e)return q(8,{from:t,to:e})}function L(e){return F(e)}function B(e){return L(a(D(e),{replace:!0}))}function M(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=D(r):{path:r},r.params={}),a({query:e.query,hash:e.hash,params:"path"in r?{}:e.params},r)}}function F(e,t){const n=w=O(e),r=v.value,o=e.state,s=e.force,l=!0===e.replace,c=M(n);if(c)return F(a(D(c),{state:"object"===typeof c?a({},o,c.state):o,force:s,replace:l}),t||n);const u=n;let d;return u.redirectedFrom=t,!s&&m(i,r,n)&&(d=q(16,{to:u,from:r}),ne(r,r,!0,!1)),(d?Promise.resolve(d):z(u,r)).catch((e=>W(e)?W(e,2)?e:te(e):X(e,u,r))).then((e=>{if(e){if(W(e,2))return F(a({replace:l},D(e.to),{state:"object"===typeof e.to?a({},o,e.to.state):o,force:s}),t||u)}else e=K(u,r,!0,l,o);return H(u,r,e),e}))}function j(e,t){const n=U(e,t);return n?Promise.reject(n):Promise.resolve()}function z(e,t){let n;const[r,o,s]=ot(e,t);n=He(r.reverse(),"beforeRouteLeave",e,t);for(const a of r)a.leaveGuards.forEach((r=>{n.push(Ve(r,e,t))}));const i=j.bind(null,e,t);return n.push(i),rt(n).then((()=>{n=[];for(const r of h.list())n.push(Ve(r,e,t));return n.push(i),rt(n)})).then((()=>{n=He(o,"beforeRouteUpdate",e,t);for(const r of o)r.updateGuards.forEach((r=>{n.push(Ve(r,e,t))}));return n.push(i),rt(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(u(r.beforeEnter))for(const o of r.beforeEnter)n.push(Ve(o,e,t));else n.push(Ve(r.beforeEnter,e,t));return n.push(i),rt(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=He(s,"beforeRouteEnter",e,t),n.push(i),rt(n)))).then((()=>{n=[];for(const r of g.list())n.push(Ve(r,e,t));return n.push(i),rt(n)})).catch((e=>W(e,8)?e:Promise.reject(e)))}function H(e,t,n){for(const r of y.list())r(e,t,n)}function K(e,t,n,r,o){const i=U(e,t);if(i)return i;const l=t===V,c=s?history.state:{};n&&(r||l?d.replace(e.fullPath,a({scroll:l&&c&&c.scroll},o)):d.push(e.fullPath,o)),v.value=e,ne(e,t,n,l),te()}let Y;function G(){Y||(Y=d.listen(((e,t,n)=>{if(!ae.listening)return;const r=O(e),o=M(r);if(o)return void F(a(o,{replace:!0}),r).catch(c);w=r;const i=v.value;s&&N(x(i.fullPath,n.delta),T()),z(r,i).catch((e=>W(e,12)?e:W(e,2)?(F(e.to,r).then((e=>{W(e,20)&&!n.delta&&n.type===_.pop&&d.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&d.go(-n.delta,!1),X(e,r,i)))).then((e=>{e=e||K(r,i,!1),e&&(n.delta&&!W(e,8)?d.go(-n.delta,!1):n.type===_.pop&&W(e,20)&&d.go(-1,!1)),H(r,i,e)})).catch(c)})))}let Z,J=$e(),Q=$e();function X(e,t,n){te(e);const r=Q.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function ee(){return Z&&v.value!==V?Promise.resolve():new Promise(((e,t)=>{J.add([e,t])}))}function te(e){return Z||(Z=!e,G(),J.list().forEach((([t,n])=>e?n(e):t())),J.reset()),e}function ne(t,n,o,i){const{scrollBehavior:a}=e;if(!s||!a)return Promise.resolve();const l=!o&&P(x(t.fullPath,0))||(i||!o)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>a(t,n,l))).then((e=>e&&R(e))).catch((e=>X(e,t,n)))}const re=e=>d.go(e);let oe;const ie=new Set,ae={currentRoute:v,listening:!0,addRoute:k,removeRoute:C,hasRoute:A,getRoutes:I,resolve:O,options:e,push:L,replace:B,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:h.add,beforeResolve:g.add,afterEach:y.add,onError:Q.add,isReady:ee,install(e){const t=this;e.component("RouterLink",Ye),e.component("RouterView",tt),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,o.SU)(v)}),s&&!oe&&v.value===V&&(oe=!0,L(d.location).catch((e=>{0})));const n={};for(const o in V)n[o]=(0,r.Fl)((()=>v.value[o]));e.provide(Fe,t),e.provide(je,(0,o.qj)(n)),e.provide(ze,v);const i=e.unmount;ie.add(e),e.unmount=function(){ie.delete(e),ie.size<1&&(w=V,Y&&Y(),Y=null,v.value=V,oe=!1,Z=!1),i()}}};return ae}function rt(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function ot(e,t){const n=[],r=[],o=[],s=Math.max(t.matched.length,e.matched.length);for(let i=0;i<s;i++){const s=t.matched[i];s&&(e.matched.find((e=>y(e,s)))?r.push(s):n.push(s));const a=e.matched[i];a&&(t.matched.find((e=>y(e,a)))||o.push(a))}return[n,r,o]}function st(){return(0,r.f3)(Fe)}}}]);